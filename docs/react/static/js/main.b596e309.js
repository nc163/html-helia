/*! For license information please see main.b596e309.js.LICENSE.txt */
(function(){var __webpack_modules__={534:function(e,t,r){"use strict";var n=r(7313),a=r(2224);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},d={};function v(e,t,r,n,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function m(e,t,r,n){var a=y.hasOwnProperty(t)?y[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!f.call(d,e)||!f.call(p,e)&&(h.test(e)?d[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(b,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(b,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(b,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var B,U=Object.assign;function M(e){if(void 0===B)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var z=!1;function F(e,t){if(!e||z)return"";z=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=n.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?M(e):""}function V(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case E:return"StrictMode";case T:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return j(e(t))}catch(r){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=H(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var r=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function J(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=K(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&m(e,"checked",t,!1)}function X(e,t){Z(e,t);var r=K(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Y(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+K(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(i(92));if(te(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:K(r)}}function ie(e,t){var r=K(t.value),n=K(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function ve(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ye(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=ve(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(pe).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var be=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(be[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function me(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ee=null;function Se(e){if(e=ma(e)){if("function"!==typeof xe)throw Error(i(280));var t=e.stateNode;t&&(t=ka(t),xe(e.stateNode,e.type,t))}}function Ae(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Ce(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ie(e,t){return e(t)}function Te(){}var De=!1;function Re(e,t,r){if(De)return e(t,r);De=!0;try{return Ie(e,t,r)}finally{De=!1,(null!==_e||null!==Ee)&&(Te(),Ce())}}function Pe(e,t){var r=e.stateNode;if(null===r)return null;var n=ka(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(i(231,t,typeof r));return r}var Ne=!1;if(l)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(le){Ne=!1}function Oe(e,t,r,n,a,i,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(l){this.onError(l)}}var Be=!1,Ue=null,Me=!1,ze=null,Fe={onError:function(e){Be=!0,Ue=e}};function Ve(e,t,r,n,a,i,o,s,u){Be=!1,Ue=null,Oe.apply(Fe,arguments)}function je(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(je(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(i(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(n=a.return)){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return Ke(a),e;if(o===n)return Ke(a),t;o=o.sibling}throw Error(i(188))}if(r.return!==n.return)r=a,n=o;else{for(var s=!1,u=a.child;u;){if(u===r){s=!0,r=a,n=o;break}if(u===n){s=!0,n=a,r=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===r){s=!0,r=o,n=a;break}if(u===n){s=!0,n=o,r=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(r.alternate!==n)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var We=a.unstable_scheduleCallback,Ye=a.unstable_cancelCallback,Qe=a.unstable_shouldYield,Je=a.unstable_requestPaint,Ze=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&r;if(0!==o){var s=o&~a;0!==s?n=ft(s):0!==(i&=o)&&(n=ft(i))}else 0!==(o=r&~a)?n=ft(o):0!==i&&(n=ft(i));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-ot(t)),n|=e[r],t&=~a;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function dt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=r}function gt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var mt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,xt,_t,Et,St,At=!1,Ct=[],It=null,Tt=null,Dt=null,Rt=new Map,Pt=new Map,Nt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Bt(e,t,r,n,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ma(t))&&xt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ut(e){var t=ga(e.target);if(null!==t){var r=je(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=qe(r)))return e.blockedOn=t,void St(e.priority,(function(){_t(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ma(r))&&xt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);we=n,r.target.dispatchEvent(n),we=null,t.shift()}return!0}function zt(e,t,r){Mt(e)&&r.delete(t)}function Ft(){At=!1,null!==It&&Mt(It)&&(It=null),null!==Tt&&Mt(Tt)&&(Tt=null),null!==Dt&&Mt(Dt)&&(Dt=null),Rt.forEach(zt),Pt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ft)))}function jt(e){function t(t){return Vt(t,e)}if(0<Ct.length){Vt(Ct[0],e);for(var r=1;r<Ct.length;r++){var n=Ct[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==Tt&&Vt(Tt,e),null!==Dt&&Vt(Dt,e),Rt.forEach(t),Pt.forEach(t),r=0;r<Nt.length;r++)(n=Nt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Nt.length&&null===(r=Nt[0]).blockedOn;)Ut(r),null===r.blockedOn&&Nt.shift()}var qt=w.ReactCurrentBatchConfig,Kt=!0;function Ht(e,t,r,n){var a=mt,i=qt.transition;qt.transition=null;try{mt=1,Wt(e,t,r,n)}finally{mt=a,qt.transition=i}}function Gt(e,t,r,n){var a=mt,i=qt.transition;qt.transition=null;try{mt=4,Wt(e,t,r,n)}finally{mt=a,qt.transition=i}}function Wt(e,t,r,n){if(Kt){var a=Qt(e,t,r,n);if(null===a)Kn(e,t,n,Yt,r),Ot(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return It=Bt(It,e,t,r,n,a),!0;case"dragenter":return Tt=Bt(Tt,e,t,r,n,a),!0;case"mouseover":return Dt=Bt(Dt,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Rt.set(i,Bt(Rt.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Pt.set(i,Bt(Pt.get(i)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Ot(e,n),4&t&&-1<Lt.indexOf(e)){for(;null!==a;){var i=ma(a);if(null!==i&&kt(i),null===(i=Qt(e,t,r,n))&&Kn(e,t,n,Yt,r),i===a)break;a=i}null!==a&&n.stopPropagation()}else Kn(e,t,n,null,r)}}var Yt=null;function Qt(e,t,r,n){if(Yt=null,null!==(e=ga(e=ke(n))))if(null===(t=je(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case $e:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Zt=null,Xt=null,$t=null;function er(){if($t)return $t;var e,t,r=Xt,n=r.length,a="value"in Zt?Zt.value:Zt.textContent,i=a.length;for(e=0;e<n&&r[e]===a[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===a[i-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,i){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ir,or,sr,ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(ur),lr=U({},ur,{view:0,detail:0}),fr=ar(lr),hr=U({},lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(ir=e.screenX-sr.screenX,or=e.screenY-sr.screenY):or=ir=0,sr=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:or}}),pr=ar(hr),dr=ar(U({},hr,{dataTransfer:0})),vr=ar(U({},lr,{relatedTarget:0})),yr=ar(U({},ur,{animationName:0,elapsedTime:0,pseudoElement:0})),br=U({},ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gr=ar(br),mr=ar(U({},ur,{data:0})),wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _r(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xr[e])&&!!t[e]}function Er(){return _r}var Sr=U({},lr,{key:function(e){if(e.key){var t=wr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ar=ar(Sr),Cr=ar(U({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ir=ar(U({},lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er})),Tr=ar(U({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dr=U({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rr=ar(Dr),Pr=[9,13,27,32],Nr=l&&"CompositionEvent"in window,Lr=null;l&&"documentMode"in document&&(Lr=document.documentMode);var Or=l&&"TextEvent"in window&&!Lr,Br=l&&(!Nr||Lr&&8<Lr&&11>=Lr),Ur=String.fromCharCode(32),Mr=!1;function zr(e,t){switch(e){case"keyup":return-1!==Pr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vr=!1;var jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jr[e.type]:"textarea"===t}function Kr(e,t,r,n){Ae(n),0<(t=Gn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hr=null,Gr=null;function Wr(e){Mn(e,0)}function Yr(e){if(W(wa(e)))return e}function Qr(e,t){if("change"===e)return t}var Jr=!1;if(l){var Zr;if(l){var Xr="oninput"in document;if(!Xr){var $r=document.createElement("div");$r.setAttribute("oninput","return;"),Xr="function"===typeof $r.oninput}Zr=Xr}else Zr=!1;Jr=Zr&&(!document.documentMode||9<document.documentMode)}function en(){Hr&&(Hr.detachEvent("onpropertychange",tn),Gr=Hr=null)}function tn(e){if("value"===e.propertyName&&Yr(Gr)){var t=[];Kr(t,Gr,e,ke(e)),Re(Wr,t)}}function rn(e,t,r){"focusin"===e?(en(),Gr=r,(Hr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr(Gr)}function an(e,t){if("click"===e)return Yr(t)}function on(e,t){if("input"===e||"change"===e)return Yr(t)}var sn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function un(e,t){if(sn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!f.call(t,a)||!sn(e[a],t[a]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ln(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function fn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Y((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function dn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&fn(r.ownerDocument.documentElement,r)){if(null!==n&&pn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=void 0===n.end?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=ln(r,i);var o=ln(r,n);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vn=l&&"documentMode"in document&&11>=document.documentMode,yn=null,bn=null,gn=null,mn=!1;function wn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;mn||null==yn||yn!==Y(n)||("selectionStart"in(n=yn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},gn&&un(gn,n)||(gn=n,0<(n=Gn(bn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=yn)))}function kn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xn={animationend:kn("Animation","AnimationEnd"),animationiteration:kn("Animation","AnimationIteration"),animationstart:kn("Animation","AnimationStart"),transitionend:kn("Transition","TransitionEnd")},_n={},En={};function Sn(e){if(_n[e])return _n[e];if(!xn[e])return e;var t,r=xn[e];for(t in r)if(r.hasOwnProperty(t)&&t in En)return _n[e]=r[t];return e}l&&(En=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);var An=Sn("animationend"),Cn=Sn("animationiteration"),In=Sn("animationstart"),Tn=Sn("transitionend"),Dn=new Map,Rn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pn(e,t){Dn.set(e,t),u(t,[e])}for(var Nn=0;Nn<Rn.length;Nn++){var Ln=Rn[Nn];Pn(Ln.toLowerCase(),"on"+(Ln[0].toUpperCase()+Ln.slice(1)))}Pn(An,"onAnimationEnd"),Pn(Cn,"onAnimationIteration"),Pn(In,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(Tn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var On="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bn=new Set("cancel close invalid load scroll toggle".split(" ").concat(On));function Un(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,o,s,u,c){if(Ve.apply(this,arguments),Be){if(!Be)throw Error(i(198));var l=Ue;Be=!1,Ue=null,Me||(Me=!0,ze=l)}}(n,t,void 0,e),e.currentTarget=null}function Mn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Un(a,s,c),i=u}else for(o=0;o<n.length;o++){if(u=(s=n[o]).instance,c=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Un(a,s,c),i=u}}}if(Me)throw e=ze,Me=!1,ze=null,e}function zn(e,t){var r=t[va];void 0===r&&(r=t[va]=new Set);var n=e+"__bubble";r.has(n)||(qn(t,e,2,!1),r.add(n))}function Fn(e,t,r){var n=0;t&&(n|=4),qn(r,e,n,t)}var Vn="_reactListening"+Math.random().toString(36).slice(2);function jn(e){if(!e[Vn]){e[Vn]=!0,o.forEach((function(t){"selectionchange"!==t&&(Bn.has(t)||Fn(t,!1,e),Fn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vn]||(t[Vn]=!0,Fn("selectionchange",!1,t))}}function qn(e,t,r,n){switch(Jt(t)){case 1:var a=Ht;break;case 4:a=Gt;break;default:a=Wt}r=a.bind(null,t,r,e),a=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Kn(e,t,r,n,a){var i=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var s=n.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=n.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ga(s)))return;if(5===(u=o.tag)||6===u){n=i=o;continue e}s=s.parentNode}}n=n.return}Re((function(){var n=i,a=ke(r),o=[];e:{var s=Dn.get(e);if(void 0!==s){var u=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":u=Ar;break;case"focusin":c="focus",u=vr;break;case"focusout":c="blur",u=vr;break;case"beforeblur":case"afterblur":u=vr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=dr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Ir;break;case An:case Cn:case In:u=yr;break;case Tn:u=Tr;break;case"scroll":u=fr;break;case"wheel":u=Rr;break;case"copy":case"cut":case"paste":u=gr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cr}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var p,d=n;null!==d;){var v=(p=d).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==h&&(null!=(v=Pe(d,h))&&l.push(Hn(d,v,p)))),f)break;d=d.return}0<l.length&&(s=new u(s,c,null,r,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===we||!(c=r.relatedTarget||r.fromElement)||!ga(c)&&!c[da])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=n,null!==(c=(c=r.relatedTarget||r.toElement)?ga(c):null)&&(c!==(f=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=n),u!==c)){if(l=pr,v="onMouseLeave",h="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cr,v="onPointerLeave",h="onPointerEnter",d="pointer"),f=null==u?s:wa(u),p=null==c?s:wa(c),(s=new l(v,d+"leave",u,r,a)).target=f,s.relatedTarget=p,v=null,ga(a)===n&&((l=new l(h,d+"enter",c,r,a)).target=p,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,d=0,p=l=u;p;p=Wn(p))d++;for(p=0,v=h;v;v=Wn(v))p++;for(;0<d-p;)l=Wn(l),d--;for(;0<p-d;)h=Wn(h),p--;for(;d--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wn(l),h=Wn(h)}l=null}else l=null;null!==u&&Yn(o,s,u,l,!1),null!==c&&null!==f&&Yn(o,f,c,l,!0)}if("select"===(u=(s=n?wa(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Qr;else if(qr(s))if(Jr)y=on;else{y=nn;var b=rn}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=an);switch(y&&(y=y(e,n))?Kr(o,y,r,a):(b&&b(e,s,n),"focusout"===e&&(b=s._wrapperState)&&b.controlled&&"number"===s.type&&ee(s,"number",s.value)),b=n?wa(n):window,e){case"focusin":(qr(b)||"true"===b.contentEditable)&&(yn=b,bn=n,gn=null);break;case"focusout":gn=bn=yn=null;break;case"mousedown":mn=!0;break;case"contextmenu":case"mouseup":case"dragend":mn=!1,wn(o,r,a);break;case"selectionchange":if(vn)break;case"keydown":case"keyup":wn(o,r,a)}var g;if(Nr)e:{switch(e){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Vr?zr(e,r)&&(m="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(m="onCompositionStart");m&&(Br&&"ko"!==r.locale&&(Vr||"onCompositionStart"!==m?"onCompositionEnd"===m&&Vr&&(g=er()):(Xt="value"in(Zt=a)?Zt.value:Zt.textContent,Vr=!0)),0<(b=Gn(n,m)).length&&(m=new mr(m,e,null,r,a),o.push({event:m,listeners:b}),g?m.data=g:null!==(g=Fr(r))&&(m.data=g))),(g=Or?function(e,t){switch(e){case"compositionend":return Fr(t);case"keypress":return 32!==t.which?null:(Mr=!0,Ur);case"textInput":return(e=t.data)===Ur&&Mr?null:e;default:return null}}(e,r):function(e,t){if(Vr)return"compositionend"===e||!Nr&&zr(e,t)?(e=er(),$t=Xt=Zt=null,Vr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Br&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Gn(n,"onBeforeInput")).length&&(a=new mr("onBeforeInput","beforeinput",null,r,a),o.push({event:a,listeners:n}),a.data=g))}Mn(o,t)}))}function Hn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Pe(e,r))&&n.unshift(Hn(e,i,a)),null!=(i=Pe(e,t))&&n.push(Hn(e,i,a))),e=e.return}return n}function Wn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yn(e,t,r,n,a){for(var i=t._reactName,o=[];null!==r&&r!==n;){var s=r,u=s.alternate,c=s.stateNode;if(null!==u&&u===n)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=Pe(r,i))&&o.unshift(Hn(r,u,s)):a||null!=(u=Pe(r,i))&&o.push(Hn(r,u,s))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var Qn=/\r\n?/g,Jn=/\u0000|\uFFFD/g;function Zn(e){return("string"===typeof e?e:""+e).replace(Qn,"\n").replace(Jn,"")}function Xn(e,t,r){if(t=Zn(t),Zn(e)!==t&&r)throw Error(i(425))}function $n(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:na;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void jt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);jt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function la(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),ha="__reactFiber$"+fa,pa="__reactProps$"+fa,da="__reactContainer$"+fa,va="__reactEvents$"+fa,ya="__reactListeners$"+fa,ba="__reactHandles$"+fa;function ga(e){var t=e[ha];if(t)return t;for(var r=e.parentNode;r;){if(t=r[da]||r[ha]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=la(e);null!==e;){if(r=e[ha])return r;e=la(e)}return t}r=(e=r).parentNode}return null}function ma(e){return!(e=e[ha]||e[da])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ka(e){return e[pa]||null}var xa=[],_a=-1;function Ea(e){return{current:e}}function Sa(e){0>_a||(e.current=xa[_a],xa[_a]=null,_a--)}function Aa(e,t){_a++,xa[_a]=e.current,e.current=t}var Ca={},Ia=Ea(Ca),Ta=Ea(!1),Da=Ca;function Ra(e,t){var r=e.type.contextTypes;if(!r)return Ca;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in r)i[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Pa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Na(){Sa(Ta),Sa(Ia)}function La(e,t,r){if(Ia.current!==Ca)throw Error(i(168));Aa(Ia,t),Aa(Ta,r)}function Oa(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(i(108,q(e)||"Unknown",a));return U({},r,n)}function Ba(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,Da=Ia.current,Aa(Ia,e),Aa(Ta,Ta.current),!0}function Ua(e,t,r){var n=e.stateNode;if(!n)throw Error(i(169));r?(e=Oa(e,t,Da),n.__reactInternalMemoizedMergedChildContext=e,Sa(Ta),Sa(Ia),Aa(Ia,e)):Sa(Ta),Aa(Ta,r)}var Ma=null,za=!1,Fa=!1;function Va(e){null===Ma?Ma=[e]:Ma.push(e)}function ja(){if(!Fa&&null!==Ma){Fa=!0;var e=0,t=mt;try{var r=Ma;for(mt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Ma=null,za=!1}catch(a){throw null!==Ma&&(Ma=Ma.slice(e+1)),We($e,ja),a}finally{mt=t,Fa=!1}}return null}var qa=[],Ka=0,Ha=null,Ga=0,Wa=[],Ya=0,Qa=null,Ja=1,Za="";function Xa(e,t){qa[Ka++]=Ga,qa[Ka++]=Ha,Ha=e,Ga=t}function $a(e,t,r){Wa[Ya++]=Ja,Wa[Ya++]=Za,Wa[Ya++]=Qa,Qa=e;var n=Ja;e=Za;var a=32-ot(n)-1;n&=~(1<<a),r+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Ja=1<<32-ot(t)+a|r<<a|n,Za=i+e}else Ja=1<<i|r<<a|n,Za=e}function ei(e){null!==e.return&&(Xa(e,1),$a(e,1,0))}function ti(e){for(;e===Ha;)Ha=qa[--Ka],qa[Ka]=null,Ga=qa[--Ka],qa[Ka]=null;for(;e===Qa;)Qa=Wa[--Ya],Wa[Ya]=null,Za=Wa[--Ya],Wa[Ya]=null,Ja=Wa[--Ya],Wa[Ya]=null}var ri=null,ni=null,ai=!1,ii=null;function oi(e,t){var r=Rc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function si(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,ni=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,ni=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Qa?{id:Ja,overflow:Za}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Rc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ri=e,ni=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ai){var t=ni;if(t){var r=t;if(!si(e,t)){if(ui(e))throw Error(i(418));t=ca(r.nextSibling);var n=ri;t&&si(e,t)?oi(n,r):(e.flags=-4097&e.flags|2,ai=!1,ri=e)}}else{if(ui(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ri=e}}}function li(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function fi(e){if(e!==ri)return!1;if(!ai)return li(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ni)){if(ui(e))throw hi(),Error(i(418));for(;t;)oi(e,t),t=ca(t.nextSibling)}if(li(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ni=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ni=null}}else ni=ri?ca(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ni;e;)e=ca(e.nextSibling)}function pi(){ni=ri=null,ai=!1}function di(e){null===ii?ii=[e]:ii.push(e)}var vi=w.ReactCurrentBatchConfig;function yi(e,t){if(e&&e.defaultProps){for(var r in t=U({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var bi=Ea(null),gi=null,mi=null,wi=null;function ki(){wi=mi=gi=null}function xi(e){var t=bi.current;Sa(bi),e._currentValue=t}function _i(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ei(e,t){gi=e,wi=mi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Si(e){var t=e._currentValue;if(wi!==e)if(e={context:e,memoizedValue:t,next:null},null===mi){if(null===gi)throw Error(i(308));mi=e,gi.dependencies={lanes:0,firstContext:e}}else mi=mi.next=e;return t}var Ai=null;function Ci(e){null===Ai?Ai=[e]:Ai.push(e)}function Ii(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Ci(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ti(e,n)}function Ti(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Di=!1;function Ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ni(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Li(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Iu)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ti(e,r)}return null===(a=n.interleaved)?(t.next=t,Ci(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ti(e,r)}function Oi(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,gt(e,r)}}function Bi(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===i?a=i=o:i=i.next=o,r=r.next}while(null!==r);null===i?a=i=t:i=i.next=t}else a=i=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ui(e,t,r,n){var a=e.updateQueue;Di=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?i=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==i){var f=a.baseState;for(o=0,l=c=u=null,s=i;;){var h=s.lane,p=s.eventTime;if((n&h)===h){null!==l&&(l=l.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var d=e,v=s;switch(h=t,p=r,v.tag){case 1:if("function"===typeof(d=v.payload)){f=d.call(p,f,h);break e}f=d;break e;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(h="function"===typeof(d=v.payload)?d.call(p,f,h):d)||void 0===h)break e;f=U({},f,h);break e;case 2:Di=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=p,u=f):l=l.next=p,o|=h;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(h=s).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===l&&(u=f),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=l,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Bu|=o,e.lanes=o,e.memoizedState=f}}function Mi(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(i(191,a));a.call(n)}}}var zi=(new n.Component).refs;function Fi(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:U({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var Vi={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),i=Ni(n,a);i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Li(e,i,a))&&(rc(t,e,a,n),Oi(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),i=Ni(n,a);i.tag=1,i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Li(e,i,a))&&(rc(t,e,a,n),Oi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),a=Ni(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Li(e,a,n))&&(rc(t,e,n,r),Oi(t,e,n))}};function ji(e,t,r,n,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!un(r,n)||!un(a,i))}function qi(e,t,r){var n=!1,a=Ca,i=t.contextType;return"object"===typeof i&&null!==i?i=Si(i):(a=Pa(t)?Da:Ia.current,i=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ra(e,a):Ca),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vi,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ki(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Vi.enqueueReplaceState(t,t.state,null)}function Hi(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs=zi,Ri(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Si(i):(i=Pa(t)?Da:Ia.current,a.context=Ra(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(Fi(e,t,i,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Vi.enqueueReplaceState(a,a.state,null),Ui(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Gi(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(i(309));var n=r.stateNode}if(!n)throw Error(i(147,e));var a=n,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===zi&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function Wi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yi(e){return(0,e._init)(e._payload)}function Qi(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Nc(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,r,n){return null===t||6!==t.tag?((t=Uc(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var i=r.type;return i===_?f(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===P&&Yi(i)===t.type)?((n=a(t,r.props)).ref=Gi(e,t,r),n.return=e,n):((n=Lc(r.type,r.key,r.props,null,e.mode,n)).ref=Gi(e,t,r),n.return=e,n)}function l(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Mc(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function f(e,t,r,n,i){return null===t||7!==t.tag?((t=Oc(r,e.mode,n,i)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(r=Lc(t.type,t.key,t.props,null,e.mode,r)).ref=Gi(e,null,t),r.return=e,r;case x:return(t=Mc(t,e.mode,r)).return=e,t;case P:return h(e,(0,t._init)(t._payload),r)}if(te(t)||O(t))return(t=Oc(t,e.mode,r,null)).return=e,t;Wi(e,t)}return null}function p(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:u(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return r.key===a?c(e,t,r,n):null;case x:return r.key===a?l(e,t,r,n):null;case P:return p(e,t,(a=r._init)(r._payload),n)}if(te(r)||O(r))return null!==a?null:f(e,t,r,n,null);Wi(e,r)}return null}function d(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return u(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case x:return l(t,e=e.get(null===n.key?r:n.key)||null,n,a);case P:return d(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||O(n))return f(t,e=e.get(r)||null,n,a,null);Wi(t,n)}return null}function v(a,i,s,u){for(var c=null,l=null,f=i,v=i=0,y=null;null!==f&&v<s.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var b=p(a,f,s[v],u);if(null===b){null===f&&(f=y);break}e&&f&&null===b.alternate&&t(a,f),i=o(b,i,v),null===l?c=b:l.sibling=b,l=b,f=y}if(v===s.length)return r(a,f),ai&&Xa(a,v),c;if(null===f){for(;v<s.length;v++)null!==(f=h(a,s[v],u))&&(i=o(f,i,v),null===l?c=f:l.sibling=f,l=f);return ai&&Xa(a,v),c}for(f=n(a,f);v<s.length;v++)null!==(y=d(f,a,v,s[v],u))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),i=o(y,i,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(a,e)})),ai&&Xa(a,v),c}function y(a,s,u,c){var l=O(u);if("function"!==typeof l)throw Error(i(150));if(null==(u=l.call(u)))throw Error(i(151));for(var f=l=null,v=s,y=s=0,b=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(b=v,v=null):b=v.sibling;var m=p(a,v,g.value,c);if(null===m){null===v&&(v=b);break}e&&v&&null===m.alternate&&t(a,v),s=o(m,s,y),null===f?l=m:f.sibling=m,f=m,v=b}if(g.done)return r(a,v),ai&&Xa(a,y),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=h(a,g.value,c))&&(s=o(g,s,y),null===f?l=g:f.sibling=g,f=g);return ai&&Xa(a,y),l}for(v=n(a,v);!g.done;y++,g=u.next())null!==(g=d(v,a,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(a,e)})),ai&&Xa(a,y),l}return function e(n,i,o,u){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case k:e:{for(var c=o.key,l=i;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){r(n,l.sibling),(i=a(l,o.props.children)).return=n,n=i;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Yi(c)===l.type){r(n,l.sibling),(i=a(l,o.props)).ref=Gi(n,l,o),i.return=n,n=i;break e}r(n,l);break}t(n,l),l=l.sibling}o.type===_?((i=Oc(o.props.children,n.mode,u,o.key)).return=n,n=i):((u=Lc(o.type,o.key,o.props,null,n.mode,u)).ref=Gi(n,i,o),u.return=n,n=u)}return s(n);case x:e:{for(l=o.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){r(n,i.sibling),(i=a(i,o.children||[])).return=n,n=i;break e}r(n,i);break}t(n,i),i=i.sibling}(i=Mc(o,n.mode,u)).return=n,n=i}return s(n);case P:return e(n,i,(l=o._init)(o._payload),u)}if(te(o))return v(n,i,o,u);if(O(o))return y(n,i,o,u);Wi(n,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(r(n,i.sibling),(i=a(i,o)).return=n,n=i):(r(n,i),(i=Uc(o,n.mode,u)).return=n,n=i),s(n)):r(n,i)}}var Ji=Qi(!0),Zi=Qi(!1),Xi={},$i=Ea(Xi),eo=Ea(Xi),to=Ea(Xi);function ro(e){if(e===Xi)throw Error(i(174));return e}function no(e,t){switch(Aa(to,t),Aa(eo,e),Aa($i,Xi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa($i),Aa($i,t)}function ao(){Sa($i),Sa(eo),Sa(to)}function io(e){ro(to.current);var t=ro($i.current),r=ue(t,e.type);t!==r&&(Aa(eo,e),Aa($i,r))}function oo(e){eo.current===e&&(Sa($i),Sa(eo))}var so=Ea(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,ho=w.ReactCurrentBatchConfig,po=0,vo=null,yo=null,bo=null,go=!1,mo=!1,wo=0,ko=0;function xo(){throw Error(i(321))}function _o(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function Eo(e,t,r,n,a,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=r(n,a),mo){o=0;do{if(mo=!1,wo=0,25<=o)throw Error(i(301));o+=1,bo=yo=null,t.updateQueue=null,fo.current=cs,e=r(n,a)}while(mo)}if(fo.current=os,t=null!==yo&&null!==yo.next,po=0,bo=yo=vo=null,go=!1,t)throw Error(i(300));return e}function So(){var e=0!==wo;return wo=0,e}function Ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bo?vo.memoizedState=bo=e:bo=bo.next=e,bo}function Co(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===bo?vo.memoizedState:bo.next;if(null!==t)bo=t,yo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===bo?vo.memoizedState=bo=e:bo=bo.next=e}return bo}function Io(e,t){return"function"===typeof t?t(e):t}function To(e){var t=Co(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=yo,a=n.baseQueue,o=r.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}n.baseQueue=a=o,r.pending=null}if(null!==a){o=a.next,n=n.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:e(n,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=n):c=c.next=h,vo.lanes|=f,Bu|=f}l=l.next}while(null!==l&&l!==o);null===c?s=n:c.next=u,sn(n,t.memoizedState)||(ws=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{o=a.lane,vo.lanes|=o,Bu|=o,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Do(e){var t=Co(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,o=t.memoizedState;if(null!==a){r.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sn(o,t.memoizedState)||(ws=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Ro(){}function Po(e,t){var r=vo,n=Co(),a=t(),o=!sn(n.memoizedState,a);if(o&&(n.memoizedState=a,ws=!0),n=n.queue,Ko(Oo.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||null!==bo&&1&bo.memoizedState.tag){if(r.flags|=2048,zo(9,Lo.bind(null,r,n,a,t),void 0,null),null===Tu)throw Error(i(349));0!==(30&po)||No(r,t,a)}return a}function No(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Lo(e,t,r,n){t.value=r,t.getSnapshot=n,Bo(t)&&Uo(e)}function Oo(e,t,r){return r((function(){Bo(t)&&Uo(e)}))}function Bo(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sn(e,r)}catch(n){return!0}}function Uo(e){var t=Ti(e,1);null!==t&&rc(t,e,1,-1)}function Mo(e){var t=Ao();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=rs.bind(null,vo,e),[t.memoizedState,e]}function zo(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Fo(){return Co().memoizedState}function Vo(e,t,r,n){var a=Ao();vo.flags|=e,a.memoizedState=zo(1|t,r,void 0,void 0===n?null:n)}function jo(e,t,r,n){var a=Co();n=void 0===n?null:n;var i=void 0;if(null!==yo){var o=yo.memoizedState;if(i=o.destroy,null!==n&&_o(n,o.deps))return void(a.memoizedState=zo(t,r,i,n))}vo.flags|=e,a.memoizedState=zo(1|t,r,i,n)}function qo(e,t){return Vo(8390656,8,e,t)}function Ko(e,t){return jo(2048,8,e,t)}function Ho(e,t){return jo(4,2,e,t)}function Go(e,t){return jo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Yo(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,jo(4,4,Wo.bind(null,t,e),r)}function Qo(){}function Jo(e,t){var r=Co();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&_o(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Zo(e,t){var r=Co();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&_o(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Xo(e,t,r){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=r):(sn(r,t)||(r=vt(),vo.lanes|=r,Bu|=r,e.baseState=!0),t)}function $o(e,t){var r=mt;mt=0!==r&&4>r?r:4,e(!0);var n=ho.transition;ho.transition={};try{e(!1),t()}finally{mt=r,ho.transition=n}}function es(){return Co().memoizedState}function ts(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ns(e))as(t,r);else if(null!==(r=Ii(e,t,r,n))){rc(r,e,n,ec()),is(r,t,n)}}function rs(e,t,r){var n=tc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ns(e))as(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,r);if(a.hasEagerState=!0,a.eagerState=s,sn(s,o)){var u=t.interleaved;return null===u?(a.next=a,Ci(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Ii(e,t,a,n))&&(rc(r,e,n,a=ec()),is(r,t,n))}}function ns(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function as(e,t){mo=go=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function is(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,gt(e,r)}}var os={readContext:Si,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},ss={readContext:Si,useCallback:function(e,t){return Ao().memoizedState=[e,void 0===t?null:t],e},useContext:Si,useEffect:qo,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Vo(4194308,4,Wo.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var r=Ao();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ao();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ts.bind(null,vo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Ao().memoizedState=e},useState:Mo,useDebugValue:Qo,useDeferredValue:function(e){return Ao().memoizedState=e},useTransition:function(){var e=Mo(!1),t=e[0];return e=$o.bind(null,e[1]),Ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=vo,a=Ao();if(ai){if(void 0===r)throw Error(i(407));r=r()}else{if(r=t(),null===Tu)throw Error(i(349));0!==(30&po)||No(n,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,qo(Oo.bind(null,n,o,e),[e]),n.flags|=2048,zo(9,Lo.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Ao(),t=Tu.identifierPrefix;if(ai){var r=Za;t=":"+t+"R"+(r=(Ja&~(1<<32-ot(Ja)-1)).toString(32)+r),0<(r=wo++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ko++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Si,useCallback:Jo,useContext:Si,useEffect:Ko,useImperativeHandle:Yo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:Zo,useReducer:To,useRef:Fo,useState:function(){return To(Io)},useDebugValue:Qo,useDeferredValue:function(e){return Xo(Co(),yo.memoizedState,e)},useTransition:function(){return[To(Io)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1},cs={readContext:Si,useCallback:Jo,useContext:Si,useEffect:Ko,useImperativeHandle:Yo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:Zo,useReducer:Do,useRef:Fo,useState:function(){return Do(Io)},useDebugValue:Qo,useDeferredValue:function(e){var t=Co();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[Do(Io)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var r="",n=t;do{r+=V(n),n=n.return}while(n);var a=r}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function fs(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function ds(e,t,r){(r=Ni(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ku||(Ku=!0,Hu=n),hs(0,t)},r}function vs(e,t,r){(r=Ni(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){hs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(r.callback=function(){hs(0,t),"function"!==typeof n&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ys(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ps;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Sc.bind(null,e,t,r),t.then(e,e))}function bs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ni(-1,1)).tag=2,Li(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var ms=w.ReactCurrentOwner,ws=!1;function ks(e,t,r,n){t.child=null===e?Zi(t,null,r,n):Ji(t,e.child,r,n)}function xs(e,t,r,n,a){r=r.render;var i=t.ref;return Ei(t,a),n=Eo(e,t,r,n,i,a),r=So(),null===e||ws?(ai&&r&&ei(t),t.flags|=1,ks(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ks(e,t,a))}function _s(e,t,r,n,a){if(null===e){var i=r.type;return"function"!==typeof i||Pc(i)||void 0!==i.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Lc(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Es(e,t,i,n,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((r=null!==(r=r.compare)?r:un)(o,n)&&e.ref===t.ref)return Ks(e,t,a)}return t.flags|=1,(e=Nc(i,n)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,r,n,a){if(null!==e){var i=e.memoizedProps;if(un(i,n)&&e.ref===t.ref){if(ws=!1,t.pendingProps=n=i,0===(e.lanes&a))return t.lanes=e.lanes,Ks(e,t,a);0!==(131072&e.flags)&&(ws=!0)}}return Cs(e,t,r,n,a)}function Ss(e,t,r){var n=t.pendingProps,a=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Aa(Nu,Pu),Pu|=r;else{if(0===(1073741824&r))return e=null!==i?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Aa(Nu,Pu),Pu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==i?i.baseLanes:r,Aa(Nu,Pu),Pu|=n}else null!==i?(n=i.baseLanes|r,t.memoizedState=null):n=r,Aa(Nu,Pu),Pu|=n;return ks(e,t,a,r),t.child}function As(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,r,n,a){var i=Pa(r)?Da:Ia.current;return i=Ra(t,i),Ei(t,a),r=Eo(e,t,r,n,i,a),n=So(),null===e||ws?(ai&&n&&ei(t),t.flags|=1,ks(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ks(e,t,a))}function Is(e,t,r,n,a){if(Pa(r)){var i=!0;Ba(t)}else i=!1;if(Ei(t,a),null===t.stateNode)qs(e,t),qi(t,r,n),Hi(t,r,n,a),n=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=r.contextType;"object"===typeof c&&null!==c?c=Si(c):c=Ra(t,c=Pa(r)?Da:Ia.current);var l=r.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==n||u!==c)&&Ki(t,o,n,c),Di=!1;var h=t.memoizedState;o.state=h,Ui(t,n,o,a),u=t.memoizedState,s!==n||h!==u||Ta.current||Di?("function"===typeof l&&(Fi(t,r,l,n),u=t.memoizedState),(s=Di||ji(t,r,s,n,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),o.props=n,o.state=u,o.context=c,n=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Pi(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:yi(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=r.contextType)&&null!==u?u=Si(u):u=Ra(t,u=Pa(r)?Da:Ia.current);var p=r.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Ki(t,o,n,u),Di=!1,h=t.memoizedState,o.state=h,Ui(t,n,o,a);var d=t.memoizedState;s!==f||h!==d||Ta.current||Di?("function"===typeof p&&(Fi(t,r,p,n),d=t.memoizedState),(c=Di||ji(t,r,c,n,h,d,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(n,d,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,d,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=d),o.props=n,o.state=d,o.context=u,n=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Ts(e,t,r,n,i,a)}function Ts(e,t,r,n,a,i){As(e,t);var o=0!==(128&t.flags);if(!n&&!o)return a&&Ua(t,r,!1),Ks(e,t,i);n=t.stateNode,ms.current=t;var s=o&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=Ji(t,e.child,null,i),t.child=Ji(t,null,s,i)):ks(e,t,s,i),t.memoizedState=n.state,a&&Ua(t,r,!0),t.child}function Ds(e){var t=e.stateNode;t.pendingContext?La(0,t.pendingContext,t.pendingContext!==t.context):t.context&&La(0,t.context,!1),no(e,t.containerInfo)}function Rs(e,t,r,n,a){return pi(),di(a),t.flags|=256,ks(e,t,r,n),t.child}var Ps,Ns,Ls,Os={dehydrated:null,treeContext:null,retryLane:0};function Bs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Us(e,t,r){var n,a=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((n=u)||(n=(null===e||null!==e.memoizedState)&&0!==(2&o)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Aa(so,1&o),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,s?(a=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Bc(u,a,0,null),e=Oc(e,a,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Bs(r),t.memoizedState=Os,e):Ms(t,u));if(null!==(o=e.memoizedState)&&null!==(n=o.dehydrated))return function(e,t,r,n,a,o,s){if(r)return 256&t.flags?(t.flags&=-257,zs(e,t,s,n=fs(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=n.fallback,a=t.mode,n=Bc({mode:"visible",children:n.children},a,0,null),(o=Oc(o,a,s,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,0!==(1&t.mode)&&Ji(t,e.child,null,s),t.child.memoizedState=Bs(s),t.memoizedState=Os,o);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var u=n.dgst;return n=u,zs(e,t,s,n=fs(o=Error(i(419)),n,void 0))}if(u=0!==(s&e.childLanes),ws||u){if(null!==(n=Tu)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ti(e,a),rc(n,e,a,-1))}return vc(),zs(e,t,s,n=fs(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ni=ca(a.nextSibling),ri=t,ai=!0,ii=null,null!==e&&(Wa[Ya++]=Ja,Wa[Ya++]=Za,Wa[Ya++]=Qa,Ja=e.id,Za=e.overflow,Qa=t),t=Ms(t,n.children),t.flags|=4096,t)}(e,t,u,a,n,o,r);if(s){s=a.fallback,u=t.mode,n=(o=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Nc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==n?s=Nc(n,s):(s=Oc(s,u,r,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,u=null===(u=e.child.memoizedState)?Bs(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~r,t.memoizedState=Os,a}return e=(s=e.child).sibling,a=Nc(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Ms(e,t){return(t=Bc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,r,n){return null!==n&&di(n),Ji(t,e.child,null,r),(e=Ms(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),_i(e.return,t,r)}function Vs(e,t,r,n,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function js(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ks(e,t,n.children,r),0!==(2&(n=so.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,r,t);else if(19===e.tag)Fs(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Aa(so,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===uo(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Vs(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Vs(t,!0,r,null,i);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ks(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(r=Nc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Nc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Hs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ws(e,t,r){var n=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Pa(t.type)&&Na(),Gs(t),null;case 3:return n=t.stateNode,ao(),Sa(Ta),Sa(Ia),lo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(fi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(oc(ii),ii=null))),Gs(t),null;case 5:oo(t);var a=ro(to.current);if(r=t.type,null!==e&&null!=t.stateNode)Ns(e,t,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(i(166));return Gs(t),null}if(e=ro($i.current),fi(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[ha]=t,n[pa]=o,e=0!==(1&t.mode),r){case"dialog":zn("cancel",n),zn("close",n);break;case"iframe":case"object":case"embed":zn("load",n);break;case"video":case"audio":for(a=0;a<On.length;a++)zn(On[a],n);break;case"source":zn("error",n);break;case"img":case"image":case"link":zn("error",n),zn("load",n);break;case"details":zn("toggle",n);break;case"input":J(n,o),zn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},zn("invalid",n);break;case"textarea":ae(n,o),zn("invalid",n)}for(var u in ge(r,o),a=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?n.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&zn("scroll",n)}switch(r){case"input":G(n),$(n,o,!0);break;case"textarea":G(n),oe(n);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(n.onclick=$n)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=u.createElement(r,{is:n.is}):(e=u.createElement(r),"select"===r&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,r),e[ha]=t,e[pa]=n,Ps(e,t),t.stateNode=e;e:{switch(u=me(r,n),r){case"dialog":zn("cancel",e),zn("close",e),a=n;break;case"iframe":case"object":case"embed":zn("load",e),a=n;break;case"video":case"audio":for(a=0;a<On.length;a++)zn(On[a],e);a=n;break;case"source":zn("error",e),a=n;break;case"img":case"image":case"link":zn("error",e),zn("load",e),a=n;break;case"details":zn("toggle",e),a=n;break;case"input":J(e,n),a=Q(e,n),zn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=U({},n,{value:void 0}),zn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),zn("invalid",e)}for(o in ge(r,a),c=a)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==r||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&zn("scroll",e):null!=l&&m(e,o,l,u))}switch(r){case"input":G(e),$(e,n,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=n.value&&e.setAttribute("value",""+K(n.value));break;case"select":e.multiple=!!n.multiple,null!=(o=n.value)?re(e,!!n.multiple,o,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$n)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ls(0,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(i(166));if(r=ro(to.current),ro($i.current),fi(t)){if(n=t.stateNode,r=t.memoizedProps,n[ha]=t,(o=n.nodeValue!==r)&&null!==(e=ri))switch(e.tag){case 3:Xn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(n.nodeValue,r,0!==(1&e.mode))}o&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ha]=t,t.stateNode=n}return Gs(t),null;case 13:if(Sa(so),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ni&&0!==(1&t.mode)&&0===(128&t.flags))hi(),pi(),t.flags|=98560,o=!1;else if(o=fi(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[ha]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==ii&&(oc(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):vc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return ao(),null===e&&jn(t.stateNode.containerInfo),Gs(t),null;case 10:return xi(t.type._context),Gs(t),null;case 19:if(Sa(so),null===(o=t.memoizedState))return Gs(t),null;if(n=0!==(128&t.flags),null===(u=o.rendering))if(n)Hs(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Hs(o,!1),null!==(n=u.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(o=r).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Aa(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>ju&&(t.flags|=128,n=!0,Hs(o,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=uo(u))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ai)return Gs(t),null}else 2*Ze()-o.renderingStartTime>ju&&1073741824!==r&&(t.flags|=128,n=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(r=o.last)?r.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,r=so.current,Aa(so,n?1&r|2:1&r),t):(Gs(t),null);case 22:case 23:return fc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Pu)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ys(e,t){switch(ti(t),t.tag){case 1:return Pa(t.type)&&Na(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),Sa(Ta),Sa(Ia),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Sa(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(so),null;case 4:return ao(),null;case 10:return xi(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ps=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ns=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,ro($i.current);var i,o=null;switch(r){case"input":a=Q(e,a),n=Q(e,n),o=[];break;case"select":a=U({},a,{value:void 0}),n=U({},n,{value:void 0}),o=[];break;case"textarea":a=ne(e,a),n=ne(e,n),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=$n)}for(l in ge(r,n),r=null,a)if(!n.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var u=a[l];for(i in u)u.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in n){var c=n[l];if(u=null!=a?a[l]:void 0,n.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(l,r)),r=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&zn("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}r&&(o=o||[]).push("style",r);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,r,n){r!==n&&(t.flags|=4)};var Qs=!1,Js=!1,Zs="function"===typeof WeakSet?WeakSet:Set,Xs=null;function $s(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Ec(e,t,n)}else r.current=null}function eu(e,t,r){try{r()}catch(n){Ec(e,t,n)}}var tu=!1;function ru(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&eu(t,r,i)}a=a.next}while(a!==n)}}function nu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function au(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function iu(e){var t=e.alternate;null!==t&&(e.alternate=null,iu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[pa],delete t[va],delete t[ya],delete t[ba])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=$n));else if(4!==n&&null!==(e=e.child))for(uu(e,t,r),e=e.sibling;null!==e;)uu(e,t,r),e=e.sibling}function cu(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cu(e,t,r),e=e.sibling;null!==e;)cu(e,t,r),e=e.sibling}var lu=null,fu=!1;function hu(e,t,r){for(r=r.child;null!==r;)pu(e,t,r),r=r.sibling}function pu(e,t,r){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,r)}catch(s){}switch(r.tag){case 5:Js||$s(r,t);case 6:var n=lu,a=fu;lu=null,hu(e,t,r),fu=a,null!==(lu=n)&&(fu?(e=lu,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):lu.removeChild(r.stateNode));break;case 18:null!==lu&&(fu?(e=lu,r=r.stateNode,8===e.nodeType?ua(e.parentNode,r):1===e.nodeType&&ua(e,r),jt(e)):ua(lu,r.stateNode));break;case 4:n=lu,a=fu,lu=r.stateNode.containerInfo,fu=!0,hu(e,t,r),lu=n,fu=a;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&eu(r,t,o),a=a.next}while(a!==n)}hu(e,t,r);break;case 1:if(!Js&&($s(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Ec(r,t,s)}hu(e,t,r);break;case 21:hu(e,t,r);break;case 22:1&r.mode?(Js=(n=Js)||null!==r.memoizedState,hu(e,t,r),Js=n):hu(e,t,r);break;default:hu(e,t,r)}}function du(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Zs),t.forEach((function(t){var n=Ic.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function vu(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,fu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===lu)throw Error(i(160));pu(o,s,a),lu=null,fu=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(l){Ec(a,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),bu(e),4&n){try{ru(3,e,e.return),nu(3,e)}catch(y){Ec(e,e.return,y)}try{ru(5,e,e.return)}catch(y){Ec(e,e.return,y)}}break;case 1:vu(t,e),bu(e),512&n&&null!==r&&$s(r,r.return);break;case 5:if(vu(t,e),bu(e),512&n&&null!==r&&$s(r,r.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(y){Ec(e,e.return,y)}}if(4&n&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==r?r.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&Z(a,o),me(u,s);var l=me(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?ye(a,h):"dangerouslySetInnerHTML"===f?fe(a,h):"children"===f?he(a,h):m(a,f,h,l)}switch(u){case"input":X(a,o);break;case"textarea":ie(a,o);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var d=o.value;null!=d?re(a,!!o.multiple,d,!1):p!==!!o.multiple&&(null!=o.defaultValue?re(a,!!o.multiple,o.defaultValue,!0):re(a,!!o.multiple,o.multiple?[]:"",!1))}a[pa]=o}catch(y){Ec(e,e.return,y)}}break;case 6:if(vu(t,e),bu(e),4&n){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(y){Ec(e,e.return,y)}}break;case 3:if(vu(t,e),bu(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(y){Ec(e,e.return,y)}break;case 4:default:vu(t,e),bu(e);break;case 13:vu(t,e),bu(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Vu=Ze())),4&n&&du(e);break;case 22:if(f=null!==r&&null!==r.memoizedState,1&e.mode?(Js=(l=Js)||f,vu(t,e),Js=l):vu(t,e),bu(e),8192&n){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xs=e,f=e.child;null!==f;){for(h=Xs=f;null!==Xs;){switch(d=(p=Xs).child,p.tag){case 0:case 11:case 14:case 15:ru(4,p,p.return);break;case 1:$s(p,p.return);var v=p.stateNode;if("function"===typeof v.componentWillUnmount){n=p,r=p.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ec(n,r,y)}}break;case 5:$s(p,p.return);break;case 22:if(null!==p.memoizedState){ku(h);continue}}null!==d?(d.return=p,Xs=d):ku(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{a=h.stateNode,l?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(y){Ec(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ec(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vu(t,e),bu(e),4&n&&du(e);case 21:}}function bu(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ou(r)){var n=r;break e}r=r.return}throw Error(i(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(he(a,""),n.flags&=-33),cu(e,su(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(i(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gu(e,t,r){Xs=e,mu(e,t,r)}function mu(e,t,r){for(var n=0!==(1&e.mode);null!==Xs;){var a=Xs,i=a.child;if(22===a.tag&&n){var o=null!==a.memoizedState||Qs;if(!o){var s=a.alternate,u=null!==s&&null!==s.memoizedState||Js;s=Qs;var c=Js;if(Qs=o,(Js=u)&&!c)for(Xs=a;null!==Xs;)u=(o=Xs).child,22===o.tag&&null!==o.memoizedState?xu(a):null!==u?(u.return=o,Xs=u):xu(a);for(;null!==i;)Xs=i,mu(i,t,r),i=i.sibling;Xs=a,Qs=s,Js=c}wu(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Xs=i):wu(e)}}function wu(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||nu(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Js)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:yi(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Mi(t,o,n);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Mi(t,s,r)}break;case 5:var u=t.stateNode;if(null===r&&4&t.flags){r=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&jt(h)}}}break;default:throw Error(i(163))}Js||512&t.flags&&au(t)}catch(p){Ec(t,t.return,p)}}if(t===e){Xs=null;break}if(null!==(r=t.sibling)){r.return=t.return,Xs=r;break}Xs=t.return}}function ku(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Xs=r;break}Xs=t.return}}function xu(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nu(4,t)}catch(u){Ec(t,r,u)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(u){Ec(t,a,u)}}var i=t.return;try{au(t)}catch(u){Ec(t,i,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Ec(t,o,u)}}}catch(u){Ec(t,t.return,u)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var _u,Eu=Math.ceil,Su=w.ReactCurrentDispatcher,Au=w.ReactCurrentOwner,Cu=w.ReactCurrentBatchConfig,Iu=0,Tu=null,Du=null,Ru=0,Pu=0,Nu=Ea(0),Lu=0,Ou=null,Bu=0,Uu=0,Mu=0,zu=null,Fu=null,Vu=0,ju=1/0,qu=null,Ku=!1,Hu=null,Gu=null,Wu=!1,Yu=null,Qu=0,Ju=0,Zu=null,Xu=-1,$u=0;function ec(){return 0!==(6&Iu)?Ze():-1!==Xu?Xu:Xu=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Ru?Ru&-Ru:null!==vi.transition?(0===$u&&($u=vt()),$u):0!==(e=mt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,r,n){if(50<Ju)throw Ju=0,Zu=null,Error(i(185));bt(e,r,n),0!==(2&Iu)&&e===Tu||(e===Tu&&(0===(2&Iu)&&(Uu|=r),4===Lu&&sc(e,Ru)),nc(e,n),1===r&&0===Iu&&0===(1&t.mode)&&(ju=Ze()+500,za&&ja()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,u=a[o];-1===u?0!==(s&r)&&0===(s&n)||(a[o]=pt(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var n=ht(e,e===Tu?Ru:0);if(0===n)null!==r&&Ye(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ye(r),1===t)0===e.tag?function(e){za=!0,Va(e)}(uc.bind(null,e)):Va(uc.bind(null,e)),oa((function(){0===(6&Iu)&&ja()})),r=null;else{switch(wt(n)){case 1:r=$e;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Tc(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Xu=-1,$u=0,0!==(6&Iu))throw Error(i(327));var r=e.callbackNode;if(xc()&&e.callbackNode!==r)return null;var n=ht(e,e===Tu?Ru:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=yc(e,n);else{t=n;var a=Iu;Iu|=2;var o=dc();for(Tu===e&&Ru===t||(qu=null,ju=Ze()+500,hc(e,t));;)try{gc();break}catch(u){pc(e,u)}ki(),Su.current=o,Iu=a,null!==Du?t=0:(Tu=null,Ru=0,t=Lu)}if(0!==t){if(2===t&&(0!==(a=dt(e))&&(n=a,t=ic(e,a))),1===t)throw r=Ou,hc(e,0),sc(e,n),nc(e,Ze()),r;if(6===t)sc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!sn(i(),a))return!1}catch(s){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=yc(e,n))&&(0!==(o=dt(e))&&(n=o,t=ic(e,o))),1===t))throw r=Ou,hc(e,0),sc(e,n),nc(e,Ze()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(i(345));case 2:case 5:kc(e,Fu,qu);break;case 3:if(sc(e,n),(130023424&n)===n&&10<(t=Vu+500-Ze())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(kc.bind(null,e,Fu,qu),t);break}kc(e,Fu,qu);break;case 4:if(sc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var s=31-ot(n);o=1<<s,(s=t[s])>a&&(a=s),n&=~o}if(n=a,10<(n=(120>(n=Ze()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Eu(n/1960))-n)){e.timeoutHandle=na(kc.bind(null,e,Fu,qu),n);break}kc(e,Fu,qu);break;default:throw Error(i(329))}}}return nc(e,Ze()),e.callbackNode===r?ac.bind(null,e):null}function ic(e,t){var r=zu;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Fu,Fu=r,null!==t&&oc(t)),e}function oc(e){null===Fu?Fu=e:Fu.push.apply(Fu,e)}function sc(e,t){for(t&=~Mu,t&=~Uu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function uc(e){if(0!==(6&Iu))throw Error(i(327));xc();var t=ht(e,0);if(0===(1&t))return nc(e,Ze()),null;var r=yc(e,t);if(0!==e.tag&&2===r){var n=dt(e);0!==n&&(t=n,r=ic(e,n))}if(1===r)throw r=Ou,hc(e,0),sc(e,t),nc(e,Ze()),r;if(6===r)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Fu,qu),nc(e,Ze()),null}function cc(e,t){var r=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=r)&&(ju=Ze()+500,za&&ja())}}function lc(e){null!==Yu&&0===Yu.tag&&0===(6&Iu)&&xc();var t=Iu;Iu|=1;var r=Cu.transition,n=mt;try{if(Cu.transition=null,mt=1,e)return e()}finally{mt=n,Cu.transition=r,0===(6&(Iu=t))&&ja()}}function fc(){Pu=Nu.current,Sa(Nu)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Du)for(r=Du.return;null!==r;){var n=r;switch(ti(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Na();break;case 3:ao(),Sa(Ta),Sa(Ia),lo();break;case 5:oo(n);break;case 4:ao();break;case 13:case 19:Sa(so);break;case 10:xi(n.type._context);break;case 22:case 23:fc()}r=r.return}if(Tu=e,Du=e=Nc(e.current,null),Ru=Pu=t,Lu=0,Ou=null,Mu=Uu=Bu=0,Fu=zu=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(n=(r=Ai[t]).interleaved)){r.interleaved=null;var a=n.next,i=r.pending;if(null!==i){var o=i.next;i.next=a,n.next=o}r.pending=n}Ai=null}return e}function pc(e,t){for(;;){var r=Du;try{if(ki(),fo.current=os,go){for(var n=vo.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}go=!1}if(po=0,bo=yo=vo=null,mo=!1,wo=0,Au.current=null,null===r||null===r.return){Lu=1,Ou=t,Du=null;break}e:{var o=e,s=r.return,u=r,c=t;if(t=Ru,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var d=bs(s);if(null!==d){d.flags&=-257,gs(d,s,u,0,t),1&d.mode&&ys(o,l,t),c=l;var v=(t=d).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){ys(o,l,t),vc();break e}c=Error(i(426))}else if(ai&&1&u.mode){var b=bs(s);if(null!==b){0===(65536&b.flags)&&(b.flags|=256),gs(b,s,u,0,t),di(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===zu?zu=[o]:zu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Bi(o,ds(0,c,t));break e;case 1:u=c;var g=o.type,m=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==m&&"function"===typeof m.componentDidCatch&&(null===Gu||!Gu.has(m)))){o.flags|=65536,t&=-t,o.lanes|=t,Bi(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}wc(r)}catch(w){t=w,Du===r&&null!==r&&(Du=r=r.return);continue}break}}function dc(){var e=Su.current;return Su.current=os,null===e?os:e}function vc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Tu||0===(268435455&Bu)&&0===(268435455&Uu)||sc(Tu,Ru)}function yc(e,t){var r=Iu;Iu|=2;var n=dc();for(Tu===e&&Ru===t||(qu=null,hc(e,t));;)try{bc();break}catch(a){pc(e,a)}if(ki(),Iu=r,Su.current=n,null!==Du)throw Error(i(261));return Tu=null,Ru=0,Lu}function bc(){for(;null!==Du;)mc(Du)}function gc(){for(;null!==Du&&!Qe();)mc(Du)}function mc(e){var t=_u(e.alternate,e,Pu);e.memoizedProps=e.pendingProps,null===t?wc(e):Du=t,Au.current=null}function wc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ws(r,t,Pu)))return void(Du=r)}else{if(null!==(r=Ys(r,t)))return r.flags&=32767,void(Du=r);if(null===e)return Lu=6,void(Du=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Lu&&(Lu=5)}function kc(e,t,r){var n=mt,a=Cu.transition;try{Cu.transition=null,mt=1,function(e,t,r,n){do{xc()}while(null!==Yu);if(0!==(6&Iu))throw Error(i(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ot(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}(e,o),e===Tu&&(Du=Tu=null,Ru=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Wu||(Wu=!0,Tc(tt,(function(){return xc(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=Cu.transition,Cu.transition=null;var s=mt;mt=1;var u=Iu;Iu|=4,Au.current=null,function(e,t){if(ea=Kt,pn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(k){r=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,p=null;t:for(;;){for(var d;h!==r||0!==a&&3!==h.nodeType||(u=s+a),h!==o||0!==n&&3!==h.nodeType||(c=s+n),3===h.nodeType&&(s+=h.nodeValue.length),null!==(d=h.firstChild);)p=h,h=d;for(;;){if(h===e)break t;if(p===r&&++l===a&&(u=s),p===o&&++f===n&&(c=s),null!==(d=h.nextSibling))break;p=(h=p).parentNode}h=d}r=-1===u||-1===c?null:{start:u,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Kt=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,b=v.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:yi(t.type,y),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(k){Ec(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}v=tu,tu=!1}(e,r),yu(r,e),dn(ta),Kt=!!ea,ta=ea=null,e.current=r,gu(r,e,a),Je(),Iu=u,mt=s,Cu.transition=o}else e.current=r;if(Wu&&(Wu=!1,Yu=e,Qu=a),o=e.pendingLanes,0===o&&(Gu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Ze()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Ku)throw Ku=!1,e=Hu,Hu=null,e;0!==(1&Qu)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Zu?Ju++:(Ju=0,Zu=e):Ju=0,ja()}(e,t,r,n)}finally{Cu.transition=a,mt=n}return null}function xc(){if(null!==Yu){var e=wt(Qu),t=Cu.transition,r=mt;try{if(Cu.transition=null,mt=16>e?16:e,null===Yu)var n=!1;else{if(e=Yu,Yu=null,Qu=0,0!==(6&Iu))throw Error(i(331));var a=Iu;for(Iu|=4,Xs=e.current;null!==Xs;){var o=Xs,s=o.child;if(0!==(16&Xs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Xs=l;null!==Xs;){var f=Xs;switch(f.tag){case 0:case 11:case 15:ru(8,f,o)}var h=f.child;if(null!==h)h.return=f,Xs=h;else for(;null!==Xs;){var p=(f=Xs).sibling,d=f.return;if(iu(f),f===l){Xs=null;break}if(null!==p){p.return=d,Xs=p;break}Xs=d}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(null!==y)}}Xs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(o=Xs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xs=g;break e}Xs=o.return}}var m=e.current;for(Xs=m;null!==Xs;){var w=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Xs=w;else e:for(s=m;null!==Xs;){if(0!==(2048&(u=Xs).flags))try{switch(u.tag){case 0:case 11:case 15:nu(9,u)}}catch(x){Ec(u,u.return,x)}if(u===s){Xs=null;break e}var k=u.sibling;if(null!==k){k.return=u.return,Xs=k;break e}Xs=u.return}}if(Iu=a,ja(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(x){}n=!0}return n}finally{mt=r,Cu.transition=t}}return!1}function _c(e,t,r){e=Li(e,t=ds(0,t=ls(r,t),1),1),t=ec(),null!==e&&(bt(e,1,t),nc(e,t))}function Ec(e,t,r){if(3===e.tag)_c(e,e,r);else for(;null!==t;){if(3===t.tag){_c(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Gu||!Gu.has(n))){t=Li(t,e=vs(t,e=ls(r,e),1),1),e=ec(),null!==t&&(bt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Tu===e&&(Ru&r)===r&&(4===Lu||3===Lu&&(130023424&Ru)===Ru&&500>Ze()-Vu?hc(e,0):Mu|=r),nc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var r=ec();null!==(e=Ti(e,t))&&(bt(e,t,r),nc(e,r))}function Cc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Ac(e,r)}function Ic(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(i(314))}null!==n&&n.delete(t),Ac(e,r)}function Tc(e,t){return We(e,t)}function Dc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,r,n){return new Dc(e,t,r,n)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nc(e,t){var r=e.alternate;return null===r?((r=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Lc(e,t,r,n,a,o){var s=2;if(n=e,"function"===typeof e)Pc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Oc(r.children,a,o,t);case E:s=8,a|=8;break;case S:return(e=Rc(12,r,t,2|a)).elementType=S,e.lanes=o,e;case T:return(e=Rc(13,r,t,a)).elementType=T,e.lanes=o,e;case D:return(e=Rc(19,r,t,a)).elementType=D,e.lanes=o,e;case N:return Bc(r,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case C:s=9;break e;case I:s=11;break e;case R:s=14;break e;case P:s=16,n=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rc(s,r,t,a)).elementType=e,t.type=n,t.lanes=o,t}function Oc(e,t,r,n){return(e=Rc(7,e,n,t)).lanes=r,e}function Bc(e,t,r,n){return(e=Rc(22,e,n,t)).elementType=N,e.lanes=r,e.stateNode={isHidden:!1},e}function Uc(e,t,r){return(e=Rc(6,e,null,t)).lanes=r,e}function Mc(e,t,r){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Fc(e,t,r,n,a,i,o,s,u){return e=new zc(e,t,r,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ri(i),e}function Vc(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function jc(e){if(!e)return Ca;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var r=e.type;if(Pa(r))return Oa(e,r,t)}return t}function qc(e,t,r,n,a,i,o,s,u){return(e=Fc(r,n,!0,e,0,i,0,s,u)).context=jc(null),r=e.current,(i=Ni(n=ec(),a=tc(r))).callback=void 0!==t&&null!==t?t:null,Li(r,i,a),e.current.lanes=a,bt(e,a,n),nc(e,n),e}function Kc(e,t,r,n){var a=t.current,i=ec(),o=tc(a);return r=jc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ni(i,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Li(a,t,o))&&(rc(e,a,o,i),Oi(e,a,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Wc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}_u=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)ws=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return ws=!1,function(e,t,r){switch(t.tag){case 3:Ds(t),pi();break;case 5:io(t);break;case 1:Pa(t.type)&&Ba(t);break;case 4:no(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Aa(bi,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Aa(so,1&so.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Us(e,t,r):(Aa(so,1&so.current),null!==(e=Ks(e,t,r))?e.sibling:null);Aa(so,1&so.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return js(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Aa(so,so.current),n)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,r)}return Ks(e,t,r)}(e,t,r);ws=0!==(131072&e.flags)}else ws=!1,ai&&0!==(1048576&t.flags)&&$a(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;qs(e,t),e=t.pendingProps;var a=Ra(t,Ia.current);Ei(t,r),a=Eo(null,t,n,e,a,r);var o=So();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pa(n)?(o=!0,Ba(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ri(t),a.updater=Vi,t.stateNode=a,a._reactInternals=t,Hi(t,n,e,r),t=Ts(null,t,n,!0,o,r)):(t.tag=0,ai&&o&&ei(t),ks(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(n),e=yi(n,e),a){case 0:t=Cs(null,t,n,e,r);break e;case 1:t=Is(null,t,n,e,r);break e;case 11:t=xs(null,t,n,e,r);break e;case 14:t=_s(null,t,n,yi(n.type,e),r);break e}throw Error(i(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,Cs(e,t,n,a=t.elementType===n?a:yi(n,a),r);case 1:return n=t.type,a=t.pendingProps,Is(e,t,n,a=t.elementType===n?a:yi(n,a),r);case 3:e:{if(Ds(t),null===e)throw Error(i(387));n=t.pendingProps,a=(o=t.memoizedState).element,Pi(e,t),Ui(t,n,null,r);var s=t.memoizedState;if(n=s.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,n,r,a=ls(Error(i(423)),t));break e}if(n!==a){t=Rs(e,t,n,r,a=ls(Error(i(424)),t));break e}for(ni=ca(t.stateNode.containerInfo.firstChild),ri=t,ai=!0,ii=null,r=Zi(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(pi(),n===a){t=Ks(e,t,r);break e}ks(e,t,n,r)}t=t.child}return t;case 5:return io(t),null===e&&ci(t),n=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,ra(n,a)?s=null:null!==o&&ra(n,o)&&(t.flags|=32),As(e,t),ks(e,t,s,r),t.child;case 6:return null===e&&ci(t),null;case 13:return Us(e,t,r);case 4:return no(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ji(t,null,n,r):ks(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,xs(e,t,n,a=t.elementType===n?a:yi(n,a),r);case 7:return ks(e,t,t.pendingProps,r),t.child;case 8:case 12:return ks(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Aa(bi,n._currentValue),n._currentValue=s,null!==o)if(sn(o.value,s)){if(o.children===a.children&&!Ta.current){t=Ks(e,t,r);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===n){if(1===o.tag){(c=Ni(-1,r&-r)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=r,null!==(c=o.alternate)&&(c.lanes|=r),_i(o.return,r,t),u.lanes|=r;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=r,null!==(u=s.alternate)&&(u.lanes|=r),_i(s,r,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ks(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ei(t,r),n=n(a=Si(a)),t.flags|=1,ks(e,t,n,r),t.child;case 14:return a=yi(n=t.type,t.pendingProps),_s(e,t,n,a=yi(n.type,a),r);case 15:return Es(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:yi(n,a),qs(e,t),t.tag=1,Pa(n)?(e=!0,Ba(t)):e=!1,Ei(t,r),qi(t,n,a),Hi(t,n,a,r),Ts(null,t,n,!0,e,r);case 19:return js(e,t,r);case 22:return Ss(e,t,r)}throw Error(i(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Hc(o);s.call(e)}}Kc(t,o,e,a)}else o=function(e,t,r,n,a){if(a){if("function"===typeof n){var i=n;n=function(){var e=Hc(o);i.call(e)}}var o=qc(t,n,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[da]=o.current,jn(8===e.nodeType?e.parentNode:e),lc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var s=n;n=function(){var e=Hc(u);s.call(e)}}var u=Fc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=u,e[da]=u.current,jn(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,u,r,n)})),u}(r,t,e,a,n);return Hc(o)}Jc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Kc(e,t,null,null)},Jc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[da]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Nt.length&&0!==t&&t<Nt[r].priority;r++);Nt.splice(r,0,e),0===r&&Ut(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ft(t.pendingLanes);0!==r&&(gt(t,1|r),nc(t,Ze()),0===(6&Iu)&&(ju=Ze()+500,ja()))}break;case 13:lc((function(){var t=Ti(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Ti(e,134217728);if(null!==t)rc(t,e,134217728,ec());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),r=Ti(e,t);if(null!==r)rc(r,e,t,ec());Wc(e,t)}},Et=function(){return mt},St=function(e,t){var r=mt;try{return mt=e,t()}finally{mt=r}},xe=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ka(n);if(!a)throw Error(i(90));W(n),X(n,a)}}}break;case"textarea":ie(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ie=cc,Te=lc;var tl={usingClientEntryPoint:!1,Events:[ma,wa,ka,Ae,Ce,cc]},rl={findFiberByHostInstance:ga,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nl={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{at=al.inject(nl),it=al}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(i(200));return Vc(e,t,null,r)},t.createRoot=function(e,t){if(!Zc(e))throw Error(i(299));var r=!1,n="",a=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Fc(e,1,!1,null,0,r,0,n,a),e[da]=t.current,jn(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,r){if(!Xc(t))throw Error(i(200));return el(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Zc(e))throw Error(i(405));var n=null!=r&&r.hydratedSources||null,a=!1,o="",s=Yc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(o=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=qc(t,null,e,1,null!=r?r:null,a,0,o,s),e[da]=t.current,jn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Jc(t)},t.render=function(e,t,r){if(!Xc(t))throw Error(i(200));return el(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(i(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[da]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Xc(r))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return el(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},1739:function(e,t,r){"use strict";var n=r(1168);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},1168:function(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(534)},5918:function(e,t,r){"use strict";var n=r(7313),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,i={},c=null,l=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,n)&&!u.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:s.current}}t.jsx=c,t.jsxs=c},306:function(e,t){"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function b(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||d}function g(){}function m(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||d}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=b.prototype;var w=m.prototype=new g;w.constructor=m,v(w,b.prototype),w.isPureReactComponent=!0;var k=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,a)&&!E.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:r,type:e,key:o,ref:s,props:i,_owner:_.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case r:case n:u=!0}}if(u)return o=o(u=e),e=""===i?"."+I(u,0):i,k(o)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),T(o,t,a,"",(function(e){return e}))):null!=o&&(A(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",k(e))for(var c=0;c<e.length;c++){var l=i+I(s=e[c],c);u+=T(s,t,a,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=T(s=s.value,t,a,l=i+I(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function D(e,t,r){if(null==e)return e;var n=[],a=0;return T(e,n,"","",(function(e){return t.call(r,e,a++)})),n}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},N={transition:null},L={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:N,ReactCurrentOwner:_};t.Children={map:D,forEach:function(e,t,r){D(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=a,t.Profiler=o,t.PureComponent=m,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=v({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}return{$$typeof:r,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,r){return P.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,r){return P.current.useReducer(e,t,r)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return P.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},7313:function(e,t,r){"use strict";e.exports=r(306)},6417:function(e,t,r){"use strict";e.exports=r(5918)},3095:function(e,t){"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<i(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,o=a>>>1;n<o;){var s=2*(n+1)-1,u=e[s],c=s+1,l=e[c];if(0>i(u,r))c<a&&0>i(l,u)?(e[n]=l,e[c]=r,n=c):(e[n]=u,e[s]=r,n=s);else{if(!(c<a&&0>i(l,r)))break e;e[n]=l,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,p=3,d=!1,v=!1,y=!1,b="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,m="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=n(l);null!==t;){if(null===t.callback)a(l);else{if(!(t.startTime<=e))break;a(l),t.sortIndex=t.expirationTime,r(c,t)}t=n(l)}}function k(e){if(y=!1,w(e),!v)if(null!==n(c))v=!0,N(x);else{var t=n(l);null!==t&&L(k,t.startTime-e)}}function x(e,r){v=!1,y&&(y=!1,g(A),A=-1),d=!0;var i=p;try{for(w(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!T());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var s=o(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof s?h.callback=s:h===n(c)&&a(c),w(r)}else a(c);h=n(c)}if(null!==h)var u=!0;else{var f=n(l);null!==f&&L(k,f.startTime-r),u=!1}return u}finally{h=null,p=i,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,S=null,A=-1,C=5,I=-1;function T(){return!(t.unstable_now()-I<C)}function D(){if(null!==S){var e=t.unstable_now();I=e;var r=!0;try{r=S(!0,e)}finally{r?_():(E=!1,S=null)}}else E=!1}if("function"===typeof m)_=function(){m(D)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=D,_=function(){P.postMessage(null)}}else _=function(){b(D,0)};function N(e){S=e,E||(E=!0,_())}function L(e,r){A=b((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||d||(v=!0,N(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,r(l,e),null===n(c)&&e===n(l)&&(y?(g(A),A=-1):y=!0,L(k,i-o))):(e.sortIndex=s,r(c,e),v||d||(v=!0,N(x))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},2224:function(e,t,r){"use strict";e.exports=r(3095)},402:function(e,t,r){"use strict";var n=r(7061).default,a=r(8416).default,i=r(7156).default,o="undefined"!==typeof BigUint64Array,s=Symbol(),u=1024;function c(e,t){var r=new Uint32Array(e),n=new Uint16Array(e),a=r[t+-4>>>2]>>>1,i=t>>>1;if(a<=u)return String.fromCharCode.apply(String,n.subarray(i,i+a));var o=[];do{var s=n[i+u-1],c=s>=55296&&s<56320?1023:u;o.push(String.fromCharCode.apply(String,n.subarray(i,i+=c))),a-=c}while(a>u);return o.join("")+String.fromCharCode.apply(String,n.subarray(i,i+a))}function l(e){var t={};function r(e,t){return e?c(e.buffer,t):"<yet unknown>"}var n=e.env=e.env||{};return n.abort=n.abort||function(e,a,i,o){var s=t.memory||n.memory;throw Error("abort: "+r(s,e)+" at "+r(s,a)+":"+i+":"+o)},n.trace=n.trace||function(e,a){var i=t.memory||n.memory;console.log("trace: "+r(i,e)+(a?" ":"")+Array.prototype.slice.call(arguments,2,2+a).join(", "))},e.Math=e.Math||Math,e.Date=e.Date||Date,t}function f(e,t){var r=t.exports,n=r.memory,a=r.table,i=r.__alloc,s=r.__retain,u=r.__rtti_base||-1;function l(e){var t=new Uint32Array(n.buffer);if((e>>>=0)>=t[u>>>2])throw Error("invalid id: "+e);return t[(u+4>>>2)+2*e]}function f(e){var t=new Uint32Array(n.buffer);if((e>>>=0)>=t[u>>>2])throw Error("invalid id: "+e);return t[(u+4>>>2)+2*e+1]}function h(e){return 31-Math.clz32(e>>>5&31)}function p(e,t,r){var a=n.buffer;if(r)switch(e){case 2:return new Float32Array(a);case 3:return new Float64Array(a)}else switch(e){case 0:return new(t?Int8Array:Uint8Array)(a);case 1:return new(t?Int16Array:Uint16Array)(a);case 2:return new(t?Int32Array:Uint32Array)(a);case 3:return new(t?BigInt64Array:BigUint64Array)(a)}throw Error("unsupported align: "+e)}function d(e){var t=new Uint32Array(n.buffer),r=t[e+-8>>>2],a=l(r);if(!(1&a))throw Error("not an array: "+r);var i=h(a),o=t[e+4>>>2],s=2&a?t[e+12>>>2]:t[o+-4>>>2]>>>i;return p(i,1024&a,2048&a).subarray(o>>>=i,o+s)}function v(e,t,r){return new e(y(e,t,r))}function y(e,t,r){var a=n.buffer,i=new Uint32Array(a),o=i[r+4>>>2];return new e(a,o,i[o+-4>>>2]>>>t)}return e.__allocString=function(e){for(var t=e.length,r=i(t<<1,1),a=new Uint16Array(n.buffer),o=0,s=r>>>1;o<t;++o)a[s+o]=e.charCodeAt(o);return r},e.__getString=function(e){var t=n.buffer;if(1!==new Uint32Array(t)[e+-8>>>2])throw Error("not a string: "+e);return c(t,e)},e.__allocArray=function(e,t){var r=l(e);if(!(3&r))throw Error("not an array: "+e+" @ "+r);var a=h(r),o=t.length,u=i(o<<a,0),c=i(2&r?16:12,e),f=new Uint32Array(n.buffer);f[c+0>>>2]=s(u),f[c+4>>>2]=u,f[c+8>>>2]=o<<a,2&r&&(f[c+12>>>2]=o);var d=p(a,1024&r,2048&r);if(8192&r)for(var v=0;v<o;++v)d[(u>>>a)+v]=s(t[v]);else d.set(t,u>>>a);return c},e.__getArrayView=d,e.__getArray=function(e){for(var t=d(e),r=t.length,n=new Array(r),a=0;a<r;a++)n[a]=t[a];return n},e.__getArrayBuffer=function(e){var t=n.buffer,r=new Uint32Array(t)[e+-4>>>2];return t.slice(e,e+r)},e.__getInt8Array=v.bind(null,Int8Array,0),e.__getInt8ArrayView=y.bind(null,Int8Array,0),e.__getUint8Array=v.bind(null,Uint8Array,0),e.__getUint8ArrayView=y.bind(null,Uint8Array,0),e.__getUint8ClampedArray=v.bind(null,Uint8ClampedArray,0),e.__getUint8ClampedArrayView=y.bind(null,Uint8ClampedArray,0),e.__getInt16Array=v.bind(null,Int16Array,1),e.__getInt16ArrayView=y.bind(null,Int16Array,1),e.__getUint16Array=v.bind(null,Uint16Array,1),e.__getUint16ArrayView=y.bind(null,Uint16Array,1),e.__getInt32Array=v.bind(null,Int32Array,2),e.__getInt32ArrayView=y.bind(null,Int32Array,2),e.__getUint32Array=v.bind(null,Uint32Array,2),e.__getUint32ArrayView=y.bind(null,Uint32Array,2),o&&(e.__getInt64Array=v.bind(null,BigInt64Array,3),e.__getInt64ArrayView=y.bind(null,BigInt64Array,3),e.__getUint64Array=v.bind(null,BigUint64Array,3),e.__getUint64ArrayView=y.bind(null,BigUint64Array,3)),e.__getFloat32Array=v.bind(null,Float32Array,2),e.__getFloat32ArrayView=y.bind(null,Float32Array,2),e.__getFloat64Array=v.bind(null,Float64Array,3),e.__getFloat64ArrayView=y.bind(null,Float64Array,3),e.__instanceof=function(e,t){var r=new Uint32Array(n.buffer),a=r[e+-8>>>2];if(a<=r[u>>>2])do{if(a==t)return!0}while(a=f(a));return!1},e.memory=e.memory||n,e.table=e.table||a,b(r,e)}function h(e){return"undefined"!==typeof Response&&e instanceof Response}function p(e,t){return d.apply(this,arguments)}function d(){return(d=i(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,t;case 3:if(e.t1=t=e.sent,!(0,e.t0)(e.t1)){e.next=6;break}return e.abrupt("return",v(t,r));case 6:if(e.t2=f,e.t3=l(r||(r={})),e.t4=WebAssembly,!(t instanceof WebAssembly.Module)){e.next=13;break}e.t5=t,e.next=16;break;case 13:return e.next=15,WebAssembly.compile(t);case 15:e.t5=e.sent;case 16:return e.t6=e.t5,e.t7=r,e.next=20,e.t4.instantiate.call(e.t4,e.t6,e.t7);case 20:return e.t8=e.sent,e.abrupt("return",(0,e.t2)(e.t3,e.t8));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return y.apply(this,arguments)}function y(){return(y=i(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(WebAssembly.instantiateStreaming){e.next=14;break}return e.t0=p,e.t1=h,e.next=5,t;case 5:if(e.t2=t=e.sent,!(0,e.t1)(e.t2)){e.next=10;break}e.t3=t.arrayBuffer(),e.next=11;break;case 10:e.t3=t;case 11:return e.t4=e.t3,e.t5=r,e.abrupt("return",(0,e.t0)(e.t4,e.t5));case 14:return e.t6=f,e.t7=l(r||(r={})),e.next=18,WebAssembly.instantiateStreaming(t,r);case 18:return e.t8=e.sent.instance,e.abrupt("return",(0,e.t6)(e.t7,e.t8));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){var r=t?Object.create(t):{},n=e.__argumentsLength?function(t){e.__argumentsLength.value=t}:e.__setArgumentsLength||e.__setargc||function(){},i=function(){if(!Object.prototype.hasOwnProperty.call(e,o))return"continue";for(var t=e[o],i=o.split("."),u=r;i.length>1;){var c=i.shift();Object.prototype.hasOwnProperty.call(u,c)||(u[c]={}),u=u[c]}var l=i[0],f=l.indexOf("#");if(f>=0){var h=l.substring(0,f),p=u[h];if("undefined"===typeof p||!p.prototype){var d=function e(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.wrap((t=e.prototype).constructor.apply(t,[0].concat(n)))};d.prototype={valueOf:function(){return this[s]}},d.wrap=function(e){return Object.create(d.prototype,a({},s,{value:e,writable:!1}))},p&&Object.getOwnPropertyNames(p).forEach((function(e){return Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(p,e))})),u[h]=d}if(l=l.substring(f+1),u=u[h].prototype,/^(get|set):/.test(l)){if(!Object.prototype.hasOwnProperty.call(u,l=l.substring(4))){var v=e[o.replace("set:","get:")],y=e[o.replace("get:","set:")];Object.defineProperty(u,l,{get:function(){return v(this[s])},set:function(e){y(this[s],e)},enumerable:!0})}}else"constructor"===l?(u[l]=function(){return n(arguments.length),t.apply(void 0,arguments)}).original=t:(u[l]=function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n(r.length),t.apply(void 0,[this[s]].concat(r))}).original=t}else/^(get|set):/.test(l)?Object.prototype.hasOwnProperty.call(u,l=l.substring(4))||Object.defineProperty(u,l,{get:e[o.replace("set:","get:")],set:e[o.replace("get:","set:")],enumerable:!0}):"function"===typeof t&&t!==n?(u[l]=function(){return n(arguments.length),t.apply(void 0,arguments)}).original=t:u[l]=t};for(var o in e)i();return r}t.instantiate=p,t.instantiateSync=function(e,t){return f(l(t||(t={})),new WebAssembly.Instance(e instanceof WebAssembly.Module?e:new WebAssembly.Module(e),t))},t.instantiateStreaming=v,t.demangle=b},7188:function(e,t,r){"use strict";e.exports=r(686)},686:function(e,t,r){"use strict";var n=t;function a(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(7872),n.BufferWriter=r(3721),n.Reader=r(4422),n.BufferReader=r(3559),n.util=r(8058),n.rpc=r(740),n.roots=r(5062),n.configure=a,a()},4422:function(e,t,r){"use strict";e.exports=u;var n,a=r(8058),i=a.LongBits,o=a.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}var c="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")},l=function(){return a.Buffer?function(e){return(u.create=function(e){return a.Buffer.isBuffer(e)?new n(e):c(e)})(e)}:c};function f(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw s(this,8);return new i(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}u.create=l(),u.prototype._slice=a.Array.prototype.subarray||a.Array.prototype.slice,u.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return e}}(),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return h(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|h(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=a.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=a.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},u.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},u.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){n=e,u.create=l(),n._configure();var t=a.Long?"toLong":"toNumber";a.merge(u.prototype,{int64:function(){return f.call(this)[t](!1)},uint64:function(){return f.call(this)[t](!0)},sint64:function(){return f.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},3559:function(e,t,r){"use strict";e.exports=i;var n=r(4422);(i.prototype=Object.create(n.prototype)).constructor=i;var a=r(8058);function i(e){n.call(this,e)}i._configure=function(){a.Buffer&&(i.prototype._slice=a.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},5062:function(e){"use strict";e.exports={}},740:function(e,t,r){"use strict";t.Service=r(9499)},9499:function(e,t,r){"use strict";e.exports=a;var n=r(8058);function a(e,t,r){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(a.prototype=Object.create(n.EventEmitter.prototype)).constructor=a,a.prototype.rpcCall=function e(t,r,a,i,o){if(!i)throw TypeError("request must be specified");var s=this;if(!o)return n.asPromise(e,s,t,r,a,i);if(s.rpcImpl)try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return s.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof a))try{r=a[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),o(e)}return s.emit("data",r,t),o(null,r)}s.end(!0)}))}catch(u){return s.emit("error",u,t),void setTimeout((function(){o(u)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},a.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},790:function(e,t,r){"use strict";e.exports=a;var n=r(8058);function a(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=a.zero=new a(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=a.zeroHash="\0\0\0\0\0\0\0\0";a.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new a(r,n)},a.from=function(e){if("number"===typeof e)return a.fromNumber(e);if(n.isString(e)){if(!n.Long)return a.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new a(e.low>>>0,e.high>>>0):i},a.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},a.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;a.fromHash=function(e){return e===o?i:new a((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},a.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},a.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},a.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},a.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},8058:function(e,t,r){"use strict";var n=t;function a(e,t,r){for(var n=Object.keys(t),a=0;a<n.length;++a)void 0!==e[n[a]]&&r||(e[n[a]]=t[n[a]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&a(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(9284),n.base64=r(1964),n.EventEmitter=r(1542),n.float=r(4563),n.inquire=r(9168),n.utf8=r(970),n.pool=r(3133),n.LongBits=r(790),n.isNode=Boolean("undefined"!==typeof r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"===typeof e||e instanceof String},n.isObject=function(e){return e&&"object"===typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"===typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=a,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},7872:function(e,t,r){"use strict";e.exports=f;var n,a=r(8058),i=a.LongBits,o=a.base64,s=a.utf8;function u(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function c(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function f(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var h=function(){return a.Buffer?function(){return(f.create=function(){return new n})()}:function(){return new f}};function p(e,t,r){t[r]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function v(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}f.create=h(),f.alloc=function(e){return new a.Array(e)},a.Array!==Array&&(f.alloc=a.pool(f.alloc,a.Array.prototype.subarray)),f.prototype._push=function(e,t,r){return this.tail=this.tail.next=new u(e,t,r),this.len+=t,this},d.prototype=Object.create(u.prototype),d.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},f.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},f.prototype.int32=function(e){return e<0?this._push(v,10,i.fromNumber(e)):this.uint32(e)},f.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},f.prototype.uint64=function(e){var t=i.from(e);return this._push(v,t.length(),t)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(v,t.length(),t)},f.prototype.bool=function(e){return this._push(p,1,e?1:0)},f.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(e){var t=i.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(e){return this._push(a.float.writeFloatLE,4,e)},f.prototype.double=function(e){return this._push(a.float.writeDoubleLE,8,e)};var b=a.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};f.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(a.isString(e)){var r=f.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(b,t,e)},f.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(p,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},f.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},f.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},f._configure=function(e){n=e,f.create=h(),n._configure()}},3721:function(e,t,r){"use strict";e.exports=i;var n=r(7872);(i.prototype=Object.create(n.prototype)).constructor=i;var a=r(8058);function i(){n.call(this)}function o(e,t,r){e.length<40?a.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=a._Buffer_allocUnsafe,i.writeBytesBuffer=a.Buffer&&a.Buffer.prototype instanceof Uint8Array&&"set"===a.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){a.isString(e)&&(e=a._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=a.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},i._configure()},9284:function(e){"use strict";e.exports=function(e,t){var r=new Array(arguments.length-1),n=0,a=2,i=!0;for(;a<arguments.length;)r[n++]=arguments[a++];return new Promise((function(a,o){r[n]=function(e){if(i)if(i=!1,e)o(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];a.apply(null,t)}};try{e.apply(t||null,r)}catch(s){i&&(i=!1,o(s))}}))}},1964:function(e,t){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),a=new Array(123),i=0;i<64;)a[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function(e,t,r){for(var a,i=null,o=[],s=0,u=0;t<r;){var c=e[t++];switch(u){case 0:o[s++]=n[c>>2],a=(3&c)<<4,u=1;break;case 1:o[s++]=n[a|c>>4],a=(15&c)<<2,u=2;break;case 2:o[s++]=n[a|c>>6],o[s++]=n[63&c],u=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return u&&(o[s++]=n[a],o[s++]=61,1===u&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var o="invalid encoding";r.decode=function(e,t,r){for(var n,i=r,s=0,u=0;u<e.length;){var c=e.charCodeAt(u++);if(61===c&&s>1)break;if(void 0===(c=a[c]))throw Error(o);switch(s){case 0:n=c,s=1;break;case 1:t[r++]=n<<2|(48&c)>>4,n=c,s=2;break;case 2:t[r++]=(15&n)<<4|(60&c)>>2,n=c,s=3;break;case 3:t[r++]=(3&n)<<6|c,s=0}}if(1===s)throw Error(o);return r-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},1542:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},4563:function(e){"use strict";function t(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function a(e,n,a){t[0]=e,n[a]=r[0],n[a+1]=r[1],n[a+2]=r[2],n[a+3]=r[3]}function i(e,n,a){t[0]=e,n[a]=r[3],n[a+1]=r[2],n[a+2]=r[1],n[a+3]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?a:i,e.writeFloatBE=n?i:a,e.readFloatLE=n?o:s,e.readFloatBE=n?s:o}():function(){function t(e,t,r,n){var a=t<0?1:0;if(a&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((a<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((a<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((a<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function o(e,t,r){var n=e(t,r),a=2*(n>>31)+1,i=n>>>23&255,o=8388607&n;return 255===i?o?NaN:a*(1/0):0===i?1401298464324817e-60*a*o:a*Math.pow(2,i-150)*(o+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=o.bind(null,a),e.readFloatBE=o.bind(null,i)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function a(e,n,a){t[0]=e,n[a]=r[0],n[a+1]=r[1],n[a+2]=r[2],n[a+3]=r[3],n[a+4]=r[4],n[a+5]=r[5],n[a+6]=r[6],n[a+7]=r[7]}function i(e,n,a){t[0]=e,n[a]=r[7],n[a+1]=r[6],n[a+2]=r[5],n[a+3]=r[4],n[a+4]=r[3],n[a+5]=r[2],n[a+6]=r[1],n[a+7]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?a:i,e.writeDoubleBE=n?i:a,e.readDoubleLE=n?o:s,e.readDoubleBE=n?s:o}():function(){function t(e,t,r,n,a,i){var o=n<0?1:0;if(o&&(n=-n),0===n)e(0,a,i+t),e(1/n>0?0:2147483648,a,i+r);else if(isNaN(n))e(0,a,i+t),e(2146959360,a,i+r);else if(n>17976931348623157e292)e(0,a,i+t),e((o<<31|2146435072)>>>0,a,i+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,a,i+t),e((o<<31|s/4294967296)>>>0,a,i+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(s=n*Math.pow(2,-u))>>>0,a,i+t),e((o<<31|u+1023<<20|1048576*s&1048575)>>>0,a,i+r)}}}function o(e,t,r,n,a){var i=e(n,a+t),o=e(n,a+r),s=2*(o>>31)+1,u=o>>>20&2047,c=4294967296*(1048575&o)+i;return 2047===u?c?NaN:s*(1/0):0===u?5e-324*s*c:s*Math.pow(2,u-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=o.bind(null,a,0,4),e.readDoubleBE=o.bind(null,i,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},9168:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},3133:function(e){"use strict";e.exports=function(e,t,r){var n=r||8192,a=n>>>1,i=null,o=n;return function(r){if(r<1||r>a)return e(r);o+r>n&&(i=e(n),o=0);var s=t.call(i,o,o+=r);return 7&o&&(o=1+(7|o)),s}}},970:function(e,t){"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296===(64512&r)&&56320===(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,a=null,i=[],o=0;t<r;)(n=e[t++])<128?i[o++]=n:n>191&&n<224?i[o++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[o++]=55296+(n>>10),i[o++]=56320+(1023&n)):i[o++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,i)),o=0);return a?(o&&a.push(String.fromCharCode.apply(String,i.slice(0,o))),a.join("")):String.fromCharCode.apply(String,i.slice(0,o))},r.write=function(e,t,r){for(var n,a,i=r,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296===(64512&n)&&56320===(64512&(a=e.charCodeAt(o+1)))?(n=65536+((1023&n)<<10)+(1023&a),++o,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}},5109:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6811);function a(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}function i(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}function o(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function s(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function u(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function c(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function l(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}function f(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}function h(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),l(e/4294967296>>>0,t,r),l(e>>>0,t,r+4),t}function p(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),f(e>>>0,t,r),f(e/4294967296>>>0,t,r+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=a,t.writeInt16BE=a,t.writeUint16LE=i,t.writeInt16LE=i,t.readInt32BE=o,t.readUint32BE=s,t.readInt32LE=u,t.readUint32LE=c,t.writeUint32BE=l,t.writeInt32BE=l,t.writeUint32LE=f,t.writeInt32LE=f,t.readInt64BE=function(e,t){void 0===t&&(t=0);var r=o(e,t),n=o(e,t+4);return 4294967296*r+n-4294967296*(n>>31)},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*s(e,t)+s(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var r=u(e,t);return 4294967296*u(e,t+4)+r-4294967296*(r>>31)},t.readUint64LE=function(e,t){void 0===t&&(t=0);var r=c(e,t);return 4294967296*c(e,t+4)+r},t.writeUint64BE=h,t.writeInt64BE=h,t.writeUint64LE=p,t.writeInt64LE=p,t.readUintBE=function(e,t,r){if(void 0===r&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,a=1,i=e/8+r-1;i>=r;i--)n+=t[i]*a,a*=256;return n},t.readUintLE=function(e,t,r){if(void 0===r&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,a=1,i=r;i<r+e/8;i++)n+=t[i]*a,a*=256;return n},t.writeUintBE=function(e,t,r,a){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===a&&(a=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var i=1,o=e/8+a-1;o>=a;o--)r[o]=t/i&255,i*=256;return r},t.writeUintLE=function(e,t,r,a){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===a&&(a=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var i=1,o=a;o<a+e/8;o++)r[o]=t/i&255,i*=256;return r},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e),t},t.writeFloat32LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e,!0),t},t.writeFloat64BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e),t},t.writeFloat64LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e,!0),t}},4211:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5109),a=r(9280);function i(e,t,r){for(var a=1634760805,i=857760878,o=2036477234,s=1797285236,u=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],h=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],d=r[27]<<24|r[26]<<16|r[25]<<8|r[24],v=r[31]<<24|r[30]<<16|r[29]<<8|r[28],y=t[3]<<24|t[2]<<16|t[1]<<8|t[0],b=t[7]<<24|t[6]<<16|t[5]<<8|t[4],g=t[11]<<24|t[10]<<16|t[9]<<8|t[8],m=t[15]<<24|t[14]<<16|t[13]<<8|t[12],w=a,k=i,x=o,_=s,E=u,S=c,A=l,C=f,I=h,T=p,D=d,R=v,P=y,N=b,L=g,O=m,B=0;B<20;B+=2)E=(E^=I=I+(P=(P^=w=w+E|0)>>>16|P<<16)|0)>>>20|E<<12,S=(S^=T=T+(N=(N^=k=k+S|0)>>>16|N<<16)|0)>>>20|S<<12,A=(A^=D=D+(L=(L^=x=x+A|0)>>>16|L<<16)|0)>>>20|A<<12,C=(C^=R=R+(O=(O^=_=_+C|0)>>>16|O<<16)|0)>>>20|C<<12,A=(A^=D=D+(L=(L^=x=x+A|0)>>>24|L<<8)|0)>>>25|A<<7,C=(C^=R=R+(O=(O^=_=_+C|0)>>>24|O<<8)|0)>>>25|C<<7,S=(S^=T=T+(N=(N^=k=k+S|0)>>>24|N<<8)|0)>>>25|S<<7,E=(E^=I=I+(P=(P^=w=w+E|0)>>>24|P<<8)|0)>>>25|E<<7,S=(S^=D=D+(O=(O^=w=w+S|0)>>>16|O<<16)|0)>>>20|S<<12,A=(A^=R=R+(P=(P^=k=k+A|0)>>>16|P<<16)|0)>>>20|A<<12,C=(C^=I=I+(N=(N^=x=x+C|0)>>>16|N<<16)|0)>>>20|C<<12,E=(E^=T=T+(L=(L^=_=_+E|0)>>>16|L<<16)|0)>>>20|E<<12,C=(C^=I=I+(N=(N^=x=x+C|0)>>>24|N<<8)|0)>>>25|C<<7,E=(E^=T=T+(L=(L^=_=_+E|0)>>>24|L<<8)|0)>>>25|E<<7,A=(A^=R=R+(P=(P^=k=k+A|0)>>>24|P<<8)|0)>>>25|A<<7,S=(S^=D=D+(O=(O^=w=w+S|0)>>>24|O<<8)|0)>>>25|S<<7;n.writeUint32LE(w+a|0,e,0),n.writeUint32LE(k+i|0,e,4),n.writeUint32LE(x+o|0,e,8),n.writeUint32LE(_+s|0,e,12),n.writeUint32LE(E+u|0,e,16),n.writeUint32LE(S+c|0,e,20),n.writeUint32LE(A+l|0,e,24),n.writeUint32LE(C+f|0,e,28),n.writeUint32LE(I+h|0,e,32),n.writeUint32LE(T+p|0,e,36),n.writeUint32LE(D+d|0,e,40),n.writeUint32LE(R+v|0,e,44),n.writeUint32LE(P+y|0,e,48),n.writeUint32LE(N+b|0,e,52),n.writeUint32LE(L+g|0,e,56),n.writeUint32LE(O+m|0,e,60)}function o(e,t,r,n,o){if(void 0===o&&(o=0),32!==e.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var u,c;if(0===o){if(8!==t.length&&12!==t.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=(u=new Uint8Array(16)).length-t.length,u.set(t,c)}else{if(16!==t.length)throw new Error("ChaCha nonce with counter must be 16 bytes");u=t,c=o}for(var l=new Uint8Array(64),f=0;f<r.length;f+=64){i(l,u,e);for(var h=f;h<f+64&&h<r.length;h++)n[h]=r[h]^l[h-f];s(u,0,c)}return a.wipe(l),0===o&&a.wipe(u),n}function s(e,t,r){for(var n=1;r--;)n=n+(255&e[t])|0,e[t]=255&n,n>>>=8,t++;if(n>0)throw new Error("ChaCha: counter overflow")}t.streamXOR=o,t.stream=function(e,t,r,n){return void 0===n&&(n=0),a.wipe(r),o(e,t,r,r,n)}},6555:function(e,t,r){"use strict";var n=r(4211),a=r(2637),i=r(9280),o=r(5109),s=r(491);t.Cv=32,t.WH=12,t.pg=16;var u=new Uint8Array(16),c=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,r,a){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(e,o.length-e.length);var s=new Uint8Array(32);n.stream(this._key,o,s,4);var u,c=t.length+this.tagLength;if(a){if(a.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");u=a}else u=new Uint8Array(c);return n.streamXOR(this._key,o,t,u,4),this._authenticate(u.subarray(u.length-this.tagLength,u.length),s,u.subarray(0,u.length-this.tagLength),r),i.wipe(o),u},e.prototype.open=function(e,t,r,a){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(e,o.length-e.length);var u=new Uint8Array(32);n.stream(this._key,o,u,4);var c=new Uint8Array(this.tagLength);if(this._authenticate(c,u,t.subarray(0,t.length-this.tagLength),r),!s.equal(c,t.subarray(t.length-this.tagLength,t.length)))return null;var l,f=t.length-this.tagLength;if(a){if(a.length!==f)throw new Error("ChaCha20Poly1305: incorrect destination length");l=a}else l=new Uint8Array(f);return n.streamXOR(this._key,o,t.subarray(0,t.length-this.tagLength),l,4),i.wipe(o),l},e.prototype.clean=function(){return i.wipe(this._key),this},e.prototype._authenticate=function(e,t,r,n){var s=new a.Poly1305(t);n&&(s.update(n),n.length%16>0&&s.update(u.subarray(n.length%16))),s.update(r),r.length%16>0&&s.update(u.subarray(r.length%16));var c=new Uint8Array(8);n&&o.writeUint64LE(n.length,c),s.update(c),o.writeUint64LE(r.length,c),s.update(c);for(var l=s.digest(),f=0;f<l.length;f++)e[f]=l[f];s.clean(),i.wipe(l),i.wipe(c)},e}();t.OK=c},491:function(e,t){"use strict";function r(e,t){if(e.length!==t.length)return 0;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 1&r-1>>>8}Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t,r){return~(e-1)&t|e-1&r},t.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},t.compare=r,t.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==r(e,t)}},9761:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=function(e){return"undefined"!==typeof e.saveState&&"undefined"!==typeof e.restoreState&&"undefined"!==typeof e.cleanSavedState}},7887:function(e,t,r){"use strict";var n=r(946),a=r(9280),i=function(){function e(e,t,r,a){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=a;var i=n.hmac(this._hash,r,t);this._hmac=new n.HMAC(e,i),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),r=0;r<t.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[r]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),a.wipe(this._buffer),a.wipe(this._counter),this._bufpos=0},e}();t.t=i},946:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9761),a=r(491),i=r(9280),o=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(r).clean():r.set(t);for(var a=0;a<r.length;a++)r[a]^=54;this._inner.update(r);for(a=0;a<r.length;a++)r[a]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),i.wipe(r)}return e.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();t.HMAC=o,t.hmac=function(e,t,r){var n=new o(e,t);n.update(r);var a=n.digest();return n.clean(),a},t.equal=a.equal},6811:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},2637:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(491),a=r(9280);t.DIGEST_LENGTH=16;var i=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=8191&r;var n=e[2]|e[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var a=e[4]|e[5]<<8;this._r[2]=7939&(n>>>10|a<<6);var i=e[6]|e[7]<<8;this._r[3]=8191&(a>>>7|i<<9);var o=e[8]|e[9]<<8;this._r[4]=255&(i>>>4|o<<12),this._r[5]=o>>>1&8190;var s=e[10]|e[11]<<8;this._r[6]=8191&(o>>>14|s<<2);var u=e[12]|e[13]<<8;this._r[7]=8065&(s>>>11|u<<5);var c=e[14]|e[15]<<8;this._r[8]=8191&(u>>>8|c<<8),this._r[9]=c>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,r){for(var n=this._fin?0:2048,a=this._h[0],i=this._h[1],o=this._h[2],s=this._h[3],u=this._h[4],c=this._h[5],l=this._h[6],f=this._h[7],h=this._h[8],p=this._h[9],d=this._r[0],v=this._r[1],y=this._r[2],b=this._r[3],g=this._r[4],m=this._r[5],w=this._r[6],k=this._r[7],x=this._r[8],_=this._r[9];r>=16;){var E=e[t+0]|e[t+1]<<8;a+=8191&E;var S=e[t+2]|e[t+3]<<8;i+=8191&(E>>>13|S<<3);var A=e[t+4]|e[t+5]<<8;o+=8191&(S>>>10|A<<6);var C=e[t+6]|e[t+7]<<8;s+=8191&(A>>>7|C<<9);var I=e[t+8]|e[t+9]<<8;u+=8191&(C>>>4|I<<12),c+=I>>>1&8191;var T=e[t+10]|e[t+11]<<8;l+=8191&(I>>>14|T<<2);var D=e[t+12]|e[t+13]<<8;f+=8191&(T>>>11|D<<5);var R=e[t+14]|e[t+15]<<8,P=0,N=P;N+=a*d,N+=i*(5*_),N+=o*(5*x),N+=s*(5*k),P=(N+=u*(5*w))>>>13,N&=8191,N+=c*(5*m),N+=l*(5*g),N+=f*(5*b),N+=(h+=8191&(D>>>8|R<<8))*(5*y);var L=P+=(N+=(p+=R>>>5|n)*(5*v))>>>13;L+=a*v,L+=i*d,L+=o*(5*_),L+=s*(5*x),P=(L+=u*(5*k))>>>13,L&=8191,L+=c*(5*w),L+=l*(5*m),L+=f*(5*g),L+=h*(5*b),P+=(L+=p*(5*y))>>>13,L&=8191;var O=P;O+=a*y,O+=i*v,O+=o*d,O+=s*(5*_),P=(O+=u*(5*x))>>>13,O&=8191,O+=c*(5*k),O+=l*(5*w),O+=f*(5*m),O+=h*(5*g);var B=P+=(O+=p*(5*b))>>>13;B+=a*b,B+=i*y,B+=o*v,B+=s*d,P=(B+=u*(5*_))>>>13,B&=8191,B+=c*(5*x),B+=l*(5*k),B+=f*(5*w),B+=h*(5*m);var U=P+=(B+=p*(5*g))>>>13;U+=a*g,U+=i*b,U+=o*y,U+=s*v,P=(U+=u*d)>>>13,U&=8191,U+=c*(5*_),U+=l*(5*x),U+=f*(5*k),U+=h*(5*w);var M=P+=(U+=p*(5*m))>>>13;M+=a*m,M+=i*g,M+=o*b,M+=s*y,P=(M+=u*v)>>>13,M&=8191,M+=c*d,M+=l*(5*_),M+=f*(5*x),M+=h*(5*k);var z=P+=(M+=p*(5*w))>>>13;z+=a*w,z+=i*m,z+=o*g,z+=s*b,P=(z+=u*y)>>>13,z&=8191,z+=c*v,z+=l*d,z+=f*(5*_),z+=h*(5*x);var F=P+=(z+=p*(5*k))>>>13;F+=a*k,F+=i*w,F+=o*m,F+=s*g,P=(F+=u*b)>>>13,F&=8191,F+=c*y,F+=l*v,F+=f*d,F+=h*(5*_);var V=P+=(F+=p*(5*x))>>>13;V+=a*x,V+=i*k,V+=o*w,V+=s*m,P=(V+=u*g)>>>13,V&=8191,V+=c*b,V+=l*y,V+=f*v,V+=h*d;var j=P+=(V+=p*(5*_))>>>13;j+=a*_,j+=i*x,j+=o*k,j+=s*w,P=(j+=u*m)>>>13,j&=8191,j+=c*g,j+=l*b,j+=f*y,j+=h*v,a=N=8191&(P=(P=((P+=(j+=p*d)>>>13)<<2)+P|0)+(N&=8191)|0),i=L+=P>>>=13,o=O&=8191,s=B&=8191,u=U&=8191,c=M&=8191,l=z&=8191,f=F&=8191,h=V&=8191,p=j&=8191,t+=16,r-=16}this._h[0]=a,this._h[1]=i,this._h[2]=o,this._h[3]=s,this._h[4]=u,this._h[5]=c,this._h[6]=l,this._h[7]=f,this._h[8]=h,this._h[9]=p},e.prototype.finish=function(e,t){void 0===t&&(t=0);var r,n,a,i,o=new Uint16Array(10);if(this._leftover){for(i=this._leftover,this._buffer[i++]=1;i<16;i++)this._buffer[i]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,i=2;i<10;i++)this._h[i]+=r,r=this._h[i]>>>13,this._h[i]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,o[0]=this._h[0]+5,r=o[0]>>>13,o[0]&=8191,i=1;i<10;i++)o[i]=this._h[i]+r,r=o[i]>>>13,o[i]&=8191;for(o[9]-=8192,n=(1^r)-1,i=0;i<10;i++)o[i]&=n;for(n=~n,i=0;i<10;i++)this._h[i]=this._h[i]&n|o[i];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),a=this._h[0]+this._pad[0],this._h[0]=65535&a,i=1;i<8;i++)a=(this._h[i]+this._pad[i]|0)+(a>>>16)|0,this._h[i]=65535&a;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,r=0,n=e.length;if(this._leftover){(t=16-this._leftover)>n&&(t=n);for(var a=0;a<t;a++)this._buffer[this._leftover+a]=e[r+a];if(n-=t,r+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(t=n-n%16,this._blocks(e,r,t),r+=t,n-=t),n){for(a=0;a<n;a++)this._buffer[this._leftover+a]=e[r+a];this._leftover+=n}return this},e.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return a.wipe(this._buffer),a.wipe(this._r),a.wipe(this._h),a.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();t.Poly1305=i,t.oneTimeAuth=function(e,t){var r=new i(e);r.update(t);var n=r.digest();return r.clean(),n},t.equal=function(e,r){return e.length===t.DIGEST_LENGTH&&r.length===t.DIGEST_LENGTH&&n.equal(e,r)}},9449:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;var n=r(4060),a=r(5109),i=r(9280);function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defaultRandomSource;return r.randomBytes(e)}t.defaultRandomSource=new n.SystemRandomSource,t.randomBytes=o,t.randomUint32=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.defaultRandomSource,r=o(4,e),n=(0,a.readUint32LE)(r);return(0,i.wipe)(r),n};var s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultRandomSource;if(r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");for(var a="",u=r.length,c=256-256%u;e>0;){for(var l=o(Math.ceil(256*e/c),n),f=0;f<l.length&&e>0;f++){var h=l[f];h<c&&(a+=r.charAt(h%u),e--)}(0,i.wipe)(l)}return a}t.randomString=u,t.randomStringForEntropy=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultRandomSource,a=Math.ceil(e/(Math.log(r.length)/Math.LN2));return u(a,r,n)}},4411:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;var i=function(){function e(){n(this,e),this.isAvailable=!1,this.isInstantiated=!1;var t="undefined"!==typeof self?self.crypto||self.msCrypto:null;t&&void 0!==t.getRandomValues&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return a(e,[{key:"randomBytes",value:function(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var t=new Uint8Array(e),r=0;r<t.length;r+=65536)this._crypto.getRandomValues(t.subarray(r,r+Math.min(t.length-r,65536)));return t}}]),e}();t.BrowserRandomSource=i},7166:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;var i=r(9280),o=function(){function e(){n(this,e),this.isAvailable=!1,this.isInstantiated=!1;var t=r(1586);t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return a(e,[{key:"randomBytes",value:function(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=t[n];return(0,i.wipe)(t),r}}]),e}();t.NodeRandomSource=o},4060:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;var i=r(4411),o=r(7166),s=function(){function e(){return n(this,e),this.isAvailable=!1,this.name="",this._source=new i.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new o.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}return a(e,[{key:"randomBytes",value:function(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}]),e}();t.SystemRandomSource=s},1234:function(e,t,r){"use strict";var n=r(5109),a=r(9280);t.k=32,t.cn=64;var i=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){a.wipe(this._buffer),a.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[r++],t--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(r=s(this._temp,this._state,e,r,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[r++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,a=t/536870912|0,i=t<<3,o=t%64<56?64:128;this._buffer[r]=128;for(var u=r+1;u<o-8;u++)this._buffer[u]=0;n.writeUint32BE(a,this._buffer,o-8),n.writeUint32BE(i,this._buffer,o-4),s(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(u=0;u<this.digestLength/4;u++)n.writeUint32BE(this._state[u],e,4*u);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){a.wipe(e.state),e.buffer&&a.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=i;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(e,t,r,a,i){for(;i>=64;){for(var s=t[0],u=t[1],c=t[2],l=t[3],f=t[4],h=t[5],p=t[6],d=t[7],v=0;v<16;v++){var y=a+4*v;e[v]=n.readUint32BE(r,y)}for(v=16;v<64;v++){var b=e[v-2],g=(b>>>17|b<<15)^(b>>>19|b<<13)^b>>>10,m=((b=e[v-15])>>>7|b<<25)^(b>>>18|b<<14)^b>>>3;e[v]=(g+e[v-7]|0)+(m+e[v-16]|0)}for(v=0;v<64;v++){g=(((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&h^~f&p)|0)+(d+(o[v]+e[v]|0)|0)|0,m=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&u^s&c^u&c)|0;d=p,p=h,h=f,f=l+g|0,l=c,c=u,u=s,s=g+m|0}t[0]+=s,t[1]+=u,t[2]+=c,t[3]+=l,t[4]+=f,t[5]+=h,t[6]+=p,t[7]+=d,a+=64,i-=64}return a}t.vp=function(e){var t=new i;t.update(e);var r=t.digest();return t.clean(),r}},9280:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},9109:function(e,t,r){"use strict";t.gi=t.Au=t._w=t.KS=t.kz=void 0;var n=r(9449),a=r(9280);function i(e){var t=new Float64Array(16);if(e)for(var r=0;r<e.length;r++)t[r]=e[r];return t}t.kz=32,t.KS=32;var o=new Uint8Array(32);o[0]=9;var s=i([56129,1]);function u(e){for(var t=1,r=0;r<16;r++){var n=e[r]+t+65535;t=Math.floor(n/65536),e[r]=n-65536*t}e[0]+=t-1+37*(t-1)}function c(e,t,r){for(var n=~(r-1),a=0;a<16;a++){var i=n&(e[a]^t[a]);e[a]^=i,t[a]^=i}}function l(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function f(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function h(e,t,r){var n,a,i=0,o=0,s=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,v=0,y=0,b=0,g=0,m=0,w=0,k=0,x=0,_=0,E=0,S=0,A=0,C=0,I=0,T=0,D=0,R=0,P=0,N=0,L=0,O=0,B=r[0],U=r[1],M=r[2],z=r[3],F=r[4],V=r[5],j=r[6],q=r[7],K=r[8],H=r[9],G=r[10],W=r[11],Y=r[12],Q=r[13],J=r[14],Z=r[15];i+=(n=t[0])*B,o+=n*U,s+=n*M,u+=n*z,c+=n*F,l+=n*V,f+=n*j,h+=n*q,p+=n*K,d+=n*H,v+=n*G,y+=n*W,b+=n*Y,g+=n*Q,m+=n*J,w+=n*Z,o+=(n=t[1])*B,s+=n*U,u+=n*M,c+=n*z,l+=n*F,f+=n*V,h+=n*j,p+=n*q,d+=n*K,v+=n*H,y+=n*G,b+=n*W,g+=n*Y,m+=n*Q,w+=n*J,k+=n*Z,s+=(n=t[2])*B,u+=n*U,c+=n*M,l+=n*z,f+=n*F,h+=n*V,p+=n*j,d+=n*q,v+=n*K,y+=n*H,b+=n*G,g+=n*W,m+=n*Y,w+=n*Q,k+=n*J,x+=n*Z,u+=(n=t[3])*B,c+=n*U,l+=n*M,f+=n*z,h+=n*F,p+=n*V,d+=n*j,v+=n*q,y+=n*K,b+=n*H,g+=n*G,m+=n*W,w+=n*Y,k+=n*Q,x+=n*J,_+=n*Z,c+=(n=t[4])*B,l+=n*U,f+=n*M,h+=n*z,p+=n*F,d+=n*V,v+=n*j,y+=n*q,b+=n*K,g+=n*H,m+=n*G,w+=n*W,k+=n*Y,x+=n*Q,_+=n*J,E+=n*Z,l+=(n=t[5])*B,f+=n*U,h+=n*M,p+=n*z,d+=n*F,v+=n*V,y+=n*j,b+=n*q,g+=n*K,m+=n*H,w+=n*G,k+=n*W,x+=n*Y,_+=n*Q,E+=n*J,S+=n*Z,f+=(n=t[6])*B,h+=n*U,p+=n*M,d+=n*z,v+=n*F,y+=n*V,b+=n*j,g+=n*q,m+=n*K,w+=n*H,k+=n*G,x+=n*W,_+=n*Y,E+=n*Q,S+=n*J,A+=n*Z,h+=(n=t[7])*B,p+=n*U,d+=n*M,v+=n*z,y+=n*F,b+=n*V,g+=n*j,m+=n*q,w+=n*K,k+=n*H,x+=n*G,_+=n*W,E+=n*Y,S+=n*Q,A+=n*J,C+=n*Z,p+=(n=t[8])*B,d+=n*U,v+=n*M,y+=n*z,b+=n*F,g+=n*V,m+=n*j,w+=n*q,k+=n*K,x+=n*H,_+=n*G,E+=n*W,S+=n*Y,A+=n*Q,C+=n*J,I+=n*Z,d+=(n=t[9])*B,v+=n*U,y+=n*M,b+=n*z,g+=n*F,m+=n*V,w+=n*j,k+=n*q,x+=n*K,_+=n*H,E+=n*G,S+=n*W,A+=n*Y,C+=n*Q,I+=n*J,T+=n*Z,v+=(n=t[10])*B,y+=n*U,b+=n*M,g+=n*z,m+=n*F,w+=n*V,k+=n*j,x+=n*q,_+=n*K,E+=n*H,S+=n*G,A+=n*W,C+=n*Y,I+=n*Q,T+=n*J,D+=n*Z,y+=(n=t[11])*B,b+=n*U,g+=n*M,m+=n*z,w+=n*F,k+=n*V,x+=n*j,_+=n*q,E+=n*K,S+=n*H,A+=n*G,C+=n*W,I+=n*Y,T+=n*Q,D+=n*J,R+=n*Z,b+=(n=t[12])*B,g+=n*U,m+=n*M,w+=n*z,k+=n*F,x+=n*V,_+=n*j,E+=n*q,S+=n*K,A+=n*H,C+=n*G,I+=n*W,T+=n*Y,D+=n*Q,R+=n*J,P+=n*Z,g+=(n=t[13])*B,m+=n*U,w+=n*M,k+=n*z,x+=n*F,_+=n*V,E+=n*j,S+=n*q,A+=n*K,C+=n*H,I+=n*G,T+=n*W,D+=n*Y,R+=n*Q,P+=n*J,N+=n*Z,m+=(n=t[14])*B,w+=n*U,k+=n*M,x+=n*z,_+=n*F,E+=n*V,S+=n*j,A+=n*q,C+=n*K,I+=n*H,T+=n*G,D+=n*W,R+=n*Y,P+=n*Q,N+=n*J,L+=n*Z,w+=(n=t[15])*B,o+=38*(x+=n*M),s+=38*(_+=n*z),u+=38*(E+=n*F),c+=38*(S+=n*V),l+=38*(A+=n*j),f+=38*(C+=n*q),h+=38*(I+=n*K),p+=38*(T+=n*H),d+=38*(D+=n*G),v+=38*(R+=n*W),y+=38*(P+=n*Y),b+=38*(N+=n*Q),g+=38*(L+=n*J),m+=38*(O+=n*Z),i=(n=(i+=38*(k+=n*U))+(a=1)+65535)-65536*(a=Math.floor(n/65536)),o=(n=o+a+65535)-65536*(a=Math.floor(n/65536)),s=(n=s+a+65535)-65536*(a=Math.floor(n/65536)),u=(n=u+a+65535)-65536*(a=Math.floor(n/65536)),c=(n=c+a+65535)-65536*(a=Math.floor(n/65536)),l=(n=l+a+65535)-65536*(a=Math.floor(n/65536)),f=(n=f+a+65535)-65536*(a=Math.floor(n/65536)),h=(n=h+a+65535)-65536*(a=Math.floor(n/65536)),p=(n=p+a+65535)-65536*(a=Math.floor(n/65536)),d=(n=d+a+65535)-65536*(a=Math.floor(n/65536)),v=(n=v+a+65535)-65536*(a=Math.floor(n/65536)),y=(n=y+a+65535)-65536*(a=Math.floor(n/65536)),b=(n=b+a+65535)-65536*(a=Math.floor(n/65536)),g=(n=g+a+65535)-65536*(a=Math.floor(n/65536)),m=(n=m+a+65535)-65536*(a=Math.floor(n/65536)),w=(n=w+a+65535)-65536*(a=Math.floor(n/65536)),i=(n=(i+=a-1+37*(a-1))+(a=1)+65535)-65536*(a=Math.floor(n/65536)),o=(n=o+a+65535)-65536*(a=Math.floor(n/65536)),s=(n=s+a+65535)-65536*(a=Math.floor(n/65536)),u=(n=u+a+65535)-65536*(a=Math.floor(n/65536)),c=(n=c+a+65535)-65536*(a=Math.floor(n/65536)),l=(n=l+a+65535)-65536*(a=Math.floor(n/65536)),f=(n=f+a+65535)-65536*(a=Math.floor(n/65536)),h=(n=h+a+65535)-65536*(a=Math.floor(n/65536)),p=(n=p+a+65535)-65536*(a=Math.floor(n/65536)),d=(n=d+a+65535)-65536*(a=Math.floor(n/65536)),v=(n=v+a+65535)-65536*(a=Math.floor(n/65536)),y=(n=y+a+65535)-65536*(a=Math.floor(n/65536)),b=(n=b+a+65535)-65536*(a=Math.floor(n/65536)),g=(n=g+a+65535)-65536*(a=Math.floor(n/65536)),m=(n=m+a+65535)-65536*(a=Math.floor(n/65536)),w=(n=w+a+65535)-65536*(a=Math.floor(n/65536)),i+=a-1+37*(a-1),e[0]=i,e[1]=o,e[2]=s,e[3]=u,e[4]=c,e[5]=l,e[6]=f,e[7]=h,e[8]=p,e[9]=d,e[10]=v,e[11]=y,e[12]=b,e[13]=g,e[14]=m,e[15]=w}function p(e,t){h(e,t,t)}function d(e,t){for(var r=new Uint8Array(32),n=new Float64Array(80),a=i(),o=i(),d=i(),v=i(),y=i(),b=i(),g=0;g<31;g++)r[g]=e[g];r[31]=127&e[31]|64,r[0]&=248,function(e,t){for(var r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}(n,t);for(var m=0;m<16;m++)o[m]=n[m];a[0]=v[0]=1;for(var w=254;w>=0;--w){var k=r[w>>>3]>>>(7&w)&1;c(a,o,k),c(d,v,k),l(y,a,d),f(a,a,d),l(d,o,v),f(o,o,v),p(v,y),p(b,a),h(a,d,a),h(d,o,y),l(y,a,d),f(a,a,d),p(o,a),f(d,v,b),h(a,d,s),l(a,a,v),h(d,d,a),h(a,v,b),h(v,o,n),p(o,y),c(a,o,k),c(d,v,k)}for(var x=0;x<16;x++)n[x+16]=a[x],n[x+32]=d[x],n[x+48]=o[x],n[x+64]=v[x];var _=n.subarray(32),E=n.subarray(16);!function(e,t){for(var r=i(),n=0;n<16;n++)r[n]=t[n];for(var a=253;a>=0;a--)p(r,r),2!==a&&4!==a&&h(r,r,t);for(var o=0;o<16;o++)e[o]=r[o]}(_,_),h(E,E,_);var S=new Uint8Array(32);return function(e,t){for(var r=i(),n=i(),a=0;a<16;a++)n[a]=t[a];u(n),u(n),u(n);for(var o=0;o<2;o++){r[0]=n[0]-65517;for(var s=1;s<15;s++)r[s]=n[s]-65535-(r[s-1]>>16&1),r[s-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);var l=r[15]>>16&1;r[14]&=65535,c(n,r,1-l)}for(var f=0;f<16;f++)e[2*f]=255&n[f],e[2*f+1]=n[f]>>8}(S,E),S}function v(e){return d(e,o)}function y(e){if(e.length!==t.KS)throw new Error("x25519: seed must be ".concat(t.KS," bytes"));var r=new Uint8Array(e);return{publicKey:v(r),secretKey:r}}t._w=y,t.Au=function(e){var t=(0,n.randomBytes)(32,e),r=y(t);return(0,a.wipe)(t),r},t.gi=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.length!==t.kz)throw new Error("X25519: incorrect secret key length");if(r.length!==t.kz)throw new Error("X25519: incorrect public key length");var a=d(e,r);if(n){for(var i=0,o=0;o<a.length;o++)i|=a[o];if(0===i)throw new Error("X25519: invalid shared key")}return a}},6673:function(e,t){"use strict";var r=Math.exp;e.exports=function(e){if("number"!==typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");var t,n,a=0,i=0,o=0,s={};return s.push=function(s,u){if(n){var c=1-r(-(s-n)/e),l=u-t;t=c*u+(1-c)*t,a=(1-c)*(a+l*(c*l)),i=Math.sqrt(a),o=t+c*l}else t=u;n=s},s.movingAverage=function(){return t},s.variance=function(){return a},s.deviation=function(){return i},s.forecast=function(){return o},s}},8494:function(e,t,r){"use strict";var n=r(4704).default,a=r(2122).default,i=r(6690).default,o=r(9728).default,s=r(380).fromCallback,u=r(3899),c=r(9917),l=c.getCallback,f=c.getOptions,h=Symbol("promise"),p=Symbol("status"),d=Symbol("operations"),v=Symbol("finishClose"),y=Symbol("closeCallbacks"),b=function(){function e(t){if(i(this,e),"object"!==typeof t||null===t)throw new TypeError("The first argument must be an abstract-level database, received ".concat(null===t?"null":typeof t));this[d]=[],this[y]=[],this[p]="open",this[v]=this[v].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}return o(e,[{key:"length",get:function(){return this[d].length}},{key:"put",value:function(e,t,r){if("open"!==this[p])throw new u("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});var n=this.db._checkKey(e)||this.db._checkValue(t);if(n)throw n;var i=r&&null!=r.sublevel?r.sublevel:this.db,o=r,s=i.keyEncoding(r&&r.keyEncoding),c=i.valueEncoding(r&&r.valueEncoding),l=s.format;r=a(a({},r),{},{keyEncoding:l,valueEncoding:c.format}),i!==this.db&&(r.sublevel=null);var f=i.prefixKey(s.encode(e),l),h=c.encode(t);return this._put(f,h,r),this[d].push(a(a({},o),{},{type:"put",key:e,value:t})),this}},{key:"_put",value:function(e,t,r){}},{key:"del",value:function(e,t){if("open"!==this[p])throw new u("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});var r=this.db._checkKey(e);if(r)throw r;var n=t&&null!=t.sublevel?t.sublevel:this.db,i=t,o=n.keyEncoding(t&&t.keyEncoding),s=o.format;return t=a(a({},t),{},{keyEncoding:s}),n!==this.db&&(t.sublevel=null),this._del(n.prefixKey(o.encode(e),s),t),this[d].push(a(a({},i),{},{type:"del",key:e})),this}},{key:"_del",value:function(e,t){}},{key:"clear",value:function(){if("open"!==this[p])throw new u("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[d]=[],this}},{key:"_clear",value:function(){}},{key:"write",value:function(e,t){var r=this;return t=l(e,t),t=s(t,h),e=f(e),"open"!==this[p]?this.nextTick(t,new u("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):0===this.length?this.close(t):(this[p]="writing",this._write(e,(function(e){r[p]="closing",r[y].push((function(){return t(e)})),e||r.db.emit("batch",r[d]),r._close(r[v])}))),t[h]}},{key:"_write",value:function(e,t){}},{key:"close",value:function(e){return e=s(e,h),"closing"===this[p]?this[y].push(e):"closed"===this[p]?this.nextTick(e):(this[y].push(e),"writing"!==this[p]&&(this[p]="closing",this._close(this[v]))),e[h]}},{key:"_close",value:function(e){this.nextTick(e)}},{key:v,value:function(){this[p]="closed",this.db.detachResource(this);var e=this[y];this[y]=[];var t,r=n(e);try{for(r.s();!(t=r.n()).done;){(0,t.value)()}}catch(a){r.e(a)}finally{r.f()}}}]),e}();t.AbstractChainedBatch=b},7351:function(e,t,r){"use strict";for(var n=r(1655).default,a=r(6389).default,i=r(7061).default,o=r(4704).default,s=r(2122).default,u=r(6690).default,c=r(9728).default,l=r(6737).default,f=r(8186).default,h=r(380).fromCallback,p=r(3899),d=r(9917),v=d.getOptions,y=d.getCallback,b=Symbol("promise"),g=Symbol("callback"),m=Symbol("working"),w=Symbol("handleOne"),k=Symbol("handleMany"),x=Symbol("autoClose"),_=Symbol("finishWork"),E=Symbol("returnMany"),S=Symbol("closing"),A=Symbol("handleClose"),C=Symbol("closed"),I=Symbol("closeCallbacks"),T=Symbol("keyEncoding"),D=Symbol("valueEncoding"),R=Symbol("abortOnClose"),P=Symbol("legacy"),N=Symbol("keys"),L=Symbol("values"),O=Symbol("limit"),B=Symbol("count"),U=Object.freeze({}),M=function(){},z=!1,F=function(e){function t(e,r,n){if(u(this,t),"object"!==typeof e||null===e)throw new TypeError("The first argument must be an abstract-level database, received ".concat(null===e?"null":typeof e));if("object"!==typeof r||null===r)throw new TypeError("The second argument must be an options object");this[C]=!1,this[I]=[],this[m]=!1,this[S]=!1,this[x]=!1,this[g]=null,this[w]=this[w].bind(this),this[k]=this[k].bind(this),this[A]=this[A].bind(this),this[T]=r[T],this[D]=r[D],this[P]=n,this[O]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[B]=0,this[R]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}return c(t,[{key:"count",get:function(){return this[B]}},{key:"limit",get:function(){return this[O]}},{key:"next",value:function(e){var t,r=this;if(void 0===e)t=new Promise((function(t,n){e=function(e,a,i){e?n(e):r[P]?void 0===a&&void 0===i?t():t([a,i]):t(a)}}));else if("function"!==typeof e)throw new TypeError("Callback must be a function");return this[S]?this.nextTick(e,new p("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[m]?this.nextTick(e,new p("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[m]=!0,this[g]=e,this[B]>=this[O]?this.nextTick(this[w],null):this._next(this[w])),t}},{key:"_next",value:function(e){this.nextTick(e)}},{key:"nextv",value:function(e,t,r){return r=y(t,r),r=h(r,b),t=v(t,U),Number.isInteger(e)?(this[S]?this.nextTick(r,new p("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[m]?this.nextTick(r,new p("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[O]<1/0&&(e=Math.min(e,this[O]-this[B])),this[m]=!0,this[g]=r,e<=0?this.nextTick(this[k],null,[]):this._nextv(e,t,this[k])),r[b]):(this.nextTick(r,new TypeError("The first argument 'size' must be an integer")),r[b])}},{key:"_nextv",value:function(e,t,r){var n=this,a=[];this._next((function t(i,o,s){return i?r(i):(n[P]?void 0===o&&void 0===s:void 0===o)?r(null,a):(a.push(n[P]?[o,s]:o),void(a.length===e?r(null,a):n._next(t)))}))}},{key:"all",value:function(e,t){return t=y(e,t),t=h(t,b),e=v(e,U),this[S]?this.nextTick(t,new p("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[m]?this.nextTick(t,new p("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[m]=!0,this[g]=t,this[x]=!0,this[B]>=this[O]?this.nextTick(this[k],null,[]):this._all(e,this[k])),t[b]}},{key:"_all",value:function(e,t){var r=this,n=this[B],a=[],i=function(){var e=r[O]<1/0?Math.min(1e3,r[O]-n):1e3;e<=0?r.nextTick(t,null,a):r._nextv(e,U,o)},o=function(e,r){e?t(e):0===r.length?t(null,a):(a.push.apply(a,r),n+=r.length,i())};i()}},{key:_,value:function(){var e=this[g];return this[R]&&null===e?M:(this[m]=!1,this[g]=null,this[S]&&this._close(this[A]),e)}},{key:E,value:function(e,t,r){this[x]?this.close(e.bind(null,t,r)):e(t,r)}},{key:"seek",value:function(e,t){if(t=v(t,U),this[S]);else{if(this[m])throw new p("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});var r=this.db.keyEncoding(t.keyEncoding||this[T]),n=r.format;t.keyEncoding!==n&&(t=s(s({},t),{},{keyEncoding:n}));var a=this.db.prefixKey(r.encode(e),n);this._seek(a,t)}}},{key:"_seek",value:function(e,t){throw new p("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}},{key:"close",value:function(e){if(e=h(e,b),this[C])this.nextTick(e);else if(this[S])this[I].push(e);else if(this[S]=!0,this[I].push(e),this[m]){if(this[R]){this[_]()(new p("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))}}else this._close(this[A]);return e[b]}},{key:"_close",value:function(e){this.nextTick(e)}},{key:A,value:function(){this[C]=!0,this.db.detachResource(this);var e=this[I];this[I]=[];var t,r=o(e);try{for(r.s();!(t=r.n()).done;){(0,t.value)()}}catch(n){r.e(n)}finally{r.f()}}},{key:e,value:function(){var e=this;return f(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0;case 1:return t.next=3,l(e.next());case 3:if(t.t0=r=t.sent,t.t1=void 0,t.t0===t.t1){t.next=10;break}return t.next=8,r;case 8:t.next=1;break;case 10:if(t.prev=10,e[C]){t.next=14;break}return t.next=14,l(e.close());case 14:return t.finish(10);case 15:case"end":return t.stop()}}),t,null,[[0,,10,15]])})))()}}]),t}(Symbol.asyncIterator),V=function(e){n(r,e);var t=a(r);function r(e,n){var a;return u(this,r),(a=t.call(this,e,n,!0))[N]=!1!==n.keys,a[L]=!1!==n.values,a}return c(r,[{key:w,value:function(e,t,r){var n=this[_]();if(e)return n(e);try{t=this[N]&&void 0!==t?this[T].decode(t):void 0,r=this[L]&&void 0!==r?this[D].decode(r):void 0}catch(e){return n(new K("entry",e))}void 0===t&&void 0===r||this[B]++,n(null,t,r)}},{key:k,value:function(e,t){var r=this[_]();if(e)return this[E](r,e);try{var n,a=o(t);try{for(a.s();!(n=a.n()).done;){var i=n.value,s=i[0],u=i[1];i[0]=this[N]&&void 0!==s?this[T].decode(s):void 0,i[1]=this[L]&&void 0!==u?this[D].decode(u):void 0}}catch(e){a.e(e)}finally{a.f()}}catch(e){return this[E](r,new K("entries",e))}this[B]+=t.length,this[E](r,null,t)}},{key:"end",value:function(e){return z||"undefined"===typeof console||(z=!0,console.warn(new p("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}}]),r}(F),j=function(e){n(r,e);var t=a(r);function r(e,n){return u(this,r),t.call(this,e,n,!1)}return c(r,[{key:w,value:function(e,t){var r=this[_]();if(e)return r(e);try{t=void 0!==t?this[T].decode(t):void 0}catch(e){return r(new K("key",e))}void 0!==t&&this[B]++,r(null,t)}},{key:k,value:function(e,t){var r=this[_]();if(e)return this[E](r,e);try{for(var n=0;n<t.length;n++){var a=t[n];t[n]=void 0!==a?this[T].decode(a):void 0}}catch(e){return this[E](r,new K("keys",e))}this[B]+=t.length,this[E](r,null,t)}}]),r}(F),q=function(e){n(r,e);var t=a(r);function r(e,n){return u(this,r),t.call(this,e,n,!1)}return c(r,[{key:w,value:function(e,t){var r=this[_]();if(e)return r(e);try{t=void 0!==t?this[D].decode(t):void 0}catch(e){return r(new K("value",e))}void 0!==t&&this[B]++,r(null,t)}},{key:k,value:function(e,t){var r=this[_]();if(e)return this[E](r,e);try{for(var n=0;n<t.length;n++){var a=t[n];t[n]=void 0!==a?this[D].decode(a):void 0}}catch(e){return this[E](r,new K("values",e))}this[B]+=t.length,this[E](r,null,t)}}]),r}(F),K=function(e){n(r,e);var t=a(r);function r(e,n){return u(this,r),t.call(this,"Iterator could not decode ".concat(e),{code:"LEVEL_DECODE_ERROR",cause:n})}return c(r)}(p),H=function(){var e=W[G];Object.defineProperty(V.prototype,e.split(" ")[0],{get:function(){throw new p("The ".concat(e," has been removed"),{code:"LEVEL_LEGACY"})},set:function(){throw new p("The ".concat(e," has been removed"),{code:"LEVEL_LEGACY"})}})},G=0,W=["_ended property","_nexting property","_end method"];G<W.length;G++)H();V.keyEncoding=T,V.valueEncoding=D,t.AbstractIterator=V,t.AbstractKeyIterator=j,t.AbstractValueIterator=q},2563:function(e,t,r){"use strict";var n=r(2122).default,a=r(4704).default,i=r(215).default,o=r(6690).default,s=r(9728).default,u=r(6115).default,c=r(1655).default,l=r(6389).default,f=["keyEncoding","valueEncoding","passive"],h=["keyEncoding","valueEncoding"],p=r(4959).supports,d=r(9395).Transcoder,v=r(7715).EventEmitter,y=r(380).fromCallback,b=r(3899),g=r(7351).AbstractIterator,m=r(389),w=m.DefaultKeyIterator,k=m.DefaultValueIterator,x=r(6803),_=x.DeferredIterator,E=x.DeferredKeyIterator,S=x.DeferredValueIterator,A=r(3274).DefaultChainedBatch,C=r(9917),I=C.getCallback,T=C.getOptions,D=r(220),R=Symbol("promise"),P=Symbol("landed"),N=Symbol("resources"),L=Symbol("closeResources"),O=Symbol("operations"),B=Symbol("undefer"),U=Symbol("deferOpen"),M=Symbol("options"),z=Symbol("status"),F=Symbol("defaultOptions"),V=Symbol("transcoder"),j=Symbol("keyEncoding"),q=Symbol("valueEncoding"),K=function(){},H=function(e){c(r,e);var t=l(r);function r(e,n){var s;if(o(this,r),s=t.call(this),"object"!==typeof e||null===e)throw new TypeError("The first argument 'manifest' must be an object");var c=n=T(n),l=c.keyEncoding,h=c.valueEncoding,v=(c.passive,i(c,f));s[N]=new Set,s[O]=[],s[U]=!0,s[M]=v,s[z]="opening",s.supports=p(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:!1!==e.snapshots,permanence:!1!==e.permanence,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),s[V]=new d(Y(u(s))),s[j]=s[V].encoding(l||"utf8"),s[q]=s[V].encoding(h||"utf8");var y,b=a(s[V].encodings());try{for(b.s();!(y=b.n()).done;){var g=y.value;s.supports.encodings[g.commonName]||(s.supports.encodings[g.commonName]=!0)}}catch(m){b.e(m)}finally{b.f()}return s[F]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:s[j].commonName,valueEncoding:s[q].commonName}),key:Object.freeze({keyEncoding:s[j].commonName})},s.nextTick((function(){s[U]&&s.open({passive:!1},K)})),s}return s(r,[{key:"status",get:function(){return this[z]}},{key:"keyEncoding",value:function(e){return this[V].encoding(null!=e?e:this[j])}},{key:"valueEncoding",value:function(e){return this[V].encoding(null!=e?e:this[q])}},{key:"open",value:function(e,t){var r=this;t=I(e,t),t=y(t,R),(e=n(n({},this[M]),T(e))).createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists;var a=function e(n){"closing"===r[z]||"opening"===r[z]?r.once(P,n?function(){return e(n)}:e):"open"!==r[z]?t(new b("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:n})):t()};return e.passive?"opening"===this[z]?this.once(P,a):this.nextTick(a):"closed"===this[z]||this[U]?(this[U]=!1,this[z]="opening",this.emit("opening"),this._open(e,(function(e){if(e)return r[z]="closed",r[L]((function(){r.emit(P),a(e)})),void r[B]();r[z]="open",r[B](),r.emit(P),"open"===r[z]&&r.emit("open"),"open"===r[z]&&r.emit("ready"),a()}))):"open"===this[z]?this.nextTick(a):this.once(P,(function(){return r.open(e,t)})),t[R]}},{key:"_open",value:function(e,t){this.nextTick(t)}},{key:"close",value:function(e){var t=this;e=y(e,R);var r=function r(n){"opening"===t[z]||"closing"===t[z]?t.once(P,n?r(n):r):"closed"!==t[z]?e(new b("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if("open"===this[z]){this[z]="closing",this.emit("closing");this[L]((function(){t._close((function(e){if(e)return function(e){t[z]="open",t[B](),t.emit(P),r(e)}(e);t[z]="closed",t[B](),t.emit(P),"closed"===t[z]&&t.emit("closed"),r()}))}))}else"closed"===this[z]?this.nextTick(r):this.once(P,(function(){return t.close(e)}));return e[R]}},{key:L,value:function(e){var t=this;if(0===this[N].size)return this.nextTick(e);var r,n=this[N].size,i=!0,o=function(){0===--n&&(i?t.nextTick(e):e())},s=a(this[N]);try{for(s.s();!(r=s.n()).done;){r.value.close(o)}}catch(u){s.e(u)}finally{s.f()}i=!1,this[N].clear()}},{key:"_close",value:function(e){this.nextTick(e)}},{key:"get",value:function(e,t,r){var n=this;if(r=I(t,r),r=y(r,R),t=T(t,this[F].entry),"opening"===this[z])return this.defer((function(){return n.get(e,t,r)})),r[R];if(W(this,r))return r[R];var a=this._checkKey(e);if(a)return this.nextTick(r,a),r[R];var i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),s=i.format,u=o.format;return t.keyEncoding===s&&t.valueEncoding===u||(t=Object.assign({},t,{keyEncoding:s,valueEncoding:u})),this._get(this.prefixKey(i.encode(e),s),t,(function(e,t){if(e)return("LEVEL_NOT_FOUND"===e.code||e.notFound||/NotFound/i.test(e))&&(e.code||(e.code="LEVEL_NOT_FOUND"),e.notFound||(e.notFound=!0),e.status||(e.status=404)),r(e);try{t=o.decode(t)}catch(e){return r(new b("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:e}))}r(null,t)})),r[R]}},{key:"_get",value:function(e,t,r){this.nextTick(r,new Error("NotFound"))}},{key:"getMany",value:function(e,t,r){var n=this;if(r=I(t,r),r=y(r,R),t=T(t,this[F].entry),"opening"===this[z])return this.defer((function(){return n.getMany(e,t,r)})),r[R];if(W(this,r))return r[R];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'keys' must be an array")),r[R];if(0===e.length)return this.nextTick(r,null,[]),r[R];var a=this.keyEncoding(t.keyEncoding),i=this.valueEncoding(t.valueEncoding),o=a.format,s=i.format;t.keyEncoding===o&&t.valueEncoding===s||(t=Object.assign({},t,{keyEncoding:o,valueEncoding:s}));for(var u=new Array(e.length),c=0;c<e.length;c++){var l=e[c],f=this._checkKey(l);if(f)return this.nextTick(r,f),r[R];u[c]=this.prefixKey(a.encode(l),o)}return this._getMany(u,t,(function(e,t){if(e)return r(e);try{for(var n=0;n<t.length;n++)void 0!==t[n]&&(t[n]=i.decode(t[n]))}catch(e){return r(new b("Could not decode one or more of ".concat(t.length," value(s)"),{code:"LEVEL_DECODE_ERROR",cause:e}))}r(null,t)})),r[R]}},{key:"_getMany",value:function(e,t,r){this.nextTick(r,null,new Array(e.length).fill(void 0))}},{key:"put",value:function(e,t,r,n){var a=this;if(n=I(r,n),n=y(n,R),r=T(r,this[F].entry),"opening"===this[z])return this.defer((function(){return a.put(e,t,r,n)})),n[R];if(W(this,n))return n[R];var i=this._checkKey(e)||this._checkValue(t);if(i)return this.nextTick(n,i),n[R];var o=this.keyEncoding(r.keyEncoding),s=this.valueEncoding(r.valueEncoding),u=o.format,c=s.format;r.keyEncoding===u&&r.valueEncoding===c||(r=Object.assign({},r,{keyEncoding:u,valueEncoding:c}));var l=this.prefixKey(o.encode(e),u),f=s.encode(t);return this._put(l,f,r,(function(r){if(r)return n(r);a.emit("put",e,t),n()})),n[R]}},{key:"_put",value:function(e,t,r,n){this.nextTick(n)}},{key:"del",value:function(e,t,r){var n=this;if(r=I(t,r),r=y(r,R),t=T(t,this[F].key),"opening"===this[z])return this.defer((function(){return n.del(e,t,r)})),r[R];if(W(this,r))return r[R];var a=this._checkKey(e);if(a)return this.nextTick(r,a),r[R];var i=this.keyEncoding(t.keyEncoding),o=i.format;return t.keyEncoding!==o&&(t=Object.assign({},t,{keyEncoding:o})),this._del(this.prefixKey(i.encode(e),o),t,(function(t){if(t)return r(t);n.emit("del",e),r()})),r[R]}},{key:"_del",value:function(e,t,r){this.nextTick(r)}},{key:"batch",value:function(e,t,r){var n=this;if(!arguments.length){if("opening"===this[z])return new A(this);if("open"!==this[z])throw new b("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(r="function"===typeof e?e:I(t,r),r=y(r,R),t=T(t,this[F].empty),"opening"===this[z])return this.defer((function(){return n.batch(e,t,r)})),r[R];if(W(this,r))return r[R];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'operations' must be an array")),r[R];if(0===e.length)return this.nextTick(r),r[R];for(var a=new Array(e.length),o=t,s=o.keyEncoding,u=o.valueEncoding,c=i(o,h),l=0;l<e.length;l++){if("object"!==typeof e[l]||null===e[l])return this.nextTick(r,new TypeError("A batch operation must be an object")),r[R];var f=Object.assign({},e[l]);if("put"!==f.type&&"del"!==f.type)return this.nextTick(r,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),r[R];var p=this._checkKey(f.key);if(p)return this.nextTick(r,p),r[R];var d=null!=f.sublevel?f.sublevel:this,v=d.keyEncoding(f.keyEncoding||s),g=v.format;if(f.key=d.prefixKey(v.encode(f.key),g),f.keyEncoding=g,"put"===f.type){var m=this._checkValue(f.value);if(m)return this.nextTick(r,m),r[R];var w=d.valueEncoding(f.valueEncoding||u);f.value=w.encode(f.value),f.valueEncoding=w.format}d!==this&&(f.sublevel=null),a[l]=f}return this._batch(a,c,(function(t){if(t)return r(t);n.emit("batch",e),r()})),r[R]}},{key:"_batch",value:function(e,t,r){this.nextTick(r)}},{key:"sublevel",value:function(e,t){return this._sublevel(e,G.defaults(t))}},{key:"_sublevel",value:function(e,t){return new G(this,e,t)}},{key:"prefixKey",value:function(e,t){return e}},{key:"clear",value:function(e,t){var r=this;if(t=I(e,t),t=y(t,R),e=T(e,this[F].empty),"opening"===this[z])return this.defer((function(){return r.clear(e,t)})),t[R];if(W(this,t))return t[R];var n=e,a=this.keyEncoding(e.keyEncoding);return(e=D(e,a)).keyEncoding=a.format,0===e.limit?this.nextTick(t):this._clear(e,(function(e){if(e)return t(e);r.emit("clear",n),t()})),t[R]}},{key:"_clear",value:function(e,t){this.nextTick(t)}},{key:"iterator",value:function(e){var t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if((e=D(e,t)).keys=!1!==e.keys,e.values=!1!==e.values,e[g.keyEncoding]=t,e[g.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,"opening"===this[z])return new _(this,e);if("open"!==this[z])throw new b("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}},{key:"_iterator",value:function(e){return new g(this,e)}},{key:"keys",value:function(e){var t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if((e=D(e,t))[g.keyEncoding]=t,e[g.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,"opening"===this[z])return new E(this,e);if("open"!==this[z])throw new b("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}},{key:"_keys",value:function(e){return new w(this,e)}},{key:"values",value:function(e){var t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if((e=D(e,t))[g.keyEncoding]=t,e[g.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,"opening"===this[z])return new S(this,e);if("open"!==this[z])throw new b("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}},{key:"_values",value:function(e){return new k(this,e)}},{key:"defer",value:function(e){if("function"!==typeof e)throw new TypeError("The first argument must be a function");this[O].push(e)}},{key:B,value:function(){if(0!==this[O].length){var e=this[O];this[O]=[];var t,r=a(e);try{for(r.s();!(t=r.n()).done;){(0,t.value)()}}catch(n){r.e(n)}finally{r.f()}}}},{key:"attachResource",value:function(e){if("object"!==typeof e||null===e||"function"!==typeof e.close)throw new TypeError("The first argument must be a resource object");this[N].add(e)}},{key:"detachResource",value:function(e){this[N].delete(e)}},{key:"_chainedBatch",value:function(){return new A(this)}},{key:"_checkKey",value:function(e){if(null===e||void 0===e)return new b("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}},{key:"_checkValue",value:function(e){if(null===e||void 0===e)return new b("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}]),r}(v);H.prototype.nextTick=r(7364);var G=r(1479)({AbstractLevel:H}).AbstractSublevel;t.AbstractLevel=H,t.AbstractSublevel=G;var W=function(e,t){return"open"!==e[z]&&(e.nextTick(t,new b("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0)},Y=function(e){return Object.keys(e.supports.encodings).filter((function(t){return!!e.supports.encodings[t]}))}},872:function(e,t,r){"use strict";t.AbstractLevel=r(2563).AbstractLevel,t.AbstractSublevel=r(2563).AbstractSublevel,t.AbstractIterator=r(7351).AbstractIterator,t.AbstractKeyIterator=r(7351).AbstractKeyIterator,t.AbstractValueIterator=r(7351).AbstractValueIterator,t.AbstractChainedBatch=r(8494).AbstractChainedBatch},8837:function(e,t,r){"use strict";for(var n=r(4704).default,a=r(6690).default,i=r(9728).default,o=r(6115).default,s=r(1655).default,u=r(6389).default,c=r(7351),l=c.AbstractIterator,f=c.AbstractKeyIterator,h=c.AbstractValueIterator,p=Symbol("unfix"),d=Symbol("iterator"),v=Symbol("handleOne"),y=Symbol("handleMany"),b=Symbol("callback"),g=function(e){s(r,e);var t=u(r);function r(e,n,i,s){var u;return a(this,r),(u=t.call(this,e,n))[d]=i,u[p]=s,u[v]=u[v].bind(o(u)),u[y]=u[y].bind(o(u)),u[b]=null,u}return i(r,[{key:v,value:function(e,t,r){var n=this[b];if(e)return n(e);void 0!==t&&(t=this[p](t)),n(e,t,r)}},{key:y,value:function(e,t){var r=this[b];if(e)return r(e);var a,i=n(t);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=o[0];void 0!==s&&(o[0]=this[p](s))}}catch(e){i.e(e)}finally{i.f()}r(e,t)}}]),r}(l),m=function(e){s(r,e);var t=u(r);function r(e,n,i,s){var u;return a(this,r),(u=t.call(this,e,n))[d]=i,u[p]=s,u[v]=u[v].bind(o(u)),u[y]=u[y].bind(o(u)),u[b]=null,u}return i(r,[{key:v,value:function(e,t){var r=this[b];if(e)return r(e);void 0!==t&&(t=this[p](t)),r(e,t)}},{key:y,value:function(e,t){var r=this[b];if(e)return r(e);for(var n=0;n<t.length;n++){var a=t[n];void 0!==a&&(t[n]=this[p](a))}r(e,t)}}]),r}(f),w=function(e){s(r,e);var t=u(r);function r(e,n,i){var o;return a(this,r),(o=t.call(this,e,n))[d]=i,o}return i(r)}(h),k=0,x=[g,m];k<x.length;k++){var _=x[k];_.prototype._next=function(e){this[b]=e,this[d].next(this[v])},_.prototype._nextv=function(e,t,r){this[b]=r,this[d].nextv(e,t,this[y])},_.prototype._all=function(e,t){this[b]=t,this[d].all(e,this[y])}}for(var E=0,S=[w];E<S.length;E++){var A=S[E];A.prototype._next=function(e){this[d].next(e)},A.prototype._nextv=function(e,t,r){this[d].nextv(e,t,r)},A.prototype._all=function(e,t){this[d].all(e,t)}}for(var C=0,I=[g,m,w];C<I.length;C++){var T=I[C];T.prototype._seek=function(e,t){this[d].seek(e,t)},T.prototype._close=function(e){this[d].close(e)}}t.AbstractSublevelIterator=g,t.AbstractSublevelKeyIterator=m,t.AbstractSublevelValueIterator=w},1479:function(e,t,r){"use strict";var n=r(2122).default,a=r(215).default,i=r(6690).default,o=r(9728).default,s=r(1655).default,u=r(6389).default,c=["separator","manifest"],l=r(3899),f=(r(5362)||{}).Buffer,h=r(8837),p=h.AbstractSublevelIterator,d=h.AbstractSublevelKeyIterator,v=h.AbstractSublevelValueIterator,y=Symbol("prefix"),b=Symbol("upperBound"),g=Symbol("prefixRange"),m=Symbol("parent"),w=Symbol("unfix"),k=new TextEncoder,x={separator:"!"};e.exports=function(e){return{AbstractSublevel:function(e){s(r,e);var t=u(r);function r(e,n,o){var s;i(this,r);var u=r.defaults(o),f=u.separator,h=u.manifest,p=a(u,c);n=C(n,f);var d=f.charCodeAt(0)+1,v=e[m]||e;if(!k.encode(n).every((function(e){return e>d&&e<127})))throw new l("Prefix must use bytes > ".concat(d," < ",127),{code:"LEVEL_INVALID_PREFIX"});s=t.call(this,_(v,h),p);var g=(e.prefix||"")+f+n+f,x=g.slice(0,-1)+String.fromCharCode(d);return s[m]=v,s[y]=new S(g),s[b]=new S(x),s[w]=new A,s.nextTick=v.nextTick,s}return o(r,[{key:"prefixKey",value:function(e,t){if("utf8"===t)return this[y].utf8+e;if(0===e.byteLength)return this[y][t];if("view"===t){var r=this[y].view,n=new Uint8Array(r.byteLength+e.byteLength);return n.set(r,0),n.set(e,r.byteLength),n}var a=this[y].buffer;return f.concat([a,e],a.byteLength+e.byteLength)}},{key:g,value:function(e,t){void 0!==e.gte?e.gte=this.prefixKey(e.gte,t):void 0!==e.gt?e.gt=this.prefixKey(e.gt,t):e.gte=this[y][t],void 0!==e.lte?e.lte=this.prefixKey(e.lte,t):void 0!==e.lt?e.lt=this.prefixKey(e.lt,t):e.lte=this[b][t]}},{key:"prefix",get:function(){return this[y].utf8}},{key:"db",get:function(){return this[m]}},{key:"_open",value:function(e,t){this[m].open({passive:!0},t)}},{key:"_put",value:function(e,t,r,n){this[m].put(e,t,r,n)}},{key:"_get",value:function(e,t,r){this[m].get(e,t,r)}},{key:"_getMany",value:function(e,t,r){this[m].getMany(e,t,r)}},{key:"_del",value:function(e,t,r){this[m].del(e,t,r)}},{key:"_batch",value:function(e,t,r){this[m].batch(e,t,r)}},{key:"_clear",value:function(e,t){this[g](e,e.keyEncoding),this[m].clear(e,t)}},{key:"_iterator",value:function(e){this[g](e,e.keyEncoding);var t=this[m].iterator(e),r=this[w].get(this[y].utf8.length,e.keyEncoding);return new p(this,e,t,r)}},{key:"_keys",value:function(e){this[g](e,e.keyEncoding);var t=this[m].keys(e),r=this[w].get(this[y].utf8.length,e.keyEncoding);return new d(this,e,t,r)}},{key:"_values",value:function(e){this[g](e,e.keyEncoding);var t=this[m].values(e);return new v(this,e,t)}}],[{key:"defaults",value:function(e){if("string"===typeof e)throw new l("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(e&&e.open)throw new l("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return null==e?x:e.separator?e:n(n({},e),{},{separator:"!"})}}]),r}(e.AbstractLevel)}};var _=function(e,t){return n(n(n({},e.supports),{},{createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{}},t),{},{encodings:{utf8:E(e,"utf8"),buffer:E(e,"buffer"),view:E(e,"view")}})},E=function(e,t){return!!e.supports.encodings[t]&&e.keyEncoding(t).name===t},S=o((function e(t){i(this,e),this.utf8=t,this.view=k.encode(t),this.buffer=f?f.from(this.view.buffer,0,this.view.byteLength):{}})),A=function(){function e(){i(this,e),this.cache=new Map}return o(e,[{key:"get",value:function(e,t){var r=this.cache.get(t);return void 0===r&&(r="view"===t?function(e,t){return t.subarray(e)}.bind(null,e):function(e,t){return t.slice(e)}.bind(null,e),this.cache.set(t,r)),r}}]),e}(),C=function(e,t){for(var r=0,n=e.length;r<n&&e[r]===t;)r++;for(;n>r&&e[n-1]===t;)n--;return e.slice(r,n)}},9917:function(e,t){"use strict";t.getCallback=function(e,t){return"function"===typeof e?e:t},t.getOptions=function(e,t){return"object"===typeof e&&null!==e?e:void 0!==t?t:{}}},3274:function(e,t,r){"use strict";var n=r(2122).default,a=r(6690).default,i=r(9728).default,o=r(1655).default,s=r(6389).default,u=r(8494).AbstractChainedBatch,c=r(3899),l=Symbol("encoded"),f=function(e){o(r,e);var t=s(r);function r(e){var n;return a(this,r),(n=t.call(this,e))[l]=[],n}return i(r,[{key:"_put",value:function(e,t,r){this[l].push(n(n({},r),{},{type:"put",key:e,value:t}))}},{key:"_del",value:function(e,t){this[l].push(n(n({},t),{},{type:"del",key:e}))}},{key:"_clear",value:function(){this[l]=[]}},{key:"_write",value:function(e,t){var r=this;"opening"===this.db.status?this.db.defer((function(){return r._write(e,t)})):"open"===this.db.status?0===this[l].length?this.nextTick(t):this.db._batch(this[l],e,t):this.nextTick(t,new c("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}]),r}(u);t.DefaultChainedBatch=f},389:function(e,t,r){"use strict";for(var n=r(2122).default,a=r(9728).default,i=r(6690).default,o=r(6115).default,s=r(1655).default,u=r(6389).default,c=r(7351),l=c.AbstractKeyIterator,f=c.AbstractValueIterator,h=Symbol("iterator"),p=Symbol("callback"),d=Symbol("handleOne"),v=Symbol("handleMany"),y=function(e){s(r,e);var t=u(r);function r(e,a){var s;return i(this,r),(s=t.call(this,e,a))[h]=e.iterator(n(n({},a),{},{keys:!0,values:!1})),s[d]=s[d].bind(o(s)),s[v]=s[v].bind(o(s)),s}return a(r)}(l),b=function(e){s(r,e);var t=u(r);function r(e,a){var s;return i(this,r),(s=t.call(this,e,a))[h]=e.iterator(n(n({},a),{},{keys:!1,values:!0})),s[d]=s[d].bind(o(s)),s[v]=s[v].bind(o(s)),s}return a(r)}(f),g=function(){var e=w[m],t=e===y,r=t?function(e){return e[0]}:function(e){return e[1]};e.prototype._next=function(e){this[p]=e,this[h].next(this[d])},e.prototype[d]=function(e,r,n){var a=this[p];e?a(e):a(null,t?r:n)},e.prototype._nextv=function(e,t,r){this[p]=r,this[h].nextv(e,t,this[v])},e.prototype._all=function(e,t){this[p]=t,this[h].all(e,this[v])},e.prototype[v]=function(e,t){var n=this[p];e?n(e):n(null,t.map(r))},e.prototype._seek=function(e,t){this[h].seek(e,t)},e.prototype._close=function(e){this[h].close(e)}},m=0,w=[y,b];m<w.length;m++)g();t.DefaultKeyIterator=y,t.DefaultValueIterator=b},6803:function(e,t,r){"use strict";for(var n=r(9728).default,a=r(6690).default,i=r(1655).default,o=r(6389).default,s=r(7351),u=s.AbstractIterator,c=s.AbstractKeyIterator,l=s.AbstractValueIterator,f=r(3899),h=Symbol("nut"),p=Symbol("undefer"),d=Symbol("factory"),v=function(e){i(r,e);var t=o(r);function r(e,n){var i;return a(this,r),(i=t.call(this,e,n))[h]=null,i[d]=function(){return e.iterator(n)},i.db.defer((function(){return i[p]()})),i}return n(r)}(u),y=function(e){i(r,e);var t=o(r);function r(e,n){var i;return a(this,r),(i=t.call(this,e,n))[h]=null,i[d]=function(){return e.keys(n)},i.db.defer((function(){return i[p]()})),i}return n(r)}(c),b=function(e){i(r,e);var t=o(r);function r(e,n){var i;return a(this,r),(i=t.call(this,e,n))[h]=null,i[d]=function(){return e.values(n)},i.db.defer((function(){return i[p]()})),i}return n(r)}(l),g=0,m=[v,y,b];g<m.length;g++){var w=m[g];w.prototype[p]=function(){"open"===this.db.status&&(this[h]=this[d]())},w.prototype._next=function(e){var t=this;null!==this[h]?this[h].next(e):"opening"===this.db.status?this.db.defer((function(){return t._next(e)})):this.nextTick(e,new f("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},w.prototype._nextv=function(e,t,r){var n=this;null!==this[h]?this[h].nextv(e,t,r):"opening"===this.db.status?this.db.defer((function(){return n._nextv(e,t,r)})):this.nextTick(r,new f("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},w.prototype._all=function(e,t){var r=this;null!==this[h]?this[h].all(t):"opening"===this.db.status?this.db.defer((function(){return r._all(e,t)})):this.nextTick(t,new f("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},w.prototype._seek=function(e,t){var r=this;null!==this[h]?this[h]._seek(e,t):"opening"===this.db.status&&this.db.defer((function(){return r._seek(e,t)}))},w.prototype._close=function(e){var t=this;null!==this[h]?this[h].close(e):"opening"===this.db.status?this.db.defer((function(){return t._close(e)})):this.nextTick(e)}}t.DeferredIterator=v,t.DeferredKeyIterator=y,t.DeferredValueIterator=b},7364:function(e,t,r){"use strict";var n=r(8566);e.exports=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];0===r.length?n(e):n((function(){return e.apply(void 0,r)}))}},220:function(e,t,r){"use strict";var n=r(3899),a=Object.prototype.hasOwnProperty,i=new Set(["lt","lte","gt","gte"]);e.exports=function(e,t){var r={};for(var o in e)if(a.call(e,o)&&"keyEncoding"!==o&&"valueEncoding"!==o){if("start"===o||"end"===o)throw new n("The legacy range option '".concat(o,"' has been removed"),{code:"LEVEL_LEGACY"});if("encoding"===o)throw new n("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});i.has(o)?r[o]=t.encode(e[o]):r[o]=e[o]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}},1494:function(e,t,r){var n=r(4704).default;function a(e){var t=new globalThis.AbortController;function r(){t.abort();var a,i=n(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;o&&o.removeEventListener&&o.removeEventListener("abort",r)}}catch(s){i.e(s)}finally{i.f()}}var a,i=n(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o&&o.addEventListener){if(o.aborted){r();break}o.addEventListener("abort",r)}}}catch(s){i.e(s)}finally{i.f()}return t.signal}e.exports=a,e.exports.anySignal=a},4326:function(e,t){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,i=u(e),o=i[0],s=i[1],c=new a(function(e,t,r){return 3*(t+r)/4-r}(0,o,s)),l=0,f=s>0?o-4:o;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t);1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],o=16383,s=0,u=n-a;s<u;s+=o)i.push(c(e,s,s+o>u?u:s+o));1===a?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],n=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=i.length;o<s;++o)r[o]=i[o],n[i.charCodeAt(o)]=o;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var a,i,o=[],s=t;s<n;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(i=a)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},1541:function(e,t,r){"use strict";var n=r(215).default,a=r(6690).default,i=r(9728).default,o=r(1655).default,s=r(6389).default,u=["prefix","version"],c=r(872).AbstractLevel,l=r(3899),f=r(8824),h=r(380).fromCallback,p=r(2386).Iterator,d=r(7835),v=r(9795),y=r(4218),b="level-js-",g=Symbol("idb"),m=Symbol("namePrefix"),w=Symbol("location"),k=Symbol("version"),x=Symbol("store"),_=Symbol("onComplete"),E=Symbol("promise"),S=function(e){o(r,e);var t=s(r);function r(e,i,o){var s;if(a(this,r),"function"===typeof i||"function"===typeof o)throw new l("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});var c=i||{},f=c.prefix,h=c.version,p=n(c,u);if(s=t.call(this,{encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},p),"string"!==typeof e)throw new Error("constructor requires a location string argument");return s[w]=e,s[m]=null==f?b:f,s[k]=parseInt(h||1,10),s[g]=null,s}return i(r,[{key:"location",get:function(){return this[w]}},{key:"namePrefix",get:function(){return this[m]}},{key:"version",get:function(){return this[k]}},{key:"db",get:function(){return this[g]}},{key:"type",get:function(){return"browser-level"}},{key:"_open",value:function(e,t){var r=this,n=indexedDB.open(this[m]+this[w],this[k]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=function(){r[g]=n.result,t()},n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(r[w])||t.createObjectStore(r[w])}}},{key:x,value:function(e){return this[g].transaction([this[w]],e).objectStore(this[w])}},{key:_,value:function(e,t){var r=e.transaction;r.onabort=function(){t(r.error||new Error("aborted by user"))},r.oncomplete=function(){t(null,e.result)}}},{key:"_get",value:function(e,t,r){var n,a=this[x]("readonly");try{n=a.get(e)}catch(i){return this.nextTick(r,i)}this[_](n,(function(e,t){return e?r(e):void 0===t?r(new l("Entry not found",{code:"LEVEL_NOT_FOUND"})):void r(null,d(t))}))}},{key:"_getMany",value:function(e,t,r){var n=this[x]("readonly"),a=e.map((function(e){return function(t){var r;try{r=n.get(e)}catch(a){return t(a)}r.onsuccess=function(){var e=r.result;t(null,void 0===e?e:d(e))},r.onerror=function(e){e.stopPropagation(),t(r.error)}}}));f(a,16,r)}},{key:"_del",value:function(e,t,r){var n,a=this[x]("readwrite");try{n=a.delete(e)}catch(i){return this.nextTick(r,i)}this[_](n,r)}},{key:"_put",value:function(e,t,r,n){var a,i=this[x]("readwrite");try{a=i.put(t,e)}catch(o){return this.nextTick(n,o)}this[_](a,n)}},{key:"_iterator",value:function(e){return new p(this,this[w],e)}},{key:"_batch",value:function(e,t,r){var n,a=this[x]("readwrite"),i=a.transaction,o=0;i.onabort=function(){r(n||i.error||new Error("aborted by user"))},i.oncomplete=function(){r()},function t(){var r,s=e[o++],u=s.key;try{r="del"===s.type?a.delete(u):a.put(s.value,u)}catch(c){return n=c,void i.abort()}o<e.length?r.onsuccess=t:"function"===typeof i.commit&&i.commit()}()}},{key:"_clear",value:function(e,t){var r,n;try{r=y(e)}catch(i){return this.nextTick(t)}if(e.limit>=0)return v(this,this[w],r,e,t);try{var a=this[x]("readwrite");n=r?a.delete(r):a.clear()}catch(o){return this.nextTick(t,o)}this[_](n,t)}},{key:"_close",value:function(e){this[g].close(),this.nextTick(e)}}]),r}(c);S.destroy=function(e,t,r){"function"===typeof t&&(r=t,t=b),r=h(r,E);var n=indexedDB.deleteDatabase(t+e);return n.onsuccess=function(){r()},n.onerror=function(e){r(e)},r[E]},t.BrowserLevel=S},2386:function(e,t,r){"use strict";var n=r(7424).default,a=r(2122).default,i=r(6690).default,o=r(9728).default,s=r(1655).default,u=r(6389).default,c=r(872).AbstractIterator,l=r(4218),f=r(7835),h=Symbol("cache"),p=Symbol("finished"),d=Symbol("options"),v=Symbol("currentOptions"),y=Symbol("position"),b=Symbol("location"),g=Symbol("first"),m={},w=function(e){s(r,e);var t=u(r);function r(e,n,o){var s;return i(this,r),(s=t.call(this,e,o))[h]=[],s[p]=0===s.limit,s[d]=o,s[v]=a({},o),s[y]=void 0,s[b]=n,s[g]=!0,s}return o(r,[{key:"_nextv",value:function(e,t,r){var n,a=this;if(this[g]=!1,this[p])return this.nextTick(r,null,[]);if(this[h].length>0)return e=Math.min(e,this[h].length),this.nextTick(r,null,this[h].splice(0,e));void 0!==this[y]&&(this[d].reverse?(this[v].lt=this[y],this[v].lte=void 0):(this[v].gt=this[y],this[v].gte=void 0));try{n=l(this[v])}catch(w){return this[p]=!0,this.nextTick(r,null,[])}var i=this.db.db.transaction([this[b]],"readonly"),o=i.objectStore(this[b]),s=[];if(this[d].reverse){o[!this[d].values&&o.openKeyCursor?"openKeyCursor":"openCursor"](n,"prev").onsuccess=function(t){var r=t.target.result;if(r){var n=r.key,o=r.value;a[y]=n,s.push([a[d].keys&&void 0!==n?f(n):void 0,a[d].values&&void 0!==o?f(o):void 0]),s.length<e?r.continue():k(i)}else a[p]=!0}}else{var u,c,m=function(){if(void 0!==u&&void 0!==c){var t=Math.max(u.length,c.length);0===t||e===1/0?a[p]=!0:a[y]=u[t-1],s.length=t;for(var r=0;r<t;r++){var n=u[r],o=c[r];s[r]=[a[d].keys&&void 0!==n?f(n):void 0,a[d].values&&void 0!==o?f(o):void 0]}k(i)}};this[d].keys||e<1/0?o.getAllKeys(n,e<1/0?e:void 0).onsuccess=function(e){u=e.target.result,m()}:(u=[],this.nextTick(m)),this[d].values?o.getAll(n,e<1/0?e:void 0).onsuccess=function(e){c=e.target.result,m()}:(c=[],this.nextTick(m))}i.onabort=function(){r(i.error||new Error("aborted by user")),r=null},i.oncomplete=function(){r(null,s),r=null}}},{key:"_next",value:function(e){var t=this;if(this[h].length>0){var r=this[h].shift(),a=n(r,2),i=a[0],o=a[1];this.nextTick(e,null,i,o)}else if(this[p])this.nextTick(e);else{var s=Math.min(100,this.limit-this.count);this[g]&&(this[g]=!1,s=1),this._nextv(s,m,(function(r,n){if(r)return e(r);t[h]=n,t._next(e)}))}}},{key:"_all",value:function(e,t){this[g]=!1;var r=this[h].splice(0,this[h].length),n=this.limit-this.count-r.length;if(n<=0)return this.nextTick(t,null,r);this._nextv(n,m,(function(e,n){if(e)return t(e);r.length>0&&(n=r.concat(n)),t(null,n)}))}},{key:"_seek",value:function(e,t){var r;this[g]=!0,this[h]=[],this[p]=!1,this[y]=void 0,this[v]=a({},this[d]);try{r=l(this[d])}catch(n){return void(this[p]=!0)}null===r||r.includes(e)?this[d].reverse?this[v].lte=e:this[v].gte=e:this[p]=!0}}]),r}(c);function k(e){"function"===typeof e.commit&&e.commit()}t.Iterator=w},9795:function(e){"use strict";e.exports=function(e,t,r,n,a){if(0===n.limit)return e.nextTick(a);var i=e.db.transaction([t],"readwrite"),o=i.objectStore(t),s=0;i.oncomplete=function(){a()},i.onabort=function(){a(i.error||new Error("aborted by user"))};var u=o.openKeyCursor?"openKeyCursor":"openCursor",c=n.reverse?"prev":"next";o[u](r,c).onsuccess=function(e){var t=e.target.result;t&&(o.delete(t.key).onsuccess=function(){(n.limit<=0||++s<n.limit)&&t.continue()})}}},7835:function(e){"use strict";var t=new TextEncoder;e.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):t.encode(e)}},4218:function(e){"use strict";e.exports=function(e){var t=void 0!==e.gte?e.gte:void 0!==e.gt?e.gt:void 0,r=void 0!==e.lte?e.lte:void 0!==e.lt?e.lt:void 0,n=void 0===e.gte,a=void 0===e.lte;return void 0!==t&&void 0!==r?IDBKeyRange.bound(t,r,n,a):void 0!==t?IDBKeyRange.lowerBound(t,n):void 0!==r?IDBKeyRange.upperBound(r,a):null}},5362:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i=r(6115).default,o=r(1655).default,s=r(6389).default,u=r(4326),c=r(8458),l="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=p,t.SlowBuffer=function(e){+e!=e&&(e=0);return p.alloc(+e)},t.INSPECT_MAX_BYTES=50;var f=2147483647;function h(e){if(e>f)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,p.prototype),t}function p(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return y(e)}return d(e,t,r)}function d(e,t,r){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!p.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|w(e,t),n=h(r),a=n.write(e,t);a!==r&&(n=n.slice(0,a));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){var t=new Uint8Array(e);return g(t.buffer,t.byteOffset,t.byteLength)}return b(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return g(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return g(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return p.from(n,t,r);var a=function(e){if(p.isBuffer(e)){var t=0|m(e.length),r=h(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!==typeof e.length||te(e.length)?h(0):b(e);if("Buffer"===e.type&&Array.isArray(e.data))return b(e.data)}(e);if(a)return a;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return p.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function v(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function y(e){return v(e),h(e<0?0:0|m(e))}function b(e){for(var t=e.length<0?0:0|m(e.length),r=h(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function g(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,p.prototype),n}function m(e){if(e>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|e}function w(e,t){if(p.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(a)return n?-1:Z(e).length;t=(""+t).toLowerCase(),a=!0}}function k(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return N(this,t,r);case"latin1":case"binary":return L(this,t,r);case"base64":return D(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function x(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function _(e,t,r,n,a){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),te(r=+r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"===typeof t&&(t=p.from(t,n)),p.isBuffer(t))return 0===t.length?-1:E(e,t,r,n,a);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):E(e,[t],r,n,a);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,a){var i,o=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var l=-1;for(i=r;i<s;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*o}else-1!==l&&(i-=i-l),l=-1}else for(r+u>s&&(r=s-u),i=r;i>=0;i--){for(var f=!0,h=0;h<u;h++)if(c(e,i+h)!==c(t,h)){f=!1;break}if(f)return i}return-1}function S(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var i,o=t.length;for(n>o/2&&(n=o/2),i=0;i<n;++i){var s=parseInt(t.substr(2*i,2),16);if(te(s))return i;e[r+i]=s}return i}function A(e,t,r,n){return $(Z(t,e.length-r),e,r,n)}function C(e,t,r,n){return $(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function I(e,t,r,n){return $(X(t),e,r,n)}function T(e,t,r,n){return $(function(e,t){for(var r,n,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,a=r%256,i.push(a),i.push(n);return i}(t,e.length-r),e,r,n)}function D(e,t,r){return 0===t&&r===e.length?u.fromByteArray(e):u.fromByteArray(e.slice(t,r))}function R(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var i=e[a],o=null,s=i>239?4:i>223?3:i>191?2:1;if(a+s<=r){var u=void 0,c=void 0,l=void 0,f=void 0;switch(s){case 1:i<128&&(o=i);break;case 2:128===(192&(u=e[a+1]))&&(f=(31&i)<<6|63&u)>127&&(o=f);break;case 3:u=e[a+1],c=e[a+2],128===(192&u)&&128===(192&c)&&(f=(15&i)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(o=f);break;case 4:u=e[a+1],c=e[a+2],l=e[a+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&i)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(o=f)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),a+=s}return function(e){var t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=P));return r}(n)}t.kMaxLength=f,p.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(r){return!1}}(),p.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(e,t,r){return d(e,t,r)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(e,t,r){return function(e,t,r){return v(e),e<=0?h(e):void 0!==t?"string"===typeof r?h(e).fill(t,r):h(e).fill(t):h(e)}(e,t,r)},p.allocUnsafe=function(e){return y(e)},p.allocUnsafeSlow=function(e){return y(e)},p.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==p.prototype},p.compare=function(e,t){if(ee(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(e)||!p.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,a=0,i=Math.min(r,n);a<i;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0},p.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return p.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=p.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var i=e[r];if(ee(i,Uint8Array))a+i.length>n.length?(p.isBuffer(i)||(i=p.from(i)),i.copy(n,a)):Uint8Array.prototype.set.call(n,i,a);else{if(!p.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,a)}a+=i.length}return n},p.byteLength=w,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)x(this,t,t+1);return this},p.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},p.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this},p.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?R(this,0,e):k.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(e){if(!p.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===p.compare(this,e)},p.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},l&&(p.prototype[l]=p.prototype.inspect),p.prototype.compare=function(e,t,r,n,a){if(ee(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(i,o),u=this.slice(n,a),c=e.slice(t,r),l=0;l<s;++l)if(u[l]!==c[l]){i=u[l],o=c[l];break}return i<o?-1:o<i?1:0},p.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},p.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},p.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},p.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return S(this,e,t,r);case"utf8":case"utf-8":return A(this,e,t,r);case"ascii":case"latin1":case"binary":return C(this,e,t,r);case"base64":return I(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function N(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}function L(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}function O(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",i=t;i<r;++i)a+=re[e[i]];return a}function B(e,t,r){for(var n=e.slice(t,r),a="",i=0;i<n.length-1;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}function U(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,a,i){if(!p.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function z(e,t,r,n,a){W(t,n,a,e,r,7);var i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function F(e,t,r,n,a){W(t,n,a,e,r,7);var i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function V(e,t,r,n,a,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(e,t,r,n,a){return t=+t,r>>>=0,a||V(e,0,r,4),c.write(e,t,r,n,23,4),r+4}function q(e,t,r,n,a){return t=+t,r>>>=0,a||V(e,0,r,8),c.write(e,t,r,n,52,8),r+8}p.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,p.prototype),n},p.prototype.readUintLE=p.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||U(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n},p.prototype.readUintBE=p.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||U(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},p.prototype.readUint8=p.prototype.readUInt8=function(e,t){return e>>>=0,t||U(e,1,this.length),this[e]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(e,t){return e>>>=0,t||U(e,2,this.length),this[e]|this[e+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(e,t){return e>>>=0,t||U(e,2,this.length),this[e]<<8|this[e+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(e,t){return e>>>=0,t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(e,t){return e>>>=0,t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},p.prototype.readBigUInt64LE=ne((function(e){Y(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Q(e,this.length-8);var n=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),a=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+r*Math.pow(2,24);return BigInt(n)+(BigInt(a)<<BigInt(32))})),p.prototype.readBigUInt64BE=ne((function(e){Y(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Q(e,this.length-8);var n=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],a=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+r;return(BigInt(n)<<BigInt(32))+BigInt(a)})),p.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||U(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*t)),n},p.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||U(e,t,this.length);for(var n=t,a=1,i=this[e+--n];n>0&&(a*=256);)i+=this[e+--n]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},p.prototype.readInt8=function(e,t){return e>>>=0,t||U(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},p.prototype.readInt16LE=function(e,t){e>>>=0,t||U(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},p.prototype.readInt16BE=function(e,t){e>>>=0,t||U(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},p.prototype.readInt32LE=function(e,t){return e>>>=0,t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},p.prototype.readInt32BE=function(e,t){return e>>>=0,t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},p.prototype.readBigInt64LE=ne((function(e){Y(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Q(e,this.length-8);var n=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),p.prototype.readBigInt64BE=ne((function(e){Y(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Q(e,this.length-8);var n=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+r)})),p.prototype.readFloatLE=function(e,t){return e>>>=0,t||U(e,4,this.length),c.read(this,e,!0,23,4)},p.prototype.readFloatBE=function(e,t){return e>>>=0,t||U(e,4,this.length),c.read(this,e,!1,23,4)},p.prototype.readDoubleLE=function(e,t){return e>>>=0,t||U(e,8,this.length),c.read(this,e,!0,52,8)},p.prototype.readDoubleBE=function(e,t){return e>>>=0,t||U(e,8,this.length),c.read(this,e,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||M(this,e,t,r,Math.pow(2,8*r)-1,0);var a=1,i=0;for(this[t]=255&e;++i<r&&(a*=256);)this[t+i]=e/a&255;return t+r},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||M(this,e,t,r,Math.pow(2,8*r)-1,0);var a=r-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+r},p.prototype.writeUint8=p.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,255,0),this[t]=255&e,t+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeBigUInt64LE=ne((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return z(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),p.prototype.writeBigUInt64BE=ne((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return F(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),p.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var a=Math.pow(2,8*r-1);M(this,e,t,r,a-1,-a)}var i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},p.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var a=Math.pow(2,8*r-1);M(this,e,t,r,a-1,-a)}var i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},p.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},p.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},p.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeBigInt64LE=ne((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return z(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),p.prototype.writeBigInt64BE=ne((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return F(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),p.prototype.writeFloatLE=function(e,t,r){return j(this,e,t,!0,r)},p.prototype.writeFloatBE=function(e,t,r){return j(this,e,t,!1,r)},p.prototype.writeDoubleLE=function(e,t,r){return q(this,e,t,!0,r)},p.prototype.writeDoubleBE=function(e,t,r){return q(this,e,t,!1,r)},p.prototype.copy=function(e,t,r,n){if(!p.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),a},p.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!p.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var a=e.charCodeAt(0);("utf8"===n&&a<128||"latin1"===n)&&(e=a)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=p.isBuffer(e)?e:p.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};var K={};function H(e,t,r){K[e]=function(r){o(c,r);var u=s(c);function c(){var r;return n(this,c),r=u.call(this),Object.defineProperty(i(r),"message",{value:t.apply(i(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(e,"]"),r.stack,delete r.name,r}return a(c,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),c}(r)}function G(e){for(var t="",r=e.length,n="-"===e[0]?1:0;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function W(e,t,r,n,a,i){if(e>r||e<t){var o,s="bigint"===typeof t?"n":"";throw o=i>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(i+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(i+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(i+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(r).concat(s),new K.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,r){Y(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||Q(t,e.length-(r+1))}(n,a,i)}function Y(e,t){if("number"!==typeof e)throw new K.ERR_INVALID_ARG_TYPE(t,"number",e)}function Q(e,t,r){if(Math.floor(e)!==e)throw Y(e,r),new K.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new K.ERR_BUFFER_OUT_OF_BOUNDS;throw new K.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}H("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),H("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),H("ERR_OUT_OF_RANGE",(function(e,t,r){var n='The value of "'.concat(e,'" is out of range.'),a=r;return Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)?a=G(String(r)):"bigint"===typeof r&&(a=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(a=G(a)),a+="n"),n+=" It must be ".concat(t,". Received ").concat(a)}),RangeError);var J=/[^+/0-9A-Za-z-_]/g;function Z(e,t){var r;t=t||1/0;for(var n=e.length,a=null,i=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function X(e){return u.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(J,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function $(e,t,r,n){var a;for(a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!==e}var re=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,a=0;a<16;++a)t[n+a]=e[r]+e[a];return t}();function ne(e){return"undefined"===typeof BigInt?ae:e}function ae(){throw new Error("BigInt not supported")}},5344:function(e){"use strict";e.exports=function(e,t){if("string"===typeof e)return o(e);if("number"===typeof e)return i(e,t);return null},e.exports.format=i,e.exports.parse=o;var t=/\B(?=(\d{3})+(?!\d))/g,r=/(?:\.0*|(\.[^0]+)0+)$/,n={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},a=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function i(e,a){if(!Number.isFinite(e))return null;var i=Math.abs(e),o=a&&a.thousandsSeparator||"",s=a&&a.unitSeparator||"",u=a&&void 0!==a.decimalPlaces?a.decimalPlaces:2,c=Boolean(a&&a.fixedDecimals),l=a&&a.unit||"";l&&n[l.toLowerCase()]||(l=i>=n.pb?"PB":i>=n.tb?"TB":i>=n.gb?"GB":i>=n.mb?"MB":i>=n.kb?"KB":"B");var f=(e/n[l.toLowerCase()]).toFixed(u);return c||(f=f.replace(r,"$1")),o&&(f=f.split(".").map((function(e,r){return 0===r?e.replace(t,o):e})).join(".")),f+s+l}function o(e){if("number"===typeof e&&!isNaN(e))return e;if("string"!==typeof e)return null;var t,r=a.exec(e),i="b";return r?(t=parseFloat(r[1]),i=r[4].toLowerCase()):(t=parseInt(e,10),i="b"),isNaN(t)?null:Math.floor(n[i]*t)}},380:function(e,t,r){"use strict";var n=r(6513);t.fromCallback=function(e,t){if(void 0===e){var r=new Promise((function(t,r){e=function(e,n){e?r(e):t(n)}}));e[void 0!==t?t:"promise"]=r}else if("function"!==typeof e)throw new TypeError("Callback must be a function");return e},t.fromPromise=function(e,t){if(void 0===t)return e;e.then((function(e){n((function(){return t(null,e)}))})).catch((function(e){n((function(){return t(e)}))}))}},6513:function(e){e.exports="function"===typeof queueMicrotask?queueMicrotask:function(e){return Promise.resolve().then(e)}},6953:function(e,t,r){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,a=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(a=n))})),t.splice(a,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(r){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(r){}!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"/ipfs-tag/react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=r(9991)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},9991:function(e,t,r){var n=r(861).default;e.exports=function(e){function t(e){var r,n,i,o=null;function s(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];if(s.enabled){var i=s,o=Number(new Date),u=o-(r||o);i.diff=u,i.prev=r,i.curr=o,r=o,n[0]=t.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");var c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return"%";c++;var a=t.formatters[r];if("function"===typeof a){var o=n[c];e=a.call(i,o),n.splice(c,1),c--}return e})),t.formatArgs.call(i,n);var l=i.log||t.log;l.apply(i,n)}}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=a,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==o?o:(n!==t.namespaces&&(n=t.namespaces,i=t.enabled(e)),i)},set:function(e){o=e}}),"function"===typeof t.init&&t.init(s),s}function a(e,r){var n=t(this.namespace+("undefined"===typeof r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){var e=[].concat(n(t.names.map(i)),n(t.skips.map(i).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var n=("string"===typeof e?e:"").split(/[\s,]+/),a=n.length;for(r=0;r<a;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(6253),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(r){t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},7119:function(e,t,r){"use strict";var n=r(2122).default,a=function(){var e=new Error("Delay aborted");return e.name="AbortError",e},i=function(e){var t=e.clearTimeout,r=e.setTimeout,n=e.willResolve;return function(e){var i,o,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=u.value,l=u.signal;if(l&&l.aborted)return Promise.reject(a());var f=t||clearTimeout,h=function(){f(i),s(a())},p=function(){l&&l.removeEventListener("abort",h)},d=new Promise((function(t,a){o=function(){p(),n?t(c):a(c)},s=a,i=(r||setTimeout)(o,e)}));return l&&l.addEventListener("abort",h,{once:!0}),d.clear=function(){f(i),i=null,o()},d}},o=function(e){var t=i(n(n({},e),{},{willResolve:!0}));return t.reject=i(n(n({},e),{},{willResolve:!1})),t.range=function(e,r,n){return t(function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}(e,r),n)},t},s=o();s.createWithTimers=o,e.exports=s,e.exports.default=s},6990:function(e){"use strict";function t(e,t){t=t||{};this._head=0,this._tail=0,this._capacity=t.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(e)&&this._fromArray(e)}t.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var r=this.size();if(!(t>=r||t<-r))return t<0&&(t+=r),t=this._head+t&this._capacityMask,this._list[t]}},t.prototype.get=function(e){return this.peekAt(e)},t.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},t.prototype.peekFront=function(){return this.peek()},t.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(t.prototype,"length",{get:function(){return this.size()}}),t.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.unshift=function(e){if(void 0===e)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},t.prototype.push=function(e){if(void 0===e)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var r=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),r}},t.prototype.removeOne=function(e){var t=e;if(t===(0|t)&&this._head!==this._tail){var r=this.size(),n=this._list.length;if(!(t>=r||t<-r)){t<0&&(t+=r),t=this._head+t&this._capacityMask;var a,i=this._list[t];if(e<r/2){for(a=e;a>0;a--)this._list[t]=this._list[t=t-1+n&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(a=r-1-e;a>0;a--)this._list[t]=this._list[t=t+1+n&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+n&this._capacityMask}return i}}},t.prototype.remove=function(e,t){var r,n=e,a=t;if(n===(0|n)&&this._head!==this._tail){var i=this.size(),o=this._list.length;if(!(n>=i||n<-i||t<1)){if(n<0&&(n+=i),1===t||!t)return(r=new Array(1))[0]=this.removeOne(n),r;if(0===n&&n+t>=i)return r=this.toArray(),this.clear(),r;var s;for(n+t>i&&(t=i-n),r=new Array(t),s=0;s<t;s++)r[s]=this._list[this._head+n+s&this._capacityMask];if(n=this._head+n&this._capacityMask,e+t===i){for(this._tail=this._tail-t+o&this._capacityMask,s=t;s>0;s--)this._list[n=n+1+o&this._capacityMask]=void 0;return r}if(0===e){for(this._head=this._head+t+o&this._capacityMask,s=t-1;s>0;s--)this._list[n=n+1+o&this._capacityMask]=void 0;return r}if(n<i/2){for(this._head=this._head+e+t+o&this._capacityMask,s=e;s>0;s--)this.unshift(this._list[n=n-1+o&this._capacityMask]);for(n=this._head-1+o&this._capacityMask;a>0;)this._list[n=n-1+o&this._capacityMask]=void 0,a--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+t+o&this._capacityMask,s=i-(t+e);s>0;s--)this.push(this._list[n++]);for(n=this._tail;a>0;)this._list[n=n+1+o&this._capacityMask]=void 0,a--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),r}}},t.prototype.splice=function(e,t){var r=e;if(r===(0|r)){var n=this.size();if(r<0&&(r+=n),!(r>n)){if(arguments.length>2){var a,i,o,s=arguments.length,u=this._list.length,c=2;if(!n||r<n/2){for(i=new Array(r),a=0;a<r;a++)i[a]=this._list[this._head+a&this._capacityMask];for(0===t?(o=[],r>0&&(this._head=this._head+r+u&this._capacityMask)):(o=this.remove(r,t),this._head=this._head+r+u&this._capacityMask);s>c;)this.unshift(arguments[--s]);for(a=r;a>0;a--)this.unshift(i[a-1])}else{var l=(i=new Array(n-(r+t))).length;for(a=0;a<l;a++)i[a]=this._list[this._head+r+t+a&this._capacityMask];for(0===t?(o=[],r!=n&&(this._tail=this._head+r+u&this._capacityMask)):(o=this.remove(r,t),this._tail=this._tail-l+u&this._capacityMask);c<s;)this.push(arguments[c++]);for(a=0;a<l;a++)this.push(i[a])}return o}return this.remove(r,t)}}},t.prototype.clear=function(){this._head=0,this._tail=0},t.prototype.isEmpty=function(){return this._head===this._tail},t.prototype.toArray=function(){return this._copyArray(!1)},t.prototype._fromArray=function(e){for(var t=0;t<e.length;t++)this.push(e[t])},t.prototype._copyArray=function(e){var t,r=[],n=this._list,a=n.length;if(e||this._head>this._tail){for(t=this._head;t<a;t++)r.push(n[t]);for(t=0;t<this._tail;t++)r.push(n[t])}else for(t=this._head;t<this._tail;t++)r.push(n[t]);return r},t.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},t.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},e.exports=t},4250:function(e){e.exports=function(e,t,r,n,a){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:a;return e===a?r:e}},465:function(e){"use strict";function t(e,t){for(var r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}e.exports=function(e,r,n){if(!e||"string"===typeof e)throw new TypeError("Please pass an Error to err-code");n||(n={}),"object"===typeof r&&(n=r,r=""),r&&(n.code=r);try{return t(e,n)}catch(i){n.message=e.message,n.stack=e.stack;var a=function(){};return a.prototype=Object.create(Object.getPrototypeOf(e)),t(new a,n)}}},1101:function(e,t,r){"use strict";var n=r(890);t.zN=n.EventIterator,n.EventIterator},890:function(e,t,r){"use strict";var n=r(4704).default,a=r(6690).default,i=r(9728).default;Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){a(this,t),this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}return i(t,[{key:"push",value:function(e){if(!this.isStopped){var t={value:e,done:!1};if(this.pullQueue.length){var r=this.pullQueue.shift();r&&r.resolve(t)}else this.pushQueue.push(Promise.resolve(t)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn("EventIterator queue reached ".concat(this.pushQueue.length," items")))}}},{key:"stop",value:function(){if(!this.isStopped){this.isStopped=!0,this.remove();var e,t=n(this.pullQueue);try{for(t.s();!(e=t.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(r){t.e(r)}finally{t.f()}this.pullQueue.length=0}}},{key:"fail",value:function(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){var t,r=n(this.pullQueue);try{for(r.s();!(t=r.n()).done;){t.value.reject(e)}}catch(i){r.e(i)}finally{r.f()}this.pullQueue.length=0}else{var a=Promise.reject(e);a.catch((function(){})),this.pushQueue.push(a)}}},{key:"remove",value:function(){var e=this;Promise.resolve().then((function(){e.removeCallback&&e.removeCallback()}))}},{key:e,value:function(){var e=this;return{next:function(t){var r=e.pushQueue.shift();return r?(void 0!==e.lowWaterMark&&e.pushQueue.length<=e.lowWaterMark&&e.isPaused&&(e.isPaused=!1,e.eventHandlers.lowWater&&e.eventHandlers.lowWater()),r):e.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((function(t,r){e.pullQueue.push({resolve:t,reject:r})}))},return:function(){return e.isStopped=!0,e.pushQueue.length=0,e.remove(),Promise.resolve({value:void 0,done:!0})}}}}]),t}(Symbol.asyncIterator),s=i((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.highWaterMark,i=void 0===n?100:n,s=r.lowWaterMark,u=void 0===s?1:s;a(this,e);var c=new o;c.highWaterMark=i,c.lowWaterMark=u,c.removeCallback=t({push:function(e){return c.push(e)},stop:function(){return c.stop()},fail:function(e){return c.fail(e)},on:function(e,t){c.eventHandlers[e]=t}})||function(){},this[Symbol.asyncIterator]=function(){return c[Symbol.asyncIterator]()},Object.freeze(this)}));t.EventIterator=s,t.default=s},3250:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new a(n,i||e,o),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,i=n.length,o=new Array(i);a<i;a++)o[a]=n[a].fn;return o},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,a,i,o){var s=r?r+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,a),!0;case 5:return l.fn.call(l.context,t,n,a,i),!0;case 6:return l.fn.call(l.context,t,n,a,i,o),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,a);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,a){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||a&&!s.once||n&&s.context!==n||o(this,i);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||a&&!s[u].once||n&&s[u].context!==n)&&c.push(s[u]);c.length?this._events[i]=1===c.length?c[0]:c:o(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},7715:function(e){"use strict";var t,r="object"===typeof Reflect?Reflect:null,n=r&&"function"===typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,n){function a(r){e.removeListener(t,i),n(r)}function i(){"function"===typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}v(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"===typeof e.on&&v(e,"error",t,r)}(e,a,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var a,i,o,c;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),void 0===o)o=i[t]=r,++e._eventsCount;else if("function"===typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(a=u(e))>0&&o.length>a&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,c=l,console&&console.warn&&console.warn(c)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=l.bind(n);return a.listener=r,n.wrapFn=a,a}function h(e,t,r){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"===typeof a?r?[a.listener||a]:[a]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(a):d(a,a.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function d(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function v(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(i){n.once&&e.removeEventListener(t,a),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var a="error"===e,i=this._events;if(void 0!==i)a=a&&void 0===i.error;else if(!a)return!1;if(a){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=i[e];if(void 0===u)return!1;if("function"===typeof u)n(u,this,t);else{var c=u.length,l=d(u,c);for(r=0;r<c;++r)n(l[r],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,f(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,f(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,a,i,o;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(a=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){o=r[i].listener,a=i;break}if(a<0)return this;0===a?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,a),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var a,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(a=i[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return h(this,e,!0)},i.prototype.rawListeners=function(e){return h(this,e,!1)},i.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},6233:function(e,t,r){var n=r(6690).default,a=r(9728).default;e.exports=function(){"use strict";function e(t){if(n(this,e),!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}return a(e,[{key:"push",value:function(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}},{key:"shift",value:function(){var e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}},{key:"peek",value:function(){return this.buffer[this.btm]}},{key:"isEmpty",value:function(){return void 0===this.buffer[this.btm]}}]),e}()},5041:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(6233);e.exports=function(){"use strict";function e(t){n(this,e),this.hwm=t||16,this.head=new i(this.hwm),this.tail=this.head}return a(e,[{key:"push",value:function(e){if(!this.head.push(e)){var t=this.head;this.head=t.next=new i(2*this.head.buffer.length),this.head.push(e)}}},{key:"shift",value:function(){var e=this.tail.shift();if(void 0===e&&this.tail.next){var t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}},{key:"peek",value:function(){return this.tail.peek()}},{key:"isEmpty",value:function(){return this.head.isEmpty()}}]),e}()},7050:function(e,t){"use strict";function r(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.BASE,n=e.length,a=0;a<n;a++)t^=e.charCodeAt(a),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}Object.defineProperty(t,"__esModule",{value:!0}),r.BASE=2166136261,t.default=r,e.exports=r},3730:function(e){e.exports=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,r=Object.create(null),n=Object.create(null);function a(a,i){r[a]=i,++t>=e&&(t=0,n=r,r=Object.create(null))}return{has:function(e){return void 0!==r[e]||void 0!==n[e]},remove:function(e){void 0!==r[e]&&(r[e]=void 0),void 0!==n[e]&&(n[e]=void 0)},get:function(e){var t=r[e];return void 0!==t?t:void 0!==(t=n[e])?(a(e,t),t):void 0},set:function(e,t){void 0!==r[e]?r[e]=t:a(e,t)},clear:function(){r=Object.create(null),n=Object.create(null)}}}},8458:function(e,t){t.read=function(e,t,r,n,a){var i,o,s=8*a-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?a-1:0,h=r?-1:1,p=e[t+f];for(f+=h,i=p&(1<<-l)-1,p>>=-l,l+=s;l>0;i=256*i+e[t+f],f+=h,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),i-=c}return(p?-1:1)*o*Math.pow(2,i-n)},t.write=function(e,t,r,n,a,i){var o,s,u,c=8*i-a-1,l=(1<<c)-1,f=l>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,a),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;e[r+p]=255&s,p+=d,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[r+p]=255&o,p+=d,o/=256,c-=8);e[r+p-d]|=128*v}},4773:function(e){!function(t){"use strict";var r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp("^".concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"$"),"i"),threeOctet:new RegExp("^".concat(r,"\\.").concat(r,"\\.").concat(r,"$"),"i"),twoOctet:new RegExp("^".concat(r,"\\.").concat(r,"$"),"i"),longValue:new RegExp("^".concat(r,"$"),"i")},a=new RegExp("^0[0-7]+$","i"),i=new RegExp("^0x[a-f0-9]+$","i"),o="%[0-9a-z]{1,}",s="(?:[0-9a-f]+::?)+",u={zoneIndex:new RegExp(o,"i"),native:new RegExp("^(::)?(".concat(s,")?([0-9a-f]+)?(::)?(").concat(o,")?$"),"i"),deprecatedTransitional:new RegExp("^(?:::)(".concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"(").concat(o,")?)$"),"i"),transitional:new RegExp("^((?:".concat(s,")|(?:::)(?:").concat(s,")?)").concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"(").concat(o,")?$"),"i")};function c(e,t){if(e.indexOf("::")!==e.lastIndexOf("::"))return null;var r,n,a=0,i=-1,o=(e.match(u.zoneIndex)||[])[0];for(o&&(o=o.substring(1),e=e.replace(/%.+$/,""));(i=e.indexOf(":",i+1))>=0;)a++;if("::"===e.substr(0,2)&&a--,"::"===e.substr(-2,2)&&a--,a>t)return null;for(n=t-a,r=":";n--;)r+="0:";return":"===(e=e.replace("::",r))[0]&&(e=e.slice(1)),":"===e[e.length-1]&&(e=e.slice(0,-1)),{parts:t=function(){for(var t=e.split(":"),r=[],n=0;n<t.length;n++)r.push(parseInt(t[n],16));return r}(),zoneId:o}}function l(e,t,r,n){if(e.length!==t.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");for(var a,i=0;n>0;){if((a=r-n)<0&&(a=0),e[i]>>a!==t[i]>>a)return!1;n-=r,i+=1}return!0}function f(e){if(i.test(e))return parseInt(e,16);if("0"===e[0]&&!isNaN(parseInt(e[1],10))){if(a.test(e))return parseInt(e,8);throw new Error("ipaddr: cannot parse ".concat(e," as octal"))}return parseInt(e,10)}function h(e,t){for(;e.length<t;)e="0".concat(e);return e}var p={};p.IPv4=function(){function e(e){if(4!==e.length)throw new Error("ipaddr: ipv4 octet count should be 4");var t,r;for(t=0;t<e.length;t++)if(!(0<=(r=e[t])&&r<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=e}return e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]},e.prototype.kind=function(){return"ipv4"},e.prototype.match=function(e,t){var r;if(void 0===t&&(e=(r=e)[0],t=r[1]),"ipv4"!==e.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return l(this.octets,e.octets,8,t)},e.prototype.prefixLengthFromSubnetMask=function(){var e,t,r,n=0,a=!1,i={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};for(e=3;e>=0;e-=1){if(!((t=this.octets[e])in i))return null;if(r=i[t],a&&0!==r)return null;8!==r&&(a=!0),n+=r}return 32-n},e.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){return this.octets.slice(0)},e.prototype.toIPv4MappedAddress=function(){return p.IPv6.parse("::ffff:".concat(this.toString()))},e.prototype.toNormalizedString=function(){return this.toString()},e.prototype.toString=function(){return this.octets.join(".")},e}(),p.IPv4.broadcastAddressFromCIDR=function(e){try{for(var t=this.parseCIDR(e),r=t[0].toByteArray(),n=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],i=0;i<4;)a.push(parseInt(r[i],10)|255^parseInt(n[i],10)),i++;return new this(a)}catch(o){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.isIPv4=function(e){return null!==this.parser(e)},p.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(t){return!1}},p.IPv4.isValidFourPartDecimal=function(e){return!(!p.IPv4.isValid(e)||!e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},p.IPv4.networkAddressFromCIDR=function(e){var t,r,n,a,i;try{for(n=(t=this.parseCIDR(e))[0].toByteArray(),i=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],r=0;r<4;)a.push(parseInt(n[r],10)&parseInt(i[r],10)),r++;return new this(a)}catch(o){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.parse=function(e){var t=this.parser(e);if(null===t)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(t)},p.IPv4.parseCIDR=function(e){var t;if(t=e.match(/^(.+)\/(\d+)$/)){var r=parseInt(t[2]);if(r>=0&&r<=32){var n=[this.parse(t[1]),r];return Object.defineProperty(n,"toString",{value:function(){return this.join("/")}}),n}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},p.IPv4.parser=function(e){var t,r,a;if(t=e.match(n.fourOctet))return function(){for(var e=t.slice(1,6),n=[],a=0;a<e.length;a++)r=e[a],n.push(f(r));return n}();if(t=e.match(n.longValue)){if((a=f(t[1]))>4294967295||a<0)throw new Error("ipaddr: address outside defined range");return function(){var e,t=[];for(e=0;e<=24;e+=8)t.push(a>>e&255);return t}().reverse()}return(t=e.match(n.twoOctet))?function(){var e=t.slice(1,4),r=[];if((a=f(e[1]))>16777215||a<0)throw new Error("ipaddr: address outside defined range");return r.push(f(e[0])),r.push(a>>16&255),r.push(a>>8&255),r.push(255&a),r}():(t=e.match(n.threeOctet))?function(){var e=t.slice(1,5),r=[];if((a=f(e[2]))>65535||a<0)throw new Error("ipaddr: address outside defined range");return r.push(f(e[0])),r.push(f(e[1])),r.push(a>>8&255),r.push(255&a),r}():null},p.IPv4.subnetMaskFromPrefixLength=function(e){if((e=parseInt(e))<0||e>32)throw new Error("ipaddr: invalid IPv4 prefix length");for(var t=[0,0,0,0],r=0,n=Math.floor(e/8);r<n;)t[r]=255,r++;return n<4&&(t[n]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},p.IPv6=function(){function e(e,t){var r,n;if(16===e.length)for(this.parts=[],r=0;r<=14;r+=2)this.parts.push(e[r]<<8|e[r+1]);else{if(8!==e.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=e}for(r=0;r<this.parts.length;r++)if(!(0<=(n=this.parts[r])&&n<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");t&&(this.zoneId=t)}return e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]},e.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},e.prototype.kind=function(){return"ipv6"},e.prototype.match=function(e,t){var r;if(void 0===t&&(e=(r=e)[0],t=r[1]),"ipv6"!==e.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return l(this.parts,e.parts,16,t)},e.prototype.prefixLengthFromSubnetMask=function(){for(var e,t,r=0,n=!1,a={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},i=7;i>=0;i-=1){if(!((e=this.parts[i])in a))return null;if(t=a[e],n&&0!==t)return null;16!==t&&(n=!0),r+=t}return 128-r},e.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){for(var e,t=[],r=this.parts,n=0;n<r.length;n++)e=r[n],t.push(e>>8),t.push(255&e);return t},e.prototype.toFixedLengthString=function(){var e=function(){for(var e=[],t=0;t<this.parts.length;t++)e.push(h(this.parts[t].toString(16),4));return e}.call(this).join(":"),t="";return this.zoneId&&(t="%".concat(this.zoneId)),e+t},e.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");var e=this.parts.slice(-2),t=e[0],r=e[1];return new p.IPv4([t>>8,255&t,r>>8,255&r])},e.prototype.toNormalizedString=function(){var e=function(){for(var e=[],t=0;t<this.parts.length;t++)e.push(this.parts[t].toString(16));return e}.call(this).join(":"),t="";return this.zoneId&&(t="%".concat(this.zoneId)),e+t},e.prototype.toRFC5952String=function(){for(var e,t=/((^|:)(0(:|$)){2,})/g,r=this.toNormalizedString(),n=0,a=-1;e=t.exec(r);)e[0].length>a&&(n=e.index,a=e[0].length);return a<0?r:"".concat(r.substring(0,n),"::").concat(r.substring(n+a))},e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},e}(),p.IPv6.broadcastAddressFromCIDR=function(e){try{for(var t=this.parseCIDR(e),r=t[0].toByteArray(),n=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],i=0;i<16;)a.push(parseInt(r[i],10)|255^parseInt(n[i],10)),i++;return new this(a)}catch(o){throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(o,")"))}},p.IPv6.isIPv6=function(e){return null!==this.parser(e)},p.IPv6.isValid=function(e){if("string"===typeof e&&-1===e.indexOf(":"))return!1;try{var t=this.parser(e);return new this(t.parts,t.zoneId),!0}catch(r){return!1}},p.IPv6.networkAddressFromCIDR=function(e){var t,r,n,a,i;try{for(n=(t=this.parseCIDR(e))[0].toByteArray(),i=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],r=0;r<16;)a.push(parseInt(n[r],10)&parseInt(i[r],10)),r++;return new this(a)}catch(o){throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(o,")"))}},p.IPv6.parse=function(e){var t=this.parser(e);if(null===t.parts)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(t.parts,t.zoneId)},p.IPv6.parseCIDR=function(e){var t,r,n;if((r=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(r[2]))>=0&&t<=128)return n=[this.parse(r[1]),t],Object.defineProperty(n,"toString",{value:function(){return this.join("/")}}),n;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},p.IPv6.parser=function(e){var t,r,n,a,i,o;if(n=e.match(u.deprecatedTransitional))return this.parser("::ffff:".concat(n[1]));if(u.native.test(e))return c(e,8);if((n=e.match(u.transitional))&&(o=n[6]||"",(t=c(n[1].slice(0,-1)+o,6)).parts)){for(i=[parseInt(n[2]),parseInt(n[3]),parseInt(n[4]),parseInt(n[5])],r=0;r<i.length;r++)if(!(0<=(a=i[r])&&a<=255))return null;return t.parts.push(i[0]<<8|i[1]),t.parts.push(i[2]<<8|i[3]),{parts:t.parts,zoneId:t.zoneId}}return null},p.IPv6.subnetMaskFromPrefixLength=function(e){if((e=parseInt(e))<0||e>128)throw new Error("ipaddr: invalid IPv6 prefix length");for(var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0,n=Math.floor(e/8);r<n;)t[r]=255,r++;return n<16&&(t[n]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},p.fromByteArray=function(e){var t=e.length;if(4===t)return new p.IPv4(e);if(16===t)return new p.IPv6(e);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},p.isValid=function(e){return p.IPv6.isValid(e)||p.IPv4.isValid(e)},p.parse=function(e){if(p.IPv6.isValid(e))return p.IPv6.parse(e);if(p.IPv4.isValid(e))return p.IPv4.parse(e);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},p.parseCIDR=function(e){try{return p.IPv6.parseCIDR(e)}catch(t){try{return p.IPv4.parseCIDR(e)}catch(r){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},p.process=function(e){var t=this.parse(e);return"ipv6"===t.kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t},p.subnetMatch=function(e,t,r){var n,a,i,o;for(a in void 0!==r&&null!==r||(r="unicast"),t)if(Object.prototype.hasOwnProperty.call(t,a))for(!(i=t[a])[0]||i[0]instanceof Array||(i=[i]),n=0;n<i.length;n++)if(o=i[n],e.kind()===o[0].kind()&&e.match.apply(e,o))return a;return r},e.exports?e.exports=p:t.ipaddr=p}(this)},7346:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default;function o(){return o=i((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n().mark((function r(){var i,o;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=e.getReader(),r.prev=1;case 2:return r.next=5,a(i.read());case 5:if(!(o=r.sent).done){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,o.value;case 10:r.next=2;break;case 12:return r.prev=12,!0!==t.preventCancel&&i.cancel(),i.releaseLock(),r.finish(12);case 16:case"end":return r.stop()}}),r,null,[[1,,12,16]])}))()})),o.apply(this,arguments)}e.exports=function(e){return o.apply(this,arguments)}},4369:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8237).default,o=function(){var e=a(n().mark((function e(t){var r,a,o,s,u,c,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=!1,o=!1,e.prev=3,u=i(t);case 5:return e.next=7,u.next();case 7:if(!(a=!(c=e.sent).done)){e.next=13;break}l=c.value,r.push(l);case 10:a=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),o=!0,s=e.t0;case 19:if(e.prev=19,e.prev=20,!a||null==u.return){e.next=24;break}return e.next=24,u.return();case 24:if(e.prev=24,!o){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})));return function(t){return e.apply(this,arguments)}}();e.exports=o},5861:function(e,t,r){"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?e.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:e.exports={default:r(4732).default,Headers:r(4732).Headers,Request:r(4732).Request,Response:r(4732).Response}},4683:function(e,t,r){"use strict";var n=r(272),a="object"===typeof window&&"object"===typeof document&&9===document.nodeType,i=n(),o=a&&!i,s=i&&!a,u=i&&a,c="undefined"!==typeof process&&"undefined"!==typeof process.release&&"node"===process.release.name&&!i,l="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,f="undefined"!==typeof process&&!1,h="undefined"!==typeof navigator&&"ReactNative"===navigator.product;e.exports={isTest:f,isElectron:i,isElectronMain:s,isElectronRenderer:u,isNode:c,isBrowser:o,isWebWorker:l,isEnvWithDom:a,isReactNative:h}},3205:function(e,t,r){"use strict";e.exports=r(5861)},7575:function(e,t,r){"use strict";var n=r(7061).default,a=r(8186).default,i=r(6737).default,o=r(8131).default,s=r(8237).default,u=r(2892);function c(e,t){return l.apply(this,arguments)}function l(){return(l=a(n().mark((function e(t,r){var a,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new u,e.next=3,i(a.get(t,r));case 3:return c=e.sent,e.delegateYield(o(s(c.iterator()),i),"t0",5);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports=function(e,t){return{path:decodeURIComponent(new URL(e).pathname.split("/").pop()||""),content:c(e,t)}}},2892:function(e,t,r){"use strict";var n=r(8416).default,a=r(7061).default,i=r(2122).default,o=r(7156).default,s=r(6690).default,u=r(9728).default,c=r(8186).default,l=r(6737).default,f=r(8131).default,h=r(8237).default,p=r(8527),d=p.fetch,v=p.Request,y=p.Headers,b=r(4257),g=b.TimeoutError,m=b.HTTPError,w=r(512).bind({ignoreUndefined:!0}),k=r(5159),x=k.URL,_=k.URLSearchParams,E=r(1494),S=r(7346),A=r(4683),C=A.isBrowser,I=A.isWebWorker,T=r(4369),D=function(e,t,r){if(void 0===t)return e;var n=Date.now(),a=function(){return Date.now()-n>=t};return new Promise((function(n,i){var o=setTimeout((function(){a()&&(i(new g),r.abort())}),t),s=function(e){return function(t){clearTimeout(o),a()?i(new g):e(t)}};e.then(s(n),s(i))}))},R={throwHttpErrors:!0,credentials:"same-origin"},P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),this.opts=w(R,t)}return u(e,[{key:"fetch",value:function(){var e=o(a().mark((function e(t){var r,n,o,s,u,p,b,g,k,A,R=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R.length>1&&void 0!==R[1]?R[1]:{},n=w(this.opts,r),o=new y(n.headers),"string"===typeof t||(t instanceof x||t instanceof v)){e.next=5;break}throw new TypeError("`resource` must be a string, URL, or Request");case 5:if(s=new x(t.toString(),n.base),u=n.searchParams,p=n.transformSearchParams,b=n.json,u&&(s.search="function"===typeof p?p(new _(n.searchParams)):new _(n.searchParams)),b&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json")),g=new AbortController,k=E([g.signal,n.signal]),!(null!=globalThis.ReadableStream&&n.body instanceof globalThis.ReadableStream&&(C||I))){e.next=17;break}return e.t0=Blob,e.next=15,T(S(n.body));case 15:e.t1=e.sent,n.body=new e.t0(e.t1);case 17:return e.next=19,D(d(s.toString(),i(i({},n),{},{signal:k,timeout:void 0,headers:o,duplex:"half"})),n.timeout,g);case 19:if((A=e.sent).ok||!n.throwHttpErrors){e.next=25;break}if(!n.handleError){e.next=24;break}return e.next=24,n.handleError(A);case 24:throw new m(A);case 25:return A.iterator=c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(f(h(L(A.body)),l),"t0",1);case 1:case"end":return e.stop()}}),e)}))),A.ndjson=c(a().mark((function e(){var t,n,i,o,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,n=!1,e.prev=2,o=h(N(A.iterator()));case 4:return e.next=6,l(o.next());case 6:if(!(t=!(s=e.sent).done)){e.next=18;break}if(u=s.value,!r.transform){e.next=13;break}return e.next=11,r.transform(u);case 11:e.next=15;break;case 13:return e.next=15,u;case 15:t=!1,e.next=4;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),n=!0,i=e.t0;case 24:if(e.prev=24,e.prev=25,!t||null==o.return){e.next=29;break}return e.next=29,l(o.return());case 29:if(e.prev=29,!n){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}}),e,null,[[2,20,24,34],[25,,29,33]])}))),e.abrupt("return",A);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"POST"}))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"GET"}))}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"PUT"}))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"DELETE"}))}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"OPTIONS"}))}}]),e}(),N=function(){var e=c(a().mark((function e(t){var r,n,i,o,s,u,c,f,p,d,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new TextDecoder,n="",i=!1,o=!1,e.prev=4,u=h(t);case 6:return e.next=8,l(u.next());case 8:if(!(i=!(c=e.sent).done)){e.next=25;break}f=c.value,n+=r.decode(f,{stream:!0}),p=n.split(/\r?\n/),d=0;case 13:if(!(d<p.length-1)){e.next=21;break}if(!((v=p[d].trim()).length>0)){e.next=18;break}return e.next=18,JSON.parse(v);case 18:d++,e.next=13;break;case 21:n=p[p.length-1];case 22:i=!1,e.next=6;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(4),o=!0,s=e.t0;case 31:if(e.prev=31,e.prev=32,!i||null==u.return){e.next=36;break}return e.next=36,l(u.return());case 36:if(e.prev=36,!o){e.next=39;break}throw s;case 39:return e.finish(36);case 40:return e.finish(31);case 41:if(0===(n=(n+=r.decode()).trim()).length){e.next=46;break}return e.next=46,JSON.parse(n);case 46:case"end":return e.stop()}}),e,null,[[4,27,31,41],[32,,36,40]])})));return function(t){return e.apply(this,arguments)}}(),L=function(e){if(O(e))return e;if(U(e)){var t=e[Symbol.asyncIterator]();return n({},Symbol.asyncIterator,(function(){return{next:t.next.bind(t),return:function(r){return e.destroy(),"function"===typeof t.return?t.return():Promise.resolve({done:!0,value:r})}}}))}if(B(e)){var r=e.getReader();return c(a().mark((function e(){var t,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:return e.next=4,l(r.read());case 4:if(t=e.sent,n=t.done,i=t.value,!n){e.next=9;break}return e.abrupt("return");case 9:if(!i){e.next=12;break}return e.next=12,i;case 12:e.next=1;break;case 14:return e.prev=14,r.releaseLock(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,,14,17]])})))()}throw new TypeError("Body can't be converted to AsyncIterable")},O=function(e){return"object"===typeof e&&null!==e&&"function"===typeof e[Symbol.asyncIterator]},B=function(e){return e&&"function"===typeof e.getReader},U=function(e){return Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable")};P.HTTPError=m,P.TimeoutError=g,P.streamToAsyncIterator=L,P.post=function(e,t){return new P(t).post(e,t)},P.get=function(e,t){return new P(t).get(e,t)},P.put=function(e,t){return new P(t).put(e,t)},P.delete=function(e,t){return new P(t).delete(e,t)},P.options=function(e,t){return new P(t).options(e,t)},e.exports=P},4257:function(e,t,r){"use strict";var n=r(9728).default,a=r(6690).default,i=r(1655).default,o=r(6389).default,s=r(3496).default,u=function(e){i(r,e);var t=o(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Request timed out";return a(this,r),(e=t.call(this,n)).name="TimeoutError",e}return n(r)}(s(Error));t.TimeoutError=u;var c=function(e){i(r,e);var t=o(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted.";return a(this,r),(e=t.call(this,n)).name="AbortError",e}return n(r)}(s(Error));t.AbortError=c;var l=function(e){i(r,e);var t=o(r);function r(e){var n;return a(this,r),(n=t.call(this,e.statusText)).name="HTTPError",n.response=e,n}return n(r)}(s(Error));t.HTTPError=l},8527:function(e,t,r){"use strict";var n=r(9728).default,a=r(6690).default,i=r(6115).default,o=r(1655).default,s=r(6389).default,u=r(7424).default,c=r(4704).default,l=r(4257),f=l.TimeoutError,h=l.AbortError,p=r(3205),d=p.Response,v=p.Request,y=p.Headers,b=p.default,g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new XMLHttpRequest;r.open(t.method||"GET",e.toString(),!0);var n=t.timeout,a=t.headers;if(n&&n>0&&n<1/0&&(r.timeout=n),null!=t.overrideMimeType&&r.overrideMimeType(t.overrideMimeType),a){var i,o=c(new y(a));try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2),l=s[0],p=s[1];r.setRequestHeader(l,p)}}catch(v){o.e(v)}finally{o.f()}}return t.signal&&(t.signal.onabort=function(){return r.abort()}),t.onUploadProgress&&(r.upload.onprogress=t.onUploadProgress),r.responseType="arraybuffer",new Promise((function(e,n){var a=function(t){switch(t.type){case"error":e(d.error());break;case"load":e(new k(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:w(r.getAllResponseHeaders())}));break;case"timeout":n(new f);break;case"abort":n(new h)}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(t.body)}))},m=b,w=function(e){var t,r=new y,n=c(e.trim().split(/[\r\n]+/));try{for(n.s();!(t=n.n()).done;){var a=t.value,i=a.indexOf(": ");i>0&&r.set(a.slice(0,i),a.slice(i+1))}}catch(o){n.e(o)}finally{n.f()}return r},k=function(e){o(r,e);var t=s(r);function r(e,n,o){var s;return a(this,r),s=t.call(this,n,o),Object.defineProperty(i(s),"url",{value:e}),s}return n(r)}(d);e.exports={fetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!=t.onUploadProgress?g(e,t):m(e,t)},Request:v,Headers:y}},2882:function(e){"use strict";var t=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;e.exports=function(e,r){if(null==r&&(r=!1),e.length<2)return!1;if(e.length>255)return!1;var n=e[e.length-1];if(r){if("."!==n)return!1}else if("."===n)return!1;return t.test(e)}},272:function(e){e.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},3118:function(e){"use strict";e.exports=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},4569:function(e){"use strict";e.exports={RTLD_LAZY:1,RTLD_NOW:2,RTLD_GLOBAL:8,RTLD_LOCAL:4,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGINFO:29,SIGSYS:12,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,UV_FS_O_FILEMAP:0,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_DSYNC:4194304,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:269488335,SSL_OP_ALL:2147485780,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:0,SSL_OP_MICROSOFT_SESS_ID_BUG:0,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:0,SSL_OP_NETSCAPE_CHALLENGE_BUG:0,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:0,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:0,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_SINGLE_DH_USE:0,SSL_OP_SINGLE_ECDH_USE:0,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:0,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:0,SSL_OP_TLS_D5_BUG:0,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},4288:function(e){"use strict";var t=65536;e.exports=function(e){var r=new Uint8Array(e),n=0;if(e>0)if(e>t)for(;n<e;)n+t>e?(crypto.getRandomValues(r.subarray(n,n+(e-n))),n+=e-n):(crypto.getRandomValues(r.subarray(n,n+t)),n+=t);else crypto.getRandomValues(r);return r}},5159:function(e,t,r){"use strict";var n=r(4609),a=n.URLWithLegacySupport,i=n.format,o=n.URLSearchParams,s=n.defaultBase,u=r(8555);e.exports={URL:a,URLSearchParams:o,format:i,relative:u,defaultBase:s}},8555:function(e,t,r){"use strict";var n=r(4609),a=n.URLWithLegacySupport,i=n.format;e.exports=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,s=r.protocol?r.protocol.replace(":",""):"http";s=(n[s]||o||s)+":";try{t=new a(e)}catch(c){t={}}var u=Object.assign({},r,{protocol:s||t.protocol,host:r.host||t.host});return new a(e,i(u)).toString()}},4609:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i="undefined"!==typeof navigator&&"ReactNative"===navigator.product;var o=self.URL,s=i?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:"",u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;n(this,e),this.super=new o(t,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}return a(e,[{key:"hash",get:function(){return this.super.hash},set:function(e){this.super.hash=e}},{key:"host",get:function(){return this.super.host},set:function(e){this.super.host=e}},{key:"hostname",get:function(){return this.super.hostname},set:function(e){this.super.hostname=e}},{key:"href",get:function(){return this.super.href},set:function(e){this.super.href=e}},{key:"origin",get:function(){return this.super.origin}},{key:"password",get:function(){return this.super.password},set:function(e){this.super.password=e}},{key:"pathname",get:function(){return this.super.pathname},set:function(e){this.super.pathname=e}},{key:"port",get:function(){return this.super.port},set:function(e){this.super.port=e}},{key:"protocol",get:function(){return this.super.protocol},set:function(e){this.super.protocol=e}},{key:"search",get:function(){return this.super.search},set:function(e){this.super.search=e}},{key:"searchParams",get:function(){return this.super.searchParams}},{key:"username",get:function(){return this.super.username},set:function(e){this.super.username=e}},{key:"toJSON",value:function(){return this.super.toJSON()}},{key:"toString",value:function(){return this.super.toString()}},{key:"format",value:function(){return this.toString()}}],[{key:"createObjectURL",value:function(e){return o.createObjectURL(e)}},{key:"revokeObjectURL",value:function(e){o.revokeObjectURL(e)}}]),e}();e.exports={URLWithLegacySupport:u,URLSearchParams:self.URLSearchParams,defaultBase:s,format:function(e){if("string"===typeof e)return new o(e).toString();if(!(e instanceof o)){var t=e.username&&e.password?"".concat(e.username,":").concat(e.password,"@"):"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",a=e.protocol?e.protocol+"//":"",i=e.host||"",s=e.hostname||"",u=e.search||(e.query?"?"+e.query:""),c=e.hash||"",l=e.pathname||"",f=e.path||l+u;return"".concat(a).concat(t||r).concat(i||s+n).concat(f).concat(c)}}}},7864:function(e,t,r){"use strict";var n=r(7061).default,a=r(4704).default,i=r(6690).default,o=r(9728).default,s=r(1655).default,u=r(6389).default,c=r(1346);function l(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;++r)if(e[r]!==t[r])return!1;return!0}function f(e,t){if(!(t instanceof Uint8Array))throw new TypeError(e+" is not a Uint8Array")}var h=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,r),(e=t.call(this)).localNodeId=n.localNodeId||c(20),e.numberOfNodesPerKBucket=n.numberOfNodesPerKBucket||20,e.numberOfNodesToPing=n.numberOfNodesToPing||3,e.distance=n.distance||r.distance,e.arbiter=n.arbiter||r.arbiter,e.metadata=Object.assign({},n.metadata),f("option.localNodeId as parameter 1",e.localNodeId),e.root={contacts:[],dontSplit:!1,left:null,right:null},e}return o(r,[{key:"add",value:function(e){f("contact.id",(e||{}).id);for(var t=0,r=this.root;null===r.contacts;)r=this._determineNode(r,e.id,t++);var n=this._indexOf(r,e.id);return n>=0?(this._update(r,n,e),this):r.contacts.length<this.numberOfNodesPerKBucket?(r.contacts.push(e),this.emit("added",e),this):r.dontSplit?(this.emit("ping",r.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(r,t),this.add(e))}},{key:"closest",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(f("id",e),!Number.isInteger(r)&&r!==1/0||r<=0)throw new TypeError("n is not positive number");for(var n=[],a=[this.root],i=0;a.length>0&&n.length<r;){var o=a.pop();if(null===o.contacts){var s=this._determineNode(o,e,i++);a.push(o.left===s?o.right:o.left),a.push(s)}else n=n.concat(o.contacts)}return n.map((function(r){return[t.distance(r.id,e),r]})).sort((function(e,t){return e[0]-t[0]})).slice(0,r).map((function(e){return e[1]}))}},{key:"count",value:function(){for(var e=0,t=[this.root];t.length>0;){var r=t.pop();null===r.contacts?t.push(r.right,r.left):e+=r.contacts.length}return e}},{key:"_determineNode",value:function(e,t,r){var n=r>>3,a=r%8;return t.length<=n&&0!==a?e.left:t[n]&1<<7-a?e.right:e.left}},{key:"get",value:function(e){f("id",e);for(var t=0,r=this.root;null===r.contacts;)r=this._determineNode(r,e,t++);var n=this._indexOf(r,e);return n>=0?r.contacts[n]:null}},{key:"_indexOf",value:function(e,t){for(var r=0;r<e.contacts.length;++r)if(l(e.contacts[r].id,t))return r;return-1}},{key:"remove",value:function(e){f("the id as parameter 1",e);for(var t=0,r=this.root;null===r.contacts;)r=this._determineNode(r,e,t++);var n=this._indexOf(r,e);if(n>=0){var a=r.contacts.splice(n,1)[0];this.emit("removed",a)}return this}},{key:"_split",value:function(e,t){e.left={contacts:[],dontSplit:!1,left:null,right:null},e.right={contacts:[],dontSplit:!1,left:null,right:null};var r,n=a(e.contacts);try{for(n.s();!(r=n.n()).done;){var i=r.value;this._determineNode(e,i.id,t).contacts.push(i)}}catch(s){n.e(s)}finally{n.f()}e.contacts=null;var o=this._determineNode(e,this.localNodeId,t);(e.left===o?e.right:e.left).dontSplit=!0}},{key:"toArray",value:function(){for(var e=[],t=[this.root];t.length>0;){var r=t.pop();null===r.contacts?t.push(r.right,r.left):e=e.concat(r.contacts)}return e}},{key:"toIterable",value:n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[this.root];case 1:if(!(t.length>0)){e.next=10;break}if(null!==(r=t.pop()).contacts){e.next=7;break}t.push(r.right,r.left),e.next=8;break;case 7:return e.delegateYield(r.contacts,"t0",8);case 8:e.next=1;break;case 10:case"end":return e.stop()}}),e,this)}))},{key:"_update",value:function(e,t,r){if(!l(e.contacts[t].id,r.id))throw new Error("wrong index for _update");var n=e.contacts[t],a=this.arbiter(n,r);a===n&&n!==r||(e.contacts.splice(t,1),e.contacts.push(a),this.emit("updated",n,a))}}],[{key:"arbiter",value:function(e,t){return e.vectorClock>t.vectorClock?e:t}},{key:"distance",value:function(e,t){for(var r=0,n=0,a=Math.min(e.length,t.length),i=Math.max(e.length,t.length);n<a;++n)r=256*r+(e[n]^t[n]);for(;n<i;++n)r=256*r+255;return r}}]),r}(r(7715).EventEmitter);e.exports=h},4959:function(e,t){"use strict";t.supports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.reduce((function(e,t){return Object.assign(e,t)}),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})}},9395:function(e,t,r){"use strict";var n=r(2122).default,a=r(6690).default,i=r(9728).default,o=r(3899),s=r(8151),u=r(4378).Encoding,c=r(2003),l=c.BufferFormat,f=c.ViewFormat,h=c.UTF8Format,p=Symbol("formats"),d=Symbol("encodings"),v=new Set(["buffer","view","utf8"]),y=function(){function e(t){if(a(this,e),!Array.isArray(t))throw new TypeError("The first argument 'formats' must be an array");if(!t.every((function(e){return v.has(e)})))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'");for(var r in this[d]=new Map,this[p]=new Set(t),s)try{this.encoding(r)}catch(n){if("LEVEL_ENCODING_NOT_SUPPORTED"!==n.code)throw n}}return i(e,[{key:"encodings",value:function(){return Array.from(new Set(this[d].values()))}},{key:"encoding",value:function(e){var t=this[d].get(e);if(void 0===t){if("string"===typeof e&&""!==e){if(!(t=g[e]))throw new o("Encoding '".concat(e,"' is not found"),{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if("object"!==typeof e||null===e)throw new TypeError("First argument 'encoding' must be a string or object");t=function(e){if(e instanceof u)return e;var t="type"in e&&"string"===typeof e.type?e.type:void 0,r=e.name||t||"anonymous-".concat(m++);switch(function(e){return"format"in e&&void 0!==e.format?e.format:"buffer"in e&&"boolean"===typeof e.buffer?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}(e)){case"view":return new f(n(n({},e),{},{name:r}));case"utf8":return new h(n(n({},e),{},{name:r}));case"buffer":return new l(n(n({},e),{},{name:r}));default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}(e)}var r=t,a=r.name,i=r.format;if(!this[p].has(i))if(this[p].has("view"))t=t.createViewTranscoder();else if(this[p].has("buffer"))t=t.createBufferTranscoder();else{if(!this[p].has("utf8"))throw new o("Encoding '".concat(a,"' cannot be transcoded"),{code:"LEVEL_ENCODING_NOT_SUPPORTED"});t=t.createUTF8Transcoder()}for(var s=0,c=[e,a,t.name,t.commonName];s<c.length;s++){var v=c[s];this[d].set(v,t)}}return t}}]),e}();t.Transcoder=y;var b={binary:s.buffer,"utf-8":s.utf8},g=n(n({},s),b),m=0},4378:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i=r(3899),o=new Set(["buffer","view","utf8"]),s=function(){function e(t){if(n(this,e),this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,"function"!==typeof this.encode)throw new TypeError("The 'encode' property must be a function");if("function"!==typeof this.decode)throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),"string"!==typeof this.name||""===this.name)throw new TypeError("The 'name' property must be a string");if("string"!==typeof this.format||!o.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}return a(e,[{key:"commonName",get:function(){return this.name.split("+")[0]}},{key:"createBufferTranscoder",value:function(){throw new i("Encoding '".concat(this.name,"' cannot be transcoded to 'buffer'"),{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}},{key:"createViewTranscoder",value:function(){throw new i("Encoding '".concat(this.name,"' cannot be transcoded to 'view'"),{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}},{key:"createUTF8Transcoder",value:function(){throw new i("Encoding '".concat(this.name,"' cannot be transcoded to 'utf8'"),{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}]),e}();t.Encoding=s},8151:function(e,t,r){"use strict";var n=(r(5362)||{Buffer:{isBuffer:function(){return!1}}}).Buffer,a=r(4188)(),i=a.textEncoder,o=a.textDecoder,s=r(2003),u=s.BufferFormat,c=s.ViewFormat,l=s.UTF8Format,f=function(e){return e};t.utf8=new l({encode:function(e){return n.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?o.decode(e):String(e)},decode:f,name:"utf8",createViewTranscoder:function(){return new c({encode:function(e){return ArrayBuffer.isView(e)?e:i.encode(e)},decode:function(e){return o.decode(e)},name:"".concat(this.name,"+view")})},createBufferTranscoder:function(){return new u({encode:function(e){return n.isBuffer(e)?e:ArrayBuffer.isView(e)?n.from(e.buffer,e.byteOffset,e.byteLength):n.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:"".concat(this.name,"+buffer")})}}),t.json=new l({encode:JSON.stringify,decode:JSON.parse,name:"json"}),t.buffer=new u({encode:function(e){return n.isBuffer(e)?e:ArrayBuffer.isView(e)?n.from(e.buffer,e.byteOffset,e.byteLength):n.from(String(e),"utf8")},decode:f,name:"buffer",createViewTranscoder:function(){return new c({encode:function(e){return ArrayBuffer.isView(e)?e:n.from(String(e),"utf8")},decode:function(e){return n.from(e.buffer,e.byteOffset,e.byteLength)},name:"".concat(this.name,"+view")})}}),t.view=new c({encode:function(e){return ArrayBuffer.isView(e)?e:i.encode(e)},decode:f,name:"view",createBufferTranscoder:function(){return new u({encode:function(e){return n.isBuffer(e)?e:ArrayBuffer.isView(e)?n.from(e.buffer,e.byteOffset,e.byteLength):n.from(String(e),"utf8")},decode:f,name:"".concat(this.name,"+buffer")})}}),t.hex=new u({encode:function(e){return n.isBuffer(e)?e:n.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"}),t.base64=new u({encode:function(e){return n.isBuffer(e)?e:n.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})},2003:function(e,t,r){"use strict";var n=r(2122).default,a=r(6690).default,i=r(9728).default,o=r(1655).default,s=r(6389).default,u=(r(5362)||{}).Buffer,c=r(4378).Encoding,l=r(4188),f=function(e){o(r,e);var t=s(r);function r(e){return a(this,r),t.call(this,n(n({},e),{},{format:"buffer"}))}return i(r,[{key:"createViewTranscoder",value:function(){var e=this;return new h({encode:this.encode,decode:function(t){return e.decode(u.from(t.buffer,t.byteOffset,t.byteLength))},name:"".concat(this.name,"+view")})}},{key:"createBufferTranscoder",value:function(){return this}}]),r}(c),h=function(e){o(r,e);var t=s(r);function r(e){return a(this,r),t.call(this,n(n({},e),{},{format:"view"}))}return i(r,[{key:"createBufferTranscoder",value:function(){var e=this;return new f({encode:function(t){var r=e.encode(t);return u.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:"".concat(this.name,"+buffer")})}},{key:"createViewTranscoder",value:function(){return this}}]),r}(c),p=function(e){o(r,e);var t=s(r);function r(e){return a(this,r),t.call(this,n(n({},e),{},{format:"utf8"}))}return i(r,[{key:"createBufferTranscoder",value:function(){var e=this;return new f({encode:function(t){return u.from(e.encode(t),"utf8")},decode:function(t){return e.decode(t.toString("utf8"))},name:"".concat(this.name,"+buffer")})}},{key:"createViewTranscoder",value:function(){var e=this,t=l(),r=t.textEncoder,n=t.textDecoder;return new h({encode:function(t){return r.encode(e.encode(t))},decode:function(t){return e.decode(n.decode(t))},name:"".concat(this.name,"+view")})}},{key:"createUTF8Transcoder",value:function(){return this}}]),r}(c);t.BufferFormat=f,t.ViewFormat=h,t.UTF8Format=p},4188:function(e){"use strict";var t=null;e.exports=function(){return null===t&&(t={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),t}},4761:function(e,t,r){t.Level=r(1541).BrowserLevel},7960:function(e,t){var r=function(){this.type=null,this._setSubtypeAndSuffix(null),this.parameters={}};r.prototype.isValid=function(){return null!==this.type&&null!==this.subtype&&"example"!==this.subtype},r.prototype._setSubtypeAndSuffix=function(e){if(this.subtype=e,this.subtypeFacets=[],this.suffix=null,e)if(e.indexOf("+")>-1&&"+"!==e.substr(-1)){var t=e.split("+",2);this.subtype=t[0],this.subtypeFacets=t[0].split("."),this.suffix=t[1]}else this.subtypeFacets=e.split(".")},r.prototype.hasSuffix=function(){return!!this.suffix},r.prototype._firstSubtypeFacetEquals=function(e){return this.subtypeFacets.length>0&&this.subtypeFacets[0]===e},r.prototype.isVendor=function(){return this._firstSubtypeFacetEquals("vnd")},r.prototype.isPersonal=function(){return this._firstSubtypeFacetEquals("prs")},r.prototype.isExperimental=function(){return this._firstSubtypeFacetEquals("x")||"x-"===this.subtype.substring(0,2).toLowerCase()},r.prototype.asString=function(){var e="";if(this.isValid()){e=e+this.type+"/"+this.subtype,this.hasSuffix()&&(e=e+"+"+this.suffix);var t=Object.keys(this.parameters);if(t.length>0){var r=[],a=this;t.sort((function(e,t){return e.localeCompare(t)})).forEach((function(e){r.push(e+"="+n(a.parameters[e]))})),e=e+";"+r.join(";")}}return e};var n=function(e){return e.indexOf(";")>-1?'"'+e+'"':e},a=/^(application|audio|font|image|message|model|multipart|text|video|\*)\/([a-zA-Z0-9!#$%^&\*_\-\+{}\|'.`~]{1,127})(;.*)?$/,i=/;(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))/;t.fromString=function(e){var t=new r;if(e){var n=e.match(a);!n||"*"===n[1]&&"*"!==n[2]||(t.type=n[1],t._setSubtypeAndSuffix(n[2]),n[3]&&n[3].substr(1).split(i).forEach((function(e){var r=e.split("=",2);2===r.length&&(t.parameters[r[0].toLowerCase().trim()]=function(e){return'"'===e.substr(0,1)&&'"'===e.substr(-1)?e.substr(1,e.length-2):e}(r[1].trim()))})))}return t}},512:function(e,t,r){"use strict";var n=r(4704).default,a=r(3118),i=Object.prototype.hasOwnProperty,o=Object.propertyIsEnumerable,s=function(e,t,r){return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})},u=this,c={concatArrays:!1,ignoreUndefined:!1},l=function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){var a,s=Object.getOwnPropertySymbols(e),u=n(s);try{for(u.s();!(a=u.n()).done;){var c=a.value;o.call(e,c)&&t.push(c)}}catch(l){u.e(l)}finally{u.f()}}return t};function f(e){return Array.isArray(e)?function(e){var t=e.slice(0,0);return l(e).forEach((function(r){s(t,r,f(e[r]))})),t}(e):a(e)?function(e){var t=null===Object.getPrototypeOf(e)?Object.create(null):{};return l(e).forEach((function(r){s(t,r,f(e[r]))})),t}(e):e}var h=function(e,t,r,n){return r.forEach((function(r){"undefined"===typeof t[r]&&n.ignoreUndefined||(r in e&&e[r]!==Object.getPrototypeOf(e)?s(e,r,p(e[r],t[r],n)):s(e,r,f(t[r])))})),e};function p(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?function(e,t,r){var n=e.slice(0,0),a=0;return[e,t].forEach((function(t){for(var o=[],u=0;u<t.length;u++)i.call(t,u)&&(o.push(String(u)),s(n,a++,t===e?t[u]:f(t[u])));n=h(n,t,l(t).filter((function(e){return!o.includes(e)})),r)})),n}(e,t,r):a(t)&&a(e)?h(e,t,l(t),r):f(t)}e.exports=function(){for(var e=p(f(c),this!==u&&this||{},c),t={_:{}},r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];for(var o=0,s=n;o<s.length;o++){var l=s[o];if(void 0!==l){if(!a(l))throw new TypeError("`"+l+"` is not an Option Object");t=p(t,{_:l},e)}}return t._}},3899:function(e,t,r){"use strict";var n=r(9728).default,a=r(6690).default,i=r(6115).default,o=r(1655).default,s=r(6389).default,u=r(3496).default;e.exports=function(e){o(r,e);var t=s(r);function r(e,n){var o;return a(this,r),o=t.call(this,e||""),"object"===typeof n&&null!==n&&(n.code&&(o.code=String(n.code)),n.expected&&(o.expected=!0),n.transient&&(o.transient=!0),n.cause&&(o.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(i(o),o.constructor),o}return n(r)}(u(Error))},6253:function(e){var t=1e3,r=60*t,n=60*r,a=24*n,i=7*a,o=365.25*a;function s(e,t,r,n){var a=t>=1.5*r;return Math.round(e/r)+" "+n+(a?"s":"")}e.exports=function(e,u){u=u||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!s)return;var u=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*o;case"weeks":case"week":case"w":return u*i;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&isFinite(e))return u.long?function(e){var i=Math.abs(e);if(i>=a)return s(e,i,a,"day");if(i>=n)return s(e,i,n,"hour");if(i>=r)return s(e,i,r,"minute");if(i>=t)return s(e,i,t,"second");return e+" ms"}(e):function(e){var i=Math.abs(e);if(i>=a)return Math.round(e/a)+"d";if(i>=n)return Math.round(e/n)+"h";if(i>=r)return Math.round(e/r)+"m";if(i>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},9156:function(e,t,r){e.exports=r(8819)},8819:function(e,t){!function(r,n){"use strict";var a={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function i(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function o(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function s(e,t){return e<<t|e>>>32-t}function u(e){return e=o(e^=e>>>16,2246822507),e=o(e^=e>>>13,3266489909),e^=e>>>16}function c(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function f(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function h(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function p(e,t){return[e[0]^t[0],e[1]^t[1]]}function d(e){return e=p(e,[0,e[0]>>>1]),e=p(e=l(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=p(e=l(e,[3301882366,444984403]),[0,e[0]>>>1])}a.x86.hash32=function(e,t){if(a.inputValidation&&!i(e))return n;t=t||0;for(var r=e.length%4,c=e.length-r,l=t,f=0,h=3432918353,p=461845907,d=0;d<c;d+=4)f=o(f=e[d]|e[d+1]<<8|e[d+2]<<16|e[d+3]<<24,h),f=o(f=s(f,15),p),l=o(l=s(l^=f,13),5)+3864292196;switch(f=0,r){case 3:f^=e[d+2]<<16;case 2:f^=e[d+1]<<8;case 1:f=o(f^=e[d],h),l^=f=o(f=s(f,15),p)}return(l=u(l^=e.length))>>>0},a.x86.hash128=function(e,t){if(a.inputValidation&&!i(e))return n;t=t||0;for(var r=e.length%16,c=e.length-r,l=t,f=t,h=t,p=t,d=0,v=0,y=0,b=0,g=597399067,m=2869860233,w=951274213,k=2716044179,x=0;x<c;x+=16)d=e[x]|e[x+1]<<8|e[x+2]<<16|e[x+3]<<24,v=e[x+4]|e[x+5]<<8|e[x+6]<<16|e[x+7]<<24,y=e[x+8]|e[x+9]<<8|e[x+10]<<16|e[x+11]<<24,b=e[x+12]|e[x+13]<<8|e[x+14]<<16|e[x+15]<<24,d=s(d=o(d,g),15),l=s(l^=d=o(d,m),19),l=o(l+=f,5)+1444728091,v=s(v=o(v,m),16),f=s(f^=v=o(v,w),17),f=o(f+=h,5)+197830471,y=s(y=o(y,w),17),h=s(h^=y=o(y,k),15),h=o(h+=p,5)+2530024501,b=s(b=o(b,k),18),p=s(p^=b=o(b,g),13),p=o(p+=l,5)+850148119;switch(d=0,v=0,y=0,b=0,r){case 15:b^=e[x+14]<<16;case 14:b^=e[x+13]<<8;case 13:b=o(b^=e[x+12],k),p^=b=o(b=s(b,18),g);case 12:y^=e[x+11]<<24;case 11:y^=e[x+10]<<16;case 10:y^=e[x+9]<<8;case 9:y=o(y^=e[x+8],w),h^=y=o(y=s(y,17),k);case 8:v^=e[x+7]<<24;case 7:v^=e[x+6]<<16;case 6:v^=e[x+5]<<8;case 5:v=o(v^=e[x+4],m),f^=v=o(v=s(v,16),w);case 4:d^=e[x+3]<<24;case 3:d^=e[x+2]<<16;case 2:d^=e[x+1]<<8;case 1:d=o(d^=e[x],g),l^=d=o(d=s(d,15),m)}return l^=e.length,l+=f^=e.length,l+=h^=e.length,f+=l+=p^=e.length,h+=l,p+=l,l=u(l),l+=f=u(f),l+=h=u(h),f+=l+=p=u(p),h+=l,p+=l,("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(p>>>0).toString(16)).slice(-8)},a.x64.hash128=function(e,t){if(a.inputValidation&&!i(e))return n;t=t||0;for(var r=e.length%16,o=e.length-r,s=[0,t],u=[0,t],v=[0,0],y=[0,0],b=[2277735313,289559509],g=[1291169091,658871167],m=0;m<o;m+=16)v=[e[m+4]|e[m+5]<<8|e[m+6]<<16|e[m+7]<<24,e[m]|e[m+1]<<8|e[m+2]<<16|e[m+3]<<24],y=[e[m+12]|e[m+13]<<8|e[m+14]<<16|e[m+15]<<24,e[m+8]|e[m+9]<<8|e[m+10]<<16|e[m+11]<<24],v=f(v=l(v,b),31),s=c(s=f(s=p(s,v=l(v,g)),27),u),s=c(l(s,[0,5]),[0,1390208809]),y=f(y=l(y,g),33),u=c(u=f(u=p(u,y=l(y,b)),31),s),u=c(l(u,[0,5]),[0,944331445]);switch(v=[0,0],y=[0,0],r){case 15:y=p(y,h([0,e[m+14]],48));case 14:y=p(y,h([0,e[m+13]],40));case 13:y=p(y,h([0,e[m+12]],32));case 12:y=p(y,h([0,e[m+11]],24));case 11:y=p(y,h([0,e[m+10]],16));case 10:y=p(y,h([0,e[m+9]],8));case 9:y=l(y=p(y,[0,e[m+8]]),g),u=p(u,y=l(y=f(y,33),b));case 8:v=p(v,h([0,e[m+7]],56));case 7:v=p(v,h([0,e[m+6]],48));case 6:v=p(v,h([0,e[m+5]],40));case 5:v=p(v,h([0,e[m+4]],32));case 4:v=p(v,h([0,e[m+3]],24));case 3:v=p(v,h([0,e[m+2]],16));case 2:v=p(v,h([0,e[m+1]],8));case 1:v=l(v=p(v,[0,e[m]]),b),s=p(s,v=l(v=f(v,31),g))}return s=c(s=p(s,[0,e.length]),u=p(u,[0,e.length])),u=c(u,s),s=c(s=d(s),u=d(u)),u=c(u,s),("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)+("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=a),t.murmurHash3=a}()},5560:function(e,t){(function(){var e,r,n,a,i,o,s,u;u=function(e){return[(e&255<<24)>>>24,(e&255<<16)>>>16,(65280&e)>>>8,255&e].join(".")},s=function(e){var t,n,a,i,o,s;for(t=[],a=i=0;i<=3&&0!==e.length;a=++i){if(a>0){if("."!==e[0])throw new Error("Invalid IP");e=e.substring(1)}o=(s=r(e))[0],n=s[1],e=e.substring(n),t.push(o)}if(0!==e.length)throw new Error("Invalid IP");switch(t.length){case 1:if(t[0]>4294967295)throw new Error("Invalid IP");return t[0]>>>0;case 2:if(t[0]>255||t[1]>16777215)throw new Error("Invalid IP");return(t[0]<<24|t[1])>>>0;case 3:if(t[0]>255||t[1]>255||t[2]>65535)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2])>>>0;case 4:if(t[0]>255||t[1]>255||t[2]>255||t[3]>255)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2]<<8|t[3])>>>0;default:throw new Error("Invalid IP")}},a=(n=function(e){return e.charCodeAt(0)})("0"),o=n("a"),i=n("A"),r=function(e){var t,r,s,u,c;for(u=0,t=10,r="9",s=0,e.length>1&&"0"===e[s]&&("x"===e[s+1]||"X"===e[s+1]?(s+=2,t=16):"0"<=e[s+1]&&e[s+1]<="9"&&(s++,t=8,r="7")),c=s;s<e.length;){if("0"<=e[s]&&e[s]<=r)u=u*t+(n(e[s])-a)>>>0;else{if(16!==t)break;if("a"<=e[s]&&e[s]<="f")u=u*t+(10+n(e[s])-o)>>>0;else{if(!("A"<=e[s]&&e[s]<="F"))break;u=u*t+(10+n(e[s])-i)>>>0}}if(u>4294967295)throw new Error("too large");s++}if(s===c)throw new Error("empty octet");return[u,s]},e=function(){function e(e,t){var r,n,a;if("string"!==typeof e)throw new Error("Missing `net' parameter");if(t||(a=e.split("/",2),e=a[0],t=a[1]),t||(t=32),"string"===typeof t&&t.indexOf(".")>-1){try{this.maskLong=s(t)}catch(i){throw i,new Error("Invalid mask: "+t)}for(r=n=32;n>=0;r=--n)if(this.maskLong===4294967295<<32-r>>>0){this.bitmask=r;break}}else{if(!t&&0!==t)throw new Error("Invalid mask: empty");this.bitmask=parseInt(t,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(s(e)&this.maskLong)>>>0}catch(i){throw i,new Error("Invalid net address: "+e)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+t);this.size=Math.pow(2,32-this.bitmask),this.base=u(this.netLong),this.mask=u(this.maskLong),this.hostmask=u(~this.maskLong),this.first=this.bitmask<=30?u(this.netLong+1):this.base,this.last=this.bitmask<=30?u(this.netLong+this.size-2):u(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?u(this.netLong+this.size-1):void 0}return e.prototype.contains=function(t){return"string"===typeof t&&(t.indexOf("/")>0||4!==t.split(".").length)&&(t=new e(t)),t instanceof e?this.contains(t.base)&&this.contains(t.broadcast||t.last):(s(t)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},e.prototype.next=function(t){return null==t&&(t=1),new e(u(this.netLong+this.size*t),this.mask)},e.prototype.forEach=function(e){var t,r,n;for(n=s(this.first),r=s(this.last),t=0;n<=r;)e(u(n),n,t),t++,n++},e.prototype.toString=function(){return this.base+"/"+this.bitmask},e}(),t.ip2long=s,t.long2ip=u,t.Netmask=e}).call(this)},4732:function(e,t,r){"use strict";var n=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},3835:function(e,t,r){var n=r(1223);function a(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.aes.Algorithm(e,t)}))}r(1657),r(5621),r(9960),e.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(e,t,r,n){var a=d({key:e,output:r,decrypt:!1,mode:n});return a.start(t),a},n.aes.createEncryptionCipher=function(e,t){return d({key:e,output:null,decrypt:!1,mode:t})},n.aes.startDecrypting=function(e,t,r,n){var a=d({key:e,output:r,decrypt:!0,mode:n});return a.start(t),a},n.aes.createDecryptionCipher=function(e,t){return d({key:e,output:null,decrypt:!0,mode:t})},n.aes.Algorithm=function(e,t){l||f();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return p(r._w,e,t,!1)},decrypt:function(e,t){return p(r._w,e,t,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!==typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=n.util.createBuffer();for(var a=0;a<t.length;++a)r.putByte(t[a])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){t=r,r=[];var i=t.length();if(16===i||24===i||32===i){i>>>=2;for(a=0;a<i;++a)r.push(t.getInt32())}}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var o=this.mode.name,s=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=h(r,e.decrypt&&!s),this._init=!0}},n.aes._expandKey=function(e,t){return l||f(),h(e,t)},n.aes._updateBlock=p,a("AES-ECB",n.cipher.modes.ecb),a("AES-CBC",n.cipher.modes.cbc),a("AES-CFB",n.cipher.modes.cfb),a("AES-OFB",n.cipher.modes.ofb),a("AES-CTR",n.cipher.modes.ctr),a("AES-GCM",n.cipher.modes.gcm);var i,o,s,u,c,l=!1;function f(){l=!0,s=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;i=new Array(256),o=new Array(256),u=new Array(4),c=new Array(4);for(t=0;t<4;++t)u[t]=new Array(256),c[t]=new Array(256);var r,n,a,f,h,p,d,v=0,y=0;for(t=0;t<256;++t){f=(f=y^y<<1^y<<2^y<<3^y<<4)>>8^255&f^99,i[v]=f,o[f]=v,p=(h=e[f])<<24^f<<16^f<<8^f^h,d=((r=e[v])^(n=e[r])^(a=e[n]))<<24^(v^a)<<16^(v^n^a)<<8^v^r^a;for(var b=0;b<4;++b)u[b][v]=p,c[b][f]=d,p=p<<24|p>>>8,d=d<<24|d>>>8;0===v?v=y=1:(v=r^e[e[e[r^a]]],y^=e[e[y]])}}function h(e,t){for(var r,n=e.slice(0),a=1,o=n.length,u=4*(o+6+1),l=o;l<u;++l)r=n[l-1],l%o===0?(r=i[r>>>16&255]<<24^i[r>>>8&255]<<16^i[255&r]<<8^i[r>>>24]^s[a]<<24,a++):o>6&&l%o===4&&(r=i[r>>>24]<<24^i[r>>>16&255]<<16^i[r>>>8&255]<<8^i[255&r]),n[l]=n[l-o]^r;if(t){for(var f,h=c[0],p=c[1],d=c[2],v=c[3],y=n.slice(0),b=(l=0,(u=n.length)-4);l<u;l+=4,b-=4)if(0===l||l===u-4)y[l]=n[b],y[l+1]=n[b+3],y[l+2]=n[b+2],y[l+3]=n[b+1];else for(var g=0;g<4;++g)f=n[b+g],y[l+(3&-g)]=h[i[f>>>24]]^p[i[f>>>16&255]]^d[i[f>>>8&255]]^v[i[255&f]];n=y}return n}function p(e,t,r,n){var a,s,l,f,h,p,d,v,y,b,g,m,w=e.length/4-1;n?(a=c[0],s=c[1],l=c[2],f=c[3],h=o):(a=u[0],s=u[1],l=u[2],f=u[3],h=i),p=t[0]^e[0],d=t[n?3:1]^e[1],v=t[2]^e[2],y=t[n?1:3]^e[3];for(var k=3,x=1;x<w;++x)b=a[p>>>24]^s[d>>>16&255]^l[v>>>8&255]^f[255&y]^e[++k],g=a[d>>>24]^s[v>>>16&255]^l[y>>>8&255]^f[255&p]^e[++k],m=a[v>>>24]^s[y>>>16&255]^l[p>>>8&255]^f[255&d]^e[++k],y=a[y>>>24]^s[p>>>16&255]^l[d>>>8&255]^f[255&v]^e[++k],p=b,d=g,v=m;r[0]=h[p>>>24]<<24^h[d>>>16&255]<<16^h[v>>>8&255]<<8^h[255&y]^e[++k],r[n?3:1]=h[d>>>24]<<24^h[v>>>16&255]<<16^h[y>>>8&255]<<8^h[255&p]^e[++k],r[2]=h[v>>>24]<<24^h[y>>>16&255]<<16^h[p>>>8&255]<<8^h[255&d]^e[++k],r[n?1:3]=h[y>>>24]<<24^h[p>>>16&255]<<16^h[d>>>8&255]<<8^h[255&v]^e[++k]}function d(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),a=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,a.call(t,r)},t}},9978:function(e,t,r){var n=r(1223);r(9960),r(1746);var a=e.exports=n.asn1=n.asn1||{};function i(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}a.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},a.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},a.create=function(e,t,r,i,o){if(n.util.isArray(i)){for(var s=[],u=0;u<i.length;++u)void 0!==i[u]&&s.push(i[u]);i=s}var c={tagClass:e,type:t,constructed:r,composed:r||n.util.isArray(i),value:i};return o&&"bitStringContents"in o&&(c.bitStringContents=o.bitStringContents,c.original=a.copy(c)),c},a.copy=function(e,t){var r;if(n.util.isArray(e)){r=[];for(var i=0;i<e.length;++i)r.push(a.copy(e[i],t));return r}return"string"===typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:a.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},a.equals=function(e,t,r){if(n.util.isArray(e)){if(!n.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(!a.equals(e[i],t[i]))return!1;return!0}if(typeof e!==typeof t)return!1;if("string"===typeof e)return e===t;var o=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&a.equals(e.value,t.value);return r&&r.includeBitStringContents&&(o=o&&e.bitStringContents===t.bitStringContents),o},a.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};function o(e,t,r,n){var s;i(e,t,2);var u=e.getByte();t--;var c=192&u,l=31&u;s=e.length();var f,h,p=function(e,t){var r=e.getByte();if(t--,128!==r){var n;if(128&r){var a=127&r;i(e,t,a),n=e.getInt(a<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(e,t);if(t-=s-e.length(),void 0!==p&&p>t){if(n.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=e.length(),d.remaining=t,d.requested=p,d}p=t}var v=32===(32&u);if(v)if(f=[],void 0===p)for(;;){if(i(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}s=e.length(),f.push(o(e,t,r+1,n)),t-=s-e.length()}else for(;p>0;)s=e.length(),f.push(o(e,p,r+1,n)),t-=s-e.length(),p-=s-e.length();if(void 0===f&&c===a.Class.UNIVERSAL&&l===a.Type.BITSTRING&&(h=e.bytes(p)),void 0===f&&n.decodeBitStrings&&c===a.Class.UNIVERSAL&&l===a.Type.BITSTRING&&p>1){var y=e.read,b=t,g=0;if(l===a.Type.BITSTRING&&(i(e,t,1),g=e.getByte(),t--),0===g)try{s=e.length();var m=o(e,t,r+1,{strict:!0,decodeBitStrings:!0}),w=s-e.length();t-=w,l==a.Type.BITSTRING&&w++;var k=m.tagClass;w!==p||k!==a.Class.UNIVERSAL&&k!==a.Class.CONTEXT_SPECIFIC||(f=[m])}catch(_){}void 0===f&&(e.read=y,t=b)}if(void 0===f){if(void 0===p){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");p=t}if(l===a.Type.BMPSTRING)for(f="";p>0;p-=2)i(e,t,2),f+=String.fromCharCode(e.getInt16()),t-=2;else f=e.getBytes(p),t-=p}var x=void 0===h?null:{bitStringContents:h};return a.create(c,l,v,f,x)}a.fromDer=function(e,t){void 0===t&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"===typeof t&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"===typeof e&&(e=n.util.createBuffer(e));var r=e.length(),a=o(e,e.length(),0,t);if(t.parseAllBytes&&0!==e.length()){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return a},a.toDer=function(e){var t=n.util.createBuffer(),r=e.tagClass|e.type,i=n.util.createBuffer(),o=!1;if("bitStringContents"in e&&(o=!0,e.original&&(o=a.equals(e,e.original))),o)i.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:i.putByte(0);for(var s=0;s<e.value.length;++s)void 0!==e.value[s]&&i.putBuffer(a.toDer(e.value[s]))}else if(e.type===a.Type.BMPSTRING)for(s=0;s<e.value.length;++s)i.putInt16(e.value.charCodeAt(s));else e.type===a.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0===(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128===(128&e.value.charCodeAt(1)))?i.putBytes(e.value.substr(1)):i.putBytes(e.value);if(t.putByte(r),i.length()<=127)t.putByte(127&i.length());else{var u=i.length(),c="";do{c+=String.fromCharCode(255&u),u>>>=8}while(u>0);t.putByte(128|c.length);for(s=c.length-1;s>=0;--s)t.putByte(c.charCodeAt(s))}return t.putBuffer(i),t},a.oidToDer=function(e){var t,r,a,i,o=e.split("."),s=n.util.createBuffer();s.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var u=2;u<o.length;++u){t=!0,r=[],a=parseInt(o[u],10);do{i=127&a,a>>>=7,t||(i|=128),r.push(i),t=!1}while(a>0);for(var c=r.length-1;c>=0;--c)s.putByte(r[c])}return s},a.derToOid=function(e){var t;"string"===typeof e&&(e=n.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var a=0;e.length()>0;)a<<=7,128&(r=e.getByte())?a+=127&r:(t+="."+(a+r),a=0);return t},a.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,a=parseInt(e.substr(4,2),10),i=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),s=0;if(e.length>11){var u=e.charAt(10),c=10;"+"!==u&&"-"!==u&&(s=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,a),t.setUTCHours(i,o,s,0),c&&("+"===(u=e.charAt(c))||"-"===u)){var l=60*parseInt(e.substr(c+1,2),10)+parseInt(e.substr(c+4,2),10);l*=6e4,"+"===u?t.setTime(+t-l):t.setTime(+t+l)}return t},a.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,a=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),u=0,c=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var f=e.length-5,h=e.charAt(f);"+"!==h&&"-"!==h||(c=60*parseInt(e.substr(f+1,2),10)+parseInt(e.substr(f+4,2),10),c*=6e4,"+"===h&&(c*=-1),l=!0);return"."===e.charAt(14)&&(u=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(r,n,a),t.setUTCHours(i,o,s,u),t.setTime(+t+c)):(t.setFullYear(r,n,a),t.setHours(i,o,s,u)),t},a.dateToUtcTime=function(e){if("string"===typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},a.dateToGeneralizedTime=function(e){if("string"===typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},a.integerToDer=function(e){var t=n.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},a.derToInteger=function(e){"string"===typeof e&&(e=n.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},a.validate=function(e,t,r,i){var o=!1;if(e.tagClass!==t.tagClass&&"undefined"!==typeof t.tagClass||e.type!==t.type&&"undefined"!==typeof t.type)i&&(e.tagClass!==t.tagClass&&i.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&i.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||"undefined"===typeof t.constructed){if(o=!0,t.value&&n.util.isArray(t.value))for(var s=0,u=0;o&&u<t.value.length;++u)o=t.value[u].optional||!1,e.value[s]&&((o=a.validate(e.value[s],t.value[u],r,i))?++s:t.value[u].optional&&(o=!0)),!o&&i&&i.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(o&&r)if(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else i&&i.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return o};var s=/[^\\u0000-\\u00ff]/;a.prettyPrint=function(e,t,r){var i="";r=r||2,(t=t||0)>0&&(i+="\n");for(var o="",u=0;u<t*r;++u)o+=" ";switch(i+=o+"Tag: ",e.tagClass){case a.Class.UNIVERSAL:i+="Universal:";break;case a.Class.APPLICATION:i+="Application:";break;case a.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case a.Class.PRIVATE:i+="Private:"}if(e.tagClass===a.Class.UNIVERSAL)switch(i+=e.type,e.type){case a.Type.NONE:i+=" (None)";break;case a.Type.BOOLEAN:i+=" (Boolean)";break;case a.Type.INTEGER:i+=" (Integer)";break;case a.Type.BITSTRING:i+=" (Bit string)";break;case a.Type.OCTETSTRING:i+=" (Octet string)";break;case a.Type.NULL:i+=" (Null)";break;case a.Type.OID:i+=" (Object Identifier)";break;case a.Type.ODESC:i+=" (Object Descriptor)";break;case a.Type.EXTERNAL:i+=" (External or Instance of)";break;case a.Type.REAL:i+=" (Real)";break;case a.Type.ENUMERATED:i+=" (Enumerated)";break;case a.Type.EMBEDDED:i+=" (Embedded PDV)";break;case a.Type.UTF8:i+=" (UTF8)";break;case a.Type.ROID:i+=" (Relative Object Identifier)";break;case a.Type.SEQUENCE:i+=" (Sequence)";break;case a.Type.SET:i+=" (Set)";break;case a.Type.PRINTABLESTRING:i+=" (Printable String)";break;case a.Type.IA5String:i+=" (IA5String (ASCII))";break;case a.Type.UTCTIME:i+=" (UTC time)";break;case a.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case a.Type.BMPSTRING:i+=" (BMP String)"}else i+=e.type;if(i+="\n",i+=o+"Constructed: "+e.constructed+"\n",e.composed){var c=0,l="";for(u=0;u<e.value.length;++u)void 0!==e.value[u]&&(c+=1,l+=a.prettyPrint(e.value[u],t+1,r),u+1<e.value.length&&(l+=","));i+=o+"Sub values: "+c+l}else{if(i+=o+"Value: ",e.type===a.Type.OID){var f=a.derToOid(e.value);i+=f,n.pki&&n.pki.oids&&f in n.pki.oids&&(i+=" ("+n.pki.oids[f]+") ")}if(e.type===a.Type.INTEGER)try{i+=a.derToInteger(e.value)}catch(p){i+="0x"+n.util.bytesToHex(e.value)}else if(e.type===a.Type.BITSTRING){if(e.value.length>1?i+="0x"+n.util.bytesToHex(e.value.slice(1)):i+="(none)",e.value.length>0){var h=e.value.charCodeAt(0);1==h?i+=" (1 unused bit shown)":h>1&&(i+=" ("+h+" unused bits shown)")}}else if(e.type===a.Type.OCTETSTRING)s.test(e.value)||(i+="("+e.value+") "),i+="0x"+n.util.bytesToHex(e.value);else if(e.type===a.Type.UTF8)try{i+=n.util.decodeUtf8(e.value)}catch(d){if("URI malformed"!==d.message)throw d;i+="0x"+n.util.bytesToHex(e.value)+" (malformed UTF8)"}else e.type===a.Type.PRINTABLESTRING||e.type===a.Type.IA5String?i+=e.value:s.test(e.value)?i+="0x"+n.util.bytesToHex(e.value):0===e.value.length?i+="[null]":i+=e.value}return i}},285:function(e){var t={};e.exports=t;var r={};t.encode=function(e,t,r){if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!==typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var a=0,i=t.length,o=t.charAt(0),s=[0];for(a=0;a<e.length;++a){for(var u=0,c=e[a];u<s.length;++u)c+=s[u]<<8,s[u]=c%i,c=c/i|0;for(;c>0;)s.push(c%i),c=c/i|0}for(a=0;0===e[a]&&a<e.length-1;++a)n+=o;for(a=s.length-1;a>=0;--a)n+=t[s[a]]}else n=function(e,t){var r=0,n=t.length,a=t.charAt(0),i=[0];for(r=0;r<e.length();++r){for(var o=0,s=e.at(r);o<i.length;++o)s+=i[o]<<8,i[o]=s%n,s=s/n|0;for(;s>0;)i.push(s%n),s=s/n|0}var u="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)u+=a;for(r=i.length-1;r>=0;--r)u+=t[i[r]];return u}(e,t);if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n},t.decode=function(e,t){if("string"!==typeof e)throw new TypeError('"input" must be a string.');if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');var n=r[t];if(!n){n=r[t]=[];for(var a=0;a<t.length;++a)n[t.charCodeAt(a)]=a}e=e.replace(/\s/g,"");var i=t.length,o=t.charAt(0),s=[0];for(a=0;a<e.length;a++){var u=n[e.charCodeAt(a)];if(void 0===u)return;for(var c=0,l=u;c<s.length;++c)l+=s[c]*i,s[c]=255&l,l>>=8;for(;l>0;)s.push(255&l),l>>=8}for(var f=0;e[f]===o&&f<e.length-1;++f)s.push(0);return"undefined"!==typeof Buffer?Buffer.from(s.reverse()):new Uint8Array(s.reverse())}},1657:function(e,t,r){var n=r(1223);r(9960),e.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(e,t){var r=e;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},n.cipher.createDecipher=function(e,t){var r=e;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},n.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),n.cipher.algorithms[e]=t},n.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[e]:null};var a=n.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};a.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=e.output||n.util.createBuffer(),this.mode.start(t)},a.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},a.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},5621:function(e,t,r){var n=r(1223);r(9960),n.cipher=n.cipher||{};var a=e.exports=n.cipher.modes=n.cipher.modes||{};function i(e,t){if("string"===typeof e&&(e=n.util.createBuffer(e)),n.util.isArray(e)&&e.length>4){var r=e;e=n.util.createBuffer();for(var a=0;a<r.length;++a)e.putByte(r[a])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!n.util.isArray(e)){var i=[],o=t/4;for(a=0;a<o;++a)i.push(e.getInt32());e=i}return e}function o(e){e[e.length-1]=e[e.length-1]+1&4294967295}function s(e){return[e/4294967296|0,4294967295&e]}a.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},a.ecb.prototype.start=function(e){},a.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},a.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},a.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},a.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},a.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},a.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},a.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},a.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},a.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},a.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},a.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},a.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},a.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32()^this._outBlock[a],t.putInt32(this._inBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32()^this._outBlock[a],this._partialOutput.putInt32(this._partialBlock[a]);if(i>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},a.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32(),t.putInt32(this._inBlock[a]^this._outBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[a]^this._outBlock[a]);if(i>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},a.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},a.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},a.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]),this._inBlock[a]=this._outBlock[a];else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._outBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},a.ofb.prototype.decrypt=a.ofb.prototype.encrypt,a.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},a.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},a.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},a.ctr.prototype.decrypt=a.ctr.prototype.encrypt,a.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},a.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=n.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?n.util.createBuffer(e.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=n.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=r.length();if(12===a)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(s(8*a)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,t=n.util.createBuffer(t),this._aDataLength=s(8*t.length());var i=t.length()%this.blockSize;for(i&&t.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},a.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^=e.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(a=0;a<this._ints;++a)this._outBlock[a]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},a.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^this._hashBlock[a]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},a.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=n.util.createBuffer();var a=this._aDataLength.concat(s(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,a);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},a.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),a=0;a<128;++a){e[a/32|0]&1<<31-a%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},a.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},a.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,a=this._m[r][n];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t},a.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},a.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,a=16*r,i=new Array(a),o=0;o<a;++o){var s=[0,0,0,0],u=(n-1-o%n)*t;s[o/n|0]=1<<t-1<<u,i[o]=this.generateSubHashTable(this.multiply(s,e),t)}return i},a.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,a=new Array(r);a[n]=e.slice(0);for(var i=n>>>1;i>0;)this.pow(a[2*i],a[i]=[]),i>>=1;for(i=2;i<n;){for(var o=1;o<i;++o){var s=a[i],u=a[o];a[i+o]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}i*=2}for(a[0]=[0,0,0,0],i=n+1;i<r;++i){var c=a[i^n];a[i]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return a}},4638:function(e,t,r){var n=r(1223);function a(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.des.Algorithm(e,t)}))}r(1657),r(5621),r(9960),e.exports=n.des=n.des||{},n.des.startEncrypting=function(e,t,r,n){var a=d({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return a.start(t),a},n.des.createEncryptionCipher=function(e,t){return d({key:e,output:null,decrypt:!1,mode:t})},n.des.startDecrypting=function(e,t,r,n){var a=d({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return a.start(t),a},n.des.createDecryptionCipher=function(e,t){return d({key:e,output:null,decrypt:!0,mode:t})},n.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return p(r._keys,e,t,!1)},decrypt:function(e,t){return p(r._keys,e,t,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=n.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],a=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],v=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=e.length()>8?3:1,b=[],g=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],m=0,w=0;w<y;w++){var k=e.getInt32(),x=e.getInt32();k^=(t=252645135&(k>>>4^x))<<4,k^=t=65535&((x^=t)>>>-16^k),k^=(t=858993459&(k>>>2^(x^=t<<-16)))<<2,k^=t=65535&((x^=t)>>>-16^k),k^=(t=1431655765&(k>>>1^(x^=t<<-16)))<<1,k^=t=16711935&((x^=t)>>>8^k),t=(k^=(t=1431655765&(k>>>1^(x^=t<<8)))<<1)<<8|(x^=t)>>>20&240,k=x<<24|x<<8&16711680|x>>>8&65280|x>>>24&240,x=t;for(var _=0;_<g.length;++_){g[_]?(k=k<<2|k>>>26,x=x<<2|x>>>26):(k=k<<1|k>>>27,x=x<<1|x>>>27),x&=-15;var E=r[(k&=-15)>>>28]|n[k>>>24&15]|a[k>>>20&15]|i[k>>>16&15]|o[k>>>12&15]|s[k>>>8&15]|u[k>>>4&15],S=c[x>>>28]|l[x>>>24&15]|f[x>>>20&15]|h[x>>>16&15]|p[x>>>12&15]|d[x>>>8&15]|v[x>>>4&15];t=65535&(S>>>16^E),b[m++]=E^t,b[m++]=S^t<<16}}return b}(t),this._init=!0}},a("DES-ECB",n.cipher.modes.ecb),a("DES-CBC",n.cipher.modes.cbc),a("DES-CFB",n.cipher.modes.cfb),a("DES-OFB",n.cipher.modes.ofb),a("DES-CTR",n.cipher.modes.ctr),a("3DES-ECB",n.cipher.modes.ecb),a("3DES-CBC",n.cipher.modes.cbc),a("3DES-CFB",n.cipher.modes.cfb),a("3DES-OFB",n.cipher.modes.ofb),a("3DES-CTR",n.cipher.modes.ctr);var i=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],s=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],c=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],f=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],h=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function p(e,t,r,n){var a,p,d=32===e.length?3:9;a=3===d?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var v=t[0],y=t[1];v^=(p=252645135&(v>>>4^y))<<4,v^=(p=65535&(v>>>16^(y^=p)))<<16,v^=p=858993459&((y^=p)>>>2^v),v^=p=16711935&((y^=p<<2)>>>8^v),v=(v^=(p=1431655765&(v>>>1^(y^=p<<8)))<<1)<<1|v>>>31,y=(y^=p)<<1|y>>>31;for(var b=0;b<d;b+=3){for(var g=a[b+1],m=a[b+2],w=a[b];w!=g;w+=m){var k=y^e[w],x=(y>>>4|y<<28)^e[w+1];p=v,v=y,y=p^(o[k>>>24&63]|u[k>>>16&63]|l[k>>>8&63]|h[63&k]|i[x>>>24&63]|s[x>>>16&63]|c[x>>>8&63]|f[63&x])}p=v,v=y,y=p}y=y>>>1|y<<31,y^=p=1431655765&((v=v>>>1|v<<31)>>>1^y),y^=(p=16711935&(y>>>8^(v^=p<<1)))<<8,y^=(p=858993459&(y>>>2^(v^=p)))<<2,y^=p=65535&((v^=p)>>>16^y),y^=p=252645135&((v^=p<<16)>>>4^y),v^=p<<4,r[0]=v,r[1]=y}function d(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),a=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,a.call(t,r)},t}},1223:function(e){e.exports={options:{usePureJavaScript:!1}}},7134:function(e,t,r){var n=r(1223);r(6829),r(9960),(e.exports=n.hmac=n.hmac||{}).create=function(){var e=null,t=null,r=null,a=null,i={start:function(i,o){if(null!==i)if("string"===typeof i){if(!((i=i.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+i+'"');t=n.md.algorithms[i].create()}else t=i;if(null===o)o=e;else{if("string"===typeof o)o=n.util.createBuffer(o);else if(n.util.isArray(o)){var s=o;o=n.util.createBuffer();for(var u=0;u<s.length;++u)o.putByte(s[u])}var c=o.length();c>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=n.util.createBuffer(),a=n.util.createBuffer(),c=o.length();for(u=0;u<c;++u){s=o.at(u);r.putByte(54^s),a.putByte(92^s)}if(c<t.blockLength)for(s=t.blockLength-c,u=0;u<s;++u)r.putByte(54),a.putByte(92);e=o,r=r.bytes(),a=a.bytes()}t.start(),t.update(r)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(a),t.update(e),t.digest()}};return i.digest=i.getMac,i}},693:function(e,t,r){var n,a=r(1223);e.exports=a.jsbn=a.jsbn||{};function i(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function o(){return new i(null)}function s(e,t,r,n,a,i){for(var o=16383&t,s=t>>14;--i>=0;){var u=16383&this.data[e],c=this.data[e++]>>14,l=s*u+c*o;a=((u=o*u+((16383&l)<<14)+r.data[n]+a)>>28)+(l>>14)+s*c,r.data[n++]=268435455&u}return a}a.jsbn.BigInteger=i,"undefined"===typeof navigator?(i.prototype.am=s,n=28):"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=function(e,t,r,n,a,i){for(var o=32767&t,s=t>>15;--i>=0;){var u=32767&this.data[e],c=this.data[e++]>>15,l=s*u+c*o;a=((u=o*u+((32767&l)<<15)+r.data[n]+(1073741823&a))>>>30)+(l>>>15)+s*c+(a>>>30),r.data[n++]=1073741823&u}return a},n=30):"Netscape"!=navigator.appName?(i.prototype.am=function(e,t,r,n,a,i){for(;--i>=0;){var o=t*this.data[e++]+r.data[n]+a;a=Math.floor(o/67108864),r.data[n++]=67108863&o}return a},n=26):(i.prototype.am=s,n=28),i.prototype.DB=n,i.prototype.DM=(1<<n)-1,i.prototype.DV=1<<n;i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-n,i.prototype.F2=2*n-52;var u,c,l=new Array;for(u="0".charCodeAt(0),c=0;c<=9;++c)l[u++]=c;for(u="a".charCodeAt(0),c=10;c<36;++c)l[u++]=c;for(u="A".charCodeAt(0),c=10;c<36;++c)l[u++]=c;function f(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function h(e,t){var r=l[e.charCodeAt(t)];return null==r?-1:r}function p(e){var t=o();return t.fromInt(e),t}function d(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function v(e){this.m=e}function y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function b(e,t){return e&t}function g(e,t){return e|t}function m(e,t){return e^t}function w(e,t){return e&~t}function k(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function x(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function _(){}function E(e){return e}function S(e){this.r2=o(),this.q3=o(),i.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}v.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},v.prototype.revert=function(e){return e},v.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},v.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},v.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},y.prototype.convert=function(e){var t=o();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(i.ZERO)>0&&this.m.subTo(t,t),t},y.prototype.revert=function(e){var t=o();return e.copyTo(t),this.reduce(t),t},y.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},y.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},i.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},i.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},i.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,a=!1,o=0;--n>=0;){var s=8==r?255&e[n]:h(e,n);s<0?"-"==e.charAt(n)&&(a=!0):(a=!1,0==o?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&i.ZERO.subTo(this,this)},i.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},i.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},i.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},i.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,a=this.DB-n,i=(1<<a)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+o+1]=this.data[r]>>a|s,s=(this.data[r]&i)<<n;for(r=o-1;r>=0;--r)t.data[r]=0;t.data[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},i.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,a=this.DB-n,i=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&i)<<a,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&i)<<a),t.t=this.t-r,t.clamp()}},i.prototype.subTo=function(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},i.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),a=r.t;for(t.t=a+n.t;--a>=0;)t.data[a]=0;for(a=0;a<n.t;++a)t.data[a+r.t]=r.am(0,n.data[a],t,a,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&i.ZERO.subTo(t,t)},i.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},i.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var a=this.abs();if(a.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=o());var s=o(),u=this.s,c=e.s,l=this.DB-d(n.data[n.t-1]);l>0?(n.lShiftTo(l,s),a.lShiftTo(l,r)):(n.copyTo(s),a.copyTo(r));var f=s.t,h=s.data[f-1];if(0!=h){var p=h*(1<<this.F1)+(f>1?s.data[f-2]>>this.F2:0),v=this.FV/p,y=(1<<this.F1)/p,b=1<<this.F2,g=r.t,m=g-f,w=null==t?o():t;for(s.dlShiftTo(m,w),r.compareTo(w)>=0&&(r.data[r.t++]=1,r.subTo(w,r)),i.ONE.dlShiftTo(f,w),w.subTo(s,s);s.t<f;)s.data[s.t++]=0;for(;--m>=0;){var k=r.data[--g]==h?this.DM:Math.floor(r.data[g]*v+(r.data[g-1]+b)*y);if((r.data[g]+=s.am(0,k,r,m,0,f))<k)for(s.dlShiftTo(m,w),r.subTo(w,r);r.data[g]<--k;)r.subTo(w,r)}null!=t&&(r.drShiftTo(f,t),u!=c&&i.ZERO.subTo(t,t)),r.t=f,r.clamp(),l>0&&r.rShiftTo(l,r),u<0&&i.ZERO.subTo(r,r)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},i.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},i.prototype.exp=function(e,t){if(e>4294967295||e<1)return i.ONE;var r=o(),n=o(),a=t.convert(this),s=d(e)-1;for(a.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,a,r);else{var u=r;r=n,n=u}return t.revert(r)},i.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,a=!1,i="",o=this.t,s=this.DB-o*this.DB%t;if(o-- >0)for(s<this.DB&&(r=this.data[o]>>s)>0&&(a=!0,i=f(r));o>=0;)s<t?(r=(this.data[o]&(1<<s)-1)<<t-s,r|=this.data[--o]>>(s+=this.DB-t)):(r=this.data[o]>>(s-=t)&n,s<=0&&(s+=this.DB,--o)),r>0&&(a=!0),a&&(i+=f(r));return a?i:"0"},i.prototype.negate=function(){var e=o();return i.ZERO.subTo(this,e),e},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+d(this.data[this.t-1]^this.s&this.DM)},i.prototype.mod=function(e){var t=o();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(i.ZERO)>0&&e.subTo(t,t),t},i.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new v(t):new y(t),this.exp(e,r)},i.ZERO=p(0),i.ONE=p(1),_.prototype.convert=E,_.prototype.revert=E,_.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},_.prototype.sqrTo=function(e,t){e.squareTo(t)},S.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=o();return e.copyTo(t),this.reduce(t),t},S.prototype.revert=function(e){return e},S.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},S.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},S.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var A=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],C=(1<<26)/A[A.length-1];i.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},i.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=p(r),a=o(),i=o(),s="";for(this.divRemTo(n,a,i);a.signum()>0;)s=(r+i.intValue()).toString(e).substr(1)+s,a.divRemTo(n,a,i);return i.intValue().toString(e)+s},i.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),a=!1,o=0,s=0,u=0;u<e.length;++u){var c=h(e,u);c<0?"-"==e.charAt(u)&&0==this.signum()&&(a=!0):(s=t*s+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),a&&i.ZERO.subTo(this,this)},i.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(i.ONE.shiftLeft(e-1),g,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(i.ONE.shiftLeft(e-1),this);else{var n=new Array,a=7&e;n.length=1+(e>>3),t.nextBytes(n),a>0?n[0]&=(1<<a)-1:n[0]=0,this.fromString(n,256)}},i.prototype.bitwiseTo=function(e,t,r){var n,a,i=Math.min(e.t,this.t);for(n=0;n<i;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(a=e.s&this.DM,n=i;n<this.t;++n)r.data[n]=t(this.data[n],a);r.t=this.t}else{for(a=this.s&this.DM,n=i;n<e.t;++n)r.data[n]=t(a,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},i.prototype.changeBit=function(e,t){var r=i.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},i.prototype.addTo=function(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},i.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},i.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},i.prototype.multiplyLowerTo=function(e,t,r){var n,a=Math.min(this.t+e.t,t);for(r.s=0,r.t=a;a>0;)r.data[--a]=0;for(n=r.t-this.t;a<n;++a)r.data[a+this.t]=this.am(0,e.data[a],r,a,0,this.t);for(n=Math.min(e.t,t);a<n;++a)this.am(0,e.data[a],r,a,0,t-a);r.clamp()},i.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},i.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},i.prototype.millerRabin=function(e){var t=this.subtract(i.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,a=t.shiftRight(r),o={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},s=0;s<e;++s){do{n=new i(this.bitLength(),o)}while(n.compareTo(i.ONE)<=0||n.compareTo(t)>=0);var u=n.modPow(a,this);if(0!=u.compareTo(i.ONE)&&0!=u.compareTo(t)){for(var c=1;c++<r&&0!=u.compareTo(t);)if(0==(u=u.modPowInt(2,this)).compareTo(i.ONE))return!1;if(0!=u.compareTo(t))return!1}}return!0},i.prototype.clone=function(){var e=o();return this.copyTo(e),e},i.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},i.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},i.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},i.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},i.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,a=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[a++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==a&&(128&this.s)!=(128&r)&&++a,(a>0||r!=this.s)&&(t[a++]=r);return t},i.prototype.equals=function(e){return 0==this.compareTo(e)},i.prototype.min=function(e){return this.compareTo(e)<0?this:e},i.prototype.max=function(e){return this.compareTo(e)>0?this:e},i.prototype.and=function(e){var t=o();return this.bitwiseTo(e,b,t),t},i.prototype.or=function(e){var t=o();return this.bitwiseTo(e,g,t),t},i.prototype.xor=function(e){var t=o();return this.bitwiseTo(e,m,t),t},i.prototype.andNot=function(e){var t=o();return this.bitwiseTo(e,w,t),t},i.prototype.not=function(){for(var e=o(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},i.prototype.shiftLeft=function(e){var t=o();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},i.prototype.shiftRight=function(e){var t=o();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},i.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+k(this.data[e]);return this.s<0?this.t*this.DB:-1},i.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=x(this.data[r]^t);return e},i.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},i.prototype.setBit=function(e){return this.changeBit(e,g)},i.prototype.clearBit=function(e){return this.changeBit(e,w)},i.prototype.flipBit=function(e){return this.changeBit(e,m)},i.prototype.add=function(e){var t=o();return this.addTo(e,t),t},i.prototype.subtract=function(e){var t=o();return this.subTo(e,t),t},i.prototype.multiply=function(e){var t=o();return this.multiplyTo(e,t),t},i.prototype.divide=function(e){var t=o();return this.divRemTo(e,t,null),t},i.prototype.remainder=function(e){var t=o();return this.divRemTo(e,null,t),t},i.prototype.divideAndRemainder=function(e){var t=o(),r=o();return this.divRemTo(e,t,r),new Array(t,r)},i.prototype.modPow=function(e,t){var r,n,a=e.bitLength(),i=p(1);if(a<=0)return i;r=a<18?1:a<48?3:a<144?4:a<768?5:6,n=a<8?new v(t):t.isEven()?new S(t):new y(t);var s=new Array,u=3,c=r-1,l=(1<<r)-1;if(s[1]=n.convert(this),r>1){var f=o();for(n.sqrTo(s[1],f);u<=l;)s[u]=o(),n.mulTo(f,s[u-2],s[u]),u+=2}var h,b,g=e.t-1,m=!0,w=o();for(a=d(e.data[g])-1;g>=0;){for(a>=c?h=e.data[g]>>a-c&l:(h=(e.data[g]&(1<<a+1)-1)<<c-a,g>0&&(h|=e.data[g-1]>>this.DB+a-c)),u=r;0==(1&h);)h>>=1,--u;if((a-=u)<0&&(a+=this.DB,--g),m)s[h].copyTo(i),m=!1;else{for(;u>1;)n.sqrTo(i,w),n.sqrTo(w,i),u-=2;u>0?n.sqrTo(i,w):(b=i,i=w,w=b),n.mulTo(w,s[h],i)}for(;g>=0&&0==(e.data[g]&1<<a);)n.sqrTo(i,w),b=i,i=w,w=b,--a<0&&(a=this.DB-1,--g)}return n.revert(i)},i.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return i.ZERO;for(var r=e.clone(),n=this.clone(),a=p(1),o=p(0),s=p(0),u=p(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(e,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);r.compareTo(n)>=0?(r.subTo(n,r),t&&a.subTo(s,a),o.subTo(u,o)):(n.subTo(r,n),t&&s.subTo(a,s),u.subTo(o,u))}return 0!=n.compareTo(i.ONE)?i.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u},i.prototype.pow=function(e){return this.exp(e,new _)},i.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var a=t.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return t;for(a<i&&(i=a),i>0&&(t.rShiftTo(i,t),r.rShiftTo(i,r));t.signum()>0;)(a=t.getLowestSetBit())>0&&t.rShiftTo(a,t),(a=r.getLowestSetBit())>0&&r.rShiftTo(a,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return i>0&&r.lShiftTo(i,r),r},i.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=A[A.length-1]){for(t=0;t<A.length;++t)if(r.data[0]==A[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<A.length;){for(var n=A[t],a=t+1;a<A.length&&n<C;)n*=A[a++];for(n=r.modInt(n);t<a;)if(n%A[t++]==0)return!1}return r.millerRabin(e)}},6829:function(e,t,r){var n=r(1223);e.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},2446:function(e,t,r){var n=r(1223);r(5135),e.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},5135:function(e,t,r){var n=r(1223);r(9960),n.mgf=n.mgf||{},(e.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(e){return{generate:function(t,r){for(var a=new n.util.ByteBuffer,i=Math.ceil(r/e.digestLength),o=0;o<i;o++){var s=new n.util.ByteBuffer;s.putInt32(o),e.start(),e.update(t+s.getBytes()),a.putBuffer(e.digest())}return a.truncate(a.length()-r),a.getBytes()}}}},1746:function(e,t,r){var n=r(1223);n.pki=n.pki||{};var a=e.exports=n.pki.oids=n.oids=n.oids||{};function i(e,t){a[e]=t,a[t]=e}function o(e,t){a[e]=t}i("1.2.840.113549.1.1.1","rsaEncryption"),i("1.2.840.113549.1.1.4","md5WithRSAEncryption"),i("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),i("1.2.840.113549.1.1.7","RSAES-OAEP"),i("1.2.840.113549.1.1.8","mgf1"),i("1.2.840.113549.1.1.9","pSpecified"),i("1.2.840.113549.1.1.10","RSASSA-PSS"),i("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),i("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),i("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),i("1.3.101.112","EdDSA25519"),i("1.2.840.10040.4.3","dsa-with-sha1"),i("1.3.14.3.2.7","desCBC"),i("1.3.14.3.2.26","sha1"),i("1.3.14.3.2.29","sha1WithRSASignature"),i("2.16.840.1.101.3.4.2.1","sha256"),i("2.16.840.1.101.3.4.2.2","sha384"),i("2.16.840.1.101.3.4.2.3","sha512"),i("2.16.840.1.101.3.4.2.4","sha224"),i("2.16.840.1.101.3.4.2.5","sha512-224"),i("2.16.840.1.101.3.4.2.6","sha512-256"),i("1.2.840.113549.2.2","md2"),i("1.2.840.113549.2.5","md5"),i("1.2.840.113549.1.7.1","data"),i("1.2.840.113549.1.7.2","signedData"),i("1.2.840.113549.1.7.3","envelopedData"),i("1.2.840.113549.1.7.4","signedAndEnvelopedData"),i("1.2.840.113549.1.7.5","digestedData"),i("1.2.840.113549.1.7.6","encryptedData"),i("1.2.840.113549.1.9.1","emailAddress"),i("1.2.840.113549.1.9.2","unstructuredName"),i("1.2.840.113549.1.9.3","contentType"),i("1.2.840.113549.1.9.4","messageDigest"),i("1.2.840.113549.1.9.5","signingTime"),i("1.2.840.113549.1.9.6","counterSignature"),i("1.2.840.113549.1.9.7","challengePassword"),i("1.2.840.113549.1.9.8","unstructuredAddress"),i("1.2.840.113549.1.9.14","extensionRequest"),i("1.2.840.113549.1.9.20","friendlyName"),i("1.2.840.113549.1.9.21","localKeyId"),i("1.2.840.113549.1.9.22.1","x509Certificate"),i("1.2.840.113549.1.12.10.1.1","keyBag"),i("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),i("1.2.840.113549.1.12.10.1.3","certBag"),i("1.2.840.113549.1.12.10.1.4","crlBag"),i("1.2.840.113549.1.12.10.1.5","secretBag"),i("1.2.840.113549.1.12.10.1.6","safeContentsBag"),i("1.2.840.113549.1.5.13","pkcs5PBES2"),i("1.2.840.113549.1.5.12","pkcs5PBKDF2"),i("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),i("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),i("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),i("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),i("1.2.840.113549.2.7","hmacWithSHA1"),i("1.2.840.113549.2.8","hmacWithSHA224"),i("1.2.840.113549.2.9","hmacWithSHA256"),i("1.2.840.113549.2.10","hmacWithSHA384"),i("1.2.840.113549.2.11","hmacWithSHA512"),i("1.2.840.113549.3.7","des-EDE3-CBC"),i("2.16.840.1.101.3.4.1.2","aes128-CBC"),i("2.16.840.1.101.3.4.1.22","aes192-CBC"),i("2.16.840.1.101.3.4.1.42","aes256-CBC"),i("2.5.4.3","commonName"),i("2.5.4.4","surname"),i("2.5.4.5","serialNumber"),i("2.5.4.6","countryName"),i("2.5.4.7","localityName"),i("2.5.4.8","stateOrProvinceName"),i("2.5.4.9","streetAddress"),i("2.5.4.10","organizationName"),i("2.5.4.11","organizationalUnitName"),i("2.5.4.12","title"),i("2.5.4.13","description"),i("2.5.4.15","businessCategory"),i("2.5.4.17","postalCode"),i("2.5.4.42","givenName"),i("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),i("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),i("2.16.840.1.113730.1.1","nsCertType"),i("2.16.840.1.113730.1.13","nsComment"),o("2.5.29.1","authorityKeyIdentifier"),o("2.5.29.2","keyAttributes"),o("2.5.29.3","certificatePolicies"),o("2.5.29.4","keyUsageRestriction"),o("2.5.29.5","policyMapping"),o("2.5.29.6","subtreesConstraint"),o("2.5.29.7","subjectAltName"),o("2.5.29.8","issuerAltName"),o("2.5.29.9","subjectDirectoryAttributes"),o("2.5.29.10","basicConstraints"),o("2.5.29.11","nameConstraints"),o("2.5.29.12","policyConstraints"),o("2.5.29.13","basicConstraints"),i("2.5.29.14","subjectKeyIdentifier"),i("2.5.29.15","keyUsage"),o("2.5.29.16","privateKeyUsagePeriod"),i("2.5.29.17","subjectAltName"),i("2.5.29.18","issuerAltName"),i("2.5.29.19","basicConstraints"),o("2.5.29.20","cRLNumber"),o("2.5.29.21","cRLReason"),o("2.5.29.22","expirationDate"),o("2.5.29.23","instructionCode"),o("2.5.29.24","invalidityDate"),o("2.5.29.25","cRLDistributionPoints"),o("2.5.29.26","issuingDistributionPoint"),o("2.5.29.27","deltaCRLIndicator"),o("2.5.29.28","issuingDistributionPoint"),o("2.5.29.29","certificateIssuer"),o("2.5.29.30","nameConstraints"),i("2.5.29.31","cRLDistributionPoints"),i("2.5.29.32","certificatePolicies"),o("2.5.29.33","policyMappings"),o("2.5.29.34","policyConstraints"),i("2.5.29.35","authorityKeyIdentifier"),o("2.5.29.36","policyConstraints"),i("2.5.29.37","extKeyUsage"),o("2.5.29.46","freshestCRL"),o("2.5.29.54","inhibitAnyPolicy"),i("1.3.6.1.4.1.11129.2.4.2","timestampList"),i("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),i("1.3.6.1.5.5.7.3.1","serverAuth"),i("1.3.6.1.5.5.7.3.2","clientAuth"),i("1.3.6.1.5.5.7.3.3","codeSigning"),i("1.3.6.1.5.5.7.3.4","emailProtection"),i("1.3.6.1.5.5.7.3.8","timeStamping")},7814:function(e,t,r){var n=r(1223);if(r(3835),r(9978),r(4638),r(6829),r(1746),r(5517),r(1984),r(1194),r(8115),r(7341),r(9960),"undefined"===typeof a)var a=n.jsbn.BigInteger;var i=n.asn1,o=n.pki=n.pki||{};e.exports=o.pbe=n.pbe=n.pbe||{};var s=o.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"iterations"}]};function f(e,t){return e.start().update(t).digest().getBytes()}function h(e){var t;if(e){if(!(t=o.oids[i.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return p(t)}function p(e){var t=n.md;switch(e){case"hmacWithSHA224":t=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}o.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var a,u,c,l=n.random.getBytesSync(r.saltSize),f=r.count,h=i.integerToDer(f);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var d,v,y;switch(r.algorithm){case"aes128":a=16,d=16,v=s["aes128-CBC"],y=n.aes.createEncryptionCipher;break;case"aes192":a=24,d=16,v=s["aes192-CBC"],y=n.aes.createEncryptionCipher;break;case"aes256":a=32,d=16,v=s["aes256-CBC"],y=n.aes.createEncryptionCipher;break;case"des":a=8,d=8,v=s.desCBC,y=n.des.createEncryptionCipher;break;default:throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,x}var b="hmacWith"+r.prfAlgorithm.toUpperCase(),g=p(b),m=n.pkcs5.pbkdf2(t,l,f,a,g),w=n.random.getBytesSync(d);(_=y(m)).start(w),_.update(i.toDer(e)),_.finish(),c=_.output.getBytes();var k=function(e,t,r,a){var s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,t.getBytes())]);"hmacWithSHA1"!==a&&s.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.oids[a]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return s}(l,h,a,b);u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.pkcs5PBES2).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.pkcs5PBKDF2).getBytes()),k]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(v).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,w)])])])}else{var x;if("3des"!==r.algorithm)throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,x;a=24;var _,E=new n.util.ByteBuffer(l);m=o.pbe.generatePkcs12Key(t,E,1,f,a),w=o.pbe.generatePkcs12Key(t,E,2,f,a);(_=n.des.createEncryptionCipher(m)).start(w),_.update(i.toDer(e)),_.finish(),c=_.output.getBytes(),u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,l),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,h.getBytes())])])}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[u,i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,c)])},o.decryptPrivateKeyInfo=function(e,t){var r=null,a={},s=[];if(!i.validate(e,u,a,s)){var c=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=s,c}var l=i.derToOid(a.encryptionOid),f=o.pbe.getCipher(l,a.encryptionParams,t),h=n.util.createBuffer(a.encryptedData);return f.update(h),f.finish()&&(r=i.fromDer(f.output)),r},o.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:i.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})},o.encryptedPrivateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return i.fromDer(t.body)},o.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var a=o.wrapRsaPrivateKey(o.privateKeyToAsn1(e));return a=o.encryptPrivateKeyInfo(a,t,r),o.encryptedPrivateKeyToPem(a)}var s,u,c,l;switch(r.algorithm){case"aes128":s="AES-128-CBC",c=16,u=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes192":s="AES-192-CBC",c=24,u=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes256":s="AES-256-CBC",c=32,u=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"3des":s="DES-EDE3-CBC",c=24,u=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;case"des":s="DES-CBC",c=8,u=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var h=l(n.pbe.opensslDeriveBytes(t,u.substr(0,8),c));h.start(u),h.update(i.toDer(o.privateKeyToAsn1(e))),h.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:s,parameters:n.util.bytesToHex(u).toUpperCase()},body:h.output.getBytes()};return n.pem.encode(p)},o.decryptRsaPrivateKey=function(e,t){var r=null,a=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==a.type&&"PRIVATE KEY"!==a.type&&"RSA PRIVATE KEY"!==a.type)throw(c=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=c,c;if(a.procType&&"ENCRYPTED"===a.procType.type){var s,u;switch(a.dekInfo.algorithm){case"DES-CBC":s=8,u=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,u=n.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,u=n.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,u=n.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,u=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,u=function(e){return n.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":s=8,u=function(e){return n.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":s=16,u=function(e){return n.rc2.createDecryptionCipher(e,128)};break;default:var c;throw(c=new Error('Could not decrypt private key; unsupported encryption algorithm "'+a.dekInfo.algorithm+'".')).algorithm=a.dekInfo.algorithm,c}var l=n.util.hexToBytes(a.dekInfo.parameters),f=u(n.pbe.opensslDeriveBytes(t,l.substr(0,8),s));if(f.start(l),f.update(n.util.createBuffer(a.body)),!f.finish())return r;r=f.output.getBytes()}else r=a.body;return null!==(r="ENCRYPTED PRIVATE KEY"===a.type?o.decryptPrivateKeyInfo(i.fromDer(r),t):i.fromDer(r))&&(r=o.privateKeyFromAsn1(r)),r},o.pbe.generatePkcs12Key=function(e,t,r,a,i,o){var s,u;if("undefined"===typeof o||null===o){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');o=n.md.sha1.create()}var c=o.digestLength,l=o.blockLength,f=new n.util.ByteBuffer,h=new n.util.ByteBuffer;if(null!==e&&void 0!==e){for(u=0;u<e.length;u++)h.putInt16(e.charCodeAt(u));h.putInt16(0)}var p=h.length(),d=t.length(),v=new n.util.ByteBuffer;v.fillWithByte(r,l);var y=l*Math.ceil(d/l),b=new n.util.ByteBuffer;for(u=0;u<y;u++)b.putByte(t.at(u%d));var g=l*Math.ceil(p/l),m=new n.util.ByteBuffer;for(u=0;u<g;u++)m.putByte(h.at(u%p));var w=b;w.putBuffer(m);for(var k=Math.ceil(i/c),x=1;x<=k;x++){var _=new n.util.ByteBuffer;_.putBytes(v.bytes()),_.putBytes(w.bytes());for(var E=0;E<a;E++)o.start(),o.update(_.getBytes()),_=o.digest();var S=new n.util.ByteBuffer;for(u=0;u<l;u++)S.putByte(_.at(u%c));var A=Math.ceil(d/l)+Math.ceil(p/l),C=new n.util.ByteBuffer;for(s=0;s<A;s++){var I=new n.util.ByteBuffer(w.getBytes(l)),T=511;for(u=S.length()-1;u>=0;u--)T>>=8,T+=S.at(u)+I.at(u),I.setAt(u,255&T);C.putBuffer(I)}w=C,f.putBuffer(_)}return f.truncate(f.length()-i),f},o.pbe.getCipher=function(e,t,r){switch(e){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(e,t,r);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},o.pbe.getCipherForPBES2=function(e,t,r){var a,s={},u=[];if(!i.validate(t,c,s,u))throw(a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=u,a;if((e=i.derToOid(s.kdfOid))!==o.oids.pkcs5PBKDF2)throw(a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,a.supportedOids=["pkcs5PBKDF2"],a;if((e=i.derToOid(s.encOid))!==o.oids["aes128-CBC"]&&e!==o.oids["aes192-CBC"]&&e!==o.oids["aes256-CBC"]&&e!==o.oids["des-EDE3-CBC"]&&e!==o.oids.desCBC)throw(a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a;var l,f,p=s.kdfSalt,d=n.util.createBuffer(s.kdfIterationCount);switch(d=d.getInt(d.length()<<3),o.oids[e]){case"aes128-CBC":l=16,f=n.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,f=n.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,f=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,f=n.des.createDecryptionCipher;break;case"desCBC":l=8,f=n.des.createDecryptionCipher}var v=h(s.prfOid),y=n.pkcs5.pbkdf2(r,p,d,l,v),b=s.encIv,g=f(y);return g.start(b),g},o.pbe.getCipherForPKCS12PBE=function(e,t,r){var a={},s=[];if(!i.validate(t,l,a,s))throw(v=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=s,v;var u,c,f,p=n.util.createBuffer(a.salt),d=n.util.createBuffer(a.iterations);switch(d=d.getInt(d.length()<<3),e){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,f=n.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,f=function(e,t){var r=n.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var v;throw(v=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,v}var y=h(a.prfOid),b=o.pbe.generatePkcs12Key(r,p,1,d,u,y);return y.start(),f(b,o.pbe.generatePkcs12Key(r,p,2,d,c,y))},o.pbe.opensslDeriveBytes=function(e,t,r,a){if("undefined"===typeof a||null===a){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');a=n.md.md5.create()}null===t&&(t="");for(var i=[f(a,e+t)],o=16,s=1;o<r;++s,o+=16)i.push(f(a,i[s-1]+e+t));return i.join("").substr(0,r)}},5517:function(e,t,r){var n=r(1223);r(7134),r(6829),r(9960);var a,i=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(a=r(5745)),e.exports=n.pbkdf2=i.pbkdf2=function(e,t,r,i,o,s){if("function"===typeof o&&(s=o,o=null),n.util.isNodejs&&!n.options.usePureJavaScript&&a.pbkdf2&&(null===o||"object"!==typeof o)&&(a.pbkdf2Sync.length>4||!o||"sha1"===o))return"string"!==typeof o&&(o="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?4===a.pbkdf2Sync.length?a.pbkdf2(e,t,r,i,(function(e,t){if(e)return s(e);s(null,t.toString("binary"))})):a.pbkdf2(e,t,r,i,o,(function(e,t){if(e)return s(e);s(null,t.toString("binary"))})):4===a.pbkdf2Sync.length?a.pbkdf2Sync(e,t,r,i).toString("binary"):a.pbkdf2Sync(e,t,r,i,o).toString("binary");if("undefined"!==typeof o&&null!==o||(o="sha1"),"string"===typeof o){if(!(o in n.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=n.md[o].create()}var u=o.digestLength;if(i>4294967295*u){var c=new Error("Derived key is too long.");if(s)return s(c);throw c}var l=Math.ceil(i/u),f=i-(l-1)*u,h=n.hmac.create();h.start(o,e);var p,d,v,y="";if(!s){for(var b=1;b<=l;++b){h.start(null,null),h.update(t),h.update(n.util.int32ToBytes(b)),p=v=h.digest().getBytes();for(var g=2;g<=r;++g)h.start(null,null),h.update(v),d=h.digest().getBytes(),p=n.util.xorBytes(p,d,u),v=d;y+=b<l?p:p.substr(0,f)}return y}b=1;function m(){if(b>l)return s(null,y);h.start(null,null),h.update(t),h.update(n.util.int32ToBytes(b)),p=v=h.digest().getBytes(),g=2,w()}function w(){if(g<=r)return h.start(null,null),h.update(v),d=h.digest().getBytes(),p=n.util.xorBytes(p,d,u),v=d,++g,n.util.setImmediate(w);y+=b<l?p:p.substr(0,f),++b,m()}m()}},1984:function(e,t,r){var n=r(1223);r(9960);var a=e.exports=n.pem=n.pem||{};function i(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},a=0;a<e.values.length;++a)r.push(e.values[a].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var i=0,o=-1;for(a=0;a<t.length;++a,++i)if(i>65&&-1!==o){var s=t[o];","===s?(++o,t=t.substr(0,o)+"\r\n "+t.substr(o)):t=t.substr(0,o)+"\r\n"+s+t.substr(o+1),i=a-o-1,o=-1,++a}else" "!==t[a]&&"\t"!==t[a]&&","!==t[a]||(o=a);return t}function o(e){return e.replace(/^\s+/,"")}a.encode=function(e,t){t=t||{};var r,a="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(a+=i(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(a+=i(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),a+=i(r)),e.headers)for(var o=0;o<e.headers.length;++o)a+=i(e.headers[o]);return e.procType&&(a+="\r\n"),a+=n.util.encode64(e.body,t.maxline||64)+"\r\n",a+="-----END "+e.type+"-----\r\n"},a.decode=function(e){for(var t,r=[],a=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;t=a.exec(e);){var u=t[1];"NEW CERTIFICATE REQUEST"===u&&(u="CERTIFICATE REQUEST");var c={type:u,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(t[3])};if(r.push(c),t[2]){for(var l=t[2].split(s),f=0;t&&f<l.length;){for(var h=l[f].replace(/\s+$/,""),p=f+1;p<l.length;++p){var d=l[p];if(!/\s/.test(d[0]))break;h+=d,f=p}if(t=h.match(i)){for(var v={name:t[1],values:[]},y=t[2].split(","),b=0;b<y.length;++b)v.values.push(o(y[b]));if(c.procType)if(c.contentDomain||"Content-Domain"!==v.name)if(c.dekInfo||"DEK-Info"!==v.name)c.headers.push(v);else{if(0===v.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:y[0],parameters:y[1]||null}}else c.contentDomain=y[0]||"";else{if("Proc-Type"!==v.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==v.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:y[0],type:y[1]}}}++f}if("ENCRYPTED"===c.procType&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},2204:function(e,t,r){var n=r(1223);r(9960),r(1194),r(482);var a=e.exports=n.pkcs1=n.pkcs1||{};function i(e,t,r){r||(r=n.md.sha1.create());for(var a="",i=Math.ceil(t/r.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);r.start(),r.update(e+s),a+=r.digest().getBytes()}return a.substring(0,t)}a.encode_rsa_oaep=function(e,t,r){var a,o,s,u;"string"===typeof r?(a=r,o=arguments[3]||void 0,s=arguments[4]||void 0):r&&(a=r.label||void 0,o=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(u=r.mgf1.md)),s?s.start():s=n.md.sha1.create(),u||(u=s);var c=Math.ceil(e.n.bitLength()/8),l=c-2*s.digestLength-2;if(t.length>l)throw(y=new Error("RSAES-OAEP input message length is too long.")).length=t.length,y.maxLength=l,y;a||(a=""),s.update(a,"raw");for(var f=s.digest(),h="",p=l-t.length,d=0;d<p;d++)h+="\0";var v=f.getBytes()+h+"\x01"+t;if(o){if(o.length!==s.digestLength){var y;throw(y=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=o.length,y.digestLength=s.digestLength,y}}else o=n.random.getBytes(s.digestLength);var b=i(o,c-s.digestLength-1,u),g=n.util.xorBytes(v,b,v.length),m=i(g,s.digestLength,u),w=n.util.xorBytes(o,m,o.length);return"\0"+w+g},a.decode_rsa_oaep=function(e,t,r){var a,o,s;"string"===typeof r?(a=r,o=arguments[3]||void 0):r&&(a=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var u=Math.ceil(e.n.bitLength()/8);if(t.length!==u)throw(g=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,g.expectedLength=u,g;if(void 0===o?o=n.md.sha1.create():o.start(),s||(s=o),u<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");a||(a=""),o.update(a,"raw");for(var c=o.digest().getBytes(),l=t.charAt(0),f=t.substring(1,o.digestLength+1),h=t.substring(1+o.digestLength),p=i(h,o.digestLength,s),d=n.util.xorBytes(f,p,f.length),v=i(d,u-o.digestLength-1,s),y=n.util.xorBytes(h,v,h.length),b=y.substring(0,o.digestLength),g="\0"!==l,m=0;m<o.digestLength;++m)g|=c.charAt(m)!==b.charAt(m);for(var w=1,k=o.digestLength,x=o.digestLength;x<y.length;x++){var _=y.charCodeAt(x),E=1&_^1,S=w?65534:0;g|=_&S,k+=w&=E}if(g||1!==y.charCodeAt(k))throw new Error("Invalid RSAES-OAEP padding.");return y.substring(k+1)}},6502:function(e,t,r){var n=r(1223);r(3835),r(9978),r(4638),r(1746),r(1984),r(2337),r(1194),r(9960),r(4348);var a=n.asn1,i=e.exports=n.pkcs7=n.pkcs7||{};function o(e){var t={},r=[];if(!a.validate(e,i.asn1.recipientInfoValidator,t,r)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=r,o}return{version:t.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(t.issuer),serialNumber:n.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:a.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function s(e){for(var t,r=[],i=0;i<e.length;++i)r.push((t=e[i],a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(t.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.encryptedContent.algorithm).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.encryptedContent.content)])));return r}function u(e){var t=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.digestAlgorithm).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.signatureAlgorithm).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])),t.value.push(a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=a.create(a.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<e.unauthenticatedAttributes.length;++i){var o=e.unauthenticatedAttributes[i];r.values.push(c(o))}t.value.push(r)}return t}function c(e){var t;if(e.type===n.pki.oids.contentType)t=a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.value).getBytes());else if(e.type===n.pki.oids.messageDigest)t=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),o=e.value;if("string"===typeof o){var s=Date.parse(o);o=isNaN(s)?13===o.length?a.utcTimeToDate(o):a.generalizedTimeToDate(o):new Date(s)}t=o>=r&&o<i?a.create(a.Class.UNIVERSAL,a.Type.UTCTIME,!1,a.dateToUtcTime(o)):a.create(a.Class.UNIVERSAL,a.Type.GENERALIZEDTIME,!1,a.dateToGeneralizedTime(o))}return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.type).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[t])])}function l(e,t,r){var i={};if(!a.validate(t,r,i,[])){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}if(a.derToOid(i.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var s="";if(n.util.isArray(i.encryptedContent))for(var u=0;u<i.encryptedContent.length;++u){if(i.encryptedContent[u].type!==a.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");s+=i.encryptedContent[u].value}else s=i.encryptedContent;e.encryptedContent={algorithm:a.derToOid(i.encAlgorithm),parameter:n.util.createBuffer(i.encParameter.value),content:n.util.createBuffer(s)}}if(i.content){s="";if(n.util.isArray(i.content))for(u=0;u<i.content.length;++u){if(i.content[u].type!==a.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");s+=i.content[u].value}else s=i.content;e.content=n.util.createBuffer(s)}return e.version=i.version.charCodeAt(0),e.rawCapture=i,i}function f(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:t=n.aes.createDecryptionCipher(e.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:t=n.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}i.messageFromPem=function(e){var t=n.pem.decode(e)[0];if("PKCS7"!==t.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=a.fromDer(t.body);return i.messageFromAsn1(o)},i.messageToPem=function(e,t){var r={type:"PKCS7",body:a.toDer(e.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:t})},i.messageFromAsn1=function(e){var t={},r=[];if(!a.validate(e,i.asn1.contentInfoValidator,t,r)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=r,o}var s,u=a.derToOid(t.contentType);switch(u){case n.pki.oids.envelopedData:s=i.createEnvelopedData();break;case n.pki.oids.encryptedData:s=i.createEncryptedData();break;case n.pki.oids.signedData:s=i.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+u+" is not (yet) supported.")}return s.fromAsn1(t.content.value[0]),s},i.createSignedData=function(){var e=null;return e={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(l(e,t,i.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var r=e.rawCapture.certificates.value,a=0;a<r.length;++a)e.certificates.push(n.pki.certificateFromAsn1(r[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var t=[],r=0;r<e.certificates.length;++r)t.push(n.pki.certificateToAsn1(e.certificates[r]));var i=[],o=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&o.value[0].value.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,t)),i.length>0&&o.value[0].value.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,i)),o.value[0].value.push(a.create(a.Class.UNIVERSAL,a.Type.SET,!0,e.signerInfos)),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.type).getBytes()),o])},addSigner:function(t){var r=t.issuer,a=t.serialNumber;if(t.certificate){var i=t.certificate;"string"===typeof i&&(i=n.pki.certificateFromPem(i)),r=i.issuer.attributes,a=i.serialNumber}var o=t.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"===typeof o&&(o=n.pki.privateKeyFromPem(o));var s=t.digestAlgorithm||n.pki.oids.sha1;switch(s){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+s)}var u=t.authenticatedAttributes||[];if(u.length>0){for(var c=!1,l=!1,f=0;f<u.length;++f){var h=u[f];if(c||h.type!==n.pki.oids.contentType){if(l||h.type!==n.pki.oids.messageDigest);else if(l=!0,c)break}else if(c=!0,l)break}if(!c||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:r,serialNumber:a,digestAlgorithm:s,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(t){var r;(t=t||{},"object"!==typeof e.content||null===e.contentInfo)&&(e.contentInfo=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(n.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof n.util.ByteBuffer?r=e.content.bytes():"string"===typeof e.content&&(r=n.util.encodeUtf8(e.content)),t.detached?e.detachedContent=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,r):e.contentInfo.value.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,r)]))));0!==e.signers.length&&function(t){var r;r=e.detachedContent?e.detachedContent:(r=e.contentInfo.value[1]).value[0];if(!r)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var i=a.derToOid(e.contentInfo.value[0].value),o=a.toDer(r);for(var s in o.getByte(),a.getBerValueLength(o),o=o.getBytes(),t)t[s].start().update(o);for(var l=new Date,f=0;f<e.signers.length;++f){var h=e.signers[f];if(0===h.authenticatedAttributes.length){if(i!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{h.authenticatedAttributesAsn1=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[]),d=0;d<h.authenticatedAttributes.length;++d){var v=h.authenticatedAttributes[d];v.type===n.pki.oids.messageDigest?v.value=t[h.digestAlgorithm].digest():v.type===n.pki.oids.signingTime&&(v.value||(v.value=l)),p.value.push(c(v)),h.authenticatedAttributesAsn1.value.push(c(v))}o=a.toDer(p).getBytes(),h.md.start().update(o)}h.signature=h.key.sign(h.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],r=0;r<e.length;++r)t.push(u(e[r]));return t}(e.signers)}(function(){for(var t={},r=0;r<e.signers.length;++r){var i=e.signers[r];(o=i.digestAlgorithm)in t||(t[o]=n.md[n.pki.oids[o]].create()),0===i.authenticatedAttributes.length?i.md=t[o]:i.md=n.md[n.pki.oids[o]].create()}for(var o in e.digestAlgorithmIdentifiers=[],t)e.digestAlgorithmIdentifiers.push(a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(o).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]));return t}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"===typeof t&&(t=n.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},i.createEncryptedData=function(){var e=null;return e={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){l(e,t,i.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),f(e)}}},i.createEnvelopedData=function(){var e=null;return e={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=l(e,t,i.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],r=0;r<e.length;++r)t.push(o(e[r]));return t}(r.recipientInfos.value)},toAsn1:function(){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.type).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,s(e.recipients)),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,(t=e.encryptedContent,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(n.pki.oids.data).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.algorithm).getBytes()),t.parameter?a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.content.getBytes())])]))])])]);var t},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var a=e.recipients[n],i=a.issuer;if(a.serialNumber===t.serialNumber&&i.length===r.length){for(var o=!0,s=0;s<r.length;++s)if(i[s].type!==r[s].type||i[s].value!==r[s].value){o=!1;break}if(o)return a}}return null},decrypt:function(t,r){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==r)switch(t.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var a=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=n.util.createBuffer(a);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}f(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(void 0===e.encryptedContent.content){var a,i,o;switch(r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:a=16,i=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:a=24,i=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:a=32,i=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:a=24,i=8,o=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===t)t=n.util.createBuffer(n.random.getBytes(a));else if(t.length()!=a)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+a+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(i));var s=o(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var u=0;u<e.recipients.length;++u){var c=e.recipients[u];if(void 0===c.encryptedContent.content){if(c.encryptedContent.algorithm!==n.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm);c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data)}}}}}},2337:function(e,t,r){var n=r(1223);r(9978),r(9960);var a=n.asn1,i=e.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=i;var o={name:"ContentInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};i.contentInfoValidator=o;var s={name:"EncryptedContentInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};i.envelopedDataValidator={name:"EnvelopedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(s)},i.encryptedDataValidator={name:"EncryptedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"}].concat(s)};var u={name:"SignerInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};i.signedDataValidator={name:"SignedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,capture:"signerInfos",optional:!0,value:[u]}]},i.recipientInfoValidator={name:"RecipientInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},7332:function(e,t,r){var n=r(1223);r(9960),r(693),r(1194),function(){if(n.prime)e.exports=n.prime;else{var t=e.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,a=[6,4,2,4,2,4,6,2],i=new r(null);i.fromInt(30);var o=function(e,t){return e|t};t.generateProbablePrime=function(e,t,a){"function"===typeof t&&(a=t,t={});var i=(t=t||{}).algorithm||"PRIMEINC";"string"===typeof i&&(i={name:i}),i.options=i.options||{};var o=t.prng||n.random,u={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===i.name)return function(e,t,a,i){if("workers"in a)return function(e,t,a,i){if("undefined"===typeof Worker)return s(e,t,a,i);var o=c(e,t),u=a.workers,l=a.workLoad||100,f=30*l/8,h=a.workerScript||"forge/prime.worker.js";if(-1===u)return n.util.estimateCores((function(e,t){e&&(t=2),u=t-1,p()}));function p(){u=Math.max(1,u);for(var n=[],a=0;a<u;++a)n[a]=new Worker(h);for(a=0;a<u;++a)n[a].addEventListener("message",p);var s=!1;function p(a){if(!s){0;var u=a.data;if(u.found){for(var h=0;h<n.length;++h)n[h].terminate();return s=!0,i(null,new r(u.prime,16))}o.bitLength()>e&&(o=c(e,t));var p=o.toString(16);a.target.postMessage({hex:p,workLoad:l}),o.dAddOffset(f,0)}}}p()}(e,t,a,i);return s(e,t,a,i)}(e,u,i.options,a);throw new Error("Invalid prime generation algorithm: "+i.name)}}function s(e,t,r,n){var a=c(e,t),i=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(a.bitLength());"millerRabinTests"in r&&(i=r.millerRabinTests);var o=10;"maxBlockTime"in r&&(o=r.maxBlockTime),u(a,e,t,0,i,o,n)}function u(e,t,r,i,o,s,l){var f=+new Date;do{if(e.bitLength()>t&&(e=c(t,r)),e.isProbablePrime(o))return l(null,e);e.dAddOffset(a[i++%8],0)}while(s<0||+new Date-f<s);n.util.setImmediate((function(){u(e,t,r,i,o,s,l)}))}function c(e,t){var n=new r(e,t),a=e-1;return n.testBit(a)||n.bitwiseTo(r.ONE.shiftLeft(a),o,n),n.dAddOffset(31-n.mod(i).byteValue(),0),n}}()},9213:function(e,t,r){var n=r(1223);r(9960);var a=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions["node-webkit"]||(a=r(5745)),(e.exports=n.prng=n.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,i=new Array(32),o=0;o<32;++o)i[o]=r.create();function s(){if(t.pools[0].messageLength>=32)return u();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),u()}function u(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var r=1,n=0;n<32;++n)t.reseeds%r===0&&(e.update(t.pools[n].digest().getBytes()),t.pools[n].start()),r<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var a=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(a),t.generated=0}function c(e){var t=null,r=n.util.globalScope,a=r.crypto||r.msCrypto;a&&a.getRandomValues&&(t=function(e){return a.getRandomValues(e)});var i=n.util.createBuffer();if(t)for(;i.length()<e;){var o=Math.max(1,Math.min(e-i.length(),65536)/4),s=new Uint32Array(Math.floor(o));try{t(s);for(var u=0;u<s.length;++u)i.putInt32(s[u])}catch(p){if(!("undefined"!==typeof QuotaExceededError&&p instanceof QuotaExceededError))throw p}}if(i.length()<e)for(var c,l,f,h=Math.floor(65536*Math.random());i.length()<e;){l=16807*(65535&h),l+=(32767&(c=16807*(h>>16)))<<16,h=4294967295&(l=(2147483647&(l+=c>>15))+(l>>31));for(u=0;u<3;++u)f=h>>>(u<<3),f^=Math.floor(256*Math.random()),i.putByte(255&f)}return i.getBytes(e)}return t.pools=i,t.pool=0,t.generate=function(e,r){if(!r)return t.generateSync(e);var a=t.plugin.cipher,i=t.plugin.increment,o=t.plugin.formatKey,s=t.plugin.formatSeed,c=n.util.createBuffer();t.key=null,function l(f){if(f)return r(f);if(c.length()>=e)return r(null,c.getBytes(e));t.generated>1048575&&(t.key=null);if(null===t.key)return n.util.nextTick((function(){!function(e){if(t.pools[0].messageLength>=32)return u(),e();var r=32-t.pools[0].messageLength<<5;t.seedFile(r,(function(r,n){if(r)return e(r);t.collect(n),u(),e()}))}(l)}));var h=a(t.key,t.seed);t.generated+=h.length,c.putBytes(h),t.key=o(a(t.key,i(t.seed))),t.seed=s(a(t.key,t.seed)),n.util.setImmediate(l)}()},t.generateSync=function(e){var r=t.plugin.cipher,a=t.plugin.increment,i=t.plugin.formatKey,o=t.plugin.formatSeed;t.key=null;for(var u=n.util.createBuffer();u.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&s();var c=r(t.key,t.seed);t.generated+=c.length,u.putBytes(c),t.key=i(r(t.key,a(t.seed))),t.seed=o(r(t.key,t.seed))}return u.getBytes(e)},a?(t.seedFile=function(e,t){a.randomBytes(e,(function(e,r){if(e)return t(e);t(null,r.toString())}))},t.seedFileSync=function(e){return a.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,c(e))}catch(r){t(r)}},t.seedFileSync=c),t.collect=function(e){for(var r=e.length,n=0;n<r;++n)t.pools[t.pool].update(e.substr(n,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,r){for(var n="",a=0;a<r;a+=8)n+=String.fromCharCode(e>>a&255);t.collect(n)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){self.addEventListener("message",(function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener("message",(function(r){var n=r.data;n.forge&&n.forge.prng&&t.seedFile(n.forge.prng.needed,(function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})}))}))}},t}},3313:function(e,t,r){var n=r(1223);r(1194),r(9960),(e.exports=n.pss=n.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,a=e.mgf,i=r.digestLength,o=e.salt||null;if("string"===typeof o&&(o=n.util.createBuffer(o)),"saltLength"in e)t=e.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");t=o.length()}if(null!==o&&o.length()!==t)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||n.random,u={encode:function(e,u){var c,l,f=u-1,h=Math.ceil(f/8),p=e.digest().getBytes();if(h<i+t+2)throw new Error("Message is too long to encrypt.");l=null===o?s.getBytesSync(t):o.bytes();var d=new n.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(p),d.putBytes(l),r.start(),r.update(d.getBytes());var v=r.digest().getBytes(),y=new n.util.ByteBuffer;y.fillWithByte(0,h-t-i-2),y.putByte(1),y.putBytes(l);var b=y.getBytes(),g=h-i-1,m=a.generate(v,g),w="";for(c=0;c<g;c++)w+=String.fromCharCode(b.charCodeAt(c)^m.charCodeAt(c));var k=65280>>8*h-f&255;return(w=String.fromCharCode(w.charCodeAt(0)&~k)+w.substr(1))+v+String.fromCharCode(188)},verify:function(e,o,s){var u,c=s-1,l=Math.ceil(c/8);if(o=o.substr(-l),l<i+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var f=l-i-1,h=o.substr(0,f),p=o.substr(f,i),d=65280>>8*l-c&255;if(0!==(h.charCodeAt(0)&d))throw new Error("Bits beyond keysize not zero as expected.");var v=a.generate(p,f),y="";for(u=0;u<f;u++)y+=String.fromCharCode(h.charCodeAt(u)^v.charCodeAt(u));y=String.fromCharCode(y.charCodeAt(0)&~d)+y.substr(1);var b=l-i-t-2;for(u=0;u<b;u++)if(0!==y.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==y.charCodeAt(b))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var g=y.substr(-t),m=new n.util.ByteBuffer;return m.fillWithByte(0,8),m.putBytes(e),m.putBytes(g),r.start(),r.update(m.getBytes()),p===r.digest().getBytes()}};return u}},1194:function(e,t,r){var n=r(1223);r(3835),r(6487),r(9213),r(9960),n.random&&n.random.getBytes?e.exports=n.random:function(t){var r={},a=new Array(4),i=n.util.createBuffer();function o(){var e=n.prng.create(r);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}r.formatKey=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),n.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return n.aes._updateBlock(e,t,a,!1),i.putInt32(a[0]),i.putInt32(a[1]),i.putInt32(a[2]),i.putInt32(a[3]),i.getBytes()},r.increment=function(e){return++e[3],e},r.md=n.md.sha256;var s=o(),u=null,c=n.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(u=function(e){return l.getRandomValues(e)}),n.options.usePureJavaScript||!n.util.isNodejs&&!u){if("undefined"===typeof window||window.document,s.collectInt(+new Date,32),"undefined"!==typeof navigator){var f="";for(var h in navigator)try{"string"==typeof navigator[h]&&(f+=navigator[h])}catch(p){}s.collect(f),f=null}t&&(t().mousemove((function(e){s.collectInt(e.clientX,16),s.collectInt(e.clientY,16)})),t().keypress((function(e){s.collectInt(e.charCode,8)})))}if(n.random)for(var h in s)n.random[h]=s[h];else n.random=s;n.random.createInstance=o,e.exports=n.random}("undefined"!==typeof jQuery?jQuery:null)},8115:function(e,t,r){var n=r(1223);r(9960);var a=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],i=[1,2,3,5],o=function(e,t){return e<<t&65535|(65535&e)>>16-t},s=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(e,t){"string"===typeof e&&(e=n.util.createBuffer(e)),t=t||128;var r,i=e,o=e.length(),s=t,u=Math.ceil(s/8),c=255>>(7&s);for(r=o;r<128;r++)i.putByte(a[i.at(r-1)+i.at(r-o)&255]);for(i.setAt(128-u,a[i.at(128-u)&c]),r=127-u;r>=0;r--)i.setAt(r,a[i.at(r+1)^i.at(r+u)]);return i};var u=function(e,t,r){var a,u,c,l,f=!1,h=null,p=null,d=null,v=[];for(e=n.rc2.expandKey(e,t),c=0;c<64;c++)v.push(e.getInt16Le());r?(a=function(e){for(c=0;c<4;c++)e[c]+=v[l]+(e[(c+3)%4]&e[(c+2)%4])+(~e[(c+3)%4]&e[(c+1)%4]),e[c]=o(e[c],i[c]),l++},u=function(e){for(c=0;c<4;c++)e[c]+=v[63&e[(c+3)%4]]}):(a=function(e){for(c=3;c>=0;c--)e[c]=s(e[c],i[c]),e[c]-=v[l]+(e[(c+3)%4]&e[(c+2)%4])+(~e[(c+3)%4]&e[(c+1)%4]),l--},u=function(e){for(c=3;c>=0;c--)e[c]-=v[63&e[(c+3)%4]]});var y=function(e){var t=[];for(c=0;c<4;c++){var n=h.getInt16Le();null!==d&&(r?n^=d.getInt16Le():d.putInt16Le(n)),t.push(65535&n)}l=r?0:63;for(var a=0;a<e.length;a++)for(var i=0;i<e[a][0];i++)e[a][1](t);for(c=0;c<4;c++)null!==d&&(r?d.putInt16Le(t[c]):t[c]^=d.getInt16Le()),p.putInt16Le(t[c])},b=null;return b={start:function(e,t){e&&"string"===typeof e&&(e=n.util.createBuffer(e)),f=!1,h=n.util.createBuffer(),p=t||new n.util.createBuffer,d=e,b.output=p},update:function(e){for(f||h.putBuffer(e);h.length()>=8;)y([[5,a],[1,u],[6,a],[1,u],[5,a]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,h,!r);else{var n=8===h.length()?8:8-h.length();h.fillWithByte(n,n)}if(t&&(f=!0,b.update()),!r&&(t=0===h.length()))if(e)t=e(8,p,!r);else{var a=p.length(),i=p.at(a-1);i>a?t=!1:p.truncate(i)}return t}}};n.rc2.startEncrypting=function(e,t,r){var a=n.rc2.createEncryptionCipher(e,128);return a.start(t,r),a},n.rc2.createEncryptionCipher=function(e,t){return u(e,t,!0)},n.rc2.startDecrypting=function(e,t,r){var a=n.rc2.createDecryptionCipher(e,128);return a.start(t,r),a},n.rc2.createDecryptionCipher=function(e,t){return u(e,t,!1)}},7341:function(e,t,r){var n=r(1223);if(r(9978),r(693),r(1746),r(2204),r(7332),r(1194),r(9960),"undefined"===typeof a)var a=n.jsbn.BigInteger;var i=n.util.isNodejs?r(5745):null,o=n.asn1,s=n.util;n.pki=n.pki||{},e.exports=n.pki.rsa=n.rsa=n.rsa||{};var u=n.pki,c=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},f={name:"RSAPrivateKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},h={name:"RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},p=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},d={name:"DigestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},v=function(e){var t;if(!(e.algorithm in u.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=u.oids[e.algorithm];var n=o.oidToDer(t).getBytes(),a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);i.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,n)),i.value.push(o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,""));var s=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.digest().getBytes());return a.value.push(i),a.value.push(s),o.toDer(a).getBytes()},y=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var i;t.dP||(t.dP=t.d.mod(t.p.subtract(a.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(a.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{i=new a(n.util.bytesToHex(n.random.getBytes(t.n.bitLength()/8)),16)}while(i.compareTo(t.n)>=0||!i.gcd(t.n).equals(a.ONE));for(var o=(e=e.multiply(i.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);o.compareTo(s)<0;)o=o.add(t.p);var u=o.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return u=u.multiply(i.modInverse(t.n)).mod(t.n)};function b(e,t,r){var a=n.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=e.length,o.max=i-11,o}a.putByte(0),a.putByte(r);var s,u=i-3-e.length;if(0===r||1===r){s=0===r?0:255;for(var c=0;c<u;++c)a.putByte(s)}else for(;u>0;){var l=0,f=n.random.getBytes(u);for(c=0;c<u;++c)0===(s=f.charCodeAt(c))?++l:a.putByte(s);u=l}return a.putByte(0),a.putBytes(e),a}function g(e,t,r,a){var i=Math.ceil(t.n.bitLength()/8),o=n.util.createBuffer(e),s=o.getByte(),u=o.getByte();if(0!==s||r&&0!==u&&1!==u||!r&&2!=u||r&&0===u&&"undefined"===typeof a)throw new Error("Encryption block is invalid.");var c=0;if(0===u){c=i-3-a;for(var l=0;l<c;++l)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(c=0;o.length()>1;){if(255!==o.getByte()){--o.read;break}++c}else if(2===u)for(c=0;o.length()>1;){if(0===o.getByte()){--o.read;break}++c}if(0!==o.getByte()||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function m(e,t,r){"function"===typeof t&&(r=t,t={});var i={algorithm:{name:(t=t||{}).algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};function o(){s(e.pBits,(function(t,n){return t?r(t):(e.p=n,null!==e.q?c(t,e.q):void s(e.qBits,c))}))}function s(e,t){n.prime.generateProbablePrime(e,i,t)}function c(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var i=e.p;e.p=e.q,e.q=i}if(0!==e.p.subtract(a.ONE).gcd(e.e).compareTo(a.ONE))return e.p=null,void o();if(0!==e.q.subtract(a.ONE).gcd(e.e).compareTo(a.ONE))return e.q=null,void s(e.qBits,c);if(e.p1=e.p.subtract(a.ONE),e.q1=e.q.subtract(a.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(a.ONE))return e.p=e.q=null,void o();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void s(e.qBits,c);var l=e.e.modInverse(e.phi);e.keys={privateKey:u.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:u.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}"prng"in t&&(i.prng=t.prng),o()}function w(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=n.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0===(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128===(128&r.charCodeAt(1)))?r.substr(1):r}function k(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function x(e){return n.util.isNodejs&&"function"===typeof i[e]}function _(e){return"undefined"!==typeof s.globalScope&&"object"===typeof s.globalScope.crypto&&"object"===typeof s.globalScope.crypto.subtle&&"function"===typeof s.globalScope.crypto.subtle[e]}function E(e){return"undefined"!==typeof s.globalScope&&"object"===typeof s.globalScope.msCrypto&&"object"===typeof s.globalScope.msCrypto.subtle&&"function"===typeof s.globalScope.msCrypto.subtle[e]}function S(e){for(var t=n.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),a=0;a<t.length;++a)r[a]=t.charCodeAt(a);return r}u.rsa.encrypt=function(e,t,r){var i,o=r,s=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(o=2===r,i=b(e,t,r)):(i=n.util.createBuffer()).putBytes(e);for(var u=new a(i.toHex(),16),c=y(u,t,o).toString(16),l=n.util.createBuffer(),f=s-Math.ceil(c.length/2);f>0;)l.putByte(0),--f;return l.putBytes(n.util.hexToBytes(c)),l.getBytes()},u.rsa.decrypt=function(e,t,r,i){var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=o,s}var u=new a(n.util.createBuffer(e).toHex(),16);if(u.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=y(u,t,r).toString(16),l=n.util.createBuffer(),f=o-Math.ceil(c.length/2);f>0;)l.putByte(0),--f;return l.putBytes(n.util.hexToBytes(c)),!1!==i?g(l.getBytes(),t,r):l.getBytes()},u.rsa.createKeyPairGenerationState=function(e,t,r){"string"===typeof e&&(e=parseInt(e,10)),e=e||2048;var i,o=(r=r||{}).prng||n.random,s={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},u=r.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return(i={algorithm:u,state:0,bits:e,rng:s,eInt:t||65537,e:new a(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(i.eInt),i},u.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new a(null);r.fromInt(30);for(var n,i=0,o=function(e,t){return e|t},s=+new Date,l=0;null===e.keys&&(t<=0||l<t);){if(0===e.state){var f=null===e.p?e.pBits:e.qBits,h=f-1;0===e.pqState?(e.num=new a(f,e.rng),e.num.testBit(h)||e.num.bitwiseTo(a.ONE.shiftLeft(h),o,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),i=0,++e.pqState):1===e.pqState?e.num.bitLength()>f?e.pqState=0:e.num.isProbablePrime(k(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(c[i++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(a.ONE).gcd(e.e).compareTo(a.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(a.ONE),e.q1=e.q.subtract(a.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(a.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var p=e.e.modInverse(e.phi);e.keys={privateKey:u.rsa.setPrivateKey(e.n,e.e,p,e.p,e.q,p.mod(e.p1),p.mod(e.q1),e.q.modInverse(e.p)),publicKey:u.rsa.setPublicKey(e.n,e.e)}}l+=(n=+new Date)-s,s=n}return null!==e.keys},u.rsa.generateKeyPair=function(e,t,r,a){if(1===arguments.length?"object"===typeof e?(r=e,e=void 0):"function"===typeof e&&(a=e,e=void 0):2===arguments.length?"number"===typeof e?"function"===typeof t?(a=t,t=void 0):"number"!==typeof t&&(r=t,t=void 0):(r=e,a=t,e=void 0,t=void 0):3===arguments.length&&("number"===typeof t?"function"===typeof r&&(a=r,r=void 0):(a=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(a){if(x("generateKeyPair"))return i.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,r){if(e)return a(e);a(null,{privateKey:u.privateKeyFromPem(r),publicKey:u.publicKeyFromPem(t)})}));if(_("generateKey")&&_("exportKey"))return s.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:S(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return s.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){a(e)})).then((function(e){if(e){var t=u.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(e)));a(null,{privateKey:t,publicKey:u.setRsaPublicKey(t.n,t.e)})}}));if(E("generateKey")&&E("exportKey")){var c=s.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:S(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(e){var t=e.target.result,r=s.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=u.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(t)));a(null,{privateKey:r,publicKey:u.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){a(e)}},void(c.onerror=function(e){a(e)})}}else if(x("generateKeyPairSync")){var l=i.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:u.privateKeyFromPem(l.privateKey),publicKey:u.publicKeyFromPem(l.publicKey)}}var f=u.rsa.createKeyPairGenerationState(e,t,r);if(!a)return u.rsa.stepKeyPairGenerationState(f,0),f.keys;m(f,r,a)},u.setRsaPublicKey=u.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e,t,a){if("string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return b(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return n.pkcs1.encode_rsa_oaep(t,e,a)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"===typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var i=t.encode(e,r,!0);return u.rsa.encrypt(i,r,!0)},verify:function(e,t,a,i){"string"===typeof a?a=a.toUpperCase():void 0===a&&(a="RSASSA-PKCS1-V1_5"),void 0===i&&(i={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in i||(i._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===a?a={verify:function(e,t){t=g(t,r,!0);var a=o.fromDer(t,{parseAllBytes:i._parseAllDigestBytes}),s={},u=[];if(!o.validate(a,d,s,u))throw(c=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=u,c;var c,l=o.derToOid(s.algorithmIdentifier);if(l!==n.oids.md2&&l!==n.oids.md5&&l!==n.oids.sha1&&l!==n.oids.sha224&&l!==n.oids.sha256&&l!==n.oids.sha384&&l!==n.oids.sha512&&l!==n.oids["sha512-224"]&&l!==n.oids["sha512-256"])throw(c=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=l,c;if((l===n.oids.md2||l===n.oids.md5)&&!("parameters"in s))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return e===s.digest}}:"NONE"!==a&&"NULL"!==a&&null!==a||(a={verify:function(e,t){return e===(t=g(t,r,!0))}});var s=u.rsa.decrypt(t,r,!0,!1);return a.verify(e,s,r.n.bitLength())}};return r},u.setRsaPrivateKey=u.rsa.setPrivateKey=function(e,t,r,a,i,o,s,c){var l={n:e,e:t,d:r,p:a,q:i,dP:o,dQ:s,qInv:c,decrypt:function(e,t,r){"string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var a=u.rsa.decrypt(e,l,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:g};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return n.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(a,l,!1)},sign:function(e,t){var r=!1;"string"===typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:v},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,l.n.bitLength());return u.rsa.encrypt(n,l,r)}};return l},u.wrapRsaPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(u.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(e).getBytes())])},u.privateKeyFromAsn1=function(e){var t,r,i,s,c,h,p,d,v={},y=[];if(o.validate(e,l,v,y)&&(e=o.fromDer(n.util.createBuffer(v.privateKey))),v={},y=[],!o.validate(e,f,v,y)){var b=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw b.errors=y,b}return t=n.util.createBuffer(v.privateKeyModulus).toHex(),r=n.util.createBuffer(v.privateKeyPublicExponent).toHex(),i=n.util.createBuffer(v.privateKeyPrivateExponent).toHex(),s=n.util.createBuffer(v.privateKeyPrime1).toHex(),c=n.util.createBuffer(v.privateKeyPrime2).toHex(),h=n.util.createBuffer(v.privateKeyExponent1).toHex(),p=n.util.createBuffer(v.privateKeyExponent2).toHex(),d=n.util.createBuffer(v.privateKeyCoefficient).toHex(),u.setRsaPrivateKey(new a(t,16),new a(r,16),new a(i,16),new a(s,16),new a(c,16),new a(h,16),new a(p,16),new a(d,16))},u.privateKeyToAsn1=u.privateKeyToRSAPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(e.e)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(e.d)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(e.p)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(e.q)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(e.dP)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(e.dQ)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(e.qInv))])},u.publicKeyFromAsn1=function(e){var t={},r=[];if(o.validate(e,p,t,r)){var i,s=o.derToOid(t.publicKeyOid);if(s!==u.oids.rsaEncryption)throw(i=new Error("Cannot read public key. Unknown OID.")).oid=s,i;e=t.rsaPublicKey}if(r=[],!o.validate(e,h,t,r))throw(i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,i;var c=n.util.createBuffer(t.publicKeyModulus).toHex(),l=n.util.createBuffer(t.publicKeyExponent).toHex();return u.setRsaPublicKey(new a(c,16),new a(l,16))},u.publicKeyToAsn1=u.publicKeyToSubjectPublicKeyInfo=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(u.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,[u.publicKeyToRSAPublicKey(e)])])},u.publicKeyToRSAPublicKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,w(e.e))])}},482:function(e,t,r){var n=r(1223);r(6829),r(9960);var a=e.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=a,a.create=function(){o||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),o=!0);var e=null,t=n.util.createBuffer(),r=new Array(80),a={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var r=a.messageLengthSize/4,i=0;i<r;++i)a.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},a}};return a.start(),a.update=function(i,o){"utf8"===o&&(i=n.util.encodeUtf8(i));var u=i.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var c=a.fullMessageLength.length-1;c>=0;--c)a.fullMessageLength[c]+=u[1],u[1]=u[0]+(a.fullMessageLength[c]/4294967296>>>0),a.fullMessageLength[c]=a.fullMessageLength[c]>>>0,u[0]=u[1]/4294967296>>>0;return t.putBytes(i),s(e,r,t),(t.read>2048||0===t.length())&&t.compact(),a},a.digest=function(){var o=n.util.createBuffer();o.putBytes(t.bytes());var u,c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;o.putBytes(i.substr(0,a.blockLength-c));for(var l=8*a.fullMessageLength[0],f=0;f<a.fullMessageLength.length-1;++f)l+=(u=8*a.fullMessageLength[f+1])/4294967296>>>0,o.putInt32(l>>>0),l=u>>>0;o.putInt32(l);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};s(h,r,o);var p=n.util.createBuffer();return p.putInt32(h.h0),p.putInt32(h.h1),p.putInt32(h.h2),p.putInt32(h.h3),p.putInt32(h.h4),p},a};var i=null,o=!1;function s(e,t,r){for(var n,a,i,o,s,u,c,l=r.length();l>=64;){for(a=e.h0,i=e.h1,o=e.h2,s=e.h3,u=e.h4,c=0;c<16;++c)n=r.getInt32(),t[c]=n,n=(a<<5|a>>>27)+(s^i&(o^s))+u+1518500249+n,u=s,s=o,o=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<20;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(a<<5|a>>>27)+(s^i&(o^s))+u+1518500249+n,u=s,s=o,o=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<32;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(a<<5|a>>>27)+(i^o^s)+u+1859775393+n,u=s,s=o,o=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<40;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(a<<5|a>>>27)+(i^o^s)+u+1859775393+n,u=s,s=o,o=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<60;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(a<<5|a>>>27)+(i&o|s&(i^o))+u+2400959708+n,u=s,s=o,o=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<80;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(a<<5|a>>>27)+(i^o^s)+u+3395469782+n,u=s,s=o,o=(i<<30|i>>>2)>>>0,i=a,a=n;e.h0=e.h0+a|0,e.h1=e.h1+i|0,e.h2=e.h2+o|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,l-=64}}},6487:function(e,t,r){var n=r(1223);r(6829),r(9960);var a=e.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=a,a.create=function(){o||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0);var e=null,t=n.util.createBuffer(),r=new Array(64),a={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var r=a.messageLengthSize/4,i=0;i<r;++i)a.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},a}};return a.start(),a.update=function(i,o){"utf8"===o&&(i=n.util.encodeUtf8(i));var s=i.length;a.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var c=a.fullMessageLength.length-1;c>=0;--c)a.fullMessageLength[c]+=s[1],s[1]=s[0]+(a.fullMessageLength[c]/4294967296>>>0),a.fullMessageLength[c]=a.fullMessageLength[c]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),u(e,r,t),(t.read>2048||0===t.length())&&t.compact(),a},a.digest=function(){var o=n.util.createBuffer();o.putBytes(t.bytes());var s,c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;o.putBytes(i.substr(0,a.blockLength-c));for(var l=8*a.fullMessageLength[0],f=0;f<a.fullMessageLength.length-1;++f)l+=(s=8*a.fullMessageLength[f+1])/4294967296>>>0,o.putInt32(l>>>0),l=s>>>0;o.putInt32(l);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};u(h,r,o);var p=n.util.createBuffer();return p.putInt32(h.h0),p.putInt32(h.h1),p.putInt32(h.h2),p.putInt32(h.h3),p.putInt32(h.h4),p.putInt32(h.h5),p.putInt32(h.h6),p.putInt32(h.h7),p},a};var i=null,o=!1,s=null;function u(e,t,r){for(var n,a,i,o,u,c,l,f,h,p,d,v,y,b=r.length();b>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=((n=t[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,a=((a=t[u-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,t[u]=n+t[u-7]+a+t[u-16]|0;for(c=e.h0,l=e.h1,f=e.h2,h=e.h3,p=e.h4,d=e.h5,v=e.h6,y=e.h7,u=0;u<64;++u)i=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),o=c&l|f&(c^l),n=y+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(v^p&(d^v))+s[u]+t[u],y=v,v=d,d=p,p=h+n>>>0,h=f,f=l,l=c,c=n+(a=i+o)>>>0;e.h0=e.h0+c|0,e.h1=e.h1+l|0,e.h2=e.h2+f|0,e.h3=e.h3+h|0,e.h4=e.h4+p|0,e.h5=e.h5+d|0,e.h6=e.h6+v|0,e.h7=e.h7+y|0,b-=64}}},431:function(e,t,r){var n=r(1223);r(6829),r(9960);var a=e.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=a;var i=n.sha384=n.sha512.sha384=n.sha512.sha384||{};i.create=function(){return a.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=i,n.sha512.sha256=n.sha512.sha256||{create:function(){return a.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return a.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,a.create=function(e){if(s||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(c={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],c["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],c["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],c["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],s=!0),"undefined"===typeof e&&(e="SHA-512"),!(e in c))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=c[e],r=null,a=n.util.createBuffer(),i=new Array(80),f=0;f<80;++f)i[f]=new Array(2);var h=64;switch(e){case"SHA-384":h=48;break;case"SHA-512/256":h=32;break;case"SHA-512/224":h=28}var p={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:h,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){p.messageLength=0,p.fullMessageLength=p.messageLength128=[];for(var e=p.messageLengthSize/4,i=0;i<e;++i)p.fullMessageLength.push(0);a=n.util.createBuffer(),r=new Array(t.length);for(i=0;i<t.length;++i)r[i]=t[i].slice(0);return p}};return p.start(),p.update=function(e,t){"utf8"===t&&(e=n.util.encodeUtf8(e));var o=e.length;p.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var s=p.fullMessageLength.length-1;s>=0;--s)p.fullMessageLength[s]+=o[1],o[1]=o[0]+(p.fullMessageLength[s]/4294967296>>>0),p.fullMessageLength[s]=p.fullMessageLength[s]>>>0,o[0]=o[1]/4294967296>>>0;return a.putBytes(e),l(r,i,a),(a.read>2048||0===a.length())&&a.compact(),p},p.digest=function(){var t=n.util.createBuffer();t.putBytes(a.bytes());var s,u=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize&p.blockLength-1;t.putBytes(o.substr(0,p.blockLength-u));for(var c=8*p.fullMessageLength[0],f=0;f<p.fullMessageLength.length-1;++f)c+=(s=8*p.fullMessageLength[f+1])/4294967296>>>0,t.putInt32(c>>>0),c=s>>>0;t.putInt32(c);var h=new Array(r.length);for(f=0;f<r.length;++f)h[f]=r[f].slice(0);l(h,i,t);var d,v=n.util.createBuffer();d="SHA-512"===e?h.length:"SHA-384"===e?h.length-2:h.length-4;for(f=0;f<d;++f)v.putInt32(h[f][0]),f===d-1&&"SHA-512/224"===e||v.putInt32(h[f][1]);return v},p};var o=null,s=!1,u=null,c=null;function l(e,t,r){for(var n,a,i,o,s,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S,A,C,I,T,D,R,P,N,L,O,B,U=r.length();U>=128;){for(D=0;D<16;++D)t[D][0]=r.getInt32()>>>0,t[D][1]=r.getInt32()>>>0;for(;D<80;++D)n=(((R=(N=t[D-2])[0])>>>19|(P=N[1])<<13)^(P>>>29|R<<3)^R>>>6)>>>0,a=((R<<13|P>>>19)^(P<<3|R>>>29)^(R<<26|P>>>6))>>>0,i=(((R=(O=t[D-15])[0])>>>1|(P=O[1])<<31)^(R>>>8|P<<24)^R>>>7)>>>0,o=((R<<31|P>>>1)^(R<<24|P>>>8)^(R<<25|P>>>7))>>>0,L=t[D-7],B=t[D-16],P=a+L[1]+o+B[1],t[D][0]=n+L[0]+i+B[0]+(P/4294967296>>>0)>>>0,t[D][1]=P>>>0;for(d=e[0][0],v=e[0][1],y=e[1][0],b=e[1][1],g=e[2][0],m=e[2][1],w=e[3][0],k=e[3][1],x=e[4][0],_=e[4][1],E=e[5][0],S=e[5][1],A=e[6][0],C=e[6][1],I=e[7][0],T=e[7][1],D=0;D<80;++D)l=((x>>>14|_<<18)^(x>>>18|_<<14)^(_>>>9|x<<23))>>>0,f=(A^x&(E^A))>>>0,s=((d>>>28|v<<4)^(v>>>2|d<<30)^(v>>>7|d<<25))>>>0,c=((d<<4|v>>>28)^(v<<30|d>>>2)^(v<<25|d>>>7))>>>0,h=(d&y|g&(d^y))>>>0,p=(v&b|m&(v^b))>>>0,P=T+(((x<<18|_>>>14)^(x<<14|_>>>18)^(_<<23|x>>>9))>>>0)+((C^_&(S^C))>>>0)+u[D][1]+t[D][1],n=I+l+f+u[D][0]+t[D][0]+(P/4294967296>>>0)>>>0,a=P>>>0,i=s+h+((P=c+p)/4294967296>>>0)>>>0,o=P>>>0,I=A,T=C,A=E,C=S,E=x,S=_,x=w+n+((P=k+a)/4294967296>>>0)>>>0,_=P>>>0,w=g,k=m,g=y,m=b,y=d,b=v,d=n+i+((P=a+o)/4294967296>>>0)>>>0,v=P>>>0;P=e[0][1]+v,e[0][0]=e[0][0]+d+(P/4294967296>>>0)>>>0,e[0][1]=P>>>0,P=e[1][1]+b,e[1][0]=e[1][0]+y+(P/4294967296>>>0)>>>0,e[1][1]=P>>>0,P=e[2][1]+m,e[2][0]=e[2][0]+g+(P/4294967296>>>0)>>>0,e[2][1]=P>>>0,P=e[3][1]+k,e[3][0]=e[3][0]+w+(P/4294967296>>>0)>>>0,e[3][1]=P>>>0,P=e[4][1]+_,e[4][0]=e[4][0]+x+(P/4294967296>>>0)>>>0,e[4][1]=P>>>0,P=e[5][1]+S,e[5][0]=e[5][0]+E+(P/4294967296>>>0)>>>0,e[5][1]=P>>>0,P=e[6][1]+C,e[6][0]=e[6][0]+A+(P/4294967296>>>0)>>>0,e[6][1]=P>>>0,P=e[7][1]+T,e[7][0]=e[7][0]+I+(P/4294967296>>>0)>>>0,e[7][1]=P>>>0,U-=128}}},9960:function(e,t,r){var n=r(1223),a=r(285),i=e.exports=n.util=n.util||{};function o(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function s(e){if(this.data="",this.read=0,"string"===typeof e)this.data=e;else if(i.isArrayBuffer(e)||i.isArrayBufferView(e))if("undefined"!==typeof Buffer&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof s||"object"===typeof e&&"string"===typeof e.data&&"number"===typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("undefined"!==typeof process&&process.nextTick&&!process.browser)return i.nextTick=process.nextTick,void("function"===typeof setImmediate?i.setImmediate=setImmediate:i.setImmediate=i.nextTick);if("function"===typeof setImmediate)return i.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(i.nextTick=function(e){return setImmediate(e)});if(i.setImmediate=function(e){setTimeout(e,0)},"undefined"!==typeof window&&"function"===typeof window.postMessage){var e="forge.setImmediate",t=[];i.setImmediate=function(r){t.push(r),1===t.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(r){if(r.source===window&&r.data===e){r.stopPropagation();var n=t.slice();t.length=0,n.forEach((function(e){e()}))}}),!0)}if("undefined"!==typeof MutationObserver){var r=Date.now(),n=!0,a=document.createElement("div");t=[];new MutationObserver((function(){var e=t.slice();t.length=0,e.forEach((function(e){e()}))})).observe(a,{attributes:!0});var o=i.setImmediate;i.setImmediate=function(e){Date.now()-r>15?(r=Date.now(),o(e)):(t.push(e),1===t.length&&a.setAttribute("a",n=!n))}}i.nextTick=i.setImmediate}(),i.isNodejs="undefined"!==typeof process&&process.versions&&process.versions.node,i.globalScope=i.isNodejs?r.g:"undefined"===typeof self?window:self,i.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i.isArrayBuffer=function(e){return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer},i.isArrayBufferView=function(e){return e&&i.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},i.ByteBuffer=s,i.ByteStringBuffer=s;i.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},i.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},i.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},i.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(i.encodeUtf8(e))},i.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},i.ByteStringBuffer.prototype.putInt=function(e,t){o(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},i.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},i.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},i.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},i.ByteStringBuffer.prototype.getInt=function(e){o(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},i.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},i.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},i.ByteStringBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},i.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var e=i.createBuffer(this.data);return e.read=this.read,e},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=i.isArrayBuffer(e),n=i.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&void 0!==e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},i.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},i.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},i.DataBuffer.prototype.putBytes=function(e,t){if(i.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(i.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof i.DataBuffer||"object"===typeof e&&"number"===typeof e.read&&"number"===typeof e.write&&i.isArrayBufferView(e.data)){n=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this}if(e instanceof i.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"===typeof e){var a;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(e,a,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(e,a,this.write),this;if("utf8"===t&&(e=i.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(a),this;if("utf16"===t)return this.accommodate(2*e.length),a=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},i.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},i.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},i.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(e,t){o(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},i.DataBuffer.prototype.putSignedInt=function(e,t){return o(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},i.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},i.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},i.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},i.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},i.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},i.DataBuffer.prototype.getInt=function(e){o(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},i.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},i.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},i.DataBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},i.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},i.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return i.binary.raw.encode(t);if("hex"===e)return i.binary.hex.encode(t);if("base64"===e)return i.binary.base64.encode(t);if("utf8"===e)return i.text.utf8.decode(t);if("utf16"===e)return i.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},i.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=i.encodeUtf8(e)),new i.ByteBuffer(e)},i.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},i.xorBytes=function(e,t,r){for(var n="",a="",i="",o=0,s=0;r>0;--r,++o)a=e.charCodeAt(o)^t.charCodeAt(o),s>=10&&(n+=i,i="",s=0),i+=String.fromCharCode(a),++s;return n+=i},i.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},i.bytesToHex=function(e){return i.createBuffer(e).toHex()},i.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],l="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";i.encode64=function(e,t){for(var r,n,a,i="",o="",s=0;s<e.length;)r=e.charCodeAt(s++),n=e.charCodeAt(s++),a=e.charCodeAt(s++),i+=u.charAt(r>>2),i+=u.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=u.charAt((15&n)<<2|a>>6),i+=isNaN(a)?"=":u.charAt(63&a)),t&&i.length>t&&(o+=i.substr(0,t)+"\r\n",i=i.substr(t));return o+=i},i.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,a,i="",o=0;o<e.length;)t=c[e.charCodeAt(o++)-43],r=c[e.charCodeAt(o++)-43],n=c[e.charCodeAt(o++)-43],a=c[e.charCodeAt(o++)-43],i+=String.fromCharCode(t<<2|r>>4),64!==n&&(i+=String.fromCharCode((15&r)<<4|n>>2),64!==a&&(i+=String.fromCharCode((3&n)<<6|a)));return i},i.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},i.decodeUtf8=function(e){return decodeURIComponent(escape(e))},i.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:a.encode,decode:a.decode}},i.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},i.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var a=r=r||0,i=0;i<e.length;++i)n[a++]=e.charCodeAt(i);return t?a-r:n},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var a=0,i=r=r||0;for(1&e.length&&(a=1,n[i++]=parseInt(e[0],16));a<e.length;a+=2)n[i++]=parseInt(e.substr(a,2),16);return t?i-r:n},i.binary.base64.encode=function(e,t){for(var r,n,a,i="",o="",s=0;s<e.byteLength;)r=e[s++],n=e[s++],a=e[s++],i+=u.charAt(r>>2),i+=u.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=u.charAt((15&n)<<2|a>>6),i+=isNaN(a)?"=":u.charAt(63&a)),t&&i.length>t&&(o+=i.substr(0,t)+"\r\n",i=i.substr(t));return o+=i},i.binary.base64.decode=function(e,t,r){var n,a,i,o,s=t;s||(s=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,l=r=r||0;u<e.length;)n=c[e.charCodeAt(u++)-43],a=c[e.charCodeAt(u++)-43],i=c[e.charCodeAt(u++)-43],o=c[e.charCodeAt(u++)-43],s[l++]=n<<2|a>>4,64!==i&&(s[l++]=(15&a)<<4|i>>2,64!==o&&(s[l++]=(3&i)<<6|o));return t?l-r:s.subarray(0,l)},i.binary.base58.encode=function(e,t){return i.binary.baseN.encode(e,l,t)},i.binary.base58.decode=function(e,t){return i.binary.baseN.decode(e,l,t)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(e,t,r){e=i.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length));for(var a=r=r||0,o=0;o<e.length;++o)n[a++]=e.charCodeAt(o);return t?a-r:n},i.text.utf8.decode=function(e){return i.decodeUtf8(String.fromCharCode.apply(null,e))},i.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var a=new Uint16Array(n.buffer),i=r=r||0,o=r,s=0;s<e.length;++s)a[o++]=e.charCodeAt(s),i+=2;return t?i-r:n},i.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},i.deflate=function(e,t,r){if(t=i.decode64(e.deflate(i.encode64(t)).rval),r){var n=2;32&t.charCodeAt(1)&&(n=6),t=t.substring(n,t.length-4)}return t},i.inflate=function(e,t,r){var n=e.inflate(i.encode64(t)).rval;return null===n?null:i.decode64(n)};var f=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(null===r?n=e.removeItem(t):(r=i.encode64(JSON.stringify(r)),n=e.setItem(t,r)),"undefined"!==typeof n&&!0!==n.rval){var a=new Error(n.error.message);throw a.id=n.error.id,a.name=n.error.name,a}},h=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(i.decode64(r))),r},p=function(e,t,r,n){var a=h(e,t);null===a&&(a={}),a[r]=n,f(e,t,a)},d=function(e,t,r){var n=h(e,t);return null!==n&&(n=r in n?n[r]:null),n},v=function(e,t,r){var n=h(e,t);if(null!==n&&r in n){delete n[r];var a=!0;for(var i in n){a=!1;break}a&&(n=null),f(e,t,n)}},y=function(e,t){f(e,t,null)},b=function(e,t,r){var n,a=null;"undefined"===typeof r&&(r=["web","flash"]);var i=!1,o=null;for(var s in r){n=r[s];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");a=e.apply(this,t),i="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,a=e.apply(this,t),i=!0)}catch(u){o=u}if(i)break}if(!i)throw o;return a};i.setItem=function(e,t,r,n,a){b(p,arguments,a)},i.getItem=function(e,t,r,n){return b(d,arguments,n)},i.removeItem=function(e,t,r,n){b(v,arguments,n)},i.clearItems=function(e,t,r){b(y,arguments,r)},i.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},i.format=function(e){for(var t,r,n=/%./g,a=0,i=[],o=0;t=n.exec(e);){(r=e.substring(o,n.lastIndex-2)).length>0&&i.push(r),o=n.lastIndex;var s=t[0][1];switch(s){case"s":case"o":a<arguments.length?i.push(arguments[1+a++]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+s+"?>")}}return i.push(e.substring(o)),i.join("")},i.formatNumber=function(e,t,r,n){var a=e,i=isNaN(t=Math.abs(t))?2:t,o=void 0===r?",":r,s=void 0===n?".":n,u=a<0?"-":"",c=parseInt(a=Math.abs(+a||0).toFixed(i),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+s:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(i?o+Math.abs(a-c).toFixed(i).slice(2):"")},i.formatSize=function(e){return e=e>=1073741824?i.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?i.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?i.formatNumber(e/1024,0)+" KiB":i.formatNumber(e,0)+" bytes"},i.bytesFromIP=function(e){return-1!==e.indexOf(".")?i.bytesFromIPv4(e):-1!==e.indexOf(":")?i.bytesFromIPv6(e):null},i.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=i.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},i.bytesFromIPv6=function(e){for(var t=0,r=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++t,!0}))).length+t),n=i.createBuffer(),a=0;a<8;++a)if(e[a]&&0!==e[a].length){var o=i.hexToBytes(e[a]);o.length<2&&n.putByte(0),n.putBytes(o)}else n.fillWithByte(0,r),r=0;return n.getBytes()},i.bytesToIP=function(e){return 4===e.length?i.bytesToIPv4(e):16===e.length?i.bytesToIPv6(e):null},i.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},i.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],n=0,a=0;a<e.length;a+=2){for(var o=i.bytesToHex(e[a]+e[a+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var s=r[r.length-1],u=t.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}t.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),0===c.start&&t.unshift(""),7===c.end&&t.push(""))}return t.join(":")},i.estimateCores=function(e,t){if("function"===typeof e&&(t=e,e={}),e=e||{},"cores"in i&&!e.update)return t(null,i.cores);if("undefined"!==typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,t(null,i.cores);if("undefined"===typeof Worker)return i.cores=1,t(null,i.cores);if("undefined"===typeof Blob)return i.cores=2,t(null,i.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function e(n,a,o){if(0===a){var s=Math.floor(n.reduce((function(e,t){return e+t}),0)/n.length);return i.cores=Math.max(1,s),URL.revokeObjectURL(r),t(null,i.cores)}!function(e,t){for(var n=[],a=[],i=0;i<e;++i){var o=new Worker(r);o.addEventListener("message",(function(r){if(a.push(r.data),a.length===e){for(var i=0;i<e;++i)n[i].terminate();t(null,a)}})),n.push(o)}for(i=0;i<e;++i)n[i].postMessage(i)}(o,(function(t,r){n.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var a=t[n],i=r[n]=[],o=0;o<e;++o)if(n!==o){var s=t[o];(a.st>s.st&&a.st<s.et||s.st>a.st&&s.st<a.et)&&i.push(o)}return r.reduce((function(e,t){return Math.max(e,t.length)}),0)}(o,r)),e(n,a-1,o)}))}([],5,16)}},4348:function(e,t,r){var n=r(1223);r(3835),r(9978),r(4638),r(6829),r(2446),r(1746),r(1984),r(3313),r(7341),r(9960);var a=n.asn1,i=e.exports=n.pki=n.pki||{},o=i.oids,s={};s.CN=o.commonName,s.commonName="CN",s.C=o.countryName,s.countryName="C",s.L=o.localityName,s.localityName="L",s.ST=o.stateOrProvinceName,s.stateOrProvinceName="ST",s.O=o.organizationName,s.organizationName="O",s.OU=o.organizationalUnitName,s.organizationalUnitName="OU",s.E=o.emailAddress,s.emailAddress="E";var u=n.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:a.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:a.Class.UNIVERSAL,type:a.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:a.Class.UNIVERSAL,type:a.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:a.Class.UNIVERSAL,type:a.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:a.Class.UNIVERSAL,type:a.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},u,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:a.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:a.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:a.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:a.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:a.Class.UNIVERSAL,type:a.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:a.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:a.Class.UNIVERSAL,type:a.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},f={name:"CertificationRequestInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},u,{name:"CertificationRequestInfo.attributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0}]}]}]},h={name:"CertificationRequest",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[f,{name:"CertificationRequest.signatureAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:a.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function p(e,t){"string"===typeof t&&(t={shortName:t});for(var r,n=null,a=0;null===n&&a<e.attributes.length;++a)r=e.attributes[a],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}i.RDNAttributesAsArray=function(e,t){for(var r,n,i,u=[],c=0;c<e.value.length;++c){r=e.value[c];for(var l=0;l<r.value.length;++l)i={},n=r.value[l],i.type=a.derToOid(n.value[0].value),i.value=n.value[1].value,i.valueTagClass=n.value[1].type,i.type in o&&(i.name=o[i.type],i.name in s&&(i.shortName=s[i.name])),t&&(t.update(i.type),t.update(i.value)),u.push(i)}return u},i.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],u=a.derToOid(n.value[0].value),c=n.value[1].value,l=0;l<c.length;++l){var f={};if(f.type=u,f.value=c[l].value,f.valueTagClass=c[l].type,f.type in o&&(f.name=o[f.type],f.name in s&&(f.shortName=s[f.name])),f.type===o.extensionRequest){f.extensions=[];for(var h=0;h<f.value.length;++h)f.extensions.push(i.certificateExtensionFromAsn1(f.value[h]))}t.push(f)}return t};var d=function(e,t,r){var n={};if(e!==o["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:o.sha1},mgf:{algorithmOid:o.mgf1,hash:{algorithmOid:o.sha1}},saltLength:20});var i={},s=[];if(!a.validate(t,l,i,s)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=s,u}return void 0!==i.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=a.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=a.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=a.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(n.saltLength=i.saltLength.charCodeAt(0)),n},v=function(e){switch(o[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},y=function(e){var t,r=e.certificate;switch(r.signatureOid){case o.sha1WithRSAEncryption:case o.sha1WithRSASignature:break;case o["RSASSA-PSS"]:var a,i,s;if(void 0===(a=o[r.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[a])throw(s=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,s.name=a,s;if(void 0===(i=o[r.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[i])throw(s=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,s.name=i,s;if(i=n.mgf[i].create(n.md[a].create()),void 0===(a=o[r.signatureParameters.hash.algorithmOid])||void 0===n.md[a])throw(s=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,s.name=a,s;t=n.pss.create(n.md[a].create(),i,r.signatureParameters.saltLength)}return r.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function b(e){for(var t,r,i=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),o=e.attributes,s=0;s<o.length;++s){var u=(t=o[s]).value,c=a.Type.PRINTABLESTRING;"valueTagClass"in t&&(c=t.valueTagClass)===a.Type.UTF8&&(u=n.util.encodeUtf8(u)),r=a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.type).getBytes()),a.create(a.Class.UNIVERSAL,c,!1,u)])]),i.value.push(r)}return i}function g(e){for(var t,r=0;r<e.length;++r){if("undefined"===typeof(t=e[r]).name&&(t.type&&t.type in i.oids?t.name=i.oids[t.type]:t.shortName&&t.shortName in s&&(t.name=i.oids[s[t.shortName]])),"undefined"===typeof t.type){if(!t.name||!(t.name in i.oids))throw(u=new Error("Attribute type not specified.")).attribute=t,u;t.type=i.oids[t.name]}if("undefined"===typeof t.shortName&&t.name&&t.name in s&&(t.shortName=s[t.name]),t.type===o.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=a.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var n=0;n<t.extensions.length;++n)t.value.push(i.certificateExtensionToAsn1(m(t.extensions[n])))}var u;if("undefined"===typeof t.value)throw(u=new Error("Attribute value not specified.")).attribute=t,u}}function m(e,t){if(t=t||{},"undefined"===typeof e.name&&e.id&&e.id in i.oids&&(e.name=i.oids[e.id]),"undefined"===typeof e.id){if(!e.name||!(e.name in i.oids))throw(k=new Error("Extension ID not specified.")).extension=e,k;e.id=i.oids[e.name]}if("undefined"!==typeof e.value)return e;if("keyUsage"===e.name){var r=0,s=0,u=0;e.digitalSignature&&(s|=128,r=7),e.nonRepudiation&&(s|=64,r=6),e.keyEncipherment&&(s|=32,r=5),e.dataEncipherment&&(s|=16,r=4),e.keyAgreement&&(s|=8,r=3),e.keyCertSign&&(s|=4,r=2),e.cRLSign&&(s|=2,r=1),e.encipherOnly&&(s|=1,r=0),e.decipherOnly&&(u|=128,r=7);var c=String.fromCharCode(r);0!==u?c+=String.fromCharCode(s)+String.fromCharCode(u):0!==s&&(c+=String.fromCharCode(s)),e.value=a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,c)}else if("basicConstraints"===e.name)e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(a.create(a.Class.UNIVERSAL,a.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);var l=e.value.value;for(var f in e)!0===e[f]&&(f in o?l.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(o[f]).getBytes())):-1!==f.indexOf(".")&&l.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(f).getBytes())))}else if("nsCertType"===e.name){r=0,s=0;e.client&&(s|=128,r=7),e.server&&(s|=64,r=6),e.email&&(s|=32,r=5),e.objsign&&(s|=16,r=4),e.reserved&&(s|=8,r=3),e.sslCA&&(s|=4,r=2),e.emailCA&&(s|=2,r=1),e.objCA&&(s|=1,r=0);c=String.fromCharCode(r);0!==s&&(c+=String.fromCharCode(s)),e.value=a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,c)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);for(var h=0;h<e.altNames.length;++h){c=(g=e.altNames[h]).value;if(7===g.type&&g.ip){if(null===(c=n.util.bytesFromIP(g.ip)))throw(k=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,k}else 8===g.type&&(c=g.oid?a.oidToDer(a.oidToDer(g.oid)):a.oidToDer(c));e.value.value.push(a.create(a.Class.CONTEXT_SPECIFIC,g.type,!1,c))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=a.create(a.Class.UNIVERSAL,a.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){var p=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=p.toHex(),e.value=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,p.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);l=e.value.value;if(e.keyIdentifier){var d=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;l.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!1,d))}if(e.authorityCertIssuer){var v=[a.create(a.Class.CONTEXT_SPECIFIC,4,!0,[b(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])];l.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,v))}if(e.serialNumber){var y=n.util.hexToBytes(!0===e.serialNumber?t.cert.serialNumber:e.serialNumber);l.push(a.create(a.Class.CONTEXT_SPECIFIC,2,!1,y))}}else if("cRLDistributionPoints"===e.name){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);l=e.value.value;var g,m=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),w=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[]);for(h=0;h<e.altNames.length;++h){c=(g=e.altNames[h]).value;if(7===g.type&&g.ip){if(null===(c=n.util.bytesFromIP(g.ip)))throw(k=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,k}else 8===g.type&&(c=g.oid?a.oidToDer(a.oidToDer(g.oid)):a.oidToDer(c));w.value.push(a.create(a.Class.CONTEXT_SPECIFIC,g.type,!1,c))}m.value.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[w])),l.push(m)}var k;if("undefined"===typeof e.value)throw(k=new Error("Extension value not specified.")).extension=e,k;return e}function w(e,t){if(e===o["RSASSA-PSS"]){var r=[];return void 0!==t.hash.algorithmOid&&r.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.hash.algorithmOid).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&r.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.mgf.algorithmOid).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.mgf.hash.algorithmOid).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&r.push(a.create(a.Class.CONTEXT_SPECIFIC,2,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(t.saltLength).getBytes())])),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,r)}return a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")}function k(e){var t=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,i=0;i<r.length;++i){var o=r[i],s=o.value,u=a.Type.UTF8;"valueTagClass"in o&&(u=o.valueTagClass),u===a.Type.UTF8&&(s=n.util.encodeUtf8(s));var c=!1;"valueConstructed"in o&&(c=o.valueConstructed);var l=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(o.type).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[a.create(a.Class.UNIVERSAL,u,c,s)])]);t.value.push(l)}return t}i.certificateFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var s=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw s.headerType=o.type,s}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=a.fromDer(o.body,r);return i.certificateFromAsn1(u,t)},i.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:a.toDer(i.certificateToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.publicKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=a.fromDer(t.body);return i.publicKeyFromAsn1(o)},i.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:a.toDer(i.publicKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:a.toDer(i.publicKeyToRSAPublicKey(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.getPublicKeyFingerprint=function(e,t){var r,o=(t=t||{}).md||n.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":r=a.toDer(i.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=a.toDer(i.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}o.start(),o.update(r);var s=o.digest();if("hex"===t.encoding){var u=s.toHex();return t.delimiter?u.match(/.{2}/g).join(t.delimiter):u}if("binary"===t.encoding)return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return s},i.certificationRequestFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==o.type){var s=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw s.headerType=o.type,s}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var u=a.fromDer(o.body,r);return i.certificationRequestFromAsn1(u,t)},i.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:a.toDer(i.certificationRequestToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return p(e.issuer,t)},e.issuer.addField=function(t){g([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return p(e.subject,t)},e.subject.addField=function(t){g([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){g(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){g(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)m(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"===typeof t&&(t={name:t});for(var r,n=null,a=0;null===n&&a<e.extensions.length;++a)r=e.extensions[a],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,r){e.md=r||n.md.sha1.create();var s=o[e.md.algorithm+"WithRSAEncryption"];if(!s){var u=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw u.algorithm=e.md.algorithm,u}e.signatureOid=e.siginfo.algorithmOid=s,e.tbsCertificate=i.getTBSCertificate(e);var c=a.toDer(e.tbsCertificate);e.md.update(c.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,o=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=o.attributes,s.actualIssuer=n.attributes,s}var u=t.md;if(null===u){u=v({signatureOid:t.signatureOid,type:"certificate"});var c=t.tbsCertificate||i.getTBSCertificate(t),l=a.toDer(c);u.update(l.getBytes())}return null!==u&&(r=y({certificate:e,md:u,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,a=t.subject;if(n.hash&&a.hash)r=n.hash===a.hash;else if(n.attributes.length===a.attributes.length){var i,o;r=!0;for(var s=0;r&&s<n.attributes.length;++s)i=n.attributes[s],o=a.attributes[s],i.type===o.type&&i.value===o.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return i.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=o.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var a=e.extensions[r];if(a.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(a.subjectKeyIdentifier)===i}}return!1},e},i.certificateFromAsn1=function(e,t){var r={},o=[];if(!a.validate(e,c,r,o)){var s=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw s.errors=o,s}if(a.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificate();u.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=n.util.createBuffer(r.certSerialNumber);u.serialNumber=l.toHex(),u.signatureOid=n.asn1.derToOid(r.certSignatureOid),u.signatureParameters=d(u.signatureOid,r.certSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.certinfoSignatureParams,!1),u.signature=r.certSignature;var f=[];if(void 0!==r.certValidity1UTCTime&&f.push(a.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&f.push(a.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&f.push(a.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&f.push(a.generalizedTimeToDate(r.certValidity4GeneralizedTime)),f.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(f.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=f[0],u.validity.notAfter=f[1],u.tbsCertificate=r.tbsCertificate,t){u.md=v({signatureOid:u.signatureOid,type:"certificate"});var h=a.toDer(u.tbsCertificate);u.md.update(h.getBytes())}var y=n.md.sha1.create(),b=a.toDer(r.certIssuer);y.update(b.getBytes()),u.issuer.getField=function(e){return p(u.issuer,e)},u.issuer.addField=function(e){g([e]),u.issuer.attributes.push(e)},u.issuer.attributes=i.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(u.issuer.uniqueId=r.certIssuerUniqueId),u.issuer.hash=y.digest().toHex();var m=n.md.sha1.create(),w=a.toDer(r.certSubject);return m.update(w.getBytes()),u.subject.getField=function(e){return p(u.subject,e)},u.subject.addField=function(e){g([e]),u.subject.attributes.push(e)},u.subject.attributes=i.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(u.subject.uniqueId=r.certSubjectUniqueId),u.subject.hash=m.digest().toHex(),r.certExtensions?u.extensions=i.certificateExtensionsFromAsn1(r.certExtensions):u.extensions=[],u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u},i.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],a=0;a<n.value.length;++a)t.push(i.certificateExtensionFromAsn1(n.value[a]));return t},i.certificateExtensionFromAsn1=function(e){var t={};if(t.id=a.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===a.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in o)if(t.name=o[t.id],"keyUsage"===t.name){var r=0,i=0;(u=a.fromDer(t.value)).value.length>1&&(r=u.value.charCodeAt(1),i=u.value.length>2?u.value.charCodeAt(2):0),t.digitalSignature=128===(128&r),t.nonRepudiation=64===(64&r),t.keyEncipherment=32===(32&r),t.dataEncipherment=16===(16&r),t.keyAgreement=8===(8&r),t.keyCertSign=4===(4&r),t.cRLSign=2===(2&r),t.encipherOnly=1===(1&r),t.decipherOnly=128===(128&i)}else if("basicConstraints"===t.name){(u=a.fromDer(t.value)).value.length>0&&u.value[0].type===a.Type.BOOLEAN?t.cA=0!==u.value[0].value.charCodeAt(0):t.cA=!1;var s=null;u.value.length>0&&u.value[0].type===a.Type.INTEGER?s=u.value[0].value:u.value.length>1&&(s=u.value[1].value),null!==s&&(t.pathLenConstraint=a.derToInteger(s))}else if("extKeyUsage"===t.name)for(var u=a.fromDer(t.value),c=0;c<u.value.length;++c){var l=a.derToOid(u.value[c].value);l in o?t[o[l]]=!0:t[l]=!0}else if("nsCertType"===t.name){r=0;(u=a.fromDer(t.value)).value.length>1&&(r=u.value.charCodeAt(1)),t.client=128===(128&r),t.server=64===(64&r),t.email=32===(32&r),t.objsign=16===(16&r),t.reserved=8===(8&r),t.sslCA=4===(4&r),t.emailCA=2===(2&r),t.objCA=1===(1&r)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){var f;t.altNames=[];u=a.fromDer(t.value);for(var h=0;h<u.value.length;++h){var p={type:(f=u.value[h]).type,value:f.value};switch(t.altNames.push(p),f.type){case 1:case 2:case 6:break;case 7:p.ip=n.util.bytesToIP(f.value);break;case 8:p.oid=a.derToOid(f.value)}}}else if("subjectKeyIdentifier"===t.name){u=a.fromDer(t.value);t.subjectKeyIdentifier=n.util.bytesToHex(u.value)}return t},i.certificationRequestFromAsn1=function(e,t){var r={},o=[];if(!a.validate(e,h,r,o)){var s=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw s.errors=o,s}if(a.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificationRequest();if(u.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,u.signatureOid=n.asn1.derToOid(r.csrSignatureOid),u.signatureParameters=d(u.signatureOid,r.csrSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.csrSignatureParams,!1),u.signature=r.csrSignature,u.certificationRequestInfo=r.certificationRequestInfo,t){u.md=v({signatureOid:u.signatureOid,type:"certification request"});var c=a.toDer(u.certificationRequestInfo);u.md.update(c.getBytes())}var l=n.md.sha1.create();return u.subject.getField=function(e){return p(u.subject,e)},u.subject.addField=function(e){g([e]),u.subject.attributes.push(e)},u.subject.attributes=i.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),u.subject.hash=l.digest().toHex(),u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u.getAttribute=function(e){return p(u,e)},u.addAttribute=function(e){g([e]),u.attributes.push(e)},u.attributes=i.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),u},i.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return p(e.subject,t)},e.subject.addField=function(t){g([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return p(e,t)},e.addAttribute=function(t){g([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){g(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){g(t),e.attributes=t},e.sign=function(t,r){e.md=r||n.md.sha1.create();var s=o[e.md.algorithm+"WithRSAEncryption"];if(!s){var u=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw u.algorithm=e.md.algorithm,u}e.signatureOid=e.siginfo.algorithmOid=s,e.certificationRequestInfo=i.getCertificationRequestInfo(e);var c=a.toDer(e.certificationRequestInfo);e.md.update(c.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(null===r){r=v({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||i.getCertificationRequestInfo(e),o=a.toDer(n);r.update(o.getBytes())}return null!==r&&(t=y({certificate:e,md:r,signature:e.signature})),t},e};var x=new Date("1950-01-01T00:00:00Z"),_=new Date("2050-01-01T00:00:00Z");function E(e){return e>=x&&e<_?a.create(a.Class.UNIVERSAL,a.Type.UTCTIME,!1,a.dateToUtcTime(e)):a.create(a.Class.UNIVERSAL,a.Type.GENERALIZEDTIME,!1,a.dateToGeneralizedTime(e))}i.getTBSCertificate=function(e){var t=E(e.validity.notBefore),r=E(e.validity.notAfter),o=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes())]),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber)),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.siginfo.algorithmOid).getBytes()),w(e.siginfo.algorithmOid,e.siginfo.parameters)]),b(e.issuer),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[t,r]),b(e.subject),i.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&o.value.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,[a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&o.value.push(a.create(a.Class.CONTEXT_SPECIFIC,2,!0,[a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&o.value.push(i.certificateExtensionsToAsn1(e.extensions)),o},i.getCertificationRequestInfo=function(e){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),b(e.subject),i.publicKeyToAsn1(e.publicKey),k(e)])},i.distinguishedNameToAsn1=function(e){return b(e)},i.certificateToAsn1=function(e){var t=e.tbsCertificate||i.getTBSCertificate(e);return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[t,a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.signatureOid).getBytes()),w(e.signatureOid,e.signatureParameters)]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},i.certificateExtensionsToAsn1=function(e){var t=a.create(a.Class.CONTEXT_SPECIFIC,3,!0,[]),r=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(i.certificateExtensionToAsn1(e[n]));return t},i.certificateExtensionToAsn1=function(e){var t=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);t.value.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.id).getBytes())),e.critical&&t.value.push(a.create(a.Class.UNIVERSAL,a.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!==typeof e.value&&(r=a.toDer(r).getBytes()),t.value.push(a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,r)),t},i.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||i.getCertificationRequestInfo(e);return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[t,a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.signatureOid).getBytes()),w(e.signatureOid,e.signatureParameters)]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},i.createCaStore=function(e){var t={certs:{}};function r(e){return o(e),t.certs[e.hash]||null}function o(e){if(!e.hash){var t=n.md.sha1.create();e.attributes=i.RDNAttributesAsArray(b(e),t),e.hash=t.digest().toHex()}}if(t.getIssuer=function(e){return r(e.issuer)},t.addCertificate=function(e){if("string"===typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))if(e.subject.hash in t.certs){var r=t.certs[e.subject.hash];n.util.isArray(r)||(r=[r]),r.push(e),t.certs[e.subject.hash]=r}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){"string"===typeof e&&(e=n.pki.certificateFromPem(e));var t=r(e.subject);if(!t)return!1;n.util.isArray(t)||(t=[t]);for(var o=a.toDer(i.certificateToAsn1(e)).getBytes(),s=0;s<t.length;++s){if(o===a.toDer(i.certificateToAsn1(t[s])).getBytes())return!0}return!1},t.listAllCertificates=function(){var e=[];for(var r in t.certs)if(t.certs.hasOwnProperty(r)){var a=t.certs[r];if(n.util.isArray(a))for(var i=0;i<a.length;++i)e.push(a[i]);else e.push(a)}return e},t.removeCertificate=function(e){var s;if("string"===typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))return null;var u=r(e.subject);if(!n.util.isArray(u))return s=t.certs[e.subject.hash],delete t.certs[e.subject.hash],s;for(var c=a.toDer(i.certificateToAsn1(e)).getBytes(),l=0;l<u.length;++l){c===a.toDer(i.certificateToAsn1(u[l])).getBytes()&&(s=u[l],u.splice(l,1))}return 0===u.length&&delete t.certs[e.subject.hash],s},e)for(var s=0;s<e.length;++s){var u=e[s];t.addCertificate(u)}return t},i.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},i.verifyCertificateChain=function(e,t,r){"function"===typeof r&&(r={verify:r}),r=r||{};var a=(t=t.slice(0)).slice(0),o=r.validityCheckDate;"undefined"===typeof o&&(o=new Date);var s=!0,u=null,c=0;do{var l=t.shift(),f=null,h=!1;if(o&&(o<l.validity.notBefore||o>l.validity.notAfter)&&(u={message:"Certificate is not valid yet or has expired.",error:i.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:o}),null===u){if(null===(f=t[0]||e.getIssuer(l))&&l.isIssuer(l)&&(h=!0,f=l),f){var p=f;n.util.isArray(p)||(p=[p]);for(var d=!1;!d&&p.length>0;){f=p.shift();try{d=f.verify(l)}catch(x){}}d||(u={message:"Certificate signature is invalid.",error:i.certificateError.bad_certificate})}null!==u||f&&!h||e.hasCertificate(l)||(u={message:"Certificate is not trusted.",error:i.certificateError.unknown_ca})}if(null===u&&f&&!l.isIssuer(f)&&(u={message:"Certificate issuer is invalid.",error:i.certificateError.bad_certificate}),null===u)for(var v={keyUsage:!0,basicConstraints:!0},y=0;null===u&&y<l.extensions.length;++y){var b=l.extensions[y];b.critical&&!(b.name in v)&&(u={message:"Certificate has an unsupported critical extension.",error:i.certificateError.unsupported_certificate})}if(null===u&&(!s||0===t.length&&(!f||h))){var g=l.getExtension("basicConstraints"),m=l.getExtension("keyUsage");if(null!==m&&(m.keyCertSign&&null!==g||(u={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:i.certificateError.bad_certificate})),null!==u||null===g||g.cA||(u={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:i.certificateError.bad_certificate}),null===u&&null!==m&&"pathLenConstraint"in g)c-1>g.pathLenConstraint&&(u={message:"Certificate basicConstraints pathLenConstraint violated.",error:i.certificateError.bad_certificate})}var w=null===u||u.error,k=r.verify?r.verify(w,c,a):w;if(!0!==k)throw!0===w&&(u={message:"The application rejected the certificate.",error:i.certificateError.bad_certificate}),(k||0===k)&&("object"!==typeof k||n.util.isArray(k)?"string"===typeof k&&(u.error=k):(k.message&&(u.message=k.message),k.error&&(u.error=k.error))),u;u=null,s=!1,++c}while(t.length>0);return!0}},4911:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(5041),o=r(1031);e.exports=function(){"use strict";function e(){n(this,e),this._buffer=new i,this._waitingConsumers=new i}return a(e,[{key:"push",value:function(e){var t=o(),r=t.promise,n=t.resolve;return this._buffer.push({chunk:e,resolve:n}),this._consume(),r}},{key:"_consume",value:function(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){var e=this._waitingConsumers.shift(),t=this._buffer.shift();e.resolve(t.chunk),t.resolve()}}},{key:"shift",value:function(){var e=o(),t=e.promise,r=e.resolve;return this._waitingConsumers.push({resolve:r}),this._consume(),t}},{key:"isEmpty",value:function(){return this._buffer.isEmpty()}}]),e}()},1031:function(e){"use strict";e.exports=function(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}},2092:function(e,t,r){"use strict";e.exports=r(3722)},3722:function(e,t,r){"use strict";var n=t;function a(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(8660),n.BufferWriter=r(7296),n.Reader=r(371),n.BufferReader=r(6553),n.util=r(2982),n.rpc=r(7244),n.roots=r(1362),n.configure=a,a()},371:function(e,t,r){"use strict";e.exports=u;var n,a=r(2982),i=a.LongBits,o=a.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}var c="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")},l=function(){return a.Buffer?function(e){return(u.create=function(e){return a.Buffer.isBuffer(e)?new n(e):c(e)})(e)}:c};function f(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw s(this,8);return new i(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}u.create=l(),u.prototype._slice=a.Array.prototype.subarray||a.Array.prototype.slice,u.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return e}}(),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return h(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|h(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=a.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=a.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},u.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},u.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){n=e,u.create=l(),n._configure();var t=a.Long?"toLong":"toNumber";a.merge(u.prototype,{int64:function(){return f.call(this)[t](!1)},uint64:function(){return f.call(this)[t](!0)},sint64:function(){return f.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},6553:function(e,t,r){"use strict";e.exports=i;var n=r(371);(i.prototype=Object.create(n.prototype)).constructor=i;var a=r(2982);function i(e){n.call(this,e)}i._configure=function(){a.Buffer&&(i.prototype._slice=a.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},1362:function(e){"use strict";e.exports={}},7244:function(e,t,r){"use strict";t.Service=r(3639)},3639:function(e,t,r){"use strict";e.exports=a;var n=r(2982);function a(e,t,r){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(a.prototype=Object.create(n.EventEmitter.prototype)).constructor=a,a.prototype.rpcCall=function e(t,r,a,i,o){if(!i)throw TypeError("request must be specified");var s=this;if(!o)return n.asPromise(e,s,t,r,a,i);if(s.rpcImpl)try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return s.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof a))try{r=a[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),o(e)}return s.emit("data",r,t),o(null,r)}s.end(!0)}))}catch(u){return s.emit("error",u,t),void setTimeout((function(){o(u)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},a.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},7844:function(e,t,r){"use strict";e.exports=a;var n=r(2982);function a(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=a.zero=new a(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=a.zeroHash="\0\0\0\0\0\0\0\0";a.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new a(r,n)},a.from=function(e){if("number"===typeof e)return a.fromNumber(e);if(n.isString(e)){if(!n.Long)return a.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new a(e.low>>>0,e.high>>>0):i},a.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},a.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;a.fromHash=function(e){return e===o?i:new a((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},a.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},a.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},a.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},a.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},2982:function(e,t,r){"use strict";var n=t;function a(e,t,r){for(var n=Object.keys(t),a=0;a<n.length;++a)void 0!==e[n[a]]&&r||(e[n[a]]=t[n[a]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&a(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(9284),n.base64=r(1964),n.EventEmitter=r(1542),n.float=r(4563),n.inquire=r(9168),n.utf8=r(970),n.pool=r(3133),n.LongBits=r(7844),n.isNode=Boolean("undefined"!==typeof r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"===typeof e||e instanceof String},n.isObject=function(e){return e&&"object"===typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"===typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=a,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},8660:function(e,t,r){"use strict";e.exports=f;var n,a=r(2982),i=a.LongBits,o=a.base64,s=a.utf8;function u(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function c(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function f(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var h=function(){return a.Buffer?function(){return(f.create=function(){return new n})()}:function(){return new f}};function p(e,t,r){t[r]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function v(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}f.create=h(),f.alloc=function(e){return new a.Array(e)},a.Array!==Array&&(f.alloc=a.pool(f.alloc,a.Array.prototype.subarray)),f.prototype._push=function(e,t,r){return this.tail=this.tail.next=new u(e,t,r),this.len+=t,this},d.prototype=Object.create(u.prototype),d.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},f.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},f.prototype.int32=function(e){return e<0?this._push(v,10,i.fromNumber(e)):this.uint32(e)},f.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},f.prototype.uint64=function(e){var t=i.from(e);return this._push(v,t.length(),t)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(v,t.length(),t)},f.prototype.bool=function(e){return this._push(p,1,e?1:0)},f.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(e){var t=i.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(e){return this._push(a.float.writeFloatLE,4,e)},f.prototype.double=function(e){return this._push(a.float.writeDoubleLE,8,e)};var b=a.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};f.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(a.isString(e)){var r=f.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(b,t,e)},f.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(p,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},f.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},f.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},f._configure=function(e){n=e,f.create=h(),n._configure()}},7296:function(e,t,r){"use strict";e.exports=i;var n=r(8660);(i.prototype=Object.create(n.prototype)).constructor=i;var a=r(2982);function i(){n.call(this)}function o(e,t,r){e.length<40?a.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=a._Buffer_allocUnsafe,i.writeBytesBuffer=a.Buffer&&a.Buffer.prototype instanceof Uint8Array&&"set"===a.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){a.isString(e)&&(e=a._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=a.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},i._configure()},8566:function(e,t,r){var n;e.exports="function"===typeof queueMicrotask?queueMicrotask.bind("undefined"!==typeof window?window:r.g):function(e){return(n||(n=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))}},8866:function(e,t,r){var n=r(402).instantiate;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return n(new Response(new Blob([t],{type:"application/wasm"})),e)}a.supported="undefined"!==typeof WebAssembly,e.exports=a},5953:function(e,t,r){var n=r(7061).default,a=r(7156).default,i=r(9660),o=r(8866),s=function(){var e=a(n().mark((function e(t,r,a,s,u){var c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return c=e.sent,e.abrupt("return",new i(c,t,r,a,s,u));case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}();e.exports={Rabin:i,create:s}},9660:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=function(){"use strict";function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8192,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32768,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:64,s=arguments.length>5?arguments[5]:void 0;n(this,e),this.bits=r,this.min=a,this.max=i,this.asModule=t,this.rabin=new t.Rabin(r,a,i,o,s),this.polynomial=s}return a(e,[{key:"fingerprint",value:function(e){var t=this.asModule,r=t.__retain,n=t.__release,a=t.__allocArray,i=t.__getInt32Array,o=t.Int32Array_ID,s=t.Uint8Array_ID,u=r(a(o,new Int32Array(Math.ceil(e.length/this.min)))),c=r(a(s,e)),l=i(this.rabin.fingerprint(c,u));n(c),n(u);var f=l.indexOf(0);return f>=0?l.subarray(0,f):l}}]),e}();e.exports=i},1346:function(e,t,r){"use strict";var n=65536,a=4294967295;var i=r(622).Buffer,o=r.g.crypto||r.g.msCrypto;o&&o.getRandomValues?e.exports=function(e,t){if(e>a)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(e);if(e>0)if(e>n)for(var s=0;s<e;s+=n)o.getRandomValues(r.slice(s,s+n));else o.getRandomValues(r);if("function"===typeof t)return process.nextTick((function(){t(null,r)}));return r}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},2679:function(e,t,r){var n=r(9471),a=r(6161),i=r(4122),o=r(522),s=r(7934),u=s.RateLimiterClusterMaster,c=s.RateLimiterClusterMasterPM2,l=s.RateLimiterCluster,f=r(5181),h=r(3453),p=r(6318),d=r(7062),v=r(1652),y=r(5829),b=r(6862);e.exports={RateLimiterRedis:n,RateLimiterMongo:a,RateLimiterMySQL:i,RateLimiterPostgres:o,RateLimiterMemory:f,RateLimiterMemcache:h,RateLimiterClusterMaster:u,RateLimiterClusterMasterPM2:c,RateLimiterCluster:l,RLWrapperBlackAndWhite:p,RateLimiterUnion:d,RateLimiterQueue:v,BurstyRateLimiter:y,RateLimiterRes:b}},5829:function(e,t,r){var n=r(7424).default,a=r(6690).default,i=r(9728).default,o=r(6862);e.exports=function(){"use strict";function e(t,r){a(this,e),this._rateLimiter=t,this._burstLimiter=r}return i(e,[{key:"_combineRes",value:function(e,t){return new o(e.remainingPoints,Math.min(e.msBeforeNext,t.msBeforeNext),e.consumedPoints,e.isFirstInDuration)}},{key:"consume",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._rateLimiter.consume(e,r,n).catch((function(a){return a instanceof o?t._burstLimiter.consume(e,r,n).then((function(e){return Promise.resolve(t._combineRes(a,e))})).catch((function(e){return e instanceof o?Promise.reject(t._combineRes(a,e)):Promise.reject(e)})):Promise.reject(a)}))}},{key:"get",value:function(e){var t=this;return Promise.all([this._rateLimiter.get(e),this._burstLimiter.get(e)]).then((function(e){var r=n(e,2),a=r[0],i=r[1];return t._combineRes(a,i)}))}},{key:"points",get:function(){return this._rateLimiter.points}}]),e}()},6318:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(6862);e.exports=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.limiter=t.limiter,this.blackList=t.blackList,this.whiteList=t.whiteList,this.isBlackListed=t.isBlackListed,this.isWhiteListed=t.isWhiteListed,this.runActionAnyway=t.runActionAnyway}return a(e,[{key:"limiter",get:function(){return this._limiter},set:function(e){if("undefined"===typeof e)throw new Error("limiter is not set");this._limiter=e}},{key:"runActionAnyway",get:function(){return this._runActionAnyway},set:function(e){this._runActionAnyway="undefined"!==typeof e&&e}},{key:"blackList",get:function(){return this._blackList},set:function(e){this._blackList=Array.isArray(e)?e:[]}},{key:"isBlackListed",get:function(){return this._isBlackListed},set:function(e){if("undefined"===typeof e&&(e=function(){return!1}),"function"!==typeof e)throw new Error("isBlackListed must be function");this._isBlackListed=e}},{key:"whiteList",get:function(){return this._whiteList},set:function(e){this._whiteList=Array.isArray(e)?e:[]}},{key:"isWhiteListed",get:function(){return this._isWhiteListed},set:function(e){if("undefined"===typeof e&&(e=function(){return!1}),"function"!==typeof e)throw new Error("isWhiteListed must be function");this._isWhiteListed=e}},{key:"isBlackListedSomewhere",value:function(e){return this.blackList.indexOf(e)>=0||this.isBlackListed(e)}},{key:"isWhiteListedSomewhere",value:function(e){return this.whiteList.indexOf(e)>=0||this.isWhiteListed(e)}},{key:"getBlackRes",value:function(){return new i(0,Number.MAX_SAFE_INTEGER,0,!1)}},{key:"getWhiteRes",value:function(){return new i(Number.MAX_SAFE_INTEGER,0,0,!1)}},{key:"rejectBlack",value:function(){return Promise.reject(this.getBlackRes())}},{key:"resolveBlack",value:function(){return Promise.resolve(this.getBlackRes())}},{key:"resolveWhite",value:function(){return Promise.resolve(this.getWhiteRes())}},{key:"consume",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.isWhiteListedSomewhere(e)?t=this.resolveWhite():this.isBlackListedSomewhere(e)&&(t=this.rejectBlack()),"undefined"===typeof t?this.limiter.consume(e,r):(this.runActionAnyway&&this.limiter.consume(e,r).catch((function(){})),t)}},{key:"block",value:function(e,t){var r;return this.isWhiteListedSomewhere(e)?r=this.resolveWhite():this.isBlackListedSomewhere(e)&&(r=this.resolveBlack()),"undefined"===typeof r?this.limiter.block(e,t):(this.runActionAnyway&&this.limiter.block(e,t).catch((function(){})),r)}},{key:"penalty",value:function(e,t){var r;return this.isWhiteListedSomewhere(e)?r=this.resolveWhite():this.isBlackListedSomewhere(e)&&(r=this.resolveBlack()),"undefined"===typeof r?this.limiter.penalty(e,t):(this.runActionAnyway&&this.limiter.penalty(e,t).catch((function(){})),r)}},{key:"reward",value:function(e,t){var r;return this.isWhiteListedSomewhere(e)?r=this.resolveWhite():this.isBlackListedSomewhere(e)&&(r=this.resolveBlack()),"undefined"===typeof r?this.limiter.reward(e,t):(this.runActionAnyway&&this.limiter.reward(e,t).catch((function(){})),r)}},{key:"get",value:function(e){var t;return this.isWhiteListedSomewhere(e)?t=this.resolveWhite():this.isBlackListedSomewhere(e)&&(t=this.resolveBlack()),"undefined"===typeof t||this.runActionAnyway?this.limiter.get(e):t}},{key:"delete",value:function(e){return this.limiter.delete(e)}}]),e}()},5212:function(e,t,r){var n=r(6690).default,a=r(9728).default;e.exports=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.points=t.points,this.duration=t.duration,this.blockDuration=t.blockDuration,this.execEvenly=t.execEvenly,this.execEvenlyMinDelayMs=t.execEvenlyMinDelayMs,this.keyPrefix=t.keyPrefix}return a(e,[{key:"points",get:function(){return this._points},set:function(e){this._points=e>=0?e:4}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration="undefined"===typeof e?1:e}},{key:"msDuration",get:function(){return 1e3*this.duration}},{key:"blockDuration",get:function(){return this._blockDuration},set:function(e){this._blockDuration="undefined"===typeof e?0:e}},{key:"msBlockDuration",get:function(){return 1e3*this.blockDuration}},{key:"execEvenly",get:function(){return this._execEvenly},set:function(e){this._execEvenly="undefined"!==typeof e&&Boolean(e)}},{key:"execEvenlyMinDelayMs",get:function(){return this._execEvenlyMinDelayMs},set:function(e){this._execEvenlyMinDelayMs="undefined"===typeof e?Math.ceil(this.msDuration/this.points):e}},{key:"keyPrefix",get:function(){return this._keyPrefix},set:function(e){if("undefined"===typeof e&&(e="rlflx"),"string"!==typeof e)throw new Error("keyPrefix must be string");this._keyPrefix=e}},{key:"_getKeySecDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.customDuration>=0?e.customDuration:this.duration}},{key:"getKey",value:function(e){return this.keyPrefix.length>0?"".concat(this.keyPrefix,":").concat(e):e}},{key:"parseKey",value:function(e){return e.substring(this.keyPrefix.length)}},{key:"consume",value:function(){throw new Error("You have to implement the method 'consume'!")}},{key:"penalty",value:function(){throw new Error("You have to implement the method 'penalty'!")}},{key:"reward",value:function(){throw new Error("You have to implement the method 'reward'!")}},{key:"get",value:function(){throw new Error("You have to implement the method 'get'!")}},{key:"set",value:function(){throw new Error("You have to implement the method 'set'!")}},{key:"block",value:function(){throw new Error("You have to implement the method 'block'!")}},{key:"delete",value:function(){throw new Error("You have to implement the method 'delete'!")}}]),e}()},7934:function(e,t,r){var n=r(6115).default,a=r(1655).default,i=r(6389).default,o=r(9728).default,s=r(6690).default,u=r(2500),c=r(3090),l=r(5212),f=r(5181),h=r(6862),p="rate_limiter_flexible",d=null,v=function(e,t,r,n){var a;a=null===n||!0===n||!1===n?n:{remainingPoints:n.remainingPoints,msBeforeNext:n.msBeforeNext,consumedPoints:n.consumedPoints,isFirstInDuration:n.isFirstInDuration},e.send({channel:p,keyPrefix:t.keyPrefix,promiseId:t.promiseId,type:r,data:a})},y=function e(t){var r=this;setTimeout((function(){r._initiated?process.send(t):"undefined"!==typeof r._promises[t.promiseId]&&e.call(r,t)}),30)},b=function(e,t,r,n,a){var i={channel:p,keyPrefix:this.keyPrefix,func:e,promiseId:t,data:{key:r,arg:n,opts:a}};this._initiated?process.send(i):y.call(this,i)},g=function(e,t){if(!t||t.channel!==p||"undefined"===typeof this._rateLimiters[t.keyPrefix])return!1;var r;switch(t.func){case"consume":r=this._rateLimiters[t.keyPrefix].consume(t.data.key,t.data.arg,t.data.opts);break;case"penalty":r=this._rateLimiters[t.keyPrefix].penalty(t.data.key,t.data.arg,t.data.opts);break;case"reward":r=this._rateLimiters[t.keyPrefix].reward(t.data.key,t.data.arg,t.data.opts);break;case"block":r=this._rateLimiters[t.keyPrefix].block(t.data.key,t.data.arg,t.data.opts);break;case"get":r=this._rateLimiters[t.keyPrefix].get(t.data.key,t.data.opts);break;case"delete":r=this._rateLimiters[t.keyPrefix].delete(t.data.key,t.data.opts);break;default:return!1}r&&r.then((function(r){v(e,t,"resolve",r)})).catch((function(r){v(e,t,"reject",r)}))},m=function(e){if(!e||e.channel!==p||e.keyPrefix!==this.keyPrefix)return!1;if(this._promises[e.promiseId]){var t;switch(clearTimeout(this._promises[e.promiseId].timeoutId),t=null===e.data||!0===e.data||!1===e.data?e.data:new h(e.data.remainingPoints,e.data.msBeforeNext,e.data.consumedPoints,e.data.isFirstInDuration),e.type){case"resolve":this._promises[e.promiseId].resolve(t);break;case"reject":this._promises[e.promiseId].reject(t);break;default:throw new Error("RateLimiterCluster: no such message type '".concat(e.type,"'"))}delete this._promises[e.promiseId]}},w=function(){return{points:this.points,duration:this.duration,blockDuration:this.blockDuration,execEvenly:this.execEvenly,execEvenlyMinDelayMs:this.execEvenlyMinDelayMs,keyPrefix:this.keyPrefix}},k=function(e,t){var r=this,n=process.hrtime(),a=n[0].toString()+n[1].toString();return"undefined"!==typeof this._promises[a]&&(a+=c.randomBytes(12).toString("base64")),this._promises[a]={resolve:e,reject:t,timeoutId:setTimeout((function(){delete r._promises[a],t(new Error("RateLimiterCluster timeout: no answer from master in time"))}),this.timeoutMs)},a},x=o((function e(){"use strict";var t=this;if(s(this,e),d)return d;this._rateLimiters={},u.setMaxListeners(0),u.on("message",(function(e,r){r&&r.channel===p&&"init"===r.type?("undefined"===typeof t._rateLimiters[r.opts.keyPrefix]&&(t._rateLimiters[r.opts.keyPrefix]=new f(r.opts)),e.send({channel:p,type:"init",keyPrefix:r.opts.keyPrefix})):g.call(t,e,r)})),d=this})),_=o((function e(t){"use strict";var r=this;if(s(this,e),d)return d;this._rateLimiters={},t.launchBus((function(e,n){n.on("process:msg",(function(e){var n=e.raw;n&&n.channel===p&&"init"===n.type?("undefined"===typeof r._rateLimiters[n.opts.keyPrefix]&&(r._rateLimiters[n.opts.keyPrefix]=new f(n.opts)),t.sendDataToProcessId(e.process.pm_id,{data:{},topic:p,channel:p,type:"init",keyPrefix:n.opts.keyPrefix},(function(e,t){e&&console.log(e,t)}))):g.call(r,{send:function(r){var n=r;n.topic=p,"undefined"===typeof n.data&&(n.data={}),t.sendDataToProcessId(e.process.pm_id,n,(function(e,t){e&&console.log(e,t)}))}},n)}))})),d=this})),E=function(e){"use strict";a(r,e);var t=i(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,r),e=t.call(this,a),process.setMaxListeners(0),e.timeoutMs=a.timeoutMs,e._initiated=!1,process.on("message",(function(t){t&&t.channel===p&&"init"===t.type&&t.keyPrefix===e.keyPrefix?e._initiated=!0:m.call(n(e),t)})),process.send({channel:p,type:"init",opts:w.call(n(e))}),e._promises={},e}return o(r,[{key:"timeoutMs",get:function(){return this._timeoutMs},set:function(e){this._timeoutMs="undefined"===typeof e?5e3:Math.abs(parseInt(e))}},{key:"consume",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,i){var o=k.call(t,a,i);b.call(t,"consume",o,e,r,n)}))}},{key:"penalty",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,i){var o=k.call(t,a,i);b.call(t,"penalty",o,e,r,n)}))}},{key:"reward",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,i){var o=k.call(t,a,i);b.call(t,"reward",o,e,r,n)}))}},{key:"block",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,i){var o=k.call(r,a,i);b.call(r,"block",o,e,t,n)}))}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){var i=k.call(t,n,a);b.call(t,"get",i,e,r)}))}},{key:"delete",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){var i=k.call(t,n,a);b.call(t,"delete",i,e,r)}))}}]),r}(l);e.exports={RateLimiterClusterMaster:x,RateLimiterClusterMasterPM2:_,RateLimiterCluster:E}},3453:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(1655).default,o=r(6389).default,s=r(3482),u=r(6862),c=function(e){"use strict";i(r,e);var t=o(r);function r(e){var a;return n(this,r),(a=t.call(this,e)).client=e.storeClient,a}return a(r,[{key:"_getRateLimiterRes",value:function(e,t,r){var n=new u;return n.consumedPoints=parseInt(r.consumedPoints),n.isFirstInDuration=r.consumedPoints===t,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=r.msBeforeNext,n}},{key:"_upsert",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return new Promise((function(o,s){var u=Date.now(),c=Math.floor(r/1e3);a?n.client.set(e,t,c,(function(r){r?s(r):n.client.set("".concat(e,"_expire"),c>0?u+1e3*c:-1,c,(function(){o({consumedPoints:t,msBeforeNext:c>0?1e3*c:-1})}))})):n.client.incr(e,t,(function(l,f){l||!1===f?n.client.add(e,t,c,(function(l,f){if(l||!f)if("undefined"===typeof i.attemptNumber||i.attemptNumber<3){var h=Object.assign({},i);h.attemptNumber=h.attemptNumber?h.attemptNumber+1:1,n._upsert(e,t,r,a,h).then((function(e){return o(e)})).catch((function(e){return s(e)}))}else s(new Error("Can not add key"));else n.client.add("".concat(e,"_expire"),c>0?u+1e3*c:-1,c,(function(){o({consumedPoints:t,msBeforeNext:c>0?1e3*c:-1})}))})):n.client.get("".concat(e,"_expire"),(function(e,t){if(e)s(e);else{var r=!1===t?0:t,n={consumedPoints:f,msBeforeNext:r>=0?Math.max(r-u,0):-1};o(n)}}))}))}))}},{key:"_get",value:function(e){var t=this;return new Promise((function(r,n){var a=Date.now();t.client.get(e,(function(i,o){o?t.client.get("".concat(e,"_expire"),(function(e,t){if(e)n(e);else{var i=!1===t?0:t,s={consumedPoints:o,msBeforeNext:i>=0?Math.max(i-a,0):-1};r(s)}})):r(null)}))}))}},{key:"_delete",value:function(e){var t=this;return new Promise((function(r,n){t.client.del(e,(function(a,i){a?n(a):!1===i?r(i):t.client.del("".concat(e,"_expire"),(function(e){e?n(e):r(i)}))}))}))}}]),r}(s);e.exports=c},5181:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(1655).default,o=r(6389).default,s=r(5212),u=r(2870),c=r(6862),l=function(e){"use strict";i(r,e);var t=o(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(this,r),(e=t.call(this,a))._memoryStorage=new u,e}return a(r,[{key:"consume",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,i){var o=t.getKey(e),s=t._getKeySecDuration(n),u=t._memoryStorage.incrby(o,r,s);if(u.remainingPoints=Math.max(t.points-u.consumedPoints,0),u.consumedPoints>t.points)t.blockDuration>0&&u.consumedPoints<=t.points+r&&(u=t._memoryStorage.set(o,u.consumedPoints,t.blockDuration)),i(u);else if(t.execEvenly&&u.msBeforeNext>0&&!u.isFirstInDuration){var c=Math.ceil(u.msBeforeNext/(u.remainingPoints+2));c<t.execEvenlyMinDelayMs&&(c=u.consumedPoints*t.execEvenlyMinDelayMs),setTimeout(a,c,u)}else a(u)}))}},{key:"penalty",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.getKey(e);return new Promise((function(e){var i=t._getKeySecDuration(n),o=t._memoryStorage.incrby(a,r,i);o.remainingPoints=Math.max(t.points-o.consumedPoints,0),e(o)}))}},{key:"reward",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.getKey(e);return new Promise((function(e){var i=t._getKeySecDuration(n),o=t._memoryStorage.incrby(a,-r,i);o.remainingPoints=Math.max(t.points-o.consumedPoints,0),e(o)}))}},{key:"block",value:function(e,t){var r=1e3*t,n=this.points+1;return this._memoryStorage.set(this.getKey(e),n,t),Promise.resolve(new c(0,0===r?-1:r,n))}},{key:"set",value:function(e,t,r){var n=1e3*(r>=0?r:this.duration);return this._memoryStorage.set(this.getKey(e),t,r),Promise.resolve(new c(0,0===n?-1:n,t))}},{key:"get",value:function(e){var t=this._memoryStorage.get(this.getKey(e));return null!==t&&(t.remainingPoints=Math.max(this.points-t.consumedPoints,0)),Promise.resolve(t)}},{key:"delete",value:function(e){return Promise.resolve(this._memoryStorage.delete(this.getKey(e)))}}]),r}(s);e.exports=l},6161:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(1655).default,o=r(6389).default,s=r(3482),u=r(6862);function c(e){try{var t=(e.client?e.client:e).topology.s.options.metadata.driver.version.split(".").map((function(e){return parseInt(e)}));return{major:t[0],feature:t[1],patch:t[2]}}catch(r){return{major:0,feature:0,patch:0}}}var l=function(e){"use strict";i(r,e);var t=o(r);function r(e){var a;return n(this,r),(a=t.call(this,e)).dbName=e.dbName,a.tableName=e.tableName,a.indexKeyPrefix=e.indexKeyPrefix,e.mongo?a.client=e.mongo:a.client=e.storeClient,"function"===typeof a.client.then?a.client.then((function(e){a.client=e,a._initCollection(),a._driverVersion=c(a.client)})):(a._initCollection(),a._driverVersion=c(a.client)),a}return a(r,[{key:"dbName",get:function(){return this._dbName},set:function(e){this._dbName="undefined"===typeof e?r.getDbName():e}},{key:"tableName",get:function(){return this._tableName},set:function(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}},{key:"client",get:function(){return this._client},set:function(e){if("undefined"===typeof e)throw new Error("mongo is not set");this._client=e}},{key:"indexKeyPrefix",get:function(){return this._indexKeyPrefix},set:function(e){this._indexKeyPrefix=e||{}}},{key:"_initCollection",value:function(){var e=("function"===typeof this.client.db?this.client.db(this.dbName):this.client).collection(this.tableName);e.createIndex({expire:-1},{expireAfterSeconds:0}),e.createIndex(Object.assign({},this.indexKeyPrefix,{key:1}),{unique:!0}),this._collection=e}},{key:"_getRateLimiterRes",value:function(e,t,r){var n,a=new u;return n="undefined"===typeof r.value?r:r.value,a.isFirstInDuration=n.points===t,a.consumedPoints=n.points,a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a.msBeforeNext=null!==n.expire?Math.max(new Date(n.expire).getTime()-Date.now(),0):-1,a}},{key:"_upsert",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));var o,s,u=i.attrs||{};a?(o={key:e},o=Object.assign(o,u),(s={$set:{key:e,points:t,expire:r>0?new Date(Date.now()+r):null}}).$set=Object.assign(s.$set,u)):(o={$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}],key:e},o=Object.assign(o,u),(s={$setOnInsert:{key:e,expire:r>0?new Date(Date.now()+r):null},$inc:{points:t}}).$setOnInsert=Object.assign(s.$setOnInsert,u));var c={upsert:!0};return this._driverVersion.major>=4||3===this._driverVersion.major&&this._driverVersion.feature>=7||this._driverVersion.feature>=6&&this._driverVersion.patch>=7?c.returnDocument="after":c.returnOriginal=!1,new Promise((function(i,l){n._collection.findOneAndUpdate(o,s,c).then((function(e){i(e)})).catch((function(o){if(o&&11e3===o.code){var s=Object.assign({$or:[{expire:{$lte:new Date}},{expire:{$eq:null}}],key:e},u),f={$set:Object.assign({key:e,points:t,expire:r>0?new Date(Date.now()+r):null},u)};n._collection.findOneAndUpdate(s,f,c).then((function(e){i(e)})).catch((function(o){o&&11e3===o.code?n._upsert(e,t,r,a).then((function(e){return i(e)})).catch((function(e){return l(e)})):l(o)}))}else l(o)}))}))}},{key:"_get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));var r=t.attrs||{},n=Object.assign({key:e,$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}]},r);return this._collection.findOne(n)}},{key:"_delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));var r=t.attrs||{},n=Object.assign({key:e},r);return this._collection.deleteOne(n).then((function(e){return e.deletedCount>0}))}}],[{key:"getDbName",value:function(){return"node-rate-limiter-flexible"}}]),r}(s);e.exports=l},4122:function(e,t,r){var n=r(7424).default,a=r(6690).default,i=r(9728).default,o=r(1655).default,s=r(6389).default,u=r(3482),c=r(6862),l=function(e){"use strict";o(r,e);var t=s(r);function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return a(this,r),(n=t.call(this,e)).client=e.storeClient,n.clientType=e.storeType,n.dbName=e.dbName,n.tableName=e.tableName,n.clearExpiredByTimeout=e.clearExpiredByTimeout,n.tableCreated=e.tableCreated,n.tableCreated?(n.clearExpiredByTimeout&&n._clearExpiredHourAgo(),"function"===typeof i&&i()):n._createDbAndTable().then((function(){n.tableCreated=!0,n.clearExpiredByTimeout&&n._clearExpiredHourAgo(),"function"===typeof i&&i()})).catch((function(e){if("function"!==typeof i)throw e;i(e)})),n}return i(r,[{key:"clearExpired",value:function(e){var t=this;return new Promise((function(r){t._getConnection().then((function(n){n.query("DELETE FROM ??.?? WHERE expire < ?",[t.dbName,t.tableName,e],(function(){t._releaseConnection(n),r()}))})).catch((function(){r()}))}))}},{key:"_clearExpiredHourAgo",value:function(){var e=this;this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout((function(){e.clearExpired(Date.now()-36e5).then((function(){e._clearExpiredHourAgo()}))}),3e5),this._clearExpiredTimeoutId.unref()}},{key:"_getConnection",value:function(){var e=this;switch(this.clientType){case"pool":return new Promise((function(t,r){e.client.getConnection((function(e,n){if(e)return r(e);t(n)}))}));case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();default:return Promise.resolve(this.client)}}},{key:"_releaseConnection",value:function(e){switch(this.clientType){case"pool":return e.release();case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e);default:return!0}}},{key:"_createDbAndTable",value:function(){var e=this;return new Promise((function(t,r){e._getConnection().then((function(n){n.query("CREATE DATABASE IF NOT EXISTS `".concat(e.dbName,"`;"),(function(a){if(a)return e._releaseConnection(n),r(a);n.query(e._getCreateTableStmt(),(function(a){if(a)return e._releaseConnection(n),r(a);e._releaseConnection(n),t()}))}))})).catch((function(e){r(e)}))}))}},{key:"_getCreateTableStmt",value:function(){return"CREATE TABLE IF NOT EXISTS `".concat(this.dbName,"`.`").concat(this.tableName,"` (")+"`key` VARCHAR(255) CHARACTER SET utf8 NOT NULL,`points` INT(9) NOT NULL default 0,`expire` BIGINT UNSIGNED,PRIMARY KEY (`key`)) ENGINE = INNODB;"}},{key:"clientType",get:function(){return this._clientType},set:function(e){if("undefined"===typeof e)if("Connection"===this.client.constructor.name)e="connection";else if("Pool"===this.client.constructor.name)e="pool";else{if("Sequelize"!==this.client.constructor.name)throw new Error("storeType is not defined");e="sequelize"}this._clientType=e.toLowerCase()}},{key:"dbName",get:function(){return this._dbName},set:function(e){this._dbName="undefined"===typeof e?"rtlmtrflx":e}},{key:"tableName",get:function(){return this._tableName},set:function(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}},{key:"tableCreated",get:function(){return this._tableCreated},set:function(e){this._tableCreated="undefined"!==typeof e&&!!e}},{key:"clearExpiredByTimeout",get:function(){return this._clearExpiredByTimeout},set:function(e){this._clearExpiredByTimeout="undefined"===typeof e||Boolean(e)}},{key:"_getRateLimiterRes",value:function(e,t,r){var a=new c,i=n(r,1)[0];return a.isFirstInDuration=t===i.points,a.consumedPoints=a.isFirstInDuration?t:i.points,a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a.msBeforeNext=i.expire?Math.max(i.expire-Date.now(),0):-1,a}},{key:"_upsertTransaction",value:function(e,t,r,n,a){var i=this;return new Promise((function(o,s){e.query("BEGIN",(function(u){if(u)return e.rollback(),s(u);var c,l,f=Date.now(),h=n>0?f+n:null;a?(c="INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = ?, \n            expire = ?;",l=[i.dbName,i.tableName,t,r,h,r,h]):(c="INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = IF(expire <= ?, ?, points + (?)), \n            expire = IF(expire <= ?, ?, expire);",l=[i.dbName,i.tableName,t,r,h,f,r,r,f,h]),e.query(c,l,(function(r){if(r)return e.rollback(),s(r);e.query("SELECT points, expire FROM ??.?? WHERE `key` = ?;",[i.dbName,i.tableName,t],(function(t,r){if(t)return e.rollback(),s(t);e.query("COMMIT",(function(t){if(t)return e.rollback(),s(t);o(r)}))}))}))}))}))}},{key:"_upsert",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.tableCreated?new Promise((function(i,o){n._getConnection().then((function(s){n._upsertTransaction(s,e,t,r,a).then((function(e){i(e),n._releaseConnection(s)})).catch((function(e){o(e),n._releaseConnection(s)}))})).catch((function(e){o(e)}))})):Promise.reject(Error("Table is not created yet"))}},{key:"_get",value:function(e){var t=this;return this.tableCreated?new Promise((function(r,n){t._getConnection().then((function(a){a.query("SELECT points, expire FROM ??.?? WHERE `key` = ? AND (`expire` > ? OR `expire` IS NULL)",[t.dbName,t.tableName,e,Date.now()],(function(e,i){e?n(e):0===i.length?r(null):r(i),t._releaseConnection(a)}))})).catch((function(e){n(e)}))})):Promise.reject(Error("Table is not created yet"))}},{key:"_delete",value:function(e){var t=this;return this.tableCreated?new Promise((function(r,n){t._getConnection().then((function(a){a.query("DELETE FROM ??.?? WHERE `key` = ?",[t.dbName,t.tableName,e],(function(e,i){e?n(e):r(i.affectedRows>0),t._releaseConnection(a)}))})).catch((function(e){n(e)}))})):Promise.reject(Error("Table is not created yet"))}}]),r}(u);e.exports=l},522:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(1655).default,o=r(6389).default,s=r(3482),u=r(6862),c=function(e){"use strict";i(r,e);var t=o(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n(this,r),(a=t.call(this,e)).client=e.storeClient,a.clientType=e.storeType,a.tableName=e.tableName,a.clearExpiredByTimeout=e.clearExpiredByTimeout,a.tableCreated=e.tableCreated,a.tableCreated?"function"===typeof i&&i():a._createTable().then((function(){a.tableCreated=!0,a.clearExpiredByTimeout&&a._clearExpiredHourAgo(),"function"===typeof i&&i()})).catch((function(e){if("function"!==typeof i)throw e;i(e)})),a}return a(r,[{key:"clearExpired",value:function(e){var t=this;return new Promise((function(r){var n={name:"rlflx-clear-expired",text:"DELETE FROM ".concat(t.tableName," WHERE expire < $1"),values:[e]};t._query(n).then((function(){r()})).catch((function(){r()}))}))}},{key:"_clearExpiredHourAgo",value:function(){var e=this;this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout((function(){e.clearExpired(Date.now()-36e5).then((function(){e._clearExpiredHourAgo()}))}),3e5),this._clearExpiredTimeoutId.unref()}},{key:"_getConnection",value:function(){switch(this.clientType){case"pool":default:return Promise.resolve(this.client);case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();case"typeorm":return Promise.resolve(this.client.driver.master)}}},{key:"_releaseConnection",value:function(e){switch(this.clientType){case"pool":case"typeorm":default:return!0;case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e)}}},{key:"_createTable",value:function(){var e=this;return new Promise((function(t,r){e._query({text:e._getCreateTableStmt()}).then((function(){t()})).catch((function(e){"23505"===e.code?t():r(e)}))}))}},{key:"_getCreateTableStmt",value:function(){return"CREATE TABLE IF NOT EXISTS ".concat(this.tableName," ( \n      key varchar(255) PRIMARY KEY,\n      points integer NOT NULL DEFAULT 0,\n      expire bigint\n    );")}},{key:"clientType",get:function(){return this._clientType},set:function(e){var t=this.client.constructor.name;if("undefined"===typeof e)if("Client"===t)e="client";else if("Pool"===t||"BoundPool"===t)e="pool";else{if("Sequelize"!==t)throw new Error("storeType is not defined");e="sequelize"}this._clientType=e.toLowerCase()}},{key:"tableName",get:function(){return this._tableName},set:function(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}},{key:"tableCreated",get:function(){return this._tableCreated},set:function(e){this._tableCreated="undefined"!==typeof e&&!!e}},{key:"clearExpiredByTimeout",get:function(){return this._clearExpiredByTimeout},set:function(e){this._clearExpiredByTimeout="undefined"===typeof e||Boolean(e)}},{key:"_getRateLimiterRes",value:function(e,t,r){var n=new u,a=r.rows[0];return n.isFirstInDuration=t===a.points,n.consumedPoints=n.isFirstInDuration?t:a.points,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=a.expire?Math.max(a.expire-Date.now(),0):-1,n}},{key:"_query",value:function(e){var t=this,r=this.tableName.toLowerCase(),n={name:"".concat(r,":").concat(e.name),text:e.text,values:e.values};return new Promise((function(e,r){t._getConnection().then((function(a){a.query(n).then((function(r){e(r),t._releaseConnection(a)})).catch((function(e){r(e),t._releaseConnection(a)}))})).catch((function(e){r(e)}))}))}},{key:"_upsert",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.tableCreated)return Promise.reject(Error("Table is not created yet"));var a=r>0?Date.now()+r:null,i=n?" $3 ":" CASE\n             WHEN ".concat(this.tableName,".expire <= $4 THEN $3\n             ELSE ").concat(this.tableName,".expire\n            END ");return this._query({name:n?"rlflx-upsert-force":"rlflx-upsert",text:"\n            INSERT INTO ".concat(this.tableName," VALUES ($1, $2, $3)\n              ON CONFLICT(key) DO UPDATE SET\n                points = CASE\n                          WHEN (").concat(this.tableName,".expire <= $4 OR 1=").concat(n?1:0,") THEN $2\n                          ELSE ").concat(this.tableName,".points + ($2)\n                         END,\n                expire = ").concat(i,"\n            RETURNING points, expire;"),values:[e,t,a,Date.now()]})}},{key:"_get",value:function(e){var t=this;return this.tableCreated?new Promise((function(r,n){t._query({name:"rlflx-get",text:"\n            SELECT points, expire FROM ".concat(t.tableName," WHERE key = $1 AND (expire > $2 OR expire IS NULL);"),values:[e,Date.now()]}).then((function(e){0===e.rowCount&&(e=null),r(e)})).catch((function(e){n(e)}))})):Promise.reject(Error("Table is not created yet"))}},{key:"_delete",value:function(e){return this.tableCreated?this._query({name:"rlflx-delete",text:"DELETE FROM ".concat(this.tableName," WHERE key = $1"),values:[e]}).then((function(e){return e.rowCount>0})):Promise.reject(Error("Table is not created yet"))}}]),r}(s);e.exports=c},1652:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(246),o=4294967295,s="limiter";e.exports=function(){"use strict";function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxQueueSize:o};n(this,e),this._queueLimiters={KEY_DEFAULT:new u(t,r)},this._limiterFlexible=t,this._maxQueueSize=r.maxQueueSize}return a(e,[{key:"getTokensRemaining",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this._queueLimiters[e]?this._queueLimiters[e].getTokensRemaining():Promise.resolve(this._limiterFlexible.points)}},{key:"removeTokens",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return this._queueLimiters[t]||(this._queueLimiters[t]=new u(this._limiterFlexible,{key:t,maxQueueSize:this._maxQueueSize})),this._queueLimiters[t].removeTokens(e)}}]),e}();var u=function(){"use strict";function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxQueueSize:o,key:s};n(this,e),this._key=r.key,this._waitTimeout=null,this._queue=[],this._limiterFlexible=t,this._maxQueueSize=r.maxQueueSize}return a(e,[{key:"getTokensRemaining",value:function(){var e=this;return this._limiterFlexible.get(this._key).then((function(t){return null!==t?t.remainingPoints:e._limiterFlexible.points}))}},{key:"removeTokens",value:function(e){var t=this;return new Promise((function(r,n){e>t._limiterFlexible.points?n(new i("Requested tokens ".concat(e," exceeds maximum ").concat(t._limiterFlexible.points," tokens per interval"))):t._queue.length>0?t._queueRequest.call(t,r,n,e):t._limiterFlexible.consume(t._key,e).then((function(e){r(e.remainingPoints)})).catch((function(a){a instanceof Error?n(a):(t._queueRequest.call(t,r,n,e),null===t._waitTimeout&&(t._waitTimeout=setTimeout(t._processFIFO.bind(t),a.msBeforeNext)))}))}))}},{key:"_queueRequest",value:function(e,t,r){var n=this;n._queue.length<n._maxQueueSize?n._queue.push({resolve:e,reject:t,tokens:r}):t(new i("Number of requests reached it's maximum ".concat(n._maxQueueSize)))}},{key:"_processFIFO",value:function(){var e=this;if(null!==e._waitTimeout&&(clearTimeout(e._waitTimeout),e._waitTimeout=null),0!==e._queue.length){var t=e._queue.shift();e._limiterFlexible.consume(e._key,t.tokens).then((function(r){t.resolve(r.remainingPoints),e._processFIFO.call(e)})).catch((function(r){r instanceof Error?(t.reject(r),e._processFIFO.call(e)):(e._queue.unshift(t),null===e._waitTimeout&&(e._waitTimeout=setTimeout(e._processFIFO.bind(e),r.msBeforeNext)))}))}}}]),e}()},9471:function(e,t,r){var n=r(7424).default,a=r(6690).default,i=r(9728).default,o=r(1655).default,s=r(6389).default,u=r(3482),c=r(6862),l="redis.call('set', KEYS[1], 0, 'EX', ARGV[2], 'NX') local consumed = redis.call('incrby', KEYS[1], ARGV[1]) local ttl = redis.call('pttl', KEYS[1]) if ttl == -1 then   redis.call('expire', KEYS[1], ARGV[2])   ttl = 1000 * ARGV[2] end return {consumed, ttl} ",f=function(e){"use strict";o(r,e);var t=s(r);function r(e){var n;return a(this,r),n=t.call(this,e),e.redis?n.client=e.redis:n.client=e.storeClient,n._rejectIfRedisNotReady=!!e.rejectIfRedisNotReady,"function"===typeof n.client.defineCommand&&n.client.defineCommand("rlflxIncr",{numberOfKeys:1,lua:l}),n}return i(r,[{key:"_isRedisReady",value:function(){return!this._rejectIfRedisNotReady||(!this.client.status||"ready"===this.client.status)&&!("function"===typeof this.client.isReady&&!this.client.isReady())}},{key:"_getRateLimiterRes",value:function(e,t,r){var a=n(r,2),i=a[0],o=a[1];Array.isArray(i)&&(i=n(i,2)[1],o=n(o,2)[1]);var s=new c;return s.consumedPoints=parseInt(i),s.isFirstInDuration=s.consumedPoints===t,s.remainingPoints=Math.max(this.points-s.consumedPoints,0),s.msBeforeNext=o,s}},{key:"_upsert",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(i,o){if(!n._isRedisReady())return o(new Error("Redis connection is not ready"));var s=Math.floor(r/1e3),u=n.client.multi();if(a)s>0?u.set(e,t,"EX",s):u.set(e,t),u.pttl(e).exec((function(e,t){return e?o(e):i(t)}));else if(s>0){var c=function(e,t){return e?o(e):i(t)};"function"===typeof n.client.rlflxIncr?n.client.rlflxIncr(e,t,s,c):n.client.eval(l,1,e,t,s,c)}else u.incrby(e,t).pttl(e).exec((function(e,t){return e?o(e):i(t)}))}))}},{key:"_get",value:function(e){var t=this;return new Promise((function(r,a){if(!t._isRedisReady())return a(new Error("Redis connection is not ready"));t.client.multi().get(e).pttl(e).exec((function(e,t){if(e)a(e);else{if(null===n(t,1)[0])return r(null);r(t)}}))}))}},{key:"_delete",value:function(e){var t=this;return new Promise((function(r,n){t.client.del(e,(function(e,t){e?n(e):r(t>0)}))}))}}]),r}(u);e.exports=f},6862:function(e,t,r){var n=r(6690).default,a=r(9728).default;e.exports=function(e){"use strict";function t(e,r,a,i){n(this,t),this.remainingPoints="undefined"===typeof e?0:e,this.msBeforeNext="undefined"===typeof r?0:r,this.consumedPoints="undefined"===typeof a?0:a,this.isFirstInDuration="undefined"!==typeof i&&i}return a(t,[{key:"msBeforeNext",get:function(){return this._msBeforeNext},set:function(e){return this._msBeforeNext=e,this}},{key:"remainingPoints",get:function(){return this._remainingPoints},set:function(e){return this._remainingPoints=e,this}},{key:"consumedPoints",get:function(){return this._consumedPoints},set:function(e){return this._consumedPoints=e,this}},{key:"isFirstInDuration",get:function(){return this._isFirstInDuration},set:function(e){this._isFirstInDuration=Boolean(e)}},{key:"_getDecoratedProperties",value:function(){return{remainingPoints:this.remainingPoints,msBeforeNext:this.msBeforeNext,consumedPoints:this.consumedPoints,isFirstInDuration:this.isFirstInDuration}}},{key:e,value:function(){return this._getDecoratedProperties()}},{key:"toString",value:function(){return JSON.stringify(this._getDecoratedProperties())}},{key:"toJSON",value:function(){return this._getDecoratedProperties()}}]),t}(Symbol.for("nodejs.util.inspect.custom"))},3482:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(1655).default,o=r(6389).default,s=r(5212),u=r(2267),c=r(6862);e.exports=function(e){"use strict";i(r,e);var t=o(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(this,r),(e=t.call(this,a)).inMemoryBlockOnConsumed=a.inMemoryBlockOnConsumed||a.inmemoryBlockOnConsumed,e.inMemoryBlockDuration=a.inMemoryBlockDuration||a.inmemoryBlockDuration,e.insuranceLimiter=a.insuranceLimiter,e._inMemoryBlockedKeys=new u,e}return a(r,[{key:"client",get:function(){return this._client},set:function(e){if("undefined"===typeof e)throw new Error("storeClient is not set");this._client=e}},{key:"_afterConsume",value:function(e,t,r,n,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=this._getRateLimiterRes(r,n,a);if(this.inMemoryBlockOnConsumed>0&&!(this.inMemoryBlockDuration>0)&&o.consumedPoints>=this.inMemoryBlockOnConsumed)return this._inMemoryBlockedKeys.addMs(r,o.msBeforeNext),o.consumedPoints>this.points?t(o):e(o);if(o.consumedPoints>this.points){var s=Promise.resolve();this.blockDuration>0&&o.consumedPoints<=this.points+n&&(o.msBeforeNext=this.msBlockDuration,s=this._block(r,o.consumedPoints,this.msBlockDuration,i)),this.inMemoryBlockOnConsumed>0&&o.consumedPoints>=this.inMemoryBlockOnConsumed&&(this._inMemoryBlockedKeys.add(r,this.inMemoryBlockDuration),o.msBeforeNext=this.msInMemoryBlockDuration),s.then((function(){t(o)})).catch((function(e){t(e)}))}else if(this.execEvenly&&o.msBeforeNext>0&&!o.isFirstInDuration){var u=Math.ceil(o.msBeforeNext/(o.remainingPoints+2));u<this.execEvenlyMinDelayMs&&(u=o.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(e,u,o)}else e(o)}},{key:"_handleError",value:function(e,t,r,n,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};this.insuranceLimiter instanceof s?this.insuranceLimiter[t](a,i,o).then((function(e){r(e)})).catch((function(e){n(e)})):n(e)}},{key:"_inmemoryBlockedKeys",get:function(){return this._inMemoryBlockedKeys}},{key:"getInmemoryBlockMsBeforeExpire",value:function(e){return this.getInMemoryBlockMsBeforeExpire(e)}},{key:"inmemoryBlockOnConsumed",get:function(){return this.inMemoryBlockOnConsumed},set:function(e){this.inMemoryBlockOnConsumed=e}},{key:"inmemoryBlockDuration",get:function(){return this.inMemoryBlockDuration},set:function(e){this.inMemoryBlockDuration=e}},{key:"msInmemoryBlockDuration",get:function(){return 1e3*this.inMemoryBlockDuration}},{key:"getInMemoryBlockMsBeforeExpire",value:function(e){return this.inMemoryBlockOnConsumed>0?this._inMemoryBlockedKeys.msBeforeExpire(e):0}},{key:"inMemoryBlockOnConsumed",get:function(){return this._inMemoryBlockOnConsumed},set:function(e){if(this._inMemoryBlockOnConsumed=e?parseInt(e):0,this.inMemoryBlockOnConsumed>0&&this.points>this.inMemoryBlockOnConsumed)throw new Error('inMemoryBlockOnConsumed option must be greater or equal "points" option')}},{key:"inMemoryBlockDuration",get:function(){return this._inMemoryBlockDuration},set:function(e){if(this._inMemoryBlockDuration=e?parseInt(e):0,this.inMemoryBlockDuration>0&&0===this.inMemoryBlockOnConsumed)throw new Error("inMemoryBlockOnConsumed option must be set up")}},{key:"msInMemoryBlockDuration",get:function(){return 1e3*this._inMemoryBlockDuration}},{key:"insuranceLimiter",get:function(){return this._insuranceLimiter},set:function(e){if("undefined"!==typeof e&&!(e instanceof s))throw new Error("insuranceLimiter must be instance of RateLimiterAbstract");this._insuranceLimiter=e,this._insuranceLimiter&&(this._insuranceLimiter.blockDuration=this.blockDuration,this._insuranceLimiter.execEvenly=this.execEvenly)}},{key:"block",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=1e3*t;return this._block(this.getKey(e),this.points+1,n,r)}},{key:"set",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=1e3*(r>=0?r:this.duration);return this._block(this.getKey(e),t,a,n)}},{key:"consume",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,i){var o=t.getKey(e),s=t.getInMemoryBlockMsBeforeExpire(o);if(s>0)return i(new c(0,s));t._upsert(o,r,1e3*t._getKeySecDuration(n),!1,n).then((function(e){t._afterConsume(a,i,o,r,e)})).catch((function(o){t._handleError(o,"consume",a,i,e,r,n)}))}))}},{key:"penalty",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.getKey(e);return new Promise((function(i,o){t._upsert(a,r,1e3*t._getKeySecDuration(n),!1,n).then((function(e){i(t._getRateLimiterRes(a,r,e))})).catch((function(a){t._handleError(a,"penalty",i,o,e,r,n)}))}))}},{key:"reward",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.getKey(e);return new Promise((function(i,o){t._upsert(a,-r,1e3*t._getKeySecDuration(n),!1,n).then((function(e){i(t._getRateLimiterRes(a,-r,e))})).catch((function(a){t._handleError(a,"reward",i,o,e,r,n)}))}))}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getKey(e);return new Promise((function(a,i){t._get(n,r).then((function(e){a(null===e||"undefined"===typeof e?null:t._getRateLimiterRes(n,0,e))})).catch((function(n){t._handleError(n,"get",a,i,e,r)}))}))}},{key:"delete",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getKey(e);return new Promise((function(a,i){t._delete(n,r).then((function(e){t._inMemoryBlockedKeys.delete(n),a(e)})).catch((function(n){t._handleError(n,"delete",a,i,e,r)}))}))}},{key:"deleteInMemoryBlockedAll",value:function(){this._inMemoryBlockedKeys.delete()}},{key:"_getRateLimiterRes",value:function(e,t,r){throw new Error("You have to implement the method '_getRateLimiterRes'!")}},{key:"_block",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(i,o){n._upsert(e,t,r,!0,a).then((function(){i(new c(0,r>0?r:-1,t))})).catch((function(t){n._handleError(t,"block",i,o,n.parseKey(e),r/1e3,a)}))}))}},{key:"_get",value:function(e){throw new Error("You have to implement the method '_get'!")}},{key:"_delete",value:function(e){throw new Error("You have to implement the method '_delete'!")}},{key:"_upsert",value:function(e,t,r){throw new Error("You have to implement the method '_upsert'!")}}]),r}(s)},7062:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(5212);e.exports=function(){"use strict";function e(){n(this,e);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length<1)throw new Error("RateLimiterUnion: at least one limiter have to be passed");r.forEach((function(e){if(!(e instanceof i))throw new Error("RateLimiterUnion: all limiters have to be instance of RateLimiterAbstract")})),this._limiters=r}return a(e,[{key:"consume",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(n,a){var i=[];t._limiters.forEach((function(t){i.push(t.consume(e,r).catch((function(e){return{rejected:!0,rej:e}})))})),Promise.all(i).then((function(e){var r={},i=!1;e.forEach((function(e){!0===e.rejected&&(i=!0)}));for(var o=0;o<e.length;o++)i&&!0===e[o].rejected?r[t._limiters[o].keyPrefix]=e[o].rej:i||(r[t._limiters[o].keyPrefix]=e[o]);i?a(r):n(r)}))}))}}]),e}()},3517:function(e,t,r){var n=r(6690).default,a=r(9728).default;e.exports=function(){"use strict";function e(){n(this,e),this._keys={},this._addedKeysAmount=0}return a(e,[{key:"collectExpired",value:function(){var e=this,t=Date.now();Object.keys(this._keys).forEach((function(r){e._keys[r]<=t&&delete e._keys[r]})),this._addedKeysAmount=Object.keys(this._keys).length}},{key:"add",value:function(e,t){this.addMs(e,1e3*t)}},{key:"addMs",value:function(e,t){this._keys[e]=Date.now()+t,this._addedKeysAmount++,this._addedKeysAmount>999&&this.collectExpired()}},{key:"msBeforeExpire",value:function(e){var t=this._keys[e];if(t&&t>=Date.now()){this.collectExpired();var r=Date.now();return t>=r?t-r:0}return 0}},{key:"delete",value:function(e){var t=this;e?delete this._keys[e]:Object.keys(this._keys).forEach((function(e){delete t._keys[e]}))}}]),e}()},2267:function(e,t,r){var n=r(3517);e.exports=n},2870:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(5175),o=r(6862);e.exports=function(){"use strict";function e(){n(this,e),this._storage={}}return a(e,[{key:"incrby",value:function(e,t,r){if(this._storage[e]){var n=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-(new Date).getTime():-1;return 0!==n?(this._storage[e].value=this._storage[e].value+t,new o(0,n,this._storage[e].value,!1)):this.set(e,t,r)}return this.set(e,t,r)}},{key:"set",value:function(e,t,r){var n=this,a=1e3*r;return this._storage[e]&&this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),this._storage[e]=new i(t,a>0?new Date(Date.now()+a):null),a>0&&(this._storage[e].timeoutId=setTimeout((function(){delete n._storage[e]}),a),this._storage[e].timeoutId.unref&&this._storage[e].timeoutId.unref()),new o(0,0===a?-1:a,this._storage[e].value,!0)}},{key:"get",value:function(e){if(this._storage[e]){var t=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-(new Date).getTime():-1;return new o(0,t,this._storage[e].value,!1)}return null}},{key:"delete",value:function(e){return!!this._storage[e]&&(this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),delete this._storage[e],!0)}}]),e}()},5175:function(e,t,r){var n=r(6690).default,a=r(9728).default;e.exports=function(){"use strict";function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,e),this.value=t,this.expiresAt=r,this.timeoutId=a}return a(e,[{key:"value",get:function(){return this._value},set:function(e){this._value=parseInt(e)}},{key:"expiresAt",get:function(){return this._expiresAt},set:function(e){e instanceof Date||!Number.isInteger(e)||(e=new Date(e)),this._expiresAt=e}},{key:"timeoutId",get:function(){return this._timeoutId},set:function(e){this._timeoutId=e}}]),e}()},246:function(e,t,r){var n=r(9728).default,a=r(6690).default,i=r(6115).default,o=r(1655).default,s=r(6389).default,u=r(3496).default;e.exports=function(e){"use strict";o(r,e);var t=s(r);function r(e,n){var o;return a(this,r),o=t.call(this),Error.captureStackTrace&&Error.captureStackTrace(i(o),o.constructor),o.name="CustomError",o.message=e,n&&(o.extra=n),o}return n(r)}(u(Error))},9582:function(e,t,r){"use strict";e.exports=o;var n=r(6253),a=o.prototype,i=new Date%1e9;function o(e){e=e||{},this.id=e.id||(1e9*Math.random()>>>0)+i++,this.max=e.max||1/0,this.items=e.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(e.lastModified||new Date);for(var t,r,n=this.items.length;n--;)t=this.items[n],r=new Date(t.expires)-new Date,this._lookup[t.key]=t,r>0?this.expire(t.key,r):r<=0&&this.delete(t.key)}a.has=function(e){return e in this._lookup},a.get=function(e){if(!this.has(e))return null;var t=this._lookup[e];return t.refresh&&this.expire(e,t.refresh),this.items.splice(this.items.indexOf(t),1),this.items.push(t),t.value},a.meta=function(e){if(!this.has(e))return null;var t=this._lookup[e];return"meta"in t?t.meta:null},a.set=function(e,t,r){var n=this._lookup[e],a=this._lookup[e]={key:e,value:t};return this.lastModified=new Date,n?(clearTimeout(n.timeout),this.items.splice(this.items.indexOf(n),1,a)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(a),this.size++),r&&("ttl"in r&&this.expire(e,r.ttl),"meta"in r&&(a.meta=r.meta),r.refresh&&(a.refresh=r.ttl)),this},a.delete=function(e){var t=this._lookup[e];return!!t&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(t),1),clearTimeout(t.timeout),delete this._lookup[e],this.size--,this)},a.expire=function(e,t){var r=t||0,a=this._lookup[e];if(!a)return this;if("string"===typeof r&&(r=n(t)),"number"!==typeof r)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(a.timeout),a.timeout=setTimeout(this.delete.bind(this,a.key),r),a.expires=Number(new Date)+r,this},a.clear=function(){for(var e=this.items.length;e--;)this.delete(this.items[e].key);return this},a.toJSON=function(){for(var e,t=new Array(this.items.length),r=t.length;r--;)e=this.items[r],t[r]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:t}}},4306:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i=r(7126),o=function(){function e(t,r,a){n(this,e);var o=this;this._started=i(),this._rescheduled=0,this._scheduled=r,this._args=a,this._triggered=!1,this._timerWrapper=function(){o._rescheduled>0?(o._scheduled=o._rescheduled-(i()-o._started),o._schedule(o._scheduled)):(o._triggered=!0,t.apply(null,o._args))},this._timer=setTimeout(this._timerWrapper,r)}return a(e,[{key:"reschedule",value:function(e){e||(e=this._scheduled);var t=i();t+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=t,this._rescheduled=e)}},{key:"_schedule",value:function(e){this._triggered=!1,this._started=i(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}},{key:"clear",value:function(){clearTimeout(this._timer)}}]),e}();e.exports=function(){if("function"!==typeof arguments[0])throw new Error("callback needed");if("number"!==typeof arguments[1])throw new Error("timeout needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new o(arguments[0],arguments[1],e)}},7126:function(e){"use strict";e.exports=function(){return Date.now()}},8824:function(e,t,r){e.exports=function(e,t,r){if("number"!==typeof t)throw new Error("second argument must be a Number");var a,i,o,s,u,c,l=!0;Array.isArray(e)?(a=[],o=i=e.length):(s=Object.keys(e),a={},o=i=s.length);function f(e){function t(){r&&r(e,a),r=null}l?n(t):t()}function h(t,r,n){if(a[t]=n,r&&(u=!0),0===--o||r)f(r);else if(!u&&c<i){var l;s?(l=s[c],c+=1,e[l]((function(e,t){h(l,e,t)}))):(l=c,c+=1,e[l]((function(e,t){h(l,e,t)})))}}c=t,o?s?s.some((function(r,n){return e[r]((function(e,t){h(r,e,t)})),n===t-1})):e.some((function(e,r){return e((function(e,t){h(r,e,t)})),r===t-1})):f(null);l=!1};var n=r(8566)},622:function(e,t,r){var n=r(5362),a=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return a(e,t,r)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=o),o.prototype=Object.create(a.prototype),i(a,o),o.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},o.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},786:function(e,t,r){"use strict";var n=r(4883),a=/[\/\?<>\\:\*\|"]/g,i=/[\x00-\x1f\x80-\x9f]/g,o=/^\.+$/,s=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,u=/[\. ]+$/;function c(e,t){if("string"!==typeof e)throw new Error("Input must be string");var r=e.replace(a,t).replace(i,t).replace(o,t).replace(s,t).replace(u,t);return n(r,255)}e.exports=function(e,t){var r=t&&t.replacement||"",n=c(e,r);return""===r?n:c(n,"")}},4715:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=new Map;function o(){return(o=a(n().mark((function e(t,r,a){var o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),setTimeout((function(){throw e.t0}),1),e.abrupt("return","break");case 9:if(i.get(a)){e.next=11;break}return e.abrupt("return","break");case 11:return e.next=13,new Promise((function(e){var t=setTimeout(e,r);i.set(a,t)}));case 13:case"end":return e.stop()}}),e,null,[[0,5]])}));case 1:if(!i.get(a)){e.next=8;break}return e.delegateYield(o(),"t0",3);case 3:if("break"!==e.t0){e.next=6;break}return e.abrupt("break",8);case 6:e.next=1;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports={setDelayedInterval:function(e,t,r){r=r||t;var n="".concat(Date.now(),":").concat(Math.floor(1e6*Math.random())),a=setTimeout((function(){!function(e,t,r){o.apply(this,arguments)}(e,t,n)}),r);return i.set(n,a),n},clearDelayedInterval:function(e){var t=i.get(e);t&&(clearTimeout(t),i.delete(e))}}},5500:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default;function i(e,t){return e+o(t)}function o(e){var t=e;return 16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24}function s(e,t){return e[0]-t[0]}function u(e){return e[1]}e.exports=function(){function e(){n(this,e),this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}return a(e,[{key:"set",value:function(e,t){var r=this._internalPositionFor(e,!1);if(void 0===t)-1!==r&&(this._unsetInternalPos(r),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{var n=!1;-1===r?(r=this._data.length,this._setBit(e),this._changedData=!0):n=!0,this._setInternalPos(r,e,t,n),this._changedLength=!0}}},{key:"unset",value:function(e){this.set(e,void 0)}},{key:"get",value:function(e){this._sortData();var t=this._internalPositionFor(e,!0);if(-1!==t)return this._data[t][1]}},{key:"push",value:function(e){return this.set(this.length,e),this.length}},{key:"length",get:function(){if(this._sortData(),this._changedLength){var e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}},{key:"forEach",value:function(e){for(var t=0;t<this.length;)e(this.get(t),t,this),t++}},{key:"map",value:function(e){for(var t=0,r=new Array(this.length);t<this.length;)r[t]=e(this.get(t),t,this),t++;return r}},{key:"reduce",value:function(e,t){for(var r=0,n=t;r<this.length;){n=e(n,this.get(r),r),r++}return n}},{key:"find",value:function(e){for(var t,r,n=0;n<this.length&&!t;)t=e(r=this.get(n)),n++;return t?r:void 0}},{key:"_internalPositionFor",value:function(e,t){var r=this._bytePosFor(e,t);if(r>=this._bitArrays.length)return-1;var n=this._bitArrays[r],a=e-7*r;return(n&1<<a)>0?this._bitArrays.slice(0,r).reduce(i,0)+o(n&~(4294967295<<a+1))-1:-1}},{key:"_bytePosFor",value:function(e,t){for(var r=Math.floor(e/7),n=r+1;!t&&this._bitArrays.length<n;)this._bitArrays.push(0);return r}},{key:"_setBit",value:function(e){var t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-7*t}},{key:"_unsetBit",value:function(e){var t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-7*t)}},{key:"_setInternalPos",value:function(e,t,r,n){var a=this._data,i=[t,r];if(n)this._sortData(),a[e]=i;else{if(a.length)if(a[a.length-1][0]>=t)a.push(i);else if(a[0][0]<=t)a.unshift(i);else{var o=Math.round(a.length/2);this._data=a.slice(0,o).concat(i).concat(a.slice(o))}else this._data.push(i);this._changedData=!0,this._changedLength=!0}}},{key:"_unsetInternalPos",value:function(e){this._data.splice(e,1)}},{key:"_sortData",value:function(){this._changedData&&this._data.sort(s),this._changedData=!1}},{key:"bitField",value:function(){for(var e,t=[],r=8,n=0,a=0,i=this._bitArrays.slice();i.length||n;){0===n&&(e=i.shift(),n=7);var o=Math.min(n,r);a|=(e&~(255<<o))<<8-r,e>>>=o,n-=o,(r-=o)&&(n||i.length)||(t.push(a),a=0,r=8)}for(var s=t.length-1;s>0;s--){if(0!==t[s])break;t.pop()}return t}},{key:"compactArray",value:function(){return this._sortData(),this._data.map(u)}}]),e}()},3805:function(e,t,r){var n=r(7061).default,a=r(6737).default,i=r(8186).default;e.exports=function(e){if(e[Symbol.asyncIterator])return e;if(e.getReader)return i(n().mark((function t(){var r,i,o,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.getReader(),t.prev=1;case 2:return t.next=5,a(r.read());case 5:if(i=t.sent,o=i.done,s=i.value,!o){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,s;case 12:t.next=2;break;case 14:return t.prev=14,r.releaseLock(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,,14,17]])})))();throw new Error("unknown stream")}},5714:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i=r(6115).default,o=r(1588).default,s=r(3808).default,u=r(1655).default,c=r(6389).default,l=globalThis.AbortController,f=r(4306),h=function(e){u(r,e);var t=c(r);function r(e){var a;return n(this,r),(a=t.call(this))._ms=e,a._timer=f((function(){return a.abort()}),e),Object.setPrototypeOf(i(a),r.prototype),a}return a(r,[{key:"abort",value:function(){return this._timer.clear(),o(s(r.prototype),"abort",this).call(this)}},{key:"clear",value:function(){this._timer.clear()}},{key:"reset",value:function(){var e=this;this._timer.clear(),this._timer=f((function(){return e.abort()}),this._ms)}}]),r}(l);e.exports={TimeoutController:h}},4883:function(e,t,r){"use strict";var n=r(5216),a=r(6761);e.exports=n.bind(null,a)},5216:function(e){"use strict";function t(e){return e>=55296&&e<=56319}function r(e){return e>=56320&&e<=57343}e.exports=function(e,n,a){if("string"!==typeof n)throw new Error("Input must be string");for(var i,o,s=n.length,u=0,c=0;c<s;c+=1){if(i=n.charCodeAt(c),o=n[c],t(i)&&r(n.charCodeAt(c+1))&&(o+=n[c+=1]),(u+=e(o))===a)return n.slice(0,c+1);if(u>a)return n.slice(0,c-o.length+1)}return n}},6761:function(e){"use strict";function t(e){return e>=55296&&e<=56319}function r(e){return e>=56320&&e<=57343}e.exports=function(e){if("string"!==typeof e)throw new Error("Input must be string");for(var n=e.length,a=0,i=null,o=null,s=0;s<n;s++)r(i=e.charCodeAt(s))?null!=o&&t(o)?a+=1:a+=3:i<=127?a+=1:i>=128&&i<=2047?a+=2:i>=2048&&i<=65535&&(a+=3),o=i;return a}},1065:function(e){e.exports=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a}},9661:function(e){e.exports=function e(r,n,a){n=n||[];var i=a=a||0;for(;r>=t;)n[a++]=255&r|128,r/=128;for(;-128&r;)n[a++]=255&r|128,r>>>=7;return n[a]=0|r,e.bytes=a-i+1,n};var t=Math.pow(2,31)},8982:function(e,t,r){e.exports={encode:r(9661),decode:r(1065),encodingLength:r(5418)}},5418:function(e){var t=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),a=Math.pow(2,28),i=Math.pow(2,35),o=Math.pow(2,42),s=Math.pow(2,49),u=Math.pow(2,56),c=Math.pow(2,63);e.exports=function(e){return e<t?1:e<r?2:e<n?3:e<a?4:e<i?5:e<o?6:e<s?7:e<u?8:e<c?9:10}},2086:function(e,t,r){"use strict";var n=r(8982);e.exports=function(e){if(!(e instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");for(var t=[];e.length>0;){var r=n.decode(e);t.push(r),e=e.slice(n.decode.bytes)}return t}},471:function(e){e.exports=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s||i>49)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a}},5016:function(e){e.exports=function e(r,n,a){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");n=n||[];var i=a=a||0;for(;r>=t;)n[a++]=255&r|128,r/=128;for(;-128&r;)n[a++]=255&r|128,r>>>=7;return n[a]=0|r,e.bytes=a-i+1,n};var t=Math.pow(2,31)},6494:function(e,t,r){e.exports={encode:r(5016),decode:r(471),encodingLength:r(4125)}},4125:function(e){var t=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),a=Math.pow(2,28),i=Math.pow(2,35),o=Math.pow(2,42),s=Math.pow(2,49),u=Math.pow(2,56),c=Math.pow(2,63);e.exports=function(e){return e<t?1:e<r?2:e<n?3:e<a?4:e<i?5:e<o?6:e<s?7:e<u?8:e<c?9:10}},2049:function(){},6245:function(){},1586:function(){},1025:function(){},5057:function(){},5745:function(){},2500:function(){},3090:function(){},4642:function(e,t,r){var n=r(3801);function a(e){var t,r;function a(t,r){try{var o=e[t](r),s=o.value,u=s instanceof n;Promise.resolve(u?s.v:s).then((function(r){if(u){var n="return"===t?"return":"next";if(!s.k||r.done)return a(n,r);r=e[n](r).value}i(o.done?"return":"normal",r)}),(function(e){a("throw",e)}))}catch(c){i("throw",c)}}function i(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?a(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise((function(i,o){var s={key:e,arg:n,resolve:i,reject:o,next:null};r?r=r.next=s:(t=r=s,a(e,n))}))},"function"!=typeof e.return&&(this.return=void 0)}a.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},a.prototype.next=function(e){return this._invoke("next",e)},a.prototype.throw=function(e){return this._invoke("throw",e)},a.prototype.return=function(e){return this._invoke("return",e)},e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},3801:function(e){e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,r){var n=r(3897);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},8131:function(e,t,r){var n=r(3801);e.exports=function(e){var t={},r=!1;function a(t,a){return r=!0,a=new Promise((function(r){r(e[t](a))})),{done:!1,value:new n(a,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):a("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return a("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):a("return",e)}),t},e.exports.__esModule=!0,e.exports.default=e.exports},8237:function(e){function t(e){function r(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return t=function(e){this.s=e,this.n=e.next},t.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):r(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):r(t.apply(this.s,arguments))}},new t(e)}e.exports=function(e){var r,n,a,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,a=Symbol.iterator);i--;){if(n&&null!=(r=e[n]))return r.call(e);if(a&&null!=(r=e[a]))return new t(r.call(e));n="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,a)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(a,i){var o=e.apply(r,n);function s(e){t(o,a,i,s,u,"next",e)}function u(e){t(o,a,i,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6737:function(e,t,r){var n=r(3801);e.exports=function(e){return new n(e,0)},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,r){var n=r(6015),a=r(9617);function i(t,r,o){return a()?(e.exports=i=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,r){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return r&&n(i,r.prototype),i},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(null,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,r){var n=r(4062);function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,n(a.key),a)}}e.exports=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,r){var n=r(6116);e.exports=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,r){var n=r(3808),a=r(9617),i=r(4993);e.exports=function(e){var t=a();return function(){var r,a=n(e);if(t){var o=n(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return i(this,r)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,r){var n=r(4062);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,r){var n=r(1753);function a(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=a=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,r){var a=n(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(this,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,r){var n=r(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(l){c=!0,a=l}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2122:function(e,t,r){var n=r(8416);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},215:function(e,t,r){var n=r(7071);e.exports=function(e,t){if(null==e)return{};var r,a,i=n(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},7071:function(e){e.exports=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,r){var n=r(8698).default,a=r(6115);e.exports=function(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,r){var n=r(8698).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,i=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(R){f=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),s=new I(n||[]);return o(i,"_invoke",{value:E(e,r,s)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(R){return{type:"throw",arg:R}}}t.wrap=h;var d={};function v(){}function y(){}function b(){}var g={};f(g,u,(function(){return this}));var m=Object.getPrototypeOf,w=m&&m(m(T([])));w&&w!==r&&i.call(w,u)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,s,u){var c=p(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}})}function E(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return D()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=S(o,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=p(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function T(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:D}}function D(){return{value:void 0,done:!0}}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=f(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,f(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(_.prototype),f(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new _(h(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(k),f(k,l,"Generator"),f(k,u,(function(){return this})),f(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;C(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,r){var n=r(5372),a=r(8872),i=r(6116),o=r(2218);e.exports=function(e,t){return n(e)||a(e,t)||i(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,r){var n=r(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,r){var n=r(3405),a=r(9498),i=r(6116),o=r(2281);e.exports=function(e){return n(e)||a(e)||i(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,r){var n=r(8698).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,r){var n=r(8698).default,a=r(5036);e.exports=function(e){var t=a(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,r){var n=r(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},8186:function(e,t,r){var n=r(4642);e.exports=function(e){return function(){return new n(e.apply(this,arguments))}},e.exports.__esModule=!0,e.exports.default=e.exports},3496:function(e,t,r){var n=r(3808),a=r(6015),i=r(6035),o=r(3515);function s(t){var r="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!i(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return o(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},2714:function(e){!function(){e.exports=y;var t=86400,r=3200,n=1168776,a=t*n,i=1e3*a,o=864e13,s=4294967296,u=1e6,c="000000000",l=Math.trunc||function(e){var t=e-e%1;return 0==t&&(e<0||0===e&&1/e!=1/0)?-0:t},f=y.prototype,h=(y.fromDate=function(e){return new y(+e)},y.fromInt64BE=k(0,1,2,3,0,4),y.fromInt64LE=k(3,2,1,0,4,0),y.fromString=function(e){var t,r=new y;e=(e+="").replace(/^\s*[+\-]?\d+/,(function(e){var t=1970+((e=+e)-1970)%400;return r.year=e-t,t})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(e,r,n){return r<0&&(n*=-1),t=6e4*(60*+r+ +n),""})).replace(/\.\d+$/,(function(e){return r.nano=+(e+c).substr(1,9),""})).split(/\D+/);if(1<e.length?e[1]--:e[1]=0,r.time=t=Date.UTC.apply(Date,e)-(t||0),isNaN(t))throw new TypeError("Invalid Date");return b(r)},y.fromTimeT=function(e){return m(e,0)},f.year=0,f.time=0,f.nano=0,f.addNano=function(e){return this.nano+=+e||0,this},f.getNano=function(){var e=b(this);return(e.time%1e3*u+ +e.nano+1e9)%1e9},f.getTimeT=function(){var e=b(this),a=Math.floor(e.time/1e3);return(e=e.year)&&(a+=e*n*t/r),a},f.getYear=function(){return this.toDate().getUTCFullYear()+this.year},f.toDate=function(){return g(b(this).time)},f.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},f.toString=function(e){var t=this,r=t.toDate(),n={H:function(){return _(r.getUTCHours())},L:function(){return E(r.getUTCMilliseconds(),3)},M:function(){return _(r.getUTCMinutes())},N:function(){return E(t.getNano(),9)},S:function(){return _(r.getUTCSeconds())},Y:function(){var e=t.getYear();return 999999<e?"+"+e:9999<e?"+"+E(e,6):0<=e?E(e,4):-999999<=e?"-"+E(-e,6):e},a:function(){return d[r.getUTCDay()]},b:function(){return p[r.getUTCMonth()]},d:function(){return _(r.getUTCDate())},e:function(){return function(e){return(9<e?"":" ")+(0|e)}(r.getUTCDate())},m:function(){return _(r.getUTCMonth()+1)}};return function e(t){return t.replace(/%./g,(function(t){var r=t[1],a=v[r];r=n[r];return a?e(a):r?r():t}))}(e||h)},f.writeInt64BE=w(0,1,2,3,0,4),f.writeInt64LE=w(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],v={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return y;function y(e,t,r){var n=this;if(!(n instanceof y))return new y(e,t,r);n.time=+e||0,n.nano=+t||0,n.year=+r||0,b(n)}function b(e){var t,n,a,s=e.year,c=e.time,f=e.nano,h=((f<0||u<=f)&&(f-=(n=Math.floor(f/u))*u,c+=n,n=1),s%r);return(c<-o||o<c||h)&&((t=l(c/i))&&(s+=t*r,c-=t*i),(a=g(c)).setUTCFullYear(h+a.getUTCFullYear()),a=(c=+a)+(t=l((s-=h)/r))*i,t&&-o<=a&&a<=o&&(s-=t*r,c=a),n=1),n&&(e.year=s,e.time=c,e.nano=f),e}function g(e){var t=new Date(0);return t.setTime(e),t}function m(e,t){e=+e||0;var n=l((t=(0|t)*s)/a)+l(e/a);return(e=l((t=t%a+e%a)/a))&&(n+=e,t-=e*a),new y(1e3*t,0,n*r)}function w(e,a,i,o,u,c){return function(e,a){var i=b(this);x(e=e||new Array(8),a|=0);var o=Math.floor(i.time/1e3),h=(i=i.year*(n*t/r),l(i/s)+l(o/s));i=i%s+o%s;return(o=Math.floor(i/s))&&(h+=o,i-=o*s),f(e,a+u,h),f(e,a+c,i),e};function f(t,r,n){t[r+e]=n>>24&255,t[r+a]=n>>16&255,t[r+i]=n>>8&255,t[r+o]=255&n}}function k(e,t,r,n,a,i){return function(e,t){x(e,t|=0);var r=o(e,t+a);return m(o(e,t+i),r)};function o(a,i){return 16777216*a[i+e]+(a[i+t]<<16|a[i+r]<<8|a[i+n])}}function x(e,t){if(null==(e=e&&e.length))throw new TypeError("Invalid Buffer");if(e<t+8)throw new RangeError("Out of range")}function _(e){return(9<e?"":"0")+(0|e)}function E(e,t){return(c+(0|e)).substr(-t)}}()}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=__webpack_modules__,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};__webpack_require__.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var a=Object.create(null);__webpack_require__.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((function(e){i[e]=function(){return r[e]}}));return i.default=function(){return r},__webpack_require__.d(a,i),a}}(),__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,r){return __webpack_require__.f[r](e,t),t}),[]))},__webpack_require__.u=function(e){return"static/js/"+e+".23ce5e19.chunk.js"},__webpack_require__.miniCssF=function(e){},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="example:";__webpack_require__.l=function(r,n,a,i){if(e[r])e[r].push(n);else{var o,s;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var l=u[c];if(l.getAttribute("src")==r||l.getAttribute("data-webpack")==t+a){o=l;break}}o||(s=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,__webpack_require__.nc&&o.setAttribute("nonce",__webpack_require__.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[n];var f=function(t,n){o.onerror=o.onload=null,clearTimeout(h);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=f.bind(null,o.onerror),o.onload=f.bind(null,o.onload),s&&document.head.appendChild(o)}}}(),__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/ipfs-tag/react/",function(){var e={179:0};__webpack_require__.f.j=function(t,r){var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var a=new Promise((function(r,a){n=e[t]=[r,a]}));r.push(n[2]=a);var i=__webpack_require__.p+__webpack_require__.u(t),o=new Error;__webpack_require__.l(i,(function(r){if(__webpack_require__.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,n[1](o)}}),"chunk-"+t,t)}};var t=function(t,r){var n,a,i=r[0],o=r[1],s=r[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)__webpack_require__.o(o,n)&&(__webpack_require__.m[n]=o[n]);if(s)s(__webpack_require__)}for(t&&t(r);u<i.length;u++)a=i[u],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkexample=self.webpackChunkexample||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var __webpack_exports__={};!function(){"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{base58btc:function(){return oi},base58flickr:function(){return si}});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{base32:function(){return ui},base32hex:function(){return hi},base32hexpad:function(){return di},base32hexpadupper:function(){return vi},base32hexupper:function(){return pi},base32pad:function(){return li},base32padupper:function(){return fi},base32upper:function(){return ci},base32z:function(){return yi}});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{code:function(){return eo},createLink:function(){return Xi},createNode:function(){return Zi},decode:function(){return ro},encode:function(){return to},name:function(){return $i},prepare:function(){return Qi},validate:function(){return Ji}});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{code:function(){return Hs},decode:function(){return Ws},encode:function(){return Gs},name:function(){return Ks}});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{base64:function(){return Xs},base64pad:function(){return $s},base64url:function(){return eu},base64urlpad:function(){return tu}});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{code:function(){return du},decode:function(){return yu},encode:function(){return vu},format:function(){return bu},name:function(){return pu},parse:function(){return mu},stringify:function(){return bu}});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{code:function(){return mc},decode:function(){return Ec},encode:function(){return _c},name:function(){return gc},toGeneral:function(){return xc}});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{identity:function(){return Ac}});var u={};__webpack_require__.r(u),__webpack_require__.d(u,{identity:function(){return Cc}});var c={};__webpack_require__.r(c),__webpack_require__.d(c,{base2:function(){return Ic}});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{base8:function(){return Tc}});var f={};__webpack_require__.r(f),__webpack_require__.d(f,{base10:function(){return Dc}});var h={};__webpack_require__.r(h),__webpack_require__.d(h,{base16:function(){return Rc},base16upper:function(){return Pc}});var p={};__webpack_require__.r(p),__webpack_require__.d(p,{base36:function(){return Nc},base36upper:function(){return Lc}});var d={};__webpack_require__.r(d),__webpack_require__.d(d,{base256emoji:function(){return Mc}});var v={};__webpack_require__.r(v),__webpack_require__.d(v,{sha256:function(){return Fc},sha512:function(){return Vc}});var y={};__webpack_require__.r(y),__webpack_require__.d(y,{code:function(){return qc},decode:function(){return Hc},encode:function(){return Kc},name:function(){return jc}});var b={};__webpack_require__.r(b),__webpack_require__.d(b,{code:function(){return Qc},decode:function(){return Zc},encode:function(){return Jc},name:function(){return Yc}});var g={};__webpack_require__.r(g),__webpack_require__.d(g,{identity:function(){return ml}});var m={};__webpack_require__.r(m),__webpack_require__.d(m,{base2:function(){return wl}});var w={};__webpack_require__.r(w),__webpack_require__.d(w,{base8:function(){return kl}});var k={};__webpack_require__.r(k),__webpack_require__.d(k,{base10:function(){return xl}});var x={};__webpack_require__.r(x),__webpack_require__.d(x,{base16:function(){return _l},base16upper:function(){return El}});var _={};__webpack_require__.r(_),__webpack_require__.d(_,{base32:function(){return Sl},base32hex:function(){return Tl},base32hexpad:function(){return Rl},base32hexpadupper:function(){return Pl},base32hexupper:function(){return Dl},base32pad:function(){return Cl},base32padupper:function(){return Il},base32upper:function(){return Al},base32z:function(){return Nl}});var E={};__webpack_require__.r(E),__webpack_require__.d(E,{base36:function(){return Ll},base36upper:function(){return Ol}});var S={};__webpack_require__.r(S),__webpack_require__.d(S,{base58btc:function(){return Bl},base58flickr:function(){return Ul}});var A={};__webpack_require__.r(A),__webpack_require__.d(A,{base64:function(){return Ml},base64pad:function(){return zl},base64url:function(){return Fl},base64urlpad:function(){return Vl}});var C={};__webpack_require__.r(C),__webpack_require__.d(C,{base256emoji:function(){return Hl}});var I={};__webpack_require__.r(I),__webpack_require__.d(I,{sha256:function(){return df},sha512:function(){return vf}});var T={};__webpack_require__.r(T),__webpack_require__.d(T,{identity:function(){return bf}});var D={};__webpack_require__.r(D),__webpack_require__.d(D,{code:function(){return mf},decode:function(){return kf},encode:function(){return wf},name:function(){return gf}});var R={};__webpack_require__.r(R),__webpack_require__.d(R,{code:function(){return Sf},decode:function(){return Cf},encode:function(){return Af},name:function(){return Ef}});var P={};__webpack_require__.r(P),__webpack_require__.d(P,{base58btc:function(){return sp},base58flickr:function(){return up}});var N={};__webpack_require__.r(N),__webpack_require__.d(N,{base32:function(){return cp},base32hex:function(){return pp},base32hexpad:function(){return vp},base32hexpadupper:function(){return yp},base32hexupper:function(){return dp},base32pad:function(){return fp},base32padupper:function(){return hp},base32upper:function(){return lp},base32z:function(){return bp}});var L={};__webpack_require__.r(L),__webpack_require__.d(L,{identity:function(){return Tp}});var O={};__webpack_require__.r(O),__webpack_require__.d(O,{base2:function(){return Dp}});var B={};__webpack_require__.r(B),__webpack_require__.d(B,{base8:function(){return Rp}});var U={};__webpack_require__.r(U),__webpack_require__.d(U,{base10:function(){return Pp}});var M={};__webpack_require__.r(M),__webpack_require__.d(M,{base16:function(){return Np},base16upper:function(){return Lp}});var z={};__webpack_require__.r(z),__webpack_require__.d(z,{base36:function(){return Op},base36upper:function(){return Bp}});var F={};__webpack_require__.r(F),__webpack_require__.d(F,{base64:function(){return Up},base64pad:function(){return Mp},base64url:function(){return zp},base64urlpad:function(){return Fp}});var V={};__webpack_require__.r(V),__webpack_require__.d(V,{base256emoji:function(){return Kp}});var j={};__webpack_require__.r(j),__webpack_require__.d(j,{sha256:function(){return Yp},sha512:function(){return Qp}});var q={};__webpack_require__.r(q),__webpack_require__.d(q,{identity:function(){return Zp}});var K={};__webpack_require__.r(K),__webpack_require__.d(K,{code:function(){return $p},decode:function(){return td},encode:function(){return ed},name:function(){return Xp}});var H={};__webpack_require__.r(H),__webpack_require__.d(H,{code:function(){return id},decode:function(){return sd},encode:function(){return od},name:function(){return ad}});var G={};__webpack_require__.r(G),__webpack_require__.d(G,{RsaPrivateKey:function(){return Ew},RsaPublicKey:function(){return _w},fromJwk:function(){return Iw},generateKeyPair:function(){return Dw},unmarshalRsaPrivateKey:function(){return Sw},unmarshalRsaPublicKey:function(){return Cw}});var W={};__webpack_require__.r(W),__webpack_require__.d(W,{Ed25519PrivateKey:function(){return Qk},Ed25519PublicKey:function(){return Yk},generateKeyPair:function(){return Xk},generateKeyPairFromSeed:function(){return ex},unmarshalEd25519PrivateKey:function(){return Jk},unmarshalEd25519PublicKey:function(){return Zk}});var Y={};__webpack_require__.r(Y),__webpack_require__.d(Y,{Secp256k1PrivateKey:function(){return lx},Secp256k1PublicKey:function(){return cx},generateKeyPair:function(){return px},unmarshalSecp256k1PrivateKey:function(){return fx},unmarshalSecp256k1PublicKey:function(){return hx}});var Q={};__webpack_require__.r(Q),__webpack_require__.d(Q,{base32:function(){return Mx},base32hex:function(){return jx},base32hexpad:function(){return Kx},base32hexpadupper:function(){return Hx},base32hexupper:function(){return qx},base32pad:function(){return Fx},base32padupper:function(){return Vx},base32upper:function(){return zx},base32z:function(){return Gx}});var J={};__webpack_require__.r(J),__webpack_require__.d(J,{base58btc:function(){return y_},base58flickr:function(){return b_}});var Z={};__webpack_require__.r(Z),__webpack_require__.d(Z,{identity:function(){return T_}});var X={};__webpack_require__.r(X),__webpack_require__.d(X,{base2:function(){return D_}});var $={};__webpack_require__.r($),__webpack_require__.d($,{base8:function(){return R_}});var ee={};__webpack_require__.r(ee),__webpack_require__.d(ee,{base10:function(){return P_}});var te={};__webpack_require__.r(te),__webpack_require__.d(te,{base16:function(){return N_},base16upper:function(){return L_}});var re={};__webpack_require__.r(re),__webpack_require__.d(re,{base36:function(){return O_},base36upper:function(){return B_}});var ne={};__webpack_require__.r(ne),__webpack_require__.d(ne,{base64:function(){return U_},base64pad:function(){return M_},base64url:function(){return z_},base64urlpad:function(){return F_}});var ae={};__webpack_require__.r(ae),__webpack_require__.d(ae,{base256emoji:function(){return H_}});var ie={};__webpack_require__.r(ie),__webpack_require__.d(ie,{sha256:function(){return Q_},sha512:function(){return J_}});var oe={};__webpack_require__.r(oe),__webpack_require__.d(oe,{identity:function(){return X_}});var se={};__webpack_require__.r(se),__webpack_require__.d(se,{code:function(){return eE},decode:function(){return rE},encode:function(){return tE},name:function(){return $_}});var ue={};__webpack_require__.r(ue),__webpack_require__.d(ue,{code:function(){return oE},decode:function(){return uE},encode:function(){return sE},name:function(){return iE}});var ce={};__webpack_require__.r(ce),__webpack_require__.d(ce,{code:function(){return ZI},createLink:function(){return QI},createNode:function(){return YI},decode:function(){return $I},encode:function(){return XI},name:function(){return JI},prepare:function(){return GI},validate:function(){return WI}});var le={};__webpack_require__.r(le),__webpack_require__.d(le,{code:function(){return iT},decode:function(){return sT},encode:function(){return oT},name:function(){return aT}});var fe={};__webpack_require__.r(fe),__webpack_require__.d(fe,{InvalidValueError:function(){return Mq},MissingRepoOptionsError:function(){return zq},NonReversibleMigrationError:function(){return Oq},NotInitializedRepoError:function(){return Bq},RequiredParameterError:function(){return Uq}});var he={};__webpack_require__.r(he),__webpack_require__.d(he,{base58btc:function(){return FW},base58flickr:function(){return VW}});var pe={};__webpack_require__.r(pe),__webpack_require__.d(pe,{base32:function(){return jW},base32hex:function(){return GW},base32hexpad:function(){return YW},base32hexpadupper:function(){return QW},base32hexupper:function(){return WW},base32pad:function(){return KW},base32padupper:function(){return HW},base32upper:function(){return qW},base32z:function(){return JW}});var de={};__webpack_require__.r(de),__webpack_require__.d(de,{identity:function(){return uY}});var ve={};__webpack_require__.r(ve),__webpack_require__.d(ve,{base2:function(){return cY}});var ye={};__webpack_require__.r(ye),__webpack_require__.d(ye,{base8:function(){return lY}});var be={};__webpack_require__.r(be),__webpack_require__.d(be,{base10:function(){return fY}});var ge={};__webpack_require__.r(ge),__webpack_require__.d(ge,{base16:function(){return hY},base16upper:function(){return pY}});var me={};__webpack_require__.r(me),__webpack_require__.d(me,{base36:function(){return dY},base36upper:function(){return vY}});var we={};__webpack_require__.r(we),__webpack_require__.d(we,{base64:function(){return yY},base64pad:function(){return bY},base64url:function(){return gY},base64urlpad:function(){return mY}});var ke={};__webpack_require__.r(ke),__webpack_require__.d(ke,{base256emoji:function(){return _Y}});var xe={};__webpack_require__.r(xe),__webpack_require__.d(xe,{sha256:function(){return CY},sha512:function(){return IY}});var _e={};__webpack_require__.r(_e),__webpack_require__.d(_e,{identity:function(){return DY}});var Ee={};__webpack_require__.r(Ee),__webpack_require__.d(Ee,{code:function(){return PY},decode:function(){return LY},encode:function(){return NY},name:function(){return RY}});var Se={};__webpack_require__.r(Se),__webpack_require__.d(Se,{code:function(){return MY},decode:function(){return FY},encode:function(){return zY},name:function(){return UY}});var Ae={};__webpack_require__.r(Ae),__webpack_require__.d(Ae,{base58btc:function(){return GQ},base58flickr:function(){return WQ}});var Ce={};__webpack_require__.r(Ce),__webpack_require__.d(Ce,{base32:function(){return YQ},base32hex:function(){return XQ},base32hexpad:function(){return eJ},base32hexpadupper:function(){return tJ},base32hexupper:function(){return $Q},base32pad:function(){return JQ},base32padupper:function(){return ZQ},base32upper:function(){return QQ},base32z:function(){return rJ}});var Ie={};__webpack_require__.r(Ie),__webpack_require__.d(Ie,{identity:function(){return dJ}});var Te={};__webpack_require__.r(Te),__webpack_require__.d(Te,{base2:function(){return vJ}});var De={};__webpack_require__.r(De),__webpack_require__.d(De,{base8:function(){return yJ}});var Re={};__webpack_require__.r(Re),__webpack_require__.d(Re,{base10:function(){return bJ}});var Pe={};__webpack_require__.r(Pe),__webpack_require__.d(Pe,{base16:function(){return gJ},base16upper:function(){return mJ}});var Ne={};__webpack_require__.r(Ne),__webpack_require__.d(Ne,{base36:function(){return wJ},base36upper:function(){return kJ}});var Le={};__webpack_require__.r(Le),__webpack_require__.d(Le,{base64:function(){return xJ},base64pad:function(){return _J},base64url:function(){return EJ},base64urlpad:function(){return SJ}});var Oe={};__webpack_require__.r(Oe),__webpack_require__.d(Oe,{base256emoji:function(){return TJ}});var Be={};__webpack_require__.r(Be),__webpack_require__.d(Be,{sha256:function(){return NJ},sha512:function(){return LJ}});var Ue={};__webpack_require__.r(Ue),__webpack_require__.d(Ue,{identity:function(){return BJ}});var Me={};__webpack_require__.r(Me),__webpack_require__.d(Me,{code:function(){return MJ},decode:function(){return FJ},encode:function(){return zJ},name:function(){return UJ}});var ze={};__webpack_require__.r(ze),__webpack_require__.d(ze,{code:function(){return KJ},decode:function(){return GJ},encode:function(){return HJ},name:function(){return qJ}});var Fe={};__webpack_require__.r(Fe),__webpack_require__.d(Fe,{sha256:function(){return LX},sha512:function(){return OX}});var Ve={};__webpack_require__.r(Ve),__webpack_require__.d(Ve,{base58btc:function(){return GX},base58flickr:function(){return WX}});var je={};__webpack_require__.r(je),__webpack_require__.d(je,{base32:function(){return YX},base32hex:function(){return XX},base32hexpad:function(){return e$},base32hexpadupper:function(){return t$},base32hexupper:function(){return $X},base32pad:function(){return JX},base32padupper:function(){return ZX},base32upper:function(){return QX},base32z:function(){return r$}});var qe={};__webpack_require__.r(qe),__webpack_require__.d(qe,{identity:function(){return n$}});var Ke={};__webpack_require__.r(Ke),__webpack_require__.d(Ke,{base2:function(){return a$}});var He={};__webpack_require__.r(He),__webpack_require__.d(He,{base8:function(){return i$}});var Ge={};__webpack_require__.r(Ge),__webpack_require__.d(Ge,{base10:function(){return o$}});var We={};__webpack_require__.r(We),__webpack_require__.d(We,{base16:function(){return s$},base16upper:function(){return u$}});var Ye={};__webpack_require__.r(Ye),__webpack_require__.d(Ye,{base36:function(){return c$},base36upper:function(){return l$}});var Qe={};__webpack_require__.r(Qe),__webpack_require__.d(Qe,{base64:function(){return f$},base64pad:function(){return h$},base64url:function(){return p$},base64urlpad:function(){return d$}});var Je={};__webpack_require__.r(Je),__webpack_require__.d(Je,{base256emoji:function(){return g$}});var Ze={};__webpack_require__.r(Ze),__webpack_require__.d(Ze,{identity:function(){return w$}});var Xe={};__webpack_require__.r(Xe),__webpack_require__.d(Xe,{code:function(){return x$},decode:function(){return E$},encode:function(){return _$},name:function(){return k$}});var $e={};__webpack_require__.r($e),__webpack_require__.d($e,{code:function(){return I$},decode:function(){return D$},encode:function(){return T$},name:function(){return C$}});var et={};__webpack_require__.r(et),__webpack_require__.d(et,{base58btc:function(){return z1},base58flickr:function(){return F1}});var tt={};__webpack_require__.r(tt),__webpack_require__.d(tt,{base32:function(){return V1},base32hex:function(){return H1},base32hexpad:function(){return W1},base32hexpadupper:function(){return Y1},base32hexupper:function(){return G1},base32pad:function(){return q1},base32padupper:function(){return K1},base32upper:function(){return j1},base32z:function(){return Q1}});var rt={};__webpack_require__.r(rt),__webpack_require__.d(rt,{identity:function(){return s0}});var nt={};__webpack_require__.r(nt),__webpack_require__.d(nt,{base2:function(){return u0}});var at={};__webpack_require__.r(at),__webpack_require__.d(at,{base8:function(){return c0}});var it={};__webpack_require__.r(it),__webpack_require__.d(it,{base10:function(){return l0}});var ot={};__webpack_require__.r(ot),__webpack_require__.d(ot,{base16:function(){return f0},base16upper:function(){return h0}});var st={};__webpack_require__.r(st),__webpack_require__.d(st,{base36:function(){return p0},base36upper:function(){return d0}});var ut={};__webpack_require__.r(ut),__webpack_require__.d(ut,{base64:function(){return v0},base64pad:function(){return y0},base64url:function(){return b0},base64urlpad:function(){return g0}});var ct={};__webpack_require__.r(ct),__webpack_require__.d(ct,{base256emoji:function(){return x0}});var lt={};__webpack_require__.r(lt),__webpack_require__.d(lt,{sha256:function(){return A0},sha512:function(){return C0}});var ft={};__webpack_require__.r(ft),__webpack_require__.d(ft,{identity:function(){return T0}});var ht={};__webpack_require__.r(ht),__webpack_require__.d(ht,{code:function(){return R0},decode:function(){return N0},encode:function(){return P0},name:function(){return D0}});var pt={};__webpack_require__.r(pt),__webpack_require__.d(pt,{code:function(){return U0},decode:function(){return z0},encode:function(){return M0},name:function(){return B0}});var dt={};__webpack_require__.r(dt),__webpack_require__.d(dt,{Decoder:function(){return r8},Encoder:function(){return t8},PacketType:function(){return $6},protocol:function(){return e8}});var vt={};__webpack_require__.r(vt),__webpack_require__.d(vt,{base58btc:function(){return d7},base58flickr:function(){return v7}});var yt={};__webpack_require__.r(yt),__webpack_require__.d(yt,{base32:function(){return y7},base32hex:function(){return w7},base32hexpad:function(){return x7},base32hexpadupper:function(){return _7},base32hexupper:function(){return k7},base32pad:function(){return g7},base32padupper:function(){return m7},base32upper:function(){return b7},base32z:function(){return E7}});var bt={};__webpack_require__.r(bt),__webpack_require__.d(bt,{identity:function(){return B7}});var gt={};__webpack_require__.r(gt),__webpack_require__.d(gt,{base2:function(){return U7}});var mt={};__webpack_require__.r(mt),__webpack_require__.d(mt,{base8:function(){return M7}});var wt={};__webpack_require__.r(wt),__webpack_require__.d(wt,{base10:function(){return z7}});var kt={};__webpack_require__.r(kt),__webpack_require__.d(kt,{base16:function(){return F7},base16upper:function(){return V7}});var xt={};__webpack_require__.r(xt),__webpack_require__.d(xt,{base36:function(){return j7},base36upper:function(){return q7}});var _t={};__webpack_require__.r(_t),__webpack_require__.d(_t,{base64:function(){return K7},base64pad:function(){return H7},base64url:function(){return G7},base64urlpad:function(){return W7}});var Et={};__webpack_require__.r(Et),__webpack_require__.d(Et,{base256emoji:function(){return Z7}});var St={};__webpack_require__.r(St),__webpack_require__.d(St,{sha256:function(){return t9},sha512:function(){return r9}});var At={};__webpack_require__.r(At),__webpack_require__.d(At,{identity:function(){return a9}});var Ct={};__webpack_require__.r(Ct),__webpack_require__.d(Ct,{code:function(){return o9},decode:function(){return u9},encode:function(){return s9},name:function(){return i9}});var It={};__webpack_require__.r(It),__webpack_require__.d(It,{code:function(){return h9},decode:function(){return d9},encode:function(){return p9},name:function(){return f9}});var Tt={};__webpack_require__.r(Tt),__webpack_require__.d(Tt,{base58btc:function(){return Eee},base58flickr:function(){return See}});var Dt={};__webpack_require__.r(Dt),__webpack_require__.d(Dt,{base32:function(){return Aee},base32hex:function(){return Dee},base32hexpad:function(){return Pee},base32hexpadupper:function(){return Nee},base32hexupper:function(){return Ree},base32pad:function(){return Iee},base32padupper:function(){return Tee},base32upper:function(){return Cee},base32z:function(){return Lee}});var Rt={};__webpack_require__.r(Rt),__webpack_require__.d(Rt,{identity:function(){return Gee}});var Pt={};__webpack_require__.r(Pt),__webpack_require__.d(Pt,{base2:function(){return Wee}});var Nt={};__webpack_require__.r(Nt),__webpack_require__.d(Nt,{base8:function(){return Yee}});var Lt={};__webpack_require__.r(Lt),__webpack_require__.d(Lt,{base10:function(){return Qee}});var Ot={};__webpack_require__.r(Ot),__webpack_require__.d(Ot,{base16:function(){return Jee},base16upper:function(){return Zee}});var Bt={};__webpack_require__.r(Bt),__webpack_require__.d(Bt,{base36:function(){return Xee},base36upper:function(){return $ee}});var Ut={};__webpack_require__.r(Ut),__webpack_require__.d(Ut,{base64:function(){return ete},base64pad:function(){return tte},base64url:function(){return rte},base64urlpad:function(){return nte}});var Mt={};__webpack_require__.r(Mt),__webpack_require__.d(Mt,{base256emoji:function(){return ste}});var zt={};__webpack_require__.r(zt),__webpack_require__.d(zt,{sha256:function(){return fte},sha512:function(){return hte}});var Ft={};__webpack_require__.r(Ft),__webpack_require__.d(Ft,{identity:function(){return dte}});var Vt={};__webpack_require__.r(Vt),__webpack_require__.d(Vt,{code:function(){return yte},decode:function(){return gte},encode:function(){return bte},name:function(){return vte}});var jt={};__webpack_require__.r(jt),__webpack_require__.d(jt,{code:function(){return xte},decode:function(){return Ete},encode:function(){return _te},name:function(){return kte}});var qt={};__webpack_require__.r(qt),__webpack_require__.d(qt,{base58btc:function(){return xre},base58flickr:function(){return _re}});var Kt={};__webpack_require__.r(Kt),__webpack_require__.d(Kt,{base32:function(){return Ere},base32hex:function(){return Ire},base32hexpad:function(){return Dre},base32hexpadupper:function(){return Rre},base32hexupper:function(){return Tre},base32pad:function(){return Are},base32padupper:function(){return Cre},base32upper:function(){return Sre},base32z:function(){return Pre}});var Ht={};__webpack_require__.r(Ht),__webpack_require__.d(Ht,{identity:function(){return Kre}});var Gt={};__webpack_require__.r(Gt),__webpack_require__.d(Gt,{base2:function(){return Hre}});var Wt={};__webpack_require__.r(Wt),__webpack_require__.d(Wt,{base8:function(){return Gre}});var Yt={};__webpack_require__.r(Yt),__webpack_require__.d(Yt,{base10:function(){return Wre}});var Qt={};__webpack_require__.r(Qt),__webpack_require__.d(Qt,{base16:function(){return Yre},base16upper:function(){return Qre}});var Jt={};__webpack_require__.r(Jt),__webpack_require__.d(Jt,{base36:function(){return Jre},base36upper:function(){return Zre}});var Zt={};__webpack_require__.r(Zt),__webpack_require__.d(Zt,{base64:function(){return Xre},base64pad:function(){return $re},base64url:function(){return ene},base64urlpad:function(){return tne}});var Xt={};__webpack_require__.r(Xt),__webpack_require__.d(Xt,{base256emoji:function(){return ine}});var $t={};__webpack_require__.r($t),__webpack_require__.d($t,{sha256:function(){return cne},sha512:function(){return lne}});var er={};__webpack_require__.r(er),__webpack_require__.d(er,{identity:function(){return hne}});var tr={};__webpack_require__.r(tr),__webpack_require__.d(tr,{code:function(){return dne},decode:function(){return yne},encode:function(){return vne},name:function(){return pne}});var rr={};__webpack_require__.r(rr),__webpack_require__.d(rr,{code:function(){return wne},decode:function(){return xne},encode:function(){return kne},name:function(){return mne}});var nr={};__webpack_require__.r(nr),__webpack_require__.d(nr,{base58btc:function(){return pse},base58flickr:function(){return dse}});var ar={};__webpack_require__.r(ar),__webpack_require__.d(ar,{base32:function(){return vse},base32hex:function(){return mse},base32hexpad:function(){return kse},base32hexpadupper:function(){return xse},base32hexupper:function(){return wse},base32pad:function(){return bse},base32padupper:function(){return gse},base32upper:function(){return yse},base32z:function(){return _se}});var ir={};__webpack_require__.r(ir),__webpack_require__.d(ir,{identity:function(){return Ose}});var or={};__webpack_require__.r(or),__webpack_require__.d(or,{base2:function(){return Bse}});var sr={};__webpack_require__.r(sr),__webpack_require__.d(sr,{base8:function(){return Use}});var ur={};__webpack_require__.r(ur),__webpack_require__.d(ur,{base10:function(){return Mse}});var cr={};__webpack_require__.r(cr),__webpack_require__.d(cr,{base16:function(){return zse},base16upper:function(){return Fse}});var lr={};__webpack_require__.r(lr),__webpack_require__.d(lr,{base36:function(){return Vse},base36upper:function(){return jse}});var fr={};__webpack_require__.r(fr),__webpack_require__.d(fr,{base64:function(){return qse},base64pad:function(){return Kse},base64url:function(){return Hse},base64urlpad:function(){return Gse}});var hr={};__webpack_require__.r(hr),__webpack_require__.d(hr,{base256emoji:function(){return Jse}});var pr={};__webpack_require__.r(pr),__webpack_require__.d(pr,{sha256:function(){return eue},sha512:function(){return tue}});var dr={};__webpack_require__.r(dr),__webpack_require__.d(dr,{identity:function(){return nue}});var vr={};__webpack_require__.r(vr),__webpack_require__.d(vr,{code:function(){return iue},decode:function(){return sue},encode:function(){return oue},name:function(){return aue}});var yr={};__webpack_require__.r(yr),__webpack_require__.d(yr,{code:function(){return fue},decode:function(){return pue},encode:function(){return hue},name:function(){return lue}});var br={};__webpack_require__.r(br),__webpack_require__.d(br,{base58btc:function(){return qce},base58flickr:function(){return Kce}});var gr={};__webpack_require__.r(gr),__webpack_require__.d(gr,{base32:function(){return Hce},base32hex:function(){return Qce},base32hexpad:function(){return Zce},base32hexpadupper:function(){return Xce},base32hexupper:function(){return Jce},base32pad:function(){return Wce},base32padupper:function(){return Yce},base32upper:function(){return Gce},base32z:function(){return $ce}});var mr={};__webpack_require__.r(mr),__webpack_require__.d(mr,{identity:function(){return fle}});var wr={};__webpack_require__.r(wr),__webpack_require__.d(wr,{base2:function(){return hle}});var kr={};__webpack_require__.r(kr),__webpack_require__.d(kr,{base8:function(){return ple}});var xr={};__webpack_require__.r(xr),__webpack_require__.d(xr,{base10:function(){return dle}});var _r={};__webpack_require__.r(_r),__webpack_require__.d(_r,{base16:function(){return vle},base16upper:function(){return yle}});var Er={};__webpack_require__.r(Er),__webpack_require__.d(Er,{base36:function(){return ble},base36upper:function(){return gle}});var Sr={};__webpack_require__.r(Sr),__webpack_require__.d(Sr,{base64:function(){return mle},base64pad:function(){return wle},base64url:function(){return kle},base64urlpad:function(){return xle}});var Ar={};__webpack_require__.r(Ar),__webpack_require__.d(Ar,{base256emoji:function(){return Cle}});var Cr={};__webpack_require__.r(Cr),__webpack_require__.d(Cr,{sha256:function(){return Rle},sha512:function(){return Ple}});var Ir={};__webpack_require__.r(Ir),__webpack_require__.d(Ir,{identity:function(){return Lle}});var Tr={};__webpack_require__.r(Tr),__webpack_require__.d(Tr,{code:function(){return Ble},decode:function(){return Mle},encode:function(){return Ule},name:function(){return Ole}});var Dr={};__webpack_require__.r(Dr),__webpack_require__.d(Dr,{code:function(){return jle},decode:function(){return Kle},encode:function(){return qle},name:function(){return Vle}});var Rr={};__webpack_require__.r(Rr),__webpack_require__.d(Rr,{sha256:function(){return Hfe},sha512:function(){return Gfe}});var Pr={};__webpack_require__.r(Pr),__webpack_require__.d(Pr,{base58btc:function(){return nhe},base58flickr:function(){return ahe}});var Nr={};__webpack_require__.r(Nr),__webpack_require__.d(Nr,{base32:function(){return ihe},base32hex:function(){return che},base32hexpad:function(){return fhe},base32hexpadupper:function(){return hhe},base32hexupper:function(){return lhe},base32pad:function(){return she},base32padupper:function(){return uhe},base32upper:function(){return ohe},base32z:function(){return phe}});var Lr={};__webpack_require__.r(Lr),__webpack_require__.d(Lr,{identity:function(){return She}});var Or={};__webpack_require__.r(Or),__webpack_require__.d(Or,{base2:function(){return Ahe}});var Br={};__webpack_require__.r(Br),__webpack_require__.d(Br,{base8:function(){return Che}});var Ur={};__webpack_require__.r(Ur),__webpack_require__.d(Ur,{base10:function(){return Ihe}});var Mr={};__webpack_require__.r(Mr),__webpack_require__.d(Mr,{base16:function(){return The},base16upper:function(){return Dhe}});var zr={};__webpack_require__.r(zr),__webpack_require__.d(zr,{base36:function(){return Rhe},base36upper:function(){return Phe}});var Fr={};__webpack_require__.r(Fr),__webpack_require__.d(Fr,{base64:function(){return Nhe},base64pad:function(){return Lhe},base64url:function(){return Ohe},base64urlpad:function(){return Bhe}});var Vr={};__webpack_require__.r(Vr),__webpack_require__.d(Vr,{base256emoji:function(){return Fhe}});var jr={};__webpack_require__.r(jr),__webpack_require__.d(jr,{identity:function(){return jhe}});var qr={};__webpack_require__.r(qr),__webpack_require__.d(qr,{code:function(){return Khe},decode:function(){return Ghe},encode:function(){return Hhe},name:function(){return qhe}});var Kr={};__webpack_require__.r(Kr),__webpack_require__.d(Kr,{code:function(){return Jhe},decode:function(){return Xhe},encode:function(){return Zhe},name:function(){return Qhe}});var Hr={};__webpack_require__.r(Hr),__webpack_require__.d(Hr,{base58btc:function(){return Mve},base58flickr:function(){return zve}});var Gr={};__webpack_require__.r(Gr),__webpack_require__.d(Gr,{base32:function(){return Fve},base32hex:function(){return Kve},base32hexpad:function(){return Gve},base32hexpadupper:function(){return Wve},base32hexupper:function(){return Hve},base32pad:function(){return jve},base32padupper:function(){return qve},base32upper:function(){return Vve},base32z:function(){return Yve}});var Wr={};__webpack_require__.r(Wr),__webpack_require__.d(Wr,{identity:function(){return oye}});var Yr={};__webpack_require__.r(Yr),__webpack_require__.d(Yr,{base2:function(){return sye}});var Qr={};__webpack_require__.r(Qr),__webpack_require__.d(Qr,{base8:function(){return uye}});var Jr={};__webpack_require__.r(Jr),__webpack_require__.d(Jr,{base10:function(){return cye}});var Zr={};__webpack_require__.r(Zr),__webpack_require__.d(Zr,{base16:function(){return lye},base16upper:function(){return fye}});var Xr={};__webpack_require__.r(Xr),__webpack_require__.d(Xr,{base36:function(){return hye},base36upper:function(){return pye}});var $r={};__webpack_require__.r($r),__webpack_require__.d($r,{base64:function(){return dye},base64pad:function(){return vye},base64url:function(){return yye},base64urlpad:function(){return bye}});var en={};__webpack_require__.r(en),__webpack_require__.d(en,{base256emoji:function(){return kye}});var tn={};__webpack_require__.r(tn),__webpack_require__.d(tn,{sha256:function(){return Sye},sha512:function(){return Aye}});var rn={};__webpack_require__.r(rn),__webpack_require__.d(rn,{identity:function(){return Iye}});var nn={};__webpack_require__.r(nn),__webpack_require__.d(nn,{code:function(){return Dye},decode:function(){return Pye},encode:function(){return Rye},name:function(){return Tye}});var an={};__webpack_require__.r(an),__webpack_require__.d(an,{code:function(){return Bye},decode:function(){return Mye},encode:function(){return Uye},name:function(){return Oye}});var on={};__webpack_require__.r(on),__webpack_require__.d(on,{base58btc:function(){return Bge},base58flickr:function(){return Uge}});var sn={};__webpack_require__.r(sn),__webpack_require__.d(sn,{base32:function(){return Mge},base32hex:function(){return jge},base32hexpad:function(){return Kge},base32hexpadupper:function(){return Hge},base32hexupper:function(){return qge},base32pad:function(){return Fge},base32padupper:function(){return Vge},base32upper:function(){return zge},base32z:function(){return Gge}});var un={};__webpack_require__.r(un),__webpack_require__.d(un,{identity:function(){return ame}});var cn={};__webpack_require__.r(cn),__webpack_require__.d(cn,{base2:function(){return ime}});var ln={};__webpack_require__.r(ln),__webpack_require__.d(ln,{base8:function(){return ome}});var fn={};__webpack_require__.r(fn),__webpack_require__.d(fn,{base10:function(){return sme}});var hn={};__webpack_require__.r(hn),__webpack_require__.d(hn,{base16:function(){return ume},base16upper:function(){return cme}});var pn={};__webpack_require__.r(pn),__webpack_require__.d(pn,{base36:function(){return lme},base36upper:function(){return fme}});var dn={};__webpack_require__.r(dn),__webpack_require__.d(dn,{base64:function(){return hme},base64pad:function(){return pme},base64url:function(){return dme},base64urlpad:function(){return vme}});var vn={};__webpack_require__.r(vn),__webpack_require__.d(vn,{base256emoji:function(){return kme}});var yn={};__webpack_require__.r(yn),__webpack_require__.d(yn,{sha256:function(){return Sme},sha512:function(){return Ame}});var bn={};__webpack_require__.r(bn),__webpack_require__.d(bn,{identity:function(){return Ime}});var gn={};__webpack_require__.r(gn),__webpack_require__.d(gn,{code:function(){return Dme},decode:function(){return Pme},encode:function(){return Rme},name:function(){return Tme}});var mn={};__webpack_require__.r(mn),__webpack_require__.d(mn,{code:function(){return Bme},decode:function(){return Mme},encode:function(){return Ume},name:function(){return Ome}});var wn={};__webpack_require__.r(wn),__webpack_require__.d(wn,{abortedError:function(){return gxe},notFoundError:function(){return bxe}});var kn=__webpack_require__(7313),xn=__webpack_require__(1739);function _n(e){return _n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(e)}function En(){En=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(eL){u=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),s=new S(a||[]);return n(o,"_invoke",{value:k(e,r,s)}),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(eL){return{type:"throw",arg:eL}}}e.wrap=c;var f={};function h(){}function p(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(A([])));b&&b!==t&&r.call(b,i)&&(v=b);var g=d.prototype=h.prototype=Object.create(v);function m(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function a(n,i,o,s){var u=l(e[n],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==_n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){a("next",e,o,s)}),(function(e){a("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return a("throw",e,o,s)}))}s(u.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function k(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return C()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=x(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=l(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,f;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function A(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=u(d,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new w(c(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},m(g),u(g,s,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=A,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function Sn(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,a)}function An(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Sn(i,n,a,o,s,"next",e)}function s(e){Sn(i,n,a,o,s,"throw",e)}o(void 0)}))}}function Cn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function In(e){var t=function(e,t){if("object"!==_n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_n(t)?t:String(t)}function Tn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,In(n.key),n)}}function Dn(e,t,r){return t&&Tn(e.prototype,t),r&&Tn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rn(e,t){return Rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rn(e,t)}function Pn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rn(e,t)}function Nn(e){return Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nn(e)}function Ln(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function On(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bn(e,t){if(t&&("object"===_n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return On(e)}function Un(e){var t=Ln();return function(){var r,n=Nn(e);if(t){var a=Nn(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Bn(this,r)}}function Mn(e,t,r){return(t=In(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zn(e){var t,r,n,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Fn(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Fn(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Fn=function(e){this.s=e,this.n=e.next},Fn.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Fn(e)}function Vn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(r),!0).forEach((function(t){Mn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qn(e,t){this.v=e,this.k=t}function Kn(e){var t,r;function n(t,r){try{var i=e[t](r),o=i.value,s=o instanceof qn;Promise.resolve(s?o.v:o).then((function(r){if(s){var u="return"===t?"return":"next";if(!o.k||r.done)return n(u,r);r=e[u](r).value}a(i.done?"return":"normal",r)}),(function(e){n("throw",e)}))}catch(eL){a("throw",eL)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise((function(i,o){var s={key:e,arg:a,resolve:i,reject:o,next:null};r?r=r.next=s:(t=r=s,n(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}function Hn(e){return function(){return new Kn(e.apply(this,arguments))}}Kn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Kn.prototype.next=function(e){return this._invoke("next",e)},Kn.prototype.throw=function(e){return this._invoke("throw",e)},Kn.prototype.return=function(e){return this._invoke("return",e)};var Gn=__webpack_require__(512),Wn=__webpack_require__(4683),Yn=__webpack_require__(6953);var Qn=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Jn=Qn,Zn=(new Uint8Array(0),function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}()),Xn=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return ea(this,e)}}]),e}(),$n=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return ea(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),ea=function(e,t){return new $n(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},ta=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Zn(t,r,n),this.decoder=new Xn(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),ra=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new ta(t,r,n,a)},na=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Jn(n,r),i=a.encode,o=a.decode;return ra({prefix:t,name:r,encode:i,decode:function(e){return function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}(o(e))}})},aa=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return ra({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},ia=na({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),oa=(na({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),aa({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),sa=(aa({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),aa({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),aa({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),aa({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),aa({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),aa({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),aa({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),aa({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),aa({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}));aa({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),aa({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),aa({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function ua(e){return Object.assign(Yn(e),{error:Yn("".concat(e,":error")),trace:Yn("".concat(e,":trace"))})}Yn.formatters.b=function(e){return null==e?"undefined":ia.baseEncode(e)},Yn.formatters.t=function(e){return null==e?"undefined":oa.baseEncode(e)},Yn.formatters.m=function(e){return null==e?"undefined":sa.baseEncode(e)},Yn.formatters.p=function(e){return null==e?"undefined":e.toString()},Yn.formatters.c=function(e){return null==e?"undefined":e.toString()},Yn.formatters.k=function(e){return null==e?"undefined":e.toString()};var ca=__webpack_require__(465),la=__webpack_require__(2092),fa=la.Reader,ha=la.Writer,pa=la.util,da=la.roots["ipfs-unixfs"]||(la.roots["ipfs-unixfs"]={}),va=da.Data=function(){function e(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Type=0,e.prototype.Data=pa.newBuffer([]),e.prototype.filesize=pa.Long?pa.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=pa.emptyArray,e.prototype.hashType=pa.Long?pa.Long.fromBits(0,0,!0):0,e.prototype.fanout=pa.Long?pa.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(e,t){if(t||(t=ha.create()),t.uint32(8).int32(e.Type),null!=e.Data&&Object.hasOwnProperty.call(e,"Data")&&t.uint32(18).bytes(e.Data),null!=e.filesize&&Object.hasOwnProperty.call(e,"filesize")&&t.uint32(24).uint64(e.filesize),null!=e.blocksizes&&e.blocksizes.length)for(var r=0;r<e.blocksizes.length;++r)t.uint32(32).uint64(e.blocksizes[r]);return null!=e.hashType&&Object.hasOwnProperty.call(e,"hashType")&&t.uint32(40).uint64(e.hashType),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(48).uint64(e.fanout),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(56).uint32(e.mode),null!=e.mtime&&Object.hasOwnProperty.call(e,"mtime")&&da.UnixTime.encode(e.mtime,t.uint32(66).fork()).ldelim(),t},e.decode=function(e,t){e instanceof fa||(e=fa.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new da.Data;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.Type=e.int32();break;case 2:n.Data=e.bytes();break;case 3:n.filesize=e.uint64();break;case 4:if(n.blocksizes&&n.blocksizes.length||(n.blocksizes=[]),2===(7&a))for(var i=e.uint32()+e.pos;e.pos<i;)n.blocksizes.push(e.uint64());else n.blocksizes.push(e.uint64());break;case 5:n.hashType=e.uint64();break;case 6:n.fanout=e.uint64();break;case 7:n.mode=e.uint32();break;case 8:n.mtime=da.UnixTime.decode(e,e.uint32());break;default:e.skipType(7&a)}}if(!n.hasOwnProperty("Type"))throw pa.ProtocolError("missing required 'Type'",{instance:n});return n},e.fromObject=function(e){if(e instanceof da.Data)return e;var t=new da.Data;switch(e.Type){case"Raw":case 0:t.Type=0;break;case"Directory":case 1:t.Type=1;break;case"File":case 2:t.Type=2;break;case"Metadata":case 3:t.Type=3;break;case"Symlink":case 4:t.Type=4;break;case"HAMTShard":case 5:t.Type=5}if(null!=e.Data&&("string"===typeof e.Data?pa.base64.decode(e.Data,t.Data=pa.newBuffer(pa.base64.length(e.Data)),0):e.Data.length&&(t.Data=e.Data)),null!=e.filesize&&(pa.Long?(t.filesize=pa.Long.fromValue(e.filesize)).unsigned=!0:"string"===typeof e.filesize?t.filesize=parseInt(e.filesize,10):"number"===typeof e.filesize?t.filesize=e.filesize:"object"===typeof e.filesize&&(t.filesize=new pa.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0))),e.blocksizes){if(!Array.isArray(e.blocksizes))throw TypeError(".Data.blocksizes: array expected");t.blocksizes=[];for(var r=0;r<e.blocksizes.length;++r)pa.Long?(t.blocksizes[r]=pa.Long.fromValue(e.blocksizes[r])).unsigned=!0:"string"===typeof e.blocksizes[r]?t.blocksizes[r]=parseInt(e.blocksizes[r],10):"number"===typeof e.blocksizes[r]?t.blocksizes[r]=e.blocksizes[r]:"object"===typeof e.blocksizes[r]&&(t.blocksizes[r]=new pa.LongBits(e.blocksizes[r].low>>>0,e.blocksizes[r].high>>>0).toNumber(!0))}if(null!=e.hashType&&(pa.Long?(t.hashType=pa.Long.fromValue(e.hashType)).unsigned=!0:"string"===typeof e.hashType?t.hashType=parseInt(e.hashType,10):"number"===typeof e.hashType?t.hashType=e.hashType:"object"===typeof e.hashType&&(t.hashType=new pa.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0))),null!=e.fanout&&(pa.Long?(t.fanout=pa.Long.fromValue(e.fanout)).unsigned=!0:"string"===typeof e.fanout?t.fanout=parseInt(e.fanout,10):"number"===typeof e.fanout?t.fanout=e.fanout:"object"===typeof e.fanout&&(t.fanout=new pa.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0))),null!=e.mode&&(t.mode=e.mode>>>0),null!=e.mtime){if("object"!==typeof e.mtime)throw TypeError(".Data.mtime: object expected");t.mtime=da.UnixTime.fromObject(e.mtime)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.blocksizes=[]),t.defaults){if(r.Type=t.enums===String?"Raw":0,t.bytes===String?r.Data="":(r.Data=[],t.bytes!==Array&&(r.Data=pa.newBuffer(r.Data))),pa.Long){var n=new pa.Long(0,0,!0);r.filesize=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.filesize=t.longs===String?"0":0;if(pa.Long){n=new pa.Long(0,0,!0);r.hashType=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.hashType=t.longs===String?"0":0;if(pa.Long){n=new pa.Long(0,0,!0);r.fanout=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.fanout=t.longs===String?"0":0;r.mode=0,r.mtime=null}if(null!=e.Type&&e.hasOwnProperty("Type")&&(r.Type=t.enums===String?da.Data.DataType[e.Type]:e.Type),null!=e.Data&&e.hasOwnProperty("Data")&&(r.Data=t.bytes===String?pa.base64.encode(e.Data,0,e.Data.length):t.bytes===Array?Array.prototype.slice.call(e.Data):e.Data),null!=e.filesize&&e.hasOwnProperty("filesize")&&("number"===typeof e.filesize?r.filesize=t.longs===String?String(e.filesize):e.filesize:r.filesize=t.longs===String?pa.Long.prototype.toString.call(e.filesize):t.longs===Number?new pa.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0):e.filesize),e.blocksizes&&e.blocksizes.length){r.blocksizes=[];for(var a=0;a<e.blocksizes.length;++a)"number"===typeof e.blocksizes[a]?r.blocksizes[a]=t.longs===String?String(e.blocksizes[a]):e.blocksizes[a]:r.blocksizes[a]=t.longs===String?pa.Long.prototype.toString.call(e.blocksizes[a]):t.longs===Number?new pa.LongBits(e.blocksizes[a].low>>>0,e.blocksizes[a].high>>>0).toNumber(!0):e.blocksizes[a]}return null!=e.hashType&&e.hasOwnProperty("hashType")&&("number"===typeof e.hashType?r.hashType=t.longs===String?String(e.hashType):e.hashType:r.hashType=t.longs===String?pa.Long.prototype.toString.call(e.hashType):t.longs===Number?new pa.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0):e.hashType),null!=e.fanout&&e.hasOwnProperty("fanout")&&("number"===typeof e.fanout?r.fanout=t.longs===String?String(e.fanout):e.fanout:r.fanout=t.longs===String?pa.Long.prototype.toString.call(e.fanout):t.longs===Number?new pa.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0):e.fanout),null!=e.mode&&e.hasOwnProperty("mode")&&(r.mode=e.mode),null!=e.mtime&&e.hasOwnProperty("mtime")&&(r.mtime=da.UnixTime.toObject(e.mtime,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e.DataType=function(){var e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),e}(),ya=(da.UnixTime=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Seconds=pa.Long?pa.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(e,t){return t||(t=ha.create()),t.uint32(8).int64(e.Seconds),null!=e.FractionalNanoseconds&&Object.hasOwnProperty.call(e,"FractionalNanoseconds")&&t.uint32(21).fixed32(e.FractionalNanoseconds),t},e.decode=function(e,t){e instanceof fa||(e=fa.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new da.UnixTime;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.Seconds=e.int64();break;case 2:n.FractionalNanoseconds=e.fixed32();break;default:e.skipType(7&a)}}if(!n.hasOwnProperty("Seconds"))throw pa.ProtocolError("missing required 'Seconds'",{instance:n});return n},e.fromObject=function(e){if(e instanceof da.UnixTime)return e;var t=new da.UnixTime;return null!=e.Seconds&&(pa.Long?(t.Seconds=pa.Long.fromValue(e.Seconds)).unsigned=!1:"string"===typeof e.Seconds?t.Seconds=parseInt(e.Seconds,10):"number"===typeof e.Seconds?t.Seconds=e.Seconds:"object"===typeof e.Seconds&&(t.Seconds=new pa.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber())),null!=e.FractionalNanoseconds&&(t.FractionalNanoseconds=e.FractionalNanoseconds>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(pa.Long){var n=new pa.Long(0,0,!1);r.Seconds=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.Seconds=t.longs===String?"0":0;r.FractionalNanoseconds=0}return null!=e.Seconds&&e.hasOwnProperty("Seconds")&&("number"===typeof e.Seconds?r.Seconds=t.longs===String?String(e.Seconds):e.Seconds:r.Seconds=t.longs===String?pa.Long.prototype.toString.call(e.Seconds):t.longs===Number?new pa.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber():e.Seconds),null!=e.FractionalNanoseconds&&e.hasOwnProperty("FractionalNanoseconds")&&(r.FractionalNanoseconds=e.FractionalNanoseconds),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e}(),da.Metadata=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.MimeType="",e.encode=function(e,t){return t||(t=ha.create()),null!=e.MimeType&&Object.hasOwnProperty.call(e,"MimeType")&&t.uint32(10).string(e.MimeType),t},e.decode=function(e,t){e instanceof fa||(e=fa.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new da.Metadata;e.pos<r;){var a=e.uint32();if(a>>>3===1)n.MimeType=e.string();else e.skipType(7&a)}return n},e.fromObject=function(e){if(e instanceof da.Metadata)return e;var t=new da.Metadata;return null!=e.MimeType&&(t.MimeType=String(e.MimeType)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.MimeType=""),null!=e.MimeType&&e.hasOwnProperty("MimeType")&&(r.MimeType=e.MimeType),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e}(),va),ba=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],ga=["directory","hamt-sharded-directory"],ma=parseInt("0644",8),wa=parseInt("0755",8);function ka(e){if(null!=e)return"number"===typeof e?4095&e:"0"===(e=e.toString()).substring(0,1)?4095&parseInt(e,8):4095&parseInt(e,10)}function xa(e){if(null!=e){var t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){var r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:1e3*(r-1e3*n)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw ca(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}}var _a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"file"};Cn(this,e);var r=t.type,n=t.data,a=t.blockSizes,i=t.hashType,o=t.fanout,s=t.mtime,u=t.mode;if(r&&!ba.includes(r))throw ca(new Error("Type: "+r+" is not valid"),"ERR_INVALID_TYPE");this.type=r||"file",this.data=n,this.hashType=i,this.fanout=o,this.blockSizes=a||[],this._originalMode=0,this.mode=ka(u),s&&(this.mtime=xa(s),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}return Dn(e,[{key:"mode",get:function(){return this._mode},set:function(e){this._mode=this.isDirectory()?wa:ma;var t=ka(e);void 0!==t&&(this._mode=t)}},{key:"isDirectory",value:function(){return Boolean(this.type&&ga.includes(this.type))}},{key:"addBlockSize",value:function(e){this.blockSizes.push(e)}},{key:"removeBlockSize",value:function(e){this.blockSizes.splice(e,1)}},{key:"fileSize",value:function(){if(this.isDirectory())return 0;var e=0;return this.blockSizes.forEach((function(t){e+=t})),this.data&&(e+=this.data.length),e}},{key:"marshal",value:function(){var e;switch(this.type){case"raw":e=ya.DataType.Raw;break;case"directory":e=ya.DataType.Directory;break;case"file":e=ya.DataType.File;break;case"metadata":e=ya.DataType.Metadata;break;case"symlink":e=ya.DataType.Symlink;break;case"hamt-sharded-directory":e=ya.DataType.HAMTShard;break;default:throw ca(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}var t,r,n=this.data;if(this.data&&this.data.length||(n=void 0),null!=this.mode&&((t=4294963200&this._originalMode|(ka(this.mode)||0))!==ma||this.isDirectory()||(t=void 0),t===wa&&this.isDirectory()&&(t=void 0)),null!=this.mtime){var a=xa(this.mtime);a&&0===(r={Seconds:a.secs,FractionalNanoseconds:a.nsecs}).FractionalNanoseconds&&delete r.FractionalNanoseconds}var i={Type:e,Data:n,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:t,mtime:r};return ya.encode(i).finish()}}],[{key:"unmarshal",value:function(t){var r=ya.decode(t),n=ya.toObject(r,{defaults:!1,arrays:!0,longs:Number,objects:!1}),a=new e({type:ba[n.Type],data:n.Data,blockSizes:n.blocksizes,mode:n.mode,mtime:n.mtime?{secs:n.mtime.Seconds,nsecs:n.mtime.FractionalNanoseconds}:void 0});return a._originalMode=n.mode||0,a}}]),e}();function Ea(e){if(Array.isArray(e))return e}function Sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Aa(e,t){if(e){if("string"===typeof e)return Sa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sa(e,t):void 0}}function Ca(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ia(e,t){return Ea(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(eL){c=!0,a=eL}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||Aa(e,t)||Ca()}var Ta=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Da;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Da=Math.pow(2,31);var Ra=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var Pa=Math.pow(2,7),Na=Math.pow(2,14),La=Math.pow(2,21),Oa=Math.pow(2,28),Ba=Math.pow(2,35),Ua=Math.pow(2,42),Ma=Math.pow(2,49),za=Math.pow(2,56),Fa=Math.pow(2,63),Va={encode:Ta,decode:Ra,encodingLength:function(e){return e<Pa?1:e<Na?2:e<La?3:e<Oa?4:e<Ba?5:e<Ua?6:e<Ma?7:e<za?8:e<Fa?9:10}},ja=Va,qa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=ja.decode(e,t);return[r,ja.decode.bytes]},Ka=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ja.encode(e,t,r),t},Ha=function(e){return ja.encodingLength(e)},Ga=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Wa=function(e,t){var r=t.byteLength,n=Ha(e),a=n+Ha(r),i=new Uint8Array(a+r);return Ka(e,i,0),Ka(r,i,n),i.set(t,a),new Qa(e,r,t,i)},Ya=function(e){var t=Ga(e),r=Ia(qa(t),2),n=r[0],a=r[1],i=Ia(qa(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new Qa(n,o,u,t)},Qa=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var Ja=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Za=Ja,Xa=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),$a=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return ti(this,e)}}]),e}(),ei=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return ti(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),ti=function(e,t){return new ei(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},ri=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Xa(t,r,n),this.decoder=new $a(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),ni=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new ri(t,r,n,a)},ai=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Za(n,r),i=a.encode,o=a.decode;return ni({prefix:t,name:r,encode:i,decode:function(e){return Ga(o(e))}})},ii=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return ni({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},oi=ai({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),si=ai({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ui=ii({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ci=ii({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),li=ii({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fi=ii({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),hi=ii({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),pi=ii({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),di=ii({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vi=ii({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yi=ii({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),bi=function(e,t){var r=e.bytes;return 0===e.version?xi(r,mi(e),t||oi.encoder):_i(r,mi(e),t||ui.encoder)},gi=new WeakMap,mi=function(e){var t=gi.get(e);if(null==t){var r=new Map;return gi.set(e,r),r}return t},wi=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==Ei)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Si)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=Wa(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return bi(this,e)}},{key:"toJSON",value:function(){return{"/":bi(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||Ai(n,a,i.bytes))}if(!0===t[Ci]){var o=t.version,s=t.multihash,u=t.code,c=Ya(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==Ei)throw new Error("Version 0 CID must use dag-pb (code: ".concat(Ei,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,Ai(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,Ei,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=Ga(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new Qa(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(qa(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=Ei;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(ki(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return mi(o).set(a,e),o}}]),r}(),ki=function(e,t){switch(e[0]){case"Q":var r=t||oi;return[oi.prefix,r.decode("".concat(oi.prefix).concat(e))];case oi.prefix:var n=t||oi;return[oi.prefix,n.decode(e)];case ui.prefix:var a=t||ui;return[ui.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},xi=function(e,t,r){var n=r.prefix;if(n!==oi.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},_i=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},Ei=112,Si=18,Ai=function(e,t,r){var n=Ha(e),a=n+Ha(t),i=new Uint8Array(a+r.byteLength);return Ka(e,i,0),Ka(t,i,n),i.set(r,a),i},Ci=Symbol.for("@ipld/js-cid/CID"),Ii=new TextDecoder;function Ti(e,t){for(var r=0,n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");var a=e[t++];if(r+=n<28?(127&a)<<n:(127&a)*Math.pow(2,n),a<128)break}return[r,t]}function Di(e,t){var r,n=Ia(Ti(e,t),2);r=n[0];var a=(t=n[1])+r;if(r<0||a<0)throw new Error("protobuf: invalid length");if(a>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,a),a]}function Ri(e,t){var r,n=Ia(Ti(e,t),2);return[7&(r=n[0]),r>>3,t=n[1]]}function Pi(e){for(var t={},r=e.length,n=0;n<r;){var a,i,o=Ia(Ri(e,n),3);if(a=o[0],i=o[1],n=o[2],1===i){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Hash"));if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");var s=Ia(Di(e,n),2);t.Hash=s[0],n=s[1]}else if(2===i){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Name"));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");var u,c=Ia(Di(e,n),2);u=c[0],n=c[1],t.Name=Ii.decode(u)}else{if(3!==i)throw new Error("protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ".concat(i));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Tsize"));var l=Ia(Ti(e,n),2);t.Tsize=l[0],n=l[1]}}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function Ni(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Aa(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}var Li=new TextEncoder,Oi=Math.pow(2,32),Bi=Math.pow(2,31);function Ui(e,t){var r=t.length;if("number"===typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");t[r=Fi(t,r,e.Tsize)-1]=24}if("string"===typeof e.Name){var n=Li.encode(e.Name);r-=n.length,t.set(n,r),t[r=Fi(t,r,n.length)-1]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),t[r=Fi(t,r,e.Hash.length)-1]=10),t.length-r}function Mi(e){var t=function(e){var t=0;if(e.Data){var r=e.Data.length;t+=1+r+Vi(r)}if(e.Links){var n,a=Ni(e.Links);try{for(a.s();!(n=a.n()).done;){var i=zi(n.value);t+=1+i+Vi(i)}}catch(eL){a.e(eL)}finally{a.f()}}return t}(e),r=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),r[n=Fi(r,n,e.Data.length)-1]=10),e.Links)for(var a=e.Links.length-1;a>=0;a--){var i=Ui(e.Links[a],r.subarray(0,n));r[n=Fi(r,n-=i,i)-1]=18}return r}function zi(e){var t=0;if(e.Hash){var r=e.Hash.length;t+=1+r+Vi(r)}if("string"===typeof e.Name){var n=Li.encode(e.Name).length;t+=1+n+Vi(n)}return"number"===typeof e.Tsize&&(t+=1+Vi(e.Tsize)),t}function Fi(e,t,r){for(var n=t-=Vi(r);r>=Bi;)e[t++]=127&r|128,r/=128;for(;r>=128;)e[t++]=127&r|128,r>>>=7;return e[t]=r,n}function Vi(e){return e%2===0&&e++,Math.floor((function(e){var t=0;e>=Oi&&(e=Math.floor(e/Oi),t=32);e>=65536&&(e>>>=16,t+=16);e>=256&&(e>>>=8,t+=8);return t+ji[e]}(e)+6)/7)}var ji=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],qi=["Data","Links"],Ki=["Hash","Name","Tsize"],Hi=new TextEncoder;function Gi(e,t){if(e===t)return 0;for(var r=e.Name?Hi.encode(e.Name):[],n=t.Name?Hi.encode(t.Name):[],a=r.length,i=n.length,o=0,s=Math.min(a,i);o<s;++o)if(r[o]!==n[o]){a=r[o],i=n[o];break}return a<i?-1:i<a?1:0}function Wi(e,t){return!Object.keys(e).some((function(e){return!t.includes(e)}))}function Yi(e){if("object"===typeof e.asCID){var t=wi.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");var r={};if(e.Hash){var n=wi.asCID(e.Hash);try{n||("string"===typeof e.Hash?n=wi.parse(e.Hash):e.Hash instanceof Uint8Array&&(n=wi.decode(e.Hash)))}catch(a){throw new TypeError("Invalid DAG-PB form: ".concat(a.message))}n&&(r.Hash=n)}if(!r.Hash)throw new TypeError("Invalid DAG-PB form");return"string"===typeof e.Name&&(r.Name=e.Name),"number"===typeof e.Tsize&&(r.Tsize=e.Tsize),r}function Qi(e){if((e instanceof Uint8Array||"string"===typeof e)&&(e={Data:e}),"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");var t={};if(void 0!==e.Data)if("string"===typeof e.Data)t.Data=Hi.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map(Yi),t.Links.sort(Gi)}else t.Links=[];return t}function Ji(e){if(!e||"object"!==typeof e||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!Wi(e,qi))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(var t=0;t<e.Links.length;t++){var r=e.Links[t];if(!r||"object"!==typeof r||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!Wi(r,Ki))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(void 0===r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(null==r.Hash||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==r.Name&&"string"!==typeof r.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==r.Tsize){if("number"!==typeof r.Tsize||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&-1===Gi(r,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Zi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Qi({Data:e,Links:t})}function Xi(e,t,r){return Yi({Hash:r,Name:e,Tsize:t})}var $i="dag-pb",eo=112;function to(e){Ji(e);var t={};return e.Links&&(t.Links=e.Links.map((function(e){var t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),e.Data&&(t.Data=e.Data),Mi(t)}function ro(e){var t=function(e){for(var t,r,n=e.length,a=0,i=!1;a<n;){var o,s,u=Ia(Ri(e,a),3);if(o=u[0],s=u[1],a=u[2],2!==o)throw new Error("protobuf: (PBNode) invalid wireType, expected 2, got ".concat(o));if(1===s){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");var c=Ia(Di(e,a),2);r=c[0],a=c[1],t&&(i=!0)}else{if(2!==s)throw new Error("protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ".concat(s));if(i)throw new Error("protobuf: (PBNode) duplicate Links section");t||(t=[]);var l,f=Ia(Di(e,a),2);l=f[0],a=f[1],t.push(Pi(l))}}if(a>n)throw new Error("protobuf: (PBNode) unexpected end of data");var h={};return r&&(h.Data=r),h.Links=t||[],h}(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map((function(e){var t={};try{t.Hash=wi.decode(e.Hash)}catch(r){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),r}var no=["string","number","bigint","symbol"],ao=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function io(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";var t=typeof e;if(no.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";var r=function(e){var t=Object.prototype.toString.call(e).slice(8,-1);if(ao.includes(t))return t;return}(e);return r||"Object"}var oo=function(){function e(t,r,n){Cn(this,e),this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=n}return Dn(e,[{key:"toString",value:function(){return"Type[".concat(this.major,"].").concat(this.name)}},{key:"compare",value:function(e){return this.major<e.major?-1:this.major>e.major?1:0}}]),e}();oo.uint=new oo(0,"uint",!0),oo.negint=new oo(1,"negint",!0),oo.bytes=new oo(2,"bytes",!0),oo.string=new oo(3,"string",!0),oo.array=new oo(4,"array",!1),oo.map=new oo(5,"map",!1),oo.tag=new oo(6,"tag",!1),oo.float=new oo(7,"float",!0),oo.false=new oo(7,"false",!0),oo.true=new oo(7,"true",!0),oo.null=new oo(7,"null",!0),oo.undefined=new oo(7,"undefined",!0),oo.break=new oo(7,"break",!0);var so=function(){function e(t,r,n){Cn(this,e),this.type=t,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}return Dn(e,[{key:"toString",value:function(){return"Token[".concat(this.type,"].").concat(this.value)}}]),e}(),uo=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,co=new TextDecoder,lo=new TextEncoder;function fo(e){return uo&&globalThis.Buffer.isBuffer(e)}function ho(e){return e instanceof Uint8Array?fo(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var po=uo?function(e,t,r){return r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):ko(e,t,r)}:function(e,t,r){return r-t>64?co.decode(e.subarray(t,r)):ko(e,t,r)},vo=uo?function(e){return e.length>64?globalThis.Buffer.from(e):wo(e)}:function(e){return e.length>64?lo.encode(e):wo(e)},yo=function(e){return Uint8Array.from(e)},bo=uo?function(e,t,r){return fo(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r)}:function(e,t,r){return e.slice(t,r)},go=uo?function(e,t){return e=e.map((function(e){return e instanceof Uint8Array?e:globalThis.Buffer.from(e)})),ho(globalThis.Buffer.concat(e,t))}:function(e,t){var r,n=new Uint8Array(t),a=0,i=Ni(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;a+o.length>n.length&&(o=o.subarray(0,n.length-a)),n.set(o,a),a+=o.length}}catch(eL){i.e(eL)}finally{i.f()}return n},mo=uo?function(e){return globalThis.Buffer.allocUnsafe(e)}:function(e){return new Uint8Array(e)};function wo(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=e.length,a=null,i=[],o=0;o<n;++o){if((t=e.charCodeAt(o))>55295&&t<57344){if(!a){if(t>56319){(r-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(r-=3)>-1&&i.push(239,191,189);continue}a=t;continue}if(t<56320){(r-=3)>-1&&i.push(239,191,189),a=t;continue}t=65536+(a-55296<<10|t-56320)}else a&&(r-=3)>-1&&i.push(239,191,189);if(a=null,t<128){if((r-=1)<0)break;i.push(t)}else if(t<2048){if((r-=2)<0)break;i.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;i.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return i}function ko(e,t,r){for(var n=[];t<r;){var a=e[t],i=null,o=a>239?4:a>223?3:a>191?2:1;if(t+o<=r){var s=void 0,u=void 0,c=void 0,l=void 0;switch(o){case 1:a<128&&(i=a);break;case 2:128===(192&(s=e[t+1]))&&(l=(31&a)<<6|63&s)>127&&(i=l);break;case 3:s=e[t+1],u=e[t+2],128===(192&s)&&128===(192&u)&&(l=(15&a)<<12|(63&s)<<6|63&u)>2047&&(l<55296||l>57343)&&(i=l);break;case 4:s=e[t+1],u=e[t+2],c=e[t+3],128===(192&s)&&128===(192&u)&&128===(192&c)&&(l=(15&a)<<18|(63&s)<<12|(63&u)<<6|63&c)>65535&&l<1114112&&(i=l)}}null===i?(i=65533,o=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),t+=o}return xo(n)}function xo(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}var _o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;Cn(this,e),this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}return Dn(e,[{key:"reset",value:function(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}},{key:"push",value:function(e){var t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){var r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){var n=t.length-(this.maxCursor-this.cursor)-1;n<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,n),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=mo(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}},{key:"toBytes",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(1===this.chunks.length){var r=this.chunks[0];t&&this.cursor>r.length/2?(e=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=bo(r,0,this.cursor)}else e=go(this.chunks,this.cursor);return t&&this.reset(),e}}]),e}(),Eo="CBOR decode error:",So="CBOR encode error:",Ao=[];function Co(e,t,r){if(e.length-t<r)throw new Error("".concat(Eo," not enough data for type"))}Ao[23]=1,Ao[24]=2,Ao[25]=3,Ao[26]=5,Ao[27]=9;var Io=[24,256,65536,4294967296,BigInt("18446744073709551616")];function To(e,t,r){Co(e,t,1);var n=e[t];if(!0===r.strict&&n<Io[0])throw new Error("".concat(Eo," integer encoded in more bytes than necessary (strict decode)"));return n}function Do(e,t,r){Co(e,t,2);var n=e[t]<<8|e[t+1];if(!0===r.strict&&n<Io[1])throw new Error("".concat(Eo," integer encoded in more bytes than necessary (strict decode)"));return n}function Ro(e,t,r){Co(e,t,4);var n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===r.strict&&n<Io[2])throw new Error("".concat(Eo," integer encoded in more bytes than necessary (strict decode)"));return n}function Po(e,t,r){Co(e,t,8);var n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],a=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(n)<<BigInt(32))+BigInt(a);if(!0===r.strict&&i<Io[3])throw new Error("".concat(Eo," integer encoded in more bytes than necessary (strict decode)"));if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===r.allowBigInt)return i;throw new Error("".concat(Eo," integers outside of the safe integer range are not supported"))}function No(e,t){return Lo(e,0,t.value)}function Lo(e,t,r){if(r<Io[0]){var n=Number(r);e.push([t|n])}else if(r<Io[1]){var a=Number(r);e.push([24|t,a])}else if(r<Io[2]){var i=Number(r);e.push([25|t,i>>>8,255&i])}else if(r<Io[3]){var o=Number(r);e.push([26|t,o>>>24&255,o>>>16&255,o>>>8&255,255&o])}else{var s=BigInt(r);if(!(s<Io[4]))throw new Error("".concat(Eo," encountered BigInt larger than allowable range"));var u=[27|t,0,0,0,0,0,0,0],c=Number(s&BigInt(4294967295)),l=Number(s>>BigInt(32)&BigInt(4294967295));u[8]=255&c,c>>=8,u[7]=255&c,c>>=8,u[6]=255&c,c>>=8,u[5]=255&c,u[4]=255&l,l>>=8,u[3]=255&l,l>>=8,u[2]=255&l,l>>=8,u[1]=255&l,e.push(u)}}No.encodedSize=function(e){return Lo.encodedSize(e.value)},Lo.encodedSize=function(e){return e<Io[0]?1:e<Io[1]?2:e<Io[2]?3:e<Io[3]?5:9},No.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};var Oo=BigInt(-1),Bo=BigInt(1);function Uo(e,t){var r=t.value,n="bigint"===typeof r?r*Oo-Bo:-1*r-1;Lo(e,t.type.majorEncoded,n)}function Mo(e,t,r,n){Co(e,t,r+n);var a=bo(e,t+r,t+r+n);return new so(oo.bytes,a,r+n)}function zo(e,t,r,n){return Mo(e,t,1,r)}function Fo(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===oo.string?vo(e.value):e.value),e.encodedBytes}function Vo(e,t){var r=Fo(t);Lo(e,t.type.majorEncoded,r.length),e.push(r)}function jo(e,t,r,n,a){var i=r+n;Co(e,t,i);var o=new so(oo.string,po(e,t+r,t+i),i);return!0===a.retainStringBytes&&(o.byteValue=bo(e,t+r,t+i)),o}function qo(e,t,r,n){return jo(e,t,1,r,n)}Uo.encodedSize=function(e){var t=e.value,r="bigint"===typeof t?t*Oo-Bo:-1*t-1;return r<Io[0]?1:r<Io[1]?2:r<Io[2]?3:r<Io[3]?5:9},Uo.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},Vo.encodedSize=function(e){var t=Fo(e);return Lo.encodedSize(t.length)+t.length},Vo.compareTokens=function(e,t){return r=Fo(e),n=Fo(t),r.length<n.length?-1:r.length>n.length?1:function(e,t){if(fo(e)&&fo(t))return e.compare(t);for(var r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}(r,n);var r,n};var Ko=Vo;function Ho(e,t,r,n){return new so(oo.array,n,r)}function Go(e,t,r,n){return Ho(0,0,1,r)}function Wo(e,t){Lo(e,oo.array.majorEncoded,t.value)}function Yo(e,t,r,n){return new so(oo.map,n,r)}function Qo(e,t,r,n){return Yo(0,0,1,r)}function Jo(e,t){Lo(e,oo.map.majorEncoded,t.value)}function Zo(e,t,r,n){return new so(oo.tag,r,1)}function Xo(e,t){Lo(e,oo.tag.majorEncoded,t.value)}Wo.compareTokens=No.compareTokens,Wo.encodedSize=function(e){return Lo.encodedSize(e.value)},Jo.compareTokens=No.compareTokens,Jo.encodedSize=function(e){return Lo.encodedSize(e.value)},Xo.compareTokens=No.compareTokens,Xo.encodedSize=function(e){return Lo.encodedSize(e.value)};function $o(e,t,r){if(r){if(!1===r.allowNaN&&Number.isNaN(e))throw new Error("".concat(Eo," NaN values are not supported"));if(!1===r.allowInfinity&&(e===1/0||e===-1/0))throw new Error("".concat(Eo," Infinity values are not supported"))}return new so(oo.float,e,t)}function es(e,t,r){var n,a=t.value;if(!1===a)e.push([20|oo.float.majorEncoded]);else if(!0===a)e.push([21|oo.float.majorEncoded]);else if(null===a)e.push([22|oo.float.majorEncoded]);else if(void 0===a)e.push([23|oo.float.majorEncoded]);else{var i=!1;r&&!0===r.float64||(as(a),a===is(ns,1)||Number.isNaN(a)?(ns[0]=249,e.push(ns.slice(0,3)),i=!0):(os(a),a===ss(ns,1)&&(ns[0]=250,e.push(ns.slice(0,5)),i=!0))),i||(n=a,rs.setFloat64(0,n,!1),us(ns,1),ns[0]=251,e.push(ns.slice(0,9)))}}es.encodedSize=function(e,t){var r=e.value;if(!1===r||!0===r||null===r||void 0===r)return 1;if(!t||!0!==t.float64){as(r);var n=is(ns,1);if(r===n||Number.isNaN(r))return 3;if(os(r),r===(n=ss(ns,1)))return 5}return 9};var ts=new ArrayBuffer(9),rs=new DataView(ts,1),ns=new Uint8Array(ts,0);function as(e){if(e===1/0)rs.setUint16(0,31744,!1);else if(e===-1/0)rs.setUint16(0,64512,!1);else if(Number.isNaN(e))rs.setUint16(0,32256,!1);else{rs.setFloat32(0,e);var t=rs.getUint32(0),r=(2139095040&t)>>23,n=8388607&t;if(255===r)rs.setUint16(0,31744,!1);else if(0===r)rs.setUint16(0,(2147483648&e)>>16|n>>13,!1);else{var a=r-127;a<-24?rs.setUint16(0,0):a<-14?rs.setUint16(0,(2147483648&t)>>16|1<<24+a,!1):rs.setUint16(0,(2147483648&t)>>16|a+15<<10|n>>13,!1)}}}function is(e,t){if(e.length-t<2)throw new Error("".concat(Eo," not enough data for float16"));var r=(e[t]<<8)+e[t+1];if(31744===r)return 1/0;if(64512===r)return-1/0;if(32256===r)return NaN;var n,a=r>>10&31,i=1023&r;return n=0===a?i*Math.pow(2,-24):31!==a?(i+1024)*Math.pow(2,a-25):0===i?1/0:NaN,32768&r?-n:n}function os(e){rs.setFloat32(0,e,!1)}function ss(e,t){if(e.length-t<4)throw new Error("".concat(Eo," not enough data for float32"));var r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function us(e,t){if(e.length-t<8)throw new Error("".concat(Eo," not enough data for float64"));var r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}function cs(e,t,r){throw new Error("".concat(Eo," encountered invalid minor (").concat(r,") for major ").concat(e[t]>>>5))}function ls(e){return function(){throw new Error("".concat(Eo," ").concat(e))}}es.compareTokens=No.compareTokens;for(var fs=[],hs=0;hs<=23;hs++)fs[hs]=cs;fs[24]=function(e,t,r,n){return new so(oo.uint,To(e,t+1,n),2)},fs[25]=function(e,t,r,n){return new so(oo.uint,Do(e,t+1,n),3)},fs[26]=function(e,t,r,n){return new so(oo.uint,Ro(e,t+1,n),5)},fs[27]=function(e,t,r,n){return new so(oo.uint,Po(e,t+1,n),9)},fs[28]=cs,fs[29]=cs,fs[30]=cs,fs[31]=cs;for(var ps=32;ps<=55;ps++)fs[ps]=cs;fs[56]=function(e,t,r,n){return new so(oo.negint,-1-To(e,t+1,n),2)},fs[57]=function(e,t,r,n){return new so(oo.negint,-1-Do(e,t+1,n),3)},fs[58]=function(e,t,r,n){return new so(oo.negint,-1-Ro(e,t+1,n),5)},fs[59]=function(e,t,r,n){var a=Po(e,t+1,n);if("bigint"!==typeof a){var i=-1-a;if(i>=Number.MIN_SAFE_INTEGER)return new so(oo.negint,i,9)}if(!0!==n.allowBigInt)throw new Error("".concat(Eo," integers outside of the safe integer range are not supported"));return new so(oo.negint,Oo-BigInt(a),9)},fs[60]=cs,fs[61]=cs,fs[62]=cs,fs[63]=cs;for(var ds=64;ds<=87;ds++)fs[ds]=zo;fs[88]=function(e,t,r,n){return Mo(e,t,2,To(e,t+1,n))},fs[89]=function(e,t,r,n){return Mo(e,t,3,Do(e,t+1,n))},fs[90]=function(e,t,r,n){return Mo(e,t,5,Ro(e,t+1,n))},fs[91]=function(e,t,r,n){var a=Po(e,t+1,n);if("bigint"===typeof a)throw new Error("".concat(Eo," 64-bit integer bytes lengths not supported"));return Mo(e,t,9,a)},fs[92]=cs,fs[93]=cs,fs[94]=cs,fs[95]=ls("indefinite length bytes/strings are not supported");for(var vs=96;vs<=119;vs++)fs[vs]=qo;fs[120]=function(e,t,r,n){return jo(e,t,2,To(e,t+1,n),n)},fs[121]=function(e,t,r,n){return jo(e,t,3,Do(e,t+1,n),n)},fs[122]=function(e,t,r,n){return jo(e,t,5,Ro(e,t+1,n),n)},fs[123]=function(e,t,r,n){var a=Po(e,t+1,n);if("bigint"===typeof a)throw new Error("".concat(Eo," 64-bit integer string lengths not supported"));return jo(e,t,9,a,n)},fs[124]=cs,fs[125]=cs,fs[126]=cs,fs[127]=ls("indefinite length bytes/strings are not supported");for(var ys=128;ys<=151;ys++)fs[ys]=Go;fs[152]=function(e,t,r,n){return Ho(0,0,2,To(e,t+1,n))},fs[153]=function(e,t,r,n){return Ho(0,0,3,Do(e,t+1,n))},fs[154]=function(e,t,r,n){return Ho(0,0,5,Ro(e,t+1,n))},fs[155]=function(e,t,r,n){var a=Po(e,t+1,n);if("bigint"===typeof a)throw new Error("".concat(Eo," 64-bit integer array lengths not supported"));return Ho(0,0,9,a)},fs[156]=cs,fs[157]=cs,fs[158]=cs,fs[159]=function(e,t,r,n){if(!1===n.allowIndefinite)throw new Error("".concat(Eo," indefinite length items not allowed"));return Ho(0,0,1,1/0)};for(var bs=160;bs<=183;bs++)fs[bs]=Qo;fs[184]=function(e,t,r,n){return Yo(0,0,2,To(e,t+1,n))},fs[185]=function(e,t,r,n){return Yo(0,0,3,Do(e,t+1,n))},fs[186]=function(e,t,r,n){return Yo(0,0,5,Ro(e,t+1,n))},fs[187]=function(e,t,r,n){var a=Po(e,t+1,n);if("bigint"===typeof a)throw new Error("".concat(Eo," 64-bit integer map lengths not supported"));return Yo(0,0,9,a)},fs[188]=cs,fs[189]=cs,fs[190]=cs,fs[191]=function(e,t,r,n){if(!1===n.allowIndefinite)throw new Error("".concat(Eo," indefinite length items not allowed"));return Yo(0,0,1,1/0)};for(var gs=192;gs<=215;gs++)fs[gs]=Zo;fs[216]=function(e,t,r,n){return new so(oo.tag,To(e,t+1,n),2)},fs[217]=function(e,t,r,n){return new so(oo.tag,Do(e,t+1,n),3)},fs[218]=function(e,t,r,n){return new so(oo.tag,Ro(e,t+1,n),5)},fs[219]=function(e,t,r,n){return new so(oo.tag,Po(e,t+1,n),9)},fs[220]=cs,fs[221]=cs,fs[222]=cs,fs[223]=cs;for(var ms=224;ms<=243;ms++)fs[ms]=ls("simple values are not supported");fs[244]=cs,fs[245]=cs,fs[246]=cs,fs[247]=function(e,t,r,n){if(!1===n.allowUndefined)throw new Error("".concat(Eo," undefined values are not supported"));return!0===n.coerceUndefinedToNull?new so(oo.null,null,1):new so(oo.undefined,void 0,1)},fs[248]=ls("simple values are not supported"),fs[249]=function(e,t,r,n){return $o(is(e,t+1),3,n)},fs[250]=function(e,t,r,n){return $o(ss(e,t+1),5,n)},fs[251]=function(e,t,r,n){return $o(us(e,t+1),9,n)},fs[252]=cs,fs[253]=cs,fs[254]=cs,fs[255]=function(e,t,r,n){if(!1===n.allowIndefinite)throw new Error("".concat(Eo," indefinite length items not allowed"));return new so(oo.break,void 0,1)};for(var ws=[],ks=0;ks<24;ks++)ws[ks]=new so(oo.uint,ks,1);for(var xs=-1;xs>=-24;xs--)ws[31-xs]=new so(oo.negint,xs,1);ws[64]=new so(oo.bytes,new Uint8Array(0),1),ws[96]=new so(oo.string,"",1),ws[128]=new so(oo.array,0,1),ws[160]=new so(oo.map,0,1),ws[244]=new so(oo.false,!1,1),ws[245]=new so(oo.true,!0,1),ws[246]=new so(oo.null,null,1);var _s={float64:!1,mapSorter:function(e,t){var r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);var a=r.type.major,i=Es[a].compareTokens(r,n);0===i&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone");return i},quickEncodeToken:function(e){switch(e.type){case oo.false:return yo([244]);case oo.true:return yo([245]);case oo.null:return yo([246]);case oo.bytes:return e.value.length?void 0:yo([64]);case oo.string:return""===e.value?yo([96]):void 0;case oo.array:return 0===e.value?yo([128]):void 0;case oo.map:return 0===e.value?yo([160]):void 0;case oo.uint:return e.value<24?yo([Number(e.value)]):void 0;case oo.negint:if(e.value>=-24)return yo([31-Number(e.value)])}}};var Es=function(){var e=[];return e[oo.uint.major]=No,e[oo.negint.major]=Uo,e[oo.bytes.major]=Vo,e[oo.string.major]=Ko,e[oo.array.major]=Wo,e[oo.map.major]=Jo,e[oo.tag.major]=Xo,e[oo.float.major]=es,e}(),Ss=new _o,As=function(){function e(t,r){Cn(this,e),this.obj=t,this.parent=r}return Dn(e,[{key:"includes",value:function(e){var t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}}],[{key:"createCheck",value:function(t,r){if(t&&t.includes(r))throw new Error("".concat(So," object contains circular references"));return new e(r,t)}}]),e}(),Cs={null:new so(oo.null,null),undefined:new so(oo.undefined,void 0),true:new so(oo.true,!0),false:new so(oo.false,!1),emptyArray:new so(oo.array,0),emptyMap:new so(oo.map,0)},Is={number:function(e,t,r,n){return Number.isInteger(e)&&Number.isSafeInteger(e)?new so(e>=0?oo.uint:oo.negint,e):new so(oo.float,e)},bigint:function(e,t,r,n){return e>=BigInt(0)?new so(oo.uint,e):new so(oo.negint,e)},Uint8Array:function(e,t,r,n){return new so(oo.bytes,e)},string:function(e,t,r,n){return new so(oo.string,e)},boolean:function(e,t,r,n){return e?Cs.true:Cs.false},null:function(e,t,r,n){return Cs.null},undefined:function(e,t,r,n){return Cs.undefined},ArrayBuffer:function(e,t,r,n){return new so(oo.bytes,new Uint8Array(e))},DataView:function(e,t,r,n){return new so(oo.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array:function(e,t,r,n){if(!e.length)return!0===r.addBreakTokens?[Cs.emptyArray,new so(oo.break)]:Cs.emptyArray;n=As.createCheck(n,e);var a,i=[],o=0,s=Ni(e);try{for(s.s();!(a=s.n()).done;){var u=a.value;i[o++]=Ps(u,r,n)}}catch(eL){s.e(eL)}finally{s.f()}return r.addBreakTokens?[new so(oo.array,e.length),i,new so(oo.break)]:[new so(oo.array,e.length),i]},Object:function(e){function t(t,r,n,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,r,n){var a="Object"!==t,i=a?e.keys():Object.keys(e),o=a?e.size:i.length;if(!o)return!0===r.addBreakTokens?[Cs.emptyMap,new so(oo.break)]:Cs.emptyMap;n=As.createCheck(n,e);var s,u=[],c=0,l=Ni(i);try{for(l.s();!(s=l.n()).done;){var f=s.value;u[c++]=[Ps(f,r,n),Ps(a?e.get(f):e[f],r,n)]}}catch(eL){l.e(eL)}finally{l.f()}return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(u,r),r.addBreakTokens?[new so(oo.map,o),u,new so(oo.break)]:[new so(oo.map,o),u]}))};Is.Map=Is.Object,Is.Buffer=Is.Uint8Array;var Ts,Ds=Ni("Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "));try{for(Ds.s();!(Ts=Ds.n()).done;){var Rs=Ts.value;Is["".concat(Rs,"Array")]=Is.DataView}}catch(eL){Ds.e(eL)}finally{Ds.f()}function Ps(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=io(e),a=t&&t.typeEncoders&&t.typeEncoders[n]||Is[n];if("function"===typeof a){var i=a(e,n,t,r);if(null!=i)return i}var o=Is[n];if(!o)throw new Error("".concat(So," unsupported type: ").concat(n));return o(e,n,t,r)}function Ns(e,t,r,n){if(Array.isArray(t)){var a,i=Ni(t);try{for(i.s();!(a=i.n()).done;){Ns(e,a.value,r,n)}}catch(eL){i.e(eL)}finally{i.f()}}else r[t.type.major](e,t,n)}function Ls(e,t,r){var n=Ps(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){var a=r.quickEncodeToken(n);if(a)return a;var i=t[n.type.major];if(i.encodedSize){var o=i.encodedSize(n,r),s=new _o(o);if(i(s,n,r),1!==s.chunks.length)throw new Error("Unexpected error: pre-calculated length for ".concat(n," was wrong"));return ho(s.chunks[0])}}return Ss.reset(),Ns(Ss,n,t,r),Ss.toBytes(!0)}function Os(e,t){return t=Object.assign({},_s,t),Ls(e,Es,t)}var Bs={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Us=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Cn(this,e),this.pos=0,this.data=t,this.options=r}return Dn(e,[{key:"done",value:function(){return this.pos>=this.data.length}},{key:"next",value:function(){var e=this.data[this.pos],t=ws[e];if(void 0===t){var r=fs[e];if(!r)throw new Error("".concat(Eo," no decoder for major type ").concat(e>>>5," (byte 0x").concat(e.toString(16).padStart(2,"0"),")"));var n=31&e;t=r(this.data,this.pos,n,this.options)}return this.pos+=t.encodedLength,t}}]),e}(),Ms=Symbol.for("DONE"),zs=Symbol.for("BREAK");function Fs(e,t){if(e.done())return Ms;var r=e.next();if(r.type===oo.break)return zs;if(r.type.terminal)return r.value;if(r.type===oo.array)return function(e,t,r){for(var n=[],a=0;a<e.value;a++){var i=Fs(t,r);if(i===zs){if(e.value===1/0)break;throw new Error("".concat(Eo," got unexpected break to lengthed array"))}if(i===Ms)throw new Error("".concat(Eo," found array but not enough entries (got ").concat(a,", expected ").concat(e.value,")"));n[a]=i}return n}(r,e,t);if(r.type===oo.map)return function(e,t,r){for(var n=!0===r.useMaps,a=n?void 0:{},i=n?new Map:void 0,o=0;o<e.value;o++){var s=Fs(t,r);if(s===zs){if(e.value===1/0)break;throw new Error("".concat(Eo," got unexpected break to lengthed map"))}if(s===Ms)throw new Error("".concat(Eo," found map but not enough entries (got ").concat(o," [no key], expected ").concat(e.value,")"));if(!0!==n&&"string"!==typeof s)throw new Error("".concat(Eo," non-string keys not supported (got ").concat(typeof s,")"));if(!0===r.rejectDuplicateMapKeys&&(n&&i.has(s)||!n&&s in a))throw new Error("".concat(Eo,' found repeat map key "').concat(s,'"'));var u=Fs(t,r);if(u===Ms)throw new Error("".concat(Eo," found map but not enough entries (got ").concat(o," [no value], expected ").concat(e.value,")"));n?i.set(s,u):a[s]=u}return n?i:a}(r,e,t);if(r.type===oo.tag){if(t.tags&&"function"===typeof t.tags[r.value]){var n=Fs(e,t);return t.tags[r.value](n)}throw new Error("".concat(Eo," tag not supported (").concat(r.value,")"))}throw new Error("unsupported")}function Vs(e,t){if(!(e instanceof Uint8Array))throw new Error("".concat(Eo," data to decode must be a Uint8Array"));var r=(t=Object.assign({},Bs,t)).tokenizer||new Us(e,t),n=Fs(r,t);if(n===Ms)throw new Error("".concat(Eo," did not find any content to decode"));if(n===zs)throw new Error("".concat(Eo," got unexpected break"));if(!r.done())throw new Error("".concat(Eo," too many terminals, data makes no sense"));return n}var js={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;var t=wi.asCID(e);if(!t)return null;var r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new so(oo.tag,42),new so(oo.bytes,r)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};var qs={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};qs.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return wi.decode(e.subarray(1))};var Ks="dag-cbor",Hs=113,Gs=function(e){return Os(e,js)},Ws=function(e){return Vs(e,qs)};function Ys(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nn(e)););return e}function Qs(){return Qs="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Ys(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},Qs.apply(this,arguments)}var Js=function(e){var t=e.name,r=e.code,n=e.encode;return new Zs(t,r,n)},Zs=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?Wa(this.code,r):r.then((function(e){return Wa(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),Xs=ii({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$s=ii({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),eu=ii({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tu=ii({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function ru(e,t,r){return ru=Ln()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&Rn(a,r.prototype),a},ru.apply(null,arguments)}function nu(e){var t="function"===typeof Map?new Map:void 0;return nu=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ru(e,arguments,Nn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Rn(n,e)},nu(e)}var au=function(e,t,r,n,a,i,o,s,u){Pn(l,e);var c=Un(l);function l(){var e;return Cn(this,l),(e=c.call(this)).inRecursive=[],e}return Dn(l,[{key:"prefix",value:function(e){var t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===oo.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===oo.map&&(t.elements++,1!==t.elements&&(t.elements%2===1?e.push([44]):e.push([58]))))}},{key:t,value:function(e,t){this.prefix(e);for(var r=String(t.value),n=[],a=0;a<r.length;a++)n[a]=r.charCodeAt(a);e.push(n)}},{key:r,value:function(e,t){this[oo.uint.major](e,t)}},{key:n,value:function(e,t){throw new Error("".concat(So," unsupported type: Uint8Array"))}},{key:a,value:function(e,t){this.prefix(e);var r=vo(JSON.stringify(t.value));e.push(r.length>32?ho(r):r)}},{key:i,value:function(e,t){this.prefix(e),this.inRecursive.push({type:oo.array,elements:0}),e.push([91])}},{key:o,value:function(e,t){this.prefix(e),this.inRecursive.push({type:oo.map,elements:0}),e.push([123])}},{key:s,value:function(e,t){}},{key:u,value:function(e,t){if("break"===t.type.name){var r=this.inRecursive.pop();if(r){if(r.type===oo.array)e.push([93]);else{if(r.type!==oo.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error("".concat(So," unsupported type: undefined"));if(this.prefix(e),"true"!==t.type.name)if("false"!==t.type.name)if("null"!==t.type.name){for(var n=String(t.value),a=[],i=!1,o=0;o<n.length;o++)a[o]=n.charCodeAt(o),i||46!==a[o]&&101!==a[o]&&69!==a[o]||(i=!0);i||(a.push(46),a.push(48)),e.push(a)}else e.push([110,117,108,108]);else e.push([102,97,108,115,101]);else e.push([116,114,117,101])}}]),l}(nu(Array),oo.uint.major,oo.negint.major,oo.bytes.major,oo.string.major,oo.array.major,oo.map.major,oo.tag.major,oo.float.major);var iu={addBreakTokens:!0,mapSorter:function(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error("".concat(So," complex map keys are not supported"));var r=e[0],n=t[0];if(r.type!==oo.string||n.type!==oo.string)throw new Error("".concat(So," non-string map keys are not supported"));if(r<n)return-1;if(r>n)return 1;throw new Error("".concat(So," unexpected duplicate map keys, this is not supported"))}};function ou(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function su(e){return function(e){if(Array.isArray(e))return Sa(e)}(e)||ou(e)||Aa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var uu=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Cn(this,e),this.pos=0,this.data=t,this.options=r,this.modeStack=["value"],this.lastToken=""}return Dn(e,[{key:"done",value:function(){return this.pos>=this.data.length}},{key:"ch",value:function(){return this.data[this.pos]}},{key:"currentMode",value:function(){return this.modeStack[this.modeStack.length-1]}},{key:"skipWhitespace",value:function(){for(var e=this.ch();32===e||9===e||13===e||10===e;)e=this.data[++this.pos]}},{key:"expect",value:function(e){if(this.data.length-this.pos<e.length)throw new Error("".concat(Eo," unexpected end of input at position ").concat(this.pos));for(var t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw new Error("".concat(Eo," unexpected token at position ").concat(this.pos,", expected to find '").concat(String.fromCharCode.apply(String,su(e)),"'"))}},{key:"parseNumber",value:function(){var e=this,t=this.pos,r=!1,n=!1,a=function(t){for(;!e.done();){var r=e.ch();if(!t.includes(r))break;e.pos++}};if(45===this.ch()&&(r=!0,this.pos++),48===this.ch()){if(this.pos++,46!==this.ch())return new so(oo.uint,0,this.pos-t);this.pos++,n=!0}if(a([48,49,50,51,52,53,54,55,56,57]),r&&this.pos===t+1)throw new Error("".concat(Eo," unexpected token at position ").concat(this.pos));if(!this.done()&&46===this.ch()){if(n)throw new Error("".concat(Eo," unexpected token at position ").concat(this.pos));n=!0,this.pos++,a([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(n=!0,this.pos++,this.done()||43!==this.ch()&&45!==this.ch()||this.pos++,a([48,49,50,51,52,53,54,55,56,57]));var i=String.fromCharCode.apply(null,this.data.subarray(t,this.pos)),o=parseFloat(i);return n?new so(oo.float,o,this.pos-t):!0!==this.options.allowBigInt||Number.isSafeInteger(o)?new so(o>=0?oo.uint:oo.negint,o,this.pos-t):new so(o>=0?oo.uint:oo.negint,BigInt(i),this.pos-t)}},{key:"parseString",value:function(){var e=this;if(34!==this.ch())throw new Error("".concat(Eo," unexpected character at position ").concat(this.pos,"; this shouldn't happen"));this.pos++;for(var t=this.pos,r=0;t<this.data.length&&r<65536;t++,r++){var n=this.data[t];if(92===n||n<32||n>=128)break;if(34===n){var a=String.fromCharCode.apply(null,this.data.subarray(this.pos,t));return this.pos=t+1,new so(oo.string,a,r)}}for(var i=this.pos,o=[],s=function(){if(e.pos+4>=e.data.length)throw new Error("".concat(Eo," unexpected end of unicode escape sequence at position ").concat(e.pos));for(var t=0,r=0;r<4;r++){var n=e.ch();if(n>=48&&n<=57)n-=48;else if(n>=97&&n<=102)n=n-97+10;else{if(!(n>=65&&n<=70))throw new Error("".concat(Eo," unexpected unicode escape character at position ").concat(e.pos));n=n-65+10}t=16*t+n,e.pos++}return t},u=function(){var t,r,n,a,i=e.ch(),s=null,u=i>239?4:i>223?3:i>191?2:1;if(e.pos+u>e.data.length)throw new Error("".concat(Eo," unexpected unicode sequence at position ").concat(e.pos));switch(u){case 1:i<128&&(s=i);break;case 2:128===(192&(t=e.data[e.pos+1]))&&(a=(31&i)<<6|63&t)>127&&(s=a);break;case 3:t=e.data[e.pos+1],r=e.data[e.pos+2],128===(192&t)&&128===(192&r)&&(a=(15&i)<<12|(63&t)<<6|63&r)>2047&&(a<55296||a>57343)&&(s=a);break;case 4:t=e.data[e.pos+1],r=e.data[e.pos+2],n=e.data[e.pos+3],128===(192&t)&&128===(192&r)&&128===(192&n)&&(a=(15&i)<<18|(63&t)<<12|(63&r)<<6|63&n)>65535&&a<1114112&&(s=a)}null===s?(s=65533,u=1):s>65535&&(s-=65536,o.push(s>>>10&1023|55296),s=56320|1023&s),o.push(s),e.pos+=u};!this.done();){var c=this.ch(),l=void 0;switch(c){case 92:if(this.pos++,this.done())throw new Error("".concat(Eo," unexpected string termination at position ").concat(this.pos));switch(l=this.ch(),this.pos++,l){case 34:case 39:case 92:case 47:o.push(l);break;case 98:o.push(8);break;case 116:o.push(9);break;case 110:o.push(10);break;case 102:o.push(12);break;case 114:o.push(13);break;case 117:o.push(s());break;default:throw new Error("".concat(Eo," unexpected string escape character at position ").concat(this.pos))}break;case 34:return this.pos++,new so(oo.string,xo(o),this.pos-i);default:if(c<32)throw new Error("".concat(Eo," invalid control character at position ").concat(this.pos));c<128?(o.push(c),this.pos++):u()}}throw new Error("".concat(Eo," unexpected end of string at position ").concat(this.pos))}},{key:"parseValue",value:function(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new so(oo.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new so(oo.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new so(oo.null,null,4);case 102:return this.expect([102,97,108,115,101]),new so(oo.false,!1,5);case 116:return this.expect([116,114,117,101]),new so(oo.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error("".concat(Eo," unexpected character at position ").concat(this.pos))}}},{key:"next",value:function(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this.pos++,this.skipWhitespace(),new so(oo.break,void 0,1);if(44!==this.ch())throw new Error("".concat(Eo," unexpected character at position ").concat(this.pos,", was expecting array delimiter but found '").concat(String.fromCharCode(this.ch()),"'"));return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this.pos++,this.skipWhitespace(),new so(oo.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new so(oo.break,void 0,1);if(44!==this.ch())throw new Error("".concat(Eo," unexpected character at position ").concat(this.pos,", was expecting object delimiter but found '").concat(String.fromCharCode(this.ch()),"'"));this.pos++,this.skipWhitespace();case"obj-start":if(this.modeStack.pop(),125===this.ch())return this.pos++,this.skipWhitespace(),new so(oo.break,void 0,1);var e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error("".concat(Eo," unexpected character at position ").concat(this.pos,", was expecting key/value delimiter ':' but found '").concat(String.fromCharCode(this.ch()),"'"));return this.pos++,this.modeStack.push("obj-value"),e;case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error("".concat(Eo," unexpected parse state at position ").concat(this.pos,"; this shouldn't happen"))}}}]),e}();function cu(e){var t=Xs.encode(e).slice(1);return[new so(oo.map,1/0,1),new so(oo.string,"/",1),new so(oo.map,1/0,1),new so(oo.string,"bytes",5),new so(oo.string,t,t.length),new so(oo.break,void 0,1),new so(oo.break,void 0,1)]}var lu={typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;var t=wi.asCID(e);if(!t)return null;var r=t.toString();return[new so(oo.map,1/0,1),new so(oo.string,"/",1),new so(oo.string,r,r.length),new so(oo.break,void 0,1)]},Uint8Array:cu,Buffer:cu,undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},fu=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a;return Cn(this,r),(a=t.call(this,e,n)).tokenBuffer=[],a}return Dn(r,[{key:"done",value:function(){return 0===this.tokenBuffer.length&&Qs(Nn(r.prototype),"done",this).call(this)}},{key:"_next",value:function(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():Qs(Nn(r.prototype),"next",this).call(this)}},{key:"next",value:function(){var e=this._next();if(e.type===oo.map){var t=this._next();if(t.type===oo.string&&"/"===t.value){var r=this._next();if(r.type===oo.string){if(this._next().type!==oo.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(r),new so(oo.tag,42,0)}if(r.type===oo.map){var n=this._next();if(n.type===oo.string&&"bytes"===n.value){var a=this._next();if(a.type===oo.string){for(var i=0;i<2;i++){if(this._next().type!==oo.break)throw new Error("Invalid encoded Bytes form")}var o=Xs.decode("m".concat(a.value));return new so(oo.bytes,o,a.value.length)}this.tokenBuffer.push(a)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}this.tokenBuffer.push(t)}return e}}]),r}(uu),hu={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};hu.tags[42]=wi.parse;var pu="dag-json",du=297,vu=function(e){return t=e,r=lu,r=Object.assign({},iu,r),Ls(t,new au,r);var t,r},yu=function(e){return function(e,t){return Vs(e,t=Object.assign({tokenizer:new uu(e,t)},t))}(e,Object.assign(hu,{tokenizer:new fu(e,hu)}))},bu=function(e){return gu.decode(vu(e))},gu=new TextDecoder,mu=function(e){return yu(wu.encode(e))},wu=new TextEncoder;var ku=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},xu=ku,_u=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Eu=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),Su=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Cu(this,e)}}]),e}(),Au=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return Cu(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Cu=function(e,t){return new Au(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},Iu=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Eu(t,r,n),this.decoder=new Su(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Tu=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new Iu(t,r,n,a)},Du=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=xu(n,r),i=a.encode,o=a.decode;return Tu({prefix:t,name:r,encode:i,decode:function(e){return _u(o(e))}})},Ru=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return Tu({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},Pu=(Ru({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ru({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ru({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}));Ru({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Nu(e){return Pu.encode(e).slice(1)}function Lu(e){return Pu.decode("u".concat(e))}var Ou=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Bu;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Bu=Math.pow(2,31);var Uu=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var Mu=Math.pow(2,7),zu=Math.pow(2,14),Fu=Math.pow(2,21),Vu=Math.pow(2,28),ju=Math.pow(2,35),qu=Math.pow(2,42),Ku=Math.pow(2,49),Hu=Math.pow(2,56),Gu=Math.pow(2,63),Wu={encode:Ou,decode:Uu,encodingLength:function(e){return e<Mu?1:e<zu?2:e<Fu?3:e<Vu?4:e<ju?5:e<qu?6:e<Ku?7:e<Hu?8:e<Gu?9:10}},Yu=Wu,Qu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Yu.decode(e,t);return[r,Yu.decode.bytes]},Ju=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Yu.encode(e,t,r),t},Zu=function(e){return Yu.encodingLength(e)},Xu=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),$u=Du({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ec=(Du({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Ru({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),tc=(Ru({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ru({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ru({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ru({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ru({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ru({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ru({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ru({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),function(e,t){var r=e.bytes;return 0===e.version?oc(r,nc(e),t||$u.encoder):sc(r,nc(e),t||ec.encoder)}),rc=new WeakMap,nc=function(e){var t=rc.get(e);if(null==t){var r=new Map;return rc.set(e,r),r}return t},ac=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==uc)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==cc)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=function(e,t){var r=t.byteLength,n=Zu(e),a=n+Zu(r),i=new Uint8Array(a+r);return Ju(e,i,0),Ju(r,i,n),i.set(t,a),new Xu(e,r,t,i)}(e.code,e.digest);return r.createV1(this.code,t);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return tc(this,e)}},{key:"toJSON",value:function(){return{"/":tc(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||lc(n,a,i.bytes))}if(!0===t[fc]){var o=t.version,s=t.multihash,u=t.code,c=function(e){var t=_u(e),r=Ia(Qu(t),2),n=r[0],a=r[1],i=Ia(Qu(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new Xu(n,o,u,t)}(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==uc)throw new Error("Version 0 CID must use dag-pb (code: ".concat(uc,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,lc(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,uc,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=_u(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new Xu(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(Qu(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=uc;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(ic(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return nc(o).set(a,e),o}}]),r}(),ic=function(e,t){switch(e[0]){case"Q":var r=t||$u;return[$u.prefix,r.decode("".concat($u.prefix).concat(e))];case $u.prefix:var n=t||$u;return[$u.prefix,n.decode(e)];case ec.prefix:var a=t||ec;return[ec.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},oc=function(e,t,r){var n=r.prefix;if(n!==$u.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},sc=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},uc=112,cc=18,lc=function(e,t,r){var n=Zu(e),a=n+Zu(t),i=new Uint8Array(a+r.byteLength);return Ju(e,i,0),Ju(t,i,n),i.set(r,a),i},fc=Symbol.for("@ipld/js-cid/CID");function hc(e){var t={signature:Lu(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Lu(e.protected)),t}function pc(e){var t={signature:Nu(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Nu(e.protected)),t}function dc(e){var t={};return e.encrypted_key&&(t.encrypted_key=Lu(e.encrypted_key)),e.header&&(t.header=e.header),t}function vc(e){var t={};return e.encrypted_key&&(t.encrypted_key=Nu(e.encrypted_key)),e.header&&(t.header=e.header),t}var yc={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;var t=ac.asCID(e);if(!t)return null;var r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new so(oo.tag,42),new so(oo.bytes,r)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};var bc={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};bc.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return ac.decode(e.subarray(1))};var gc="dag-jose",mc=133;function wc(e){return"payload"in e&&"string"===typeof e.payload&&"signatures"in e&&Array.isArray(e.signatures)}function kc(e){return"ciphertext"in e&&"string"===typeof e.ciphertext&&"iv"in e&&"string"===typeof e.iv&&"protected"in e&&"string"===typeof e.protected&&"tag"in e&&"string"===typeof e.tag}function xc(e){if("string"===typeof e){var t=e.split(".");if(3===t.length)return function(e){var t=Ia(e,3),r=t[0],n=t[1];return{payload:n,signatures:[{protected:r,signature:t[2]}],link:ac.decode(Lu(n))}}(t);if(5===t.length)return function(e){var t=Ia(e,5),r=t[0],n=t[1],a=t[2],i={ciphertext:t[3],iv:a,protected:r,tag:t[4]};return n&&(i.recipients=[{encrypted_key:n}]),i}(t);throw new Error("Not a valid JOSE string")}if(wc(e)||kc(e))return e;throw new Error("Not a valid unencoded JOSE object")}function _c(e){var t;if("string"===typeof e&&(e=xc(e)),wc(e))t=function(e){var t=Lu(e.payload);try{ac.decode(t)}catch(r){throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(hc)}}(e);else{if(!kc(e))throw new Error("Not a valid JOSE object");t=function(e){var t={ciphertext:Lu(e.ciphertext),protected:Lu(e.protected),iv:Lu(e.iv),tag:Lu(e.tag)};return e.aad&&(t.aad=Lu(e.aad)),e.recipients&&(t.recipients=e.recipients.map(dc)),e.unprotected&&(t.unprotected=e.unprotected),t}(e)}return new Uint8Array(Os(t,yc))}function Ec(e){var t,r;try{t=function(e){return Vs(e,bc)}(e)}catch(n){throw new Error("Not a valid DAG-JOSE object")}if("payload"in(r=t)&&r.payload instanceof Uint8Array&&"signatures"in r&&Array.isArray(r.signatures))return function(e){var t={payload:Nu(e.payload),signatures:e.signatures.map(pc)};return t.link=ac.decode(new Uint8Array(e.payload)),t}(t);if(function(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}(t))return function(e){var t={ciphertext:Nu(e.ciphertext),protected:Nu(e.protected),iv:Nu(e.iv),tag:Nu(e.tag)};return e.aad&&(t.aad=Nu(e.aad)),e.recipients&&(t.recipients=e.recipients.map(vc)),e.unprotected&&(t.unprotected=e.unprotected),t}(t);throw new Error("Not a valid DAG-JOSE object")}var Sc=Ga,Ac={code:0,name:"identity",encode:Sc,digest:function(e){return Wa(0,Sc(e))}},Cc=ni({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),Ic=ii({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Tc=ii({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Dc=ai({prefix:"9",name:"base10",alphabet:"0123456789"}),Rc=ii({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Pc=ii({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Nc=ai({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Lc=ai({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Oc=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Bc=Oc.reduce((function(e,t,r){return e[r]=t,e}),[]),Uc=Oc.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var Mc=ni({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=Bc[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=Uc[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),zc=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Fc=Js({name:"sha2-256",code:18,encode:zc("SHA-256")}),Vc=Js({name:"sha2-512",code:19,encode:zc("SHA-512")}),jc="raw",qc=85,Kc=function(e){return Ga(e)},Hc=function(e){return Ga(e)},Gc=new TextEncoder,Wc=new TextDecoder,Yc="json",Qc=512,Jc=function(e){return Gc.encode(JSON.stringify(e))},Zc=function(e){return JSON.parse(Wc.decode(e))},Xc=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},u),c),l),f),h),t),p),e),a),d),$c=jn(jn({},v),s),el={raw:y,json:b};var tl=function(e){Pn(r,e);var t=Un(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not initialized";return Cn(this,r),(e=t.call(this,n)).name="NotInitializedError",e.code=r.code,e}return Dn(r)}(nu(Error));tl.code="ERR_NOT_INITIALIZED";var rl=function(e){Pn(r,e);var t=Un(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot initialize an initializing node";return Cn(this,r),(e=t.call(this,n)).name="AlreadyInitializingError",e.code=nl.code,e}return Dn(r)}(nu(Error));rl.code="ERR_ALREADY_INITIALIZING";var nl=function(e){Pn(r,e);var t=Un(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot re-initialize an initialized node";return Cn(this,r),(e=t.call(this,n)).name="AlreadyInitializedError",e.code=r.code,e}return Dn(r)}(nu(Error));nl.code="ERR_ALREADY_INITIALIZED";var al=function(e){Pn(r,e);var t=Un(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not started";return Cn(this,r),(e=t.call(this,n)).name="NotStartedError",e.code=r.code,e}return Dn(r)}(nu(Error));al.code="ERR_NOT_STARTED";var il=function(e){Pn(r,e);var t=Un(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot start, already startin";return Cn(this,r),(e=t.call(this,n)).name="AlreadyStartingError",e.code=r.code,e}return Dn(r)}(nu(Error));il.code="ERR_ALREADY_STARTING";var ol=function(e){Pn(r,e);var t=Un(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot start, already started";return Cn(this,r),(e=t.call(this,n)).name="AlreadyStartedError",e.code=r.code,e}return Dn(r)}(nu(Error));ol.code="ERR_ALREADY_STARTED";var sl=function(e){Pn(r,e);var t=Un(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not enabled";return Cn(this,r),(e=t.call(this,n)).name="NotEnabledError",e.code=r.code,e}return Dn(r)}(nu(Error));sl.code="ERR_NOT_ENABLED";var ul=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},cl=ul,ll=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),fl=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),hl=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return dl(this,e)}}]),e}(),pl=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return dl(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),dl=function(e,t){return new pl(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},vl=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new fl(t,r,n),this.decoder=new hl(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),yl=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new vl(t,r,n,a)},bl=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=cl(n,r),i=a.encode,o=a.decode;return yl({prefix:t,name:r,encode:i,decode:function(e){return ll(o(e))}})},gl=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return yl({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},ml=yl({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),wl=gl({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),kl=gl({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),xl=bl({prefix:"9",name:"base10",alphabet:"0123456789"}),_l=gl({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),El=gl({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Sl=gl({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Al=gl({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Cl=gl({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Il=gl({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Tl=gl({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Dl=gl({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Rl=gl({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Pl=gl({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Nl=gl({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ll=bl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ol=bl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Bl=bl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ul=bl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Ml=gl({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),zl=gl({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Fl=gl({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Vl=gl({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),jl=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),ql=jl.reduce((function(e,t,r){return e[r]=t,e}),[]),Kl=jl.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var Hl=yl({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=ql[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=Kl[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),Gl=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Wl;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Wl=Math.pow(2,31);var Yl=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var Ql=Math.pow(2,7),Jl=Math.pow(2,14),Zl=Math.pow(2,21),Xl=Math.pow(2,28),$l=Math.pow(2,35),ef=Math.pow(2,42),tf=Math.pow(2,49),rf=Math.pow(2,56),nf=Math.pow(2,63),af={encode:Gl,decode:Yl,encodingLength:function(e){return e<Ql?1:e<Jl?2:e<Zl?3:e<Xl?4:e<$l?5:e<ef?6:e<tf?7:e<rf?8:e<nf?9:10}},of=af,sf=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return of.encode(e,t,r),t},uf=function(e){return of.encodingLength(e)},cf=function(e,t){var r=t.byteLength,n=uf(e),a=n+uf(r),i=new Uint8Array(a+r);return sf(e,i,0),sf(r,i,n),i.set(t,a),new lf(e,r,t,i)},lf=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),ff=function(e){var t=e.name,r=e.code,n=e.encode;return new hf(t,r,n)},hf=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?cf(this.code,r):r.then((function(e){return cf(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),pf=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},df=ff({name:"sha2-256",code:18,encode:pf("SHA-256")}),vf=ff({name:"sha2-512",code:19,encode:pf("SHA-512")}),yf=ll,bf={code:0,name:"identity",encode:yf,digest:function(e){return cf(0,yf(e))}},gf="raw",mf=85,wf=function(e){return ll(e)},kf=function(e){return ll(e)},xf=new TextEncoder,_f=new TextDecoder,Ef="json",Sf=512,Af=function(e){return xf.encode(JSON.stringify(e))},Cf=function(e){return JSON.parse(_f.decode(e))},If=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},g),m),w),k),x),_),E),S),A),C));jn(jn({},I),T);function Tf(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Df(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.alloc)?Tf(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function Rf(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?Tf(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Pf(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Nf=Pf("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),Lf=Pf("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=Rf((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Of=jn({utf8:Nf,"utf-8":Nf,hex:If.base16,latin1:Lf,ascii:Lf,binary:Lf},If);function Bf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=Of[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):Tf(globalThis.Buffer.from(e,"utf-8"))}var Uf=__webpack_require__(5714);function Mf(e){return new qn(e,0)}var zf=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Ff=zf,Vf=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),jf=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),qf=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Hf(this,e)}}]),e}(),Kf=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return Hf(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Hf=function(e,t){return new Kf(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},Gf=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new jf(t,r,n),this.decoder=new qf(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Wf=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new Gf(t,r,n,a)},Yf=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Ff(n,r),i=a.encode,o=a.decode;return Wf({prefix:t,name:r,encode:i,decode:function(e){return Vf(o(e))}})},Qf=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return Wf({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},Jf=Yf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Zf=(Yf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Qf({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),Xf=(Qf({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Qf({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Qf({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Qf({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Qf({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Qf({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Qf({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Qf({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=$f;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r}),$f=Math.pow(2,31);var eh=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var th=Math.pow(2,7),rh=Math.pow(2,14),nh=Math.pow(2,21),ah=Math.pow(2,28),ih=Math.pow(2,35),oh=Math.pow(2,42),sh=Math.pow(2,49),uh=Math.pow(2,56),ch=Math.pow(2,63),lh={encode:Xf,decode:eh,encodingLength:function(e){return e<th?1:e<rh?2:e<nh?3:e<ah?4:e<ih?5:e<oh?6:e<sh?7:e<uh?8:e<ch?9:10}},fh=lh,hh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=fh.decode(e,t);return[r,fh.decode.bytes]},ph=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return fh.encode(e,t,r),t},dh=function(e){return fh.encodingLength(e)},vh=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),yh=function(){function e(){Cn(this,e),Mn(this,"index",0),Mn(this,"input","")}return Dn(e,[{key:"new",value:function(e){return this.index=0,this.input=e,this}},{key:"readAtomically",value:function(e){var t=this.index,r=e();return void 0===r&&(this.index=t),r}},{key:"parseWith",value:function(e){var t=e();if(this.index===this.input.length)return t}},{key:"peekChar",value:function(){if(!(this.index>=this.input.length))return this.input[this.index]}},{key:"readChar",value:function(){if(!(this.index>=this.input.length))return this.input[this.index++]}},{key:"readGivenChar",value:function(e){var t=this;return this.readAtomically((function(){var r=t.readChar();if(r===e)return r}))}},{key:"readSeparator",value:function(e,t,r){var n=this;return this.readAtomically((function(){if(!(t>0&&void 0===n.readGivenChar(e)))return r()}))}},{key:"readNumber",value:function(e,t,r,n){var a=this;return this.readAtomically((function(){var i=0,o=0,s=a.peekChar();if(void 0!==s){for(var u="0"===s,c=Math.pow(2,8*n)-1;;){var l=a.readAtomically((function(){var t=a.readChar();if(void 0!==t){var r=Number.parseInt(t,e);if(!Number.isNaN(r))return r}}));if(void 0===l)break;if(i*=e,(i+=l)>c)return;if(o+=1,void 0!==t&&o>t)return}return 0===o||!r&&u&&o>1?void 0:i}}))}},{key:"readIPv4Addr",value:function(){var e=this;return this.readAtomically((function(){for(var t=new Uint8Array(4),r=0;r<t.length;r++){var n=e.readSeparator(".",r,(function(){return e.readNumber(10,3,!1,1)}));if(void 0===n)return;t[r]=n}return t}))}},{key:"readIPv6Addr",value:function(){var e=this,t=function(t){for(var r=0;r<t.length/2;r++){var n=2*r;if(r<t.length-3){var a=e.readSeparator(":",r,(function(){return e.readIPv4Addr()}));if(void 0!==a)return t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3],[n+4,!0]}var i=e.readSeparator(":",r,(function(){return e.readNumber(16,4,!0,2)}));if(void 0===i)return[n,!1];t[n]=i>>8,t[n+1]=255&i}return[t.length,!1]};return this.readAtomically((function(){var r=new Uint8Array(16),n=Ia(t(r),2),a=n[0],i=n[1];if(16===a)return r;if(!i&&void 0!==e.readGivenChar(":")&&void 0!==e.readGivenChar(":")){var o=new Uint8Array(14),s=16-(a+2),u=Ia(t(o.subarray(0,s)),1)[0];return r.set(o.subarray(0,u),16-u),r}}))}},{key:"readIPAddr",value:function(){var e;return null!==(e=this.readIPv4Addr())&&void 0!==e?e:this.readIPv6Addr()}}]),e}(),bh=new yh;function gh(e){return Boolean(function(e){if(!(e.length>15))return bh.new(e).parseWith((function(){return bh.readIPv4Addr()}))}(e))}function mh(e){return Boolean(function(e){if(!(e.length>45))return bh.new(e).parseWith((function(){return bh.readIPv6Addr()}))}(e))}function wh(e){return Boolean(function(e){if(!(e.length>45))return bh.new(e).parseWith((function(){return bh.readIPAddr()}))}(e))}function kh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=Of[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var xh=gh,_h=mh,Eh=function e(t){var r=0;if(t=t.toString().trim(),xh(t)){var n=new Uint8Array(r+4);return t.split(/\./g).forEach((function(e){n[r++]=255&parseInt(e,10)})),n}if(_h(t)){var a,i=t.split(":",8);for(a=0;a<i.length;a++){var o=void 0;xh(i[a])&&(o=e(i[a]),i[a]=kh(o.slice(0,2),"base16")),null!=o&&++a<8&&i.splice(a,0,kh(o.slice(2,4),"base16"))}if(""===i[0])for(;i.length<8;)i.unshift("0");else if(""===i[i.length-1])for(;i.length<8;)i.push("0");else if(i.length<8){for(a=0;a<i.length&&""!==i[a];a++);var s=[a,1];for(a=9-i.length;a>0;a--)s.push("0");i.splice.apply(i,s)}var u=new Uint8Array(r+16);for(a=0;a<i.length;a++){var c=parseInt(i[a],16);u[r++]=c>>8&255,u[r++]=255&c}return u}throw new Error("invalid ip address")},Sh=-1,Ah={},Ch={};function Ih(e,t,r,n,a){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(a)}}function Th(e){if("number"===typeof e){if(null!=Ch[e])return Ch[e];throw new Error("no protocol with code: ".concat(e))}if("string"===typeof e){if(null!=Ah[e])return Ah[e];throw new Error("no protocol with name: ".concat(e))}throw new Error("invalid protocol id type: ".concat(typeof e))}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Sh,"ip6zone"],[43,8,"ipcidr"],[53,Sh,"dns",!0],[54,Sh,"dns4",!0],[55,Sh,"dns6",!0],[56,Sh,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Sh,"unix",!1,!0],[421,Sh,"ipfs"],[421,Sh,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Sh,"garlic64"],[448,0,"tls"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,Sh,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,Sh,"memory"]].forEach((function(e){var t=Ih.apply(void 0,su(e));Ch[t.code]=t,Ah[t.name]=t}));var Dh=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Rh;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Rh=Math.pow(2,31);var Ph=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var Nh=Math.pow(2,7),Lh=Math.pow(2,14),Oh=Math.pow(2,21),Bh=Math.pow(2,28),Uh=Math.pow(2,35),Mh=Math.pow(2,42),zh=Math.pow(2,49),Fh=Math.pow(2,56),Vh=Math.pow(2,63),jh={encode:Dh,decode:Ph,encodingLength:function(e){return e<Nh?1:e<Lh?2:e<Oh?3:e<Bh?4:e<Uh?5:e<Mh?6:e<zh?7:e<Fh?8:e<Vh?9:10}},qh=jh,Kh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=qh.decode(e,t);return[r,qh.decode.bytes]},Hh=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return qh.encode(e,t,r),t},Gh=function(e){return qh.encodingLength(e)},Wh=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Yh=function(e,t){var r=t.byteLength,n=Gh(e),a=n+Gh(r),i=new Uint8Array(a+r);return Hh(e,i,0),Hh(r,i,n),i.set(t,a),new Jh(e,r,t,i)},Qh=function(e){var t=Wh(e),r=Ia(Kh(t),2),n=r[0],a=r[1],i=Ia(Kh(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new Jh(n,o,u,t)},Jh=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var Zh=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Xh=Zh,$h=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),ep=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return rp(this,e)}}]),e}(),tp=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return rp(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),rp=function(e,t){return new tp(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},np=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new $h(t,r,n),this.decoder=new ep(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),ap=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new np(t,r,n,a)},ip=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Xh(n,r),i=a.encode,o=a.decode;return ap({prefix:t,name:r,encode:i,decode:function(e){return Wh(o(e))}})},op=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return ap({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},sp=ip({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),up=ip({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),cp=op({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),lp=op({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),fp=op({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hp=op({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pp=op({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dp=op({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vp=op({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),yp=op({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),bp=op({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),gp=function(e,t){var r=e.bytes;return 0===e.version?_p(r,wp(e),t||sp.encoder):Ep(r,wp(e),t||cp.encoder)},mp=new WeakMap,wp=function(e){var t=mp.get(e);if(null==t){var r=new Map;return mp.set(e,r),r}return t},kp=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==Sp)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Ap)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=Yh(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return gp(this,e)}},{key:"toJSON",value:function(){return{"/":gp(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||Cp(n,a,i.bytes))}if(!0===t[Ip]){var o=t.version,s=t.multihash,u=t.code,c=Qh(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==Sp)throw new Error("Version 0 CID must use dag-pb (code: ".concat(Sp,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,Cp(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,Sp,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=Wh(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new Jh(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(Kh(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=Sp;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(xp(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return wp(o).set(a,e),o}}]),r}(),xp=function(e,t){switch(e[0]){case"Q":var r=t||sp;return[sp.prefix,r.decode("".concat(sp.prefix).concat(e))];case sp.prefix:var n=t||sp;return[sp.prefix,n.decode(e)];case cp.prefix:var a=t||cp;return[cp.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},_p=function(e,t,r){var n=r.prefix;if(n!==sp.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},Ep=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},Sp=112,Ap=18,Cp=function(e,t,r){var n=Gh(e),a=n+Gh(t),i=new Uint8Array(a+r.byteLength);return Hh(e,i,0),Hh(t,i,n),i.set(r,a),i},Ip=Symbol.for("@ipld/js-cid/CID"),Tp=ap({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),Dp=op({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Rp=op({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Pp=ip({prefix:"9",name:"base10",alphabet:"0123456789"}),Np=op({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Lp=op({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Op=ip({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Bp=ip({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Up=op({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Mp=op({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zp=op({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Fp=op({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Vp=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),jp=Vp.reduce((function(e,t,r){return e[r]=t,e}),[]),qp=Vp.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var Kp=ap({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=jp[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=qp[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),Hp=function(e){var t=e.name,r=e.code,n=e.encode;return new Gp(t,r,n)},Gp=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?Yh(this.code,r):r.then((function(e){return Yh(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),Wp=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Yp=Hp({name:"sha2-256",code:18,encode:Wp("SHA-256")}),Qp=Hp({name:"sha2-512",code:19,encode:Wp("SHA-512")}),Jp=Wh,Zp={code:0,name:"identity",encode:Jp,digest:function(e){return Yh(0,Jp(e))}},Xp="raw",$p=85,ed=function(e){return Wh(e)},td=function(e){return Wh(e)},rd=new TextEncoder,nd=new TextDecoder,ad="json",id=512,od=function(e){return rd.encode(JSON.stringify(e))},sd=function(e){return JSON.parse(nd.decode(e))},ud=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},L),O),B),U),M),N),z),P),F),V),cd=(jn(jn({},j),q),__webpack_require__(6494));function ld(e,t){null==t&&(t=e.reduce((function(e,t){return e+t.length}),0));var r,n=Rf(t),a=0,i=Ni(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.set(o,a),a+=o.length}}catch(eL){i.e(eL)}finally{i.f()}return Tf(n)}function fd(e,t){switch(Th(e).code){case 4:case 41:return function(e){var t=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;r=~~r,n=null!==(t=n)&&void 0!==t?t:e.length-r;var a=new DataView(e.buffer);if(4===n){for(var i=[],o=0;o<n;o++)i.push(e[r+o]);return i.join(".")}if(16===n){for(var s=[],u=0;u<n;u+=2)s.push(a.getUint16(r+u).toString(16));return s.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""}(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!wh(t))throw new Error("invalid ip address");return t}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 777:return md(t);case 6:case 273:case 33:case 132:return bd(t).toString();case 421:return function(e){var t=cd.decode(e),r=e.slice(cd.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return kh(r,"base58btc")}(t);case 444:case 445:return wd(t);case 466:return function(e){var t=cd.decode(e),r=e.slice(cd.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return"u"+kh(r,"base64url")}(t);default:return kh(t,"base16")}}function hd(e,t){switch(Th(e).code){case 4:case 41:return vd(t);case 42:case 53:case 54:case 55:case 56:case 400:case 777:return gd(t);case 6:case 273:case 33:case 132:return yd(parseInt(t,10));case 421:return function(e){var t;t="Q"===e[0]||"1"===e[0]?Qh(sp.decode("z".concat(e))).bytes:kp.parse(e).multihash.bytes;var r=Uint8Array.from(cd.encode(t.length));return ld([r,t],r.length+t.length)}(t);case 444:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(16!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion address."));var r=cp.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var a=yd(n);return ld([r,a],r.length+a.length)}(t);case 445:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(56!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion3 address."));var r=cp.decode("b".concat(t[0])),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var a=yd(n);return ld([r,a],r.length+a.length)}(t);case 466:return function(e){var t=dd.decode(e),r=Uint8Array.from(cd.encode(t.length));return ld([r,t],r.length+t.length)}(t);default:return Bf(t,"base16")}}var pd=Object.values(ud).map((function(e){return e.decoder})),dd=function(){var e=pd[0].or(pd[1]);return pd.slice(2).forEach((function(t){return e=e.or(t)})),e}();function vd(e){if(!wh(e))throw new Error("invalid ip address");return Eh(e)}function yd(e){var t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function bd(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function gd(e){var t=Bf(e),r=Uint8Array.from(cd.encode(t.length));return ld([r,t],r.length+t.length)}function md(e){var t=cd.decode(e);if((e=e.slice(cd.decode.bytes)).length!==t)throw new Error("inconsistent lengths");return kh(e)}function wd(e){var t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=kh(t,"base32"),a=bd(r);return"".concat(n,":").concat(a)}function kd(e){return e.map((function(e){var t=Rd(e);return null!=e[1]?[t.code,fd(t.code,e[1])]:[t.code]}))}function xd(e){return Cd(ld(e.map((function(e){var t=Rd(e),r=Uint8Array.from(cd.encode(t.code));return e.length>1&&null!=e[1]&&(r=ld([r,e[1]])),r}))))}function _d(e,t){return e.size>0?e.size/8:0===e.size?0:cd.decode(t)+(null!==(r=cd.decode.bytes)&&void 0!==r?r:0);var r}function Ed(e){for(var t=[],r=0;r<e.length;){var n,a=cd.decode(e,r),i=null!==(n=cd.decode.bytes)&&void 0!==n?n:0,o=_d(Th(a),e.slice(r+i));if(0!==o){var s=e.slice(r+i,r+i+o);if((r+=o+i)>e.length)throw Dd("Invalid address Uint8Array: "+kh(e,"base16"));t.push([a,s])}else t.push([a]),r+=i}return t}function Sd(e){return function(e){var t=[];return e.map((function(e){var r=Rd(e);return t.push(r.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),Td(t.join("/"))}(kd(Ed(e)))}function Ad(e){var t=function(e){var t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(var n=0;n<r.length;n++){var a=r[n],i=Th(a);if(0!==i.size){if(++n>=r.length)throw Dd("invalid address: "+e);if(!0===i.path){t.push([a,Td(r.slice(n).join("/"))]);break}t.push([a,r[n]])}else t.push([a])}return t}(e=Td(e));return xd(t.map((function(e){Array.isArray(e)||(e=[e]);var t=Rd(e);return e.length>1?[t.code,hd(t.code,e[1])]:[t.code]})))}function Cd(e){var t=Id(e);if(null!=t)throw t;return Uint8Array.from(e)}function Id(e){try{Ed(e)}catch(eL){return eL}}function Td(e){return"/"+e.trim().split("/").filter((function(e){return e})).join("/")}function Dd(e){return new Error("Error parsing address: "+e)}function Rd(e){return Th(e[0])}function Pd(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var Nd,Ld,Od,Bd,Ud=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},Md=function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},zd=Symbol.for("nodejs.util.inspect.custom"),Fd=[Th("dns").code,Th("dns4").code,Th("dns6").code,Th("dnsaddr").code],Vd=new Map,jd=Symbol.for("@multiformats/js-multiaddr/multiaddr");function qd(e,t){if(null==e)throw new Error("requires node address object");if(null==t)throw new Error("requires transport protocol");var r,n=e.address;switch(e.family){case 4:r="ip4";break;case 6:if(r="ip6",n.includes("%")){var a=n.split("%");if(2!==a.length)throw Error("Multiple ip6 zones in multiaddr");n=a[0];var i=a[1];r="/ip6zone/".concat(i,"/ip6")}break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new Hd("/"+[r,n,t,e.port].join("/"))}function Kd(e){return Boolean(null===e||void 0===e?void 0:e[jd])}var Hd=function(e){function t(e){if(Cn(this,t),Nd.set(this,void 0),Ld.set(this,void 0),Od.set(this,void 0),this[Bd]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=Cd(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error('multiaddr "'.concat(e,'" must start with a "/"'));this.bytes=Ad(e)}else{if(!Kd(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=Cd(e.bytes)}}return Dn(t,[{key:"toString",value:function(){return null==Ud(this,Nd,"f")&&Md(this,Nd,Sd(this.bytes),"f"),Ud(this,Nd,"f")}},{key:"toJSON",value:function(){return this.toString()}},{key:"toOptions",value:function(){var e,t,r,n,a,i="",o=Th("tcp"),s=Th("udp"),u=Th("ip4"),c=Th("ip6"),l=Th("dns6"),f=Th("ip6zone"),h=Ni(this.stringTuples());try{for(h.s();!(a=h.n()).done;){var p=Ia(a.value,2),d=p[0],v=p[1];d===f.code&&(i="%".concat(null!==v&&void 0!==v?v:"")),Fd.includes(d)&&(t=o.name,n=443,r="".concat(null!==v&&void 0!==v?v:"").concat(i),e=d===l.code?6:4),d!==o.code&&d!==s.code||(t=Th(d).name,n=parseInt(null!==v&&void 0!==v?v:"")),d!==u.code&&d!==c.code||(t=Th(d).name,r="".concat(null!==v&&void 0!==v?v:"").concat(i),e=d===c.code?6:4)}}catch(eL){h.e(eL)}finally{h.f()}if(null==e||null==t||null==r||null==n)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:r,transport:t,port:n}}},{key:"protos",value:function(){return this.protoCodes().map((function(e){return Object.assign({},Th(e))}))}},{key:"protoCodes",value:function(){for(var e=[],t=this.bytes,r=0;r<t.length;){var n,a=cd.decode(t,r),i=null!==(n=cd.decode.bytes)&&void 0!==n?n:0;r+=_d(Th(a),t.slice(r+i))+i,e.push(a)}return e}},{key:"protoNames",value:function(){return this.protos().map((function(e){return e.name}))}},{key:"tuples",value:function(){return null==Ud(this,Ld,"f")&&Md(this,Ld,Ed(this.bytes),"f"),Ud(this,Ld,"f")}},{key:"stringTuples",value:function(){return null==Ud(this,Od,"f")&&Md(this,Od,kd(this.tuples()),"f"),Ud(this,Od,"f")}},{key:"encapsulate",value:function(e){return e=new t(e),new t(this.toString()+e.toString())}},{key:"decapsulate",value:function(e){var r=e.toString(),n=this.toString(),a=n.lastIndexOf(r);if(a<0)throw new Error("Address ".concat(this.toString()," does not contain subaddress: ").concat(e.toString()));return new t(n.slice(0,a))}},{key:"decapsulateCode",value:function(e){for(var r=this.tuples(),n=r.length-1;n>=0;n--)if(r[n][0]===e)return new t(xd(r.slice(0,n)));return this}},{key:"getPeerId",value:function(){try{var e=this.stringTuples().filter((function(e){return e[0]===Ah.ipfs.code})),t=e.pop();if(null!=(null===t||void 0===t?void 0:t[1])){var r=t[1];return"Q"===r[0]||"1"===r[0]?kh(sp.decode("z".concat(r)),"base58btc"):kh(kp.parse(r).multihash.bytes,"base58btc")}return null}catch(n){return null}}},{key:"getPath",value:function(){var e=null;try{null==(e=this.stringTuples().filter((function(e){return!0===Th(e[0]).path}))[0][1])&&(e=null)}catch(t){e=null}return e}},{key:"equals",value:function(e){return Pd(this.bytes,e.bytes)}},{key:"resolve",value:function(){var e=An(En().mark((function e(r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=this.protos().find((function(e){return e.resolvable})))){e.next=3;break}return e.abrupt("return",[this]);case 3:if(null!=(a=Vd.get(n.name))){e.next=6;break}throw ca(new Error("no available resolver for ".concat(n.name)),"ERR_NO_AVAILABLE_RESOLVER");case 6:return e.next=8,a(this,r);case 8:return i=e.sent,e.abrupt("return",i.map((function(e){return new t(e)})));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nodeAddress",value:function(){var e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error('multiaddr must have a valid format - no protocol with name: "'.concat(e.transport,'". Must have a valid transport protocol: "{tcp, udp}"'));return{family:e.family,address:e.host,port:e.port}}},{key:"isThinWaistAddress",value:function(e){var t=(null!==e&&void 0!==e?e:this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}},{key:e,value:function(){return"Multiaddr(".concat(Sd(this.bytes),")")}}]),t}((Nd=new WeakMap,Ld=new WeakMap,Od=new WeakMap,Bd=jd,zd));function Gd(e){return new Hd(e)}var Wd=bv("dns4"),Yd=bv("dns6"),Qd=bv("dnsaddr"),Jd=yv(bv("dns"),Qd,Wd,Yd),Zd=yv(bv("ip4"),bv("ip6")),Xd=yv(vv(Zd,bv("tcp")),vv(Jd,bv("tcp"))),$d=vv(Zd,bv("udp")),ev=vv($d,bv("utp")),tv=vv($d,bv("quic")),rv=yv(vv(Xd,bv("ws")),vv(Jd,bv("ws"))),nv=yv(vv(Xd,bv("wss")),vv(Jd,bv("wss"))),av=yv(vv(Xd,bv("http")),vv(Zd,bv("http")),vv(Jd,bv("http"))),iv=yv(vv(Xd,bv("https")),vv(Zd,bv("https")),vv(Jd,bv("https"))),ov=yv(vv(rv,bv("p2p-webrtc-star"),bv("p2p")),vv(nv,bv("p2p-webrtc-star"),bv("p2p")),vv(rv,bv("p2p-webrtc-star")),vv(nv,bv("p2p-webrtc-star"))),sv=(yv(vv(rv,bv("p2p-websocket-star"),bv("p2p")),vv(nv,bv("p2p-websocket-star"),bv("p2p")),vv(rv,bv("p2p-websocket-star")),vv(nv,bv("p2p-websocket-star"))),yv(vv(av,bv("p2p-webrtc-direct"),bv("p2p")),vv(iv,bv("p2p-webrtc-direct"),bv("p2p")),vv(av,bv("p2p-webrtc-direct")),vv(iv,bv("p2p-webrtc-direct")))),uv=yv(rv,nv,av,iv,ov,sv,Xd,ev,tv,Jd),cv=(yv(vv(uv,bv("p2p-stardust"),bv("p2p")),vv(uv,bv("p2p-stardust"))),yv(vv(uv,bv("p2p")),ov,sv,bv("p2p"))),lv=yv(vv(cv,bv("p2p-circuit"),cv),vv(cv,bv("p2p-circuit")),vv(bv("p2p-circuit"),cv),vv(uv,bv("p2p-circuit")),vv(bv("p2p-circuit"),uv),bv("p2p-circuit")),fv=function e(){return yv(vv(lv,e),lv)}(),hv=yv(vv(fv,cv,fv),vv(cv,fv),vv(fv,cv),fv,cv),pv=hv;function dv(e){return function(t){var r;try{r=Gd(t)}catch(eL){return!1}var n=e(r.protoNames());return null!==n&&(!0===n||!1===n?n:0===n.length)}}function vv(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){if(e.length<t.length)return null;var r=e;return t.some((function(t){return r="function"===typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(r)&&(e=r),null===r})),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:dv(n),partialMatch:n}}function yv(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){var r=null;return t.some((function(t){var n="function"===typeof t?t().partialMatch(e):t.partialMatch(e);return null!=n&&(r=n,!0)})),r}var a={toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:dv(n),partialMatch:n};return a}function bv(e){var t=e;return{toString:function(){return t},matches:function(e){var r;try{r=Gd(e)}catch(eL){return!1}var n=r.protoNames();return 1===n.length&&n[0]===t},partialMatch:function(e){return 0===e.length?null:e[0]===t?e.slice(1):null}}}var gv=function(e,t){var r=e.bytes;return 0===e.version?_v(r,wv(e),t||Jf.encoder):Ev(r,wv(e),t||Zf.encoder)},mv=new WeakMap,wv=function(e){var t=mv.get(e);if(null==t){var r=new Map;return mv.set(e,r),r}return t},kv=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==Sv)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Av)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=function(e,t){var r=t.byteLength,n=dh(e),a=n+dh(r),i=new Uint8Array(a+r);return ph(e,i,0),ph(r,i,n),i.set(t,a),new vh(e,r,t,i)}(e.code,e.digest);return r.createV1(this.code,t);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return gv(this,e)}},{key:"toJSON",value:function(){return{"/":gv(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||Cv(n,a,i.bytes))}if(!0===t[Iv]){var o=t.version,s=t.multihash,u=t.code,c=function(e){var t=Vf(e),r=Ia(hh(t),2),n=r[0],a=r[1],i=Ia(hh(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new vh(n,o,u,t)}(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==Sv)throw new Error("Version 0 CID must use dag-pb (code: ".concat(Sv,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,Cv(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,Sv,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=Vf(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new vh(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(hh(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=Sv;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(xv(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return wv(o).set(a,e),o}}]),r}(),xv=function(e,t){switch(e[0]){case"Q":var r=t||Jf;return[Jf.prefix,r.decode("".concat(Jf.prefix).concat(e))];case Jf.prefix:var n=t||Jf;return[Jf.prefix,n.decode(e)];case Zf.prefix:var a=t||Zf;return[Zf.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},_v=function(e,t,r){var n=r.prefix;if(n!==Jf.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},Ev=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},Sv=112,Av=18,Cv=function(e,t,r){var n=dh(e),a=n+dh(t),i=new Uint8Array(a+r.byteLength);return ph(e,i,0),ph(t,i,n),i.set(r,a),i},Iv=Symbol.for("@ipld/js-cid/CID"),Tv=__webpack_require__(5159),Dv=/^\/(ip[fn]s)\/([^/?#]+)/,Rv=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,Pv=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function Nv(e){try{return Bv(e)?Boolean(kv.parse(e)):e instanceof Uint8Array?Boolean(kv.decode(e)):Boolean(kv.asCID(e))}catch(t){return!1}}function Lv(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=Uv(e);if(!1===a)return!1;var i=a.match(t);if(null==i)return!1;if("ipfs"!==i[r])return!1;var o=i[n];return null!=o&&t===Rv&&(o=o.toLowerCase()),Nv(o)}function Ov(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=Uv(e);if(!1===a)return!1;var i=a.match(t);if(null==i)return!1;if("ipns"!==i[r])return!1;var o=i[n];if(null!=o&&t===Rv){if(Nv(o=o.toLowerCase()))return!0;try{!o.includes(".")&&o.includes("-")&&(o=o.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));var s=new Tv.URL("http://".concat(o)),u=s.hostname;return Pv.test(u)}catch(c){return!1}}return!0}function Bv(e){return"string"===typeof e}function Uv(e){return e instanceof Uint8Array?kh(e,"base58btc"):!!Bv(e)&&e}var Mv=function(e){return Lv(e,Dv)||Ov(e,Dv)},zv=function(e){return Lv(e,Dv)},Fv=function(e){return Ov(e,Dv)},Vv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"}),"")},jv="/",qv=(new TextEncoder).encode(jv),Kv=qv[0],Hv=function(e){function t(e,r){if(Cn(this,t),"string"===typeof e)this._buf=Bf(e);else{if(!(e instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=e}if(null==r&&(r=!0),r&&this.clean(),0===this._buf.byteLength||this._buf[0]!==Kv)throw new Error("Invalid key")}return Dn(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";return kh(this._buf,e)}},{key:"uint8Array",value:function(){return this._buf}},{key:Symbol.toStringTag,get:function(){return"Key(".concat(this.toString(),")")}},{key:"clean",value:function(){if(null!=this._buf&&0!==this._buf.byteLength||(this._buf=qv),this._buf[0]!==Kv){var e=new Uint8Array(this._buf.byteLength+1);e.fill(Kv,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Kv;)this._buf=this._buf.subarray(0,-1)}},{key:"less",value:function(e){for(var t=this.list(),r=e.list(),n=0;n<t.length;n++){if(r.length<n+1)return!1;var a=t[n],i=r[n];if(a<i)return!0;if(a>i)return!1}return t.length<r.length}},{key:"reverse",value:function(){return t.withNamespaces(this.list().slice().reverse())}},{key:"namespaces",value:function(){return this.list()}},{key:"baseNamespace",value:function(){var e=this.namespaces();return e[e.length-1]}},{key:"list",value:function(){return this.toString().split(jv).slice(1)}},{key:"type",value:function(){return function(e){var t=e.split(":");if(t.length<2)return"";return t.slice(0,-1).join(":")}(this.baseNamespace())}},{key:"name",value:function(){return function(e){var t=e.split(":");return t[t.length-1]}(this.baseNamespace())}},{key:"instance",value:function(e){return new t(this.toString()+":"+e)}},{key:"path",value:function(){var e=this.parent().toString();return e.endsWith(jv)||(e+=jv),new t(e+=this.type())}},{key:"parent",value:function(){var e=this.list();return 1===e.length?new t(jv):new t(e.slice(0,-1).join(jv))}},{key:"child",value:function(e){return this.toString()===jv?e:e.toString()===jv?this:new t(this.toString()+e.toString(),!1)}},{key:"isAncestorOf",value:function(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}},{key:"isDecendantOf",value:function(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}},{key:"isTopLevel",value:function(){return 1===this.list().length}},{key:"concat",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.withNamespaces([].concat(su(this.namespaces()),su(Gv(r.map((function(e){return e.namespaces()}))))))}}],[{key:"withNamespaces",value:function(e){return new t(e.join(jv))}},{key:"random",value:function(){return new t(Vv().replace(/-/g,""))}},{key:"asKey",value:function(e){return e instanceof Uint8Array||"string"===typeof e?new t(e):"function"===typeof e.uint8Array?new t(e.uint8Array()):null}}]),t}();function Gv(e){var t;return(t=[]).concat.apply(t,su(e))}var Wv=__webpack_require__(1494),Yv=/(\x2D?(?:[0-9]+\.?[0-9]*|[0-9]*\.?[0-9]+)(?:e[\+\x2D]?[0-9]+)?)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*((?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*)/gi;function Qv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms",r=null;return(e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2")).replace(Yv,(function(e,t,n){(n=Jv(n))&&(r=(r||0)+parseFloat(t,10)*n)})),r&&r/(Jv(t)||1)}function Jv(e){return Qv[e]||Qv[e.toLowerCase().replace(/s$/,"")]}Qv.nanosecond=Qv.ns=1e-6,Qv["\xb5s"]=Qv["\u03bcs"]=Qv.us=Qv.microsecond=.001,Qv.millisecond=Qv.ms=Qv[""]=1,Qv.second=Qv.sec=Qv.s=1e3*Qv.ms,Qv.minute=Qv.min=Qv.m=60*Qv.s,Qv.hour=Qv.hr=Qv.h=60*Qv.m,Qv.day=Qv.d=24*Qv.h,Qv.week=Qv.wk=Qv.w=7*Qv.d,Qv.month=Qv.b=30.4375*Qv.d,Qv.year=Qv.yr=Qv.y=365.25*Qv.d;var Zv=Qv,Xv=function(e){Pn(r,e);var t=Un(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"request timed out";return Cn(this,r),(e=t.call(this,n)).name="TimeoutError",e.code=r.code,e}return Dn(r)}(nu(Error));function $v(e,t){return function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n[null==t?n.length-1:t];if(!i||!i.timeout)return e.apply(void 0,n);var o="string"===typeof i.timeout?Zv(i.timeout):i.timeout,s=new Uf.TimeoutController(o);i.signal=(0,Wv.anySignal)([i.signal,s.signal]);var u=e.apply(void 0,n),c=new Promise((function(e,t){s.signal.addEventListener("abort",(function(){t(new Xv)}))})),l=Date.now(),f=function(){if(s.signal.aborted)throw new Xv;if(Date.now()-l>o)throw s.abort(),new Xv};return u[Symbol.asyncIterator]?Hn(En().mark((function e(){var t,r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u[Symbol.asyncIterator](),e.prev=1;case 2:return e.next=5,Mf(Promise.race([t.next(),c]));case 5:if(r=e.sent,n=r.value,!r.done){e.next=10;break}return e.abrupt("break",15);case 10:return f(),e.next=13,n;case 13:e.next=2;break;case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(1),f(),e.t0;case 21:return e.prev=21,s.clear(),t.return&&t.return(),e.finish(21);case 25:case"end":return e.stop()}}),e,null,[[1,17,21,25]])})))():An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.race([u,c]);case 3:return t=e.sent,f(),e.abrupt("return",t);case 8:throw e.prev=8,e.t0=e.catch(0),f(),e.t0;case 12:return e.prev=12,s.clear(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})))()}}Xv.code="ERR_TIMEOUT";var ey="/ipfs/";function ty(e){if(e instanceof Uint8Array)try{e=wi.decode(e)}catch(eL){throw ca(eL,"ERR_INVALID_CID")}var t=wi.asCID(e);if(t)return{cid:t,path:void 0};(e=e.toString()).startsWith(ey)&&(e=e.substring(ey.length));var r,n=e.split("/");try{t=wi.parse(n.shift()||"")}catch(eL){throw ca(eL,"ERR_INVALID_CID")}return n.length&&(r="/".concat(n.join("/"))),{cid:t,path:r}}var ry="This command must be run in online mode. Try running 'ipfs daemon' first.",ny=new Hv("/local/filesroot"),ay=262144,iy=function(e){if(wi.asCID(e))return"/ipfs/".concat(e);var t=e.toString();try{return"/ipfs/".concat(wi.parse(t))}catch(r){}if(Mv(t))return t;throw ca(new Error("invalid path: ".concat(e)),"ERR_BAD_PATH")},oy=function(e){return e instanceof Uint8Array?wi.decode(e).toString():(0===(e=e.toString()).indexOf("/ipfs/")&&(e=e.substring("/ipfs/".length)),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e)},sy=function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,h,p,d,v,y,b,g=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g.length>3&&void 0!==g[3]?g[3]:{},i=ty(n),o=i.cid,(s=i.path)&&(a.path=s),u=o,(c=a.path||"").startsWith("/")&&(c=c.substring(1)),!a.path){e.next=45;break}e.prev=7,l=!1,f=!1,e.prev=10,p=zn(ly(o,a.path,r,t,{signal:a.signal}));case 12:return e.next=14,p.next();case 14:if(!(l=!(d=e.sent).done)){e.next=23;break}if(v=d.value,y=v.value,b=v.remainderPath,wi.asCID(y)){e.next=18;break}return e.abrupt("break",23);case 18:c=b,u=y;case 20:l=!1,e.next=12;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(10),f=!0,h=e.t0;case 29:if(e.prev=29,e.prev=30,!l||null==p.return){e.next=34;break}return e.next=34,p.return();case 34:if(e.prev=34,!f){e.next=37;break}throw h;case 37:return e.finish(34);case 38:return e.finish(29);case 39:e.next=45;break;case 41:throw e.prev=41,e.t1=e.catch(7),e.t1.message.startsWith("Object has no property")&&(e.t1.message='no link named "'.concat(c.split("/")[0],'" under ').concat(u),e.t1.code="ERR_NO_LINK"),e.t1;case 45:return e.abrupt("return",{cid:u,remainderPath:c||""});case 46:case"end":return e.stop()}}),e,null,[[7,41],[10,25,29,39],[30,,34,38]])})));return function(t,r,n){return e.apply(this,arguments)}}(),uy=function(e){if("file"!==e.type&&"directory"!==e.type&&"raw"!==e.type)throw new Error("Unknown node type '".concat(e.type,"'"));var t={cid:e.cid,path:e.path,name:e.name,size:e.size,type:"file"};return"directory"===e.type&&(t.type="dir"),"file"===e.type&&(t.size=e.unixfs.fileSize()),"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,void 0!==e.unixfs.mtime&&(t.mtime=e.unixfs.mtime)),t},cy=$v(function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),ly=function(){var e=Hn(En().mark((function e(t,r,n,a,i){var o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=An(En().mark((function e(t){var r,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCodec(t.code);case 2:return r=e.sent,e.next=5,a.blocks.get(t,i);case 5:return o=e.sent,e.abrupt("return",r.decode(o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=r.split("/").filter(Boolean),e.next=4,Mf(o(t));case 4:u=e.sent,c=t,l=En().mark((function e(){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.shift()){e.next=3;break}throw ca(new Error('Could not resolve path "'.concat(r,'"')),"ERR_INVALID_PATH");case 3:if(t.code!==eo||!Array.isArray(u.Links)){e.next=13;break}if(!(a=u.Links.find((function(e){return e.Name===n})))){e.next=13;break}return e.next=8,{value:a.Hash,remainderPath:s.join("/")};case 8:return e.next=10,Mf(o(a.Hash));case 10:return u=e.sent,c=a.Hash,e.abrupt("return","continue");case 13:if(!Object.prototype.hasOwnProperty.call(u,n)){e.next=19;break}return u=u[n],e.next=17,{value:u,remainderPath:s.join("/")};case 17:e.next=20;break;case 19:throw ca(new Error('no link named "'.concat(n,'" under ').concat(c)),"ERR_NO_LINK");case 20:if(!wi.asCID(u)){e.next=25;break}return c=u,e.next=24,Mf(o(u));case 24:u=e.sent;case 25:case"end":return e.stop()}}),e)}));case 7:if(!s.length){e.next=14;break}return e.delegateYield(l(),"t0",9);case 9:if("continue"!==e.t0){e.next=12;break}return e.abrupt("continue",7);case 12:e.next=7;break;case 14:return e.next=16,{value:u,remainderPath:""};case 16:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),fy=function(){function e(t,r){Cn(this,e),this.activate=t,this.deactivate=r,this.state={status:"stopped"}}return Dn(e,[{key:"use",value:function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.use(this,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"try",value:function(){return e.try(this)}}],[{key:"create",value:function(t){return new e(t.start,t.stop)}},{key:"start",value:function(){var t=An(En().mark((function t(r,n){var a,i,o,s;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.state,i=r.activate,t.t0=a.status,t.next="stopped"===t.t0?4:"starting"===t.t0?18:"started"===t.t0?19:"stopping"===t.t0?20:25;break;case 4:return t.prev=4,o=i(n),r.state={status:"starting",ready:o},t.next=9,o;case 9:return s=t.sent,r.state={status:"started",value:s},t.abrupt("return",s);case 14:throw t.prev=14,t.t1=t.catch(4),r.state={status:"stopped"},t.t1;case 18:throw new il;case 19:throw new ol;case 20:return t.next=22,a.ready;case 22:return t.next=24,e.start(r,n);case 24:return t.abrupt("return",t.sent);case 25:return t.abrupt("return",e.panic(r));case 26:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e,r){return t.apply(this,arguments)}}()},{key:"stop",value:function(){var t=An(En().mark((function t(r){var n,a;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.state,a=r.deactivate,t.t0=n.status,t.next="stopped"===t.t0?4:"starting"===t.t0?5:"stopping"===t.t0?15:"started"===t.t0?18:23;break;case 4:return t.abrupt("break",24);case 5:return t.prev=5,t.next=8,n.ready;case 8:t.next=12;break;case 10:t.prev=10,t.t1=t.catch(5);case 12:return t.next=14,e.stop(r);case 14:return t.abrupt("return",t.sent);case 15:return t.next=17,n.ready;case 17:return t.abrupt("return",t.sent);case 18:if(!a){t.next=21;break}return t.next=21,a(n.value);case 21:return r.state={status:"stopped"},t.abrupt("break",24);case 23:e.panic(n);case 24:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e){return t.apply(this,arguments)}}()},{key:"try",value:function(e){var t=e.state;return"started"===t.status?t.value:null}},{key:"use",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state,e.t0=n.status,e.next="started"===e.t0?4:"starting"===e.t0?5:8;break;case 4:return e.abrupt("return",n.value);case 5:return e.next=7,cy(n.ready,r);case 7:return e.abrupt("return",e.sent);case 8:throw new al;case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"panic",value:function(e){var t=e.state,r=JSON.stringify({status:t.status});throw RangeError("Service in invalid state ".concat(r,", should never happen if you see this please report a bug"))}}]),e}();var hy=__webpack_require__(3730),py=function(){function e(t){Cn(this,e),this.lru=hy(t)}return Dn(e,[{key:"get",value:function(e){var t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}},{key:"set",value:function(e,t,r){this.lru.set(e,{value:t,expire:Date.now()+r})}},{key:"has",value:function(e){return!!this.get(e)}},{key:"remove",value:function(e){this.lru.remove(e)}},{key:"clear",value:function(){this.lru.clear()}}]),e}(),dy=__webpack_require__(3250),vy=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).name="TimeoutError",n}return Dn(r)}(nu(Error)),yy=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this)).name="AbortError",n.message=e,n}return Dn(r)}(nu(Error)),by=function(e){return void 0===globalThis.DOMException?new yy(e):new DOMException(e)},gy=function(e){var t=void 0===e.reason?by("This operation was aborted."):e.reason;return t instanceof Error?t:by(t)};function my(e,t,r,n){var a,i=new Promise((function(i,o){if("number"!==typeof t||1!==Math.sign(t))throw new TypeError("Expected `milliseconds` to be a positive number, got `".concat(t,"`"));if(t!==Number.POSITIVE_INFINITY){if((n=jn({customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout}},n)).signal){var s=n.signal;s.aborted&&o(gy(s)),s.addEventListener("abort",(function(){o(gy(s))}))}a=n.customTimers.setTimeout.call(void 0,(function(){if("function"!==typeof r){var n="string"===typeof r?r:"Promise timed out after ".concat(t," milliseconds"),a=r instanceof Error?r:new vy(n);"function"===typeof e.cancel&&e.cancel(),o(a)}else try{i(r())}catch(s){o(s)}}),t),An(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=i,t.next=4,e;case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),o(t.t2);case 11:return t.prev=11,n.customTimers.clearTimeout.call(void 0,a),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()}else i(e)}));return i.clear=function(){clearTimeout(a),a=void 0},i}var wy,ky=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},xy=function(){function e(){Cn(this,e),wy.set(this,[])}return Dn(e,[{key:"enqueue",value:function(e,t){var r={priority:(t=jn({priority:0},t)).priority,run:e};if(this.size&&ky(this,wy,"f")[this.size-1].priority>=t.priority)ky(this,wy,"f").push(r);else{var n=function(e,t,r){for(var n=0,a=e.length;a>0;){var i=Math.trunc(a/2),o=n+i;r(e[o],t)<=0?(n=++o,a-=i+1):a=i}return n}(ky(this,wy,"f"),r,(function(e,t){return t.priority-e.priority}));ky(this,wy,"f").splice(n,0,r)}}},{key:"dequeue",value:function(){var e=ky(this,wy,"f").shift();return null===e||void 0===e?void 0:e.run}},{key:"filter",value:function(e){return ky(this,wy,"f").filter((function(t){return t.priority===e.priority})).map((function(e){return e.run}))}},{key:"size",get:function(){return ky(this,wy,"f").length}}]),e}();wy=new WeakMap;var _y,Ey,Sy,Ay,Cy,Iy,Ty,Dy,Ry,Py,Ny,Ly,Oy,By,Uy,My,zy,Fy,Vy,jy,qy,Ky,Hy,Gy,Wy,Yy,Qy=function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},Jy=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},Zy=new vy,Xy=function(e){Pn(r,e);var t=Un(r);function r(){return Cn(this,r),t.apply(this,arguments)}return Dn(r)}(nu(Error)),$y=function(e){Pn(r,e);var t=Un(r);function r(e){var n,a,i,o,s;if(Cn(this,r),n=t.call(this),_y.add(On(n)),Ey.set(On(n),void 0),Sy.set(On(n),void 0),Ay.set(On(n),0),Cy.set(On(n),void 0),Iy.set(On(n),void 0),Ty.set(On(n),0),Dy.set(On(n),void 0),Ry.set(On(n),void 0),Py.set(On(n),void 0),Ny.set(On(n),void 0),Ly.set(On(n),0),Oy.set(On(n),void 0),By.set(On(n),void 0),Uy.set(On(n),void 0),Object.defineProperty(On(n),"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"===typeof(e=jn({carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:xy},e)).intervalCap&&e.intervalCap>=1))throw new TypeError("Expected `intervalCap` to be a number from 1 and up, got `".concat(null!==(i=null===(a=e.intervalCap)||void 0===a?void 0:a.toString())&&void 0!==i?i:"","` (").concat(typeof e.intervalCap,")"));if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError("Expected `interval` to be a finite number >= 0, got `".concat(null!==(s=null===(o=e.interval)||void 0===o?void 0:o.toString())&&void 0!==s?s:"","` (").concat(typeof e.interval,")"));return Qy(On(n),Ey,e.carryoverConcurrencyCount,"f"),Qy(On(n),Sy,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),Qy(On(n),Cy,e.intervalCap,"f"),Qy(On(n),Iy,e.interval,"f"),Qy(On(n),Py,new e.queueClass,"f"),Qy(On(n),Ny,e.queueClass,"f"),n.concurrency=e.concurrency,n.timeout=e.timeout,Qy(On(n),Uy,!0===e.throwOnTimeout,"f"),Qy(On(n),By,!1===e.autoStart,"f"),n}return Dn(r,[{key:"concurrency",get:function(){return Jy(this,Oy,"f")},set:function(e){if(!("number"===typeof e&&e>=1))throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(e,"` (").concat(typeof e,")"));Qy(this,Oy,e,"f"),Jy(this,_y,"m",Wy).call(this)}},{key:"add",value:function(){var e=An(En().mark((function e(t){var r,n=this,a=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",new Promise((function(e,a){var i=function(){var i=An(En().mark((function i(){var o,s,u,c,l;return En().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(Qy(n,Ly,(s=Jy(n,Ly,"f"),++s),"f"),Qy(n,Ay,(u=Jy(n,Ay,"f"),++u),"f"),i.prev=2,!(null===(o=r.signal)||void 0===o?void 0:o.aborted)){i.next=6;break}return a(new Xy("The task was aborted.")),i.abrupt("return");case 6:return c=void 0===n.timeout&&void 0===r.timeout?t({signal:r.signal}):my(Promise.resolve(t({signal:r.signal})),void 0===r.timeout?n.timeout:r.timeout,(function(){(void 0===r.throwOnTimeout?Jy(n,Uy,"f"):r.throwOnTimeout)&&a(Zy)})),i.next=9,c;case 9:l=i.sent,e(l),n.emit("completed",l),i.next=18;break;case 14:i.prev=14,i.t0=i.catch(2),a(i.t0),n.emit("error",i.t0);case 18:Jy(n,_y,"m",Fy).call(n);case 19:case"end":return i.stop()}}),i,null,[[2,14]])})));return function(){return i.apply(this,arguments)}}();Jy(n,Py,"f").enqueue(i,r),Jy(n,_y,"m",Ky).call(n),n.emit("add")})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAll",value:function(){var e=An(En().mark((function e(t,r){var n=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.add(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"start",value:function(){return Jy(this,By,"f")?(Qy(this,By,!1,"f"),Jy(this,_y,"m",Wy).call(this),this):this}},{key:"pause",value:function(){Qy(this,By,!0,"f")}},{key:"clear",value:function(){Qy(this,Py,new(Jy(this,Ny,"f")),"f")}},{key:"onEmpty",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Jy(this,Py,"f").size){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Jy(this,_y,"m",Yy).call(this,"empty");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSizeLessThan",value:function(){var e=An(En().mark((function e(t){var r=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Jy(this,Py,"f").size<t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Jy(this,_y,"m",Yy).call(this,"next",(function(){return Jy(r,Py,"f").size<t}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onIdle",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Jy(this,Ly,"f")||0!==Jy(this,Py,"f").size){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Jy(this,_y,"m",Yy).call(this,"idle");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"size",get:function(){return Jy(this,Py,"f").size}},{key:"sizeBy",value:function(e){return Jy(this,Py,"f").filter(e).length}},{key:"pending",get:function(){return Jy(this,Ly,"f")}},{key:"isPaused",get:function(){return Jy(this,By,"f")}}]),r}(dy);Ey=new WeakMap,Sy=new WeakMap,Ay=new WeakMap,Cy=new WeakMap,Iy=new WeakMap,Ty=new WeakMap,Dy=new WeakMap,Ry=new WeakMap,Py=new WeakMap,Ny=new WeakMap,Ly=new WeakMap,Oy=new WeakMap,By=new WeakMap,Uy=new WeakMap,_y=new WeakSet,My=function(){return Jy(this,Sy,"f")||Jy(this,Ay,"f")<Jy(this,Cy,"f")},zy=function(){return Jy(this,Ly,"f")<Jy(this,Oy,"f")},Fy=function(){var e;Qy(this,Ly,(e=Jy(this,Ly,"f"),--e),"f"),Jy(this,_y,"m",Ky).call(this),this.emit("next")},Vy=function(){this.emit("empty"),0===Jy(this,Ly,"f")&&this.emit("idle")},jy=function(){Jy(this,_y,"m",Gy).call(this),Jy(this,_y,"m",Hy).call(this),Qy(this,Ry,void 0,"f")},qy=function(){var e=this,t=Date.now();if(void 0===Jy(this,Dy,"f")){var r=Jy(this,Ty,"f")-t;if(!(r<0))return void 0===Jy(this,Ry,"f")&&Qy(this,Ry,setTimeout((function(){Jy(e,_y,"m",jy).call(e)}),r),"f"),!0;Qy(this,Ay,Jy(this,Ey,"f")?Jy(this,Ly,"f"):0,"f")}return!1},Ky=function(){if(0===Jy(this,Py,"f").size)return Jy(this,Dy,"f")&&clearInterval(Jy(this,Dy,"f")),Qy(this,Dy,void 0,"f"),Jy(this,_y,"m",Vy).call(this),!1;if(!Jy(this,By,"f")){var e=!Jy(this,_y,"a",qy);if(Jy(this,_y,"a",My)&&Jy(this,_y,"a",zy)){var t=Jy(this,Py,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&Jy(this,_y,"m",Hy).call(this),!0)}}return!1},Hy=function(){var e=this;Jy(this,Sy,"f")||void 0!==Jy(this,Dy,"f")||(Qy(this,Dy,setInterval((function(){Jy(e,_y,"m",Gy).call(e)}),Jy(this,Iy,"f")),"f"),Qy(this,Ty,Date.now()+Jy(this,Iy,"f"),"f"))},Gy=function(){0===Jy(this,Ay,"f")&&0===Jy(this,Ly,"f")&&Jy(this,Dy,"f")&&(clearInterval(Jy(this,Dy,"f")),Qy(this,Dy,void 0,"f")),Qy(this,Ay,Jy(this,Ey,"f")?Jy(this,Ly,"f"):0,"f"),Jy(this,_y,"m",Wy).call(this)},Wy=function(){for(;Jy(this,_y,"m",Ky).call(this););},Yy=function(){var e=An(En().mark((function e(t,r){var n=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){n.on(t,(function a(){r&&!r()||(n.off(t,a),e())}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();var eb=__webpack_require__(2892),tb=new py(1e3),rb=6e4,nb=new($y.default?$y.default:$y)({concurrency:4}),ab=function(e){if(e.Path)return e.Path;throw new Error(e.Message)};function ib(e,t){return ob.apply(this,arguments)}function ob(){return ob=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:{},(n=new URLSearchParams(r)).set("arg",t),a=n.toString(),r.nocache||!tb.has(a)){e.next=7;break}return i=tb.get(a),e.abrupt("return",ab(i));case 7:return e.next=9,nb.add(An(En().mark((function e(){var t,r,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eb.get("https://ipfs.io/api/v0/dns",{searchParams:n});case 2:return t=e.sent,r=new URL(t.url).search.slice(1),e.next=6,t.json();case 6:return a=e.sent,tb.set(r,a,rb),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))));case 9:return o=e.sent,e.abrupt("return",ab(o));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",n(t,r));case 2:case"end":return e.stop()}}),e)}))),ob.apply(this,arguments)}function sb(e){return e.endsWith(".eth")&&(e=e.replace(/.eth$/,".eth.link")),e}function ub(e){return Ea(e)||ou(e)||Aa(e)||Ca()}var cb=function(e){Pn(r,e);var t=Un(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted";return Cn(this,r),(e=t.call(this,n)).code=r.code,e.type=r.type,e}return Dn(r,null,[{key:"code",get:function(){return"ABORT_ERR"}},{key:"type",get:function(){return"aborted"}}]),r}(nu(Error)),lb=function(e){Pn(r,e);var t=Un(r);function r(e,n,a){var i,o;return Cn(this,r),(o=t.call(this,e)).code=n,o.name=null!==(i=null===a||void 0===a?void 0:a.name)&&void 0!==i?i:"CodeError",o.props=null!==a&&void 0!==a?a:{},o}return Dn(r)}(nu(Error)),fb=Symbol.for("@libp2p/peer-id");function hb(e){return null!=e&&Boolean(e[fb])}var pb=Symbol.for("nodejs.util.inspect.custom"),db=Object.values(Xc).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),Xc.identity.decoder),vb=36,yb=37,bb=function(e){function t(e){Cn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:fb,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=oi.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return wi.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return Pd(this.multihash.bytes,e);if("string"===typeof e)return kb(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Pd(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:pb,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),gb=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Dn(r)}(bb),mb=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Dn(r)}(bb),wb=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Dn(r)}(bb);function kb(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:db,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=Ya(oi.decode("z".concat(e)));return e.startsWith("12D")?new mb({multihash:n}):e.startsWith("16U")?new wb({multihash:n}):new gb({multihash:n})}return function(e){try{var t=Ya(e);if(t.code===Ac.code){if(36===t.digest.length)return new mb({multihash:t});if(37===t.digest.length)return new wb({multihash:t})}if(t.code===Fc.code)return new gb({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===Fc.code)return new gb({multihash:e.multihash});if(t.code===Ac.code){if(t.digest.length===vb)return new mb({multihash:e.multihash});if(t.digest.length===yb)return new wb({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(wi.decode(e))}throw new Error("Supplied PeerID CID is invalid")}(db.decode(e))}function xb(e,t){return _b.apply(this,arguments)}function _b(){return(_b=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length!==vb){e.next=2;break}return e.abrupt("return",new mb({multihash:Wa(Ac.code,t),privateKey:r}));case 2:if(t.length!==yb){e.next=4;break}return e.abrupt("return",new wb({multihash:Wa(Ac.code,t),privateKey:r}));case 4:return e.t0=gb,e.next=7,Fc.digest(t);case 7:return e.t1=e.sent,e.t2=t,e.t3=r,e.t4={multihash:e.t1,publicKey:e.t2,privateKey:e.t3},e.abrupt("return",new e.t0(e.t4));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eb(e){try{return kb(e).toBytes()}catch(t){return wi.parse(e).bytes}}function Sb(e){return Ab.apply(this,arguments)}function Ab(){return Ab=An(En().mark((function e(t){var r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=zn(t);case 4:return e.next=6,o.next();case 6:if(!(n=!(s=e.sent).done)){e.next=12;break}u=s.value,r=u;case 9:n=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),a=!0,i=e.t0;case 18:if(e.prev=18,e.prev=19,!n||null==o.return){e.next=23;break}return e.next=23,o.return();case 23:if(e.prev=23,!a){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(18);case 28:return e.abrupt("return",r);case 29:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])}))),Ab.apply(this,arguments)}function Cb(e){var t={},r=!1;function n(t,n){return r=!0,n=new Promise((function(r){r(e[t](n))})),{done:!1,value:new qn(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function Ib(e){return Symbol.iterator in e}function Tb(e){return Symbol.asyncIterator in e}function Db(e){return null!=wi.asCID(e)}function Rb(e){return Pb.apply(this,arguments)}function Pb(){return Pb=Hn(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S,A,C,I,T,D,R,P,N;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t){e.next=2;break}throw ca(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 2:if(!(r=wi.asCID(t))){e.next=7;break}return e.next=6,Nb({cid:r});case 6:return e.abrupt("return");case 7:if(!(t instanceof String||"string"===typeof t)){e.next=11;break}return e.next=10,Nb({path:t});case 10:return e.abrupt("return");case 11:if(null==t.cid&&null==t.path){e.next=15;break}return e.next=14,Nb(t);case 14:return e.abrupt("return",e.sent);case 15:if(!Ib(t)){e.next=84;break}if(n=t[Symbol.iterator](),!(a=n.next()).done){e.next=20;break}return e.abrupt("return",n);case 20:if(!Db(a.value)){e.next=41;break}return e.next=23,Nb({cid:a.value});case 23:i=Ni(n),e.prev=24,i.s();case 26:if((o=i.n()).done){e.next=32;break}return s=o.value,e.next=30,Nb({cid:s});case 30:e.next=26;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(24),i.e(e.t0);case 37:return e.prev=37,i.f(),e.finish(37);case 40:return e.abrupt("return");case 41:if(!(a.value instanceof String||"string"===typeof a.value)){e.next=62;break}return e.next=44,Nb({path:a.value});case 44:u=Ni(n),e.prev=45,u.s();case 47:if((c=u.n()).done){e.next=53;break}return l=c.value,e.next=51,Nb({path:l});case 51:e.next=47;break;case 53:e.next=58;break;case 55:e.prev=55,e.t1=e.catch(45),u.e(e.t1);case 58:return e.prev=58,u.f(),e.finish(58);case 61:return e.abrupt("return");case 62:if(null==a.value.cid&&null==a.value.path){e.next=83;break}return e.next=65,Nb(a.value);case 65:f=Ni(n),e.prev=66,f.s();case 68:if((h=f.n()).done){e.next=74;break}return p=h.value,e.next=72,Nb(p);case 72:e.next=68;break;case 74:e.next=79;break;case 76:e.prev=76,e.t2=e.catch(66),f.e(e.t2);case 79:return e.prev=79,f.f(),e.finish(79);case 82:return e.abrupt("return");case 83:throw ca(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT");case 84:if(!Tb(t)){e.next=191;break}return d=t[Symbol.asyncIterator](),e.next=88,Mf(d.next());case 88:if(!(v=e.sent).done){e.next=91;break}return e.abrupt("return",d);case 91:if(!Db(v.value)){e.next=124;break}return e.next=94,Nb({cid:v.value});case 94:y=!1,b=!1,e.prev=96,m=zn(d);case 98:return e.next=100,Mf(m.next());case 100:if(!(y=!(w=e.sent).done)){e.next=107;break}return k=w.value,e.next=104,Nb({cid:k});case 104:y=!1,e.next=98;break;case 107:e.next=113;break;case 109:e.prev=109,e.t3=e.catch(96),b=!0,g=e.t3;case 113:if(e.prev=113,e.prev=114,!y||null==m.return){e.next=118;break}return e.next=118,Mf(m.return());case 118:if(e.prev=118,!b){e.next=121;break}throw g;case 121:return e.finish(118);case 122:return e.finish(113);case 123:return e.abrupt("return");case 124:if(!(v.value instanceof String||"string"===typeof v.value)){e.next=157;break}return e.next=127,Nb({path:v.value});case 127:x=!1,_=!1,e.prev=129,S=zn(d);case 131:return e.next=133,Mf(S.next());case 133:if(!(x=!(A=e.sent).done)){e.next=140;break}return C=A.value,e.next=137,Nb({path:C});case 137:x=!1,e.next=131;break;case 140:e.next=146;break;case 142:e.prev=142,e.t4=e.catch(129),_=!0,E=e.t4;case 146:if(e.prev=146,e.prev=147,!x||null==S.return){e.next=151;break}return e.next=151,Mf(S.return());case 151:if(e.prev=151,!_){e.next=154;break}throw E;case 154:return e.finish(151);case 155:return e.finish(146);case 156:return e.abrupt("return");case 157:if(null==v.value.cid&&null==v.value.path){e.next=190;break}return e.next=160,Nb(v.value);case 160:I=!1,T=!1,e.prev=162,R=zn(d);case 164:return e.next=166,Mf(R.next());case 166:if(!(I=!(P=e.sent).done)){e.next=173;break}return N=P.value,e.next=170,Nb(N);case 170:I=!1,e.next=164;break;case 173:e.next=179;break;case 175:e.prev=175,e.t5=e.catch(162),T=!0,D=e.t5;case 179:if(e.prev=179,e.prev=180,!I||null==R.return){e.next=184;break}return e.next=184,Mf(R.return());case 184:if(e.prev=184,!T){e.next=187;break}throw D;case 187:return e.finish(184);case 188:return e.finish(179);case 189:return e.abrupt("return");case 190:case 191:throw ca(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT");case 192:case"end":return e.stop()}}),e,null,[[24,34,37,40],[45,55,58,61],[66,76,79,82],[96,109,113,123],[114,,118,122],[129,142,146,156],[147,,151,155],[162,175,179,189],[180,,184,188]])}))),Pb.apply(this,arguments)}function Nb(e){var t=e.cid||"".concat(e.path);if(!t)throw ca(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");var r={path:t,recursive:!1!==e.recursive};return null!=e.metadata&&(r.metadata=e.metadata),r}var Lb={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function Ob(e,t,r){var n={type:e,cid:t};return r&&(n.metadata=r),n}var Bb=Dn((function e(t){var r=t.codecs,n=t.repo;Cn(this,e);var a=function(e){var t=e.repo,r=e.codecs;function n(){return n=Hn((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function a(){var i,o;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=function(){var n=Hn(En().mark((function n(){var a,i,o,s,u,c,l,f,h,p,d;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(Rb(e));case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=30;break}return c=u.value,l=c.path,f=c.recursive,h=c.metadata,n.next=10,Mf(sy(t,r,l));case 10:return p=n.sent,d=p.cid,n.next=14,Mf(t.pins.isPinnedWithType(d,[Lb.recursive,Lb.direct]));case 14:if("recursive"!==n.sent.reason||f){n.next=18;break}throw new Error("".concat(d," already pinned recursively"));case 18:if(!f){n.next=23;break}return n.next=21,Mf(t.pins.pinRecursively(d,{metadata:h}));case 21:n.next=25;break;case 23:return n.next=25,Mf(t.pins.pinDirectly(d,{metadata:h}));case 25:return n.next=27,d;case 27:a=!1,n.next=4;break;case 30:n.next=36;break;case 32:n.prev=32,n.t0=n.catch(2),i=!0,o=n.t0;case 36:if(n.prev=36,n.prev=37,!a||null==s.return){n.next=41;break}return n.next=41,Mf(s.return());case 41:if(n.prev=41,!i){n.next=44;break}throw o;case 44:return n.finish(41);case 45:return n.finish(36);case 46:case"end":return n.stop()}}),n,null,[[2,32,36,46],[37,,41,45]])})));return function(){return n.apply(this,arguments)}}(),Boolean(n.lock)){a.next=5;break}return a.delegateYield(Cb(zn(i())),"t0",4);case 4:return a.abrupt("return");case 5:return a.next=7,Mf(t.gcLock.readLock());case 7:return o=a.sent,a.prev=8,a.delegateYield(Cb(zn(i())),"t1",10);case 10:return a.prev=10,o(),a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[8,,10,13]])}))()})),n.apply(this,arguments)}return $v((function(e){return n.apply(this,arguments)}))}({codecs:r,repo:n});this.addAll=a,this.add=function(e){var t=e.addAll;return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=wi.asCID(e);return Sb(t(n?[jn({cid:n},r)]:[jn({path:e.toString()},r)],r))}}({addAll:a});var i=function(e){var t=e.repo,r=e.codecs;function n(){return n=Hn((function(e){return En().mark((function n(){var a,i,o,s,u,c,l,f,h,p,d,v,y,b;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(t.gcLock.readLock());case 2:a=n.sent,n.prev=3,i=!1,o=!1,n.prev=6,u=zn(Rb(e));case 8:return n.next=10,Mf(u.next());case 10:if(!(i=!(c=n.sent).done)){n.next=42;break}return l=c.value,f=l.path,h=l.recursive,n.next=14,Mf(sy(t,r,f));case 14:return p=n.sent,d=p.cid,n.next=18,Mf(t.pins.isPinnedWithType(d,Lb.all));case 18:if(v=n.sent,y=v.pinned,b=v.reason,y){n.next=23;break}throw new Error("".concat(d," is not pinned"));case 23:n.t0=b,n.next=n.t0===Lb.recursive?26:n.t0===Lb.direct?33:38;break;case 26:if(h){n.next=28;break}throw new Error("".concat(d," is pinned recursively"));case 28:return n.next=30,Mf(t.pins.unpin(d));case 30:return n.next=32,d;case 32:return n.abrupt("break",39);case 33:return n.next=35,Mf(t.pins.unpin(d));case 35:return n.next=37,d;case 37:return n.abrupt("break",39);case 38:throw new Error("".concat(d," is pinned indirectly under ").concat(b));case 39:i=!1,n.next=8;break;case 42:n.next=48;break;case 44:n.prev=44,n.t1=n.catch(6),o=!0,s=n.t1;case 48:if(n.prev=48,n.prev=49,!i||null==u.return){n.next=53;break}return n.next=53,Mf(u.return());case 53:if(n.prev=53,!o){n.next=56;break}throw s;case 56:return n.finish(53);case 57:return n.finish(48);case 58:return n.prev=58,a(),n.finish(58);case 61:case"end":return n.stop()}}),n,null,[[3,,58,61],[6,44,48,58],[49,,53,57]])}))()})),n.apply(this,arguments)}return $v((function(e){return n.apply(this,arguments)}))}({codecs:r,repo:n});this.rmAll=i,this.rm=function(e){var t=e.rmAll;function r(){return r=An(En().mark((function e(r){var n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,Sb(t([jn({path:r},n)],n));case 3:if(a=e.sent){e.next=6;break}throw new Error("CID expected");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}({rmAll:i}),this.ls=function(e){var t=e.repo,r=e.codecs;function n(){return n=Hn((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En().mark((function n(){var a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S,A,C,I,T,D,R,P,N,L,O,B,U,M,z,F;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=Lb.all,!e.type){n.next=5;break}if(a=e.type,Object.keys(Lb).includes(a)){n.next=5;break}throw ca(new Error("Invalid pin type"),"ERR_INVALID_PIN_TYPE");case 5:if(!e.paths){n.next=60;break}i=!1,o=!1,s=!1,n.prev=9,c=zn(Rb(e.paths));case 11:return n.next=13,Mf(c.next());case 13:if(!(o=!(l=n.sent).done)){n.next=41;break}return f=l.value.path,n.next=17,Mf(sy(t,r,f));case 17:return h=n.sent,p=h.cid,n.next=21,Mf(t.pins.isPinnedWithType(p,a));case 21:if(d=n.sent,v=d.reason,y=d.pinned,b=d.parent,g=d.metadata,y){n.next=28;break}throw ca(new Error("path '".concat(f,"' is not pinned")),"ERR_NOT_PINNED");case 28:n.t0=v,n.next=n.t0===Lb.direct||n.t0===Lb.recursive?31:35;break;case 31:return i=!0,n.next=34,Ob(v,p,g);case 34:return n.abrupt("break",38);case 35:return i=!0,n.next=38,Ob("".concat(Lb.indirect," through ").concat(b),p,g);case 38:o=!1,n.next=11;break;case 41:n.next=47;break;case 43:n.prev=43,n.t1=n.catch(9),s=!0,u=n.t1;case 47:if(n.prev=47,n.prev=48,!o||null==c.return){n.next=52;break}return n.next=52,Mf(c.return());case 52:if(n.prev=52,!s){n.next=55;break}throw u;case 55:return n.finish(52);case 56:return n.finish(47);case 57:if(i){n.next=59;break}throw new Error("No match found");case 59:return n.abrupt("return");case 60:if(a!==Lb.recursive&&a!==Lb.all){n.next=90;break}m=!1,w=!1,n.prev=63,x=zn(t.pins.recursiveKeys());case 65:return n.next=67,Mf(x.next());case 67:if(!(m=!(_=n.sent).done)){n.next=74;break}return E=_.value,S=E.cid,A=E.metadata,n.next=71,Ob(Lb.recursive,S,A);case 71:m=!1,n.next=65;break;case 74:n.next=80;break;case 76:n.prev=76,n.t2=n.catch(63),w=!0,k=n.t2;case 80:if(n.prev=80,n.prev=81,!m||null==x.return){n.next=85;break}return n.next=85,Mf(x.return());case 85:if(n.prev=85,!w){n.next=88;break}throw k;case 88:return n.finish(85);case 89:return n.finish(80);case 90:if(a!==Lb.indirect&&a!==Lb.all){n.next=120;break}C=!1,I=!1,n.prev=93,D=zn(t.pins.indirectKeys(e));case 95:return n.next=97,Mf(D.next());case 97:if(!(C=!(R=n.sent).done)){n.next=104;break}return P=R.value,n.next=101,Ob(Lb.indirect,P);case 101:C=!1,n.next=95;break;case 104:n.next=110;break;case 106:n.prev=106,n.t3=n.catch(93),I=!0,T=n.t3;case 110:if(n.prev=110,n.prev=111,!C||null==D.return){n.next=115;break}return n.next=115,Mf(D.return());case 115:if(n.prev=115,!I){n.next=118;break}throw T;case 118:return n.finish(115);case 119:return n.finish(110);case 120:if(a!==Lb.direct&&a!==Lb.all){n.next=150;break}N=!1,L=!1,n.prev=123,B=zn(t.pins.directKeys());case 125:return n.next=127,Mf(B.next());case 127:if(!(N=!(U=n.sent).done)){n.next=134;break}return M=U.value,z=M.cid,F=M.metadata,n.next=131,Ob(Lb.direct,z,F);case 131:N=!1,n.next=125;break;case 134:n.next=140;break;case 136:n.prev=136,n.t4=n.catch(123),L=!0,O=n.t4;case 140:if(n.prev=140,n.prev=141,!N||null==B.return){n.next=145;break}return n.next=145,Mf(B.return());case 145:if(n.prev=145,!L){n.next=148;break}throw O;case 148:return n.finish(145);case 149:return n.finish(140);case 150:case"end":return n.stop()}}),n,null,[[9,43,47,57],[48,,52,56],[63,76,80,90],[81,,85,89],[93,106,110,120],[111,,115,119],[123,136,140,150],[141,,145,149]])}))()})),n.apply(this,arguments)}return $v((function(){return n.apply(this,arguments)}))}({codecs:r,repo:n}),this.remote={add:function(e){return Promise.reject(new Error("Not implemented"))},ls:function(){var e=Hn((function(e){return En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.reject(new Error("Not implemented")));case 1:case"end":return e.stop()}}),e)}))()}));return function(t){return e.apply(this,arguments)}}(),rm:function(e){return Promise.reject(new Error("Not implemented"))},rmAll:function(e){return Promise.reject(new Error("Not implemented"))},service:{add:function(e,t){return Promise.reject(new Error("Not implemented"))},rm:function(e){return Promise.reject(new Error("Not implemented"))},ls:function(){return Promise.reject(new Error("Not implemented"))}}}}));function Ub(e){return e=e||new Error("Cannot open database"),ca(e,"ERR_DB_OPEN_FAILED")}function Mb(e){return e=e||new Error("Delete failed"),ca(e,"ERR_DB_DELETE_FAILED")}function zb(e){return e=e||new Error("Write failed"),ca(e,"ERR_DB_WRITE_FAILED")}function Fb(e){return e=e||new Error("Not Found"),ca(e,"ERR_NOT_FOUND")}var Vb=__webpack_require__(2714),jb=__webpack_require__(371),qb=__webpack_require__(6553),Kb=__webpack_require__(8660),Hb=__webpack_require__(7296);__webpack_require__(2982)._configure(),jb._configure(qb),Kb._configure(Hb);var Gb,Wb,Yb,Qb,Jb,Zb=["uint64","int64","sint64","fixed64","sfixed64"];function Xb(e){return function(e){var t,r=Ni(Zb);try{var n=function(){var r=t.value;if(null==e[r])return"continue";var n=e[r];e[r]=function(){return BigInt(n.call(this).toString())}};for(r.s();!(t=r.n()).done;)n()}catch(eL){r.e(eL)}finally{r.f()}return e}(new jb(e))}function $b(){return function(e){var t,r=Ni(Zb);try{var n=function(){var r=t.value;if(null==e[r])return"continue";var n=e[r];e[r]=function(e){return n.call(this,e.toString())}};for(r.s();!(t=r.n()).done;)n()}catch(eL){r.e(eL)}finally{r.f()}return e}(Kb.create())}function eg(e,t){var r=Xb(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}function tg(e,t){var r=$b();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}function rg(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function ng(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return e[t]}return rg("enum",Gb.VARINT,(function(e,r){var n=t(e);r.int32(n)}),(function(e){return t(e.int32())}))}function ag(e,t){return rg("message",Gb.LENGTH_DELIMITED,e,t)}!function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}(Gb||(Gb={})),function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"}(Wb||(Wb={})),function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"}(Yb||(Yb={})),function(e){e.codec=function(){return ng(Yb)}}(Wb||(Wb={})),function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),Wb.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.Type=Wb.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(Qb||(Qb={})),function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),Wb.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.Type=Wb.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(Jb||(Jb={}));__webpack_require__(9978),__webpack_require__(7814);var ig=__webpack_require__(1223),og=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:globalThis,t=e.crypto;if(null==t||null==t.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t};var sg=__webpack_require__(9960);__webpack_require__(693);function ug(e,t){var r=Uint8Array.from(e.abs().toByteArray());if(r=0===r[0]?r.subarray(1):r,null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=ld([new Uint8Array(t-r.length),r])}return kh(r,"base64url")}function cg(e){var t=lg(e);return new ig.jsbn.BigInteger(kh(t,"base16"),16)}function lg(e,t){var r=Bf(e,"base64urlpad");if(null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=ld([new Uint8Array(t-r.length),r])}return r}var fg={"P-256":256,"P-384":384,"P-521":521};Object.keys(fg).join(" / ");var hg=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},pg=hg,dg=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),vg=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),yg=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return gg(this,e)}}]),e}(),bg=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return gg(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),gg=function(e,t){return new bg(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},mg=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new vg(t,r,n),this.decoder=new yg(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),wg=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new mg(t,r,n,a)},kg=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=pg(n,r),i=a.encode,o=a.decode;return wg({prefix:t,name:r,encode:i,decode:function(e){return dg(o(e))}})},xg=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return wg({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},_g=xg({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});xg({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xg({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xg({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Eg(e){var t,r,n,a,i,o,s=null!==(t=null===e||void 0===e?void 0:e.algorithm)&&void 0!==t?t:"AES-GCM",u=null!==(r=null===e||void 0===e?void 0:e.keyLength)&&void 0!==r?r:16,c=null!==(n=null===e||void 0===e?void 0:e.nonceLength)&&void 0!==n?n:12,l=null!==(a=null===e||void 0===e?void 0:e.digest)&&void 0!==a?a:"SHA-256",f=null!==(i=null===e||void 0===e?void 0:e.saltLength)&&void 0!==i?i:16,h=null!==(o=null===e||void 0===e?void 0:e.iterations)&&void 0!==o?o:32767,p=og();function d(){return(d=An(En().mark((function e(t,r){var n,a,i,o,d,v,y;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.getRandomValues(new Uint8Array(f)),a=p.getRandomValues(new Uint8Array(c)),i={name:s,iv:a},"string"===typeof r&&(r=Bf(r)),o={name:"PBKDF2",salt:n,iterations:h,hash:{name:l}},e.next=7,p.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]);case 7:return d=e.sent,e.next=10,p.subtle.deriveKey(o,d,{name:s,length:u},!0,["encrypt"]);case 10:return v=e.sent,e.next=13,p.subtle.encrypt(i,v,t);case 13:return y=e.sent,e.abrupt("return",ld([n,i.iv,new Uint8Array(y)]));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=An(En().mark((function e(t,r){var n,a,i,o,d,v,y,b;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.subarray(0,f),a=t.subarray(f,f+c),i=t.subarray(f+c),o={name:s,iv:a},"string"===typeof r&&(r=Bf(r)),d={name:"PBKDF2",salt:n,iterations:h,hash:{name:l}},e.next=8,p.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]);case 8:return v=e.sent,e.next=11,p.subtle.deriveKey(d,v,{name:s,length:u},!0,["decrypt"]);case 11:return y=e.sent,e.next=14,p.subtle.decrypt(o,y,i);case 14:return b=e.sent,e.abrupt("return",new Uint8Array(b));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u*=8;var y={encrypt:function(e,t){return d.apply(this,arguments)},decrypt:function(e,t){return v.apply(this,arguments)}};return y}function Sg(e,t){return Ag.apply(this,arguments)}function Ag(){return(Ag=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_g.decode(t),a=Eg(),e.next=4,a.decrypt(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cg=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Ig;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Ig=Math.pow(2,31);var Tg=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var Dg=Math.pow(2,7),Rg=Math.pow(2,14),Pg=Math.pow(2,21),Ng=Math.pow(2,28),Lg=Math.pow(2,35),Og=Math.pow(2,42),Bg=Math.pow(2,49),Ug=Math.pow(2,56),Mg=Math.pow(2,63),zg={encode:Cg,decode:Tg,encodingLength:function(e){return e<Dg?1:e<Rg?2:e<Pg?3:e<Ng?4:e<Lg?5:e<Og?6:e<Bg?7:e<Ug?8:e<Mg?9:10}},Fg=zg,Vg=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Fg.encode(e,t,r),t},jg=function(e){return Fg.encodingLength(e)},qg=function(e,t){var r=t.byteLength,n=jg(e),a=n+jg(r),i=new Uint8Array(a+r);return Vg(e,i,0),Vg(r,i,n),i.set(t,a),new Kg(e,r,t,i)},Kg=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),Hg=function(e){var t=e.name,r=e.code,n=e.encode;return new Gg(t,r,n)},Gg=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?qg(this.code,r):r.then((function(e){return qg(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),Wg=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Yg=Hg({name:"sha2-256",code:18,encode:Wg("SHA-256")}),Qg=(Hg({name:"sha2-512",code:19,encode:Wg("SHA-512")}),__webpack_require__(431),__webpack_require__(6245)),Jg=__webpack_require__.t(Qg,2),Zg=BigInt(0),Xg=BigInt(1),$g=BigInt(2),em=BigInt(3),tm=BigInt(8),rm=Object.freeze({a:Zg,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Xg,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),nm=function(e,t){return(e+t/$g)/t},am=BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),im=function(e){var t=rm.n,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Xg*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),s=nm(i*e,t),u=nm(-n*e,t),c=Lm(e-s*r-u*a,t),l=Lm(-s*n-u*i,t),f=c>o,h=l>o;if(f&&(c=t-c),h&&(l=t-l),c>o||l>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:f,k1:c,k2neg:h,k2:l}},om=32,sm=32,um=32;function cm(e){var t=rm.a,r=rm.b,n=Lm(e*e),a=Lm(n*e);return Lm(a+t*e+r)}var lm=rm.a===Zg,fm=function(e){Pn(r,e);var t=Un(r);function r(e){return Cn(this,r),t.call(this,e)}return Dn(r)}(nu(Error));function hm(e){if(!(e instanceof pm))throw new TypeError("JacobianPoint expected")}var pm=function(){function e(t,r,n){Cn(this,e),this.x=t,this.y=r,this.z=n}return Dn(e,[{key:"equals",value:function(e){hm(e);var t=this.x,r=this.y,n=this.z,a=e.x,i=e.y,o=e.z,s=Lm(n*n),u=Lm(o*o),c=Lm(t*u),l=Lm(a*s),f=Lm(Lm(r*o)*u),h=Lm(Lm(i*n)*s);return c===l&&f===h}},{key:"negate",value:function(){return new e(this.x,Lm(-this.y),this.z)}},{key:"double",value:function(){var t=this.x,r=this.y,n=this.z,a=Lm(t*t),i=Lm(r*r),o=Lm(i*i),s=t+i,u=Lm($g*(Lm(s*s)-a-o)),c=Lm(em*a),l=Lm(c*c),f=Lm(l-$g*u);return new e(f,Lm(c*(u-f)-tm*o),Lm($g*r*n))}},{key:"add",value:function(t){hm(t);var r=this.x,n=this.y,a=this.z,i=t.x,o=t.y,s=t.z;if(i===Zg||o===Zg)return this;if(r===Zg||n===Zg)return t;var u=Lm(a*a),c=Lm(s*s),l=Lm(r*c),f=Lm(i*u),h=Lm(Lm(n*s)*c),p=Lm(Lm(o*a)*u),d=Lm(f-l),v=Lm(p-h);if(d===Zg)return v===Zg?this.double():e.ZERO;var y=Lm(d*d),b=Lm(d*y),g=Lm(l*y),m=Lm(v*v-b-$g*g);return new e(m,Lm(v*(g-m)-h*b),Lm(a*s*d))}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiplyUnsafe",value:function(t){var r=e.ZERO;if("bigint"===typeof t&&t===Zg)return r;var n=Nm(t);if(n===Xg)return this;if(!lm){for(var a=r,i=this;n>Zg;)n&Xg&&(a=a.add(i)),i=i.double(),n>>=Xg;return a}for(var o=im(n),s=o.k1neg,u=o.k1,c=o.k2neg,l=o.k2,f=r,h=r,p=this;u>Zg||l>Zg;)u&Xg&&(f=f.add(p)),l&Xg&&(h=h.add(p)),p=p.double(),u>>=Xg,l>>=Xg;return s&&(f=f.negate()),c&&(h=h.negate()),h=new e(Lm(h.x*am),h.y,h.z),f.add(h)}},{key:"precomputeWindow",value:function(e){for(var t=lm?128/e+1:256/e+1,r=[],n=this,a=n,i=0;i<t;i++){a=n,r.push(a);for(var o=1;o<Math.pow(2,e-1);o++)a=a.add(n),r.push(a);n=a.double()}return r}},{key:"wNAF",value:function(t,r){!r&&this.equals(e.BASE)&&(r=ym.BASE);var n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");var a=r&&vm.get(r);a||(a=this.precomputeWindow(n),r&&1!==n&&(a=e.normalizeZ(a),vm.set(r,a)));for(var i=e.ZERO,o=e.BASE,s=1+(lm?128/n:256/n),u=Math.pow(2,n-1),c=BigInt(Math.pow(2,n)-1),l=Math.pow(2,n),f=BigInt(n),h=0;h<s;h++){var p=h*u,d=Number(t&c);t>>=f,d>u&&(d-=l,t+=Xg);var v=p,y=p+Math.abs(d)-1,b=h%2!==0,g=d<0;0===d?o=o.add(dm(b,a[v])):i=i.add(dm(g,a[y]))}return{p:i,f:o}}},{key:"multiply",value:function(t,r){var n,a,i=Nm(t);if(lm){var o=im(i),s=o.k1neg,u=o.k1,c=o.k2neg,l=o.k2,f=this.wNAF(u,r),h=f.p,p=f.f,d=this.wNAF(l,r),v=d.p,y=d.f;h=dm(s,h),v=new e(Lm((v=dm(c,v)).x*am),v.y,v.z),n=h.add(v),a=p.add(y)}else{var b=this.wNAF(i,r);n=b.p,a=b.f}return e.normalizeZ([n,a])[0]}},{key:"toAffine",value:function(t){var r=this.x,n=this.y,a=this.z,i=this.equals(e.ZERO);null==t&&(t=i?tm:Bm(a));var o=t,s=Lm(o*o),u=Lm(s*o),c=Lm(r*s),l=Lm(n*u),f=Lm(a*o);if(i)return ym.ZERO;if(f!==Xg)throw new Error("invZ was invalid");return new ym(c,l)}}],[{key:"fromAffine",value:function(t){if(!(t instanceof ym))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(ym.ZERO)?e.ZERO:new e(t.x,t.y,Xg)}},{key:"toAffineBatch",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rm.P,r=new Array(e.length),n=e.reduce((function(e,n,a){return n===Zg?e:(r[a]=e,Lm(e*n,t))}),Xg),a=Bm(n,t);return e.reduceRight((function(e,n,a){return n===Zg?e:(r[a]=Lm(e*r[a],t),Lm(e*n,t))}),a),r}(e.map((function(e){return e.z})));return e.map((function(e,r){return e.toAffine(t[r])}))}},{key:"normalizeZ",value:function(t){return e.toAffineBatch(t).map(e.fromAffine)}}]),e}();function dm(e,t){var r=t.negate();return e?r:t}pm.BASE=new pm(rm.Gx,rm.Gy,Xg),pm.ZERO=new pm(Zg,Xg,Zg);var vm=new WeakMap,ym=function(){function e(t,r){Cn(this,e),this.x=t,this.y=r}return Dn(e,[{key:"_setWindowSize",value:function(e){this._WINDOW_SIZE=e,vm.delete(this)}},{key:"hasEvenY",value:function(){return this.y%$g===Zg}},{key:"toRawBytes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Dm(this.toHex(e))}},{key:"toHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Am(this.x);if(e){var r=this.hasEvenY()?"02":"03";return"".concat(r).concat(t)}return"04".concat(t).concat(Am(this.y))}},{key:"toHexX",value:function(){return this.toHex(!0).slice(2)}},{key:"toRawX",value:function(){return this.toRawBytes(!0).slice(1)}},{key:"assertValidity",value:function(){var e="Point is not on elliptic curve",t=this.x,r=this.y;if(!Vm(t)||!Vm(r))throw new Error(e);var n=Lm(r*r);if(Lm(n-cm(t))!==Zg)throw new Error(e)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"negate",value:function(){return new e(this.x,Lm(-this.y))}},{key:"double",value:function(){return pm.fromAffine(this).double().toAffine()}},{key:"add",value:function(e){return pm.fromAffine(this).add(pm.fromAffine(e)).toAffine()}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiply",value:function(e){return pm.fromAffine(this).multiply(e,this).toAffine()}},{key:"multiplyAndAddUnsafe",value:function(t,r,n){var a=pm.fromAffine(this),i=r===Zg||r===Xg||this!==e.BASE?a.multiplyUnsafe(r):a.multiply(r),o=pm.fromAffine(t).multiplyUnsafe(n),s=i.add(o);return s.equals(pm.ZERO)?void 0:s.toAffine()}}],[{key:"fromCompressedHex",value:function(t){var r=32===t.length,n=Rm(r?t:t.subarray(1));if(!Vm(n))throw new Error("Point is not on curve");var a=function(e){var t=rm.P,r=BigInt(6),n=BigInt(11),a=BigInt(22),i=BigInt(23),o=BigInt(44),s=BigInt(88),u=e*e*e%t,c=u*u*e%t,l=Om(c,em)*c%t,f=Om(l,em)*c%t,h=Om(f,$g)*u%t,p=Om(h,n)*h%t,d=Om(p,a)*p%t,v=Om(d,o)*d%t,y=Om(v,s)*v%t,b=Om(y,o)*d%t,g=Om(b,em)*c%t,m=Om(g,i)*p%t,w=Om(m,r)*u%t,k=Om(w,$g);if(k*k%t!==e)throw new Error("Cannot find square root");return k}(cm(n)),i=(a&Xg)===Xg;r?i&&(a=Lm(-a)):1===(1&t[0])!==i&&(a=Lm(-a));var o=new e(n,a);return o.assertValidity(),o}},{key:"fromUncompressedHex",value:function(t){var r=new e(Rm(t.subarray(1,33)),Rm(t.subarray(33,65)));return r.assertValidity(),r}},{key:"fromHex",value:function(e){var t=Pm(e),r=t.length,n=t[0];if(r===om)return this.fromCompressedHex(t);if(33===r&&(2===n||3===n))return this.fromCompressedHex(t);if(65===r&&4===n)return this.fromUncompressedHex(t);throw new Error("Point.fromHex: received invalid point. Expected 32-".concat(33," compressed bytes or ").concat(65," uncompressed bytes, not ").concat(r))}},{key:"fromPrivateKey",value:function(t){return e.BASE.multiply(qm(t))}},{key:"fromSignature",value:function(t,r,n){var a=Hm(r),i=a.r,o=a.s;if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");var s=Mm(Pm(t)),u=rm.n,c=2===n||3===n?i+u:i,l=Bm(c,u),f=Lm(-s*l,u),h=Lm(o*l,u),p=1&n?"03":"02",d=e.fromHex(p+Am(c)),v=e.BASE.multiplyAndAddUnsafe(d,f,h);if(!v)throw new Error("Cannot recover signature: point at infinify");return v.assertValidity(),v}}]),e}();function bm(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function gm(e){if(e.length<2||2!==e[0])throw new Error("Invalid signature integer tag: ".concat(xm(e)));var t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Rm(r),left:e.subarray(t+2)}}ym.BASE=new ym(rm.Gx,rm.Gy),ym.ZERO=new ym(Zg,Zg);var mm=function(){function e(t,r){Cn(this,e),this.r=t,this.s=r,this.assertValidity()}return Dn(e,[{key:"assertValidity",value:function(){var e=this.r,t=this.s;if(!Fm(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Fm(t))throw new Error("Invalid Signature: s must be 0 < s < n")}},{key:"hasHighS",value:function(){var e=rm.n>>Xg;return this.s>e}},{key:"normalizeS",value:function(){return this.hasHighS()?new e(this.r,Lm(-this.s,rm.n)):this}},{key:"toDERRawBytes",value:function(){return Dm(this.toDERHex())}},{key:"toDERHex",value:function(){var e=bm(Im(this.s)),t=bm(Im(this.r)),r=e.length/2,n=t.length/2,a=Im(r),i=Im(n),o=Im(n+r+4);return"30".concat(o,"02").concat(i).concat(t,"02").concat(a).concat(e)}},{key:"toRawBytes",value:function(){return this.toDERRawBytes()}},{key:"toHex",value:function(){return this.toDERHex()}},{key:"toCompactRawBytes",value:function(){return Dm(this.toCompactHex())}},{key:"toCompactHex",value:function(){return Am(this.r)+Am(this.s)}}],[{key:"fromCompact",value:function(t){var r=t instanceof Uint8Array,n="Signature.fromCompact";if("string"!==typeof t&&!r)throw new TypeError("".concat(n,": Expected string or Uint8Array"));var a=r?xm(t):t;if(128!==a.length)throw new Error("".concat(n,": Expected 64-byte hex"));return new e(Tm(a.slice(0,64)),Tm(a.slice(64,128)))}},{key:"fromDER",value:function(t){var r=t instanceof Uint8Array;if("string"!==typeof t&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");var n=function(e){if(e.length<2||48!=e[0])throw new Error("Invalid signature tag: ".concat(xm(e)));if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");var t=gm(e.subarray(2)),r=t.data,n=gm(t.left),a=n.data,i=n.left;if(i.length)throw new Error("Invalid signature: left bytes after parsing: ".concat(xm(i)));return{r:r,s:a}}(r?t:Dm(t));return new e(n.r,n.s)}},{key:"fromHex",value:function(e){return this.fromDER(e)}}]),e}();function wm(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every((function(e){return e instanceof Uint8Array})))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];for(var n=t.reduce((function(e,t){return e+t.length}),0),a=new Uint8Array(n),i=0,o=0;i<t.length;i++){var s=t[i];a.set(s,o),o+=s.length}return a}var km=Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));function xm(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t="",r=0;r<e.length;r++)t+=km[e[r]];return t}var _m,Em,Sm=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Am(e){if("bigint"!==typeof e)throw new Error("Expected bigint");if(!(Zg<=e&&e<Sm))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function Cm(e){var t=Dm(Am(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function Im(e){var t=e.toString(16);return 1&t.length?"0".concat(t):t}function Tm(e){if("string"!==typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt("0x".concat(e))}function Dm(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);for(var t=new Uint8Array(e.length/2),r=0;r<t.length;r++){var n=2*r,a=e.slice(n,n+2),i=Number.parseInt(a,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t}function Rm(e){return Tm(xm(e))}function Pm(e){return e instanceof Uint8Array?Uint8Array.from(e):Dm(e)}function Nm(e){if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"===typeof e&&Fm(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function Lm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rm.P,r=e%t;return r>=Zg?r:t+r}function Om(e,t){for(var r=rm.P,n=e;t-- >Zg;)n*=n,n%=r;return n}function Bm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rm.P;if(e===Zg||t<=Zg)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));for(var r=Lm(e,t),n=t,a=Zg,i=Xg,o=Xg,s=Zg;r!==Zg;){var u=n/r,c=n%r,l=a-o*u,f=i-s*u;n=r,r=c,a=o,i=s,o=l,s=f}var h=n;if(h!==Xg)throw new Error("invert: does not exist");return Lm(a,t)}function Um(e){var t=8*e.length-256,r=Rm(e);return t>0?r>>BigInt(t):r}function Mm(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Um(e);if(t)return r;var n=rm.n;return r>=n?r-n:r}var zm=function(){function e(t,r){if(Cn(this,e),this.hashLen=t,this.qByteLen=r,"number"!==typeof t||t<2)throw new Error("hashLen must be a number");if("number"!==typeof r||r<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}return Dn(e,[{key:"hmac",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return aw.hmacSha256.apply(aw,[this.k].concat(t))}},{key:"hmacSync",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Em.apply(void 0,[this.k].concat(t))}},{key:"checkSync",value:function(){if("function"!==typeof Em)throw new fm("hmacSha256Sync needs to be set")}},{key:"incr",value:function(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}},{key:"reseed",value:function(){var e=An(En().mark((function e(){var t,r=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:new Uint8Array,e.next=3,this.hmac(this.v,Uint8Array.from([0]),t);case 3:return this.k=e.sent,e.next=6,this.hmac(this.v);case 6:if(this.v=e.sent,0!==t.length){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.hmac(this.v,Uint8Array.from([1]),t);case 11:return this.k=e.sent,e.next=14,this.hmac(this.v);case 14:this.v=e.sent;case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reseedSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}},{key:"generate",value:function(){var e=An(En().mark((function e(){var t,r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.incr(),t=0,r=[];case 3:if(!(t<this.qByteLen)){e.next=12;break}return e.next=6,this.hmac(this.v);case 6:this.v=e.sent,n=this.v.slice(),r.push(n),t+=this.v.length,e.next=3;break;case 12:return e.abrupt("return",wm.apply(void 0,r));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"generateSync",value:function(){this.checkSync(),this.incr();for(var e=0,t=[];e<this.qByteLen;){this.v=this.hmacSync(this.v);var r=this.v.slice();t.push(r),e+=this.v.length}return wm.apply(void 0,t)}}]),e}();function Fm(e){return Zg<e&&e<rm.n}function Vm(e){return Zg<e&&e<rm.P}function jm(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=rm.n,i=Mm(e,!0);if(Fm(i)){var o=Bm(i,a),s=ym.BASE.multiply(i),u=Lm(s.x,a);if(u!==Zg){var c=Lm(o*Lm(t+r*u,a),a);if(c!==Zg){var l=new mm(u,c),f=(s.x===l.r?0:2)|Number(s.y&Xg);return n&&l.hasHighS()&&(l=l.normalizeS(),f^=1),{sig:l,recovery:f}}}}}function qm(e){var t;if("bigint"===typeof e)t=e;else if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"===typeof e){if(64!==e.length)throw new Error("Expected 32 bytes of private key");t=Tm(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==sm)throw new Error("Expected 32 bytes of private key");t=Rm(e)}if(!Fm(t))throw new Error("Expected private key: 0 < key < n");return t}function Km(e){return e instanceof ym?(e.assertValidity(),e):ym.fromHex(e)}function Hm(e){if(e instanceof mm)return e.assertValidity(),e;try{return mm.fromDER(e)}catch(t){return mm.fromCompact(e)}}function Gm(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ym.fromPrivateKey(e).toRawBytes(t)}function Wm(e){return Rm(e.length>om?e.slice(0,om):e)}function Ym(e){var t=Wm(e),r=Lm(t,rm.n);return Qm(r<Zg?t:r)}function Qm(e){return Cm(e)}function Jm(e,t,r){if(null==e)throw new Error('sign: expected valid message hash, not "'.concat(e,'"'));var n=Pm(e),a=qm(t),i=[Qm(a),Ym(n)];if(null!=r){!0===r&&(r=aw.randomBytes(om));var o=Pm(r);if(o.length!==om)throw new Error("sign: Expected ".concat(om," bytes of extra data"));i.push(o)}return{seed:wm.apply(void 0,i),m:Wm(n),d:a}}function Zm(e,t){var r=e.sig,n=e.recovery,a=Object.assign({canonical:!0,der:!0},t),i=a.der,o=a.recovered,s=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}function Xm(e,t){return $m.apply(this,arguments)}function $m(){return $m=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:{},a=Jm(t,r,n.extraEntropy),i=a.seed,o=a.m,s=a.d,u=new zm(um,sm),e.next=5,u.reseed(i);case 5:return e.t0=jm,e.next=8,u.generate();case 8:if(e.t1=e.sent,e.t2=o,e.t3=s,e.t4=n.canonical,c=(0,e.t0)(e.t1,e.t2,e.t3,e.t4)){e.next=17;break}return e.next=15,u.reseed();case 15:e.next=5;break;case 17:return e.abrupt("return",Zm(c,n));case 18:case"end":return e.stop()}}),e)}))),$m.apply(this,arguments)}var ew={strict:!0};function tw(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ew;try{n=Hm(e),t=Pm(t)}catch(y){return!1}var i=n,o=i.r,s=i.s;if(a.strict&&n.hasHighS())return!1;var u,c=Mm(t);try{u=Km(r)}catch(y){return!1}var l=rm.n,f=Bm(s,l),h=Lm(c*f,l),p=Lm(o*f,l),d=ym.BASE.multiplyAndAddUnsafe(u,h,p);if(!d)return!1;var v=Lm(d.x,l);return v===o}ym.BASE._setWindowSize(8);var rw={node:Jg,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},nw={},aw={bytesToHex:xm,hexToBytes:Dm,concatBytes:wm,mod:Lm,invert:Bm,isValidPrivateKey:function(e){try{return qm(e),!0}catch(t){return!1}},_bigintTo32Bytes:Cm,_normalizePrivateKey:qm,hashToPrivateKey:function(e){if((e=Pm(e)).length<40||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return Cm(Lm(Rm(e),rm.n-Xg)+Xg)},randomBytes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(rw.web)return rw.web.getRandomValues(new Uint8Array(e));if(rw.node){var t=rw.node.randomBytes;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:function(){return aw.hashToPrivateKey(aw.randomBytes(40))},precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ym.BASE,r=t===ym.BASE?t:new ym(t.x,t.y);return r._setWindowSize(e),r.multiply(em),r},sha256:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o,s=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=s.length,r=new Array(t),n=0;n<t;n++)r[n]=s[n];if(!rw.web){e.next=8;break}return e.next=4,rw.web.subtle.digest("SHA-256",wm.apply(void 0,r));case 4:return a=e.sent,e.abrupt("return",new Uint8Array(a));case 8:if(!rw.node){e.next=15;break}return i=rw.node.createHash,o=i("sha256"),r.forEach((function(e){return o.update(e)})),e.abrupt("return",Uint8Array.from(o.digest()));case 15:throw new Error("The environment doesn't have sha256 function");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hmacSha256:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=l[a];if(!rw.web){e.next=12;break}return e.next=4,rw.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);case 4:return i=e.sent,o=wm.apply(void 0,n),e.next=8,rw.web.subtle.sign("HMAC",i,o);case 8:return s=e.sent,e.abrupt("return",new Uint8Array(s));case 12:if(!rw.node){e.next=19;break}return u=rw.node.createHmac,c=u("sha256",t),n.forEach((function(e){return c.update(e)})),e.abrupt("return",Uint8Array.from(c.digest()));case 19:throw new Error("The environment doesn't have hmac-sha256 function");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=nw[t])){e.next=7;break}return e.next=4,aw.sha256(Uint8Array.from(t,(function(e){return e.charCodeAt(0)})));case 4:n=e.sent,r=wm(n,n),nw[t]=r;case 7:for(a=s.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=s[o];return e.abrupt("return",aw.sha256.apply(aw,[r].concat(i)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),taggedHashSync:function(e){if("function"!==typeof _m)throw new fm("sha256Sync is undefined, you need to set it");var t=nw[e];if(void 0===t){var r=_m(Uint8Array.from(e,(function(e){return e.charCodeAt(0)})));t=wm(r,r),nw[e]=t}for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return _m.apply(void 0,[t].concat(a))},_JacobianPoint:pm};function iw(e){if(isNaN(e)||e<=0)throw ca(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return aw.randomBytes(e)}Object.defineProperties(aw,{sha256Sync:{configurable:!1,get:function(){return _m},set:function(e){_m||(_m=e)}},hmacSha256Sync:{configurable:!1,get:function(){return Em},set:function(e){Em||(Em=e)}}});__webpack_require__(7341);function ow(e){var t=ig.asn1.fromDer(kh(e,"ascii")),r=ig.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:ug(r.n),e:ug(r.e),d:ug(r.d),p:ug(r.p),q:ug(r.q),dp:ug(r.dP),dq:ug(r.dQ),qi:ug(r.qInv),alg:"RS256"}}function sw(e,t){return t.map((function(t){return cg(e[t])}))}function uw(e){return cw.apply(this,arguments)}function cw(){return cw=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,og().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]);case 2:return r=e.sent,e.next=5,yw(r);case 5:return n=e.sent,e.abrupt("return",{privateKey:n[0],publicKey:n[1]});case 7:case"end":return e.stop()}}),e)}))),cw.apply(this,arguments)}function lw(e){return fw.apply(this,arguments)}function fw(){return fw=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,og().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]);case 2:return r=e.sent,e.t0=r,e.next=6,gw(t);case 6:return e.t1=e.sent,n=[e.t0,e.t1],e.next=10,yw({privateKey:n[0],publicKey:n[1]});case 10:return a=e.sent,e.abrupt("return",{privateKey:a[0],publicKey:a[1]});case 12:case"end":return e.stop()}}),e)}))),fw.apply(this,arguments)}function hw(e,t){return pw.apply(this,arguments)}function pw(){return(pw=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,og().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]);case 2:return n=e.sent,e.next=5,og().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,Uint8Array.from(r));case 5:return a=e.sent,e.abrupt("return",new Uint8Array(a,0,a.byteLength));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dw(e,t,r){return vw.apply(this,arguments)}function vw(){return(vw=An(En().mark((function e(t,r,n){var a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,og().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);case 2:return a=e.sent,e.next=5,og().subtle.verify({name:"RSASSA-PKCS1-v1_5"},a,r,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yw(e){return bw.apply(this,arguments)}function bw(){return bw=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.privateKey&&null!=t.publicKey){e.next=2;break}throw ca(new Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");case 2:return e.next=4,Promise.all([og().subtle.exportKey("jwk",t.privateKey),og().subtle.exportKey("jwk",t.publicKey)]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),bw.apply(this,arguments)}function gw(e){return mw.apply(this,arguments)}function mw(){return(mw=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,og().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ww(e,t,r,n){var a=t?function(e){var t;return(t=ig.pki).setRsaPublicKey.apply(t,su(sw(e,["n","e"])))}(e):function(e){var t;return(t=ig.pki).setRsaPrivateKey.apply(t,su(sw(e,["n","e","d","p","q","dp","dq","qi"])))}(e);return Bf(n(kh(Uint8Array.from(r),"ascii"),a),"ascii")}function kw(e,t){return xw.apply(this,arguments)}function xw(){return(xw=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Eg(),e.next=3,n.encrypt(t,r);case 3:return a=e.sent,e.abrupt("return",_g.encode(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _w=function(){function e(t){Cn(this,e),this._key=t}return Dn(e,[{key:"verify",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dw(this._key,r,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"marshal",value:function(){return function(e){if(null==e.n||null==e.e)throw ca(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");var t=ig.pki.publicKeyToAsn1({n:cg(e.n),e:cg(e.e)});return Bf(ig.asn1.toDer(t).getBytes(),"ascii")}(this._key)}},{key:"bytes",get:function(){return Qb.encode({Type:Wb.RSA,Data:this.marshal()}).subarray()}},{key:"encrypt",value:function(e){return ww(this._key,!0,e,(function(e,t){return t.encrypt(e)}))}},{key:"equals",value:function(e){return Pd(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=An(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yg.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ew=function(){function e(t,r){Cn(this,e),this._key=t,this._publicKey=r}return Dn(e,[{key:"genSecret",value:function(){return iw(16)}},{key:"sign",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hw(this._key,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"public",get:function(){if(null==this._publicKey)throw ca(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new _w(this._publicKey)}},{key:"decrypt",value:function(e){return ww(this._key,!1,e,(function(e,t){return t.decrypt(e)}))}},{key:"marshal",value:function(){return function(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw ca(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");var t=ig.pki.privateKeyToAsn1({n:cg(e.n),e:cg(e.e),d:cg(e.d),p:cg(e.p),q:cg(e.q),dP:cg(e.dp),dQ:cg(e.dq),qInv:cg(e.qi)});return Bf(ig.asn1.toDer(t).getBytes(),"ascii")}(this._key)}},{key:"bytes",get:function(){return Jb.encode({Type:Wb.RSA,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return Pd(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=An(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yg.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"id",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.public.hash();case 2:return t=e.sent,e.abrupt("return",kh(t,"base58btc"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("pkcs-8"!==(r=s.length>1&&void 0!==s[1]?s[1]:"pkcs-8")){e.next=9;break}return n=new ig.util.ByteBuffer(this.marshal()),a=ig.asn1.fromDer(n),i=ig.pki.privateKeyFromAsn1(a),o={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"},e.abrupt("return",ig.pki.encryptRsaPrivateKey(i,t,o));case 9:if("libp2p-key"!==r){e.next=15;break}return e.next=12,kw(this.bytes,t);case 12:return e.abrupt("return",e.sent);case 15:throw ca(new Error("export format '".concat(r,"' is not supported")),"ERR_INVALID_EXPORT_FORMAT");case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Sw(e){return Aw.apply(this,arguments)}function Aw(){return Aw=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ow(t),e.next=3,lw(r);case 3:return n=e.sent,e.abrupt("return",new Ew(n.privateKey,n.publicKey));case 5:case"end":return e.stop()}}),e)}))),Aw.apply(this,arguments)}function Cw(e){var t=function(e){var t=ig.asn1.fromDer(kh(e,"ascii")),r=ig.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:ug(r.n),e:ug(r.e)}}(e);return new _w(t)}function Iw(e){return Tw.apply(this,arguments)}function Tw(){return(Tw=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lw(t);case 2:return r=e.sent,e.abrupt("return",new Ew(r.privateKey,r.publicKey));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dw(e){return Rw.apply(this,arguments)}function Rw(){return Rw=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uw(t);case 2:return r=e.sent,e.abrupt("return",new Ew(r.privateKey,r.publicKey));case 4:case"end":return e.stop()}}),e)}))),Rw.apply(this,arguments)}var Pw=kg({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Nw=(kg({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),dg),Lw=function(e){return qg(0,Nw(e))},Ow=__webpack_require__(2049),Bw=__webpack_require__.t(Ow,2),Uw=BigInt(0),Mw=BigInt(1),zw=BigInt(2),Fw=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),Vw=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:Fw,n:Fw,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),jw=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),qw=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Kw=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),Hw=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Gw=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Ww=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Yw=function(){function e(t,r,n,a){Cn(this,e),this.x=t,this.y=r,this.z=n,this.t=a}return Dn(e,[{key:"equals",value:function(e){Qw(e);var t=this.x,r=this.y,n=this.z,a=e.x,i=e.y,o=e.z,s=pk(t*o),u=pk(a*n),c=pk(r*o),l=pk(i*n);return s===u&&c===l}},{key:"negate",value:function(){return new e(pk(-this.x),this.y,this.z,pk(-this.t))}},{key:"double",value:function(){var t=this.x,r=this.y,n=this.z,a=Vw.a,i=pk(t*t),o=pk(r*r),s=pk(zw*pk(n*n)),u=pk(a*i),c=t+r,l=pk(pk(c*c)-i-o),f=u+o,h=f-s,p=u-o,d=pk(l*h),v=pk(f*p),y=pk(l*p);return new e(d,v,pk(h*f),y)}},{key:"add",value:function(t){Qw(t);var r=this.x,n=this.y,a=this.z,i=this.t,o=t.x,s=t.y,u=t.z,c=t.t,l=pk((n-r)*(s+o)),f=pk((n+r)*(s-o)),h=pk(f-l);if(h===Uw)return this.double();var p=pk(a*zw*c),d=pk(i*zw*u),v=d+p,y=f+l,b=d-p,g=pk(v*h),m=pk(y*b),w=pk(v*b);return new e(g,m,pk(h*y),w)}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"precomputeWindow",value:function(e){for(var t=1+256/e,r=[],n=this,a=n,i=0;i<t;i++){a=n,r.push(a);for(var o=1;o<Math.pow(2,e-1);o++)a=a.add(n),r.push(a);n=a.double()}return r}},{key:"wNAF",value:function(t,r){!r&&this.equals(e.BASE)&&(r=ek.BASE);var n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");var a=r&&$w.get(r);a||(a=this.precomputeWindow(n),r&&1!==n&&(a=e.normalizeZ(a),$w.set(r,a)));for(var i=e.ZERO,o=e.ZERO,s=1+256/n,u=Math.pow(2,n-1),c=BigInt(Math.pow(2,n)-1),l=Math.pow(2,n),f=BigInt(n),h=0;h<s;h++){var p=h*u,d=Number(t&c);if(t>>=f,d>u&&(d-=l,t+=Mw),0===d){var v=a[p];h%2&&(v=v.negate()),o=o.add(v)}else{var y=a[p+Math.abs(d)-1];d<0&&(y=y.negate()),i=i.add(y)}}return e.normalizeZ([i,o])[0]}},{key:"multiply",value:function(e,t){return this.wNAF(kk(e,Vw.l),t)}},{key:"multiplyUnsafe",value:function(t){var r=kk(t,Vw.l,!1),n=e.BASE,a=e.ZERO;if(r===Uw)return a;if(this.equals(a)||r===Mw)return this;if(this.equals(n))return this.wNAF(r);for(var i=a,o=this;r>Uw;)r&Mw&&(i=i.add(o)),o=o.double(),r>>=Mw;return i}},{key:"isSmallOrder",value:function(){return this.multiplyUnsafe(Vw.h).equals(e.ZERO)}},{key:"isTorsionFree",value:function(){return this.multiplyUnsafe(Vw.l).equals(e.ZERO)}},{key:"toAffine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dk(this.z),t=this.x,r=this.y,n=this.z,a=pk(t*e),i=pk(r*e),o=pk(n*e);if(o!==Mw)throw new Error("invZ was invalid");return new ek(a,i)}},{key:"fromRistrettoBytes",value:function(){Zw()}},{key:"toRistrettoBytes",value:function(){Zw()}},{key:"fromRistrettoHash",value:function(){Zw()}}],[{key:"fromAffine",value:function(t){if(!(t instanceof ek))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(ek.ZERO)?e.ZERO:new e(t.x,t.y,Mw,pk(t.x*t.y))}},{key:"toAffineBatch",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vw.P,r=new Array(e.length),n=e.reduce((function(e,n,a){return n===Uw?e:(r[a]=e,pk(e*n,t))}),Mw),a=dk(n,t);return e.reduceRight((function(e,n,a){return n===Uw?e:(r[a]=pk(e*r[a],t),pk(e*n,t))}),a),r}(e.map((function(e){return e.z})));return e.map((function(e,r){return e.toAffine(t[r])}))}},{key:"normalizeZ",value:function(e){return this.toAffineBatch(e).map(this.fromAffine)}}]),e}();function Qw(e){if(!(e instanceof Yw))throw new TypeError("ExtendedPoint expected")}function Jw(e){if(!(e instanceof Xw))throw new TypeError("RistrettoPoint expected")}function Zw(){throw new Error("Legacy method: switch to RistrettoPoint")}Yw.BASE=new Yw(Vw.Gx,Vw.Gy,Mw,pk(Vw.Gx*Vw.Gy)),Yw.ZERO=new Yw(Uw,Mw,Mw,Uw);var Xw=function(){function e(t){Cn(this,e),this.ep=t}return Dn(e,[{key:"toRawBytes",value:function(){var e,t=this.ep,r=t.x,n=t.y,a=t.z,i=t.t,o=pk(pk(a+n)*pk(a-n)),s=pk(r*n),u=pk(s*s),c=gk(pk(o*u)).value,l=pk(c*o),f=pk(c*s),h=pk(l*f*i);if(uk(i*h)){var p=pk(n*qw),d=pk(r*qw);r=p,n=d,e=pk(l*Hw)}else e=f;uk(r*h)&&(n=pk(-n));var v=pk((a-n)*e);return uk(v)&&(v=pk(-v)),sk(v)}},{key:"toHex",value:function(){return ak(this.toRawBytes())}},{key:"toString",value:function(){return this.toHex()}},{key:"equals",value:function(e){Jw(e);var t=this.ep,r=e.ep,n=pk(t.x*r.y)===pk(t.y*r.x),a=pk(t.y*r.y)===pk(t.x*r.x);return n||a}},{key:"add",value:function(t){return Jw(t),new e(this.ep.add(t.ep))}},{key:"subtract",value:function(t){return Jw(t),new e(this.ep.subtract(t.ep))}},{key:"multiply",value:function(t){return new e(this.ep.multiply(t))}},{key:"multiplyUnsafe",value:function(t){return new e(this.ep.multiplyUnsafe(t))}}],[{key:"calcElligatorRistrettoMap",value:function(e){var t=Vw.d,r=pk(qw*e*e),n=pk((r+Mw)*Gw),a=BigInt(-1),i=pk((a-t*r)*pk(r+t)),o=bk(n,i),s=o.isValid,u=o.value,c=pk(u*e);uk(c)||(c=pk(-c)),s||(u=c),s||(a=r);var l=pk(a*(r-Mw)*Ww-i),f=u*u,h=pk((u+u)*i),p=pk(l*Kw),d=pk(Mw-f),v=pk(Mw+f);return new Yw(pk(h*v),pk(d*p),pk(p*v),pk(h*d))}},{key:"hashToCurve",value:function(t){var r=hk((t=wk(t,64)).slice(0,32)),n=this.calcElligatorRistrettoMap(r),a=hk(t.slice(32,64)),i=this.calcElligatorRistrettoMap(a);return new e(n.add(i))}},{key:"fromHex",value:function(t){t=wk(t,32);var r=Vw.a,n=Vw.d,a="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=hk(t);if(!function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(sk(i),t)||uk(i))throw new Error(a);var o=pk(i*i),s=pk(Mw+r*o),u=pk(Mw-r*o),c=pk(s*s),l=pk(u*u),f=pk(r*n*c-l),h=gk(pk(f*l)),p=h.isValid,d=h.value,v=pk(d*u),y=pk(d*v*f),b=pk((i+i)*v);uk(b)&&(b=pk(-b));var g=pk(s*y),m=pk(b*g);if(!p||uk(m)||g===Uw)throw new Error(a);return new e(new Yw(b,g,Mw,m))}}]),e}();Xw.BASE=new Xw(Yw.BASE),Xw.ZERO=new Xw(Yw.ZERO);var $w=new WeakMap,ek=function(){function e(t,r){Cn(this,e),this.x=t,this.y=r}return Dn(e,[{key:"_setWindowSize",value:function(e){this._WINDOW_SIZE=e,$w.delete(this)}},{key:"toRawBytes",value:function(){var e=sk(this.y);return e[31]|=this.x&Mw?128:0,e}},{key:"toHex",value:function(){return ak(this.toRawBytes())}},{key:"toX25519",value:function(){var e=this.y;return sk(pk((Mw+e)*dk(Mw-e)))}},{key:"isTorsionFree",value:function(){return Yw.fromAffine(this).isTorsionFree()}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"negate",value:function(){return new e(pk(-this.x),this.y)}},{key:"add",value:function(e){return Yw.fromAffine(this).add(Yw.fromAffine(e)).toAffine()}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiply",value:function(e){return Yw.fromAffine(this).multiply(e,this).toAffine()}}],[{key:"fromHex",value:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Vw.d,a=Vw.P,i=(t=wk(t,32)).slice();i[31]=-129&t[31];var o=ck(i);if(r&&o>=a)throw new Error("Expected 0 < hex < P");if(!r&&o>=jw)throw new Error("Expected 0 < hex < 2**256");var s=pk(o*o),u=pk(s-Mw),c=pk(n*s+Mw),l=bk(u,c),f=l.isValid,h=l.value;if(!f)throw new Error("Point.fromHex: invalid y coordinate");var p=(h&Mw)===Mw,d=0!==(128&t[31]);return d!==p&&(h=pk(-h)),new e(h,o)}},{key:"fromPrivateKey",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sk(t);case 2:return e.abrupt("return",e.sent.point);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ek.BASE=new ek(Vw.Gx,Vw.Gy),ek.ZERO=new ek(Uw,Mw);var tk=function(){function e(t,r){Cn(this,e),this.r=t,this.s=r,this.assertValidity()}return Dn(e,[{key:"assertValidity",value:function(){var e=this.r,t=this.s;if(!(e instanceof ek))throw new Error("Expected Point instance");return kk(t,Vw.l,!1),this}},{key:"toRawBytes",value:function(){var e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(sk(this.s),32),e}},{key:"toHex",value:function(){return ak(this.toRawBytes())}}],[{key:"fromHex",value:function(t){var r=wk(t,64);return new e(ek.fromHex(r.slice(0,32),!1),ck(r.slice(32,64)))}}]),e}();function rk(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every((function(e){return e instanceof Uint8Array})))throw new Error("Expected Uint8Array list");if(1===t.length)return t[0];for(var n=t.reduce((function(e,t){return e+t.length}),0),a=new Uint8Array(n),i=0,o=0;i<t.length;i++){var s=t[i];a.set(s,o),o+=s.length}return a}var nk=Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));function ak(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");for(var t="",r=0;r<e.length;r++)t+=nk[e[r]];return t}function ik(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");for(var t=new Uint8Array(e.length/2),r=0;r<t.length;r++){var n=2*r,a=e.slice(n,n+2),i=Number.parseInt(a,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t}function ok(e){return ik(e.toString(16).padStart(64,"0"))}function sk(e){return ok(e).reverse()}function uk(e){return(pk(e)&Mw)===Mw}function ck(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+ak(Uint8Array.from(e).reverse()))}var lk,fk=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hk(e){return pk(ck(e)&fk)}function pk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vw.P,r=e%t;return r>=Uw?r:t+r}function dk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vw.P;if(e===Uw||t<=Uw)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));for(var r=pk(e,t),n=t,a=Uw,i=Mw,o=Mw,s=Uw;r!==Uw;){var u=n/r,c=n%r,l=a-o*u,f=i-s*u;n=r,r=c,a=o,i=s,o=l,s=f}var h=n;if(h!==Mw)throw new Error("invert: does not exist");return pk(a,t)}function vk(e,t){for(var r=Vw.P,n=e;t-- >Uw;)n*=n,n%=r;return n}function yk(e){var t=Vw.P,r=BigInt(5),n=BigInt(10),a=BigInt(20),i=BigInt(40),o=BigInt(80),s=e*e%t*e%t,u=vk(s,zw)*s%t,c=vk(u,Mw)*e%t,l=vk(c,r)*c%t,f=vk(l,n)*l%t,h=vk(f,a)*f%t,p=vk(h,i)*h%t,d=vk(p,o)*p%t,v=vk(d,o)*p%t,y=vk(v,n)*l%t;return{pow_p_5_8:vk(y,zw)*e%t,b2:s}}function bk(e,t){var r=pk(t*t*t),n=pk(r*r*t),a=pk(e*r*yk(e*n).pow_p_5_8),i=pk(t*a*a),o=a,s=pk(a*qw),u=i===e,c=i===pk(-e),l=i===pk(-e*qw);return u&&(a=o),(c||l)&&(a=s),uk(a)&&(a=pk(-a)),{isValid:u||c,value:a}}function gk(e){return bk(Mw,e)}function mk(e){return pk(ck(e),Vw.l)}function wk(e,t){var r=e instanceof Uint8Array?Uint8Array.from(e):ik(e);if("number"===typeof t&&r.length!==t)throw new Error("Expected ".concat(t," bytes"));return r}function kk(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)throw new TypeError("Specify max value");if("number"===typeof e&&Number.isSafeInteger(e)&&(e=BigInt(e)),"bigint"===typeof e&&e<t)if(r){if(Uw<e)return e}else if(Uw<=e)return e;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function xk(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function _k(e){if(32!==(e="bigint"===typeof e||"number"===typeof e?ok(kk(e,jw)):wk(e)).length)throw new Error("Expected 32 bytes");return e}function Ek(e){var t=xk(e.slice(0,32)),r=e.slice(32,64),n=mk(t),a=ek.BASE.multiply(n),i=a.toRawBytes();return{head:t,prefix:r,scalar:n,point:a,pointBytes:i}}function Sk(e){return Ak.apply(this,arguments)}function Ak(){return(Ak=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ek,e.next=3,Bk.sha512(_k(t));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ck(e){return Ik.apply(this,arguments)}function Ik(){return(Ik=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sk(t);case 2:return e.abrupt("return",e.sent.pointBytes);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tk(e,t){return Dk.apply(this,arguments)}function Dk(){return Dk=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=wk(t),e.next=3,Sk(r);case 3:return n=e.sent,a=n.prefix,i=n.scalar,o=n.pointBytes,e.t0=mk,e.next=10,Bk.sha512(a,t);case 10:return e.t1=e.sent,s=(0,e.t0)(e.t1),u=ek.BASE.multiply(s),e.t2=mk,e.next=16,Bk.sha512(u.toRawBytes(),o,t);case 16:return e.t3=e.sent,c=(0,e.t2)(e.t3),l=pk(s+c*i,Vw.l),e.abrupt("return",new tk(u,l).toRawBytes());case 20:case"end":return e.stop()}}),e)}))),Dk.apply(this,arguments)}function Rk(e,t,r){t=wk(t),r instanceof ek||(r=ek.fromHex(r,!1));var n=e instanceof tk?e.assertValidity():tk.fromHex(e),a=n.r,i=n.s;return{r:a,s:i,SB:Yw.BASE.multiplyUnsafe(i),pub:r,msg:t}}function Pk(e,t,r,n){var a=mk(n),i=Yw.fromAffine(e).multiplyUnsafe(a);return Yw.fromAffine(t).add(i).subtract(r).multiplyUnsafe(Vw.h).equals(Yw.ZERO)}function Nk(e,t,r){return Lk.apply(this,arguments)}function Lk(){return Lk=An(En().mark((function e(t,r,n){var a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Rk(t,r,n),i=a.r,o=a.SB,s=a.msg,u=a.pub,e.next=3,Bk.sha512(i.toRawBytes(),u.toRawBytes(),s);case 3:return c=e.sent,e.abrupt("return",Pk(u,i,o,c));case 5:case"end":return e.stop()}}),e)}))),Lk.apply(this,arguments)}ek.BASE._setWindowSize(8);var Ok={node:Bw,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},Bk={bytesToHex:ak,hexToBytes:ik,concatBytes:rk,getExtendedPublicKey:Sk,mod:pk,invert:dk,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:function(e){if((e=wk(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return pk(ck(e),Vw.l-Mw)+Mw},randomBytes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Ok.web)return Ok.web.getRandomValues(new Uint8Array(e));if(Ok.node){var t=Ok.node.randomBytes;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:function(){return Bk.randomBytes(32)},sha512:function(){var e=An(En().mark((function e(){var t,r,n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=rk.apply(void 0,n),!Ok.web){e.next=8;break}return e.next=4,Ok.web.subtle.digest("SHA-512",t.buffer);case 4:return r=e.sent,e.abrupt("return",new Uint8Array(r));case 8:if(!Ok.node){e.next=12;break}return e.abrupt("return",Uint8Array.from(Ok.node.createHash("sha512").update(t).digest()));case 12:throw new Error("The environment doesn't have sha512 function");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ek.BASE,r=t.equals(ek.BASE)?t:new ek(t.x,t.y);return r._setWindowSize(e),r.multiply(zw),r},sha512Sync:void 0};Object.defineProperties(Bk,{sha512Sync:{configurable:!1,get:function(){return lk},set:function(e){lk||(lk=e)}}});var Uk=64,Mk=32;function zk(){return Fk.apply(this,arguments)}function Fk(){return(Fk=An(En().mark((function e(){var t,r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Bk.randomPrivateKey(),e.next=3,Ck(t);case 3:return r=e.sent,n=Wk(t,r),e.abrupt("return",{privateKey:n,publicKey:r});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vk(e){return jk.apply(this,arguments)}function jk(){return jk=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length===Mk){e.next=4;break}throw new TypeError('"seed" must be 32 bytes in length.');case 4:if(t instanceof Uint8Array){e.next=6;break}throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');case 6:return r=t,e.next=9,Ck(r);case 9:return n=e.sent,a=Wk(r,n),e.abrupt("return",{privateKey:a,publicKey:n});case 12:case"end":return e.stop()}}),e)}))),jk.apply(this,arguments)}function qk(e,t){return Kk.apply(this,arguments)}function Kk(){return(Kk=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.subarray(0,Mk),e.next=3,Tk(r,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hk(e,t,r){return Gk.apply(this,arguments)}function Gk(){return(Gk=An(En().mark((function e(t,r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nk(r,n,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wk(e,t){for(var r=new Uint8Array(Uk),n=0;n<Mk;n++)r[n]=e[n],r[Mk+n]=t[n];return r}var Yk=function(){function e(t){Cn(this,e),this._key=rx(t,32)}return Dn(e,[{key:"verify",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hk(this._key,r,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"marshal",value:function(){return this._key}},{key:"bytes",get:function(){return Qb.encode({Type:Wb.Ed25519,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return Pd(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=An(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yg.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Qk=function(){function e(t,r){Cn(this,e),this._key=rx(t,Uk),this._publicKey=rx(r,32)}return Dn(e,[{key:"sign",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qk(this._key,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"public",get:function(){return new Yk(this._publicKey)}},{key:"marshal",value:function(){return this._key}},{key:"bytes",get:function(){return Jb.encode({Type:Wb.Ed25519,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return Pd(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=An(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yg.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"id",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lw(this.public.bytes);case 2:return t=e.sent,e.abrupt("return",Pw.encode(t.bytes).substring(1));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=An(En().mark((function e(t){var r,n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("libp2p-key"!==(r=n.length>1&&void 0!==n[1]?n[1]:"libp2p-key")){e.next=7;break}return e.next=4,kw(this.bytes,t);case 4:return e.abrupt("return",e.sent);case 7:throw ca(new Error("export format '".concat(r,"' is not supported")),"ERR_INVALID_EXPORT_FORMAT");case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Jk(e){if(e.length>Uk){var t=(e=rx(e,96)).subarray(0,Uk),r=e.subarray(Uk,e.length);return new Qk(t,r)}var n=(e=rx(e,Uk)).subarray(0,Uk),a=e.subarray(32);return new Qk(n,a)}function Zk(e){return e=rx(e,32),new Yk(e)}function Xk(){return $k.apply(this,arguments)}function $k(){return($k=An(En().mark((function e(){var t,r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zk();case 2:return t=e.sent,r=t.privateKey,n=t.publicKey,e.abrupt("return",new Qk(r,n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ex(e){return tx.apply(this,arguments)}function tx(){return tx=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vk(t);case 2:return r=e.sent,n=r.privateKey,a=r.publicKey,e.abrupt("return",new Qk(n,a));case 6:case"end":return e.stop()}}),e)}))),tx.apply(this,arguments)}function rx(e,t){var r;if((e=Uint8Array.from(null!==(r=e)&&void 0!==r?r:[])).length!==t)throw ca(new Error("Key must be a Uint8Array of length ".concat(t,", got ").concat(e.length)),"ERR_INVALID_KEY_TYPE");return e}function nx(){return aw.randomPrivateKey()}function ax(e,t){return ix.apply(this,arguments)}function ix(){return ix=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yg.digest(r);case 2:return n=e.sent,a=n.digest,e.prev=4,e.next=7,Xm(a,t);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),ca(e.t0,"ERR_INVALID_INPUT");case 13:case"end":return e.stop()}}),e,null,[[4,10]])}))),ix.apply(this,arguments)}function ox(e,t,r){return sx.apply(this,arguments)}function sx(){return sx=An(En().mark((function e(t,r,n){var a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yg.digest(n);case 3:return a=e.sent,i=a.digest,e.abrupt("return",tw(r,i,t));case 8:throw e.prev=8,e.t0=e.catch(0),ca(e.t0,"ERR_INVALID_INPUT");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),sx.apply(this,arguments)}function ux(e){try{ym.fromHex(e)}catch(eL){throw ca(eL,"ERR_INVALID_PUBLIC_KEY")}}var cx=function(){function e(t){Cn(this,e),ux(t),this._key=t}return Dn(e,[{key:"verify",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ox(this._key,r,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"marshal",value:function(){return e=this._key,ym.fromHex(e).toRawBytes(!0);var e}},{key:"bytes",get:function(){return Qb.encode({Type:Wb.Secp256k1,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return Pd(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=An(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yg.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),lx=function(){function e(t,r){Cn(this,e),this._key=t,this._publicKey=null!==r&&void 0!==r?r:function(e){try{return Gm(e,!0)}catch(eL){throw ca(eL,"ERR_INVALID_PRIVATE_KEY")}}(t),function(e){try{Gm(e,!0)}catch(eL){throw ca(eL,"ERR_INVALID_PRIVATE_KEY")}}(this._key),ux(this._publicKey)}return Dn(e,[{key:"sign",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ax(this._key,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"public",get:function(){return new cx(this._publicKey)}},{key:"marshal",value:function(){return this._key}},{key:"bytes",get:function(){return Jb.encode({Type:Wb.Secp256k1,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return Pd(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=An(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yg.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"id",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.public.hash();case 2:return t=e.sent,e.abrupt("return",kh(t,"base58btc"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=An(En().mark((function e(t){var r,n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("libp2p-key"!==(r=n.length>1&&void 0!==n[1]?n[1]:"libp2p-key")){e.next=7;break}return e.next=4,kw(this.bytes,t);case 4:return e.abrupt("return",e.sent);case 7:throw ca(new Error("export format '".concat(r,"' is not supported")),"ERR_INVALID_EXPORT_FORMAT");case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function fx(e){return new lx(e)}function hx(e){return new cx(e)}function px(){return dx.apply(this,arguments)}function dx(){return(dx=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nx();case 2:return t=e.sent,e.abrupt("return",new lx(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vx={rsa:G,ed25519:W,secp256k1:Y};function yx(e){var t=Object.keys(vx).join(" / ");return ca(new Error("invalid or unsupported key type ".concat(e,". Must be ").concat(t)),"ERR_UNSUPPORTED_KEY_TYPE")}function bx(e){if("rsa"===(e=e.toLowerCase())||"ed25519"===e||"secp256k1"===e)return vx[e];throw yx(e)}function gx(e,t){return mx.apply(this,arguments)}function mx(){return mx=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bx(t).generateKeyPair(null!==r&&void 0!==r?r:2048);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}function wx(e){var t,r,n=Qb.decode(e),a=null!==(t=n.Data)&&void 0!==t?t:new Uint8Array;switch(n.Type){case Wb.RSA:return vx.rsa.unmarshalRsaPublicKey(a);case Wb.Ed25519:return vx.ed25519.unmarshalEd25519PublicKey(a);case Wb.Secp256k1:return vx.secp256k1.unmarshalSecp256k1PublicKey(a);default:throw yx(null!==(r=n.Type)&&void 0!==r?r:"RSA")}}function kx(e,t){var r;return bx(t=(null!==(r=t)&&void 0!==r?r:"rsa").toLowerCase()),e.bytes}function xx(e){return _x.apply(this,arguments)}function _x(){return _x=An(En().mark((function e(t){var r,n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Jb.decode(t),i=null!==(r=a.Data)&&void 0!==r?r:new Uint8Array,e.t0=a.Type,e.next=e.t0===Wb.RSA?5:e.t0===Wb.Ed25519?8:e.t0===Wb.Secp256k1?9:10;break;case 5:return e.next=7,vx.rsa.unmarshalRsaPrivateKey(i);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",vx.ed25519.unmarshalEd25519PrivateKey(i));case 9:return e.abrupt("return",vx.secp256k1.unmarshalSecp256k1PrivateKey(i));case 10:throw yx(null!==(n=a.Type)&&void 0!==n?n:"RSA");case 11:case"end":return e.stop()}}),e)}))),_x.apply(this,arguments)}function Ex(e,t){var r;return bx(t=(null!==(r=t)&&void 0!==r?r:"rsa").toLowerCase()),e.bytes}function Sx(e,t){return Ax.apply(this,arguments)}function Ax(){return(Ax=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sg(t,r);case 3:return n=e.sent,e.next=6,xx(n);case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0);case 11:if(null!==(a=ig.pki.decryptRsaPrivateKey(t,r))){e.next=14;break}throw ca(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");case 14:return i=Bf((i=ig.asn1.toDer(ig.pki.privateKeyToAsn1(a))).getBytes(),"ascii"),e.next=18,vx.rsa.unmarshalRsaPrivateKey(i);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var Cx=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Ix=Cx,Tx=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Dx=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),Rx=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Nx(this,e)}}]),e}(),Px=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return Nx(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Nx=function(e,t){return new Px(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},Lx=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Dx(t,r,n),this.decoder=new Rx(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Ox=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new Lx(t,r,n,a)},Bx=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Ix(n,r),i=a.encode,o=a.decode;return Ox({prefix:t,name:r,encode:i,decode:function(e){return Tx(o(e))}})},Ux=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return Ox({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},Mx=Ux({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),zx=Ux({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Fx=Ux({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Vx=Ux({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),jx=Ux({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),qx=Ux({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Kx=Ux({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Hx=Ux({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Gx=Ux({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Wx="ERR_UNRECOGNIZED_VALIDITY",Yx="ERR_SIGNATURE_VERIFICATION",Qx="ERR_UNDEFINED_PARAMETER",Jx=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Zx;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Zx=Math.pow(2,31);var Xx=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var $x=Math.pow(2,7),e_=Math.pow(2,14),t_=Math.pow(2,21),r_=Math.pow(2,28),n_=Math.pow(2,35),a_=Math.pow(2,42),i_=Math.pow(2,49),o_=Math.pow(2,56),s_=Math.pow(2,63),u_={encode:Jx,decode:Xx,encodingLength:function(e){return e<$x?1:e<e_?2:e<t_?3:e<r_?4:e<n_?5:e<a_?6:e<i_?7:e<o_?8:e<s_?9:10}},c_=u_,l_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=c_.decode(e,t);return[r,c_.decode.bytes]},f_=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return c_.encode(e,t,r),t},h_=function(e){return c_.encodingLength(e)},p_=function(e,t){var r=t.byteLength,n=h_(e),a=n+h_(r),i=new Uint8Array(a+r);return f_(e,i,0),f_(r,i,n),i.set(t,a),new v_(e,r,t,i)},d_=function(e){var t=Tx(e),r=Ia(l_(t),2),n=r[0],a=r[1],i=Ia(l_(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new v_(n,o,u,t)},v_=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),y_=Bx({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),b_=Bx({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),g_=function(e,t){var r=e.bytes;return 0===e.version?__(r,w_(e),t||y_.encoder):E_(r,w_(e),t||Mx.encoder)},m_=new WeakMap,w_=function(e){var t=m_.get(e);if(null==t){var r=new Map;return m_.set(e,r),r}return t},k_=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==S_)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==A_)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=p_(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return g_(this,e)}},{key:"toJSON",value:function(){return{"/":g_(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||C_(n,a,i.bytes))}if(!0===t[I_]){var o=t.version,s=t.multihash,u=t.code,c=d_(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==S_)throw new Error("Version 0 CID must use dag-pb (code: ".concat(S_,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,C_(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,S_,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=Tx(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new v_(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(l_(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=S_;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(x_(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return w_(o).set(a,e),o}}]),r}(),x_=function(e,t){switch(e[0]){case"Q":var r=t||y_;return[y_.prefix,r.decode("".concat(y_.prefix).concat(e))];case y_.prefix:var n=t||y_;return[y_.prefix,n.decode(e)];case Mx.prefix:var a=t||Mx;return[Mx.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},__=function(e,t,r){var n=r.prefix;if(n!==y_.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},E_=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},S_=112,A_=18,C_=function(e,t,r){var n=h_(e),a=n+h_(t),i=new Uint8Array(a+r.byteLength);return f_(e,i,0),f_(t,i,n),i.set(r,a),i},I_=Symbol.for("@ipld/js-cid/CID"),T_=Ox({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),D_=Ux({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),R_=Ux({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),P_=Bx({prefix:"9",name:"base10",alphabet:"0123456789"}),N_=Ux({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),L_=Ux({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),O_=Bx({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),B_=Bx({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),U_=Ux({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),M_=Ux({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),z_=Ux({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),F_=Ux({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),V_=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),j_=V_.reduce((function(e,t,r){return e[r]=t,e}),[]),q_=V_.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var K_,H_=Ox({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=j_[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=q_[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),G_=function(e){var t=e.name,r=e.code,n=e.encode;return new W_(t,r,n)},W_=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?p_(this.code,r):r.then((function(e){return p_(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),Y_=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Q_=G_({name:"sha2-256",code:18,encode:Y_("SHA-256")}),J_=G_({name:"sha2-512",code:19,encode:Y_("SHA-512")}),Z_=Tx,X_={code:0,name:"identity",encode:Z_,digest:function(e){return p_(0,Z_(e))}},$_="raw",eE=85,tE=function(e){return Tx(e)},rE=function(e){return Tx(e)},nE=new TextEncoder,aE=new TextDecoder,iE="json",oE=512,sE=function(e){return nE.encode(JSON.stringify(e))},uE=function(e){return JSON.parse(aE.decode(e))},cE=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},Z),X),$),ee),te),Q),re),J),ne),ae),lE=(jn(jn({},ie),oe),Symbol.for("nodejs.util.inspect.custom")),fE=Object.values(cE).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),cE.identity.decoder),hE=function(e){function t(e){Cn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:fb,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=y_.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return k_.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return Pd(this.multihash.bytes,e);if("string"===typeof e)return function(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:fE,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=d_(y_.decode("z".concat(e)));return e.startsWith("12D")?new dE({multihash:n}):e.startsWith("16U")?new vE({multihash:n}):new pE({multihash:n})}return yE(fE.decode(e))}(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Pd(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:lE,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),pE=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Dn(r)}(hE),dE=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Dn(r)}(hE),vE=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Dn(r)}(hE);function yE(e){try{var t=d_(e);if(t.code===X_.code){if(36===t.digest.length)return new dE({multihash:t});if(37===t.digest.length)return new vE({multihash:t})}if(t.code===Q_.code)return new pE({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===Q_.code)return new pE({multihash:e.multihash});if(t.code===X_.code){if(36===t.digest.length)return new dE({multihash:e.multihash});if(37===t.digest.length)return new vE({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(k_.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function bE(e,t){return gE.apply(this,arguments)}function gE(){return(gE=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(36!==t.length){e.next=2;break}return e.abrupt("return",new dE({multihash:p_(X_.code,t),privateKey:r}));case 2:if(37!==t.length){e.next=4;break}return e.abrupt("return",new vE({multihash:p_(X_.code,t),privateKey:r}));case 4:return e.t0=pE,e.next=7,Q_.digest(t);case 7:return e.t1=e.sent,e.t2=t,e.t3=r,e.t4={multihash:e.t1,publicKey:e.t2,privateKey:e.t3},e.abrupt("return",new e.t0(e.t4));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){var t,r;!function(e){e.EOL="EOL"}(e.ValidityType||(e.ValidityType={})),function(e){e[e.EOL=0]="EOL"}(t||(t={})),function(e){e.codec=function(){return ng(t)}}(e.ValidityType||(e.ValidityType={})),e.codec=function(){return null==r&&(r=ag((function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==n.lengthDelimited&&r.fork(),null!=t.value&&(r.uint32(10),r.bytes(t.value)),null!=t.signature&&(r.uint32(18),r.bytes(t.signature)),null!=t.validityType&&(r.uint32(24),e.ValidityType.codec().encode(t.validityType,r)),null!=t.validity&&(r.uint32(34),r.bytes(t.validity)),null!=t.sequence&&(r.uint32(40),r.uint64(t.sequence)),null!=t.ttl&&(r.uint32(48),r.uint64(t.ttl)),null!=t.pubKey&&(r.uint32(58),r.bytes(t.pubKey)),null!=t.signatureV2&&(r.uint32(66),r.bytes(t.signatureV2)),null!=t.data&&(r.uint32(74),r.bytes(t.data)),!1!==n.lengthDelimited&&r.ldelim()}),(function(t,r){for(var n={},a=null==r?t.len:t.pos+r;t.pos<a;){var i=t.uint32();switch(i>>>3){case 1:n.value=t.bytes();break;case 2:n.signature=t.bytes();break;case 3:n.validityType=e.ValidityType.codec().decode(t);break;case 4:n.validity=t.bytes();break;case 5:n.sequence=t.uint64();break;case 6:n.ttl=t.uint64();break;case 7:n.pubKey=t.bytes();break;case 8:n.signatureV2=t.bytes();break;case 9:n.data=t.bytes();break;default:t.skipType(7&i)}}return n}))),r},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(K_||(K_={}));var mE=ua("ipns:utils"),wE=Bf("/ipns/");function kE(e){var t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(null==r)throw new Error("Invalid format");var n=parseInt(r[1],10),a=parseInt(r[2],10)-1,i=parseInt(r[3],10),o=parseInt(r[4],10),s=parseInt(r[5],10),u=parseInt(r[6],10),c=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,a,i,o,s,u,c))}var xE=function(){var e=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r&&null!=t){e.next=4;break}throw n=new Error("one or more of the provided parameters are not defined"),mE.error(n),ca(n,Qx);case 4:if(null==r.pubKey){e.next=20;break}e.prev=5,a=wx(r.pubKey),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(5),mE.error(e.t0),e.t0;case 13:return e.next=15,bE(r.pubKey);case 15:if(e.sent.equals(t)){e.next=18;break}throw ca(new Error("Embedded public key did not match PeerID"),"ERR_INVALID_EMBEDDED_KEY");case 18:e.next=21;break;case 20:null!=t.publicKey&&(a=wx(t.publicKey));case 21:if(null==a){e.next=23;break}return e.abrupt("return",a);case 23:throw ca(new Error("no public key is available"),Qx);case 24:case"end":return e.stop()}}),e,null,[[5,9]])})));return function(t,r){return e.apply(this,arguments)}}(),_E=function(e,t,r){return ld([e,r,Bf(t)])},EE=function(e){return ld([Bf("ipns-signature:"),e])},SE=function(e){var t,r,n,a,i,o,s=K_.decode(e);return null!=s.sequence&&(s.sequence=BigInt(s.sequence)),null!=s.ttl&&(s.ttl=BigInt(s.ttl)),{value:null!==(t=s.value)&&void 0!==t?t:new Uint8Array(0),signature:null!==(r=s.signature)&&void 0!==r?r:new Uint8Array(0),validityType:null!==(n=s.validityType)&&void 0!==n?n:K_.ValidityType.EOL,validity:null!==(a=s.validity)&&void 0!==a?a:new Uint8Array(0),sequence:null!==(i=s.sequence)&&void 0!==i?i:0n,pubKey:s.pubKey,ttl:null!==(o=s.ttl)&&void 0!==o?o:void 0,signatureV2:s.signatureV2,data:s.data}},AE=function(e){return ld([wE,e.toBytes()])},CE=function(e){return yE(e.slice(wE.length))},IE=function(e,t,r,n,a){if(r!==K_.ValidityType.EOL)throw ca(new Error("Unknown validity type"),Wx);return Os({Value:e,Validity:t,ValidityType:0,Sequence:n,TTL:a})},TE=ua("ipns"),DE=X_.code,RE="/ipns/",PE=RE.length,NE=function(){var e=An(En().mark((function e(t,r,n,a){var i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Vb(Date.now()+Number(a)),o=K_.ValidityType.EOL,s=a.toString().split("."),u=Ia(s,2),c=u[0],l=u[1],f=BigInt(c)*BigInt(1e5)+BigInt(null!==l&&void 0!==l?l:"0"),e.next=6,LE(t,r,n,o,i,f);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),LE=function(){var e=An(En().mark((function e(t,r,n,a,i,o){var s,u,c,l,f,h,p,d;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=BigInt(n),s=Bf(i.toString()),null!=t.privateKey){e.next=4;break}throw ca(new Error("Missing private key"),"ERR_MISSING_PRIVATE_KEY");case 4:return e.next=6,xx(t.privateKey);case 6:return u=e.sent,e.next=9,BE(u,r,a,s);case 9:return c=e.sent,l=IE(r,s,a,n,o),f=EE(l),e.next=14,u.sign(f);case 14:return h=e.sent,p={value:r,signature:c,validityType:a,validity:s,sequence:n,ttl:o,signatureV2:h,data:l},null!=t.publicKey&&((d=d_(t.toBytes())).code===DE&&Pd(t.publicKey,d.digest)||(p.pubKey=t.publicKey)),TE("ipns entry for %b created",r),e.abrupt("return",p);case 19:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,o){return e.apply(this,arguments)}}(),OE=function(e){return new Hv("/ipns/".concat(function(e){return zx.encode(e).slice(1)}(e)))},BE=function(){var e=An(En().mark((function e(t,r,n,a){var i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=_E(r,n,a),e.next=4,t.sign(i);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),TE.error("record signature creation failed",e.t0),ca(new Error("record signature creation failed"),"ERR_SIGNATURE_CREATION");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n,a){return e.apply(this,arguments)}}(),UE=ua("ipfs:ipns:publisher"),ME=Fb().code,zE=36e5,FE=function(){function e(t,r){Cn(this,e),this._routing=t,this._datastore=r}return Dn(e,[{key:"publishWithEOL",value:function(){var e=An(En().mark((function e(t,r,n,a){var i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._updateOrCreateRecord(t,r,n,a);case 2:return i=e.sent,e.abrupt("return",this._putRecordToRouting(i,t,a));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"publish",value:function(e,t,r){return this.publishWithEOL(e,t,zE,r)}},{key:"_putRecordToRouting",value:function(){var e=An(En().mark((function e(t,r,n){var a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hb(r)){e.next=4;break}throw a="peerId received is not valid",UE.error(a),ca(new Error(a),"ERR_INVALID_PEER_ID");case 4:if(null!=r.publicKey){e.next=6;break}throw ca(new Error("Public key was missing"),"ERR_MISSING_PUBLIC_KEY");case 6:return i=AE(r),e.next=9,this._publishEntry(i,t,n);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_publishEntry",value:function(){var e=An(En().mark((function e(t,r,n){var a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._routing.put(t,r,n);case 3:return a=e.sent,UE("ipns record for ".concat(kh(t,"base32")," was stored in the routing")),e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),i="ipns record for ".concat(kh(t,"base32")," could not be stored in the routing - ").concat(e.t0.stack),UE.error(i),UE.error(e.t0),ca(new Error(i),"ERR_PUTTING_TO_ROUTING");case 14:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_getPublished",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:{},hb(t)){e.next=5;break}throw n="peerId received is not valid",UE.error(n),ca(new Error(n),"ERR_INVALID_PEER_ID");case 5:return a=!1!==r.checkRouting,e.prev=6,e.next=9,this._datastore.get(OE(t.toBytes()));case 9:return i=e.sent,e.abrupt("return",this._unmarshalData(i));case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===ME){e.next=19;break}throw o="unexpected error getting the ipns record ".concat(t.toString()," from datastore"),UE.error(o),ca(new Error(o),"ERR_UNEXPECTED_DATASTORE_RESPONSE");case 19:if(a){e.next=21;break}throw ca(e.t0,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");case 21:return e.prev=21,s=AE(t),e.next=25,this._routing.get(s);case 25:return u=e.sent,e.abrupt("return",this._unmarshalData(u));case 29:throw e.prev=29,e.t1=e.catch(21),UE.error(e.t1),e.t1;case 33:case"end":return e.stop()}}),e,this,[[6,13],[21,29]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_unmarshalData",value:function(e){try{return SE(e)}catch(eL){throw ca(eL,"ERR_INVALID_RECORD_DATA")}}},{key:"_updateOrCreateRecord",value:function(){var e=An(En().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,h,p;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hb(t)){e.next=4;break}throw i="peerId received is not valid",UE.error(i),ca(new Error(i),"ERR_INVALID_PEER_ID");case 4:return o={checkRouting:!0},e.prev=5,e.next=8,this._getPublished(t,o);case 8:s=e.sent,e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(5),e.t0.code===ME){e.next=17;break}throw u="unexpected error when determining the last published IPNS record for ".concat(t.toString()," ").concat(e.t0.stack),UE.error(u),ca(new Error(u),"ERR_DETERMINING_PUBLISHED_RECORD");case 17:return c=0n,s&&void 0!==s.sequence&&(c=Pd(s.value,r)?s.sequence:s.sequence+BigInt(1)),e.prev=19,e.next=22,NE(t,r,c,n);case 22:l=e.sent,e.next=30;break;case 25:throw e.prev=25,e.t1=e.catch(19),f="ipns record for ".concat(r," could not be created"),UE.error(e.t1),ca(new Error(f),"ERR_CREATING_IPNS_RECORD");case 30:return e.prev=30,d=l,h=K_.encode(d),e.next=34,this._datastore.put(OE(t.toBytes()),h,a);case 34:return UE("ipns record for ".concat(kh(r,"base32")," was stored in the datastore")),e.abrupt("return",h);case 38:throw e.prev=38,e.t2=e.catch(30),p="ipns record for ".concat(r," could not be stored in the datastore"),UE.error(p),ca(new Error(p),"ERR_STORING_IN_DATASTORE");case 43:case"end":return e.stop()}var d}),e,this,[[5,11],[19,25],[30,38]])})));return function(t,r,n,a){return e.apply(this,arguments)}}()}]),e}();FE.defaultRecordLifetime=zE;var VE=ua("ipfs:ipns:republisher"),jE=function(){function e(t,r,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{pass:""};Cn(this,e),this._publisher=t,this._datastore=r,this._peerId=n,this._keychain=a,this._options=i,this._republishHandle=null}return Dn(e,[{key:"start",value:function(){var e=An(En().mark((function e(){var t,r,n,a=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._republishHandle){e.next=2;break}throw ca(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");case 2:t={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:function(e){t._timeoutId=setTimeout(An(En().mark((function r(){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t._timeoutId=null,r.prev=1,t._inflightTask=t._task(),r.next=5,t._inflightTask;case 5:t._task&&t.runPeriodically(e),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),VE.error(r.t0);case 11:case"end":return r.stop()}}),r,null,[[1,8]])}))),e())},cancel:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=t._timeoutId&&clearTimeout(t._timeoutId),t._task=null,e.next=4,t._inflightTask;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},r=this._options.pass,n=!0,t._task=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Uf.TimeoutController(3e4),e.prev=1,e.next=4,a._republishEntries(a._peerId,r,{signal:t.signal});case 4:return e.prev=4,t.clear(),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])}))),t.runPeriodically((function(){return n?(n=!1,a._options.initialBroadcastInterval||6e4):a._options.broadcastInterval||144e5})),this._republishHandle=t;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._republishHandle){e.next=3;break}throw ca(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");case 3:return this._republishHandle=null,e.next=6,t.cancel();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_republishEntries",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._republishEntry(t,n);case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),"cannot republish entry for the node's private key",VE.error("cannot republish entry for the node's private key"),e.abrupt("return");case 10:if(!r){e.next=48;break}return e.prev=11,e.next=14,this._keychain.listKeys();case 14:a=e.sent,i=Ni(a),e.prev=16,i.s();case 18:if((o=i.n()).done){e.next=35;break}if("self"!==(s=o.value).name){e.next=22;break}return e.abrupt("continue",33);case 22:return e.next=24,this._keychain.exportKey(s.name,r);case 24:return u=e.sent,e.next=27,Sx(u,r);case 27:return c=e.sent,e.next=30,xb(c.public.bytes,c.bytes);case 30:return l=e.sent,e.next=33,this._republishEntry(l,n);case 33:e.next=18;break;case 35:e.next=40;break;case 37:e.prev=37,e.t1=e.catch(16),i.e(e.t1);case 40:return e.prev=40,i.f(),e.finish(40);case 43:e.next=48;break;case 45:e.prev=45,e.t2=e.catch(11),VE.error(e.t2);case 48:case"end":return e.stop()}}),e,this,[[0,5],[11,45],[16,37,40,43]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_republishEntry",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._getPreviousValue(t);case 3:return n=e.sent,e.next=6,this._publisher.publishWithEOL(t,n,864e5,r);case 6:e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(0),"ERR_NO_ENTRY_FOUND"!==e.t0.code){e.next=12;break}return e.abrupt("return");case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getPreviousValue",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hb(t)){e.next=2;break}throw ca(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");case 2:return e.prev=2,e.next=5,this._datastore.get(OE(t.toBytes()));case 5:if((r=e.sent)instanceof Uint8Array){e.next=8;break}throw ca(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");case 8:return e.prev=8,n=SE(r),e.abrupt("return",n.value);case 13:throw e.prev=13,e.t0=e.catch(8),VE.error(e.t0),ca(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD");case 17:e.next=24;break;case 19:if(e.prev=19,e.t1=e.catch(2),!e.t1||!e.t1.notFound){e.next=23;break}throw ca(new Error("no previous entry for record with id: ".concat(t.toString())),"ERR_NO_ENTRY_FOUND");case 23:throw e.t1;case 24:case"end":return e.stop()}}),e,this,[[2,19],[8,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),qE=ua("ipns:validator"),KE=function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.value,a=r.validityType,i=r.validity,null==r.signatureV2||null==r.data){e.next=7;break}s=r.signatureV2,o=EE(r.data),HE(r),e.next=8;break;case 7:throw ca(new Error("missing data or signatureV2"),Yx);case 8:return e.prev=8,e.next=11,t.verify(o,s);case 11:u=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),u=!1;case 17:if(u){e.next=20;break}throw qE.error("record signature verification failed"),ca(new Error("record signature verification failed"),Yx);case 20:if(null==i||a!==K_.ValidityType.EOL){e.next=34;break}e.prev=21,c=kE(kh(i)),e.next=29;break;case 25:throw e.prev=25,e.t1=e.catch(21),qE.error("unrecognized validity format (not an rfc3339 format)"),ca(new Error("unrecognized validity format (not an rfc3339 format)"),"ERR_UNRECOGNIZED_FORMAT");case 29:if(!(c.getTime()<Date.now())){e.next=32;break}throw qE.error("record has expired"),ca(new Error("record has expired"),"ERR_IPNS_EXPIRED_RECORD");case 32:e.next=37;break;case 34:if(null==a){e.next=37;break}throw qE.error("unrecognized validity type"),ca(new Error("unrecognized validity type"),Wx);case 37:qE("ipns entry for %b is valid",n);case 38:case"end":return e.stop()}}),e,null,[[8,14],[21,25]])})));return function(t,r){return e.apply(this,arguments)}}(),HE=function(e){if(null==e.data)throw ca(new Error("Record data is missing"),"ERR_INVALID_RECORD_DATA");var t=function(e){var t=Vs(e);if(0!==t.ValidityType)throw ca(new Error("Unknown validity type"),Wx);return t.ValidityType=K_.ValidityType.EOL,Number.isInteger(t.Sequence)&&(t.Sequence=BigInt(t.Sequence)),Number.isInteger(t.TTL)&&(t.TTL=BigInt(t.TTL)),t}(e.data);if(!Pd(t.Value,e.value))throw ca(new Error('Field "value" did not match between protobuf and CBOR'),Yx);if(!Pd(t.Validity,e.validity))throw ca(new Error('Field "validity" did not match between protobuf and CBOR'),Yx);if(t.ValidityType!==e.validityType)throw ca(new Error('Field "validityType" did not match between protobuf and CBOR'),Yx);if(t.Sequence!==e.sequence)throw ca(new Error('Field "sequence" did not match between protobuf and CBOR'),Yx);if(t.TTL!==e.ttl)throw ca(new Error('Field "ttl" did not match between protobuf and CBOR'),Yx)},GE=function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=CE(t),a=SE(r),e.next=4,xE(n,a);case 4:return i=e.sent,e.next=7,KE(i,a);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),WE=ua("ipfs:ipns:resolver"),YE=Fb().code,QE=function(){function e(t){Cn(this,e),this._routing=t}return Dn(e,[{key:"resolve",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:{},"string"===typeof t){e.next=3;break}throw ca(new Error("invalid name"),"ERR_INVALID_NAME");case 3:if(n=r.recursive&&"true"===r.recursive.toString(),3===(a=t.split("/")).length&&""===a[0]){e.next=7;break}throw ca(new Error("invalid name"),"ERR_INVALID_NAME");case 7:return i=a[2],o=1/0,n&&(o=32),e.next=12,this.resolver(i,o,r);case 12:return s=e.sent,WE("".concat(t," was locally resolved correctly")),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resolver",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r){e.next=4;break}throw a="could not resolve name (recursion limit of ".concat(32," exceeded)"),WE.error(a),ca(new Error(a),"ERR_RESOLVE_RECURSION_LIMIT");case 4:return e.next=6,this._resolveName(t,n);case 6:if(i=e.sent,"ipfs"!==(o=i.split("/"))[1]&&r){e.next=10;break}return e.abrupt("return",i);case 10:return e.abrupt("return",this.resolver(o[2],r-1,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_resolveName",value:function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kb(t),a=AE(n),e.prev=2,e.next=5,this._routing.get(a,r);case 5:i=e.sent,e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(2),WE.error("could not get record from routing",e.t0),e.t0.code!==YE){e.next=13;break}throw ca(new Error("record requested for ".concat(t," was not found in the network")),"ERR_NO_RECORD_FOUND");case 13:throw ca(new Error("unexpected error getting the ipns record ".concat(n.toString())),"ERR_UNEXPECTED_ERROR_GETTING_RECORD");case 14:return e.abrupt("return",this._validateRecord(n,i));case 15:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_validateRecord",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GE(ld([Bf("/ipns/"),t.toBytes()]),r);case 2:return n=SE(r),e.abrupt("return",kh(n.value));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),JE=function(){function e(t){Cn(this,e),this.lru=hy(t)}return Dn(e,[{key:"get",value:function(e){var t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}},{key:"set",value:function(e,t,r){this.lru.set(e,{value:t,expire:Date.now()+r})}},{key:"has",value:function(e){return!!this.get(e)}},{key:"remove",value:function(e){this.lru.remove(e)}},{key:"clear",value:function(){this.lru.clear()}}]),e}(),ZE=ua("ipfs:ipns"),XE=6e4,$E=function(){function e(t,r,n,a,i){Cn(this,e),this.publisher=new FE(t,r),this.republisher=new jE(this.publisher,r,n,a,i),this.resolver=new QE(t),this.cache=new JE(1e3),this.routing=t}return Dn(e,[{key:"publish",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]?u[2]:FE.defaultRecordLifetime,a=u.length>3?u[3]:void 0,e.prev=2,e.next=5,this.publisher.publishWithEOL(t,r,n,a);case 5:return ZE("IPNS value ".concat(kh(r,"base32")," was published correctly")),i=t.toString(),o=parseFloat(n),s=o<XE?o:XE,this.cache.set(i,r,s),ZE("IPNS value ".concat(kh(r,"base32")," was cached correctly")),e.abrupt("return",{name:i,value:r});case 14:throw e.prev=14,e.t0=e.catch(2),ZE.error(e.t0),e.t0;case 18:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"resolve",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},"string"===typeof t){e.next=3;break}throw ca(new Error("name received is not valid"),"ERR_INVALID_NAME");case 3:if(r.nocache||r.recursive){e.next=8;break}if(n=t.split("/")[2],!(a=this.cache.get(n))){e.next=8;break}return e.abrupt("return",a);case 8:return e.prev=8,e.next=11,this.resolver.resolve(t,r);case 11:return i=e.sent,ZE("IPNS record from ".concat(t," was resolved correctly")),e.abrupt("return",i);case 16:throw e.prev=16,e.t0=e.catch(8),ZE.error(e.t0),e.t0;case 20:case"end":return e.stop()}}),e,this,[[8,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeKeyspace",value:function(){var e=An(En().mark((function e(t,r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.publish(t,r,FE.defaultRecordLifetime,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}();function eS(e){return tS.apply(this,arguments)}function tS(){return tS=An(En().mark((function e(t){var r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=!1,a=!1,e.prev=3,o=zn(t);case 5:return e.next=7,o.next();case 7:if(!(n=!(s=e.sent).done)){e.next=13;break}u=s.value,r.push(u);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])}))),tS.apply(this,arguments)}var rS=function(e,t){return Hn(En().mark((function r(){var n;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Mf(eS(e));case 2:return n=r.sent,r.delegateYield(Cb(zn(n.sort(t))),"t0",4);case 4:case"end":return r.stop()}}),r)})))()};function nS(e){return aS.apply(this,arguments)}function aS(){return aS=An(En().mark((function e(t){var r,n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=zn(t);case 4:return e.next=6,i.next();case 6:if(!(r=!(o=e.sent).done)){e.next=11;break}o.value;case 8:r=!1,e.next=4;break;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),n=!0,a=e.t0;case 17:if(e.prev=17,e.prev=18,!r||null==i.return){e.next=22;break}return e.next=22,i.return();case 22:if(e.prev=22,!n){e.next=25;break}throw a;case 25:return e.finish(22);case 26:return e.finish(17);case 27:case"end":return e.stop()}}),e,null,[[2,13,17,27],[18,,22,26]])}))),aS.apply(this,arguments)}function iS(e,t){return oS.apply(this,arguments)}function oS(){return oS=Hn(En().mark((function e(t,r){var n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=zn(t);case 4:return e.next=6,Mf(o.next());case 6:if(!(n=!(s=e.sent).done)){e.next=16;break}return u=s.value,e.next=10,Mf(r(u));case 10:if(!e.sent){e.next=13;break}return e.next=13,u;case 13:n=!1,e.next=4;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),a=!0,i=e.t0;case 22:if(e.prev=22,e.prev=23,!n||null==o.return){e.next=27;break}return e.next=27,Mf(o.return());case 27:if(e.prev=27,!a){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(22);case 32:case"end":return e.stop()}}),e,null,[[2,18,22,32],[23,,27,31]])}))),oS.apply(this,arguments)}function sS(e,t){return uS.apply(this,arguments)}function uS(){return uS=Hn(En().mark((function e(t,r){var n,a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,!(r<1)){e.next=3;break}return e.abrupt("return");case 3:a=!1,i=!1,e.prev=5,s=zn(t);case 7:return e.next=9,Mf(s.next());case 9:if(!(a=!(u=e.sent).done)){e.next=19;break}return c=u.value,e.next=13,c;case 13:if(++n!==r){e.next=16;break}return e.abrupt("return");case 16:a=!1,e.next=7;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),i=!0,o=e.t0;case 25:if(e.prev=25,e.prev=26,!a||null==s.return){e.next=30;break}return e.next=30,Mf(s.return());case 30:if(e.prev=30,!i){e.next=33;break}throw o;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}}),e,null,[[5,21,25,35],[26,,30,34]])}))),uS.apply(this,arguments)}var cS=function(){function e(){Cn(this,e)}return Dn(e,[{key:"open",value:function(){return Promise.reject(new Error(".open is not implemented"))}},{key:"close",value:function(){return Promise.reject(new Error(".close is not implemented"))}},{key:"put",value:function(e,t,r){return Promise.reject(new Error(".put is not implemented"))}},{key:"get",value:function(e,t){return Promise.reject(new Error(".get is not implemented"))}},{key:"has",value:function(e,t){return Promise.reject(new Error(".has is not implemented"))}},{key:"delete",value:function(e,t){return Promise.reject(new Error(".delete is not implemented"))}},{key:"putMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(e);case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=15;break}return c=u.value,l=c.key,f=c.value,n.next=10,Mf(t.put(l,f,r));case 10:return n.next=12,{key:l,value:f};case 12:a=!1,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),i=!0,o=n.t0;case 21:if(n.prev=21,n.prev=22,!a||null==s.return){n.next=26;break}return n.next=26,Mf(s.return());case 26:if(n.prev=26,!i){n.next=29;break}throw o;case 29:return n.finish(26);case 30:return n.finish(21);case 31:case"end":return n.stop()}}),n,null,[[2,17,21,31],[22,,26,30]])})))()}},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(e);case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,t.get(c,r);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,Mf(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"deleteMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(e);case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=15;break}return c=u.value,n.next=10,Mf(t.delete(c,r));case 10:return n.next=12,c;case 12:a=!1,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),i=!0,o=n.t0;case 21:if(n.prev=21,n.prev=22,!a||null==s.return){n.next=26;break}return n.next=26,Mf(s.return());case 26:if(n.prev=26,!i){n.next=29;break}throw o;case 29:return n.finish(26);case 30:return n.finish(21);case 31:case"end":return n.stop()}}),n,null,[[2,17,21,31],[22,,26,30]])})))()}},{key:"batch",value:function(){var e=this,t=[],r=[];return{put:function(e,r){t.push({key:e,value:r})},delete:function(e){r.push(e)},commit:function(){var n=An(En().mark((function n(a){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,nS(e.putMany(t,a));case 2:return t=[],n.next=5,nS(e.deleteMany(r,a));case 5:r=[];case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}},{key:"_all",value:function(e,t){return Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("._all is not implemented");case 1:case"end":return e.stop()}}),e)})))()}},{key:"_allKeys",value:function(e,t){return Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("._allKeys is not implemented");case 1:case"end":return e.stop()}}),e)})))()}},{key:"query",value:function(e,t){var r=this._all(e,t);if(null!=e.prefix&&(r=iS(r,(function(t){return t.key.toString().startsWith(e.prefix)}))),Array.isArray(e.filters)&&(r=e.filters.reduce((function(e,t){return iS(e,t)}),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((function(e,t){return rS(e,t)}),r)),null!=e.offset){var n=0;r=iS(r,(function(){return n++>=e.offset}))}return null!=e.limit&&(r=sS(r,e.limit)),r}},{key:"queryKeys",value:function(e,t){var r=this._allKeys(e,t);if(null!=e.prefix&&(r=iS(r,(function(t){return t.toString().startsWith(e.prefix)}))),Array.isArray(e.filters)&&(r=e.filters.reduce((function(e,t){return iS(e,t)}),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((function(e,t){return rS(e,t)}),r)),null!=e.offset){var n=0;r=iS(r,(function(){return n++>=e.offset}))}return null!=e.limit&&(r=sS(r,e.limit)),r}}]),e}();function lS(e,t,r,n){var a={configurable:!0,enumerable:!0};return a[e]=n,Object.defineProperty(t,r,a)}var fS=function(){function e(t){if(Cn(this,e),!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}return Dn(e,[{key:"push",value:function(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}},{key:"shift",value:function(){var e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}},{key:"isEmpty",value:function(){return void 0===this.buffer[this.btm]}}]),e}(),hS=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Cn(this,e),this.hwm=null!==(t=r.splitLimit)&&void 0!==t?t:16,this.head=new fS(this.hwm),this.tail=this.head,this.size=0}return Dn(e,[{key:"calculateSize",value:function(e){return null!=(null===e||void 0===e?void 0:e.byteLength)?e.byteLength:1}},{key:"push",value:function(e){if(null!=(null===e||void 0===e?void 0:e.value)&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){var t=this.head;this.head=t.next=new fS(2*this.head.buffer.length),this.head.push(e)}}},{key:"shift",value:function(){var e,t=this.tail.shift();if(void 0===t&&null!=this.tail.next){var r=this.tail.next;this.tail.next=null,this.tail=r,t=this.tail.shift()}return null!=(null===(e=t)||void 0===e?void 0:e.value)&&(this.size-=this.calculateSize(t.value)),t}},{key:"isEmpty",value:function(){return this.head.isEmpty()}}]),e}();function pS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){var t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}};return dS(t,e)}function dS(e,t){var r,n,a,i,o,s,u=(t=null!==(r=t)&&void 0!==r?r:{}).onEnd,c=new hS,l=function(){var t=An(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.isEmpty()){t.next=2;break}return t.abrupt("return",e(c));case 2:if(!s){t.next=4;break}return t.abrupt("return",{done:!0});case 4:return t.next=6,new Promise((function(t,r){o=function(n){o=null,c.push(n);try{t(e(c))}catch(eL){r(eL)}return i}}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(e){return null!=o?o(e):(c.push(e),i)},h=function(e){var r;if(s)return i;if(!0!==(null===(r=t)||void 0===r?void 0:r.objectMode)&&null==(null===e||void 0===e?void 0:e.byteLength))throw new Error("objectMode was not true but tried to push non-Uint8Array value");return f({done:!1,value:e})},p=function(e){return s?i:(s=!0,null!=e?function(e){return c=new hS,null!=o?o({error:e}):(c.push({error:e}),i)}(e):f({done:!0}))};if(Mn(n={},Symbol.asyncIterator,(function(){return this})),Mn(n,"next",l),Mn(n,"return",(function(){return c=new hS,p(),{done:!0}})),Mn(n,"throw",(function(e){return p(e),{done:!0}})),Mn(n,"push",h),Mn(n,"end",p),lS("get",n,"readableLength",(function(){return c.size})),i=n,null==u)return i;var d=i;return Mn(a={},Symbol.asyncIterator,(function(){return this})),Mn(a,"next",(function(){return d.next()})),Mn(a,"throw",(function(e){return d.throw(e),null!=u&&(u(e),u=void 0),{done:!0}})),Mn(a,"return",(function(){return d.return(),null!=u&&(u(),u=void 0),{done:!0}})),Mn(a,"push",h),Mn(a,"end",(function(e){return d.end(e),null!=u&&(u(e),u=void 0),i})),lS("get",a,"readableLength",(function(){return d.readableLength})),i=a}var vS=ua("datastore:core:tiered"),yS=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this)).stores=e.slice(),n}return Dn(r,[{key:"open",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(this.stores.map((function(e){return e.open()})));case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),Ub(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=An(En().mark((function e(t,r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(this.stores.map((function(e){return e.put(t,r,n)})));case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),zb(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ni(this.stores),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=18;break}return i=a.value,e.prev=5,e.next=8,i.get(t,r);case 8:if(!(o=e.sent)){e.next=11;break}return e.abrupt("return",o);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),vS.error(e.t0);case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(1),n.e(e.t1);case 23:return e.prev=23,n.f(),e.finish(23);case 26:throw Fb();case 27:case"end":return e.stop()}}),e,this,[[1,20,23,26],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ni(this.stores),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=11;break}return i=a.value,e.next=7,i.has(t,r);case 7:if(!e.sent){e.next=9;break}return e.abrupt("return",!0);case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:return e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,this,[[1,13,16,19]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(this.stores.map((function(e){return e.delete(t,r)})));case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),Mb(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"putMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.stores.map((function(e){var t=pS({objectMode:!0});return nS(e.putMany(t,r)).catch((function(e){a=e})),t})),n.prev=1,o=!1,s=!1,n.prev=4,c=En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,!a){e.next=3;break}throw a;case 3:return i.forEach((function(e){return e.push(t)})),e.next=6,t;case 6:case"end":return e.stop()}}),e)})),l=zn(e);case 7:return n.next=9,Mf(l.next());case 9:if(!(o=!(f=n.sent).done)){n.next=14;break}return n.delegateYield(c(),"t0",11);case 11:o=!1,n.next=7;break;case 14:n.next=20;break;case 16:n.prev=16,n.t1=n.catch(4),s=!0,u=n.t1;case 20:if(n.prev=20,n.prev=21,!o||null==l.return){n.next=25;break}return n.next=25,Mf(l.return());case 25:if(n.prev=25,!s){n.next=28;break}throw u;case 28:return n.finish(25);case 29:return n.finish(20);case 30:return n.prev=30,i.forEach((function(e){return e.end()})),n.finish(30);case 33:case"end":return n.stop()}}),n,null,[[1,,30,33],[4,16,20,30],[21,,25,29]])})))()}},{key:"deleteMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.stores.map((function(e){var t=pS({objectMode:!0});return nS(e.deleteMany(t,r)).catch((function(e){a=e})),t})),n.prev=1,o=!1,s=!1,n.prev=4,c=En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,!a){e.next=3;break}throw a;case 3:return i.forEach((function(e){return e.push(t)})),e.next=6,t;case 6:case"end":return e.stop()}}),e)})),l=zn(e);case 7:return n.next=9,Mf(l.next());case 9:if(!(o=!(f=n.sent).done)){n.next=14;break}return n.delegateYield(c(),"t0",11);case 11:o=!1,n.next=7;break;case 14:n.next=20;break;case 16:n.prev=16,n.t1=n.catch(4),s=!0,u=n.t1;case 20:if(n.prev=20,n.prev=21,!o||null==l.return){n.next=25;break}return n.next=25,Mf(l.return());case 25:if(n.prev=25,!s){n.next=28;break}throw u;case 28:return n.finish(25);case 29:return n.finish(20);case 30:return n.prev=30,i.forEach((function(e){return e.end()})),n.finish(30);case 33:case"end":return n.stop()}}),n,null,[[1,,30,33],[4,16,20,30],[21,,25,29]])})))()}},{key:"close",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.stores.map((function(e){return e.close()})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"batch",value:function(){var e=this.stores.map((function(e){return e.batch()}));return{put:function(t,r){e.forEach((function(e){return e.put(t,r)}))},delete:function(t){e.forEach((function(e){return e.delete(t)}))},commit:function(){var t=An(En().mark((function t(r){var n,a,i;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Ni(e),t.prev=1,n.s();case 3:if((a=n.n()).done){t.next=9;break}return i=a.value,t.next=7,i.commit(r);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})));return function(e){return t.apply(this,arguments)}}()}}},{key:"query",value:function(e,t){return this.stores[this.stores.length-1].query(e,t)}},{key:"queryKeys",value:function(e,t){return this.stores[this.stores.length-1].queryKeys(e,t)}}]),r}(cS),bS=__webpack_require__(4250),gS=function(e,t){var r=t.map((function(e,t){return{entry:K_.decode(e),index:t}}));return r.sort((function(e,t){var r,n,a,i;if(null!=e.entry.signatureV2&&null==t.entry.signatureV2)return-1;if(null==e.entry.signatureV2&&null!=t.entry.signatureV2)return 1;var o=null!==(r=e.entry.sequence)&&void 0!==r?r:0n,s=null!==(n=t.entry.sequence)&&void 0!==n?n:0n;if(o>s)return-1;if(o<s)return 1;var u=null!==(a=e.entry.validity)&&void 0!==a?a:new Uint8Array(0),c=null!==(i=t.entry.validity)&&void 0!==i?i:new Uint8Array(0),l=kE(kh(u)),f=kE(kh(c));return l.getTime()>f.getTime()?-1:l.getTime()<f.getTime()?1:0})),r[0].index},mS="SHARDING";var wS=function(e){Pn(r,e);var t=Un(r);function r(){var e;return Cn(this,r),(e=t.call(this)).data={},e}return Dn(r,[{key:"open",value:function(){return Promise.resolve()}},{key:"close",value:function(){return Promise.resolve()}},{key:"put",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.data[t.toString()]=r;case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.has(t);case 2:if(e.sent){e.next=5;break}throw Fb();case 5:return e.abrupt("return",this.data[t.toString()]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0!==this.data[t.toString()]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.data[t.toString()];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_all",value:function(){var e=this;return Hn(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(Cb(zn(Object.entries(e.data).map((function(e){var t=Ia(e,2),r=t[0],n=t[1];return{key:new Hv(r),value:n}})))),"t0",1);case 1:case"end":return t.stop()}}),t)})))()}},{key:"_allKeys",value:function(){var e=this;return Hn(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(Cb(zn(Object.entries(e.data).map((function(e){var t=Ia(e,1)[0];return new Hv(t)})))),"t0",1);case 1:case"end":return t.stop()}}),t)})))()}}]),r}(cS);function kS(e,t){return xS.apply(this,arguments)}function xS(){return xS=Hn(En().mark((function e(t,r){var n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=zn(t);case 4:return e.next=6,Mf(o.next());case 6:if(!(n=!(s=e.sent).done)){e.next=13;break}return u=s.value,e.next=10,r(u);case 10:n=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,Mf(o.return());case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])}))),xS.apply(this,arguments)}function _S(){return ES.apply(this,arguments)}function ES(){return ES=Hn(En().mark((function e(){var t,r,n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];return a=pS({objectMode:!0}),Promise.resolve().then(An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(r.map(function(){var e=An(En().mark((function e(t){var r,n,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,o=zn(t);case 4:return e.next=6,o.next();case 6:if(!(r=!(s=e.sent).done)){e.next=12;break}u=s.value,a.push(u);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),n=!0,i=e.t0;case 18:if(e.prev=18,e.prev=19,!r||null==o.return){e.next=23;break}return e.next=23,o.return();case 23:if(e.prev=23,!n){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}()));case 3:a.end(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a.end(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),e.delegateYield(Cb(zn(a)),"t0",4);case 4:case"end":return e.stop()}}),e)}))),ES.apply(this,arguments)}var SS=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(;r.length>0;)e=r.shift()(e);return e},AS=function(e){return null!=e&&("function"===typeof e[Symbol.asyncIterator]||"function"===typeof e[Symbol.iterator]||"function"===typeof e.next)},CS=function(e){return null!=e&&"function"===typeof e.sink&&AS(e.source)},IS=function(e){return function(t){var r=e.sink(t);if(null!=r.then){var n=pS({objectMode:!0});r.then((function(){n.end()}),(function(e){n.end(e)}));var a=function(){var t=Hn(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(Cb(zn(e.source)),"t0",1);case 1:n.end();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return _S(n,a())}return e.source}};function TS(e){if(CS(e)){var t=e;e=function(){return t.source}}else if(AS(e)){var r=e;e=function(){return r}}for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var o=[e].concat(a);if(o.length>1&&CS(o[o.length-1])&&(o[o.length-1]=o[o.length-1].sink),o.length>2)for(var s=1;s<o.length-1;s++)CS(o[s])&&(o[s]=IS(o[s]));return SS.apply(void 0,su(o))}new Hv(mS),new Hv("_README");var DS="/record/";function RS(e){return kh(e,"base32")}function PS(e){("string"===typeof e||e instanceof String)&&(e=Bf(e.toString()));var t=kh(e,"base64url");return"".concat(DS).concat(t)}function NS(e){if(e.substring(0,DS.length)!==DS)throw new lb("topic received is not from a record","ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");return Bf(e.substring(DS.length),"base64url")}var LS,OS=ua("datastore-pubsub:publisher"),BS=function(e){Pn(r,e);var t=Un(r);function r(e,n,a,i,o,s){var u;if(Cn(this,r),u=t.call(this),!i)throw new lb("missing validator","ERR_INVALID_PARAMETERS");if("function"!==typeof i)throw new lb("missing validate function","ERR_INVALID_PARAMETERS");if("function"!==typeof o)throw new lb("missing select function","ERR_INVALID_PARAMETERS");if(s&&"function"!==typeof s)throw new lb("invalid subscriptionKeyFn received","ERR_INVALID_PARAMETERS");return u._pubsub=e,u._datastore=n,u._peerId=a,u._validator=i,u._selector=o,u._handleSubscriptionKeyFn=s,u._onMessage=u._onMessage.bind(On(u)),u._pubsub.addEventListener("message",u._onMessage),u}return Dn(r,[{key:"put",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=4;break}throw a="datastore key does not have a valid format",OS.error(a),new lb(a,"ERR_INVALID_DATASTORE_KEY");case 4:if(r instanceof Uint8Array){e.next=8;break}throw i="received value is not a Uint8Array",OS.error(i),new lb(i,"ERR_INVALID_VALUE_RECEIVED");case 8:return o=PS(t),OS("publish value for topic ".concat(o)),e.next=12,this._pubsub.publish(o,r);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=4;break}throw n="datastore key does not have a valid format",OS.error(n),new lb(n,"ERR_INVALID_DATASTORE_KEY");case 4:return a=PS(t),e.next=7,this._pubsub.getTopics();case 7:if(!((i=e.sent)&&Array.isArray(i)&&i.indexOf(a)>-1)){e.next=10;break}return e.abrupt("return",this._getLocal(t,r));case 10:return e.prev=10,e.next=13,this._pubsub.subscribe(a);case 13:e.next=20;break;case 15:throw e.prev=15,e.t0=e.catch(10),o="cannot subscribe topic ".concat(a),OS.error(o),new lb(o,"ERR_SUBSCRIBING_TOPIC");case 20:return OS("subscribed values for key ".concat(a)),e.abrupt("return",this._getLocal(t));case 22:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(e){var t=PS(e);return this._pubsub.unsubscribe(t)}},{key:"_getLocal",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Hv("/"+RS(t),!1),e.prev=1,e.next=4,this._datastore.get(n,r);case 4:a=e.sent,e.next=16;break;case 7:if(e.prev=7,e.t0=e.catch(1),"ERR_NOT_FOUND"===e.t0.code){e.next=13;break}throw i="unexpected error getting the ipns record for ".concat(n.toString()),OS.error(i),new lb(i,"ERR_UNEXPECTED_ERROR_GETTING_RECORD");case 13:throw o="local record requested was not found for ".concat(n.toString()),OS.error(o),new lb(o,"ERR_NOT_FOUND");case 16:if(a instanceof Uint8Array){e.next=20;break}throw s="found record that we couldn't convert to a value",OS.error(s),new lb(s,"ERR_INVALID_RECORD_RECEIVED");case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_onMessage",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signed"===(r=t.detail).type){e.next=4;break}return OS.error("unsigned message received, this module can only work with signed messages"),e.abrupt("return");case 4:n=r.data,a=r.from,i=r.topic,e.prev=5,o=NS(i),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(5),OS.error(e.t0),e.abrupt("return");case 13:if(OS("message received for topic ".concat(i)),!this._peerId.equals(a)){e.next=17;break}return OS("message discarded as it is from the same peer"),e.abrupt("return");case 17:if(!this._handleSubscriptionKeyFn){e.next=29;break}return e.prev=18,e.next=21,this._handleSubscriptionKeyFn(o);case 21:s=e.sent,e.next=28;break;case 24:return e.prev=24,e.t1=e.catch(18),OS.error("message discarded by the subscriptionKeyFn"),e.abrupt("return");case 28:o=s;case 29:return e.prev=29,e.next=32,this._storeIfSubscriptionIsBetter(o,n);case 32:e.next=37;break;case 34:e.prev=34,e.t2=e.catch(29),OS.error(e.t2);case 37:case"end":return e.stop()}}),e,this,[[5,9],[18,24],[29,34]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_storeIfSubscriptionIsBetter",value:function(){var e=An(En().mark((function e(t,r,n){var a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,e.prev=1,e.next=4,this._isBetter(t,r);case 4:a=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),"ERR_NOT_VALID_RECORD"===e.t0.code){e.next=11;break}throw e.t0;case 11:if(!a){e.next=14;break}return e.next=14,this._storeRecord(t,r,n);case 14:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_validateRecord",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._validator(t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_selectRecord",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._selector(t,r);case 2:return n=e.sent,e.abrupt("return",0===n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_isBetter",value:function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._validateRecord(t,r);case 3:e.next=10;break;case 5:throw e.prev=5,e.t0=e.catch(0),n="record received through pubsub is not valid",OS.error(n),new lb(n,"ERR_NOT_VALID_RECORD");case 10:return a=new Hv(t),e.prev=11,e.next=14,this._getLocal(a.uint8Array());case 14:i=e.sent,e.next=20;break;case 17:return e.prev=17,e.t1=e.catch(11),e.abrupt("return",!0);case 20:if(!Pd(i,r)){e.next=22;break}return e.abrupt("return",!1);case 22:return e.abrupt("return",this._selectRecord(t,[i,r]));case 23:case"end":return e.stop()}}),e,this,[[0,5],[11,17]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_storeRecord",value:function(){var e=An(En().mark((function e(t,r,n){var a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Hv("/"+RS(t),!1),e.next=3,this._datastore.put(a,r,n);case 3:OS("record for ".concat(PS(t)," was stored in the datastore"));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),r}(cS),US=ua("ipfs:ipns:pubsub"),MS=function(){function e(t,r,n){Cn(this,e),this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new BS(t,r,n,GE,gS,this._handleSubscriptionKey)}return Dn(e,[{key:"put",value:function(){var e=An(En().mark((function e(t,r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._pubsubDs.put(t,r,n);case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),US.error(e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._pubsubDs.get(t,r);case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a=e.t0;case 9:if(kh(t.slice(0,PE))===RE&&(i=oi.encode(t).substring(1),o=oi.encode(t.slice(PE)).substring(1),this._subscriptions[i]=o,US("subscribed to pubsub topic ".concat(i,", id ").concat(o))),!a){e.next=13;break}throw a;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_handleSubscriptionKey",value:function(e){e instanceof Uint8Array&&(e=kh(e,"base58btc"));var t=this._subscriptions[e];if(!t)throw ca(new Error("key ".concat(e," does not correspond to a subscription")),"ERR_INVALID_KEY");try{return AE(kb(t))}catch(eL){throw US.error(eL),eL}}},{key:"getSubscriptions",value:function(){return Object.values(this._subscriptions).filter(Boolean).map((function(e){return"".concat(RE).concat(e)}))}},{key:"cancel",value:function(){var e=An(En().mark((function e(t){var r,n,a=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t){e.next=2;break}throw ca(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");case 2:if(t.startsWith(RE)&&(t=t.substring(PE)),r=Object.keys(this._subscriptions).find((function(e){return a._subscriptions[e]===t}))){e.next=6;break}return e.abrupt("return",{canceled:!1});case 6:return n=Bf(r),this._pubsubDs.unsubscribe(n),delete this._subscriptions[r],US("unsubscribed pubsub ".concat(r,": ").concat(t)),e.abrupt("return",{canceled:!0});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function zS(e){var t=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0"),n=String(e.getUTCDate()).padStart(2,"0"),a=String(e.getUTCHours()).padStart(2,"0"),i=String(e.getUTCMinutes()).padStart(2,"0"),o=String(e.getUTCSeconds()).padStart(2,"0"),s=e.getUTCMilliseconds(),u=String(1e3*s*1e3).padStart(9,"0");return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(a,":").concat(i,":").concat(o,".").concat(u,"Z")}!function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.key&&e.key.byteLength>0)&&(t.uint32(10),t.bytes(e.key)),(!0===r.writeDefaults||null!=e.value&&e.value.byteLength>0)&&(t.uint32(18),t.bytes(e.value)),!0!==r.writeDefaults&&""===e.timeReceived||(t.uint32(42),t.string(e.timeReceived)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={key:new Uint8Array(0),value:new Uint8Array(0),timeReceived:""},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.key=e.bytes();break;case 2:r.value=e.bytes();break;case 5:r.timeReceived=e.string();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(LS||(LS={}));var FS=function(){function e(t,r,n){if(Cn(this,e),!(t instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(r instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=t,this.value=r,this.timeReceived=n}return Dn(e,[{key:"serialize",value:function(){return LS.encode(this.prepareSerialize())}},{key:"prepareSerialize",value:function(){return{key:this.key,value:this.value,timeReceived:zS(this.timeReceived)}}}],[{key:"deserialize",value:function(t){var r=LS.decode(t);return new e(r.key,r.value,new Date(r.timeReceived))}},{key:"fromDeserialized",value:function(t){var r=function(e){var t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(null==r)throw new Error("Invalid format");var n=parseInt(r[1],10),a=parseInt(r[2],10)-1,i=parseInt(r[3],10),o=parseInt(r[4],10),s=parseInt(r[5],10),u=parseInt(r[6],10),c=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,a,i,o,s,u,c))}(t.timeReceived);if(null==t.key)throw new Error("key missing from deserialized object");if(null==t.value)throw new Error("value missing from deserialized object");return new e(t.key,t.value,r)}}]),e}(),VS=ua("ipfs:ipns:offline-datastore"),jS=function(){function e(t){Cn(this,e),this._datastore=t,this.stores=[]}return Dn(e,[{key:"put",value:function(){var e=An(En().mark((function e(t,r,n){var a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw ca(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");case 2:if(r instanceof Uint8Array){e.next=4;break}throw ca(new Error("Offline datastore value must be a Uint8Array"),"ERR_INVALID_VALUE");case 4:e.prev=4,a=this._routingKey(t),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(4),VS.error(e.t0),ca(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY");case 12:return i=new FS(t,r,new Date),e.next=15,this._datastore.put(a,i.serialize(),n);case 15:case"end":return e.stop()}}),e,this,[[4,8]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw ca(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");case 2:e.prev=2,n=this._routingKey(t),e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(2),VS.error(e.t0),ca(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY");case 10:return e.next=12,this._datastore.get(n,r);case 12:a=e.sent,e.prev=13,i=FS.deserialize(a),e.next=21;break;case 17:throw e.prev=17,e.t1=e.catch(13),VS.error(e.t1),e.t1;case 21:return e.abrupt("return",i.value);case 22:case"end":return e.stop()}}),e,this,[[2,6],[13,17]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_routingKey",value:function(e){return new Hv("/dht/record/"+kh(e,"base32"),!1)}}]),e}(),qS=ua("ipfs:ipns:dht-datastore"),KS=function(){function e(t){Cn(this,e),this._dht=t}return Dn(e,[{key:"put",value:function(){var e=An(En().mark((function e(t,r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nS(this._dht.put(t,r,n));case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),qS.error(e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=zn(this._dht.get(t,r));case 4:return e.next=6,o.next();case 6:if(!(n=!(s=e.sent).done)){e.next=13;break}if("VALUE"!==(u=s.value).name){e.next=10;break}return e.abrupt("return",u.value);case 10:n=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:throw Fb();case 30:case"end":return e.stop()}}),e,this,[[2,15,19,29],[20,,24,28]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();function HS(e){var t,r=e.libp2p,n=e.repo,a=e.peerId,i=e.options,o=[];if(bS(i,"EXPERIMENTAL.ipnsPubsub",!1)&&(t=new MS(r.pubsub,n.datastore,a),o.push(t)),!0!==bS(i,"offline",!1)&&["dht","dhtclient","dhtserver"].includes(bS(i,"config.Routing.Type","none"))&&o.push(new KS(r.dht)),bS(i,"offline",!1)||0===o.length){var s=new jS(n.datastore);o.push(s)}return new yS(o)}var GS=ua("ipfs:components:ipns"),WS=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pass:""};Cn(this,e),this.options=t,this.offline=null,this.online=null}return Dn(e,[{key:"getIPNS",value:function(){var e=this.online||this.offline;if(e)return e;throw new tl}},{key:"routing",get:function(){return this.getIPNS().routing}},{key:"startOffline",value:function(e){var t=e.repo,r=e.peerId,n=e.keychain;if(null!=this.offline)throw new nl;GS("initializing IPNS keyspace (offline)");var a=new jS(t.datastore),i=new $E(a,t.datastore,r,n,this.options);this.offline=i}},{key:"startOnline",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.libp2p,n=t.repo,a=t.peerId,i=t.keychain,null==this.online){e.next=3;break}throw new nl;case 3:return o=HS({libp2p:r,repo:n,peerId:a,options:this.options}),s=new $E(o,n.datastore,a,i,this.options),e.next=7,s.republisher.start();case 7:this.online=s;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.online)){e.next=5;break}return e.next=4,t.republisher.stop();case 4:this.online=null;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"publish",value:function(e,t,r,n){return this.getIPNS().publish(e,t,r,n)}},{key:"resolve",value:function(e,t){return this.getIPNS().resolve(e,t)}},{key:"initializeKeyspace",value:function(e,t,r){return this.getIPNS().initializeKeyspace(e,t,r)}}]),e}();function YS(e,t,r){return QS.apply(this,arguments)}function QS(){return QS=An(En().mark((function e(t,r,n){var a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.ipns,i=t.repo,o=t.codecs,!Fv(r)){e.next=3;break}return e.abrupt("return",a.resolve(r));case 3:return s=ty(r),u=s.cid,c=s.path,e.next=6,nS(ly(u,c||"",o,i,n));case 6:case"end":return e.stop()}}),e)}))),QS.apply(this,arguments)}var JS=ua("ipfs:name:publish");var ZS=__webpack_require__(2882),XS=Gn.bind({ignoreUndefined:!0}),$S=ua("ipfs:name:resolve"),eA=function(e,t){return t.length>0?e+"/"+t.join("/"):e};function tA(e,t){if(!e||!t||!t.ipnsPubsub)throw ca(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(e.routing instanceof MS)return e.routing;var r=(e.routing.stores||[]).find((function(e){return e instanceof MS}));if(!r)throw ca(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return r}var rA=Dn((function e(t){var r=t.ipns,n=t.options;Cn(this,e),this.cancel=function(e){var t=e.ipns,r=e.options.EXPERIMENTAL;function n(){return n=An(En().mark((function e(n){var a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:{},i=tA(t,r),e.abrupt("return",i.cancel(n,a));case 3:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return $v((function(e){return n.apply(this,arguments)}))}({ipns:r,options:n}),this.state=function(e){var t=e.ipns,r=e.options.EXPERIMENTAL;function n(){return n=An(En().mark((function e(){var n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e.prev=1,e.abrupt("return",{enabled:Boolean(tA(t,r))});case 5:return e.prev=5,e.t0=e.catch(1),e.abrupt("return",{enabled:!1});case 8:case"end":return e.stop()}}),e,null,[[1,5]])}))),n.apply(this,arguments)}return $v((function(){return n.apply(this,arguments)}))}({ipns:r,options:n}),this.subs=function(e){var t=e.ipns,r=e.options.EXPERIMENTAL;function n(){return n=An(En().mark((function e(){var n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},a=tA(t,r),e.abrupt("return",a.getSubscriptions(n));case 3:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return $v((function(){return n.apply(this,arguments)}))}({ipns:r,options:n})})),nA=Dn((function e(t){var r=t.dns,n=t.ipns,a=t.repo,i=t.codecs,o=t.peerId,s=t.isOnline,u=t.keychain,c=t.options;Cn(this,e),this.publish=function(e){var t=e.ipns,r=e.repo,n=e.codecs,a=e.peerId,i=e.isOnline,o=e.keychain,s=function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("self"!==t||null==a.privateKey){e.next=6;break}return e.next=3,xx(a.privateKey);case 3:case 12:r=e.sent,e.next=19;break;case 6:return e.prev=6,e.next=9,o.exportKey(t,"temp");case 9:return n=e.sent,e.next=12,Sx(n,"temp");case 15:throw e.prev=15,e.t0=e.catch(6),JS.error(e.t0),ca(e.t0,"ERR_CANNOT_GET_KEY");case 19:return e.abrupt("return",xb(r.public.bytes,r.bytes));case 20:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}();function u(){return u=An(En().mark((function e(a){var o,u,c,l,f,h,p,d,v=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=v.length>1&&void 0!==v[1]?v[1]:{},u=!(!1===o.resolve),c=o.lifetime||"24h",l=o.key||"self",i()){e.next=6;break}throw ca(new Error(ry),"OFFLINE_ERROR");case 6:e.prev=6,a=iy(a),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(6),JS.error(e.t0),e.t0;case 14:f=0,e.prev=15,f=Zv(c)||0,f=parseFloat(f.toFixed(6)),e.next=24;break;case 20:throw e.prev=20,e.t1=e.catch(15),JS.error(e.t1),e.t1;case 24:return e.next=26,Promise.all([s(l),u?YS({ipns:t,repo:r,codecs:n},a):Promise.resolve()]);case 26:return h=e.sent,p=Bf(a),e.next=30,t.publish(h[0],p,f,o);case 30:return d=e.sent,e.abrupt("return",{name:d.name,value:kh(d.value)});case 32:case"end":return e.stop()}}),e,null,[[6,10],[15,20]])}))),u.apply(this,arguments)}return $v((function(e){return u.apply(this,arguments)}))}({ipns:n,repo:a,codecs:i,peerId:o,isOnline:s,keychain:u}),this.resolve=function(e){var t=e.dns,r=e.ipns,n=e.isOnline,a=e.options.offline;function i(){return i=Hn((function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function o(){var s,u,c,l,f,h,p,d,v,y,b;return En().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=XS({nocache:!1,recursive:!0},i),!(a&&i&&i.nocache)){o.next=3;break}throw ca(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");case 3:if(n()||a){o.next=5;break}throw ca(new Error(ry),"OFFLINE_ERROR");case 5:(s=e.toString()).startsWith("/ipns/")||(s="/ipns/".concat(s)),u=s.slice(1).split("/"),c=ub(u),l=c[0],f=c[1],h=c.slice(2),o.prev=8,"1"===f.substring(0,1)?(p=kb(f),d=Ya(p.toBytes()),v=wi.createV1(114,d),f=v.toString(Nc)):1===(y=wi.parse(f)).version&&(f=y.toString(Nc)),o.next=25;break;case 12:if(o.prev=12,o.t0=o.catch(8),!ZS(f)){o.next=23;break}return o.t1=eA,o.next=18,Mf(t(f,i));case 18:return o.t2=o.sent,o.t3=h,o.next=22,(0,o.t1)(o.t2,o.t3);case 22:return o.abrupt("return");case 23:throw $S.error(o.t0),ca(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME");case 25:return o.next=27,Mf(r.resolve("/".concat(l,"/").concat(f),i));case 27:return b=o.sent,o.next=30,eA(b instanceof Uint8Array?kh(b):b,h);case 30:case"end":return o.stop()}}),o,null,[[8,12]])}))()})),i.apply(this,arguments)}return $v((function(e){return i.apply(this,arguments)}))}({dns:r,ipns:n,isOnline:s,options:c}),this.pubsub=new rA({ipns:n,options:c})})),aA=Fb().code,iA="<dst>",oA="<src> -> <dst>";function sA(e,t,r){var n=ty(t),a=n.cid,i=n.path;return!1!==r.preload&&e(a),"/ipfs/".concat(a).concat(i||"")}function uA(e,t,r,n,a){return cA.apply(this,arguments)}function cA(){return cA=Hn(En().mark((function e(t,r,n,a,i){var o,s,u,c,l,f,h,p,d,v,y;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mf(t(a,i));case 2:o=e.sent,s=ty(o),u=s.cid,c=null!=i.maxDepth?i.maxDepth:1/0,l=i.unique||!1,f=!1,h=!1,e.prev=8,d=zn(fA(r,n,u,c,l,i));case 10:return e.next=12,Mf(d.next());case 12:if(!(f=!(v=e.sent).done)){e.next=23;break}if((y=v.value).parent){e.next=16;break}return e.abrupt("continue",20);case 16:if(!y.isDuplicate){e.next=18;break}return e.abrupt("continue",20);case 18:return e.next=20,{ref:lA(y.parent.cid,y.node.cid,y.node.name,i.format)};case 20:f=!1,e.next=10;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(8),h=!0,p=e.t0;case 29:if(e.prev=29,e.prev=30,!f||null==d.return){e.next=34;break}return e.next=34,Mf(d.return());case 34:if(e.prev=34,!h){e.next=37;break}throw p;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[8,25,29,39],[30,,34,38]])}))),cA.apply(this,arguments)}function lA(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:iA,a=n.replace(/<src>/g,e.toString());return a=(a=a.replace(/<dst>/g,t.toString())).replace(/<linkname>/g,r)}function fA(e,t,r,n,a,i){return hA.apply(this,arguments)}function hA(){return hA=Hn(En().mark((function e(t,r,n,a,i,o){var s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){return(c=Hn(En().mark((function e(n,c){var l,f,h,p,d,v,y;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((l=c+1)>a)){e.next=3;break}return e.abrupt("return");case 3:e.prev=3,f=!1,h=!1,e.prev=6,d=zn(pA(t,r,n.cid,o));case 8:return e.next=10,Mf(d.next());case 10:if(!(f=!(v=e.sent).done)){e.next=19;break}return y=v.value,e.next=14,{parent:n,node:y,isDuplicate:i&&s.has(y.cid.toString())};case 14:return i&&s.add(y.cid.toString()),e.delegateYield(Cb(zn(u(y,l))),"t0",16);case 16:f=!1,e.next=8;break;case 19:e.next=25;break;case 21:e.prev=21,e.t1=e.catch(6),h=!0,p=e.t1;case 25:if(e.prev=25,e.prev=26,!f||null==d.return){e.next=30;break}return e.next=30,Mf(d.return());case 30:if(e.prev=30,!h){e.next=33;break}throw p;case 33:return e.finish(30);case 34:return e.finish(25);case 35:e.next=41;break;case 37:throw e.prev=37,e.t2=e.catch(3),e.t2.code===aA&&(e.t2.message="Could not find object with CID: ".concat(n.cid)),e.t2;case 41:case"end":return e.stop()}}),e,null,[[3,37],[6,21,25,35],[26,,30,34]])})))).apply(this,arguments)},u=function(e,t){return c.apply(this,arguments)},s=new Set,e.delegateYield(Cb(zn(u({cid:n},0))),"t0",4);case 4:case"end":return e.stop()}}),e)}))),hA.apply(this,arguments)}function pA(e,t,r,n){return dA.apply(this,arguments)}function dA(){return dA=Hn(En().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,h,p,d,v;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mf(t.blocks.get(n,a));case 2:return i=e.sent,e.next=5,Mf(r.getCodec(n.code));case 5:o=e.sent,s=o.decode(i),u=n.code===eo,c=Ni(vA(s,[])),e.prev=10,c.s();case 12:if((l=c.n()).done){e.next=26;break}if(f=Ia(l.value,2),h=f[0],p=f[1],!u){e.next=22;break}if(!(d=h.match(/^Links\/(\d+)\/Hash$/))){e.next=22;break}if(!((v=Number(d[1]))<s.Links.length)){e.next=22;break}return e.next=21,{name:s.Links[v].Name,cid:p};case 21:return e.abrupt("continue",24);case 22:return e.next=24,{name:h,cid:p};case 24:e.next=12;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(10),c.e(e.t0);case 31:return e.prev=31,c.f(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[10,28,31,34]])}))),dA.apply(this,arguments)}var vA=En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h,p,d,v,y;return En().wrap((function(b){for(;;)switch(b.prev=b.next){case 0:if(null!=t){b.next=2;break}return b.abrupt("return");case 2:if(!(t instanceof Uint8Array)){b.next=4;break}return b.abrupt("return");case 4:n=0,a=Object.entries(t);case 5:if(!(n<a.length)){b.next=46;break}if(i=Ia(a[n],2),o=i[0],s=i[1],u=[].concat(su(r),[o]),null==s||"object"!==typeof s){b.next=43;break}if(!Array.isArray(s)){b.next=36;break}c=Ni(s.entries()),b.prev=11,c.s();case 13:if((l=c.n()).done){b.next=26;break}if(f=Ia(l.value,2),h=f[0],p=f[1],d=[].concat(su(u),[h]),!(v=wi.asCID(p))){b.next=22;break}return b.next=20,[d.join("/"),v];case 20:b.next=24;break;case 22:if("object"!==typeof p){b.next=24;break}return b.delegateYield(e(p,d),"t0",24);case 24:b.next=13;break;case 26:b.next=31;break;case 28:b.prev=28,b.t1=b.catch(11),c.e(b.t1);case 31:return b.prev=31,c.f(),b.finish(31);case 34:b.next=43;break;case 36:if(!(y=wi.asCID(s))){b.next=42;break}return b.next=40,[u.join("/"),y];case 40:b.next=43;break;case 42:return b.delegateYield(e(s,u),"t2",43);case 43:n++,b.next=5;break;case 46:return b.abrupt("return",[]);case 47:case"end":return b.stop()}}),e,null,[[11,28,31,34]])}));function yA(e){var t=e.repo;function r(){return r=Hn((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En().mark((function r(){var n,a,i,o,s,u;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,a=!1,r.prev=2,o=zn(t.blocks.queryKeys({},{signal:e.signal}));case 4:return r.next=6,Mf(o.next());case 6:if(!(n=!(s=r.sent).done)){r.next=13;break}return u=s.value,r.next=10,{ref:u.toString()};case 10:n=!1,r.next=4;break;case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(2),a=!0,i=r.t0;case 19:if(r.prev=19,r.prev=20,!n||null==o.return){r.next=24;break}return r.next=24,Mf(o.return());case 24:if(r.prev=24,!a){r.next=27;break}throw i;case 27:return r.finish(24);case 28:return r.finish(19);case 29:case"end":return r.stop()}}),r,null,[[2,15,19,29],[20,,24,28]])}))()})),r.apply(this,arguments)}return $v((function(){return r.apply(this,arguments)}))}function bA(e){var t=e.network;function r(){return r=An(En().mark((function e(){var r,n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,t.use(r);case 3:return n=e.sent.bitswap,a=n.stat().snapshot,e.abrupt("return",{provideBufLen:parseInt(a.providesBufferLength.toString()),blocksReceived:BigInt(a.blocksReceived.toString()),wantlist:Array.from(n.getWantlist()).map((function(e){return e[1].cid})),peers:n.peers(),dupBlksReceived:BigInt(a.dupBlksReceived.toString()),dupDataReceived:BigInt(a.dupDataReceived.toString()),dataReceived:BigInt(a.dataReceived.toString()),blocksSent:BigInt(a.blocksSent.toString()),dataSent:BigInt(a.dataSent.toString())});case 6:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(){return r.apply(this,arguments)}))}var gA=Dn((function e(t){var r=t.network;Cn(this,e),this.wantlist=function(e){var t=e.network;function r(){return r=An(En().mark((function e(){var r,n,a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,t.use(r);case 3:return n=e.sent,a=n.bitswap,i=a.getWantlist(),e.abrupt("return",Array.from(i).map((function(e){return e[1].cid})));case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(){return r.apply(this,arguments)}))}({network:r}),this.wantlistForPeer=function(e){var t=e.network;function r(){return r=An(En().mark((function e(r){var n,a,i,o,s=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,t.use(n);case 3:return a=e.sent,i=a.bitswap,o=i.wantlistForPeer(r),e.abrupt("return",Array.from(o).map((function(e){return e[1].cid})));case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(e){return r.apply(this,arguments)}))}({network:r}),this.unwant=function(e){var t=e.network;function r(){return r=An(En().mark((function e(r){var n,a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,t.use(n);case 3:return a=e.sent,i=a.bitswap,Array.isArray(r)||(r=[r]),e.abrupt("return",i.unwant(r));case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(e){return r.apply(this,arguments)}))}({network:r}),this.stat=bA({network:r})}));function mA(e){try{return pv.matches(e)}catch(eL){return!1}}var wA,kA=Dn((function e(t){var r=t.repo;Cn(this,e),this.add=function(e){var t=e.repo;function r(){return r=An(En().mark((function e(r){var n,a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},mA(r)){e.next=3;break}throw new Error("".concat(r," is not a valid Multiaddr"));case 3:return e.next=5,t.config.getAll(n);case 5:return a=e.sent,(i=a.Bootstrap||[]).push(r.toString()),a.Bootstrap=Array.from(new Set(i)).sort((function(e,t){return e.localeCompare(t)})),e.next=11,t.config.replace(a);case 11:return e.abrupt("return",{Peers:[r]});case 12:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(e){return r.apply(this,arguments)}))}({repo:r}),this.list=function(e){var t=e.repo;function r(){return r=An(En().mark((function e(){var r,n,a=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,t.config.get("Bootstrap",r);case 3:return n=e.sent,e.abrupt("return",{Peers:(n||[]).map((function(e){return Gd(e)}))});case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(){return r.apply(this,arguments)}))}({repo:r}),this.rm=function(e){var t=e.repo;function r(){return r=An(En().mark((function e(r){var n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},mA(r)){e.next=3;break}throw new Error("".concat(r," is not a valid Multiaddr"));case 3:return e.next=5,t.config.getAll(n);case 5:return(a=e.sent).Bootstrap=(a.Bootstrap||[]).filter((function(e){return e.toString()!==r.toString()})),e.next=9,t.config.replace(a);case 9:return e.abrupt("return",{Peers:[r]});case 10:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(e){return r.apply(this,arguments)}))}({repo:r}),this.clear=function(e){var t=e.repo;function r(){return r=An(En().mark((function e(){var r,n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,t.config.getAll(r);case 3:return n=e.sent,a=n.Bootstrap||[],n.Bootstrap=[],e.next=8,t.config.replace(n);case 8:return e.abrupt("return",{Peers:a.map((function(e){return Gd(e)}))});case 9:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(){return r.apply(this,arguments)}))}({repo:r}),this.reset=function(e){var t=e.repo;function r(){return r=An(En().mark((function e(){var r,n,a=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,t.config.getAll(r);case 3:return(n=e.sent).Bootstrap=["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],e.next=7,t.config.replace(n);case 7:return e.abrupt("return",{Peers:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"].map((function(e){return Gd(e)}))});case 8:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(){return r.apply(this,arguments)}))}({repo:r})}));function xA(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}var _A=null!==(wA=globalThis.CustomEvent)&&void 0!==wA?wA:Event;function EA(e){return SA.apply(this,arguments)}function SA(){return SA=Hn((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function r(){var n,a,i,o,s,u,c,l,f,h,p,d,v,y,b;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:b=function(){var e,t;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!v()){r.next=21;break}e=0;case 2:if(!(e<c.length)){r.next=19;break}if(!c[e].done){r.next=16;break}if(t=c[e],c.splice(e,1),e--,!t.ok){r.next=12;break}return r.next=10,t.value;case 10:r.next=15;break;case 12:throw d=!0,l.resolve(),t.err;case 15:l.resolve();case 16:e++,r.next=2;break;case 19:r.next=0;break;case 21:case"end":return r.stop()}}),i)},y=function(){var e;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(c.length>0&&c[0].done)){t.next=14;break}if(e=c[0],c.shift(),!e.ok){t.next=8;break}return t.next=6,e.value;case 6:t.next=11;break;case 8:throw d=!0,l.resolve(),e.err;case 11:l.resolve(),t.next=0;break;case 14:case"end":return t.stop()}}),a)},v=function(){var e;return s?null===(e=c[0])||void 0===e?void 0:e.done:Boolean(c.find((function(e){return e.done})))},a=En().mark(y),i=En().mark(b),(o=null!==(n=t.concurrency)&&void 0!==n?n:1/0)<1&&(o=1/0),s=null!=t.ordered&&t.ordered,u=new EventTarget,c=[],l=xA(),f=xA(),h=!1,d=!1,u.addEventListener("task-complete",(function(){f.resolve()})),Promise.resolve().then(An(En().mark((function t(){var r,n,a,i,s,f;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=!1,n=!1,t.prev=3,i=En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,c.length!==o){e.next=5;break}return l=xA(),e.next=5,l.promise;case 5:if(!d){e.next=7;break}return e.abrupt("return","break");case 7:r={done:!1},c.push(r),t().then((function(e){r.done=!0,r.ok=!0,r.value=e,u.dispatchEvent(new _A("task-complete"))}),(function(e){r.done=!0,r.err=e,u.dispatchEvent(new _A("task-complete"))}));case 10:case"end":return e.stop()}}),e)})),s=zn(e);case 6:return t.next=8,s.next();case 8:if(!(r=!(f=t.sent).done)){t.next=16;break}return t.delegateYield(i(),"t0",10);case 10:if("break"!==t.t0){t.next=13;break}return t.abrupt("break",16);case 13:r=!1,t.next=6;break;case 16:t.next=22;break;case 18:t.prev=18,t.t1=t.catch(3),n=!0,a=t.t1;case 22:if(t.prev=22,t.prev=23,!r||null==s.return){t.next=27;break}return t.next=27,s.return();case 27:if(t.prev=27,!n){t.next=30;break}throw a;case 30:return t.finish(27);case 31:return t.finish(22);case 32:h=!0,u.dispatchEvent(new _A("task-complete")),t.next=40;break;case 36:t.prev=36,t.t2=t.catch(0),p=t.t2,u.dispatchEvent(new _A("task-complete"));case 40:case"end":return t.stop()}}),t,null,[[0,36],[3,18,22,32],[23,,27,31]])}))));case 15:if(v()){r.next=20;break}return f=xA(),r.next=20,Mf(f.promise);case 20:if(null==p){r.next=22;break}throw p;case 22:if(!s){r.next=26;break}return r.delegateYield(Cb(zn(y())),"t0",24);case 24:r.next=27;break;case 26:return r.delegateYield(Cb(zn(b())),"t1",27);case 27:if(!h||0!==c.length){r.next=29;break}return r.abrupt("break",31);case 29:r.next=15;break;case 31:case"end":return r.stop()}}),r)}))()})),SA.apply(this,arguments)}function AA(e){return e instanceof Uint8Array?wi.decode(e):wi.parse(e.toString())}var CA=Dn((function e(t){var r=t.codecs,n=t.hashers,a=t.preload,i=t.repo;Cn(this,e),this.get=function(e){var t=e.preload,r=e.repo;function n(){return n=An(En().mark((function e(n){var a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1!==(a=i.length>1&&void 0!==i[1]?i[1]:{}).preload&&t(n),e.abrupt("return",r.blocks.get(n,a));case 3:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return $v((function(e){return n.apply(this,arguments)}))}({preload:a,repo:i}),this.put=function(e){var t=e.codecs,r=e.hashers,n=e.repo,a=e.preload;function i(){return i=An(En().mark((function e(i){var o,s,u,c,l,f,h,p,d=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=d.length>1&&void 0!==d[1]?d[1]:{}).pin){e.next=7;break}return e.next=4,n.gcLock.readLock();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:return s=e.t0,e.prev=9,u=null!=o.version?o.version:0,c=o.format||(0===u?"dag-pb":"raw"),e.next=14,r.getHasher(o.mhtype||"sha2-256");case 14:return l=e.sent,e.next=17,l.digest(i);case 17:return f=e.sent,e.next=20,t.getCodec(c);case 20:return h=e.sent,p=wi.create(u,h.code,f),e.next=24,n.blocks.put(p,i,{signal:o.signal});case 24:if(!1!==o.preload&&a(p),!0!==o.pin){e.next=28;break}return e.next=28,n.pins.pinRecursively(p,{signal:o.signal});case 28:return e.abrupt("return",p);case 29:return e.prev=29,s&&s(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[9,,29,32]])}))),i.apply(this,arguments)}return $v((function(e){return i.apply(this,arguments)}))}({codecs:r,hashers:n,preload:a,repo:i}),this.rm=function(e){var t=e.repo;function r(){return r=Hn((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Array.isArray(e)||(e=[e]),n.next=3,Mf(t.gcLock.writeLock());case 3:return a=n.sent,n.prev=4,n.delegateYield(Cb(zn(TS(e,(function(e){return kS(e,(function(e){return An(En().mark((function n(){var a;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=AA(e),a={cid:e},n.prev=2,n.next=5,t.blocks.has(e);case 5:if(n.sent){n.next=8;break}throw ca(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");case 8:return n.next=10,t.blocks.delete(e);case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),r.force||(n.t0.message="cannot remove ".concat(e,": ").concat(n.t0.message),a.error=n.t0);case 15:return n.abrupt("return",a);case 16:case"end":return n.stop()}}),n,null,[[2,12]])})))}))}),(function(e){return EA(e,{concurrency:8})}),(function(e){return iS(e,(function(){return!r.quiet}))})))),"t0",6);case 6:return n.prev=6,a(),n.finish(6);case 9:case"end":return n.stop()}}),n,null,[[4,,6,9]])}))()})),r.apply(this,arguments)}return $v((function(e){return r.apply(this,arguments)}))}({repo:i}),this.stat=function(e){var t=e.repo,r=e.preload;function n(){return n=An(En().mark((function e(n){var a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:{},n=AA(n),!1!==a.preload&&r(n),e.next=5,t.blocks.get(n);case 5:return i=e.sent,e.abrupt("return",{cid:n,size:i.length});case 7:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return $v((function(e){return n.apply(this,arguments)}))}({preload:a,repo:i})}));function IA(e){return TA.apply(this,arguments)}function TA(){return TA=Hn((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function r(){var n,a;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=e.getReader(),r.prev=1;case 2:return r.next=5,Mf(n.read());case 5:if(!(a=r.sent).done){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,a.value;case 10:r.next=2;break;case 12:if(r.prev=12,!0===t.preventCancel){r.next=16;break}return r.next=16,Mf(n.cancel());case 16:return n.releaseLock(),r.finish(12);case 18:case"end":return r.stop()}}),r,null,[[1,,12,18]])}))()})),TA.apply(this,arguments)}function DA(e){return"function"===typeof e.stream?IA(e.stream()):IA(new Response(e).body)}function RA(e){var t=Ia(null!=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],2),r=t[0],n=t[1],a=[];return Mn({peek:function(){return r.next()},push:function(e){a.push(e)},next:function(){return a.length>0?{done:!1,value:a.shift()}:r.next()}},n,(function(){return this}))}function PA(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function NA(e){return e.constructor&&("Blob"===e.constructor.name||"File"===e.constructor.name)&&"function"===typeof e.stream}function LA(e){return"object"===typeof e&&(e.path||e.content)}var OA=function(e){return e&&"function"===typeof e.getReader};function BA(e){return UA.apply(this,arguments)}function UA(){return(UA=Hn(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MA(e){return zA.apply(this,arguments)}function zA(){return zA=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!PA(t)){e.next=2;break}return e.abrupt("return",BA(FA(t)));case 2:if(!("string"===typeof t||t instanceof String)){e.next=4;break}return e.abrupt("return",BA(FA(t.toString())));case 4:if(!NA(t)){e.next=6;break}return e.abrupt("return",DA(t));case 6:if(OA(t)&&(t=IA(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=27;break}return r=RA(t),e.next=11,r.peek();case 11:if(n=e.sent,a=n.value,!n.done){e.next=16;break}return e.abrupt("return",BA(new Uint8Array(0)));case 16:if(r.push(a),!Number.isInteger(a)){e.next=25;break}return e.t0=BA,e.t1=Uint8Array,e.next=22,eS(r);case 22:return e.t2=e.sent,e.t3=e.t1.from.call(e.t1,e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 25:if(!(PA(a)||"string"===typeof a||a instanceof String)){e.next=27;break}return e.abrupt("return",kS(r,FA));case 27:throw ca(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 28:case"end":return e.stop()}}),e)}))),zA.apply(this,arguments)}function FA(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):Bf(e.toString())}function VA(){return VA=Hn(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t){e.next=2;break}throw ca(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 2:if(!("string"===typeof t||t instanceof String)){e.next=6;break}return e.next=5,jA(t.toString(),r);case 5:case 9:case 21:case 26:case 31:return e.abrupt("return");case 6:if(!PA(t)&&!NA(t)){e.next=10;break}return e.next=9,jA(t,r);case 10:if(OA(t)&&(t=IA(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=28;break}return n=RA(t),e.next=15,Mf(n.peek());case 15:if(a=e.sent,i=a.value,!a.done){e.next=22;break}return e.next=21,{content:[]};case 22:if(n.push(i),!(Number.isInteger(i)||PA(i)||"string"===typeof i||i instanceof String)){e.next=27;break}return e.next=26,jA(n,r);case 27:throw ca(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT");case 28:if(!LA(t)){e.next=32;break}return e.next=31,jA(t,r);case 32:throw ca(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");case 33:case"end":return e.stop()}}),e)}))),VA.apply(this,arguments)}function jA(e,t){return qA.apply(this,arguments)}function qA(){return qA=An(En().mark((function e(t,r){var n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.path,a=t.mode,i=t.mtime,o=t.content,s={path:n||"",mode:ka(a),mtime:xa(i)},!o){e.next=8;break}return e.next=5,r(o);case 5:s.content=e.sent,e.next=12;break;case 8:if(n){e.next=12;break}return e.next=11,r(t);case 11:s.content=e.sent;case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)}))),qA.apply(this,arguments)}function KA(e){return function(e,t){return VA.apply(this,arguments)}(e,MA)}function HA(e){return GA.apply(this,arguments)}function GA(){return GA=Hn((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return En().mark((function r(){var n,a,i,o,s,u,c;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=[],t<1&&(t=1),a=!1,i=!1,r.prev=4,s=zn(e);case 6:return r.next=8,Mf(s.next());case 8:if(!(a=!(u=r.sent).done)){r.next=20;break}c=u.value,n.push(c);case 11:if(!(n.length>=t)){r.next=17;break}return r.next=14,n.slice(0,t);case 14:n=n.slice(t),r.next=11;break;case 17:a=!1,r.next=6;break;case 20:r.next=26;break;case 22:r.prev=22,r.t0=r.catch(4),i=!0,o=r.t0;case 26:if(r.prev=26,r.prev=27,!a||null==s.return){r.next=31;break}return r.next=31,Mf(s.return());case 31:if(r.prev=31,!i){r.next=34;break}throw o;case 34:return r.finish(31);case 35:return r.finish(26);case 36:if(!(n.length>0)){r.next=42;break}return r.next=39,n.slice(0,t);case 39:n=n.slice(t),r.next=36;break;case 42:case"end":return r.stop()}}),r,null,[[4,22,26,36],[27,,31,35]])}))()})),GA.apply(this,arguments)}function WA(e){return YA.apply(this,arguments)}function YA(){return YA=Hn((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return En().mark((function r(){var n,a,i,o,s,u,c,l,f;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,a=!1,r.prev=2,o=zn(HA(e,t));case 4:return r.next=6,Mf(o.next());case 6:if(!(n=!(s=r.sent).done)){r.next=26;break}u=s.value,c=u.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t().then((function(e){return{ok:!0,value:e}}),(function(e){return{ok:!1,err:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l=0;case 10:if(!(l<c.length)){r.next=23;break}return r.next=13,Mf(c[l]);case 13:if(!(f=r.sent).ok){r.next=19;break}return r.next=17,f.value;case 17:r.next=20;break;case 19:throw f.err;case 20:l++,r.next=10;break;case 23:n=!1,r.next=4;break;case 26:r.next=32;break;case 28:r.prev=28,r.t0=r.catch(2),a=!0,i=r.t0;case 32:if(r.prev=32,r.prev=33,!n||null==o.return){r.next=37;break}return r.next=37,Mf(o.return());case 37:if(r.prev=37,!a){r.next=40;break}throw i;case 40:return r.finish(37);case 41:return r.finish(32);case 42:case"end":return r.stop()}}),r,null,[[2,28,32,42],[33,,37,41]])}))()})),YA.apply(this,arguments)}new Uint8Array(0);var QA=function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},JA=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=ZA;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},ZA=Math.pow(2,31);var XA=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var $A=Math.pow(2,7),eC=Math.pow(2,14),tC=Math.pow(2,21),rC=Math.pow(2,28),nC=Math.pow(2,35),aC=Math.pow(2,42),iC=Math.pow(2,49),oC=Math.pow(2,56),sC=Math.pow(2,63),uC={encode:JA,decode:XA,encodingLength:function(e){return e<$A?1:e<eC?2:e<tC?3:e<rC?4:e<nC?5:e<aC?6:e<iC?7:e<oC?8:e<sC?9:10}},cC=uC,lC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=cC.decode(e,t);return[r,cC.decode.bytes]},fC=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return cC.encode(e,t,r),t},hC=function(e){return cC.encodingLength(e)},pC=function(e,t){var r=t.byteLength,n=hC(e),a=n+hC(r),i=new Uint8Array(a+r);return fC(e,i,0),fC(r,i,n),i.set(t,a),new dC(e,r,t,i)},dC=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),vC=function(e){var t=e.name,r=e.code,n=e.encode;return new yC(t,r,n)},yC=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?pC(this.code,r):r.then((function(e){return pC(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),bC=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},gC=vC({name:"sha2-256",code:18,encode:bC("SHA-256")}),mC=(vC({name:"sha2-512",code:19,encode:bC("SHA-512")}),new Uint8Array(0)),wC=function(e){var t=e.match(/../g);return t?new Uint8Array(t.map((function(e){return parseInt(e,16)}))):mC},kC=function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},xC=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=_C;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},_C=Math.pow(2,31);var EC=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var SC=Math.pow(2,7),AC=Math.pow(2,14),CC=Math.pow(2,21),IC=Math.pow(2,28),TC=Math.pow(2,35),DC=Math.pow(2,42),RC=Math.pow(2,49),PC=Math.pow(2,56),NC=Math.pow(2,63),LC={encode:xC,decode:EC,encodingLength:function(e){return e<SC?1:e<AC?2:e<CC?3:e<IC?4:e<TC?5:e<DC?6:e<RC?7:e<PC?8:e<NC?9:10}},OC=LC,BC=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return OC.encode(e,t,r),t},UC=function(e){return OC.encodingLength(e)},MC=function(e,t){var r=t.byteLength,n=UC(e),a=n+UC(r),i=new Uint8Array(a+r);return BC(e,i,0),BC(r,i,n),i.set(t,a),new zC(e,r,t,i)},zC=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),FC=function(e){var t=e.name,r=e.code,n=e.encode;return new VC(t,r,n)},VC=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?MC(this.code,r):r.then((function(e){return MC(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}();var jC=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},qC=jC,KC=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),HC=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return WC(this,e)}}]),e}(),GC=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return WC(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),WC=function(e,t){return new GC(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},YC=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new KC(t,r,n),this.decoder=new HC(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),QC=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new YC(t,r,n,a)},JC=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=qC(n,r),i=a.encode,o=a.decode;return QC({prefix:t,name:r,encode:i,decode:function(e){return kC(o(e))}})},ZC=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return QC({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},XC=(JC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),JC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ZC({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ZC({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ZC({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ZC({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ZC({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ZC({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ZC({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ZC({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ZC({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),new WeakMap,Symbol.for("@ipld/js-cid/CID"),__webpack_require__(9156));FC({name:"murmur3-32",code:35,encode:function(e){return function(e){for(var t=new Array(4),r=0;r<4;r++)t[r]=255&e,e>>=8;return new Uint8Array(t)}(XC.x86.hash32(e))}});var $C=FC({name:"murmur3-128",code:34,encode:function(e){return wC(XC.x64.hash128(e))}});FC({name:"murmur3-x64-64",code:34,encode:function(e){return wC(XC.x64.hash128(e)).subarray(0,8)}});function eI(){return eI=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$C.encode(t);case 2:return e.abrupt("return",e.sent.slice(0,8).reverse());case 3:case"end":return e.stop()}}),e)}))),eI.apply(this,arguments)}var tI={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:gC,leafType:"file",cidVersion:0,progress:function(){return function(){}},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:function(e){return eI.apply(this,arguments)},hamtHashCode:34,hamtBucketBits:8},rI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Gn.bind({ignoreUndefined:!0});return t(tI,e)};var nI=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},aI=nI,iI=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),oI=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return uI(this,e)}}]),e}(),sI=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return uI(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),uI=function(e,t){return new sI(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},cI=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new iI(t,r,n),this.decoder=new oI(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),lI=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new cI(t,r,n,a)},fI=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=aI(n,r),i=a.encode,o=a.decode;return lI({prefix:t,name:r,encode:i,decode:function(e){return QA(o(e))}})},hI=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return lI({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},pI=fI({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),dI=(fI({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),hI({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),vI=(hI({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hI({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hI({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),hI({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hI({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hI({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hI({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),hI({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),function(e,t){var r=e.bytes;return 0===e.version?wI(r,bI(e),t||pI.encoder):kI(r,bI(e),t||dI.encoder)}),yI=new WeakMap,bI=function(e){var t=yI.get(e);if(null==t){var r=new Map;return yI.set(e,r),r}return t},gI=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==xI)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==_I)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=pC(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return vI(this,e)}},{key:"toJSON",value:function(){return{"/":vI(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||EI(n,a,i.bytes))}if(!0===t[SI]){var o=t.version,s=t.multihash,u=t.code,c=function(e){var t=QA(e),r=Ia(lC(t),2),n=r[0],a=r[1],i=Ia(lC(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new dC(n,o,u,t)}(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==xI)throw new Error("Version 0 CID must use dag-pb (code: ".concat(xI,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,EI(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,xI,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=QA(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new dC(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(lC(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=xI;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(mI(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return bI(o).set(a,e),o}}]),r}(),mI=function(e,t){switch(e[0]){case"Q":var r=t||pI;return[pI.prefix,r.decode("".concat(pI.prefix).concat(e))];case pI.prefix:var n=t||pI;return[pI.prefix,n.decode(e)];case dI.prefix:var a=t||dI;return[dI.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},wI=function(e,t,r){var n=r.prefix;if(n!==pI.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},kI=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},xI=112,_I=18,EI=function(e,t,r){var n=hC(e),a=n+hC(t),i=new Uint8Array(a+r.byteLength);return fC(e,i,0),fC(t,i,n),i.set(r,a),i},SI=Symbol.for("@ipld/js-cid/CID"),AI=new TextDecoder;function CI(e,t){for(var r=0,n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");var a=e[t++];if(r+=n<28?(127&a)<<n:(127&a)*Math.pow(2,n),a<128)break}return[r,t]}function II(e,t){var r,n=Ia(CI(e,t),2);r=n[0];var a=(t=n[1])+r;if(r<0||a<0)throw new Error("protobuf: invalid length");if(a>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,a),a]}function TI(e,t){var r,n=Ia(CI(e,t),2);return[7&(r=n[0]),r>>3,t=n[1]]}function DI(e){for(var t={},r=e.length,n=0;n<r;){var a,i,o=Ia(TI(e,n),3);if(a=o[0],i=o[1],n=o[2],1===i){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Hash"));if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");var s=Ia(II(e,n),2);t.Hash=s[0],n=s[1]}else if(2===i){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Name"));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");var u,c=Ia(II(e,n),2);u=c[0],n=c[1],t.Name=AI.decode(u)}else{if(3!==i)throw new Error("protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ".concat(i));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Tsize"));var l=Ia(CI(e,n),2);t.Tsize=l[0],n=l[1]}}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}var RI=new TextEncoder,PI=Math.pow(2,32),NI=Math.pow(2,31);function LI(e,t){var r=t.length;if("number"===typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");t[r=UI(t,r,e.Tsize)-1]=24}if("string"===typeof e.Name){var n=RI.encode(e.Name);r-=n.length,t.set(n,r),t[r=UI(t,r,n.length)-1]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),t[r=UI(t,r,e.Hash.length)-1]=10),t.length-r}function OI(e){var t=function(e){var t=0;if(e.Data){var r=e.Data.length;t+=1+r+MI(r)}if(e.Links){var n,a=Ni(e.Links);try{for(a.s();!(n=a.n()).done;){var i=BI(n.value);t+=1+i+MI(i)}}catch(eL){a.e(eL)}finally{a.f()}}return t}(e),r=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),r[n=UI(r,n,e.Data.length)-1]=10),e.Links)for(var a=e.Links.length-1;a>=0;a--){var i=LI(e.Links[a],r.subarray(0,n));r[n=UI(r,n-=i,i)-1]=18}return r}function BI(e){var t=0;if(e.Hash){var r=e.Hash.length;t+=1+r+MI(r)}if("string"===typeof e.Name){var n=RI.encode(e.Name).length;t+=1+n+MI(n)}return"number"===typeof e.Tsize&&(t+=1+MI(e.Tsize)),t}function UI(e,t,r){for(var n=t-=MI(r);r>=NI;)e[t++]=127&r|128,r/=128;for(;r>=128;)e[t++]=127&r|128,r>>>=7;return e[t]=r,n}function MI(e){return e%2===0&&e++,Math.floor((function(e){var t=0;e>=PI&&(e=Math.floor(e/PI),t=32);e>=65536&&(e>>>=16,t+=16);e>=256&&(e>>>=8,t+=8);return t+zI[e]}(e)+6)/7)}var zI=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],FI=["Data","Links"],VI=["Hash","Name","Tsize"],jI=new TextEncoder;function qI(e,t){if(e===t)return 0;for(var r=e.Name?jI.encode(e.Name):[],n=t.Name?jI.encode(t.Name):[],a=r.length,i=n.length,o=0,s=Math.min(a,i);o<s;++o)if(r[o]!==n[o]){a=r[o],i=n[o];break}return a<i?-1:i<a?1:0}function KI(e,t){return!Object.keys(e).some((function(e){return!t.includes(e)}))}function HI(e){if("object"===typeof e.asCID){var t=gI.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");var r={};if(e.Hash){var n=gI.asCID(e.Hash);try{n||("string"===typeof e.Hash?n=gI.parse(e.Hash):e.Hash instanceof Uint8Array&&(n=gI.decode(e.Hash)))}catch(a){throw new TypeError("Invalid DAG-PB form: ".concat(a.message))}n&&(r.Hash=n)}if(!r.Hash)throw new TypeError("Invalid DAG-PB form");return"string"===typeof e.Name&&(r.Name=e.Name),"number"===typeof e.Tsize&&(r.Tsize=e.Tsize),r}function GI(e){if((e instanceof Uint8Array||"string"===typeof e)&&(e={Data:e}),"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");var t={};if(void 0!==e.Data)if("string"===typeof e.Data)t.Data=jI.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map(HI),t.Links.sort(qI)}else t.Links=[];return t}function WI(e){if(!e||"object"!==typeof e||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!KI(e,FI))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(var t=0;t<e.Links.length;t++){var r=e.Links[t];if(!r||"object"!==typeof r||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!KI(r,VI))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(void 0===r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(null==r.Hash||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==r.Name&&"string"!==typeof r.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==r.Tsize){if("number"!==typeof r.Tsize||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&-1===qI(r,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function YI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return GI({Data:e,Links:t})}function QI(e,t,r){return HI({Hash:r,Name:e,Tsize:t})}var JI="dag-pb",ZI=112;function XI(e){WI(e);var t={};return e.Links&&(t.Links=e.Links.map((function(e){var t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),e.Data&&(t.Data=e.Data),OI(t)}function $I(e){var t=function(e){for(var t,r,n=e.length,a=0,i=!1;a<n;){var o,s,u=Ia(TI(e,a),3);if(o=u[0],s=u[1],a=u[2],2!==o)throw new Error("protobuf: (PBNode) invalid wireType, expected 2, got ".concat(o));if(1===s){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");var c=Ia(II(e,a),2);r=c[0],a=c[1],t&&(i=!0)}else{if(2!==s)throw new Error("protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ".concat(s));if(i)throw new Error("protobuf: (PBNode) duplicate Links section");t||(t=[]);var l,f=Ia(II(e,a),2);l=f[0],a=f[1],t.push(DI(l))}}if(a>n)throw new Error("protobuf: (PBNode) unexpected end of data");var h={};return r&&(h.Data=r),h.Links=t||[],h}(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map((function(e){var t={};try{t.Hash=gI.decode(e.Hash)}catch(r){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),r}var eT=function(){var e=An(En().mark((function e(t,r,n){var a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.codec||(n.codec=ce),n.hasher||(n.hasher=gC),void 0===n.cidVersion&&(n.cidVersion=1),n.codec===ce&&n.hasher!==gC&&(n.cidVersion=1),e.next=6,n.hasher.digest(t);case 6:if(a=e.sent,i=gI.create(n.cidVersion,n.codec.code,a),n.onlyHash){e.next=11;break}return e.next=11,r.put(i,t,{signal:n.signal});case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),tT=eT,rT=function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new _a({type:"directory",mtime:t.mtime,mode:t.mode}),i=XI(GI({Data:a.marshal()})),e.next=4,tT(i,r,n);case 4:return o=e.sent,s=t.path,e.abrupt("return",{cid:o,path:s,unixfs:a,size:i.length});case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),nT=rT,aT="raw",iT=85,oT=function(e){return QA(e)},sT=function(e){return QA(e)};function uT(){return uT=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,eS(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),uT.apply(this,arguments)}var cT=function(e,t){return uT.apply(this,arguments)};function lT(e,t,r){return fT.apply(this,arguments)}function fT(){return fT=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],i=!1,o=!1,e.prev=3,u=zn(HA(t,n.maxChildrenPerNode));case 5:return e.next=7,u.next();case 7:if(!(i=!(c=e.sent).done)){e.next=17;break}return l=c.value,e.t0=a,e.next=12,r(l);case 12:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 14:i=!1,e.next=5;break;case 17:e.next=23;break;case 19:e.prev=19,e.t2=e.catch(3),o=!0,s=e.t2;case 23:if(e.prev=23,e.prev=24,!i||null==u.return){e.next=28;break}return e.next=28,u.return();case 28:if(e.prev=28,!o){e.next=31;break}throw s;case 31:return e.finish(28);case 32:return e.finish(23);case 33:if(!(a.length>1)){e.next=35;break}return e.abrupt("return",lT(a,r,n));case 35:return e.abrupt("return",a[0]);case 36:case"end":return e.stop()}}),e,null,[[3,19,23,33],[24,,28,32]])}))),fT.apply(this,arguments)}var hT=function(e,t,r){return lT(e,t,r)};function pT(){return pT=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,h,p;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new yT(n.layerRepeat),i=0,o=1,s=a,u=!1,c=!1,e.prev=6,f=zn(HA(t,n.maxChildrenPerNode));case 8:return e.next=10,f.next();case 10:if(!(u=!(h=e.sent).done)){e.next=26;break}if(p=h.value,!s.isFull()){e.next=22;break}if(s===a){e.next=19;break}return e.t0=a,e.next=17,s.reduce(r);case 17:e.t1=e.sent,e.t0.addChild.call(e.t0,e.t1);case 19:i&&i%n.layerRepeat===0&&o++,s=new vT(o,n.layerRepeat,i),i++;case 22:s.append(p);case 23:u=!1,e.next=8;break;case 26:e.next=32;break;case 28:e.prev=28,e.t2=e.catch(6),c=!0,l=e.t2;case 32:if(e.prev=32,e.prev=33,!u||null==f.return){e.next=37;break}return e.next=37,f.return();case 37:if(e.prev=37,!c){e.next=40;break}throw l;case 40:return e.finish(37);case 41:return e.finish(32);case 42:if(!s||s===a){e.next=48;break}return e.t3=a,e.next=46,s.reduce(r);case 46:e.t4=e.sent,e.t3.addChild.call(e.t3,e.t4);case 48:return e.abrupt("return",a.reduce(r));case 49:case"end":return e.stop()}}),e,null,[[6,28,32,42],[33,,37,41]])}))),pT.apply(this,arguments)}var dT=function(e,t,r){return pT.apply(this,arguments)},vT=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Cn(this,e),this.maxDepth=t,this.layerRepeat=r,this.currentDepth=1,this.iteration=n,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:t,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}return Dn(e,[{key:"isFull",value:function(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;var e=this._findParent(this.node,this.currentDepth);return!e||(this._addNextNodeToParent(e),!1)}},{key:"_addNextNodeToParent",value:function(e){this.parent=e;var t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t),this.currentDepth=t.depth,this.node=t}},{key:"append",value:function(e){this.node.data=e}},{key:"reduce",value:function(e){return this._reduce(this.root,e)}},{key:"_reduce",value:function(){var e=An(En().mark((function e(t,r){var n,a=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!t.children.length){e.next=5;break}return e.next=4,Promise.all(t.children.filter((function(e){return e.data})).map((function(e){return a._reduce(e,r)})));case 4:n=e.sent;case 5:return e.abrupt("return",r((t.data||[]).concat(n)));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_findParent",value:function(e,t){var r=e.parent;if(r&&0!==r.depth)return r.children.length!==r.maxChildren&&r.maxChildren?r:this._findParent(r,t)}}]),e}(),yT=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,0,e)).root.depth=0,n.currentDepth=1,n}return Dn(r,[{key:"addChild",value:function(e){this.root.children.push(e)}},{key:"reduce",value:function(e){return e((this.root.data||[]).concat(this.root.children))}}]),r}(vT);function bT(){return bT=Hn(En().mark((function e(t,r,n){var a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,i=!1,e.prev=2,s=En().mark((function e(){var a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.value,e.next=3,An(En().mark((function e(){var i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.progress(a.length,t.path),o={codec:ce,cidVersion:n.cidVersion,hasher:n.hasher,onlyHash:n.onlyHash},n.rawLeaves?(o.codec=le,o.cidVersion=1):(i=new _a({type:n.leafType,data:a}),a=XI({Data:i.marshal(),Links:[]})),e.next=5,tT(a,r,o);case 5:return e.t0=e.sent,e.t1=i,e.t2=a.length,e.abrupt("return",{cid:e.t0,unixfs:e.t1,size:e.t2});case 9:case"end":return e.stop()}}),e)})));case 3:case"end":return e.stop()}}),e)})),u=zn(t.content);case 5:return e.next=7,Mf(u.next());case 7:if(!(a=!(c=e.sent).done)){e.next=12;break}return e.delegateYield(s(),"t0",9);case 9:a=!1,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),i=!0,o=e.t1;case 18:if(e.prev=18,e.prev=19,!a||null==u.return){e.next=23;break}return e.next=23,Mf(u.return());case 23:if(e.prev=23,!i){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])}))),bT.apply(this,arguments)}var gT=function(e,t,r){return bT.apply(this,arguments)},mT={flat:cT,balanced:hT,trickle:dT};function wT(){return wT=Hn(En().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,h;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=-1,o="function"===typeof n.bufferImporter?n.bufferImporter:gT,s=!1,u=!1,e.prev=4,l=zn(WA(o(t,r,n),n.blockWriteConcurrency));case 6:return e.next=8,Mf(l.next());case 8:if(!(s=!(f=e.sent).done)){e.next=25;break}if(h=f.value,0!==++a){e.next=16;break}return i=h,e.abrupt("continue",22);case 16:if(1!==a||!i){e.next=20;break}return e.next=19,i;case 19:i=null;case 20:return e.next=22,h;case 22:s=!1,e.next=6;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(4),u=!0,c=e.t0;case 31:if(e.prev=31,e.prev=32,!s||null==l.return){e.next=36;break}return e.next=36,Mf(l.return());case 36:if(e.prev=36,!u){e.next=39;break}throw c;case 39:return e.finish(36);case 40:return e.finish(31);case 41:if(!i){e.next=45;break}return i.single=!0,e.next=45,i;case 45:case"end":return e.stop()}}),e,null,[[4,27,31,41],[32,,36,40]])}))),wT.apply(this,arguments)}var kT=function(e,t,r){var n=mT[r.strategy];if(!n)throw ca(new Error("Unknown importer build strategy name: ".concat(r.strategy)),"ERR_BAD_STRATEGY");return n(function(e,t,r){return wT.apply(this,arguments)}(e,t,r),function(e,t,r){function n(){return n=An(En().mark((function n(a){var i,o,s,u,c,l,f;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!==a.length||!a[0].single||!r.reduceSingleLeafToSelf){n.next=13;break}if(i=a[0],void 0===e.mtime&&void 0===e.mode){n.next=12;break}return n.next=5,t.get(i.cid);case 5:return o=n.sent,i.unixfs=new _a({type:"file",mtime:e.mtime,mode:e.mode,data:o}),o=XI(GI({Data:i.unixfs.marshal()})),n.next=10,tT(o,t,jn(jn({},r),{},{codec:ce,hasher:r.hasher,cidVersion:r.cidVersion}));case 10:i.cid=n.sent,i.size=o.length;case 12:return n.abrupt("return",{cid:i.cid,path:e.path,unixfs:i.unixfs,size:i.size});case 13:return s=new _a({type:"file",mtime:e.mtime,mode:e.mode}),u=a.filter((function(e){return!(e.cid.code!==iT||!e.size)||!(!e.unixfs||e.unixfs.data||!e.unixfs.fileSize())||Boolean(e.unixfs&&e.unixfs.data&&e.unixfs.data.length)})).map((function(e){return e.cid.code===iT?(s.addBlockSize(e.size),{Name:"",Tsize:e.size,Hash:e.cid}):(e.unixfs&&e.unixfs.data?s.addBlockSize(e.unixfs.data.length):s.addBlockSize(e.unixfs&&e.unixfs.fileSize()||0),{Name:"",Tsize:e.size,Hash:e.cid})})),c={Data:s.marshal(),Links:u},l=XI(GI(c)),n.next=19,tT(l,t,r);case 19:return f=n.sent,n.abrupt("return",{cid:f,path:e.path,unixfs:s,size:l.length+c.Links.reduce((function(e,t){return e+t.Tsize}),0)});case 21:case"end":return n.stop()}}),n)}))),n.apply(this,arguments)}return function(e){return n.apply(this,arguments)}}(e,t,r),r)},xT=Symbol.for("@achingbrain/uint8arraylist");function _T(e,t){if(null==t||t<0)throw new RangeError("index is out of bounds");var r,n=0,a=Ni(e);try{for(a.s();!(r=a.n()).done;){var i=r.value,o=n+i.byteLength;if(t<o)return{buf:i,index:t-n};n=o}}catch(eL){a.e(eL)}finally{a.f()}throw new RangeError("index is out of bounds")}function ET(e){return Boolean(null===e||void 0===e?void 0:e[xT])}var ST=function(e){function t(){Cn(this,t),Object.defineProperty(this,xT,{value:!0}),this.bufs=[],this.length=0;for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];r.length>0&&this.appendAll(r)}return Dn(t,[{key:Symbol.iterator,value:En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.bufs,"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"byteLength",get:function(){return this.length}},{key:"append",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.appendAll(t)}},{key:"appendAll",value:function(e){var t,r=0,n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a instanceof Uint8Array)r+=a.byteLength,this.bufs.push(a);else{if(!ET(a))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");var i;r+=a.byteLength,(i=this.bufs).push.apply(i,su(a.bufs))}}}catch(eL){n.e(eL)}finally{n.f()}this.length+=r}},{key:"prepend",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.prependAll(t)}},{key:"prependAll",value:function(e){var t,r=0,n=Ni(e.reverse());try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a instanceof Uint8Array)r+=a.byteLength,this.bufs.unshift(a);else{if(!ET(a))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");var i;r+=a.byteLength,(i=this.bufs).unshift.apply(i,su(a.bufs))}}}catch(eL){n.e(eL)}finally{n.f()}this.length+=r}},{key:"get",value:function(e){var t=_T(this.bufs,e);return t.buf[t.index]}},{key:"set",value:function(e,t){var r=_T(this.bufs,e);r.buf[r.index]=t}},{key:"write",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e instanceof Uint8Array)for(var r=0;r<e.length;r++)this.set(t+r,e[r]);else{if(!ET(e))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(var n=0;n<e.length;n++)this.set(t+n,e.get(n))}}},{key:"consume",value:function(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength)return this.bufs=[],void(this.length=0);for(;this.bufs.length>0;){if(!(e>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}},{key:"slice",value:function(e,t){var r=this._subList(e,t);return ld(r.bufs,r.length)}},{key:"subarray",value:function(e,t){var r=this._subList(e,t),n=r.bufs,a=r.length;return 1===n.length?n[0]:ld(n,a)}},{key:"sublist",value:function(e,r){var n=this._subList(e,r),a=n.bufs,i=n.length,o=new t;return o.length=i,o.bufs=a,o}},{key:"_subList",value:function(e,t){var r,n;if(e=null!==(r=e)&&void 0!==r?r:0,t=null!==(n=t)&&void 0!==n?n:this.length,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw new RangeError("index is out of bounds");if(e===t)return{bufs:[],length:0};if(0===e&&t===this.length)return{bufs:su(this.bufs),length:this.length};for(var a=[],i=0,o=0;o<this.bufs.length;o++){var s=this.bufs[o],u=i,c=u+s.byteLength;if(i=c,!(e>=c)){var l=e>=u&&e<c,f=t>u&&t<=c;if(l&&f){if(e===u&&t===c){a.push(s);break}var h=e-u;a.push(s.subarray(h,h+(t-e)));break}if(l){if(0===e){a.push(s);continue}a.push(s.subarray(e-u))}else{if(f){if(t===c){a.push(s);break}a.push(s.subarray(0,t-u));break}a.push(s)}}}return{bufs:a,length:t-e}}},{key:"indexOf",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!ET(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');var n=e instanceof Uint8Array?e:e.subarray();if(r=Number(null!==(t=r)&&void 0!==t?t:0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),0===e.length)return r>this.length?this.length:r;var a=n.byteLength;if(0===a)throw new TypeError("search must be at least 1 byte long");for(var i=256,o=new Int32Array(i),s=0;s<i;s++)o[s]=-1;for(var u=0;u<a;u++)o[n[u]]=u;for(var c,l=o,f=this.byteLength-n.byteLength,h=n.byteLength-1,p=r;p<=f;p+=c){c=0;for(var d=h;d>=0;d--){var v=this.get(p+d);if(n[d]!==v){c=Math.max(1,d-l[v]);break}}if(0===c)return p}return-1}},{key:"getInt8",value:function(e){var t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}},{key:"setInt8",value:function(e,t){var r=Rf(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setInt8(0,t),this.write(r,e)}},{key:"getInt16",value:function(e,t){var r=this.subarray(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt16(0,t)}},{key:"setInt16",value:function(e,t,r){var n=Df(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt16(0,t,r),this.write(n,e)}},{key:"getInt32",value:function(e,t){var r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt32(0,t)}},{key:"setInt32",value:function(e,t,r){var n=Df(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt32(0,t,r),this.write(n,e)}},{key:"getBigInt64",value:function(e,t){var r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigInt64(0,t)}},{key:"setBigInt64",value:function(e,t,r){var n=Df(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigInt64(0,t,r),this.write(n,e)}},{key:"getUint8",value:function(e){var t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}},{key:"setUint8",value:function(e,t){var r=Rf(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint8(0,t),this.write(r,e)}},{key:"getUint16",value:function(e,t){var r=this.subarray(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint16(0,t)}},{key:"setUint16",value:function(e,t,r){var n=Df(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint16(0,t,r),this.write(n,e)}},{key:"getUint32",value:function(e,t){var r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint32(0,t)}},{key:"setUint32",value:function(e,t,r){var n=Df(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,t,r),this.write(n,e)}},{key:"getBigUint64",value:function(e,t){var r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigUint64(0,t)}},{key:"setBigUint64",value:function(e,t,r){var n=Df(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigUint64(0,t,r),this.write(n,e)}},{key:"getFloat32",value:function(e,t){var r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(0,t)}},{key:"setFloat32",value:function(e,t,r){var n=Df(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat32(0,t,r),this.write(n,e)}},{key:"getFloat64",value:function(e,t){var r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(0,t)}},{key:"setFloat64",value:function(e,t,r){var n=Df(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat64(0,t,r),this.write(n,e)}},{key:"equals",value:function(e){if(null==e)return!1;if(!(e instanceof t))return!1;if(e.bufs.length!==this.bufs.length)return!1;for(var r=0;r<this.bufs.length;r++)if(!Pd(this.bufs[r],e.bufs[r]))return!1;return!0}}],[{key:"fromUint8Arrays",value:function(e,r){var n=new t;return n.bufs=e,null==r&&(r=e.reduce((function(e,t){return e+t.byteLength}),0)),n.length=r,n}}]),t}(),AT=__webpack_require__(5953);function CT(){return CT=Hn(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.minChunkSize&&r.maxChunkSize&&r.avgChunkSize)){e.next=6;break}i=r.avgChunkSize,n=r.minChunkSize,a=r.maxChunkSize,e.next=13;break;case 6:if(r.avgChunkSize){e.next=10;break}throw ca(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");case 10:i=r.avgChunkSize,n=i/3,a=i+i/2;case 13:if(!(n<16)){e.next=15;break}throw ca(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");case 15:a<n&&(a=n),i<n&&(i=n),o=Math.floor(Math.log2(i)),s=!1,u=!1,e.prev=20,l=zn(TT(t,{min:n,max:a,bits:o,window:r.window,polynomial:r.polynomial}));case 22:return e.next=24,Mf(l.next());case 24:if(!(s=!(f=e.sent).done)){e.next=31;break}return h=f.value,e.next=28,h;case 28:s=!1,e.next=22;break;case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(20),u=!0,c=e.t0;case 37:if(e.prev=37,e.prev=38,!s||null==l.return){e.next=42;break}return e.next=42,Mf(l.return());case 42:if(e.prev=42,!u){e.next=45;break}throw c;case 45:return e.finish(42);case 46:return e.finish(37);case 47:case"end":return e.stop()}}),e,null,[[20,33,37,47],[38,,42,46]])}))),CT.apply(this,arguments)}var IT=function(e,t){return CT.apply(this,arguments)};function TT(e,t){return DT.apply(this,arguments)}function DT(){return DT=Hn(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h,p,d;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mf((0,AT.create)(r.bits,r.min,r.max,r.window));case 2:n=e.sent,a=new ST,i=!1,o=!1,e.prev=6,u=zn(t);case 8:return e.next=10,Mf(u.next());case 10:if(!(i=!(c=e.sent).done)){e.next=27;break}l=c.value,a.append(l),f=n.fingerprint(l),h=0;case 15:if(!(h<f.length)){e.next=24;break}return p=f[h],d=a.slice(0,p),a.consume(p),e.next=21,d;case 21:h++,e.next=15;break;case 24:i=!1,e.next=8;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(6),o=!0,s=e.t0;case 33:if(e.prev=33,e.prev=34,!i||null==u.return){e.next=38;break}return e.next=38,Mf(u.return());case 38:if(e.prev=38,!o){e.next=41;break}throw s;case 41:return e.finish(38);case 42:return e.finish(33);case 43:if(!a.length){e.next=46;break}return e.next=46,a.subarray(0);case 46:case"end":return e.stop()}}),e,null,[[6,29,33,43],[34,,38,42]])}))),DT.apply(this,arguments)}function RT(){return RT=Hn(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h,p;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new ST,a=0,i=!1,o=r.maxChunkSize,s=!1,u=!1,e.prev=6,l=zn(t);case 8:return e.next=10,Mf(l.next());case 10:if(!(s=!(f=e.sent).done)){e.next=24;break}h=f.value,n.append(h),a+=h.length;case 14:if(!(a>=o)){e.next=21;break}return e.next=17,n.slice(0,o);case 17:i=!0,o===n.length?(n=new ST,a=0):((p=new ST).append(n.sublist(o)),n=p,a-=o),e.next=14;break;case 21:s=!1,e.next=8;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(6),u=!0,c=e.t0;case 30:if(e.prev=30,e.prev=31,!s||null==l.return){e.next=35;break}return e.next=35,Mf(l.return());case 35:if(e.prev=35,!u){e.next=38;break}throw c;case 38:return e.finish(35);case 39:return e.finish(30);case 40:if(i&&!a){e.next=43;break}return e.next=43,n.subarray(0,a);case 43:case"end":return e.stop()}}),e,null,[[6,26,30,40],[31,,35,39]])}))),RT.apply(this,arguments)}var PT=function(e,t){return RT.apply(this,arguments)};function NT(){return NT=Hn(En().mark((function e(t){var r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=zn(t);case 4:return e.next=6,Mf(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=29;break}if(void 0!==(s=o.value).length){e.next=10;break}throw ca(new Error("Content was invalid"),"ERR_INVALID_CONTENT");case 10:if(!("string"===typeof s||s instanceof String)){e.next=15;break}return e.next=13,Bf(s.toString());case 13:e.next=26;break;case 15:if(!Array.isArray(s)){e.next=20;break}return e.next=18,Uint8Array.from(s);case 18:e.next=26;break;case 20:if(!(s instanceof Uint8Array)){e.next=25;break}return e.next=23,s;case 23:e.next=26;break;case 25:throw ca(new Error("Content was invalid"),"ERR_INVALID_CONTENT");case 26:r=!1,e.next=4;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(2),n=!0,a=e.t0;case 35:if(e.prev=35,e.prev=36,!r||null==i.return){e.next=40;break}return e.next=40,Mf(i.return());case 40:if(e.prev=40,!n){e.next=43;break}throw a;case 43:return e.finish(40);case 44:return e.finish(35);case 45:case"end":return e.stop()}}),e,null,[[2,31,35,45],[36,,40,44]])}))),NT.apply(this,arguments)}var LT=function(e){return NT.apply(this,arguments)};function OT(e){try{if(e instanceof Uint8Array)return Hn(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:case"end":return t.stop()}}),t)})))();if(t=e,Symbol.iterator in t)return Hn(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(Cb(zn(e)),"t0",1);case 1:case"end":return t.stop()}}),t)})))();if(function(e){return Symbol.asyncIterator in e}(e))return e}catch(r){throw ca(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}var t;throw ca(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}function BT(){return BT=Hn(En().mark((function e(t,r,n){var a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,i=!1,e.prev=2,s=En().mark((function e(){var t,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=c.value).path&&("./"===t.path.substring(0,2)&&(n.wrapWithDirectory=!0),t.path=t.path.split("/").filter((function(e){return e&&"."!==e})).join("/")),!t.content){e.next=10;break}return a="function"===typeof n.chunker?n.chunker:"rabin"===n.chunker?IT:PT,i="function"===typeof n.chunkValidator?n.chunkValidator:LT,o={path:t.path,mtime:t.mtime,mode:t.mode,content:a(i(OT(t.content),n),n)},e.next=8,function(){return kT(o,r,n)};case 8:case 14:e.next=17;break;case 10:if(!t.path){e.next=16;break}return s={path:t.path,mtime:t.mtime,mode:t.mode},e.next=14,function(){return nT(s,r,n)};case 16:throw new Error("Import candidate must have content or path or both");case 17:case"end":return e.stop()}}),e)})),u=zn(t);case 5:return e.next=7,Mf(u.next());case 7:if(!(a=!(c=e.sent).done)){e.next=12;break}return e.delegateYield(s(),"t0",9);case 9:a=!1,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),i=!0,o=e.t1;case 18:if(e.prev=18,e.prev=19,!a||null==u.return){e.next=23;break}return e.next=23,Mf(u.return());case 23:if(e.prev=23,!i){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])}))),BT.apply(this,arguments)}var UT=function(e,t,r){return BT.apply(this,arguments)},MT=function(){function e(t,r){Cn(this,e),this.options=r||{},this.root=t.root,this.dir=t.dir,this.path=t.path,this.dirty=t.dirty,this.flat=t.flat,this.parent=t.parent,this.parentKey=t.parentKey,this.unixfs=t.unixfs,this.mode=t.mode,this.mtime=t.mtime,this.cid=void 0,this.size=void 0}return Dn(e,[{key:"put",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return Promise.resolve(this)}},{key:"eachChildSeries",value:function(){return Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},{key:"flush",value:function(e){return Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}]),e}(),zT=MT,FT=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a;return Cn(this,r),(a=t.call(this,e,n))._children={},a}return Dn(r,[{key:"put",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cid=void 0,this.size=void 0,this._children[t]=r;case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return Promise.resolve(this._children[e])}},{key:"childCount",value:function(){return Object.keys(this._children).length}},{key:"directChildrenCount",value:function(){return this.childCount()}},{key:"onlyChild",value:function(){return this._children[Object.keys(this._children)[0]]}},{key:"eachChildSeries",value:function(){var e=this;return Hn(En().mark((function t(){var r,n,a;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Object.keys(e._children),n=0;case 2:if(!(n<r.length)){t.next=9;break}return a=r[n],t.next=6,{key:a,child:e._children[a]};case 6:n++,t.next=2;break;case 9:case"end":return t.stop()}}),t)})))()}},{key:"flush",value:function(e){var t=this;return Hn(En().mark((function r(){var n,a,i,o,s,u,c,l,f,h,p,d,v,y,b;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=Object.keys(t._children),a=[],i=0;case 3:if(!(i<n.length)){r.next=40;break}if(!((o=t._children[n[i]])instanceof zT)){r.next=36;break}s=!1,u=!1,r.prev=8,l=zn(o.flush(e));case 10:return r.next=12,Mf(l.next());case 12:if(!(s=!(f=r.sent).done)){r.next=20;break}return h=f.value,o=h,r.next=17,o;case 17:s=!1,r.next=10;break;case 20:r.next=26;break;case 22:r.prev=22,r.t0=r.catch(8),u=!0,c=r.t0;case 26:if(r.prev=26,r.prev=27,!s||null==l.return){r.next=31;break}return r.next=31,Mf(l.return());case 31:if(r.prev=31,!u){r.next=34;break}throw c;case 34:return r.finish(31);case 35:return r.finish(26);case 36:null!=o.size&&o.cid&&a.push({Name:n[i],Tsize:o.size,Hash:o.cid});case 37:i++,r.next=3;break;case 40:return p=new _a({type:"directory",mtime:t.mtime,mode:t.mode}),d={Data:p.marshal(),Links:a},v=XI(GI(d)),r.next=45,Mf(tT(v,e,t.options));case 45:return y=r.sent,b=v.length+d.Links.reduce((function(e,t){return e+(null==t.Tsize?0:t.Tsize)}),0),t.cid=y,t.size=b,r.next=51,{cid:y,unixfs:p,path:t.path,size:b};case 51:case"end":return r.stop()}}),r,null,[[8,22,26,36],[27,,31,35]])})))()}}]),r}(zT),VT=FT,jT=__webpack_require__(5500),qT=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Cn(this,e),this._options=t,this._popCount=0,this._parent=r,this._posAtParent=n,this._children=new jT,this.key=null}return Dn(e,[{key:"put",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._findNewBucketAndPos(t);case 2:return n=e.sent,e.next=5,n.bucket._putAt(n,t,r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._findChild(t);case 2:if(null==(r=e.sent)){e.next=5;break}return e.abrupt("return",r.value);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"del",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._findPlace(t);case 2:r=e.sent,null!=(n=r.bucket._at(r.pos))&&n.key===t&&r.bucket._delAt(r.pos);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"leafCount",value:function(){return this._children.compactArray().reduce((function(t,r){return r instanceof e?t+r.leafCount():t+1}),0)}},{key:"childrenCount",value:function(){return this._children.length}},{key:"onlyChild",value:function(){return this._children.get(0)}},{key:"eachLeafSeries",value:En().mark((function t(){var r,n,a,i;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this._children.compactArray(),n=Ni(r),t.prev=2,n.s();case 4:if((a=n.n()).done){t.next=14;break}if(!((i=a.value)instanceof e)){t.next=10;break}return t.delegateYield(i.eachLeafSeries(),"t0",8);case 8:t.next=12;break;case 10:return t.next=12,i;case 12:t.next=4;break;case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(2),n.e(t.t1);case 19:return t.prev=19,n.f(),t.finish(19);case 22:case"end":return t.stop()}}),t,this,[[2,16,19,22]])}))},{key:"serialize",value:function(t,r){return r(this._children.reduce((function(n,a,i){return null!=a&&(a instanceof e?n.push(a.serialize(t,r)):n.push(t(a,i))),n}),[]))}},{key:"asyncTransform",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WT(this,t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return this.serialize(HT,GT)}},{key:"prettyPrint",value:function(){return JSON.stringify(this.toJSON(),null,"  ")}},{key:"tableSize",value:function(){return Math.pow(2,this._options.bits)}},{key:"_findChild",value:function(){var t=An(En().mark((function t(r){var n,a;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._findPlace(r);case 2:if(n=t.sent,!((a=n.bucket._at(n.pos))instanceof e)){t.next=6;break}return t.abrupt("return",void 0);case 6:if(null==a||a.key!==r){t.next=8;break}return t.abrupt("return",a);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_findPlace",value:function(){var t=An(En().mark((function t(r){var n,a,i;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._options.hash("string"===typeof r?Bf(r):r),t.next=3,n.take(this._options.bits);case 3:if(a=t.sent,!((i=this._children.get(a))instanceof e)){t.next=9;break}return t.next=8,i._findPlace(n);case 8:return t.abrupt("return",t.sent);case 9:return t.abrupt("return",{bucket:this,pos:a,hash:n,existingChild:i});case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_findNewBucketAndPos",value:function(){var t=An(En().mark((function t(r){var n,a,i;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._findPlace(r);case 2:if(null==(n=t.sent).existingChild||n.existingChild.key===r){t.next=13;break}return a=new e(this._options,n.bucket,n.pos),n.bucket._putObjectAt(n.pos,a),t.next=8,a._findPlace(n.existingChild.hash);case 8:return(i=t.sent).bucket._putAt(i,n.existingChild.key,n.existingChild.value),t.next=12,a._findNewBucketAndPos(n.hash);case 12:return t.abrupt("return",t.sent);case 13:return t.abrupt("return",n);case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_putAt",value:function(e,t,r){this._putObjectAt(e.pos,{key:t,value:r,hash:e.hash})}},{key:"_putObjectAt",value:function(e,t){null==this._children.get(e)&&this._popCount++,this._children.set(e,t)}},{key:"_delAt",value:function(e){if(-1===e)throw new Error("Invalid position");null!=this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}},{key:"_level",value:function(){if(null!=this._parent&&this._popCount<=1)if(1===this._popCount){var t=this._children.find(KT);if(null!=t&&!(t instanceof e)){var r=t.hash;r.untake(this._options.bits);var n={pos:this._posAtParent,hash:r,bucket:this._parent};this._parent._putAt(n,t.key,t.value)}}else this._parent._delAt(this._posAtParent)}},{key:"_at",value:function(e){return this._children.get(e)}}]),e}();function KT(e){return Boolean(e)}function HT(e,t){return e.key}function GT(e){return e}function WT(e,t,r){return YT.apply(this,arguments)}function YT(){return(YT=An(En().mark((function e(t,r,n){var a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],i=Ni(t._children.compactArray()),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=17;break}if(!((s=o.value)instanceof qT)){e.next=11;break}return e.next=9,WT(s,r,n);case 9:e.next=15;break;case 11:return e.next=13,r(s);case 13:u=e.sent,a.push({bitField:t._children.bitField(),children:u});case 15:e.next=4;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:return e.next=27,n(a);case 27:return e.abrupt("return",e.sent);case 28:case"end":return e.stop()}}),e,null,[[2,19,22,25]])})))).apply(this,arguments)}var QT=[255,254,252,248,240,224,192,128],JT=[1,3,7,15,31,63,127,255],ZT=function(){function e(t){Cn(this,e),this._value=t,this._currentBytePos=t.length-1,this._currentBitPos=7}return Dn(e,[{key:"availableBits",value:function(){return this._currentBitPos+1+8*this._currentBytePos}},{key:"totalBits",value:function(){return 8*this._value.length}},{key:"take",value:function(e){for(var t=e,r=0;t>0&&this._haveBits();){var n=this._value[this._currentBytePos],a=this._currentBitPos+1,i=Math.min(a,t);r=(r<<i)+XT(n,a-i,i),t-=i,this._currentBitPos-=i,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return r}},{key:"untake",value:function(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}},{key:"_haveBits",value:function(){return this._currentBytePos>=0}}]),e}();function XT(e,t,r){var n=function(e,t){return QT[e]&JT[Math.min(t+e-1,7)]}(t,r);return(e&n)>>>t}function $T(e){return function(t){return t instanceof eD?t:new eD(t,e)}}var eD=function(){function e(t,r){if(Cn(this,e),!(t instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=t,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}return Dn(e,[{key:"take",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t;case 1:if(!(this._availableBits<r)){e.next=6;break}return e.next=4,this._produceMoreBits();case 4:e.next=1;break;case 6:for(n=0;r>0;)a=this._buffers[this._currentBufferIndex],i=Math.min(a.availableBits(),r),o=a.take(i),n=(n<<i)+o,r-=i,this._availableBits-=i,0===a.availableBits()&&this._currentBufferIndex++;return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"untake",value:function(e){for(var t=e;t>0;){var r=this._buffers[this._currentBufferIndex],n=Math.min(r.totalBits()-r.availableBits(),t);r.untake(n),t-=n,this._availableBits+=n,this._currentBufferIndex>0&&r.totalBits()===r.availableBits()&&(this._depth--,this._currentBufferIndex--)}}},{key:"_produceMoreBits",value:function(){var e=An(En().mark((function e(){var t,r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._depth++,t=this._depth>0?ld([this._value,Uint8Array.from([this._depth])]):this._value,e.next=4,this._hashFn(t);case 4:r=e.sent,n=new ZT(r),this._buffers.push(n),this._availableBits+=n.availableBits();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function tD(e){var t;if(null==e||null==e.hashFn)throw new Error("please define an options.hashFn");var r={bits:null!==(t=e.bits)&&void 0!==t?t:8,hash:$T(e.hashFn)};return new qT(r)}var rD=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a;return Cn(this,r),(a=t.call(this,e,n))._bucket=tD({hashFn:n.hamtHashFn,bits:n.hamtBucketBits}),a}return Dn(r,[{key:"put",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._bucket.put(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return this._bucket.get(e)}},{key:"childCount",value:function(){return this._bucket.leafCount()}},{key:"directChildrenCount",value:function(){return this._bucket.childrenCount()}},{key:"onlyChild",value:function(){return this._bucket.onlyChild()}},{key:"eachChildSeries",value:function(){var e=this;return Hn(En().mark((function t(){var r,n,a,i,o,s,u,c;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=2,i=zn(e._bucket.eachLeafSeries());case 4:return t.next=6,Mf(i.next());case 6:if(!(r=!(o=t.sent).done)){t.next=13;break}return s=o.value,u=s.key,c=s.value,t.next=10,{key:u,child:c};case 10:r=!1,t.next=4;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(2),n=!0,a=t.t0;case 19:if(t.prev=19,t.prev=20,!r||null==i.return){t.next=24;break}return t.next=24,Mf(i.return());case 24:if(t.prev=24,!n){t.next=27;break}throw a;case 27:return t.finish(24);case 28:return t.finish(19);case 29:case"end":return t.stop()}}),t,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"flush",value:function(e){var t=this;return Hn(En().mark((function r(){var n,a,i,o,s,u;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,a=!1,r.prev=2,o=zn(aD(t._bucket,e,t,t.options));case 4:return r.next=6,Mf(o.next());case 6:if(!(n=!(s=r.sent).done)){r.next=13;break}return u=s.value,r.next=10,jn(jn({},u),{},{path:t.path});case 10:n=!1,r.next=4;break;case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(2),a=!0,i=r.t0;case 19:if(r.prev=19,r.prev=20,!n||null==o.return){r.next=24;break}return r.next=24,Mf(o.return());case 24:if(r.prev=24,!a){r.next=27;break}throw i;case 27:return r.finish(24);case 28:return r.finish(19);case 29:case"end":return r.stop()}}),r,null,[[2,15,19,29],[20,,24,28]])})))()}}]),r}(zT),nD=rD;function aD(e,t,r,n){return iD.apply(this,arguments)}function iD(){return iD=Hn(En().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S,A,C,I,T,D,R,P,N,L,O;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t._children,o=[],s=0,u=0;case 4:if(!(u<i.length)){e.next=97;break}if(c=i.get(u)){e.next=8;break}return e.abrupt("continue",94);case 8:if(l=u.toString(16).toUpperCase().padStart(2,"0"),!(c instanceof qT)){e.next=49;break}return f=void 0,h=!1,p=!1,e.prev=13,e.t0=zn,e.next=17,Mf(aD(c,r,null,a));case 17:e.t1=e.sent,v=(0,e.t0)(e.t1);case 19:return e.next=21,Mf(v.next());case 21:if(!(h=!(y=e.sent).done)){e.next=27;break}b=y.value,f=b;case 24:h=!1,e.next=19;break;case 27:e.next=33;break;case 29:e.prev=29,e.t2=e.catch(13),p=!0,d=e.t2;case 33:if(e.prev=33,e.prev=34,!h||null==v.return){e.next=38;break}return e.next=38,Mf(v.return());case 38:if(e.prev=38,!p){e.next=41;break}throw d;case 41:return e.finish(38);case 42:return e.finish(33);case 43:if(f){e.next=45;break}throw new Error("Could not flush sharded directory, no subshard found");case 45:o.push({Name:l,Tsize:f.size,Hash:f.cid}),s+=f.size,e.next=94;break;case 49:if("function"!==typeof c.value.flush){e.next=87;break}g=c.value,m=void 0,w=!1,k=!1,e.prev=54,_=zn(g.flush(r));case 56:return e.next=58,Mf(_.next());case 58:if(!(w=!(E=e.sent).done)){e.next=66;break}return S=E.value,m=S,e.next=63,m;case 63:w=!1,e.next=56;break;case 66:e.next=72;break;case 68:e.prev=68,e.t3=e.catch(54),k=!0,x=e.t3;case 72:if(e.prev=72,e.prev=73,!w||null==_.return){e.next=77;break}return e.next=77,Mf(_.return());case 77:if(e.prev=77,!k){e.next=80;break}throw x;case 80:return e.finish(77);case 81:return e.finish(72);case 82:A=l+c.key,o.push({Name:A,Tsize:m.size,Hash:m.cid}),s+=m.size,e.next=94;break;case 87:if((C=c.value).cid){e.next=90;break}return e.abrupt("continue",94);case 90:I=l+c.key,T=C.size,o.push({Name:I,Tsize:T,Hash:C.cid}),s+=T;case 94:u++,e.next=4;break;case 97:return D=Uint8Array.from(i.bitField().reverse()),R=new _a({type:"hamt-sharded-directory",data:D,fanout:t.tableSize(),hashType:a.hamtHashCode,mtime:n&&n.mtime,mode:n&&n.mode}),P={Data:R.marshal(),Links:o},N=XI(GI(P)),e.next=103,Mf(tT(N,r,a));case 103:return L=e.sent,O=N.length+s,e.next=107,{cid:L,unixfs:R,size:O};case 107:case"end":return e.stop()}}),e,null,[[13,29,33,43],[34,,38,42],[54,68,72,82],[73,,77,81]])}))),iD.apply(this,arguments)}function oD(e,t,r,n){return sD.apply(this,arguments)}function sD(){return(sD=An(En().mark((function e(t,r,n,a){var i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r,!(r instanceof VT&&r.directChildrenCount()>=n)){e.next=5;break}return e.next=4,uD(r,a);case 4:i=e.sent;case 5:if(!(o=i.parent)){e.next=14;break}if(i===r){e.next=13;break}if(t&&(t.parent=i),i.parentKey){e.next=11;break}throw new Error("No parent key found");case 11:return e.next=13,o.put(i.parentKey,i);case 13:return e.abrupt("return",oD(i,o,n,a));case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uD(e,t){return cD.apply(this,arguments)}function cD(){return(cD=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new nD({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},r),a=!1,i=!1,e.prev=3,s=zn(t.eachChildSeries());case 5:return e.next=7,s.next();case 7:if(!(a=!(u=e.sent).done)){e.next=14;break}return c=u.value,l=c.key,f=c.child,e.next=11,n.put(l,f);case 11:a=!1,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),i=!0,o=e.t0;case 20:if(e.prev=20,e.prev=21,!a||null==s.return){e.next=25;break}return e.next=25,s.return();case 25:if(e.prev=25,!i){e.next=28;break}throw o;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",n);case 31:case"end":return e.stop()}}),e,null,[[3,16,20,30],[21,,25,29]])})))).apply(this,arguments)}var lD=oD,fD=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean)};function hD(e,t,r){return pD.apply(this,arguments)}function pD(){return pD=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=fD(t.path||""),i=a.length-1,o=r,s="",u=0;case 5:if(!(u<a.length)){e.next=30;break}if(c=a[u],s+="".concat(s?"/":"").concat(c),l=u===i,o.dirty=!0,o.cid=void 0,o.size=void 0,!l){e.next=20;break}return e.next=15,o.put(c,t);case 15:return e.next=17,lD(null,o,n.shardSplitThreshold,n);case 17:r=e.sent,e.next=27;break;case 20:return e.next=22,o.get(c);case 22:return(f=e.sent)&&f instanceof zT||(f=new VT({root:!1,dir:!0,parent:o,parentKey:c,path:s,dirty:!0,flat:!0,mtime:f&&f.unixfs&&f.unixfs.mtime,mode:f&&f.unixfs&&f.unixfs.mode},n)),e.next=26,o.put(c,f);case 26:o=f;case 27:u++,e.next=5;break;case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e)}))),pD.apply(this,arguments)}function dD(e,t){return vD.apply(this,arguments)}function vD(){return(vD=Hn(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof zT){e.next=5;break}if(!(t&&t.unixfs&&t.unixfs.isDirectory())){e.next=4;break}return e.next=4,t;case 4:return e.abrupt("return");case 5:return e.delegateYield(Cb(zn(t.flush(r))),"t0",6);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yD(){return yD=Hn(En().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,h,p,d,v,y;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new VT({root:!0,dir:!0,path:"",dirty:!0,flat:!0},n),i=!1,o=!1,e.prev=3,u=zn(t);case 5:return e.next=7,Mf(u.next());case 7:if(!(i=!(c=e.sent).done)){e.next=20;break}if(l=c.value){e.next=11;break}return e.abrupt("continue",17);case 11:return e.next=13,Mf(hD(l,a,n));case 13:if(a=e.sent,l.unixfs&&l.unixfs.isDirectory()){e.next=17;break}return e.next=17,l;case 17:i=!1,e.next=5;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(3),o=!0,s=e.t0;case 26:if(e.prev=26,e.prev=27,!i||null==u.return){e.next=31;break}return e.next=31,Mf(u.return());case 31:if(e.prev=31,!o){e.next=34;break}throw s;case 34:return e.finish(31);case 35:return e.finish(26);case 36:if(!n.wrapWithDirectory){e.next=40;break}return e.delegateYield(Cb(zn(dD(a,r))),"t1",38);case 38:e.next=70;break;case 40:f=!1,h=!1,e.prev=42,d=zn(a.eachChildSeries());case 44:return e.next=46,Mf(d.next());case 46:if(!(f=!(v=e.sent).done)){e.next=54;break}if(y=v.value){e.next=50;break}return e.abrupt("continue",51);case 50:return e.delegateYield(Cb(zn(dD(y.child,r))),"t2",51);case 51:f=!1,e.next=44;break;case 54:e.next=60;break;case 56:e.prev=56,e.t3=e.catch(42),h=!0,p=e.t3;case 60:if(e.prev=60,e.prev=61,!f||null==d.return){e.next=65;break}return e.next=65,Mf(d.return());case 65:if(e.prev=65,!h){e.next=68;break}throw p;case 68:return e.finish(65);case 69:return e.finish(60);case 70:case"end":return e.stop()}}),e,null,[[3,22,26,36],[27,,31,35],[42,56,60,70],[61,,65,69]])}))),yD.apply(this,arguments)}var bD=function(e,t,r){return yD.apply(this,arguments)};function gD(e,t){return mD.apply(this,arguments)}function mD(){return mD=Hn((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return En().mark((function n(){var a,i,o,s,u,c,l,f,h,p;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=rI(r),i="function"===typeof r.dagBuilder?r.dagBuilder:UT,o="function"===typeof r.treeBuilder?r.treeBuilder:bD,s=Symbol.asyncIterator in e||Symbol.iterator in e?e:[e],u=!1,c=!1,n.prev=6,f=zn(o(WA(i(s,t,a),a.fileImportConcurrency),t,a));case 8:return n.next=10,Mf(f.next());case 10:if(!(u=!(h=n.sent).done)){n.next=17;break}return p=h.value,n.next=14,{cid:p.cid,path:p.path,unixfs:p.unixfs,size:p.size};case 14:u=!1,n.next=8;break;case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(6),c=!0,l=n.t0;case 23:if(n.prev=23,n.prev=24,!u||null==f.return){n.next=28;break}return n.next=28,Mf(f.return());case 28:if(n.prev=28,!c){n.next=31;break}throw l;case 31:return n.finish(28);case 32:return n.finish(23);case 33:case"end":return n.stop()}}),n,null,[[6,19,23,33],[24,,28,32]])}))()})),mD.apply(this,arguments)}function wD(e,t){return kD.apply(this,arguments)}function kD(){return kD=Hn(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("string"===typeof t||t instanceof String||PA(t)||NA(t)||t._readableState)){e.next=2;break}throw ca(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");case 2:if(OA(t)&&(t=IA(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=26;break}return n=RA(t),e.next=7,Mf(n.peek());case 7:if(a=e.sent,i=a.value,!a.done){e.next=13;break}return e.delegateYield(Cb(zn([])),"t0",12);case 12:case 18:case 22:case 25:return e.abrupt("return");case 13:if(n.push(i),!Number.isInteger(i)){e.next=16;break}throw ca(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");case 16:if(!i._readableState){e.next=19;break}return e.delegateYield(Cb(zn(kS(n,(function(e){return xD({content:e},r)})))),"t1",18);case 19:if(!PA(i)){e.next=23;break}return e.next=22,xD({content:n},r);case 23:if(!(LA(i)||i[Symbol.iterator]||i[Symbol.asyncIterator]||OA(i)||NA(i))){e.next=26;break}return e.delegateYield(Cb(zn(kS(n,(function(e){return xD(e,r)})))),"t2",25);case 26:if(!LA(t)){e.next=28;break}throw ca(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");case 28:throw ca(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT");case 29:case"end":return e.stop()}}),e)}))),kD.apply(this,arguments)}function xD(e,t){return _D.apply(this,arguments)}function _D(){return _D=An(En().mark((function e(t,r){var n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.path,a=t.mode,i=t.mtime,o=t.content,s={path:n||"",mode:ka(a),mtime:xa(i)},!o){e.next=8;break}return e.next=5,r(o);case 5:s.content=e.sent,e.next=12;break;case 8:if(n){e.next=12;break}return e.next=11,r(t);case 11:s.content=e.sent;case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)}))),_D.apply(this,arguments)}function ED(e){return wD(e,MA)}var SD=function(e){if(e){if(e.startsWith("size-")){var t=e.split("-")[1],r=parseInt(t);if(isNaN(r))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",maxChunkSize:r}}if(e.startsWith("rabin"))return jn({chunker:"rabin"},AD(e));throw new Error("Unrecognized chunker option: ".concat(e))}return{chunker:"fixed"}},AD=function(e){var t={},r=e.split("-");switch(r.length){case 1:t.avgChunkSize=262144;break;case 2:t.avgChunkSize=CD(r[1],"avg");break;case 4:t.minChunkSize=CD(r[1],"min"),t.avgChunkSize=CD(r[2],"avg"),t.maxChunkSize=CD(r[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return t},CD=function(e,t){var r=parseInt(e);if(isNaN(r))throw new Error("Chunker parameter ".concat(t," must be an integer"));return r},ID=Gn.bind({ignoreUndefined:!0});function TD(e){function t(){return t=Hn(En().mark((function t(r){var n,a,i,o,s,u,c,l;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,o=zn(r);case 4:return t.next=6,Mf(o.next());case 6:if(!(n=!(s=t.sent).done)){t.next=17;break}return u=s.value,c=u.cid,1===e.cidVersion&&(c=c.toV1()),l=u.path?u.path:c.toString(),e.wrapWithDirectory&&!u.path&&(l=""),t.next=14,{path:l,cid:c,size:u.size,mode:u.unixfs&&u.unixfs.mode,mtime:u.unixfs&&u.unixfs.mtime};case 14:n=!1,t.next=4;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),a=!0,i=t.t0;case 23:if(t.prev=23,t.prev=24,!n||null==o.return){t.next=28;break}return t.next=28,Mf(o.return());case 28:if(t.prev=28,!a){t.next=31;break}throw i;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[2,19,23,33],[24,,28,32]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}function DD(e,t){function r(){return r=Hn(En().mark((function r(n){var a,i,o,s,u,c,l;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=!1,i=!1,r.prev=2,s=zn(n);case 4:return r.next=6,Mf(s.next());case 6:if(!(a=!(u=r.sent).done)){r.next=16;break}return c=u.value,l=!c.path||t.wrapWithDirectory?""===c.path:!c.path.includes("/"),l&&!t.onlyHash&&!1!==t.preload&&e(c.cid),r.next=13,c;case 13:a=!1,r.next=4;break;case 16:r.next=22;break;case 18:r.prev=18,r.t0=r.catch(2),i=!0,o=r.t0;case 22:if(r.prev=22,r.prev=23,!a||null==s.return){r.next=27;break}return r.next=27,Mf(s.return());case 27:if(r.prev=27,!i){r.next=30;break}throw o;case 30:return r.finish(27);case 31:return r.finish(22);case 32:case"end":return r.stop()}}),r,null,[[2,18,22,32],[23,,27,31]])}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}function RD(e,t){function r(){return r=Hn(En().mark((function r(n){var a,i,o,s,u,c,l;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=!1,i=!1,r.prev=2,s=zn(n);case 4:return r.next=6,Mf(s.next());case 6:if(!(a=!(u=r.sent).done)){r.next=18;break}if(c=u.value,l=!(c.path&&c.path.includes("/")),!((null==t.pin||t.pin)&&l&&!t.onlyHash)){r.next=13;break}return r.next=13,Mf(e.pins.pinRecursively(c.cid));case 13:return r.next=15,c;case 15:a=!1,r.next=4;break;case 18:r.next=24;break;case 20:r.prev=20,r.t0=r.catch(2),i=!0,o=r.t0;case 24:if(r.prev=24,r.prev=25,!a||null==s.return){r.next=29;break}return r.next=29,Mf(s.return());case 29:if(r.prev=29,!i){r.next=32;break}throw o;case 32:return r.finish(29);case 33:return r.finish(24);case 34:case"end":return r.stop()}}),r,null,[[2,20,24,34],[25,,29,33]])}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}var PD=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=ND;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},ND=Math.pow(2,31);var LD=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var OD=Math.pow(2,7),BD=Math.pow(2,14),UD=Math.pow(2,21),MD=Math.pow(2,28),zD=Math.pow(2,35),FD=Math.pow(2,42),VD=Math.pow(2,49),jD=Math.pow(2,56),qD=Math.pow(2,63),KD={encode:PD,decode:LD,encodingLength:function(e){return e<OD?1:e<BD?2:e<UD?3:e<MD?4:e<zD?5:e<FD?6:e<VD?7:e<jD?8:e<qD?9:10}},HD=KD,GD=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=HD.decode(e,t);return[r,HD.decode.bytes]},WD=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return HD.encode(e,t,r),t},YD=function(e){return HD.encodingLength(e)},QD=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),JD=function(e,t){var r=t.byteLength,n=YD(e),a=n+YD(r),i=new Uint8Array(a+r);return WD(e,i,0),WD(r,i,n),i.set(t,a),new XD(e,r,t,i)},ZD=function(e){var t=QD(e),r=Ia(GD(t),2),n=r[0],a=r[1],i=Ia(GD(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new XD(n,o,u,t)},XD=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var $D=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},eR=$D,tR=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),rR=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return aR(this,e)}}]),e}(),nR=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return aR(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),aR=function(e,t){return new nR(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},iR=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new tR(t,r,n),this.decoder=new rR(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),oR=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new iR(t,r,n,a)},sR=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=eR(n,r),i=a.encode,o=a.decode;return oR({prefix:t,name:r,encode:i,decode:function(e){return QD(o(e))}})},uR=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return oR({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},cR=sR({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),lR=(sR({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),uR({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),fR=(uR({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),uR({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),uR({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),uR({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),uR({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),uR({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),uR({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),uR({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),function(e,t){var r=e.bytes;return 0===e.version?yR(r,pR(e),t||cR.encoder):bR(r,pR(e),t||lR.encoder)}),hR=new WeakMap,pR=function(e){var t=hR.get(e);if(null==t){var r=new Map;return hR.set(e,r),r}return t},dR=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==gR)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==mR)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=JD(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return fR(this,e)}},{key:"toJSON",value:function(){return{"/":fR(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||wR(n,a,i.bytes))}if(!0===t[kR]){var o=t.version,s=t.multihash,u=t.code,c=ZD(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==gR)throw new Error("Version 0 CID must use dag-pb (code: ".concat(gR,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,wR(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,gR,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=QD(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new XD(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(GD(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=gR;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(vR(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return pR(o).set(a,e),o}}]),r}(),vR=function(e,t){switch(e[0]){case"Q":var r=t||cR;return[cR.prefix,r.decode("".concat(cR.prefix).concat(e))];case cR.prefix:var n=t||cR;return[cR.prefix,n.decode(e)];case lR.prefix:var a=t||lR;return[lR.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},yR=function(e,t,r){var n=r.prefix;if(n!==cR.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},bR=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},gR=112,mR=18,wR=function(e,t,r){var n=YD(e),a=n+YD(t),i=new Uint8Array(a+r.byteLength);return WD(e,i,0),WD(t,i,n),i.set(r,a),i},kR=Symbol.for("@ipld/js-cid/CID"),xR=new TextDecoder;function _R(e,t){for(var r=0,n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");var a=e[t++];if(r+=n<28?(127&a)<<n:(127&a)*Math.pow(2,n),a<128)break}return[r,t]}function ER(e,t){var r,n=Ia(_R(e,t),2);r=n[0];var a=(t=n[1])+r;if(r<0||a<0)throw new Error("protobuf: invalid length");if(a>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,a),a]}function SR(e,t){var r,n=Ia(_R(e,t),2);return[7&(r=n[0]),r>>3,t=n[1]]}function AR(e){for(var t={},r=e.length,n=0;n<r;){var a,i,o=Ia(SR(e,n),3);if(a=o[0],i=o[1],n=o[2],1===i){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Hash"));if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");var s=Ia(ER(e,n),2);t.Hash=s[0],n=s[1]}else if(2===i){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Name"));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");var u,c=Ia(ER(e,n),2);u=c[0],n=c[1],t.Name=xR.decode(u)}else{if(3!==i)throw new Error("protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ".concat(i));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Tsize"));var l=Ia(_R(e,n),2);t.Tsize=l[0],n=l[1]}}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}new TextEncoder,Math.pow(2,32),Math.pow(2,31);new TextEncoder;function CR(e){var t=function(e){for(var t,r,n=e.length,a=0,i=!1;a<n;){var o,s,u=Ia(SR(e,a),3);if(o=u[0],s=u[1],a=u[2],2!==o)throw new Error("protobuf: (PBNode) invalid wireType, expected 2, got ".concat(o));if(1===s){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");var c=Ia(ER(e,a),2);r=c[0],a=c[1],t&&(i=!0)}else{if(2!==s)throw new Error("protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ".concat(s));if(i)throw new Error("protobuf: (PBNode) duplicate Links section");t||(t=[]);var l,f=Ia(ER(e,a),2);l=f[0],a=f[1],t.push(AR(l))}}if(a>n)throw new Error("protobuf: (PBNode) unexpected end of data");var h={};return r&&(h.Data=r),h.Links=t||[],h}(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map((function(e){var t={};try{t.Hash=dR.decode(e.Hash)}catch(r){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),r}var IR={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};IR.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return dR.decode(e.subarray(1))};var TR=0,DR=function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$C.encode(t);case 2:return e.abrupt("return",e.sent.slice(0,8).reverse());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),RR=function(e,t,r){return Promise.all(e.map((function(e){if(null==e.Name)throw new Error("Unexpected Link without a Name");if(2===e.Name.length){var n=parseInt(e.Name,16);return t._putObjectAt(n,new qT({hash:r._options.hash,bits:r._options.bits},t,n))}return r.put(e.Name.substring(2),!0)})))},PR=function(e){return e.toString(16).toUpperCase().padStart(2,"0").substring(0,2)},NR=function(e){for(var t=e.bucket,r=[];t._parent;)r.push(t),t=t._parent;return r.push(t),r.reverse()},LR=function(){var e=An(En().mark((function e(t,r,n,a,i){var o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||(o=tD({hashFn:DR}),a={rootBucket:o,hamtDepth:1,lastBucket:o}),e.next=3,RR(t.Links,a.lastBucket,a.rootBucket);case 3:return e.next=5,a.rootBucket._findNewBucketAndPos(r);case 5:if(s=e.sent,u=PR(s.pos),(c=NR(s)).length>a.hamtDepth&&(a.lastBucket=c[a.hamtDepth],u=PR(a.lastBucket._posAtParent)),l=t.Links.find((function(e){if(null==e.Name)return!1;var t=e.Name.substring(0,2),n=e.Name.substring(2);return t===u&&(!n||n===r)}))){e.next=12;break}return e.abrupt("return",null);case 12:if(null==l.Name||l.Name.substring(2)!==r){e.next=14;break}return e.abrupt("return",l.Hash);case 14:return a.hamtDepth++,e.next=17,n.get(l.Hash,i);case 17:return f=e.sent,t=CR(f),e.abrupt("return",LR(t,r,n,a,i));case 20:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),OR=LR;var BR=function(e,t,r,n){var a=t+e.length;return r>=a||n<t?new Uint8Array(0):(n>=t&&n<a&&(e=e.subarray(0,n-t)),r>=t&&r<a&&(e=e.subarray(r-t)),e)},UR=function(e,t,r){if(t||(t=0),t<0)throw ca(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(t>e)throw ca(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(r||0===r||(r=e-t),r<0)throw ca(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return t+r>e&&(r=e-t),{offset:t,length:r}};function MR(e,t,r,n,a,i,o,s){return zR.apply(this,arguments)}function zR(){return zR=An(En().mark((function e(t,r,n,a,i,o,s,u){var c,l,f,h,p,d,v,y;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r instanceof Uint8Array)){e.next=3;break}return n.push(BR(r,a,i,o)),e.abrupt("return");case 3:if(null!=r.Data){e.next=5;break}throw ca(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");case 5:e.prev=5,c=_a.unmarshal(r.Data),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(5),ca(e.t0,"ERR_NOT_UNIXFS");case 12:null!=c.data&&(l=c.data,f=BR(l,a,i,o),n.push(f),a+=f.byteLength),h=[],p=0;case 15:if(!(p<r.Links.length)){e.next=26;break}if(d=r.Links[p],y=(v=a)+c.blockSizes[p],(i>=v&&i<y||o>=v&&o<=y||i<v&&o>y)&&h.push({link:d,blockStart:a}),!((a=y)>o)){e.next=23;break}return e.abrupt("break",26);case 23:p++,e.next=15;break;case 26:return e.next=28,TS(h,(function(e){return kS(e,(function(e){return An(En().mark((function r(){var n;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.get(e.link.Hash,{signal:u.signal});case 2:return n=r.sent,r.abrupt("return",jn(jn({},e),{},{block:n}));case 4:case"end":return r.stop()}}),r)})))}))}),(function(e){return EA(e,{ordered:!0})}),function(){var e=An(En().mark((function e(r){var a,c,l,f,h,p,d;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,c=!1,e.prev=2,f=En().mark((function e(){var r,a,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=p.value,a=r.link,c=r.block,l=r.blockStart,e.t0=a.Hash.code,e.next=112===e.t0?4:85===e.t0?6:8;break;case 4:return f=CR(c),e.abrupt("break",10);case 6:return f=c,e.abrupt("break",10);case 8:return n.end(ca(new Error("Unsupported codec: ".concat(a.Hash.code)),"ERR_NOT_UNIXFS")),e.abrupt("return",{v:void 0});case 10:s.add(An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MR(t,f,n,l,i,o,s,u);case 2:case"end":return e.stop()}}),e)}))));case 11:case"end":return e.stop()}}),e)})),h=zn(r);case 5:return e.next=7,h.next();case 7:if(!(a=!(p=e.sent).done)){e.next=15;break}return e.delegateYield(f(),"t0",9);case 9:if("object"!==typeof(d=e.t0)){e.next=12;break}return e.abrupt("return",d.v);case 12:a=!1,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(2),c=!0,l=e.t1;case 21:if(e.prev=21,e.prev=22,!a||null==h.return){e.next=26;break}return e.next=26,h.return();case 26:if(e.prev=26,!c){e.next=29;break}throw l;case 29:return e.finish(26);case 30:return e.finish(21);case 31:case"end":return e.stop()}}),e,null,[[2,17,21,31],[22,,26,30]])})));return function(t){return e.apply(this,arguments)}}());case 28:case"end":return e.stop()}}),e,null,[[5,9]])}))),zR.apply(this,arguments)}var FR=function(e,t,r,n,a,i,o){function s(){return s=Hn((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En().mark((function n(){var a,i,s,u,c,l,f,h,p,d,v,y,b;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==(a=r.fileSize())){n.next=3;break}throw new Error("File was a directory");case 3:if(i=UR(a,e.offset,e.length),s=i.offset,0!==(u=i.length)){n.next=6;break}return n.abrupt("return");case 6:c=new $y({concurrency:1}),l=pS(),c.add(An(En().mark((function r(){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,MR(o,t,l,0,s,s+u,c,e);case 2:case"end":return r.stop()}}),r)})))),c.on("error",(function(e){l.end(e)})),f=0,h=!1,p=!1,n.prev=13,v=zn(l);case 15:return n.next=17,Mf(v.next());case 17:if(!(h=!(y=n.sent).done)){n.next=28;break}if(null!=(b=y.value)){n.next=21;break}return n.abrupt("continue",25);case 21:return(f+=b.byteLength)===u&&l.end(),n.next=25,b;case 25:h=!1,n.next=15;break;case 28:n.next=34;break;case 30:n.prev=30,n.t0=n.catch(13),p=!0,d=n.t0;case 34:if(n.prev=34,n.prev=35,!h||null==v.return){n.next=39;break}return n.next=39,Mf(v.return());case 39:if(n.prev=39,!p){n.next=42;break}throw d;case 42:return n.finish(39);case 43:return n.finish(34);case 44:case"end":return n.stop()}}),n,null,[[13,30,34,44],[35,,39,43]])}))()})),s.apply(this,arguments)}return function(){return s.apply(this,arguments)}},VR=function(e,t,r,n,a,i,o){function s(){return s=Hn((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En().mark((function r(){var s,u,c,l,f,h,p;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:s=e.offset||0,u=e.length||t.Links.length,c=t.Links.slice(s,u),l=Ni(c),r.prev=4,l.s();case 6:if((f=l.n()).done){r.next=16;break}return h=f.value,r.next=10,Mf(a(h.Hash,h.Name||"","".concat(n,"/").concat(h.Name||""),[],i+1,o,e));case 10:if(!(p=r.sent).entry){r.next=14;break}return r.next=14,p.entry;case 14:r.next=6;break;case 16:r.next=21;break;case 18:r.prev=18,r.t0=r.catch(4),l.e(r.t0);case 21:return r.prev=21,l.f(),r.finish(21);case 24:case"end":return r.stop()}}),r,null,[[4,18,21,24]])}))()})),s.apply(this,arguments)}return function(){return s.apply(this,arguments)}};function jR(e,t,r,n,a,i){return qR.apply(this,arguments)}function qR(){return qR=Hn(En().mark((function e(t,r,n,a,i,o){var s,u,c,l,f,h,p,d,v,y,b,g,m;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.Links,u=Ni(s),e.prev=2,u.s();case 4:if((c=u.n()).done){e.next=50;break}if(l=c.value,!(f=null!=l.Name?l.Name.substring(2):null)){e.next=15;break}return e.next=10,Mf(n(l.Hash,f,"".concat(r,"/").concat(f),[],a+1,i,o));case 10:return h=e.sent,e.next=13,h.entry;case 13:e.next=48;break;case 15:return e.next=17,Mf(i.get(l.Hash));case 17:p=e.sent,t=CR(p),d=!1,v=!1,e.prev=21,b=zn(jR(t,r,n,a,i,o));case 23:return e.next=25,Mf(b.next());case 25:if(!(d=!(g=e.sent).done)){e.next=32;break}return m=g.value,e.next=29,m;case 29:d=!1,e.next=23;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(21),v=!0,y=e.t0;case 38:if(e.prev=38,e.prev=39,!d||null==b.return){e.next=43;break}return e.next=43,Mf(b.return());case 43:if(e.prev=43,!v){e.next=46;break}throw y;case 46:return e.finish(43);case 47:return e.finish(38);case 48:e.next=4;break;case 50:e.next=55;break;case 52:e.prev=52,e.t1=e.catch(2),u.e(e.t1);case 55:return e.prev=55,u.f(),e.finish(55);case 58:case"end":return e.stop()}}),e,null,[[2,52,55,58],[21,34,38,48],[39,,43,47]])}))),qR.apply(this,arguments)}var KR,HR=function(e,t,r,n,a,i,o){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jR(t,n,a,i,o,e)}},GR=function(e,t){var r=e.Links.find((function(e){return e.Name===t}));return r&&r.Hash},WR={raw:FR,file:FR,directory:VR,"hamt-sharded-directory":HR,metadata:function(e,t,r,n,a,i,o){return function(){return[]}},symlink:function(e,t,r,n,a,i,o){return function(){return[]}}},YR=function(){var e=An(En().mark((function e(t,r,n,a,i,o,s,u){var c,l,f,h,p,d,v;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get(t,u);case 2:if(c=e.sent,l=CR(c),r||(r=t.toString()),null!=l.Data){e.next=7;break}throw ca(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");case 7:e.prev=7,f=_a.unmarshal(l.Data),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(7),ca(e.t0,"ERR_NOT_UNIXFS");case 14:if(n||(n=r),!a.length){e.next=28;break}if(!f||"hamt-sharded-directory"!==f.type){e.next=22;break}return e.next=19,OR(l,a[0],s);case 19:p=e.sent,e.next=23;break;case 22:p=GR(l,a[0]);case 23:if(p){e.next=25;break}throw ca(new Error("file does not exist"),"ERR_NOT_FOUND");case 25:d=a.shift(),v="".concat(n,"/").concat(d),h={cid:p,toResolve:a,name:d||"",path:v};case 28:return e.abrupt("return",{entry:{type:f.isDirectory()?"directory":"file",name:r,path:n,cid:t,content:WR[f.type](t,l,f,n,i,o,s),unixfs:f,depth:o,node:l,size:f.fileSize()},next:h});case 29:case"end":return e.stop()}}),e,null,[[7,11]])})));return function(t,r,n,a,i,o,s,u){return e.apply(this,arguments)}}(),QR=YR,JR=function(e){function t(){return t=Hn((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En().mark((function r(){var n,a,i;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=UR(e.length,t.offset,t.length),a=n.offset,i=n.length,r.next=3,BR(e,0,a,a+i);case 3:case"end":return r.stop()}}),r)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}},ZR=function(){var e=An(En().mark((function e(t,r,n,a,i,o,s,u){var c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.length){e.next=2;break}throw ca(new Error("No link named ".concat(n," found in raw node ").concat(t)),"ERR_NOT_FOUND");case 2:return e.next=4,s.get(t,u);case 4:return c=e.sent,e.abrupt("return",{entry:{type:"raw",name:r,path:n,cid:t,content:JR(c),depth:o,size:c.length,node:c}});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,o,s,u){return e.apply(this,arguments)}}(),XR=ZR,$R=function(){var e=An(En().mark((function e(t,r,n,a,i,o,s,u){var c,l,f,h,p,d;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get(t);case 2:c=e.sent,l=Vs(c,IR),f=l,h=n;case 6:if(!a.length){e.next=20;break}if(!((p=a[0])in f)){e.next=17;break}if(a.shift(),h="".concat(h,"/").concat(p),!(d=dR.asCID(f[p]))){e.next=14;break}return e.abrupt("return",{entry:{type:"object",name:r,path:n,cid:t,node:c,depth:o,size:c.length,content:function(){var e=Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},next:{cid:d,name:p,path:h,toResolve:a}});case 14:f=f[p],e.next=18;break;case 17:throw ca(new Error("No property named ".concat(p," found in cbor node ").concat(t)),"ERR_NO_PROP");case 18:e.next=6;break;case 20:return e.abrupt("return",{entry:{type:"object",name:r,path:n,cid:t,node:c,depth:o,size:c.length,content:function(){var e=Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}});case 21:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,o,s,u){return e.apply(this,arguments)}}(),eP=$R,tP=function(e){function t(){return t=Hn((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En().mark((function r(){var n,a,i;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=UR(e.length,t.offset,t.length),a=n.offset,i=n.length,r.next=3,BR(e,0,a,a+i);case 3:case"end":return r.stop()}}),r)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}},rP=function(){var e=An(En().mark((function e(t,r,n,a,i,o,s,u){var c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.length){e.next=2;break}throw ca(new Error("No link named ".concat(n," found in raw node ").concat(t)),"ERR_NOT_FOUND");case 2:return e.next=4,ZD(t.multihash.bytes);case 4:return c=e.sent,e.abrupt("return",{entry:{type:"identity",name:r,path:n,cid:t,content:tP(c.digest),depth:o,size:c.digest.length,node:c.digest}});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,o,s,u){return e.apply(this,arguments)}}(),nP=rP,aP=(Mn(KR={},112,QR),Mn(KR,85,XR),Mn(KR,113,eP),Mn(KR,TR,nP),KR);var iP=function e(t,r,n,a,i,o,s){var u=aP[t.code];if(!u)throw ca(new Error("No resolver for code ".concat(t.code)),"ERR_NO_RESOLVER");return u(t,r,n,a,e,i,o,s)},oP=function(e){if(e instanceof Uint8Array)return{cid:dR.decode(e),toResolve:[]};var t=dR.asCID(e);if(t)return{cid:t,toResolve:[]};if("string"===typeof e){0===e.indexOf("/ipfs/")&&(e=e.substring(6));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}(e);return{cid:dR.parse(r[0]),toResolve:r.slice(1)}}throw ca(new Error("Unknown path type ".concat(e)),"ERR_BAD_PATH")};function sP(e,t){return uP.apply(this,arguments)}function uP(){return uP=Hn((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return En().mark((function n(){var a,i,o,s,u,c,l;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=oP(e),i=a.cid,o=a.toResolve,s=i.toString(),u=s,c=o.length;case 4:return n.next=7,Mf(iP(i,s,u,o,c,t,r));case 7:if((l=n.sent).entry||l.next){n.next=10;break}throw ca(new Error("Could not resolve ".concat(e)),"ERR_NOT_FOUND");case 10:if(!l.entry){n.next=13;break}return n.next=13,l.entry;case 13:if(l.next){n.next=15;break}return n.abrupt("return");case 15:o=l.next.toResolve,i=l.next.cid,s=l.next.name,u=l.next.path,n.next=4;break;case 21:case"end":return n.stop()}}),n)}))()})),uP.apply(this,arguments)}function cP(e,t){return lP.apply(this,arguments)}function lP(){return lP=An(En().mark((function e(t,r){var n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,Sb(sP(t,r,n));case 3:if(a=e.sent){e.next=6;break}throw ca(new Error("Could not resolve ".concat(t)),"ERR_NOT_FOUND");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),lP.apply(this,arguments)}function fP(e,t){return hP.apply(this,arguments)}function hP(){return hP=Hn((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return En().mark((function n(){var a,i,o,s,u,c,l,f,h;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return h=function(){return h=Hn(En().mark((function e(t,r){var n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=zn(t.content(r));case 4:return e.next=6,Mf(o.next());case 6:if(!(n=!(s=e.sent).done)){e.next=17;break}return u=s.value,e.next=10,u;case 10:if(!(u instanceof Uint8Array)){e.next=12;break}return e.abrupt("continue",14);case 12:if("directory"!==u.type){e.next=14;break}return e.delegateYield(Cb(zn(f(u,r))),"t0",14);case 14:n=!1,e.next=4;break;case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(2),a=!0,i=e.t1;case 23:if(e.prev=23,e.prev=24,!n||null==o.return){e.next=28;break}return e.next=28,Mf(o.return());case 28:if(e.prev=28,!a){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[2,19,23,33],[24,,28,32]])}))),h.apply(this,arguments)},f=function(e,t){return h.apply(this,arguments)},n.next=4,Mf(cP(e,t,r));case 4:if(a=n.sent){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,a;case 9:if("directory"!==a.type){n.next=39;break}i=!1,o=!1,n.prev=12,u=zn(f(a,r));case 14:return n.next=16,Mf(u.next());case 16:if(!(i=!(c=n.sent).done)){n.next=23;break}return l=c.value,n.next=20,l;case 20:i=!1,n.next=14;break;case 23:n.next=29;break;case 25:n.prev=25,n.t0=n.catch(12),o=!0,s=n.t0;case 29:if(n.prev=29,n.prev=30,!i||null==u.return){n.next=34;break}return n.next=34,Mf(u.return());case 34:if(n.prev=34,!o){n.next=37;break}throw s;case 37:return n.finish(34);case 38:return n.finish(29);case 39:case"end":return n.stop()}}),n,null,[[12,25,29,39],[30,,34,38]])}))()})),hP.apply(this,arguments)}"0".charCodeAt(0),Bf("ustar\0","binary"),Bf("ustar ","binary"),Bf(" \0","binary");var pP=__webpack_require__(4569);function dP(e){return vP.apply(this,arguments)}function vP(){return vP=An(En().mark((function e(t){var r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Uint8Array(0),n=!1,a=!1,e.prev=3,o=zn(t);case 5:return e.next=7,o.next();case 7:if(!(n=!(s=e.sent).done)){e.next=13;break}u=s.value,r=ld([r,u],r.length+u.length);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])}))),vP.apply(this,arguments)}var yP="0".charCodeAt(0),bP=Bf("ustar\0","binary"),gP=Bf("00","binary"),mP=parseInt("7777",8),wP=function(e,t){var r=e.toString(8);return r.length>t?Bf("7777777777777777777".slice(0,t)+" "):Bf("0000000000000000000".slice(0,t-r.length)+r+" ")},kP=function(e){var t=Bf(e).byteLength,r=Math.floor(Math.log(t)/Math.log(10))+1;return t+r>=Math.pow(10,r)&&r++,"".concat(t+r).concat(e)};function xP(e){var t,r,n=new Uint8Array(512),a=e.name,i="";if(5===e.typeflag&&"/"!==a[a.length-1]&&(a+="/"),Bf(a).byteLength!==a.length)return null;for(;Bf(a).byteLength>100;){var o=a.indexOf("/");if(-1===o)return null;i+=""!==i?"/"+a.slice(0,o):a.slice(0,o),a=a.slice(o+1)}return Bf(a).byteLength>100||Bf(i).byteLength>155||null!=e.linkname&&Bf(e.linkname).byteLength>100?null:(n.set(Bf(a),0),n.set(wP(e.mode&mP,6),100),n.set(wP(e.uid,6),108),n.set(wP(e.gid,6),116),n.set(wP(e.size,11),124),n.set(wP(e.mtime.getTime()/1e3|0,11),136),n[156]=yP+function(e){switch(e){case"file":default:return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}}(e.type),null!=e.linkname&&n.set(Bf(e.linkname),157),n.set(bP,257),n.set(gP,263),null!=e.uname&&n.set(Bf(e.uname),265),null!=e.gname&&n.set(Bf(e.gname),297),n.set(wP(null!==(t=e.devmajor)&&void 0!==t?t:0,6),329),n.set(wP(null!==(r=e.devminor)&&void 0!==r?r:0,6),337),null!=i&&n.set(Bf(i),345),n.set(wP(function(e){for(var t=256,r=0;r<148;r++)t+=e[r];for(var n=156;n<512;n++)t+=e[n];return t}(n),6),148),n)}var _P=pP.S_IFMT,EP=pP.S_IFBLK,SP=pP.S_IFCHR,AP=pP.S_IFDIR,CP=pP.S_IFIFO,IP=pP.S_IFLNK,TP=parseInt("755",8),DP=parseInt("644",8),RP=new Uint8Array(1024);function PP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e&_P){case EP:return"block-device";case SP:return"character-device";case AP:return"directory";case CP:return"fifo";case IP:return"symlink";default:return"file"}}function NP(e){return 0!==(e&=511)?RP.subarray(0,512-e):new Uint8Array(0)}function LP(e){if(null==e.pax){var t=xP(e);if(null!=t)return t}return function(e){var t,r,n=function(e){var t="";null!=e.name&&(t+=kP(" path="+e.name+"\n")),null!=e.linkname&&(t+=kP(" linkpath="+e.linkname+"\n"));var r=e.pax;if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t+=kP(" "+n+"="+r[n]+"\n"));return Bf(t)}(e),a={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:n.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname,uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};return new ST(null!==(t=xP(a))&&void 0!==t?t:new Uint8Array(0),n,NP(n.length),null!==(r=xP(jn(jn({},a),{},{size:e.size,type:e.type})))&&void 0!==r?r:new Uint8Array(0)).subarray()}(e)}function OP(){return function(){var e=Hn(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=zn(t);case 4:return e.next=6,Mf(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=72;break}if(s=o.value,u=s.header,c=s.body,y=jn(jn({},u),{},{size:"symlink"===u.type?0:null!==(l=u.size)&&void 0!==l?l:0,type:null!==(f=u.type)&&void 0!==f?f:PP(u.mode),mode:null!==(h=u.mode)&&void 0!==h?h:"directory"===u.type?TP:DP,uid:null!==(p=u.uid)&&void 0!==p?p:0,gid:null!==(d=u.gid)&&void 0!==d?d:0,mtime:null!==(v=u.mtime)&&void 0!==v?v:new Date}),"string"===typeof c&&(c=Bf(c)),!(c instanceof Uint8Array||ET(c))){e.next=19;break}return y.size=c.length,e.next=14,LP(y);case 14:return e.next=16,ET(c)?c.subarray():c;case 16:return e.next=18,NP(y.size);case 18:return e.abrupt("continue",69);case 19:if("symlink"!==y.type||null!=y.linkname){e.next=30;break}if(null!=c){e.next=22;break}throw new Error("type was symlink but no linkname or body specified");case 22:return e.t0=kh,e.next=25,Mf(dP(c));case 25:return e.t1=e.sent,y.linkname=(0,e.t0)(e.t1),e.next=29,LP(y);case 29:return e.abrupt("continue",69);case 30:return e.next=32,LP(y);case 32:if("file"===y.type||"contiguous-file"===y.type){e.next=34;break}return e.abrupt("continue",69);case 34:b=0,g=!1,m=!1,e.prev=37,k=zn(null!==(_=c)&&void 0!==_?_:[]);case 39:return e.next=41,Mf(k.next());case 41:if(!(g=!(x=e.sent).done)){e.next=49;break}return E=x.value,b+=E.length,e.next=46,ET(E)?E.subarray():E;case 46:g=!1,e.next=39;break;case 49:e.next=55;break;case 51:e.prev=51,e.t2=e.catch(37),m=!0,w=e.t2;case 55:if(e.prev=55,e.prev=56,!g||null==k.return){e.next=60;break}return e.next=60,Mf(k.return());case 60:if(e.prev=60,!m){e.next=63;break}throw w;case 63:return e.finish(60);case 64:return e.finish(55);case 65:if(b===y.size){e.next=67;break}throw new Error("size mismatch, wrote ".concat(b," of ").concat(y.size," bytes"));case 67:return e.next=69,NP(y.size);case 69:r=!1,e.next=4;break;case 72:e.next=78;break;case 74:e.prev=74,e.t3=e.catch(2),n=!0,a=e.t3;case 78:if(e.prev=78,e.prev=79,!r||null==i.return){e.next=83;break}return e.next=83,Mf(i.return());case 83:if(e.prev=83,!n){e.next=86;break}throw a;case 86:return e.finish(83);case 87:return e.finish(78);case 88:return e.next=90,RP;case 90:case"end":return e.stop()}}),e,null,[[2,74,78,88],[37,51,55,65],[56,,60,64],[79,,83,87]])})));return function(t){return e.apply(this,arguments)}}()}function BP(e){for(var t=e.length;--t>=0;)e[t]=0}var UP=256,MP=286,zP=30,FP=15,VP=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),jP=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),qP=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),KP=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),HP=new Array(576);BP(HP);var GP=new Array(60);BP(GP);var WP=new Array(512);BP(WP);var YP=new Array(256);BP(YP);var QP=new Array(29);BP(QP);var JP,ZP,XP,$P=new Array(zP);function eN(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}function tN(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}BP($P);var rN=function(e){return e<256?WP[e]:WP[256+(e>>>7)]},nN=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},aN=function(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,nN(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},iN=function(e,t,r){aN(e,r[2*t],r[2*t+1])},oN=function(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},sN=function(e,t,r){var n,a,i=new Array(16),o=0;for(n=1;n<=FP;n++)i[n]=o=o+r[n-1]<<1;for(a=0;a<=t;a++){var s=e[2*a+1];0!==s&&(e[2*a]=oN(i[s]++,s))}},uN=function(e){var t;for(t=0;t<MP;t++)e.dyn_ltree[2*t]=0;for(t=0;t<zP;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},cN=function(e){e.bi_valid>8?nN(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},lN=function(e,t,r,n){var a=2*t,i=2*r;return e[a]<e[i]||e[a]===e[i]&&n[t]<=n[r]},fN=function(e,t,r){for(var n=e.heap[r],a=r<<1;a<=e.heap_len&&(a<e.heap_len&&lN(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!lN(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},hN=function(e,t,r){var n,a,i,o,s=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],a=e.pending_buf[e.l_buf+s],s++,0===n?iN(e,a,t):(i=YP[a],iN(e,i+UP+1,t),0!==(o=VP[i])&&(a-=QP[i],aN(e,a,o)),n--,i=rN(n),iN(e,i,r),0!==(o=jP[i])&&(n-=$P[i],aN(e,n,o)))}while(s<e.last_lit);iN(e,256,t)},pN=function(e,t){var r,n,a,i=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==i[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[a]=0,e.opt_len--,s&&(e.static_len-=o[2*a+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)fN(e,i,r);a=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],fN(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,i[2*a]=i[2*r]+i[2*n],e.depth[a]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,i[2*r+1]=i[2*n+1]=a,e.heap[1]=a++,fN(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,a,i,o,s,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,d=t.stat_desc.max_length,v=0;for(i=0;i<=FP;i++)e.bl_count[i]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)(i=u[2*u[2*(n=e.heap[r])+1]+1]+1)>d&&(i=d,v++),u[2*n+1]=i,n>c||(e.bl_count[i]++,o=0,n>=p&&(o=h[n-p]),s=u[2*n],e.opt_len+=s*(i+o),f&&(e.static_len+=s*(l[2*n+1]+o)));if(0!==v){do{for(i=d-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[d]--,v-=2}while(v>0);for(i=d;0!==i;i--)for(n=e.bl_count[i];0!==n;)(a=e.heap[--r])>c||(u[2*a+1]!==i&&(e.opt_len+=(i-u[2*a+1])*u[2*a],u[2*a+1]=i),n--)}}(e,t),sN(i,c,e.bl_count)},dN=function(e,t,r){var n,a,i=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)a=o,o=t[2*(n+1)+1],++s<u&&a===o||(s<c?e.bl_tree[2*a]+=s:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,i=a,0===o?(u=138,c=3):a===o?(u=6,c=3):(u=7,c=4))},vN=function(e,t,r){var n,a,i=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),n=0;n<=r;n++)if(a=o,o=t[2*(n+1)+1],!(++s<u&&a===o)){if(s<c)do{iN(e,a,e.bl_tree)}while(0!==--s);else 0!==a?(a!==i&&(iN(e,a,e.bl_tree),s--),iN(e,16,e.bl_tree),aN(e,s-3,2)):s<=10?(iN(e,17,e.bl_tree),aN(e,s-3,3)):(iN(e,18,e.bl_tree),aN(e,s-11,7));s=0,i=a,0===o?(u=138,c=3):a===o?(u=6,c=3):(u=7,c=4)}},yN=!1,bN=function(e,t,r,n){aN(e,0+(n?1:0),3),function(e,t,r,n){cN(e),n&&(nN(e,r),nN(e,~r)),e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r}(e,t,r,!0)},gN=function(e){yN||(!function(){var e,t,r,n,a,i=new Array(16);for(r=0,n=0;n<28;n++)for(QP[n]=r,e=0;e<1<<VP[n];e++)YP[r++]=n;for(YP[r-1]=n,a=0,n=0;n<16;n++)for($P[n]=a,e=0;e<1<<jP[n];e++)WP[a++]=n;for(a>>=7;n<zP;n++)for($P[n]=a<<7,e=0;e<1<<jP[n]-7;e++)WP[256+a++]=n;for(t=0;t<=FP;t++)i[t]=0;for(e=0;e<=143;)HP[2*e+1]=8,e++,i[8]++;for(;e<=255;)HP[2*e+1]=9,e++,i[9]++;for(;e<=279;)HP[2*e+1]=7,e++,i[7]++;for(;e<=287;)HP[2*e+1]=8,e++,i[8]++;for(sN(HP,287,i),e=0;e<zP;e++)GP[2*e+1]=5,GP[2*e]=oN(e,5);JP=new eN(HP,VP,257,MP,FP),ZP=new eN(GP,jP,0,zP,FP),XP=new eN(new Array(0),qP,0,19,7)}(),yN=!0),e.l_desc=new tN(e.dyn_ltree,JP),e.d_desc=new tN(e.dyn_dtree,ZP),e.bl_desc=new tN(e.bl_tree,XP),e.bi_buf=0,e.bi_valid=0,uN(e)},mN=function(e,t,r,n){var a,i,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<UP;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),pN(e,e.l_desc),pN(e,e.d_desc),o=function(e){var t;for(dN(e,e.dyn_ltree,e.l_desc.max_code),dN(e,e.dyn_dtree,e.d_desc.max_code),pN(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*KP[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=r+5,r+4<=a&&-1!==t?bN(e,t,r,n):4===e.strategy||i===a?(aN(e,2+(n?1:0),3),hN(e,HP,GP)):(aN(e,4+(n?1:0),3),function(e,t,r,n){var a;for(aN(e,t-257,5),aN(e,r-1,5),aN(e,n-4,4),a=0;a<n;a++)aN(e,e.bl_tree[2*KP[a]+1],3);vN(e,e.dyn_ltree,t-1),vN(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),hN(e,e.dyn_ltree,e.dyn_dtree)),uN(e),n&&cN(e)},wN={_tr_init:gN,_tr_stored_block:bN,_tr_flush_block:mN,_tr_tally:function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(YP[r]+UP+1)]++,e.dyn_dtree[2*rN(t)]++),e.last_lit===e.lit_bufsize-1},_tr_align:function(e){aN(e,2,3),iN(e,256,HP),function(e){16===e.bi_valid?(nN(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},kN=function(e,t,r,n){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{i=i+(a=a+t[n++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0},xN=new Uint32Array(function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}()),_N=function(e,t,r,n){var a=xN,i=n+r;e^=-1;for(var o=n;o<i;o++)e=e>>>8^a[255&(e^t[o])];return-1^e},EN={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},SN={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},AN=wN._tr_init,CN=wN._tr_stored_block,IN=wN._tr_flush_block,TN=wN._tr_tally,DN=wN._tr_align,RN=SN.Z_NO_FLUSH,PN=SN.Z_PARTIAL_FLUSH,NN=SN.Z_FULL_FLUSH,LN=SN.Z_FINISH,ON=SN.Z_BLOCK,BN=SN.Z_OK,UN=SN.Z_STREAM_END,MN=SN.Z_STREAM_ERROR,zN=SN.Z_DATA_ERROR,FN=SN.Z_BUF_ERROR,VN=SN.Z_DEFAULT_COMPRESSION,jN=SN.Z_FILTERED,qN=SN.Z_HUFFMAN_ONLY,KN=SN.Z_RLE,HN=SN.Z_FIXED,GN=SN.Z_DEFAULT_STRATEGY,WN=SN.Z_UNKNOWN,YN=SN.Z_DEFLATED,QN=258,JN=262,ZN=103,XN=113,$N=666,eL=function(e,t){return e.msg=EN[t],t},tL=function(e){return(e<<1)-(e>4?9:0)},rL=function(e){for(var t=e.length;--t>=0;)e[t]=0},nL=function(e,t,r){return(t<<e.hash_shift^r)&e.hash_mask},aL=function(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},iL=function(e,t){IN(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,aL(e.strm)},oL=function(e,t){e.pending_buf[e.pending++]=t},sL=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},uL=function(e,t,r,n){var a=e.avail_in;return a>n&&(a=n),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),1===e.state.wrap?e.adler=kN(e.adler,t,a,r):2===e.state.wrap&&(e.adler=_N(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},cL=function(e,t){var r,n,a=e.max_chain_length,i=e.strstart,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-JN?e.strstart-(e.w_size-JN):0,c=e.window,l=e.w_mask,f=e.prev,h=e.strstart+QN,p=c[i+o-1],d=c[i+o];e.prev_length>=e.good_match&&(a>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(r=t)+o]===d&&c[r+o-1]===p&&c[r]===c[i]&&c[++r]===c[i+1]){i+=2,r++;do{}while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<h);if(n=QN-(h-i),i=h-QN,n>o){if(e.match_start=t,o=n,n>=s)break;p=c[i+o-1],d=c[i+o]}}}while((t=f[t&l])>u&&0!==--a);return o<=e.lookahead?o:e.lookahead},lL=function(e){var t,r,n,a,i,o=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-JN)){e.window.set(e.window.subarray(o,o+o),0),e.match_start-=o,e.strstart-=o,e.block_start-=o,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=o?n-o:0}while(--r);t=r=o;do{n=e.prev[--t],e.prev[t]=n>=o?n-o:0}while(--r);a+=o}if(0===e.strm.avail_in)break;if(r=uL(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=r,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=nL(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=nL(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<JN&&0!==e.strm.avail_in)},fL=function(e,t){for(var r,n;;){if(e.lookahead<JN){if(lL(e),e.lookahead<JN&&t===RN)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=nL(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-JN&&(e.match_length=cL(e,r)),e.match_length>=3)if(n=TN(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=nL(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=nL(e,e.ins_h,e.window[e.strstart+1]);else n=TN(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(iL(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===LN?(iL(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(iL(e,!1),0===e.strm.avail_out)?1:2},hL=function(e,t){for(var r,n,a;;){if(e.lookahead<JN){if(lL(e),e.lookahead<JN&&t===RN)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=nL(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-JN&&(e.match_length=cL(e,r),e.match_length<=5&&(e.strategy===jN||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,n=TN(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=nL(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(iL(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=TN(e,0,e.window[e.strstart-1]))&&iL(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=TN(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===LN?(iL(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(iL(e,!1),0===e.strm.avail_out)?1:2};function pL(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}var dL=[new pL(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(lL(e),0===e.lookahead&&t===RN)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,iL(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-JN&&(iL(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===LN?(iL(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(iL(e,!1),e.strm.avail_out),1)})),new pL(4,4,8,4,fL),new pL(4,5,16,8,fL),new pL(4,6,32,32,fL),new pL(4,4,16,16,hL),new pL(8,16,32,32,hL),new pL(8,16,128,128,hL),new pL(8,32,128,256,hL),new pL(32,128,258,1024,hL),new pL(32,258,258,4096,hL)];function vL(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=YN,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),rL(this.dyn_ltree),rL(this.dyn_dtree),rL(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),rL(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),rL(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var yL=function(e){if(!e||!e.state)return eL(e,MN);e.total_in=e.total_out=0,e.data_type=WN;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:XN,e.adler=2===t.wrap?0:1,t.last_flush=RN,AN(t),BN},bL=function(e){var t,r=yL(e);return r===BN&&((t=e.state).window_size=2*t.w_size,rL(t.head),t.max_lazy_match=dL[t.level].max_lazy,t.good_match=dL[t.level].good_length,t.nice_match=dL[t.level].nice_length,t.max_chain_length=dL[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r},gL=function(e,t,r,n,a,i){if(!e)return MN;var o=1;if(t===VN&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),a<1||a>9||r!==YN||n<8||n>15||t<0||t>9||i<0||i>HN)return eL(e,MN);8===n&&(n=9);var s=new vL;return e.state=s,s.strm=e,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=i,s.method=r,bL(e)},mL=function(e,t){var r,n;if(!e||!e.state||t>ON||t<0)return e?eL(e,MN):MN;var a=e.state;if(!e.output||!e.input&&0!==e.avail_in||a.status===$N&&t!==LN)return eL(e,0===e.avail_out?FN:MN);a.strm=e;var i=a.last_flush;if(a.last_flush=t,42===a.status)if(2===a.wrap)e.adler=0,oL(a,31),oL(a,139),oL(a,8),a.gzhead?(oL(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),oL(a,255&a.gzhead.time),oL(a,a.gzhead.time>>8&255),oL(a,a.gzhead.time>>16&255),oL(a,a.gzhead.time>>24&255),oL(a,9===a.level?2:a.strategy>=qN||a.level<2?4:0),oL(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(oL(a,255&a.gzhead.extra.length),oL(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=_N(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(oL(a,0),oL(a,0),oL(a,0),oL(a,0),oL(a,0),oL(a,9===a.level?2:a.strategy>=qN||a.level<2?4:0),oL(a,3),a.status=XN);else{var o=YN+(a.w_bits-8<<4)<<8;o|=(a.strategy>=qN||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(o|=32),o+=31-o%31,a.status=XN,sL(a,o),0!==a.strstart&&(sL(a,e.adler>>>16),sL(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(r=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>r&&(e.adler=_N(e.adler,a.pending_buf,a.pending-r,r)),aL(e),r=a.pending,a.pending!==a.pending_buf_size));)oL(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>r&&(e.adler=_N(e.adler,a.pending_buf,a.pending-r,r)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){r=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>r&&(e.adler=_N(e.adler,a.pending_buf,a.pending-r,r)),aL(e),r=a.pending,a.pending===a.pending_buf_size)){n=1;break}n=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,oL(a,n)}while(0!==n);a.gzhead.hcrc&&a.pending>r&&(e.adler=_N(e.adler,a.pending_buf,a.pending-r,r)),0===n&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){r=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>r&&(e.adler=_N(e.adler,a.pending_buf,a.pending-r,r)),aL(e),r=a.pending,a.pending===a.pending_buf_size)){n=1;break}n=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,oL(a,n)}while(0!==n);a.gzhead.hcrc&&a.pending>r&&(e.adler=_N(e.adler,a.pending_buf,a.pending-r,r)),0===n&&(a.status=ZN)}else a.status=ZN;if(a.status===ZN&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&aL(e),a.pending+2<=a.pending_buf_size&&(oL(a,255&e.adler),oL(a,e.adler>>8&255),e.adler=0,a.status=XN)):a.status=XN),0!==a.pending){if(aL(e),0===e.avail_out)return a.last_flush=-1,BN}else if(0===e.avail_in&&tL(t)<=tL(i)&&t!==LN)return eL(e,FN);if(a.status===$N&&0!==e.avail_in)return eL(e,FN);if(0!==e.avail_in||0!==a.lookahead||t!==RN&&a.status!==$N){var s=a.strategy===qN?function(e,t){for(var r;;){if(0===e.lookahead&&(lL(e),0===e.lookahead)){if(t===RN)return 1;break}if(e.match_length=0,r=TN(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(iL(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===LN?(iL(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(iL(e,!1),0===e.strm.avail_out)?1:2}(a,t):a.strategy===KN?function(e,t){for(var r,n,a,i,o=e.window;;){if(e.lookahead<=QN){if(lL(e),e.lookahead<=QN&&t===RN)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=o[a=e.strstart-1])===o[++a]&&n===o[++a]&&n===o[++a]){i=e.strstart+QN;do{}while(n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&a<i);e.match_length=QN-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=TN(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=TN(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(iL(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===LN?(iL(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(iL(e,!1),0===e.strm.avail_out)?1:2}(a,t):dL[a.level].func(a,t);if(3!==s&&4!==s||(a.status=$N),1===s||3===s)return 0===e.avail_out&&(a.last_flush=-1),BN;if(2===s&&(t===PN?DN(a):t!==ON&&(CN(a,0,0,!1),t===NN&&(rL(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),aL(e),0===e.avail_out))return a.last_flush=-1,BN}return t!==LN?BN:a.wrap<=0?UN:(2===a.wrap?(oL(a,255&e.adler),oL(a,e.adler>>8&255),oL(a,e.adler>>16&255),oL(a,e.adler>>24&255),oL(a,255&e.total_in),oL(a,e.total_in>>8&255),oL(a,e.total_in>>16&255),oL(a,e.total_in>>24&255)):(sL(a,e.adler>>>16),sL(a,65535&e.adler)),aL(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?BN:UN)},wL=function(e,t){var r=t.length;if(!e||!e.state)return MN;var n=e.state,a=n.wrap;if(2===a||1===a&&42!==n.status||n.lookahead)return MN;if(1===a&&(e.adler=kN(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===a&&(rL(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(t.subarray(r-n.w_size,r),0),t=i,r=n.w_size}var o=e.avail_in,s=e.next_in,u=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,lL(n);n.lookahead>=3;){var c=n.strstart,l=n.lookahead-2;do{n.ins_h=nL(n,n.ins_h,n.window[c+3-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++}while(--l);n.strstart=c,n.lookahead=2,lL(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=u,e.avail_in=o,n.wrap=a,BN},kL={deflateInit:function(e,t){return gL(e,t,YN,15,8,GN)},deflateInit2:gL,deflateReset:bL,deflateResetKeep:yL,deflateSetHeader:function(e,t){return e&&e.state?2!==e.state.wrap?MN:(e.state.gzhead=t,BN):MN},deflate:mL,deflateEnd:function(e){if(!e||!e.state)return MN;var t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==ZN&&t!==XN&&t!==$N?eL(e,MN):(e.state=null,t===XN?eL(e,zN):BN)},deflateSetDictionary:wL,deflateInfo:"pako deflate (from Nodeca project)"},xL=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},_L=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==typeof r)throw new TypeError(r+"must be non-object");for(var n in r)xL(r,n)&&(e[n]=r[n])}}return e},EL=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var a=new Uint8Array(t),i=0,o=0,s=e.length;i<s;i++){var u=e[i];a.set(u,o),o+=u.length}return a},SL=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(K_e){SL=!1}for(var AL=new Uint8Array(256),CL=0;CL<256;CL++)AL[CL]=CL>=252?6:CL>=248?5:CL>=240?4:CL>=224?3:CL>=192?2:1;AL[254]=AL[254]=1;var IL=function(e){if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,r,n,a,i,o=e.length,s=0;for(a=0;a<o;a++)55296===(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320===(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),i=0,a=0;i<s;a++)55296===(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320===(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|63&r):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|63&r):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|63&r);return t},TL=function(e,t){var r,n,a=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var i=new Array(2*a);for(n=0,r=0;r<a;){var o=e[r++];if(o<128)i[n++]=o;else{var s=AL[o];if(s>4)i[n++]=65533,r+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&r<a;)o=o<<6|63&e[r++],s--;s>1?i[n++]=65533:o<65536?i[n++]=o:(o-=65536,i[n++]=55296|o>>10&1023,i[n++]=56320|1023&o)}}}return function(e,t){if(t<65534&&e.subarray&&SL)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}(i,n)},DL=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&128===(192&e[r]);)r--;return r<0||0===r?t:r+AL[e[r]]>t?r:t};var RL=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},PL=Object.prototype.toString,NL=SN.Z_NO_FLUSH,LL=SN.Z_SYNC_FLUSH,OL=SN.Z_FULL_FLUSH,BL=SN.Z_FINISH,UL=SN.Z_OK,ML=SN.Z_STREAM_END,zL=SN.Z_DEFAULT_COMPRESSION,FL=SN.Z_DEFAULT_STRATEGY,VL=SN.Z_DEFLATED;function jL(e){this.options=_L({level:zL,method:VL,chunkSize:16384,windowBits:15,memLevel:8,strategy:FL},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new RL,this.strm.avail_out=0;var r=kL.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==UL)throw new Error(EN[r]);if(t.header&&kL.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n="string"===typeof t.dictionary?IL(t.dictionary):"[object ArrayBuffer]"===PL.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=kL.deflateSetDictionary(this.strm,n))!==UL)throw new Error(EN[r]);this._dict_set=!0}}function qL(e,t){var r=new jL(t);if(r.push(e,!0),r.err)throw r.msg||EN[r.err];return r.result}jL.prototype.push=function(e,t){var r,n,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=t===~~t?t:!0===t?BL:NL,"string"===typeof e?a.input=IL(e):"[object ArrayBuffer]"===PL.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(n===LL||n===OL)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if((r=kL.deflate(a,n))===ML)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),r=kL.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===UL;if(0!==a.avail_out){if(n>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},jL.prototype.onData=function(e){this.chunks.push(e)},jL.prototype.onEnd=function(e){e===UL&&(this.result=EL(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var KL={Deflate:jL,deflate:qL,deflateRaw:function(e,t){return(t=t||{}).raw=!0,qL(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,qL(e,t)},constants:SN},HL=function(e,t){var r,n,a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S,A=e.state;r=e.next_in,E=e.input,n=r+(e.avail_in-5),a=e.next_out,S=e.output,i=a-(t-e.avail_out),o=a+(e.avail_out-257),s=A.dmax,u=A.wsize,c=A.whave,l=A.wnext,f=A.window,h=A.hold,p=A.bits,d=A.lencode,v=A.distcode,y=(1<<A.lenbits)-1,b=(1<<A.distbits)-1;e:do{p<15&&(h+=E[r++]<<p,p+=8,h+=E[r++]<<p,p+=8),g=d[h&y];t:for(;;){if(h>>>=m=g>>>24,p-=m,0===(m=g>>>16&255))S[a++]=65535&g;else{if(!(16&m)){if(0===(64&m)){g=d[(65535&g)+(h&(1<<m)-1)];continue t}if(32&m){A.mode=12;break e}e.msg="invalid literal/length code",A.mode=30;break e}w=65535&g,(m&=15)&&(p<m&&(h+=E[r++]<<p,p+=8),w+=h&(1<<m)-1,h>>>=m,p-=m),p<15&&(h+=E[r++]<<p,p+=8,h+=E[r++]<<p,p+=8),g=v[h&b];r:for(;;){if(h>>>=m=g>>>24,p-=m,!(16&(m=g>>>16&255))){if(0===(64&m)){g=v[(65535&g)+(h&(1<<m)-1)];continue r}e.msg="invalid distance code",A.mode=30;break e}if(k=65535&g,p<(m&=15)&&(h+=E[r++]<<p,(p+=8)<m&&(h+=E[r++]<<p,p+=8)),(k+=h&(1<<m)-1)>s){e.msg="invalid distance too far back",A.mode=30;break e}if(h>>>=m,p-=m,k>(m=a-i)){if((m=k-m)>c&&A.sane){e.msg="invalid distance too far back",A.mode=30;break e}if(x=0,_=f,0===l){if(x+=u-m,m<w){w-=m;do{S[a++]=f[x++]}while(--m);x=a-k,_=S}}else if(l<m){if(x+=u+l-m,(m-=l)<w){w-=m;do{S[a++]=f[x++]}while(--m);if(x=0,l<w){w-=m=l;do{S[a++]=f[x++]}while(--m);x=a-k,_=S}}}else if(x+=l-m,m<w){w-=m;do{S[a++]=f[x++]}while(--m);x=a-k,_=S}for(;w>2;)S[a++]=_[x++],S[a++]=_[x++],S[a++]=_[x++],w-=3;w&&(S[a++]=_[x++],w>1&&(S[a++]=_[x++]))}else{x=a-k;do{S[a++]=S[x++],S[a++]=S[x++],S[a++]=S[x++],w-=3}while(w>2);w&&(S[a++]=S[x++],w>1&&(S[a++]=S[x++]))}break}}break}}while(r<n&&a<o);r-=w=p>>3,h&=(1<<(p-=w<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=a<o?o-a+257:257-(a-o),A.hold=h,A.bits=p},GL=15,WL=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),YL=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),QL=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),JL=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ZL=function(e,t,r,n,a,i,o,s){var u,c,l,f,h,p,d,v,y,b=s.bits,g=0,m=0,w=0,k=0,x=0,_=0,E=0,S=0,A=0,C=0,I=null,T=0,D=new Uint16Array(16),R=new Uint16Array(16),P=null,N=0;for(g=0;g<=GL;g++)D[g]=0;for(m=0;m<n;m++)D[t[r+m]]++;for(x=b,k=GL;k>=1&&0===D[k];k--);if(x>k&&(x=k),0===k)return a[i++]=20971520,a[i++]=20971520,s.bits=1,0;for(w=1;w<k&&0===D[w];w++);for(x<w&&(x=w),S=1,g=1;g<=GL;g++)if(S<<=1,(S-=D[g])<0)return-1;if(S>0&&(0===e||1!==k))return-1;for(R[1]=0,g=1;g<GL;g++)R[g+1]=R[g]+D[g];for(m=0;m<n;m++)0!==t[r+m]&&(o[R[t[r+m]]++]=m);if(0===e?(I=P=o,p=19):1===e?(I=WL,T-=257,P=YL,N-=257,p=256):(I=QL,P=JL,p=-1),C=0,m=0,g=w,h=i,_=x,E=0,l=-1,f=(A=1<<x)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){d=g-E,o[m]<p?(v=0,y=o[m]):o[m]>p?(v=P[N+o[m]],y=I[T+o[m]]):(v=96,y=0),u=1<<g-E,w=c=1<<_;do{a[h+(C>>E)+(c-=u)]=d<<24|v<<16|y|0}while(0!==c);for(u=1<<g-1;C&u;)u>>=1;if(0!==u?(C&=u-1,C+=u):C=0,m++,0===--D[g]){if(g===k)break;g=t[r+o[m]]}if(g>x&&(C&f)!==l){for(0===E&&(E=x),h+=w,S=1<<(_=g-E);_+E<k&&!((S-=D[_+E])<=0);)_++,S<<=1;if(A+=1<<_,1===e&&A>852||2===e&&A>592)return 1;a[l=C&f]=x<<24|_<<16|h-i|0}}return 0!==C&&(a[h+C]=g-E<<24|64<<16|0),s.bits=x,0},XL=SN.Z_FINISH,$L=SN.Z_BLOCK,eO=SN.Z_TREES,tO=SN.Z_OK,rO=SN.Z_STREAM_END,nO=SN.Z_NEED_DICT,aO=SN.Z_STREAM_ERROR,iO=SN.Z_DATA_ERROR,oO=SN.Z_MEM_ERROR,sO=SN.Z_BUF_ERROR,uO=SN.Z_DEFLATED,cO=12,lO=30,fO=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function hO(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var pO,dO,vO=function(e){if(!e||!e.state)return aO;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,tO},yO=function(e){if(!e||!e.state)return aO;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,vO(e)},bO=function(e,t){var r;if(!e||!e.state)return aO;var n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?aO:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,yO(e))},gO=function(e,t){if(!e)return aO;var r=new hO;e.state=r,r.window=null;var n=bO(e,t);return n!==tO&&(e.state=null),n},mO=!0,wO=function(e){if(mO){pO=new Int32Array(512),dO=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ZL(1,e.lens,0,288,pO,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ZL(2,e.lens,0,32,dO,0,e.work,{bits:5}),mO=!1}e.lencode=pO,e.lenbits=9,e.distcode=dO,e.distbits=5},kO=function(e,t,r,n){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),(n-=a)?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},xO=function(e,t){var r,n,a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S,A=0,C=new Uint8Array(4),I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return aO;(r=e.state).mode===cO&&(r.mode=13),o=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,c=r.hold,l=r.bits,f=s,h=u,_=tO;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(2&r.wrap&&35615===c){r.check=0,C[0]=255&c,C[1]=c>>>8&255,r.check=_N(r.check,C,2,0),c=0,l=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=lO;break}if((15&c)!==uO){e.msg="unknown compression method",r.mode=lO;break}if(l-=4,x=8+(15&(c>>>=4)),0===r.wbits)r.wbits=x;else if(x>r.wbits){e.msg="invalid window size",r.mode=lO;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&c?10:cO,c=0,l=0;break;case 2:for(;l<16;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(r.flags=c,(255&r.flags)!==uO){e.msg="unknown compression method",r.mode=lO;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=lO;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(C[0]=255&c,C[1]=c>>>8&255,r.check=_N(r.check,C,2,0)),c=0,l=0,r.mode=3;case 3:for(;l<32;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,r.check=_N(r.check,C,4,0)),c=0,l=0,r.mode=4;case 4:for(;l<16;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(C[0]=255&c,C[1]=c>>>8&255,r.check=_N(r.check,C,2,0)),c=0,l=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(C[0]=255&c,C[1]=c>>>8&255,r.check=_N(r.check,C,2,0)),c=0,l=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((p=r.length)>s&&(p=s),p&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+p),x)),512&r.flags&&(r.check=_N(r.check,n,p,i)),s-=p,i+=p,r.length-=p),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===s)break e;p=0;do{x=n[i+p++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x))}while(x&&p<s);if(512&r.flags&&(r.check=_N(r.check,n,p,i)),s-=p,i+=p,x)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===s)break e;p=0;do{x=n[i+p++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x))}while(x&&p<s);if(512&r.flags&&(r.check=_N(r.check,n,p,i)),s-=p,i+=p,x)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=lO;break}c=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=cO;break;case 10:for(;l<32;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}e.adler=r.check=fO(c),c=0,l=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=s,r.hold=c,r.bits=l,nO;e.adler=r.check=1,r.mode=cO;case cO:if(t===$L||t===eO)break e;case 13:if(r.last){c>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}switch(r.last=1&c,l-=1,3&(c>>>=1)){case 0:r.mode=14;break;case 1:if(wO(r),r.mode=20,t===eO){c>>>=2,l-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=lO}c>>>=2,l-=2;break;case 14:for(c>>>=7&l,l-=7&l;l<32;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if((65535&c)!==(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=lO;break}if(r.length=65535&c,c=0,l=0,r.mode=15,t===eO)break e;case 15:r.mode=16;case 16:if(p=r.length){if(p>s&&(p=s),p>u&&(p=u),0===p)break e;a.set(n.subarray(i,i+p),o),s-=p,i+=p,u-=p,o+=p,r.length-=p;break}r.mode=cO;break;case 17:for(;l<14;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=lO;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}r.lens[I[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[I[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E={bits:r.lenbits},_=ZL(0,r.lens,0,19,r.lencode,0,r.work,E),r.lenbits=E.bits,_){e.msg="invalid code lengths set",r.mode=lO;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;b=(A=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,g=65535&A,!((y=A>>>24)<=l);){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(g<16)c>>>=y,l-=y,r.lens[r.have++]=g;else{if(16===g){for(S=y+2;l<S;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(c>>>=y,l-=y,0===r.have){e.msg="invalid bit length repeat",r.mode=lO;break}x=r.lens[r.have-1],p=3+(3&c),c>>>=2,l-=2}else if(17===g){for(S=y+3;l<S;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}l-=y,x=0,p=3+(7&(c>>>=y)),c>>>=3,l-=3}else{for(S=y+7;l<S;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}l-=y,x=0,p=11+(127&(c>>>=y)),c>>>=7,l-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=lO;break}for(;p--;)r.lens[r.have++]=x}}if(r.mode===lO)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=lO;break}if(r.lenbits=9,E={bits:r.lenbits},_=ZL(1,r.lens,0,r.nlen,r.lencode,0,r.work,E),r.lenbits=E.bits,_){e.msg="invalid literal/lengths set",r.mode=lO;break}if(r.distbits=6,r.distcode=r.distdyn,E={bits:r.distbits},_=ZL(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,E),r.distbits=E.bits,_){e.msg="invalid distances set",r.mode=lO;break}if(r.mode=20,t===eO)break e;case 20:r.mode=21;case 21:if(s>=6&&u>=258){e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=s,r.hold=c,r.bits=l,HL(e,h),o=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,c=r.hold,l=r.bits,r.mode===cO&&(r.back=-1);break}for(r.back=0;b=(A=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,g=65535&A,!((y=A>>>24)<=l);){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(b&&0===(240&b)){for(m=y,w=b,k=g;b=(A=r.lencode[k+((c&(1<<m+w)-1)>>m)])>>>16&255,g=65535&A,!(m+(y=A>>>24)<=l);){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}c>>>=m,l-=m,r.back+=m}if(c>>>=y,l-=y,r.back+=y,r.length=g,0===b){r.mode=26;break}if(32&b){r.back=-1,r.mode=cO;break}if(64&b){e.msg="invalid literal/length code",r.mode=lO;break}r.extra=15&b,r.mode=22;case 22:if(r.extra){for(S=r.extra;l<S;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;b=(A=r.distcode[c&(1<<r.distbits)-1])>>>16&255,g=65535&A,!((y=A>>>24)<=l);){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(0===(240&b)){for(m=y,w=b,k=g;b=(A=r.distcode[k+((c&(1<<m+w)-1)>>m)])>>>16&255,g=65535&A,!(m+(y=A>>>24)<=l);){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}c>>>=m,l-=m,r.back+=m}if(c>>>=y,l-=y,r.back+=y,64&b){e.msg="invalid distance code",r.mode=lO;break}r.offset=g,r.extra=15&b,r.mode=24;case 24:if(r.extra){for(S=r.extra;l<S;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=lO;break}r.mode=25;case 25:if(0===u)break e;if(p=h-u,r.offset>p){if((p=r.offset-p)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=lO;break}p>r.wnext?(p-=r.wnext,d=r.wsize-p):d=r.wnext-p,p>r.length&&(p=r.length),v=r.window}else v=a,d=o-r.offset,p=r.length;p>u&&(p=u),u-=p,r.length-=p;do{a[o++]=v[d++]}while(--p);0===r.length&&(r.mode=21);break;case 26:if(0===u)break e;a[o++]=r.length,u--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===s)break e;s--,c|=n[i++]<<l,l+=8}if(h-=u,e.total_out+=h,r.total+=h,h&&(e.adler=r.check=r.flags?_N(r.check,a,h,o-h):kN(r.check,a,h,o-h)),h=u,(r.flags?c:fO(c))!==r.check){e.msg="incorrect data check",r.mode=lO;break}c=0,l=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=lO;break}c=0,l=0}r.mode=29;case 29:_=rO;break e;case lO:_=iO;break e;case 31:return oO;default:return aO}return e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=s,r.hold=c,r.bits=l,(r.wsize||h!==e.avail_out&&r.mode<lO&&(r.mode<27||t!==XL))&&kO(e,e.output,e.next_out,h-e.avail_out),f-=e.avail_in,h-=e.avail_out,e.total_in+=f,e.total_out+=h,r.total+=h,r.wrap&&h&&(e.adler=r.check=r.flags?_N(r.check,a,h,e.next_out-h):kN(r.check,a,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(r.mode===cO?128:0)+(20===r.mode||15===r.mode?256:0),(0===f&&0===h||t===XL)&&_===tO&&(_=sO),_},_O={inflateReset:yO,inflateReset2:bO,inflateResetKeep:vO,inflateInit:function(e){return gO(e,15)},inflateInit2:gO,inflate:xO,inflateEnd:function(e){if(!e||!e.state)return aO;var t=e.state;return t.window&&(t.window=null),e.state=null,tO},inflateGetHeader:function(e,t){if(!e||!e.state)return aO;var r=e.state;return 0===(2&r.wrap)?aO:(r.head=t,t.done=!1,tO)},inflateSetDictionary:function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?aO:11===r.mode&&kN(1,t,n,0)!==r.check?iO:kO(e,t,n,n)?(r.mode=31,oO):(r.havedict=1,tO):aO},inflateInfo:"pako inflate (from Nodeca project)"};var EO=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},SO=Object.prototype.toString,AO=SN.Z_NO_FLUSH,CO=SN.Z_FINISH,IO=SN.Z_OK,TO=SN.Z_STREAM_END,DO=SN.Z_NEED_DICT,RO=SN.Z_STREAM_ERROR,PO=SN.Z_DATA_ERROR,NO=SN.Z_MEM_ERROR;function LO(e){this.options=_L({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new RL,this.strm.avail_out=0;var r=_O.inflateInit2(this.strm,t.windowBits);if(r!==IO)throw new Error(EN[r]);if(this.header=new EO,_O.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=IL(t.dictionary):"[object ArrayBuffer]"===SO.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=_O.inflateSetDictionary(this.strm,t.dictionary))!==IO))throw new Error(EN[r])}function OO(e,t){var r=new LO(t);if(r.push(e),r.err)throw r.msg||EN[r.err];return r.result}LO.prototype.push=function(e,t){var r,n,a,i=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?CO:AO,"[object ArrayBuffer]"===SO.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(r=_O.inflate(i,n))===DO&&s&&((r=_O.inflateSetDictionary(i,s))===IO?r=_O.inflate(i,n):r===PO&&(r=DO));i.avail_in>0&&r===TO&&i.state.wrap>0&&0!==e[i.next_in];)_O.inflateReset(i),r=_O.inflate(i,n);switch(r){case RO:case PO:case DO:case NO:return this.onEnd(r),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||r===TO))if("string"===this.options.to){var u=DL(i.output,i.next_out),c=i.next_out-u,l=TL(i.output,u);i.next_out=c,i.avail_out=o-c,c&&i.output.set(i.output.subarray(u,u+c),0),this.onData(l)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==IO||0!==a){if(r===TO)return r=_O.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},LO.prototype.onData=function(e){this.chunks.push(e)},LO.prototype.onEnd=function(e){e===IO&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=EL(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var BO={Inflate:LO,inflate:OO,inflateRaw:function(e,t){return(t=t||{}).raw=!0,OO(e,t)},ungzip:OO,constants:SN},UO={Deflate:KL.Deflate,deflate:KL.deflate,deflateRaw:KL.deflateRaw,gzip:KL.gzip,Inflate:BO.Inflate,inflate:BO.inflate,inflateRaw:BO.inflateRaw,ungzip:BO.ungzip,constants:SN};var MO=Dn((function e(t){var r=t.preload,n=t.repo,a=t.hashers,i=t.options;Cn(this,e);var o=function(e){var t=e.repo,r=e.preload,n=e.hashers,a=e.options,i=a&&a.sharding;function o(){return o=Hn((function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function o(){var s,u,c,l,f,h,p,d,v,y,b,g,m,w;return En().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if((s=ID({shardSplitThreshold:i?1e3:1/0,strategy:"balanced"},a,jn({},SD(a.chunker)))).hashAlg&&"sha2-256"!==s.hashAlg&&1!==s.cidVersion&&(s.cidVersion=1),s.trickle&&(s.strategy="trickle"),"trickle"===s.strategy&&(s.leafType="raw",s.reduceSingleLeafToSelf=!1),s.cidVersion>0&&void 0===s.rawLeaves&&(s.rawLeaves=!0),void 0!==s.hashAlg&&void 0===s.rawLeaves&&(s.rawLeaves=!0),delete s.trickle,u={},s.progress&&(c=s.progress,s.progress=function(e,t){u[t]||(u[t]=0),u[t]+=e,c(u[t],t)}),null==s.hashAlg){o.next=13;break}return o.next=12,Mf(n.getHasher(s.hashAlg));case 12:l=o.sent;case 13:return f=TS(ED(e),(function(e){return gD(e,t.blocks,jn(jn({},s),{},{hasher:l,pin:!1}))}),TD(s),DD(r,s),RD(t,s)),o.next=16,Mf(t.gcLock.readLock());case 16:h=o.sent,o.prev=17,p=!1,d=!1,o.prev=20,y=zn(f);case 22:return o.next=24,Mf(y.next());case 24:if(!(p=!(b=o.sent).done)){o.next=33;break}return g=b.value,w=null!==(m=g.path)&&void 0!==m?m:g.cid.toString(),delete u[w],o.next=30,jn(jn({},g),{},{path:w});case 30:p=!1,o.next=22;break;case 33:o.next=39;break;case 35:o.prev=35,o.t0=o.catch(20),d=!0,v=o.t0;case 39:if(o.prev=39,o.prev=40,!p||null==y.return){o.next=44;break}return o.next=44,Mf(y.return());case 44:if(o.prev=44,!d){o.next=47;break}throw v;case 47:return o.finish(44);case 48:return o.finish(39);case 49:return o.prev=49,h(),o.finish(49);case 52:case"end":return o.stop()}}),o,null,[[17,,49,52],[20,35,39,49],[40,,44,48]])}))()})),o.apply(this,arguments)}return $v((function(e){return o.apply(this,arguments)}))}({preload:r,repo:n,options:i,hashers:a});this.addAll=o,this.add=function(e){var t=e.addAll;function r(){return r=An(En().mark((function e(r){var n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,Sb(t(KA(r),n));case 3:if(null!=(a=e.sent)){e.next=6;break}throw Error("Failed to add a file, if you see this please report a bug");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}({addAll:o}),this.cat=function(e){var t=e.repo,r=e.preload;function n(){return n=Hn((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function a(){var i,o;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=oy(e),!1!==n.preload&&(i=e.split("/"),r(wi.parse(i[0]))),a.next=4,Mf(cP(e,t.blocks,n));case 4:if("directory"!==(o=a.sent).type){a.next=7;break}throw new Error("this dag node is a directory");case 7:if(o.content){a.next=9;break}throw new Error("this dag node has no content");case 9:return a.delegateYield(Cb(zn(o.content(n))),"t0",10);case 10:case"end":return a.stop()}}),a)}))()})),n.apply(this,arguments)}return $v((function(e){return n.apply(this,arguments)}))}({repo:n,preload:r}),this.get=function(e){var t=e.repo,r=e.preload;function n(){return n=Hn((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function a(){var i,o,s,u,c;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null==n.compressionLevel||!(n.compressionLevel<-1||n.compressionLevel>9)){a.next=2;break}throw ca(new Error("Compression level must be between -1 and 9"),"ERR_INVALID_PARAMS");case 2:if(!1===n.preload){a.next=11;break}a.prev=3,i=oy(e).split("/"),a.next=10;break;case 7:throw a.prev=7,a.t0=a.catch(3),ca(a.t0,"ERR_INVALID_PATH");case 10:r(wi.parse(i[0]));case 11:return o=wi.asCID(e)||e,a.next=14,Mf(cP(o,t.blocks,n));case 14:if("file"!==(s=a.sent).type&&"raw"!==s.type){a.next=21;break}return u=[],n.compress&&!0!==n.archive?u.push(s.content):u.push([{header:{name:s.path,mode:"file"===s.type&&s.unixfs.mode,mtime:"file"===s.type&&s.unixfs.mtime?new Date(1e3*s.unixfs.mtime.secs):void 0,size:s.size,type:"file"},body:s.content()}],OP()),n.compress&&u.push(function(){var e=Hn(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mf(dP(t));case 2:return r=e.sent,e.next=5,UO.gzip(r,{level:n.compressionLevel||6});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.delegateYield(Cb(zn(TS.apply(void 0,u))),"t1",20);case 20:return a.abrupt("return");case 21:if("directory"!==s.type){a.next=29;break}if(c=[fP(o,t.blocks,n),function(){var e=Hn(En().mark((function e(t){var r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=zn(t);case 4:return e.next=6,Mf(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=33;break}if(s=o.value,u={header:{name:s.path,size:s.size}},"file"!==s.type){e.next=16;break}u.header.type="file",u.header.mode=null!=s.unixfs.mode?s.unixfs.mode:void 0,u.header.mtime=s.unixfs.mtime?new Date(1e3*s.unixfs.mtime.secs):void 0,u.body=s.content(),e.next=28;break;case 16:if("raw"!==s.type){e.next=21;break}u.header.type="file",u.body=s.content(),e.next=28;break;case 21:if("directory"!==s.type){e.next=27;break}u.header.type="directory",u.header.mode=null!=s.unixfs.mode?s.unixfs.mode:void 0,u.header.mtime=s.unixfs.mtime?new Date(1e3*s.unixfs.mtime.secs):void 0,e.next=28;break;case 27:throw ca(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");case 28:return e.next=30,u;case 30:r=!1,e.next=4;break;case 33:e.next=39;break;case 35:e.prev=35,e.t0=e.catch(2),n=!0,a=e.t0;case 39:if(e.prev=39,e.prev=40,!r||null==i.return){e.next=44;break}return e.next=44,Mf(i.return());case 44:if(e.prev=44,!n){e.next=47;break}throw a;case 47:return e.finish(44);case 48:return e.finish(39);case 49:case"end":return e.stop()}}),e,null,[[2,35,39,49],[40,,44,48]])})));return function(t){return e.apply(this,arguments)}}(),OP()],!n.compress){a.next=27;break}if(n.archive){a.next=26;break}throw ca(new Error("file is not regular"),"ERR_INVALID_PATH");case 26:n.compress&&c.push(function(){var e=Hn(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mf(dP(t));case 2:return r=e.sent,e.next=5,UO.gzip(r,{level:n.compressionLevel||6});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 27:return a.delegateYield(Cb(zn(TS.apply(void 0,c))),"t2",28);case 28:return a.abrupt("return");case 29:throw ca(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");case 30:case"end":return a.stop()}}),a,null,[[3,7]])}))()})),n.apply(this,arguments)}return $v((function(e){return n.apply(this,arguments)}))}({repo:n,preload:r}),this.ls=function(e){var t=e.repo,r=e.preload;function n(){return n=Hn((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function a(){var i,o,s,u,c,l,f,h,p,d;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=oy(e),o=i.split("/"),!1!==n.preload&&r(wi.parse(o[0])),s=wi.asCID(i)||i,a.next=6,Mf(cP(s,t.blocks,n));case 6:if("file"!==(u=a.sent).type){a.next=11;break}return a.next=10,uy(u);case 10:return a.abrupt("return");case 11:if("directory"!==u.type){a.next=42;break}c=!1,l=!1,a.prev=14,h=zn(u.content());case 16:return a.next=18,Mf(h.next());case 18:if(!(c=!(p=a.sent).done)){a.next=25;break}return d=p.value,a.next=22,uy(d);case 22:c=!1,a.next=16;break;case 25:a.next=31;break;case 27:a.prev=27,a.t0=a.catch(14),l=!0,f=a.t0;case 31:if(a.prev=31,a.prev=32,!c||null==h.return){a.next=36;break}return a.next=36,Mf(h.return());case 36:if(a.prev=36,!l){a.next=39;break}throw f;case 39:return a.finish(36);case 40:return a.finish(31);case 41:return a.abrupt("return");case 42:throw ca(new Error("Unknown UnixFS type ".concat(u.type)),"ERR_UNKNOWN_UNIXFS_TYPE");case 43:case"end":return a.stop()}}),a,null,[[14,27,31,41],[32,,36,40]])}))()})),n.apply(this,arguments)}return $v((function(e){return n.apply(this,arguments)}))}({repo:n,preload:r})})),zO="0.18.0",FO="^0.158.0";var VO=ua("ipfs:components:id");function jO(e,t,r){return qO.apply(this,arguments)}function qO(){return(qO=An(En().mark((function e(t,r,n){var a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.peerStore.get(t);case 2:if(a=e.sent){e.next=7;break}return e.next=6,KO(t,r,n);case 6:a=e.sent;case 7:if(!t.publicKey){e.next=11;break}e.t0=t.publicKey,e.next=14;break;case 11:return e.next=13,r.peerStore.keyBook.get(t);case 13:e.t0=e.sent;case 14:if(null!=(i=e.t0)){e.next=25;break}return e.prev=16,e.next=19,r.getPublicKey(t,n);case 19:i=e.sent,e.next=25;break;case 22:e.prev=22,e.t1=e.catch(16),VO.error("Could not load public key for",t.toString(),e.t1);case 25:return e.abrupt("return",jn(jn({},a),{},{publicKey:i,metadata:a.metadata||new Map,addresses:a.addresses.map((function(e){return e.multiaddr}))}));case 26:case"end":return e.stop()}}),e,null,[[16,22]])})))).apply(this,arguments)}function KO(e,t,r){return HO.apply(this,arguments)}function HO(){return(HO=An(En().mark((function e(t,r,n){var a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r.dht){e.next=2;break}throw ca(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 2:a=!1,i=!1,e.prev=4,s=zn(r.dht.findPeer(t,n));case 6:return e.next=8,s.next();case 8:if(!(a=!(u=e.sent).done)){e.next=15;break}if("FINAL_PEER"!==u.value.name){e.next=12;break}return e.abrupt("break",15);case 12:a=!1,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),i=!0,o=e.t0;case 21:if(e.prev=21,e.prev=22,!a||null==s.return){e.next=26;break}return e.next=26,s.return();case 26:if(e.prev=26,!i){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return e.next=33,r.peerStore.get(t);case 33:if(c=e.sent){e.next=36;break}throw ca(new Error("Could not find peer"),"ERR_NOT_FOUND");case 36:return e.abrupt("return",c);case 37:case"end":return e.stop()}}),e,null,[[4,17,21,31],[22,,26,30]])})))).apply(this,arguments)}var GO=function(e,t,r){var n,a,i;Array.isArray(t)&&(n=t.slice(0));"string"==typeof t&&(n=t.split("."));"symbol"==typeof t&&(n=[t]);if(!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(!(a=n.pop()))return!1;WO(a);for(;i=n.shift();)if(WO(i),"undefined"==typeof e[i]&&(e[i]={}),!(e=e[i])||"object"!=typeof e)return!1;return e[a]=r,!0};function WO(e){if("__proto__"==e||"constructor"==e||"prototype"==e)throw new Error("setting of prototype values not supported")}var YO={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery and UPnP in local networks.",transform:function(e){return GO(e,"Discovery.MDNS.Enabled",!1),GO(e,"Discovery.webRTCStar.Enabled",!1),e.Swarm=jn(jn({},e.Swarm||{}),{},{DisableNatPortMap:!0}),e}},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery and UPnP in local networks.",transform:function(e){return GO(e,"Discovery.MDNS.Enabled",!0),GO(e,"Discovery.webRTCStar.Enabled",!0),GO(e,"Swarm",jn(jn({},e.Swarm||{}),{},{DisableNatPortMap:!1})),e}},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:function(e){var t={Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}};return GO(e,"Addresses.API",t.Addresses.API?"/ip4/127.0.0.1/tcp/0":""),GO(e,"Addresses.Gateway",t.Addresses.Gateway?"/ip4/127.0.0.1/tcp/0":""),GO(e,"Addresses.Swarm",t.Addresses.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[]),GO(e,"Addresses.Delegates",[]),GO(e,"Bootstrap",[]),GO(e,"Discovery.MDNS.Enabled",!1),GO(e,"Discovery.webRTCStar.Enabled",!1),GO(e,"Swarm",jn(jn({},e.Swarm||{}),{},{DisableNatPortMap:!0})),e}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:function(e){var t={Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}};return GO(e,"Addresses.API",t.Addresses.API),GO(e,"Addresses.Gateway",t.Addresses.Gateway),GO(e,"Addresses.Swarm",t.Addresses.Swarm),GO(e,"Addresses.Delegates",t.Addresses.Delegates),GO(e,"Bootstrap",t.Bootstrap),GO(e,"Discovery.MDNS.Enabled",t.Discovery.MDNS.Enabled),GO(e,"Discovery.webRTCStar.Enabled",t.Discovery.webRTCStar.Enabled),GO(e,"Swarm",jn(jn({},e.Swarm||{}),{},{DisableNatPortMap:!1})),e}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:function(e){var t=e.Swarm||{},r=t.ConnMgr||{};return r.LowWater=20,r.HighWater=40,t.ConnMgr=r,e.Swarm=t,e}},"default-power":{description:'Inverse of "lowpower" profile.',transform:function(e){var t={Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}};return e.Swarm=t.Swarm,e}}},QO=ua("ipfs:core:config");function JO(e){return ZO.apply(this,arguments)}function ZO(){return(ZO=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object.keys(YO).map((function(e){return{name:e,description:YO[e].description}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var XO=En().mark(nB),$O=En().mark(aB),eB=En().mark(iB),tB=En().mark(oB);function rB(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enumerable,r=void 0===t||t,n=e.configurable,a=void 0!==n&&n;return{enumerable:r,configurable:a,writable:!1}}function nB(e,t){var r,n,a,i,o,s,u,c;return En().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(null==t||"object"!==typeof t){l.next=35;break}if(!Array.isArray(t)){l.next=28;break}r=Ni(t.entries()),l.prev=3,r.s();case 5:if((n=r.n()).done){l.next=18;break}if(a=Ia(n.value,2),i=a[0],o=a[1],s=[].concat(su(e),[i]),!(u=wi.asCID(o))){l.next=14;break}return l.next=12,[s.join("/"),u];case 12:l.next=16;break;case 14:if("object"!==typeof o){l.next=16;break}return l.delegateYield(aB(o,s),"t0",16);case 16:l.next=5;break;case 18:l.next=23;break;case 20:l.prev=20,l.t1=l.catch(3),r.e(l.t1);case 23:return l.prev=23,r.f(),l.finish(23);case 26:l.next=35;break;case 28:if(!(c=wi.asCID(t))){l.next=34;break}return l.next=32,[e.join("/"),c];case 32:l.next=35;break;case 34:return l.delegateYield(aB(t,e),"t2",35);case 35:case"end":return l.stop()}}),XO,null,[[3,20,23,26]])}function aB(e,t){var r,n,a,i,o,s,u;return En().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!(null==e||e instanceof Uint8Array)){c.next=2;break}return c.abrupt("return");case 2:if(!(r=wi.asCID(e))){c.next=6;break}return c.next=6,[t.join("/"),r];case 6:n=0,a=Object.entries(e);case 7:if(!(n<a.length)){c.next=14;break}return i=Ia(a[n],2),o=i[0],s=i[1],u=[].concat(su(t),[o]),c.delegateYield(nB(u,s),"t0",11);case 11:n++,c.next=7;break;case 14:case"end":return c.stop()}}),$O)}function iB(e,t){var r,n,a,i,o,s;return En().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(!Array.isArray(t)){u.next=23;break}r=Ni(t.entries()),u.prev=2,r.s();case 4:if((n=r.n()).done){u.next=13;break}return a=Ia(n.value,2),i=a[0],o=a[1],s=[].concat(su(e),[i]),u.next=9,s.join("/");case 9:if("object"!==typeof o||wi.asCID(o)){u.next=11;break}return u.delegateYield(oB(o,s),"t0",11);case 11:u.next=4;break;case 13:u.next=18;break;case 15:u.prev=15,u.t1=u.catch(2),r.e(u.t1);case 18:return u.prev=18,r.f(),u.finish(18);case 21:u.next=24;break;case 23:return u.delegateYield(oB(t,e),"t2",24);case 24:case"end":return u.stop()}}),eB,null,[[2,15,18,21]])}function oB(e,t){var r,n,a,i,o,s;return En().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(null!=e&&"object"===typeof e){u.next=2;break}return u.abrupt("return");case 2:r=0,n=Object.entries(e);case 3:if(!(r<n.length)){u.next=13;break}return a=Ia(n[r],2),i=a[0],o=a[1],s=[].concat(su(t),[i]),u.next=8,s.join("/");case 8:if(null==o||o instanceof Uint8Array||"object"!==typeof o||wi.asCID(o)){u.next=10;break}return u.delegateYield(iB(s,o),"t0",10);case 10:r++,u.next=3;break;case 13:case"end":return u.stop()}}),tB)}function sB(e,t){var r,n=e,a=Ni(t.entries());try{for(a.s();!(r=a.n()).done;){var i=Ia(r.value,2),o=i[0];if(null==(n=n[i[1]]))throw new Error("Object has no property at ".concat(t.slice(0,o+1).map((function(e){return"[".concat(JSON.stringify(e),"]")})).join("")));var s=wi.asCID(n);if(s)return{value:s,remaining:t.slice(o+1).join("/")}}}catch(eL){a.e(eL)}finally{a.f()}return{value:n}}var uB=function(){function e(t){var r=t.cid,n=t.bytes,a=t.value;if(Cn(this,e),!r||!n||"undefined"===typeof a)throw new Error("Missing required argument");this.cid=r,this.bytes=n,this.value=a,this.asBlock=this,Object.defineProperties(this,{cid:rB(),bytes:rB(),value:rB(),asBlock:rB()})}return Dn(e,[{key:"links",value:function(){return aB(this.value,[])}},{key:"tree",value:function(){return oB(this.value,[])}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return sB(this.value,e.split("/").filter(Boolean))}}]),e}();function cB(e){var t=e.bytes,r=e.cid,n=e.value,a=e.codec,i=void 0!==n?n:a&&a.decode(t);if(void 0===i)throw new Error('Missing required argument, must either provide "value" or "codec"');return new uB({cid:r,bytes:t,value:i})}var lB=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=fB;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},fB=Math.pow(2,31);var hB=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var pB=Math.pow(2,7),dB=Math.pow(2,14),vB=Math.pow(2,21),yB=Math.pow(2,28),bB=Math.pow(2,35),gB=Math.pow(2,42),mB=Math.pow(2,49),wB=Math.pow(2,56),kB=Math.pow(2,63),xB={encode:lB,decode:hB,encodingLength:function(e){return e<pB?1:e<dB?2:e<vB?3:e<yB?4:e<bB?5:e<gB?6:e<mB?7:e<wB?8:e<kB?9:10}},_B=xB,EB=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=_B.decode(e,t);return[r,_B.decode.bytes]},SB=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _B.encode(e,t,r),t},AB=function(e){return _B.encodingLength(e)},CB=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),IB=function(e){var t=CB(e),r=Ia(EB(t),2),n=r[0],a=r[1],i=Ia(EB(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new TB(n,o,u,t)},TB=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var DB=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},RB=DB,PB=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),NB=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return OB(this,e)}}]),e}(),LB=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return OB(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),OB=function(e,t){return new LB(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},BB=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new PB(t,r,n),this.decoder=new NB(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),UB=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new BB(t,r,n,a)},MB=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=RB(n,r),i=a.encode,o=a.decode;return UB({prefix:t,name:r,encode:i,decode:function(e){return CB(o(e))}})},zB=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return UB({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},FB=MB({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),VB=(MB({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),zB({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),jB=(zB({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zB({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),zB({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),zB({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),zB({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zB({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zB({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),zB({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),function(e,t){var r=e.bytes;return 0===e.version?WB(r,KB(e),t||FB.encoder):YB(r,KB(e),t||VB.encoder)}),qB=new WeakMap,KB=function(e){var t=qB.get(e);if(null==t){var r=new Map;return qB.set(e,r),r}return t},HB=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==QB)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==JB)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=function(e,t){var r=t.byteLength,n=AB(e),a=n+AB(r),i=new Uint8Array(a+r);return SB(e,i,0),SB(r,i,n),i.set(t,a),new TB(e,r,t,i)}(e.code,e.digest);return r.createV1(this.code,t);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return jB(this,e)}},{key:"toJSON",value:function(){return{"/":jB(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||ZB(n,a,i.bytes))}if(!0===t[XB]){var o=t.version,s=t.multihash,u=t.code,c=IB(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==QB)throw new Error("Version 0 CID must use dag-pb (code: ".concat(QB,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,ZB(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,QB,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=CB(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new TB(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(EB(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=QB;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(GB(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return KB(o).set(a,e),o}}]),r}(),GB=function(e,t){switch(e[0]){case"Q":var r=t||FB;return[FB.prefix,r.decode("".concat(FB.prefix).concat(e))];case FB.prefix:var n=t||FB;return[FB.prefix,n.decode(e)];case VB.prefix:var a=t||VB;return[VB.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},WB=function(e,t,r){var n=r.prefix;if(n!==FB.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},YB=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},QB=112,JB=18,ZB=function(e,t,r){var n=AB(e),a=n+AB(t),i=new Uint8Array(a+r.byteLength);return SB(e,i,0),SB(t,i,n),i.set(r,a),i},XB=Symbol.for("@ipld/js-cid/CID");var $B={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;var t=HB.asCID(e);if(!t)return null;var r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new so(oo.tag,42),new so(oo.bytes,r)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};var eU={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};eU.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return HB.decode(e.subarray(1))};var tU=function(e){return Vs(e,eU)};function rU(e){var t=Os({version:1,roots:e},$B),r=cd.encode(t.length),n=new Uint8Array(r.length+t.length);return n.set(r,0),n.set(t,r.length),n}function nU(){}var aU={Null:function(e){return null===e},Int:function(e){return Number.isInteger(e)},Float:function(e){return"number"===typeof e&&Number.isFinite(e)},String:function(e){return"string"===typeof e},Bool:function(e){return"boolean"===typeof e},Bytes:function(e){return e instanceof Uint8Array},Link:function(e){return!aU.Null(e)&&"object"===typeof e&&e.asCID===e},List:function(e){return Array.isArray(e)},Map:function(e){return!aU.Null(e)&&"object"===typeof e&&e.asCID!==e&&!aU.List(e)&&!aU.Bytes(e)}},iU={Int:aU.Int,"CarHeader > version":function(e){return iU.Int(e)},"CarHeader > roots (anon) > valueType (anon)":aU.Link,"CarHeader > roots (anon)":function(e){return aU.List(e)&&Array.prototype.every.call(e,iU["CarHeader > roots (anon) > valueType (anon)"])},"CarHeader > roots":function(e){return iU["CarHeader > roots (anon)"](e)},CarHeader:function(e){var t=e&&Object.keys(e);return aU.Map(e)&&["version"].every((function(e){return t.includes(e)}))&&Object.entries(e).every((function(e){var t=Ia(e,2),r=t[0],n=t[1];return iU["CarHeader > "+r]&&iU["CarHeader > "+r](n)}))}},oU=iU.CarHeader,sU=18,uU=32,cU=112;function lU(e,t){if(!e.length)throw new Error("Unexpected end of data");var r=cd.decode(e);return t.seek(cd.decode.bytes),r}function fU(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=0;return{version:2,characteristics:[t.getBigUint64(r,!0),t.getBigUint64(r+=8,!0)],dataOffset:Number(t.getBigUint64(r+=8,!0)),dataSize:Number(t.getBigUint64(r+=8,!0)),indexOffset:Number(t.getBigUint64(r+=8,!0))}}function hU(e){cd.decode(e);var t=cd.decode.bytes,r=cd.decode(e.subarray(cd.decode.bytes));return t+cd.decode.bytes+r}function pU(e,t){return dU.apply(this,arguments)}function dU(){return(dU=An(En().mark((function e(t,r){var n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=lU,e.next=3,t.upTo(8);case 3:if(e.t1=e.sent,e.t2=t,0!==(n=(0,e.t0)(e.t1,e.t2))){e.next=8;break}throw new Error("Invalid CAR header (zero length)");case 8:return e.next=10,t.exactly(n,!0);case 10:if(a=e.sent,i=tU(a),oU(i)){e.next=14;break}throw new Error("Invalid CAR header format");case 14:if(!(1!==i.version&&2!==i.version||void 0!==r&&i.version!==r)){e.next=16;break}throw new Error("Invalid CAR version: ".concat(i.version).concat(void 0!==r?" (expected ".concat(r,")"):""));case 16:if(o=Array.isArray(i.roots),!(1===i.version&&!o||2===i.version&&o)){e.next=19;break}throw new Error("Invalid CAR header format");case 19:if(1!==i.version){e.next=21;break}return e.abrupt("return",i);case 21:return e.t3=fU,e.next=24,t.exactly(40,!0);case 24:return e.t4=e.sent,s=(0,e.t3)(e.t4),t.seek(s.dataOffset-t.pos),e.next=29,pU(t,1);case 29:return u=e.sent,e.abrupt("return",Object.assign(u,s));case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vU(e){return yU.apply(this,arguments)}function yU(){return yU=An(En().mark((function e(t){var r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.exactly(2,!1);case 2:if((r=e.sent)[0]!==sU||r[1]!==uU){e.next=9;break}return e.next=6,t.exactly(34,!0);case 6:return n=e.sent,a=IB(n),e.abrupt("return",HB.create(0,cU,a));case 9:return e.t0=lU,e.next=12,t.upTo(8);case 12:if(e.t1=e.sent,e.t2=t,1===(i=(0,e.t0)(e.t1,e.t2))){e.next=17;break}throw new Error("Unexpected CID version (".concat(i,")"));case 17:return e.t3=lU,e.next=20,t.upTo(8);case 20:return e.t4=e.sent,e.t5=t,o=(0,e.t3)(e.t4,e.t5),e.t6=t,e.t7=hU,e.next=27,t.upTo(8);case 27:return e.t8=e.sent,e.t9=(0,e.t7)(e.t8),e.next=31,e.t6.exactly.call(e.t6,e.t9,!0);case 31:return s=e.sent,u=IB(s),e.abrupt("return",HB.create(i,o,u));case 34:case"end":return e.stop()}}),e)}))),yU.apply(this,arguments)}function bU(e){return gU.apply(this,arguments)}function gU(){return gU=An(En().mark((function e(t){var r,n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pos,e.t0=lU,e.next=4,t.upTo(8);case 4:if(e.t1=e.sent,e.t2=t,0!==(n=(0,e.t0)(e.t1,e.t2))){e.next=9;break}throw new Error("Invalid CAR section (zero length)");case 9:return n+=t.pos-r,e.next=12,vU(t);case 12:return a=e.sent,i=n-Number(t.pos-r),e.abrupt("return",{cid:a,length:n,blockLength:i});case 15:case"end":return e.stop()}}),e)}))),gU.apply(this,arguments)}function mU(e){return wU.apply(this,arguments)}function wU(){return wU=An(En().mark((function e(t){var r,n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bU(t);case 2:return r=e.sent,n=r.cid,a=r.blockLength,e.next=7,t.exactly(a,!0);case 7:return i=e.sent,e.abrupt("return",{bytes:i,cid:n});case 9:case"end":return e.stop()}}),e)}))),wU.apply(this,arguments)}function kU(e){return xU.apply(this,arguments)}function xU(){return(xU=An(En().mark((function e(t){var r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pos,e.next=3,bU(t);case 3:return n=e.sent,a=n.cid,i=n.length,o=n.blockLength,s={cid:a,length:i,blockLength:o,offset:r,blockOffset:t.pos},t.seek(s.blockLength),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _U(e){var t=An(En().mark((function t(){var r,n;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pU(e);case 2:return 2===(r=t.sent).version&&(n=e.pos-r.dataOffset,e=AU(e,r.dataSize-n)),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))();return{header:function(){return t},blocks:function(){return Hn(En().mark((function r(){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Mf(t);case 2:return r.next=4,Mf(e.upTo(8));case 4:if(r.t0=r.sent.length,!(r.t0>0)){r.next=12;break}return r.next=8,Mf(mU(e));case 8:return r.next=10,r.sent;case 10:r.next=2;break;case 12:case"end":return r.stop()}}),r)})))()},blocksIndex:function(){return Hn(En().mark((function r(){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Mf(t);case 2:return r.next=4,Mf(e.upTo(8));case 4:if(r.t0=r.sent.length,!(r.t0>0)){r.next=12;break}return r.next=8,Mf(kU(e));case 8:return r.next=10,r.sent;case 10:r.next=2;break;case 12:case"end":return r.stop()}}),r)})))()}}}function EU(e){var t=0;return{upTo:function(r){return An(En().mark((function n(){var a;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.subarray(t,t+Math.min(r,e.length-t)),n.abrupt("return",a);case 2:case"end":return n.stop()}}),n)})))()},exactly:function(r){var n=arguments;return An(En().mark((function a(){var i,o;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=n.length>1&&void 0!==n[1]&&n[1],!(r>e.length-t)){a.next=3;break}throw new Error("Unexpected end of data");case 3:return o=e.subarray(t,t+r),i&&(t+=r),a.abrupt("return",o);case 6:case"end":return a.stop()}}),a)})))()},seek:function(e){t+=e},get pos(){return t}}}function SU(e){var t=e[Symbol.asyncIterator]();function r(){return(r=An(En().mark((function e(){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.next();case 2:if(!(r=e.sent).done){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",r.value);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(e){var t=0,r=0,n=0,a=new Uint8Array(0),i=function(){var t=An(En().mark((function t(i){var o,s,u,c,l,f;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.length-n,o=[a.subarray(n)];case 2:if(!(r<i)){t.next=12;break}return t.next=5,e();case 5:if(null!=(s=t.sent)){t.next=8;break}return t.abrupt("break",12);case 8:r<0?s.length>r&&o.push(s.subarray(-r)):o.push(s),r+=s.length,t.next=2;break;case 12:for(a=new Uint8Array(o.reduce((function(e,t){return e+t.length}),0)),u=0,c=0,l=o;c<l.length;c++)f=l[c],a.set(f,u),u+=f.length;n=0;case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{upTo:function(e){return An(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.length-n<e)){t.next=3;break}return t.next=3,i(e);case 3:return t.abrupt("return",a.subarray(n,n+Math.min(a.length-n,e)));case 4:case"end":return t.stop()}}),t)})))()},exactly:function(e){var r=arguments;return An(En().mark((function o(){var s,u;return En().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=r.length>1&&void 0!==r[1]&&r[1],!(a.length-n<e)){o.next=4;break}return o.next=4,i(e);case 4:if(!(a.length-n<e)){o.next=6;break}throw new Error("Unexpected end of data");case 6:return u=a.subarray(n,n+e),s&&(t+=e,n+=e),o.abrupt("return",u);case 9:case"end":return o.stop()}}),o)})))()},seek:function(e){t+=e,n+=e},get pos(){return t}}}((function(){return r.apply(this,arguments)}))}function AU(e,t){var r=0;return{upTo:function(n){return An(En().mark((function a(){var i;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.upTo(n);case 2:return(i=a.sent).length+r>t&&(i=i.subarray(0,t-r)),a.abrupt("return",i);case 5:case"end":return a.stop()}}),a)})))()},exactly:function(n){var a=arguments;return An(En().mark((function i(){var o,s;return En().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=a.length>1&&void 0!==a[1]&&a[1],i.next=3,e.exactly(n,o);case 3:if(!((s=i.sent).length+r>t)){i.next=6;break}throw new Error("Unexpected end of data");case 6:return o&&(r+=n),i.abrupt("return",s);case 8:case"end":return i.stop()}}),i)})))()},seek:function(t){r+=t,e.seek(t)},get pos(){return e.pos}}}var CU=function(){function e(t,r){Cn(this,e),this._encoder=r,this._mutex=r.setRoots(t),this._ended=!1}return Dn(e,[{key:"put",value:function(){var e=An(En().mark((function e(t){var r,n=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bytes instanceof Uint8Array&&t.cid){e.next=2;break}throw new TypeError("Can only write {cid, bytes} objects");case 2:if(!this._ended){e.next=4;break}throw new Error("Already closed");case 4:if(r=HB.asCID(t.cid)){e.next=7;break}throw new TypeError("Can only write {cid, bytes} objects");case 7:return this._mutex=this._mutex.then((function(){return n._encoder.writeBlock({cid:r,bytes:t.bytes})})),e.abrupt("return",this._mutex);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ended){e.next=2;break}throw new Error("Already closed");case 2:return e.next=4,this._mutex;case 4:return this._ended=!0,e.abrupt("return",this._encoder.close());case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"create",value:function(t){t=function(e){if(void 0===e)return[];if(!Array.isArray(e)){var t=HB.asCID(e);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");return[t]}var r,n=[],a=Ni(e);try{for(a.s();!(r=a.n()).done;){var i=r.value,o=HB.asCID(i);if(!o)throw new TypeError("roots must be a single CID or an array of CIDs");n.push(o)}}catch(eL){a.e(eL)}finally{a.f()}return n}(t);var r=TU(),n=r.encoder,a=r.iterator;return{writer:new e(t,n),out:new IU(a)}}},{key:"createAppender",value:function(){var t=TU(),r=t.encoder,n=t.iterator;return r.setRoots=function(){return Promise.resolve()},{writer:new e([],r),out:new IU(n)}}},{key:"updateRootsInBytes",value:function(){var e=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=EU(t),e.next=3,pU(n);case 3:if(a=rU(r),Number(n.pos)===a.length){e.next=6;break}throw new Error("updateRoots() can only overwrite a header of the same length (old header is ".concat(n.pos," bytes, new header is ").concat(a.length," bytes)"));case 6:return t.set(a,0),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),IU=function(e){function t(e){Cn(this,t),this._iterator=e}return Dn(t,[{key:Symbol.asyncIterator,value:function(){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}]),t}();function TU(){var e=function(){var e=[],t=null,r=nU,n=!1,a=null,i=nU,o=function(){return t||(t=new Promise((function(e){r=function(){t=null,r=nU,e()}}))),t},s={write:function(t){e.push(t);var r=o();return i(),r},end:function(){return An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,t=o(),i(),e.next=5,t;case 5:case"end":return e.stop()}}),e)})))()}},u={next:function(){return An(En().mark((function t(){var o;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=e.shift())){t.next=4;break}return 0===e.length&&r(),t.abrupt("return",{done:!1,value:o});case 4:if(!n){t.next=7;break}return r(),t.abrupt("return",{done:!0,value:void 0});case 7:return a||(a=new Promise((function(e){i=function(){return a=null,i=nU,e(u.next())}}))),t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})))()}};return{writer:s,iterator:u}}(),t=e.writer,r=e.iterator,n=function(e){return{setRoots:function(t){return An(En().mark((function r(){var n;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=rU(t),r.next=3,e.write(n);case 3:case"end":return r.stop()}}),r)})))()},writeBlock:function(t){return An(En().mark((function r(){var n,a;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.cid,a=t.bytes,r.next=3,e.write(new Uint8Array(cd.encode(n.bytes.length+a.length)));case 3:return r.next=5,e.write(n.bytes);case 5:if(!a.length){r.next=8;break}return r.next=8,e.write(a);case 8:case"end":return r.stop()}}),r)})))()},close:function(){return An(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.end();case 2:case"end":return t.stop()}}),t)})))()}}}(t);return{encoder:n,iterator:r}}var DU=function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.cid,n=t.load,a=(a=t.seen)||new Set,i=r.toString(oi),!a.has(i)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n(r);case 7:if(o=e.sent,a.add(i),null!==o){e.next=11;break}return e.abrupt("return");case 11:s=Ni(o.links()),e.prev=12,s.s();case 14:if((u=s.n()).done){e.next=20;break}return c=Ia(u.value,2),l=c[1],e.next=18,DU({cid:l,load:n,seen:a});case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),s.e(e.t0);case 25:return e.prev=25,s.f(),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[12,22,25,28]])})));return function(t){return e.apply(this,arguments)}}(),RU=ua("ipfs:components:dag:import"),PU=[qc,Qc];function NU(e,t,r,n){return function(){var a=An(En().mark((function a(i){var o,s;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.getCodec(i.code);case 2:if(o=a.sent){a.next=5;break}throw new Error("Can't decode links in block with codec 0x".concat(i.code.toString(16)," to form complete DAG"));case 5:return a.next=7,e.blocks.get(i,r);case 7:return s=a.sent,RU("Adding block ".concat(i," to car")),a.next=11,t.put({cid:i,bytes:s});case 11:if(!PU.includes(i.code)){a.next=13;break}return a.abrupt("return",null);case 13:return a.abrupt("return",cB({bytes:s,cid:i,codec:o}));case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}function LU(e){return OU.apply(this,arguments)}function OU(){return OU=An(En().mark((function e(t){var r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=zn(t);case 4:return e.next=6,i.next();case 6:if(!(r=!(o=e.sent).done)){e.next=12;break}return s=o.value,e.abrupt("return",s);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),n=!0,a=e.t0;case 18:if(e.prev=18,e.prev=19,!r||null==i.return){e.next=23;break}return e.next=23,i.return();case 23:if(e.prev=23,!n){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:return e.abrupt("return",void 0);case 29:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])}))),OU.apply(this,arguments)}var BU=function(){function e(t,r,n){Cn(this,e),this._version=t,this._roots=r,this._iterable=n,this._decoded=!1}return Dn(e,[{key:"version",get:function(){return this._version}},{key:"getRoots",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._roots);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),UU=function(e,t){Pn(n,e);var r=Un(n);function n(){return Cn(this,n),r.apply(this,arguments)}return Dn(n,[{key:t,value:function(){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}}],[{key:"fromBytes",value:function(){var e=An(En().mark((function e(t){var r,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MU(t);case 2:return r=e.sent,a=r.version,i=r.roots,o=r.iterator,e.abrupt("return",new n(a,i,o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fromIterable",value:function(){var e=An(En().mark((function e(t){var r,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FU(t);case 2:return r=e.sent,a=r.version,i=r.roots,o=r.iterator,e.abrupt("return",new n(a,i,o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(BU,Symbol.asyncIterator);Symbol.asyncIterator;function MU(e){return zU.apply(this,arguments)}function zU(){return zU=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw new TypeError("fromBytes() requires a Uint8Array");case 2:return e.abrupt("return",jU(EU(t)));case 3:case"end":return e.stop()}}),e)}))),zU.apply(this,arguments)}function FU(e){return VU.apply(this,arguments)}function VU(){return(VU=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"function"===typeof t[Symbol.asyncIterator]){e.next=2;break}throw new TypeError("fromIterable() requires an async iterable");case 2:return e.abrupt("return",jU(SU(t)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jU(e){return qU.apply(this,arguments)}function qU(){return qU=An(En().mark((function e(t){var r,n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_U(t),e.next=3,r.header();case 3:return n=e.sent,a=n.version,i=n.roots,e.abrupt("return",{version:a,roots:i,iterator:r.blocks()});case 7:case"end":return e.stop()}}),e)}))),qU.apply(this,arguments)}var KU=ua("ipfs:components:dag:import");function HU(e,t,r){return GU.apply(this,arguments)}function GU(){return GU=An(En().mark((function e(t,r,n){var a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UU.fromIterable(n);case 2:return a=e.sent,e.next=5,a.getRoots();case 5:return i=e.sent,e.next=8,nS(t.blocks.putMany(kS(a,(function(e){var t=e.cid,r=e.bytes;return KU("Import block ".concat(t)),{key:t,value:r}})),{signal:r.signal}));case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)}))),GU.apply(this,arguments)}var WU=Dn((function e(t){var r=t.repo,n=t.codecs,a=t.hashers,i=t.preload;Cn(this,e),this.export=function(e){var t=e.repo,r=e.preload,n=e.codecs;function a(){return a=Hn((function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function i(){var o,s,u,c,l,f,h,p,d,v,y;return En().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!1!==a.preload&&r(e),o=wi.asCID(e)){i.next=4;break}throw new Error("Unexpected error converting CID type: ".concat(e));case 4:return RU("Exporting ".concat(o," as car")),i.next=7,Mf(CU.create([o]));case 7:s=i.sent,u=s.writer,c=s.out,l=null,An(En().mark((function e(){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=NU(t,u,{signal:a.signal,timeout:a.timeout},n),e.next=4,DU({cid:o,load:r});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l=e.t0;case 9:return e.prev=9,u.close(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})))(),f=!1,h=!1,i.prev=14,d=zn(c);case 16:return i.next=18,Mf(d.next());case 18:if(!(f=!(v=i.sent).done)){i.next=27;break}if(y=v.value,!l){i.next=22;break}return i.abrupt("break",27);case 22:return i.next=24,y;case 24:f=!1,i.next=16;break;case 27:i.next=33;break;case 29:i.prev=29,i.t0=i.catch(14),h=!0,p=i.t0;case 33:if(i.prev=33,i.prev=34,!f||null==d.return){i.next=38;break}return i.next=38,Mf(d.return());case 38:if(i.prev=38,!h){i.next=41;break}throw p;case 41:return i.finish(38);case 42:return i.finish(33);case 43:if(!l){i.next=45;break}throw l;case 45:case"end":return i.stop()}}),i,null,[[14,29,33,43],[34,,38,42]])}))()})),a.apply(this,arguments)}return $v((function(e){return a.apply(this,arguments)}))}({repo:r,preload:i,codecs:n}),this.get=function(e){var t=e.codecs,r=e.repo,n=e.preload,a=function(){var e=An(En().mark((function e(a){var i,o,s,u,c,l,f=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(i=f.length>1&&void 0!==f[1]?f[1]:{}).preload&&n(a),!i.path){e.next=17;break}if(!i.localResolve){e.next=9;break}return e.next=6,LU(ly(a,i.path,t,r,i));case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Sb(ly(a,i.path,t,r,i));case 11:e.t0=e.sent;case 12:if(o=e.t0,s=o){e.next=16;break}throw ca(new Error("Not found"),"ERR_NOT_FOUND");case 16:return e.abrupt("return",s);case 17:return e.next=19,t.getCodec(a.code);case 19:return u=e.sent,e.next=22,r.blocks.get(a,i);case 22:return c=e.sent,l=u.decode(c),e.abrupt("return",{value:l,remainderPath:""});case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return $v(a)}({codecs:n,repo:r,preload:i}),this.import=function(e){var t=e.repo;function r(){return r=Hn((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(t.gcLock.readLock());case 2:return a=n.sent,n.prev=3,i={signal:r.signal,timeout:r.timeout},o=RA(e),n.next=8,Mf(o.peek());case 8:if(s=n.sent,u=s.value,!s.done){n.next=13;break}return n.abrupt("return");case 13:u&&o.push(u),c=u instanceof Uint8Array?[o]:o,l=!1,f=!1,n.prev=17,p=zn(c);case 19:return n.next=21,Mf(p.next());case 21:if(!(l=!(d=n.sent).done)){n.next=63;break}return v=d.value,n.next=25,Mf(HU(t,i,v));case 25:if(y=n.sent,!1===r.pinRoots){n.next=60;break}b=Ni(y),n.prev=28,b.s();case 30:if((g=b.n()).done){n.next=52;break}return m=g.value,w="",n.prev=33,n.next=36,Mf(t.blocks.has(m));case 36:if(!n.sent){n.next=42;break}return KU("Pinning root ".concat(m)),n.next=40,Mf(t.pins.pinRecursively(m));case 40:n.next=43;break;case 42:w="blockstore: block not found";case 43:n.next=48;break;case 45:n.prev=45,n.t0=n.catch(33),w=n.t0.message;case 48:return n.next=50,{root:{cid:m,pinErrorMsg:w}};case 50:n.next=30;break;case 52:n.next=57;break;case 54:n.prev=54,n.t1=n.catch(28),b.e(n.t1);case 57:return n.prev=57,b.f(),n.finish(57);case 60:l=!1,n.next=19;break;case 63:n.next=69;break;case 65:n.prev=65,n.t2=n.catch(17),f=!0,h=n.t2;case 69:if(n.prev=69,n.prev=70,!l||null==p.return){n.next=74;break}return n.next=74,Mf(p.return());case 74:if(n.prev=74,!f){n.next=77;break}throw h;case 77:return n.finish(74);case 78:return n.finish(69);case 79:return n.prev=79,a(),n.finish(79);case 82:case"end":return n.stop()}}),n,null,[[3,,79,82],[17,65,69,79],[28,54,57,60],[33,45],[70,,74,78]])}))()})),r.apply(this,arguments)}return $v((function(e){return r.apply(this,arguments)}))}({repo:r}),this.resolve=function(e){var t=e.repo,r=e.codecs,n=e.preload;function a(){return a=An(En().mark((function e(a){var i,o,s,u=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>1&&void 0!==u[1]?u[1]:{},o=ty(a),s=o.cid,!1!==i.preload&&n(s),e.abrupt("return",sy(t,r,a,i));case 4:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}return $v((function(e){return a.apply(this,arguments)}))}({repo:r,codecs:n,preload:i}),this.put=function(e){var t=e.repo,r=e.codecs,n=e.hashers,a=e.preload;function i(){return i=An(En().mark((function e(i){var o,s,u,c,l,f,h,p,d,v=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=v.length>1&&void 0!==v[1]?v[1]:{}).pin){e.next=7;break}return e.next=4,t.gcLock.readLock();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:return s=e.t0,e.prev=9,e.next=12,r.getCodec(o.storeCodec||"dag-cbor");case 12:if(u=e.sent){e.next=15;break}throw new Error("Unknown storeCodec ".concat(o.storeCodec,", please configure additional BlockCodecs for this IPFS instance"));case 15:if(!o.inputCodec){e.next=24;break}if(i instanceof Uint8Array){e.next=18;break}throw new Error("Can only inputCodec on raw bytes that can be decoded");case 18:return e.next=20,r.getCodec(o.inputCodec);case 20:if(c=e.sent){e.next=23;break}throw new Error("Unknown inputCodec ".concat(o.inputCodec,", please configure additional BlockCodecs for this IPFS instance"));case 23:i=c.decode(i);case 24:return l=null!=o.version?o.version:1,e.next=27,n.getHasher(o.hashAlg||"sha2-256");case 27:if(f=e.sent){e.next=30;break}throw new Error("Unknown hash algorithm ".concat(o.hashAlg,", please configure additional MultihashHashers for this IPFS instance"));case 30:return h=u.encode(i),e.next=33,f.digest(h);case 33:return p=e.sent,d=wi.create(l,u.code,p),e.next=37,t.blocks.put(d,h,{signal:o.signal});case 37:if(!o.pin){e.next=40;break}return e.next=40,t.pins.pinRecursively(d);case 40:return!1!==o.preload&&a(d),e.abrupt("return",d);case 42:return e.prev=42,s&&s(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[9,,42,45]])}))),i.apply(this,arguments)}return $v((function(e){return i.apply(this,arguments)}))}({repo:r,codecs:n,hashers:a,preload:i})})),YU=function(e,t){return t},QU={ip4:YU,ip6:function(e,t,r,n){return 1===n.length&&"ip6"===n[0].protocol?t:"[".concat(t,"]")},tcp:function(e,t,r,n,a){return n.some((function(e){return["http","https","ws","wss"].includes(e.protocol)}))?"".concat(e,":").concat(t):function(e,t,r,n){if(null!=n&&!1===n.assumeHttp)return"tcp://".concat(e,":").concat(t);var a="tcp",i=":".concat(t);return"tcp"===r[r.length-1].protocol&&(a="443"===t?"https":"http",i="443"===t||"80"===t?"":i),"".concat(a,"://").concat(e).concat(i)}(e,t,n,a)},udp:function(e,t){return"udp://".concat(e,":").concat(t)},dnsaddr:YU,dns4:YU,dns6:YU,ipfs:function(e,t){return"".concat(e,"/ipfs/").concat(t)},p2p:function(e,t){return"".concat(e,"/p2p/").concat(t)},http:function(e){return"http://".concat(e)},https:function(e){return"https://".concat(e)},ws:function(e){return"ws://".concat(e)},wss:function(e){return"wss://".concat(e)},"p2p-websocket-star":function(e){return"".concat(e,"/p2p-websocket-star")},"p2p-webrtc-star":function(e){return"".concat(e,"/p2p-webrtc-star")},"p2p-webrtc-direct":function(e){return"".concat(e,"/p2p-webrtc-direct")}};function JU(e,t){var r=Gd(e),n=r.toString().split("/").slice(1);return r.tuples().map((function(e){var t,r;return{protocol:null!==(t=n.shift())&&void 0!==t?t:"",content:null!=e[1]&&null!==(r=n.shift())&&void 0!==r?r:""}})).reduce((function(e,r,n,a){var i=QU[r.protocol];if(null==i)throw new Error("Unsupported protocol ".concat(r.protocol));return i(e,r.content,n,a,t)}),"")}function ZU(e){if(!Array.isArray(e))throw new TypeError("Expected an array, got ".concat(typeof e));for(var t=(e=su(e)).length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=[e[r],e[t]];e[t]=n[0],e[r]=n[1]}return e}var XU=ua("ipfs:preload"),$U=new($y.default?$y.default:$y)({concurrency:4});function eM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return XU(e),$U.add(An(En().mark((function r(){var n,a,i;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,eb.post(e,{signal:t.signal});case 2:n=r.sent,a=n.body.getReader(),r.prev=4;case 5:return r.next=8,a.read();case 8:if(i=r.sent,!i.done){r.next=12;break}return r.abrupt("return");case 12:r.next=5;break;case 14:return r.prev=14,a.releaseLock(),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[4,,14,17]])}))))}var tM=ua("ipfs:preload");function rM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.enabled=Boolean(e.enabled),e.addresses=e.addresses||[],e.cache=e.cache||1e3,!e.enabled||!e.addresses.length){tM("preload disabled");var t=function(){};return Object.assign(t,{start:function(){},stop:function(){}})}var r=!0,n=[],a=e.addresses.map((function(e){return JU(e)})),i=hy(e.cache),o=function(){var e=An(En().mark((function e(t){var o,s,u,c,l,f,h;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=3;break}throw new Error("preload ".concat(t," but preloader is not started"));case 3:if(o=t.toString(),!i.has(o)){e.next=6;break}return e.abrupt("return");case 6:i.set(o,!0),s=ZU(a),u=!1,c=Date.now(),l=Ni(s),e.prev=11,h=En().mark((function e(){var t,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,!r){e.next=3;break}throw new Error("preload aborted for ".concat(o));case 3:return e.prev=3,a=new AbortController,n=n.concat(a),e.next=8,eM("".concat(t,"/api/v0/refs?r=true&arg=").concat(encodeURIComponent(o)),{signal:a.signal});case 8:u=!0,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),"aborted"!==e.t0.type&&tM.error(e.t0);case 14:return e.prev=14,n=n.filter((function(e){return e!==a})),e.finish(14);case 17:if(!u){e.next=19;break}return e.abrupt("return","break");case 19:case"end":return e.stop()}}),e,null,[[3,11,14,17]])})),l.s();case 14:if((f=l.n()).done){e.next=21;break}return e.delegateYield(h(),"t0",16);case 16:if("break"!==e.t0){e.next=19;break}return e.abrupt("break",21);case 19:e.next=14;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(11),l.e(e.t1);case 26:return e.prev=26,l.f(),e.finish(26);case 29:tM("".concat(u?"":"un","successfully preloaded ").concat(o," in ").concat(Date.now()-c,"ms")),e.next=35;break;case 32:e.prev=32,e.t2=e.catch(0),tM.error(e.t2);case 35:case"end":return e.stop()}}),e,null,[[0,32],[11,23,26,29]])})));return function(t){return e.apply(this,arguments)}}();return o.start=function(){r=!1},o.stop=function(){r=!0,tM("aborting ".concat(n.length," pending preload request(s)")),n.forEach((function(e){return e.abort()})),n=[]},o}var nM=ua("ipfs:mfs-preload");var aM=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).name="TimeoutError",n}return Dn(r)}(nu(Error)),iM=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this)).name="AbortError",n.message=e,n}return Dn(r)}(nu(Error)),oM=function(e){return void 0===globalThis.DOMException?new iM(e):new DOMException(e)},sM=function(e){var t=void 0===e.reason?oM("This operation was aborted."):e.reason;return t instanceof Error?t:oM(t)};function uM(e,t){var r,n=t.milliseconds,a=t.fallback,i=t.message,o=t.customTimers,s=void 0===o?{setTimeout:setTimeout,clearTimeout:clearTimeout}:o,u=new Promise((function(o,u){if("number"!==typeof n||1!==Math.sign(n))throw new TypeError("Expected `milliseconds` to be a positive number, got `".concat(n,"`"));if(n!==Number.POSITIVE_INFINITY){if(t.signal){var c=t.signal;c.aborted&&u(sM(c)),c.addEventListener("abort",(function(){u(sM(c))}))}r=s.setTimeout.call(void 0,(function(){if(a)try{o(a())}catch(r){u(r)}else if("function"===typeof e.cancel&&e.cancel(),!1===i)o();else if(i instanceof Error)u(i);else{var t=null!==i&&void 0!==i?i:"Promise timed out after ".concat(n," milliseconds");u(new aM(t))}}),n),An(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=o,t.next=4,e;case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),u(t.t2);case 11:return t.prev=11,s.clearTimeout.call(void 0,r),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()}else o(e)}));return u.clear=function(){s.clearTimeout.call(void 0,r),r=void 0},u}var cM="lock:worker:request-read",lM="lock:worker:release-read",fM="lock:master:grant-read",hM="lock:worker:request-write",pM="lock:worker:release-write",dM="lock:master:grant-write",vM={},yM=function e(t){t.addEventListener("message",(function(r){e.dispatchEvent("message",t,r)})),null!=t.port&&t.port.addEventListener("message",(function(r){e.dispatchEvent("message",t,r)}))};yM.addEventListener=function(e,t){null==vM[e]&&(vM[e]=[]),vM[e].push(t)},yM.removeEventListener=function(e,t){null!=vM[e]&&(vM[e]=vM[e].filter((function(e){return e===t})))},yM.dispatchEvent=function(e,t,r){null!=vM[e]&&vM[e].forEach((function(e){return e(t,r)}))};var bM,gM=yM,mM=function(e,t,r,n,a){return function(i,o){if(o.data.type===r){var s={type:o.data.type,name:o.data.name,identifier:o.data.identifier};e.dispatchEvent(new MessageEvent(t,{data:{name:s.name,handler:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.postMessage({type:a,name:s.name,identifier:s.identifier}),e.next=3,new Promise((function(e){i.addEventListener("message",(function t(r){if(null!=r&&null!=r.data){var a=r.data.type,o=(r.data.name,r.data.identifier);a===n&&o===s.identifier&&(i.removeEventListener("message",t),e())}}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}))}}},wM=function(e,t,r,n){return An(En().mark((function a(){var i;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=Vv(),globalThis.postMessage({type:t,identifier:i,name:e}),a.next=4,new Promise((function(t){globalThis.addEventListener("message",(function a(o){if(null!=o&&null!=o.data){var s=o.data.type,u=o.data.identifier;s===r&&u===i&&(globalThis.removeEventListener("message",a),t((function(){globalThis.postMessage({type:n,identifier:i,name:e})})))}}))}));case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}}),a)})))},kM={singleProcess:!1},xM={};function _M(e,t){return EM.apply(this,arguments)}function EM(){return EM=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise((function(e){n=e})),t.add(An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uM(An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){n((function(){e()}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))(),{milliseconds:r.timeout});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),e.next=4,a;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),EM.apply(this,arguments)}var SM,AM={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function CM(e){var t=Object.assign({},AM,e);return null==bM&&(bM=function(e){if(e=Object.assign({},kM,e),Boolean(globalThis.document)||e.singleProcess){var t=new EventTarget;return gM.addEventListener("message",mM(t,"requestReadLock",cM,lM,fM)),gM.addEventListener("message",mM(t,"requestWriteLock",hM,pM,dM)),t}return{isWorker:!0,readLock:function(e){return wM(e,cM,fM,lM)},writeLock:function(e){return wM(e,hM,dM,pM)}}}(t),!0!==bM.isWorker&&(bM.addEventListener("requestReadLock",(function(e){null!=xM[e.data.name]&&xM[e.data.name].readLock().then(function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.data.handler().finally((function(){return r()}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})),bM.addEventListener("requestWriteLock",function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=xM[t.data.name]){e.next=2;break}return e.abrupt("return");case 2:xM[t.data.name].writeLock().then(function(){var e=An(En().mark((function e(r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data.handler().finally((function(){return r()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))),null==xM[t.name]&&(xM[t.name]=function(e,t){if(!0===bM.isWorker)return{readLock:bM.readLock(e,t),writeLock:bM.writeLock(e,t)};var r,n=new $y({concurrency:1});return{readLock:function(){return An(En().mark((function e(){var a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r){e.next=4;break}return e.next=3,_M(r,t);case 3:case 10:return e.abrupt("return",e.sent);case 4:return r=new $y({concurrency:t.concurrency,autoStart:!1}),a=r,i=_M(r,t),n.add(An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.start(),e.next=3,a.onIdle().then((function(){r===a&&(r=null)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),e.next=10,i;case 11:case"end":return e.stop()}}),e)})))()},writeLock:function(){return An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.next=3,_M(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()}}}(t.name,t)),xM[t.name]}function IM(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(SM)return SM;var t=CM({singleProcess:e});return SM={readLock:function(e){return An(En().mark((function r(){var n,a,i,o,s=arguments;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.readLock();case 2:for(n=r.sent,r.prev=3,a=s.length,i=new Array(a),o=0;o<a;o++)i[o]=s[o];return r.next=7,e.apply(null,i);case 7:return r.abrupt("return",r.sent);case 8:return r.prev=8,n(),r.finish(8);case 11:case"end":return r.stop()}}),r,null,[[3,,8,11]])})))},writeLock:function(e){return An(En().mark((function r(){var n,a,i,o,s=arguments;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.writeLock();case 2:for(n=r.sent,r.prev=3,a=s.length,i=new Array(a),o=0;o<a;o++)i[o]=s[o];return r.next=7,e.apply(null,i);case 7:return r.abrupt("return",r.sent);case 8:return r.prev=8,n(),r.finish(8);case 11:case"end":return r.stop()}}),r,null,[[3,,8,11]])})))}},SM}var TM=ua("ipfs:mfs:utils:with-mfs-root");function DM(e,t){return RM.apply(this,arguments)}function RM(){return RM=An(En().mark((function e(t,r){var n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r&&r.signal&&r.signal.aborted)){e.next=2;break}throw ca(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});case 2:return e.next=4,t.repo.datastore.open();case 4:return e.prev=4,e.next=7,t.repo.datastore.get(ny);case 7:a=e.sent,n=wi.decode(a),e.next=27;break;case 11:if(e.prev=11,e.t0=e.catch(4),"ERR_NOT_FOUND"===e.t0.code){e.next=15;break}throw e.t0;case 15:return TM("Creating new MFS root"),i=to({Data:new _a({type:"directory"}).marshal(),Links:[]}),e.next=19,Fc.digest(i);case 19:return o=e.sent,n=wi.createV0(o),e.next=23,t.repo.blocks.put(n,i);case 23:if(!(r&&r.signal&&r.signal.aborted)){e.next=25;break}throw ca(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});case 25:return e.next=27,t.repo.datastore.put(ny,n.bytes);case 27:return TM("Loaded MFS root /ipfs/".concat(n)),e.abrupt("return",n);case 29:case"end":return e.stop()}}),e,null,[[4,11]])}))),RM.apply(this,arguments)}function PM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}var NM="ipfs",LM=function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,h;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DM(t,n);case 2:if(a=e.sent,i={entryType:"file"},o="",(o=(o=(o=wi.asCID(r)?"/ipfs/".concat(r):r.toString()).trim()).replace(/(\/\/+)/g,"/")).endsWith("/")&&o.length>1&&(o=o.substring(0,o.length-1)),o){e.next=11;break}throw ca(new Error("paths must not be empty"),"ERR_NO_PATH");case 11:if("/"===o.substring(0,1)){e.next=13;break}throw ca(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");case 13:return"/"===o.substring(o.length-1)&&(o=o.substring(0,o.length-1)),(s=PM(o))[0]===NM?(u=2===s.length?"/".concat(s.join("/")):"/".concat(s.slice(0,s.length-1).join("/")),i={type:"ipfs",depth:s.length-2,entryType:"file",mfsPath:"/".concat(s.join("/")),mfsDirectory:u,parts:s,path:"/".concat(s.join("/")),name:s[s.length-1]}):(c="/".concat(NM,"/").concat(a).concat(s.length?"/"+s.join("/"):""),l="/".concat(NM,"/").concat(a,"/").concat(s.slice(0,s.length-1).join("/")),i={type:"mfs",depth:s.length,entryType:"file",mfsDirectory:l,mfsPath:c,parts:s,path:"/".concat(s.join("/")),name:s[s.length-1]}),f="mfs"===i.type?i.mfsPath:i.path,e.prev=17,e.next=20,cP(f,t.repo.blocks,n);case 20:h=e.sent,i.cid=h.cid,i.mfsPath="/ipfs/".concat(h.path),i.entryType=h.type,i.content=h.content,"file"!==i.entryType&&"directory"!==i.entryType||"file"!==h.type&&"directory"!==h.type||(i.unixfs=h.unixfs),e.next=32;break;case 28:if(e.prev=28,e.t0=e.catch(17),"ERR_NOT_FOUND"===e.t0.code){e.next=32;break}throw e.t0;case 32:return i.exists=Boolean(i.cid),e.abrupt("return",i);case 34:case"end":return e.stop()}}),e,null,[[17,28]])})));return function(t,r,n){return e.apply(this,arguments)}}(),OM=Gn.bind({ignoreUndefined:!0}),BM=ua("ipfs:mfs:stat"),UM={withLocal:!1};function MM(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o,s,u,c,l=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},n=OM(UM,n),BM("Fetching stats for ".concat(r)),t.next=5,LM(e,r,n);case 5:return a=t.sent,i=a.type,o=a.cid,s=a.mfsPath,u="ipfs"===i&&o?o:s,t.prev=10,t.next=13,cP(u,e.repo.blocks);case 13:c=t.sent,t.next=21;break;case 16:if(t.prev=16,t.t0=t.catch(10),"ERR_NOT_FOUND"!==t.t0.code){t.next=20;break}throw ca(new Error("".concat(r," does not exist")),"ERR_NOT_FOUND");case 20:throw t.t0;case 21:if(zM[c.type]){t.next=23;break}throw new Error("Cannot stat codec ".concat(c.cid.code));case 23:return t.abrupt("return",zM[c.type](c));case 24:case"end":return t.stop()}}),t,null,[[10,16]])}))),t.apply(this,arguments)}return $v((function(e){return t.apply(this,arguments)}))}var zM={raw:function(e){return{cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}},file:function(e){var t={cid:e.cid,type:"file",size:e.unixfs.fileSize(),cumulativeSize:to(e.node).length+(e.node.Links||[]).reduce((function(e,t){return e+(t.Tsize||0)}),0),blocks:e.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},directory:function(e){var t={cid:e.cid,type:"directory",size:0,cumulativeSize:to(e.node).length+(e.node.Links||[]).reduce((function(e,t){return e+(t.Tsize||0)}),0),blocks:e.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},object:function(e){return{cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}},identity:function(e){return{cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}}},FM=ua("ipfs:mfs:utils:to-trail");function VM(e,t){return jM.apply(this,arguments)}function jM(){return(jM=An(En().mark((function e(t,r){var n,a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FM("Creating trail for path ".concat(r)),n=[],a=!1,i=!1,e.prev=4,s=zn(sP(r,t.repo.blocks));case 6:return e.next=8,s.next();case 8:if(!(a=!(u=e.sent).done)){e.next=14;break}c=u.value,n.push({name:c.name,cid:c.cid,size:c.size,type:c.type});case 11:a=!1,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),i=!0,o=e.t0;case 20:if(e.prev=20,e.prev=21,!a||null==s.return){e.next=25;break}return e.next=25,s.return();case 25:if(e.prev=25,!i){e.next=28;break}throw o;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",n);case 31:case"end":return e.stop()}}),e,null,[[4,16,20,30],[21,,25,29]])})))).apply(this,arguments)}var qM=function(){var e=An(En().mark((function e(t,n,a){var i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.codec||(a.codec=r),a.hasher||(a.hasher=Fc),void 0===a.cidVersion&&(a.cidVersion=1),a.codec===r&&a.hasher!==Fc&&(a.cidVersion=1),e.next=6,a.hasher.digest(t);case 6:if(i=e.sent,o=wi.create(a.cidVersion,a.codec.code,i),a.onlyHash){e.next=11;break}return e.next=11,n.put(o,t,{signal:a.signal});case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),KM=$C.code;function HM(e){return GM.apply(this,arguments)}function GM(){return GM=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$C.encode(t);case 2:return e.abrupt("return",e.sent.subarray(0,8).reverse());case 3:case"end":return e.stop()}}),e)}))),GM.apply(this,arguments)}var WM=function(){function e(t,r){Cn(this,e),this.options=r||{},this.root=t.root,this.dir=t.dir,this.path=t.path,this.dirty=t.dirty,this.flat=t.flat,this.parent=t.parent,this.parentKey=t.parentKey,this.unixfs=t.unixfs,this.mode=t.mode,this.mtime=t.mtime,this.cid=void 0,this.size=void 0}return Dn(e,[{key:"put",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return Promise.resolve(this)}},{key:"eachChildSeries",value:function(){return Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},{key:"flush",value:function(e){return Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}]),e}(),YM=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a;return Cn(this,r),(a=t.call(this,e,n))._bucket=tD({hashFn:HM,bits:8}),a}return Dn(r,[{key:"put",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._bucket.put(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return this._bucket.get(e)}},{key:"childCount",value:function(){return this._bucket.leafCount()}},{key:"directChildrenCount",value:function(){return this._bucket.childrenCount()}},{key:"onlyChild",value:function(){return this._bucket.onlyChild()}},{key:"eachChildSeries",value:function(){var e=this;return Hn(En().mark((function t(){var r,n,a,i,o,s,u,c;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=2,i=zn(e._bucket.eachLeafSeries());case 4:return t.next=6,Mf(i.next());case 6:if(!(r=!(o=t.sent).done)){t.next=13;break}return s=o.value,u=s.key,c=s.value,t.next=10,{key:u,child:c};case 10:r=!1,t.next=4;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(2),n=!0,a=t.t0;case 19:if(t.prev=19,t.prev=20,!r||null==i.return){t.next=24;break}return t.next=24,Mf(i.return());case 24:if(t.prev=24,!n){t.next=27;break}throw a;case 27:return t.finish(24);case 28:return t.finish(19);case 29:case"end":return t.stop()}}),t,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"flush",value:function(e){var t=this;return Hn(En().mark((function r(){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(Cb(zn(QM(t._bucket,e,t,t.options))),"t0",1);case 1:case"end":return r.stop()}}),r)})))()}}]),r}(WM);function QM(e,t,r,n){return JM.apply(this,arguments)}function JM(){return JM=Hn(En().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S,A,C,I,T,D,R,P,N,L,O;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t._children,o=[],s=0,u=0;case 4:if(!(u<i.length)){e.next=97;break}if(c=i.get(u)){e.next=8;break}return e.abrupt("continue",94);case 8:if(l=u.toString(16).toUpperCase().padStart(2,"0"),!(c instanceof qT)){e.next=49;break}return f=void 0,h=!1,p=!1,e.prev=13,e.t0=zn,e.next=17,Mf(QM(c,r,null,a));case 17:e.t1=e.sent,v=(0,e.t0)(e.t1);case 19:return e.next=21,Mf(v.next());case 21:if(!(h=!(y=e.sent).done)){e.next=27;break}b=y.value,f=b;case 24:h=!1,e.next=19;break;case 27:e.next=33;break;case 29:e.prev=29,e.t2=e.catch(13),p=!0,d=e.t2;case 33:if(e.prev=33,e.prev=34,!h||null==v.return){e.next=38;break}return e.next=38,Mf(v.return());case 38:if(e.prev=38,!p){e.next=41;break}throw d;case 41:return e.finish(38);case 42:return e.finish(33);case 43:if(f){e.next=45;break}throw new Error("Could not flush sharded directory, no subshard found");case 45:o.push({Name:l,Tsize:f.size,Hash:f.cid}),s+=f.size,e.next=94;break;case 49:if("function"!==typeof c.value.flush){e.next=87;break}g=c.value,m=void 0,w=!1,k=!1,e.prev=54,_=zn(g.flush(r));case 56:return e.next=58,Mf(_.next());case 58:if(!(w=!(E=e.sent).done)){e.next=66;break}return S=E.value,m=S,e.next=63,m;case 63:w=!1,e.next=56;break;case 66:e.next=72;break;case 68:e.prev=68,e.t3=e.catch(54),k=!0,x=e.t3;case 72:if(e.prev=72,e.prev=73,!w||null==_.return){e.next=77;break}return e.next=77,Mf(_.return());case 77:if(e.prev=77,!k){e.next=80;break}throw x;case 80:return e.finish(77);case 81:return e.finish(72);case 82:A=l+c.key,o.push({Name:A,Tsize:m.size,Hash:m.cid}),s+=m.size,e.next=94;break;case 87:if((C=c.value).cid){e.next=90;break}return e.abrupt("continue",94);case 90:I=l+c.key,T=C.size,o.push({Name:I,Tsize:T,Hash:C.cid}),s+=T;case 94:u++,e.next=4;break;case 97:return D=Uint8Array.from(i.bitField().reverse()),R=new _a({type:"hamt-sharded-directory",data:D,fanout:t.tableSize(),hashType:KM,mtime:n&&n.mtime,mode:n&&n.mode}),P={Data:R.marshal(),Links:o},N=to(Qi(P)),e.next=103,Mf(qM(N,r,a));case 103:return L=e.sent,O=N.length+s,e.next=107,{cid:L,node:P,size:O};case 107:case"end":return e.stop()}}),e,null,[[13,29,33,43],[34,,38,42],[54,68,72,82],[73,,77,81]])}))),JM.apply(this,arguments)}var ZM=ua("ipfs:mfs:core:utils:hamt-utils"),XM=function(){var e=An(En().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,h;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.parent.Data){e.next=2;break}throw new Error("Could not update HAMT directory because parent had no data");case 2:return i=Uint8Array.from(n._children.bitField().reverse()),o=_a.unmarshal(a.parent.Data),s=new _a({type:"hamt-sharded-directory",data:i,fanout:n.tableSize(),hashType:KM,mode:o.mode,mtime:o.mtime}),e.next=7,t.hashers.getHasher(a.hashAlg);case 7:return u=e.sent,c={Data:s.marshal(),Links:r.sort((function(e,t){return(e.Name||"").localeCompare(t.Name||"")}))},l=to(c),e.next=12,u.digest(l);case 12:if(f=e.sent,h=wi.create(a.cidVersion,eo,f),!a.flush){e.next=17;break}return e.next=17,t.repo.blocks.put(h,l);case 17:return e.abrupt("return",{node:c,cid:h,size:r.reduce((function(e,t){return e+(t.Tsize||0)}),l.length)});case 18:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),$M=function(){var e=An(En().mark((function e(t,r,n,a,i){var o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new qT({hash:n._options.hash,bits:n._options.bits},a,i),a._putObjectAt(i,o),e.next=4,tz(t,r,o,n);case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),ez=function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tD({hashFn:HM,bits:8}),e.next=3,Promise.all(t.map(function(){var e=An(En().mark((function e(t){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==(n=t.Name||"").length){e.next=6;break}return a=parseInt(n,16),i=new qT({hash:r._options.hash,bits:r._options.bits},r,a),r._putObjectAt(a,i),e.abrupt("return",Promise.resolve());case 6:return e.abrupt("return",r.put(n.substring(2),{size:t.Tsize,cid:t.Hash}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tz=function(){var e=An(En().mark((function e(t,r,n,a){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r.map(function(){var e=An(En().mark((function e(r){var i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==(i=r.Name||"").length){e.next=13;break}return ZM("Populating sub bucket",i),o=parseInt(i,16),e.next=6,t.repo.blocks.get(r.Hash);case 6:return s=e.sent,u=ro(s),c=new qT({hash:a._options.hash,bits:a._options.bits},n,o),n._putObjectAt(o,c),e.next=12,tz(t,u.Links,c,a);case 12:return e.abrupt("return",Promise.resolve());case 13:return e.abrupt("return",a.put(i.substring(2),{size:r.Tsize,cid:r.Hash}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),rz=function(e){return e.toString(16).toUpperCase().padStart(2,"0").substring(0,2)},nz=function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ez(n.Links);case 2:return a=e.sent,e.next=5,a._findNewBucketAndPos(r);case 5:for(i=e.sent,o=[{bucket:i.bucket,prefix:rz(i.pos)}],s=i.bucket;s!==a;)o.push({bucket:s,prefix:rz(s._posAtParent)}),s=s._parent;o.reverse(),o[0].node=n,u=En().mark((function e(){var n,i,s,u,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=o[c]).node){e.next=3;break}throw new Error("Could not generate HAMT path");case 3:if(i=n.node.Links.filter((function(e){return(e.Name||"").substring(0,2)===n.prefix})).pop()){e.next=7;break}return ZM("Link ".concat(n.prefix).concat(r," will be added")),e.abrupt("return","continue");case 7:if(i.Name!=="".concat(n.prefix).concat(r)){e.next=10;break}return ZM("Link ".concat(n.prefix).concat(r," will be replaced")),e.abrupt("return","continue");case 10:return ZM("Found subshard ".concat(n.prefix)),e.next=13,t.repo.blocks.get(i.Hash);case 13:if(s=e.sent,u=ro(s),o[c+1]){e.next=24;break}return ZM("Loaded new subshard ".concat(n.prefix)),e.next=19,$M(t,u.Links,a,n.bucket,parseInt(n.prefix,16));case 19:return e.next=21,a._findNewBucketAndPos(r);case 21:return l=e.sent,o.push({bucket:l.bucket,prefix:rz(l.pos),node:u}),e.abrupt("return","continue");case 24:return f=o[c+1],e.next=27,tz(t,u.Links,f.bucket,a);case 27:f.node=u;case 28:case"end":return e.stop()}}),e)})),c=0;case 13:if(!(c<o.length)){e.next=21;break}return e.delegateYield(u(),"t0",15);case 15:if("continue"!==e.t0){e.next=18;break}return e.abrupt("continue",18);case 18:c++,e.next=13;break;case 21:return e.next=23,a.put(r,!0);case 23:return o.reverse(),e.abrupt("return",{rootBucket:a,path:o});case 25:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),az=function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s.length>2&&void 0!==s[2]?s[2]:{},a=new YM({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:n.mtime,mode:n.mode},n),i=0;case 3:if(!(i<r.length)){e.next=9;break}return e.next=6,a._bucket.put(r[i].name,{size:r[i].size,cid:r[i].cid});case 6:i++,e.next=3;break;case 9:return e.next=11,Sb(a.flush(t.repo.blocks));case 11:if(o=e.sent){e.next=14;break}throw new Error("Flushing shard yielded no result");case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),iz=ua("ipfs:mfs:core:utils:add-link");function oz(e,t){return sz.apply(this,arguments)}function sz(){return(sz=An(En().mark((function e(t,r){var n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.parent,!r.parentCid){e.next=12;break}if(null!==(a=wi.asCID(r.parentCid))){e.next=5;break}throw ca(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");case 5:if(a.code===eo){e.next=7;break}throw ca(new Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");case 7:return iz("Loading parent node ".concat(a)),e.next=10,t.repo.blocks.get(a);case 10:i=e.sent,n=ro(i);case 12:if(n){e.next=14;break}throw ca(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");case 14:if(r.cid){e.next=16;break}throw ca(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");case 16:if(r.name){e.next=18;break}throw ca(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");case 18:if(r.size||0===r.size){e.next=20;break}throw ca(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");case 20:if(n.Data){e.next=22;break}throw ca(new Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");case 22:if("hamt-sharded-directory"!==(o=_a.unmarshal(n.Data)).type){e.next=26;break}return iz("Adding link to sharded directory"),e.abrupt("return",lz(t,jn(jn({},r),{},{parent:n})));case 26:if(!(n.Links.length>=r.shardSplitThreshold)){e.next=29;break}return iz("Converting directory to sharded directory"),e.abrupt("return",uz(t,jn(jn({},r),{},{parent:n,mtime:o.mtime,mode:o.mode})));case 29:return iz("Adding ".concat(r.name," (").concat(r.cid,") to regular directory")),e.abrupt("return",cz(t,jn(jn({},r),{},{parent:n})));case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var uz=function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,az(t,r.parent.Links.map((function(e){return{name:e.Name||"",size:e.Tsize||0,cid:e.Hash}})).concat({name:r.name,size:r.size,cid:r.cid}),r);case 2:return n=e.sent,iz("Converted directory to sharded directory ".concat(n.cid)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),cz=function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=r.parent.Links.filter((function(e){return e.Name!==r.name}))).push({Name:r.name,Tsize:r.size,Hash:r.cid}),r.parent.Data){e.next=4;break}throw ca(new Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");case 4:return(a=_a.unmarshal(r.parent.Data)).mtime?(o=Date.now(),s=Math.floor(o/1e3),a.mtime={secs:s,nsecs:1e3*(o-1e3*s)},i=a.marshal()):i=r.parent.Data,r.parent=Qi({Data:i,Links:n}),e.next=9,t.hashers.getHasher(r.hashAlg);case 9:return u=e.sent,c=to(r.parent),e.next=13,u.digest(c);case 13:if(l=e.sent,f=wi.create(r.cidVersion,eo,l),!r.flush){e.next=18;break}return e.next=18,t.repo.blocks.put(f,c);case 18:return e.abrupt("return",{node:r.parent,cid:f,size:c.length});case 19:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),lz=function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fz(t,r);case 2:return n=e.sent,a=n.shard,i=n.path,e.next=7,Sb(a.flush(t.repo.blocks));case 7:if(o=e.sent){e.next=10;break}throw new Error("No result from flushing shard");case 10:return e.next=12,t.repo.blocks.get(o.cid);case 12:if(s=e.sent,u=ro(s),c=r.parent.Links.filter((function(e){return(e.Name||"").substring(0,2)!==i[0].prefix})),l=u.Links.find((function(e){return(e.Name||"").substring(0,2)===i[0].prefix}))){e.next=18;break}throw new Error("No link found with prefix ".concat(i[0].prefix));case 18:return c.push(l),e.abrupt("return",XM(t,c,i[0].bucket,r));case 20:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),fz=function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={name:r.name,cid:r.cid,size:r.size},r.parent.Data){e.next=3;break}throw ca(new Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");case 3:return e.next=5,ez(r.parent.Links);case 5:return a=e.sent,i=_a.unmarshal(r.parent.Data),(o=new YM({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:i.mode},r))._bucket=a,i.mtime&&(o.mtime={secs:Math.round(Date.now()/1e3)}),e.next=12,a._findNewBucketAndPos(n.name);case 12:s=e.sent,(u=hz(s))[0].node=r.parent,c=0,l=En().mark((function e(){var r,i,o,s,l,f,h;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u[c],c++,i=r.node){e.next=5;break}throw new Error("Segment had no node");case 5:if(o=i.Links.find((function(e){return(e.Name||"").substring(0,2)===r.prefix}))){e.next=10;break}return iz("Link ".concat(r.prefix).concat(n.name," will be added")),c=u.length,e.abrupt("return","break");case 10:if(o.Name!=="".concat(r.prefix).concat(n.name)){e.next=14;break}return iz("Link ".concat(r.prefix).concat(n.name," will be replaced")),c=u.length,e.abrupt("return","break");case 14:if(!((o.Name||"").length>2)){e.next=18;break}return iz("Link ".concat(o.Name," ").concat(o.Hash," will be replaced with a subshard")),c=u.length,e.abrupt("return","break");case 18:return iz("Found subshard ".concat(r.prefix)),e.next=21,t.repo.blocks.get(o.Hash);case 21:if(s=e.sent,l=ro(s),u[c]){e.next=32;break}return iz("Loaded new subshard ".concat(r.prefix)),e.next=27,$M(t,l.Links,a,r.bucket,parseInt(r.prefix,16));case 27:return e.next=29,a._findNewBucketAndPos(n.name);case 29:return f=e.sent,u.push({bucket:f.bucket,prefix:rz(f.pos),node:l}),e.abrupt("return","break");case 32:return h=u[c],e.next=35,tz(t,l.Links,h.bucket,a);case 35:h.node=l;case 36:case"end":return e.stop()}}),e)}));case 17:if(!(c<u.length)){e.next=24;break}return e.delegateYield(l(),"t0",19);case 19:if("break"!==e.t0){e.next=22;break}return e.abrupt("break",24);case 22:e.next=17;break;case 24:return e.next=26,o._bucket.put(n.name,{size:n.size,cid:n.cid});case 26:return e.abrupt("return",{shard:o,path:u});case 27:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),hz=function(e){for(var t=[{bucket:e.bucket,prefix:rz(e.pos)}],r=e.bucket._parent,n=e.bucket._posAtParent;r;)t.push({bucket:r,prefix:rz(n)}),n=r._posAtParent,r=r._parent;return t.reverse(),t},pz=ua("ipfs:mfs:utils:update-tree"),dz={shardSplitThreshold:1e3};function vz(e,t,r){return yz.apply(this,arguments)}function yz(){return(yz=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,h,p,d,v,y;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object.assign({},dz,n),pz("Trail",r),r=r.slice().reverse(),a=0,o=!1,s=!1,e.prev=6,c=zn(t.repo.blocks.getMany(r.map((function(e){return e.cid}))));case 8:return e.next=10,c.next();case 10:if(!(o=!(l=e.sent).done)){e.next=26;break}if(f=l.value,h=ro(f),p=r[a].cid,d=r[a].name,a++,i){e.next=19;break}return i={cid:p,name:d,size:f.length},e.abrupt("continue",23);case 19:return e.next=21,oz(t,{parent:h,name:i.name,cid:i.cid,size:i.size,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:n.cidVersion});case 21:v=e.sent,i={cid:v.cid,name:d,size:v.size};case 23:o=!1,e.next=8;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(6),s=!0,u=e.t0;case 32:if(e.prev=32,e.prev=33,!o||null==c.return){e.next=37;break}return e.next=37,c.return();case 37:if(e.prev=37,!s){e.next=40;break}throw u;case 40:return e.finish(37);case 41:return e.finish(32);case 42:return y=i.cid,pz("Final CID ".concat(y)),e.abrupt("return",y);case 45:case"end":return e.stop()}}),e,null,[[6,28,32,42],[33,,37,41]])})))).apply(this,arguments)}var bz=ua("ipfs:mfs:utils:update-mfs-root");function gz(e,t,r){return mz.apply(this,arguments)}function mz(){return(mz=An(En().mark((function e(t,r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&n.signal&&n.signal.aborted)){e.next=2;break}throw ca(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});case 2:return bz("New MFS root will be ".concat(r)),e.next=5,t.repo.datastore.put(ny,r.bytes);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wz(e,t,r){return kz.apply(this,arguments)}function kz(){return kz=An(En().mark((function e(t,r,n){var a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new _a({type:r,mode:n.mode,mtime:n.mtime}),e.next=3,t.hashers.getHasher(n.hashAlg);case 3:return i=e.sent,o={Data:a.marshal(),Links:[]},s=to(o),e.next=8,i.digest(s);case 8:if(u=e.sent,c=wi.create(n.cidVersion,eo,u),!n.flush){e.next=13;break}return e.next=13,t.repo.blocks.put(c,s);case 13:return e.abrupt("return",{cid:c,node:o});case 14:case"end":return e.stop()}}),e)}))),kz.apply(this,arguments)}var xz=Gn.bind({ignoreUndefined:!0}),_z=ua("ipfs:mfs:mkdir"),Ez={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};function Sz(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o,s,u,c,l,f,h,p,d=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:{},a=xz(Ez,n),r){t.next=4;break}throw new Error("no path given to Mkdir");case 4:if("/"!==(r=r.trim())){t.next=9;break}if(!a.parents){t.next=8;break}return t.abrupt("return");case 8:throw ca(new Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH");case 9:if("/"===r.substring(0,1)){t.next=11;break}throw ca(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");case 11:if(_z("Creating ".concat(r)),"ipfs"!==(i=PM(r))[0]){t.next=15;break}throw ca(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");case 15:return t.next=17,DM(e,a);case 17:return o=t.sent,u=[],t.next=21,wz(e,"directory",a);case 21:c=t.sent,l=0;case 23:if(!(l<=i.length)){t.next=52;break}return f=i.slice(0,l),h="/ipfs/".concat(o,"/").concat(f.join("/")),t.prev=26,t.next=29,cP(h,e.repo.blocks);case 29:if("file"===(s=t.sent).type||"directory"===s.type){t.next=32;break}throw ca(new Error("".concat(r," was not a UnixFS node")),"ERR_NOT_UNIXFS");case 32:if(l!==i.length){t.next=36;break}if(!a.parents){t.next=35;break}return t.abrupt("return");case 35:throw ca(new Error("file already exists"),"ERR_ALREADY_EXISTS");case 36:u.push({name:s.name,cid:s.cid}),t.next=49;break;case 39:if(t.prev=39,t.t0=t.catch(26),"ERR_NOT_FOUND"!==t.t0.code){t.next=48;break}if(!(l<i.length)||a.parents){t.next=44;break}throw ca(new Error("Intermediate directory path ".concat(h," does not exist, use the -p flag to create it")),"ERR_NOT_FOUND");case 44:return t.next=46,Az(e,f[f.length-1],c,u[u.length-1],u,a);case 46:t.next=49;break;case 48:throw t.t0;case 49:l++,t.next=23;break;case 52:return t.next=54,vz(e,u,a);case 54:return p=t.sent,t.next=57,gz(e,p,a);case 57:case"end":return t.stop()}}),t,null,[[26,39]])}))),t.apply(this,arguments)}return $v((function(e){return t.apply(this,arguments)}))}var Az=function(){var e=An(En().mark((function e(t,r,n,a,i,o){var s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _z("Adding empty dir called ".concat(r," to ").concat(a.cid)),e.next=3,oz(t,{parent:a.node,parentCid:a.cid,size:0,cid:n.cid,name:r,hashAlg:o.hashAlg,cidVersion:o.cidVersion,flush:o.flush,shardSplitThreshold:o.shardSplitThreshold});case 3:s=e.sent,i[i.length-1].cid=s.cid,i.push({name:r,cid:n.cid});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,o){return e.apply(this,arguments)}}(),Cz=Gn.bind({ignoreUndefined:!0}),Iz=ua("ipfs:mfs:cp"),Tz={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};function Dz(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o,s,u,c,l,f,h,p,d,v=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=v.length>2&&void 0!==v[2]?v[2]:{},i=Cz(Tz,a),Array.isArray(r)||(r=[r]),t.next=5,Promise.all(r.map((function(t){return LM(e,t,i)})));case 5:return o=t.sent,t.next=8,LM(e,n,i);case 8:if(s=t.sent,o.length&&s){t.next=11;break}throw ca(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");case 11:if(u=o.find((function(e){return!e.exists})),!u){t.next=14;break}throw ca(new Error("".concat(u.path," does not exist")),"ERR_INVALID_PARAMS");case 14:if(c=Rz(s),!s.exists){t.next=21;break}if(Iz("Destination exists"),1!==o.length||c){t.next=19;break}throw ca(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS");case 19:t.next=50;break;case 21:if(Iz("Destination does not exist"),!(o.length>1)){t.next=32;break}if(i.parents){t.next=25;break}throw ca(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");case 25:return t.next=27,Sz(e)(s.path,i);case 27:return t.next=29,LM(e,s.path,i);case 29:s=t.sent,t.next=50;break;case 32:if(!(s.parts.length>1)){t.next=50;break}return l="/".concat(s.parts.slice(0,-1).join("/")),t.prev=34,t.next=37,MM(e)(l,i);case 37:t.next=50;break;case 39:if(t.prev=39,t.t0=t.catch(34),"ERR_NOT_FOUND"===t.t0.code){t.next=43;break}throw t.t0;case 43:if(i.parents){t.next=45;break}throw ca(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");case 45:return t.next=47,Sz(e)(l,i);case 47:return t.next=49,LM(e,s.path,i);case 49:s=t.sent;case 50:return f=Rz(s)?s.mfsPath:s.mfsDirectory,t.next=53,VM(e,f);case 53:if(h=t.sent,1!==o.length){t.next=61;break}if(p=o.pop()){t.next=58;break}throw ca(new Error("could not find source"),"ERR_INVALID_PARAMS");case 58:return d=c?p.name:s.name,Iz("Only one source, copying to destination ".concat(c?"directory":"file"," ").concat(d)),t.abrupt("return",Pz(e,p,d,h,i));case 61:return Iz("Multiple sources, wrapping in a directory"),t.abrupt("return",Nz(e,o,s,h,i));case 63:case"end":return t.stop()}}),t,null,[[34,39]])}))),t.apply(this,arguments)}return $v((function(e,r){return t.apply(this,arguments)}))}var Rz=function(e){return e.unixfs&&e.unixfs.type&&e.unixfs.type.includes("directory")},Pz=function(){var e=An(En().mark((function e(t,r,n,a,i){var o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.pop()){e.next=3;break}throw ca(new Error("destination had no parent"),"ERR_INVALID_PARAMS");case 3:return e.next=5,Lz(t,r,n,o,i);case 5:return o=e.sent,a.push(o),e.next=9,vz(t,a,i);case 9:return s=e.sent,e.next=12,gz(t,s,i);case 12:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),Nz=function(){var e=An(En().mark((function e(t,r,n,a,i){var o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0;case 1:if(!(o<r.length)){e.next=9;break}return s=r[o],e.next=5,Lz(t,s,s.name,n,i);case 5:n=e.sent;case 6:o++,e.next=1;break;case 9:return a[a.length-1]=n,e.next=12,vz(t,a,i);case 12:return u=e.sent,e.next=15,gz(t,u,i);case 15:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),Lz=function(){var e=An(En().mark((function e(t,r,n,a,i){var o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.repo.blocks.get(r.cid);case 2:return o=e.sent,e.next=5,oz(t,{parentCid:a.cid,size:o.length,cid:r.cid,name:n,hashAlg:i.hashAlg,cidVersion:i.cidVersion,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold});case 5:return s=e.sent,u=s.node,c=s.cid,l=s.size,a.node=u,a.cid=c,a.size=l,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),Oz=ua("ipfs:mfs:core:utils:remove-link");function Bz(e,t){return Uz.apply(this,arguments)}function Uz(){return(Uz=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.parent,!r.parentCid){e.next=10;break}if(null!==(a=wi.asCID(r.parentCid))){e.next=5;break}throw ca(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");case 5:return Oz("Loading parent node ".concat(a)),e.next=8,t.repo.blocks.get(a);case 8:i=e.sent,n=ro(i);case 10:if(n){e.next=12;break}throw ca(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");case 12:if(r.name){e.next=14;break}throw ca(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");case 14:if(n.Data){e.next=16;break}throw ca(new Error("Parent node had no data"),"ERR_INVALID_NODE");case 16:if("hamt-sharded-directory"!==_a.unmarshal(n.Data).type){e.next=20;break}return Oz("Removing ".concat(r.name," from sharded directory")),e.abrupt("return",zz(t,jn(jn({},r),{},{parent:n})));case 20:return Oz("Removing link ".concat(r.name," regular directory")),e.abrupt("return",Mz(t,jn(jn({},r),{},{parent:n})));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mz=function(){var e=An(En().mark((function e(t,r){var n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.parent.Links=r.parent.Links.filter((function(e){return e.Name!==r.name})),e.next=3,to(r.parent);case 3:return n=e.sent,e.next=6,t.hashers.getHasher(r.hashAlg);case 6:return a=e.sent,e.next=9,a.digest(n);case 9:return i=e.sent,o=wi.create(r.cidVersion,eo,i),e.next=13,t.repo.blocks.put(o,n);case 13:return Oz("Updated regular directory ".concat(o)),e.abrupt("return",{node:r.parent,cid:o});case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),zz=function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nz(t,r.name,r.parent);case 2:return n=e.sent,a=n.rootBucket,i=n.path,e.next=7,a.del(r.name);case 7:return e.next=9,Fz(t,i,r.name,r);case 9:return o=e.sent,s=o.node,e.abrupt("return",XM(t,s.Links,a,r));case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Fz=function(){var e=An(En().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,h,p,d,v;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.pop()){e.next=3;break}throw ca(new Error("Could not find parent"),"EINVALIDPARENT");case 3:if(o=i.bucket,s=i.prefix,u=i.node){e.next=6;break}throw ca(new Error("Could not find parent"),"EINVALIDPARENT");case 6:if(c=u.Links.find((function(e){return(e.Name||"").substring(0,2)===s}))){e.next=9;break}throw ca(new Error("No link found with prefix ".concat(s," for file ").concat(n)),"ERR_NOT_FOUND");case 9:if(c.Name!=="".concat(s).concat(n)){e.next=15;break}return Oz("Removing existing link ".concat(c.Name)),l=u.Links.filter((function(e){return e.Name!==c.Name})),e.next=14,o.del(n);case 14:return e.abrupt("return",XM(t,l,o,a));case 15:return Oz("Descending into sub-shard ".concat(c.Name," for ").concat(s).concat(n)),e.next=18,Fz(t,r,n,a);case 18:return f=e.sent,h=f.cid,p=f.size,d=s,1===f.node.Links.length&&(Oz("Removing subshard for ".concat(s)),v=f.node.Links[0],d="".concat(s).concat((v.Name||"").substring(2)),h=v.Hash,p=v.Tsize||0),Oz("Updating shard ".concat(s," with name ").concat(d)),e.abrupt("return",Vz(t,o,u,s,d,p,h,a));case 25:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),Vz=function(e,t,r,n,a,i,o,s){var u=r.Links.filter((function(e){return e.Name!==n}));return u.push({Name:a,Tsize:i,Hash:o}),XM(e,u,t,s)},jz=Gn.bind({ignoreUndefined:!0}),qz={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};function Kz(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o,s,u,c=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=jz(qz,n),Array.isArray(r)||(r=[r]),t.next=5,Promise.all(r.map((function(t){return LM(e,t,a)})));case 5:if((i=t.sent).length){t.next=8;break}throw ca(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");case 8:i.forEach((function(e){if("/"===e.path)throw ca(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")})),o=Ni(i),t.prev=10,o.s();case 12:if((s=o.n()).done){t.next=18;break}return u=s.value,t.next=16,Hz(e,u.path,a);case 16:t.next=12;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(10),o.e(t.t0);case 23:return t.prev=23,o.f(),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[10,20,23,26]])}))),t.apply(this,arguments)}return $v((function(e){return t.apply(this,arguments)}))}var Hz=function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LM(t,r,n);case 2:return a=e.sent,e.next=5,VM(t,a.mfsPath);case 5:if(i=e.sent,o=i[i.length-1],i.pop(),s=i[i.length-1]){e.next=11;break}throw ca(new Error("".concat(r," does not exist")),"ERR_NOT_FOUND");case 11:if("directory"!==o.type||n.recursive){e.next=13;break}throw ca(new Error("".concat(r," is a directory, use -r to remove directories")),"ERR_WAS_DIR");case 13:return e.next=15,Bz(t,{parentCid:s.cid,name:o.name,hashAlg:n.hashAlg,cidVersion:n.cidVersion,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold});case 15:return u=e.sent,c=u.cid,s.cid=c,e.next=20,vz(t,i,n);case 20:return l=e.sent,e.next=23,gz(t,l,n);case 23:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Gz=Gn.bind({ignoreUndefined:!0}),Wz=ua("ipfs:mfs:touch"),Yz={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function Qz(e,t,r){t||(t=0);var n=e.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!n)throw new Error("Invalid file mode: ".concat(e));var a=Ia(n,4),i=a[1],o=a[2],s=a[3];"a"!==i&&i||(i="ugo");var u=function(e,t,r){var n=0;return(e.includes("x")||e.includes("X")&&(r||1&t||8&t||64&t))&&(n+=1),e.includes("w")&&(n+=2),e.includes("r")&&(n+=4),n}(s,t,r);return u=function(e,t){var r=0;return e.includes("u")&&(r+=t<<6),e.includes("g")&&(r+=t<<3),e.includes("o")&&(r+=t),r}(i,u),u=function(e,t,r){return t.includes("t")&&(r+=parseInt("1000",8)),t.includes("s")&&(e.includes("u")&&(r+=parseInt("4000",8)),e.includes("g")&&(r+=parseInt("2000",8))),r}(i,s,u),"="===o?(i.includes("u")&&(t&=parseInt("7077",8),t|=u),i.includes("g")&&(t&=parseInt("7707",8),t|=u),i.includes("o")&&(t&=parseInt("7770",8),t|=u),t):"+"===o?u|t:"-"===o?u^t:t}function Jz(e,t){if(e instanceof String||"string"===typeof e){var r="".concat(e);e=r.match(/^\d+$/g)?parseInt(r,8):0+r.split(",").reduce((function(e,r){return Qz(r,e,t.isDirectory())}),t.mode||0)}return e}var Zz=Gn.bind({ignoreUndefined:!0}),Xz={};var $z=Gn.bind({ignoreUndefined:!0}),eF={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3};var tF=Gn.bind({ignoreUndefined:!0}),rF=ua("ipfs:mfs:touch"),nF={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"};var aF=Gn.bind({ignoreUndefined:!0}),iF={offset:0,length:1/0};var oF=ua("ipfs:mfs:utils:to-async-iterator");function sF(e){if(!e)throw ca(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");if(("string"===typeof e||e instanceof String)&&(oF("Content was a string"),e=Bf(e.toString())),e.length)return oF("Content was array-like"),Mn({},Symbol.asyncIterator,En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:case"end":return t.stop()}}),t)})));if(e[Symbol.asyncIterator])return oF("Content was an async iterator"),e;if(e[Symbol.iterator])return oF("Content was an iterator"),e;if(global.Blob&&e instanceof global.Blob)return oF("Content was an HTML5 Blob"),IA(e.stream());throw ca(new Error("Don't know how to convert ".concat(e," into an async iterator")),"ERR_INVALID_PARAMS")}var uF=Gn.bind({ignoreUndefined:!0}),cF=ua("ipfs:mfs:write"),lF={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:function(e,t){},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};var fF=function(){var e=An(En().mark((function e(t,r,n,a,i){var o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hF(t,n,a,i);case 2:return o=e.sent,e.next=5,IM().writeLock(An(En().mark((function e(){var n,a,s,u,c,l,f,h,p,d;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=PM(r),null!=(a=n.pop())){e.next=4;break}throw ca(new Error("source does not exist"),"ERR_NO_EXIST");case 4:return s=!1,e.prev=5,e.next=8,MM(t)("/".concat(n.join("/")),i);case 8:s=!0,e.next=15;break;case 11:if(e.prev=11,e.t0=e.catch(5),"ERR_NOT_FOUND"===e.t0.code){e.next=15;break}throw e.t0;case 15:if(s){e.next=18;break}return e.next=18,Sz(t)("/".concat(n.join("/")),i);case 18:return e.next=20,LM(t,r,i);case 20:return u=e.sent,e.next=23,VM(t,u.mfsDirectory);case 23:if(c=e.sent,l=c[c.length-1]){e.next=27;break}throw ca(new Error("directory does not exist"),"ERR_NO_EXIST");case 27:if(l.type&&l.type.includes("directory")){e.next=29;break}throw ca(new Error("cannot write to ".concat(l.name,": Not a directory")),"ERR_NOT_A_DIRECTORY");case 29:return e.next=31,t.repo.blocks.get(l.cid);case 31:return f=e.sent,h=ro(f),e.next=35,oz(t,{parent:h,name:a,cid:o.cid,size:o.size,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold,hashAlg:i.hashAlg,cidVersion:i.cidVersion});case 35:return p=e.sent,l.cid=p.cid,e.next=39,vz(t,c,i);case 39:return d=e.sent,e.next=42,gz(t,d,i);case 42:case"end":return e.stop()}}),e,null,[[5,11]])}))))();case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),hF=function(){var e=An(En().mark((function e(t,r,n,a){var i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.exists?cF("Overwriting file ".concat(n.cid," offset ").concat(a.offset," length ").concat(a.length)):cF("Writing file offset ".concat(a.offset," length ").concat(a.length)),i=[],a.offset>0&&(n.unixfs?(cF("Writing first ".concat(a.offset," bytes of original file")),i.push((function(){return n.content({offset:0,length:a.offset})})),n.unixfs.fileSize()<a.offset&&(o=a.offset-n.unixfs.fileSize(),cF("Writing zeros for extra ".concat(o," bytes")),i.push(dF(o)))):(cF("Writing zeros for first ".concat(a.offset," bytes")),i.push(dF(a.offset)))),i.push(pF(r,a.length)),s=yF(vF(i),(function(e){if(n.unixfs&&!a.truncate){var t=n.unixfs.fileSize();if(t>e)return cF("Writing last ".concat(t-e," of ").concat(t," bytes from original file starting at offset ").concat(e)),n.content({offset:e});cF("Not writing last bytes from original file")}return Mn({},Symbol.asyncIterator,Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))))})),void 0!==a.mode&&null!==a.mode?u=ka(a.mode):n&&n.unixfs&&(u=n.unixfs.mode),null!=a.mtime?c=xa(a.mtime):n&&n.unixfs&&(c=n.unixfs.mtime),e.next=9,t.hashers.getHasher(a.hashAlg);case 9:return l=e.sent,e.next=12,Sb(gD([{content:s,mode:u,mtime:c}],t.repo.blocks,{progress:a.progress,hasher:l,cidVersion:a.cidVersion,strategy:a.strategy,rawLeaves:a.rawLeaves,reduceSingleLeafToSelf:a.reduceSingleLeafToSelf,leafType:a.leafType}));case 12:if(f=e.sent){e.next=15;break}throw ca(new Error("cannot write to ".concat(parent.name)),"ERR_COULD_NOT_WRITE");case 15:return cF("Wrote ".concat(f.cid)),e.abrupt("return",{cid:f.cid,size:f.size});case 17:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),pF=function(e,t){return function(){var r=Hn(En().mark((function r(){var n,a,i,o,s,u,c;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=0,a=!1,i=!1,r.prev=3,s=zn(e);case 5:return r.next=7,Mf(s.next());case 7:if(!(a=!(u=r.sent).done)){r.next=19;break}if(c=u.value,!((n+=c.length)>t)){r.next=14;break}return r.next=13,c.subarray(0,t-n);case 13:return r.abrupt("return");case 14:return r.next=16,c;case 16:a=!1,r.next=5;break;case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(3),i=!0,o=r.t0;case 25:if(r.prev=25,r.prev=26,!a||null==s.return){r.next=30;break}return r.next=30,Mf(s.return());case 30:if(r.prev=30,!i){r.next=33;break}throw o;case 33:return r.finish(30);case 34:return r.finish(25);case 35:case"end":return r.stop()}}),r,null,[[3,21,25,35],[26,,30,34]])})));return function(){return r.apply(this,arguments)}}()},dF=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ay,r=new Uint8Array(t);function n(){return a.apply(this,arguments)}function a(){return(a=Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,r;case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return pF(n(),e)},vF=function(){var e=Hn(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=6;break}return e.delegateYield(Cb(zn(t[r]())),"t0",3);case 3:r++,e.next=1;break;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yF=function(){var e=Hn(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h,p,d,v;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,a=!1,i=!1,e.prev=3,s=zn(t);case 5:return e.next=7,Mf(s.next());case 7:if(!(a=!(u=e.sent).done)){e.next=15;break}return c=u.value,n+=c.length,e.next=12,c;case 12:a=!1,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),i=!0,o=e.t0;case 21:if(e.prev=21,e.prev=22,!a||null==s.return){e.next=26;break}return e.next=26,Mf(s.return());case 26:if(e.prev=26,!i){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(21);case 31:l=!1,f=!1,e.prev=33,p=zn(r(n));case 35:return e.next=37,Mf(p.next());case 37:if(!(l=!(d=e.sent).done)){e.next=45;break}return v=d.value,n+=v.length,e.next=42,v;case 42:l=!1,e.next=35;break;case 45:e.next=51;break;case 47:e.prev=47,e.t1=e.catch(33),f=!0,h=e.t1;case 51:if(e.prev=51,e.prev=52,!l||null==p.return){e.next=56;break}return e.next=56,Mf(p.return());case 56:if(e.prev=56,!f){e.next=59;break}throw h;case 59:return e.finish(56);case 60:return e.finish(51);case 61:case"end":return e.stop()}}),e,null,[[3,17,21,31],[22,,26,30],[33,47,51,61],[52,,56,60]])})));return function(t,r){return e.apply(this,arguments)}}(),bF=function(e){var t={cid:e.cid,name:e.name,type:"directory"===e.type?"directory":"file",size:e.size};return"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,t.mtime=e.unixfs.mtime),t};var gF={stat:MM},mF={chmod:function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S,A=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=A.length>2&&void 0!==A[2]?A[2]:{},i=Gz(Yz,a),Wz("Fetching stats for ".concat(r)),t.next=5,LM(e,r,i);case 5:if(o=t.sent,s=o.cid,u=o.mfsDirectory,c=o.name,s.code===eo){t.next=11;break}throw ca(new Error("".concat(r," was not a UnixFS node")),"ERR_NOT_UNIXFS");case 11:if(!i.recursive){t.next=22;break}return t.next=14,TS(Hn(En().mark((function t(){var a,i,o,u,c,l,f;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=!1,i=!1,t.prev=2,u=zn(fP(s,e.repo.blocks));case 4:return t.next=6,Mf(u.next());case 6:if(!(a=!(c=t.sent).done)){t.next=17;break}if("file"===(l=c.value).type||"directory"===l.type){t.next=10;break}throw ca(new Error("".concat(r," was not a UnixFS node")),"ERR_NOT_UNIXFS");case 10:return l.unixfs.mode=Jz(n,l.unixfs),f=Qi({Data:l.unixfs.marshal(),Links:l.node.Links}),t.next=14,{path:l.path,content:f};case 14:a=!1,t.next=4;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),i=!0,o=t.t0;case 23:if(t.prev=23,t.prev=24,!a||null==u.return){t.next=28;break}return t.next=28,Mf(u.return());case 28:if(t.prev=28,!i){t.next=31;break}throw o;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[2,19,23,33],[24,,28,32]])}))),(function(t){return gD(t,e.repo.blocks,jn(jn({},i),{},{pin:!1,dagBuilder:function(){var e=Hn(En().mark((function e(t,r,n){var a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,i=!1,e.prev=2,s=En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.value,e.next=3,An(En().mark((function e(){var a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.content,i=to(a),e.next=4,qM(i,r,n);case 4:if(o=e.sent,a.Data){e.next=7;break}throw ca(new Error("".concat(o," had no data")),"ERR_INVALID_NODE");case 7:return s=_a.unmarshal(a.Data),e.abrupt("return",{cid:o,size:i.length,path:t.path,unixfs:s});case 9:case"end":return e.stop()}}),e)})));case 3:case"end":return e.stop()}}),e)})),u=zn(t);case 5:return e.next=7,Mf(u.next());case 7:if(!(a=!(c=e.sent).done)){e.next=12;break}return e.delegateYield(s(),"t0",9);case 9:a=!1,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),i=!0,o=e.t1;case 18:if(e.prev=18,e.prev=19,!a||null==u.return){e.next=23;break}return e.next=23,Mf(u.return());case 23:if(e.prev=23,!i){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t,r,n){return e.apply(this,arguments)}}()}))}),(function(e){return Sb(e)}));case 14:if(l=t.sent){t.next=17;break}throw ca(new Error("Could not chmod ".concat(r)),"ERR_COULD_NOT_CHMOD");case 17:return t.next=19,Kz(e)(r,i);case 19:return t.next=21,Dz(e)("/ipfs/".concat(l.cid),r,i);case 21:return t.abrupt("return");case 22:return t.next=24,e.repo.blocks.get(s);case 24:if(f=t.sent,(h=ro(f)).Data){t.next=28;break}throw ca(new Error("".concat(s," had no data")),"ERR_INVALID_NODE");case 28:return(p=_a.unmarshal(h.Data)).mode=Jz(n,p),d=to({Data:p.marshal(),Links:h.Links}),v=i.hashAlg||Yz.hashAlg,t.next=34,e.hashers.getHasher(v);case 34:return y=t.sent,t.next=37,y.digest(d);case 37:if(b=t.sent,g=wi.create(i.cidVersion,eo,b),!i.flush){t.next=42;break}return t.next=42,e.repo.blocks.put(g,d);case 42:return t.next=44,VM(e,u);case 44:return m=t.sent,w=m[m.length-1],k=wi.decode(w.cid.bytes),t.next=49,e.repo.blocks.get(k);case 49:return x=t.sent,_=ro(x),t.next=53,oz(e,{parent:_,name:c,cid:g,size:d.length,flush:i.flush,hashAlg:v,cidVersion:s.version,shardSplitThreshold:1/0});case 53:return E=t.sent,w.cid=E.cid,t.next=57,vz(e,m,i);case 57:return S=t.sent,t.next=60,gz(e,S,i);case 60:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return $v((function(e,r){return t.apply(this,arguments)}))},cp:Dz,flush:function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},n=Zz(Xz,n),t.next=4,MM(e)(r,n);case 4:return a=t.sent,i=a.cid,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return $v((function(e){return t.apply(this,arguments)}))},mkdir:Sz,mv:function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},i=$z(eF,a),t.next=4,Dz(e)(r,n,i);case 4:return t.next=6,Kz(e)(r,jn(jn({},i),{},{recursive:!0}));case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return $v((function(e,r){return t.apply(this,arguments)}))},rm:Kz,touch:function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S,A,C,I=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=I.length>1&&void 0!==I[1]?I[1]:{},(a=tF(nF,n)).mtime=a.mtime||new Date,rF("Touching ".concat(r," mtime: ").concat(a.mtime)),t.next=6,LM(e,r,a);case 6:return i=t.sent,o=i.cid,s=i.mfsDirectory,u=i.name,c=i.exists,l=n.hashAlg||nF.hashAlg,t.next=14,e.hashers.getHasher(l);case 14:if(f=t.sent,d=a.cidVersion,c){t.next=28;break}return v=new _a({type:"file",mtime:a.mtime}),h=to({Data:v.marshal(),Links:[]}),t.next=21,f.digest(h);case 21:if(y=t.sent,p=wi.create(a.cidVersion,eo,y),!a.flush){t.next=26;break}return t.next=26,e.repo.blocks.put(p,h);case 26:t.next=47;break;case 28:if(o.code===eo){t.next=30;break}throw ca(new Error("".concat(r," was not a UnixFS node")),"ERR_NOT_UNIXFS");case 30:return d=o.version,t.next=33,e.repo.blocks.get(o);case 33:if(b=t.sent,(g=ro(b)).Data){t.next=37;break}throw ca(new Error("".concat(r," had no data")),"ERR_INVALID_NODE");case 37:return(m=_a.unmarshal(g.Data)).mtime=a.mtime,h=to({Data:m.marshal(),Links:g.Links}),t.next=42,f.digest(h);case 42:if(w=t.sent,p=wi.create(a.cidVersion,eo,w),!a.flush){t.next=47;break}return t.next=47,e.repo.blocks.put(p,h);case 47:return t.next=49,VM(e,s);case 49:return k=t.sent,x=k[k.length-1],_=x.cid,t.next=54,e.repo.blocks.get(_);case 54:return E=t.sent,S=ro(E),t.next=58,oz(e,{parent:S,name:u,cid:p,size:h.length,flush:a.flush,shardSplitThreshold:a.shardSplitThreshold,hashAlg:a.hashAlg,cidVersion:d});case 58:return A=t.sent,x.cid=A.cid,t.next=62,vz(e,k,a);case 62:return C=t.sent,t.next=65,gz(e,C,a);case 65:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return $v((function(e){return t.apply(this,arguments)}))}},wF={write:function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o,s,u,c=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:{},i=uF(lF,a),cF("Reading source, destination and parent"),t.next=5,IM().readLock(An(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sF(n);case 2:return o=t.sent,t.next=5,LM(e,r,i);case 5:return s=t.sent,t.next=8,LM(e,s.mfsDirectory,i);case 8:u=t.sent;case 9:case"end":return t.stop()}}),t)}))))();case 5:if(cF("Read source, destination and parent"),i.parents||u.exists){t.next=8;break}throw ca(new Error("directory does not exist"),"ERR_NO_EXIST");case 8:if(null!=o){t.next=10;break}throw ca(new Error("could not create source"),"ERR_NO_SOURCE");case 10:if(null!=s){t.next=12;break}throw ca(new Error("could not create destination"),"ERR_NO_DESTINATION");case 12:if(i.create||s.exists){t.next=14;break}throw ca(new Error("file does not exist"),"ERR_NO_EXIST");case 14:if("file"===s.entryType){t.next=16;break}throw ca(new Error("not a file"),"ERR_NOT_A_FILE");case 16:return t.abrupt("return",fF(e,r,o,s,i));case 17:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return $v((function(e,r){return t.apply(this,arguments)}))},read:function(e){return $v((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=aF(iF,r),Mn({},Symbol.asyncIterator,function(){var n=Hn(En().mark((function n(){var a,i,o,s,u,c,l,f;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(LM(e,t,r));case 2:return a=n.sent,n.next=5,Mf(cP(a.mfsPath,e.repo.blocks));case 5:if("file"===(i=n.sent).type||"raw"===i.type){n.next=8;break}throw ca(new Error("".concat(t," was not a file or raw bytes")),"ERR_NOT_FILE");case 8:if(i.content){n.next=10;break}throw ca(new Error("Could not load content stream from ".concat(t)),"ERR_NO_CONTENT");case 10:o=!1,s=!1,n.prev=12,c=zn(i.content({offset:r.offset,length:r.length}));case 14:return n.next=16,Mf(c.next());case 16:if(!(o=!(l=n.sent).done)){n.next=23;break}return f=l.value,n.next=20,f;case 20:o=!1,n.next=14;break;case 23:n.next=29;break;case 25:n.prev=25,n.t0=n.catch(12),s=!0,u=n.t0;case 29:if(n.prev=29,n.prev=30,!o||null==c.return){n.next=34;break}return n.next=34,Mf(c.return());case 34:if(n.prev=34,!s){n.next=37;break}throw u;case 37:return n.finish(34);case 38:return n.finish(29);case 39:case"end":return n.stop()}}),n,null,[[12,25,29,39],[30,,34,38]])})));return function(){return n.apply(this,arguments)}}())}))},ls:function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(LM(e,t,r));case 2:return a=n.sent,n.next=5,Mf(cP(a.mfsPath,e.repo.blocks));case 5:if("directory"!==(i=n.sent).type){n.next=9;break}return n.delegateYield(Cb(zn(kS(i.content(r),bF))),"t0",8);case 8:return n.abrupt("return");case 9:return n.next=11,bF(i);case 11:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return $v((function(e){return t.apply(this,arguments)}))}},kF=function(e){var t=e.options,r=e.mfs,n=e.operations,a=e.lock;Object.keys(n).forEach((function(e){r[e]=a(n[e](t))}))},xF={repoOwner:!0,repo:null};function _F(e){var t=e.repo,r=e.preload,n=e.hashers,a=function(e){var t=IM(Object.assign({},xF||{},e).repoOwner),r={};return kF({options:e,mfs:r,operations:gF,lock:function(e){return t.readLock(e)}}),kF({options:e,mfs:r,operations:mF,lock:function(e){return t.writeLock(e)}}),Object.keys(wF).forEach((function(t){r[t]=wF[t](e)})),r}({repo:t,repoOwner:!1!==e.options.repoOwner,hashers:n}),i=function(e){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=n.filter((function(e){return zv(e)||Nv(e)}));if(i.length){var o=n[n.length-1];o&&!1!==o.preload&&i.forEach((function(e){return r(e)}))}return e.apply(void 0,n)}};return jn(jn({},a),{},{chmod:a.chmod,cp:i(a.cp),mkdir:a.mkdir,stat:i(a.stat),rm:a.rm,read:i(a.read),touch:a.touch,write:a.write,mv:i(a.mv),flush:a.flush,ls:i(Hn(En().mark((function e(){var t,r,n,i,o,s,u=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,r=!1,e.prev=2,i=zn(a.ls.apply(a,u));case 4:return e.next=6,Mf(i.next());case 6:if(!(t=!(o=e.sent).done)){e.next=13;break}return s=o.value,e.next=10,jn(jn({},s),{},{size:s.size||0});case 10:t=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),r=!0,n=e.t0;case 19:if(e.prev=19,e.prev=20,!t||null==i.return){e.next=24;break}return e.next=24,Mf(i.return());case 24:if(e.prev=24,!r){e.next=27;break}throw n;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])}))))})}var EF="Ed25519",SF=2048;var AF=Dn((function e(t){var r=t.keychain;Cn(this,e),this.gen=function(e){var t=e.keychain;return $v((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:EF,size:SF};return t.createKey(e,r.type||EF,r.size||SF)}))}({keychain:r}),this.list=function(e){var t=e.keychain;return $v((function(){return t.listKeys()}))}({keychain:r}),this.rm=function(e){var t=e.keychain;return $v((function(e){return t.removeKey(e)}))}({keychain:r}),this.rename=function(e){var t=e.keychain,r=function(){var e=An(En().mark((function e(r,n){var a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.renameKey(r,n);case 2:return a=e.sent,e.abrupt("return",{was:r,now:a.name,id:a.id,overwrite:!1});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return $v(r)}({keychain:r}),this.export=function(e){var t=e.keychain;return $v((function(e,r){return t.exportKey(e,r)}))}({keychain:r}),this.import=function(e){var t=e.keychain;return $v((function(e,r,n){return t.importKey(e,r,n)}))}({keychain:r}),this.info=function(e){var t=e.keychain;return $v((function(e){return t.findKeyByName(e)}))}({keychain:r})}));function CF(e){var t=e.repo,r=e.preload;function n(){return n=An(En().mark((function e(n){var a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1!==(a=o.length>1&&void 0!==o[1]?o[1]:{}).preload&&r(n),e.next=4,t.blocks.get(n,a);case 4:return i=e.sent,e.abrupt("return",ro(i));case 6:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return $v((function(e){return n.apply(this,arguments)}))}function IF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(var r in e){var n=e[r];if("/"===r&&1===Object.keys(e).length)try{t.push({Name:"",Tsize:0,Hash:wi.parse(n)});continue}catch(i){}var a=wi.asCID(n);a?t.push({Name:"",Tsize:0,Hash:a}):(Array.isArray(n)&&IF(n,t),n&&"object"===typeof n&&IF(n,t))}return t}function TF(e){var t=e.repo,r=e.preload;function n(){return n=An(En().mark((function e(n){var a,i,o,s,u,c=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,t.gcLock.readLock();case 3:return i=e.sent,e.prev=4,o=to(n),e.next=8,Fc.digest(o);case 8:return s=e.sent,u=wi.createV1(eo,s),e.next=12,t.blocks.put(u,o,{signal:a.signal});case 12:if(!1!==a.preload&&r(u),!a.pin){e.next=16;break}return e.next=16,t.pins.pinRecursively(u,{signal:a.signal});case 16:return e.abrupt("return",u);case 17:return e.prev=17,i(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,,17,20]])}))),n.apply(this,arguments)}return $v((function(e){return n.apply(this,arguments)}))}var DF=Dn((function e(t){var r=t.repo,n=t.preload;Cn(this,e),this.addLink=function(e){var t=e.repo,r=e.preload,n=CF({repo:t,preload:r}),a=TF({repo:t,preload:r});function i(){return i=An(En().mark((function e(t,r){var i,o,s=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:{},e.next=3,n(t,i);case 3:return o=e.sent,e.abrupt("return",a(jn(jn({},o),{},{Links:o.Links.concat([r])}),i));case 5:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return $v((function(e,t){return i.apply(this,arguments)}))}({repo:r,preload:n}),this.appendData=function(e){var t=e.repo,r=e.preload,n=CF({repo:t,preload:r}),a=TF({repo:t,preload:r});function i(){return i=An(En().mark((function e(t,r){var i,o,s,u=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=3,n(t,i);case 3:return o=e.sent,s=ld([o.Data||[],r]),e.abrupt("return",a(jn(jn({},o),{},{Data:s}),i));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return $v((function(e,t){return i.apply(this,arguments)}))}({repo:r,preload:n}),this.rmLink=function(e){var t=e.repo,r=e.preload,n=CF({repo:t,preload:r}),a=TF({repo:t,preload:r});function i(){return i=An(En().mark((function e(t,r){var i,o,s,u=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=3,n(t,i);case 3:return o=e.sent,s=("string"===typeof r?r:r.Name)||"",o.Links=o.Links.filter((function(e){return e.Name!==s})),e.abrupt("return",a(o,i));case 7:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return $v((function(e,t){return i.apply(this,arguments)}))}({repo:r,preload:n}),this.setData=function(e){var t=e.repo,r=e.preload,n=CF({repo:t,preload:r}),a=TF({repo:t,preload:r});function i(){return i=An(En().mark((function e(t,r){var i,o,s=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:{},e.next=3,n(t,i);case 3:return o=e.sent,e.abrupt("return",a(jn(jn({},o),{},{Data:r}),i));case 5:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return $v((function(e,t){return i.apply(this,arguments)}))}({repo:r,preload:n})})),RF=Dn((function e(t){var r=t.repo,n=t.codecs,a=t.preload;Cn(this,e),this.data=function(e){var t=CF({repo:e.repo,preload:e.preload});function r(){return r=An(En().mark((function e(r){var n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,t(r,n);case 3:return a=e.sent,e.abrupt("return",a.Data||new Uint8Array(0));case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(e){return r.apply(this,arguments)}))}({repo:r,preload:a}),this.get=CF({repo:r,preload:a}),this.links=function(e){var t=e.repo,r=e.codecs;function n(){return n=An(En().mark((function e(n){var a,i,o,s,u=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,r.getCodec(n.code);case 3:return i=e.sent,e.next=6,t.blocks.get(n,a);case 6:o=e.sent,s=i.decode(o),e.t0=n.code,e.next=e.t0===qc?11:e.t0===eo?12:e.t0===Hs||e.t0===du?13:14;break;case 11:return e.abrupt("return",[]);case 12:return e.abrupt("return",s.Links);case 13:return e.abrupt("return",IF(s));case 14:throw new Error("Cannot resolve links from codec ".concat(n.code));case 15:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return $v((function(e){return n.apply(this,arguments)}))}({repo:r,codecs:n}),this.new=function(e){var t=e.repo,r=e.preload;function n(){return n=An(En().mark((function e(){var n,a,i,o,s,u=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=u.length>0&&void 0!==u[0]?u[0]:{}).template){e.next=7;break}if("unixfs-dir"!==n.template){e.next=6;break}a=new _a({type:"directory"}).marshal(),e.next=7;break;case 6:throw new Error("unknown template");case 7:return i=to({Data:a,Links:[]}),e.next=10,Fc.digest(i);case 10:return o=e.sent,s=wi.createV0(o),e.next=14,t.blocks.put(s,i,{signal:n.signal});case 14:return!1!==n.preload&&r(s),e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return $v((function(){return n.apply(this,arguments)}))}({repo:r,preload:a}),this.put=TF({repo:r,preload:a}),this.stat=function(e){var t=CF({repo:e.repo,preload:e.preload});function r(){return r=An(En().mark((function e(r){var n,a,i,o,s,u=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,t(r,n);case 3:return a=e.sent,i=to(a),o=i.length,s=a.Links.reduce((function(e,t){return e+(t.Tsize||0)}),0),e.abrupt("return",{Hash:r,NumLinks:a.Links.length,BlockSize:o,LinksSize:o-(a.Data||[]).length,DataSize:(a.Data||[]).length,CumulativeSize:o+s});case 8:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(e){return r.apply(this,arguments)}))}({repo:r,preload:a}),this.patch=new DF({repo:r,preload:a})})),PF=ua("ipfs:repo:gc");function NF(e){var t=e.repo;function r(){return r=An(En().mark((function e(){var r,n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,t.stat();case 3:return r=e.sent,e.abrupt("return",{numObjects:BigInt(r.numObjects.toString()),repoSize:BigInt(r.repoSize.toString()),repoPath:r.repoPath,version:"".concat(r.version),storageMax:BigInt(r.storageMax.toString())});case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(){return r.apply(this,arguments)}))}var LF=12;var OF=Dn((function e(t){var r=t.repo,n=t.hashers;Cn(this,e),this.gc=function(e){var t=e.repo,r=e.hashers;function n(){return n=Hn((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En().mark((function n(){var a,i;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=Date.now(),n.prev=1,n.next=4,Mf(DM({repo:t,hashers:r},e));case 4:return i=n.sent,n.next=7,Mf(t.pins.pinRecursively(i));case 7:return n.delegateYield(Cb(zn(t.gc())),"t0",8);case 8:if(n.prev=8,!i){n.next=12;break}return n.next=12,Mf(t.pins.unpin(i));case 12:return n.finish(8);case 13:PF("Complete (".concat(Date.now()-a,"ms)"));case 14:case"end":return n.stop()}}),n,null,[[1,,8,13]])}))()})),n.apply(this,arguments)}return $v((function(){return n.apply(this,arguments)}))}({repo:r,hashers:n}),this.stat=NF({repo:r}),this.version=function(e){var t=e.repo;function r(){return r=An(En().mark((function e(){var r,n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{},e.prev=1,e.next=4,t._checkInitialized(r);case 4:e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(1),![/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some((function(t){return t.test(e.t0.message)}))){e.next=11;break}return e.abrupt("return",LF);case 11:throw e.t0;case 12:return e.abrupt("return",t.version.get());case 13:case"end":return e.stop()}}),e,null,[[1,6]])}))),r.apply(this,arguments)}return $v((function(){return r.apply(this,arguments)}))}({repo:r}),this.setApiAddr=function(e){return r.apiAddr.set(e)}}));function BF(e,t){return{totalIn:BigInt(0),totalOut:BigInt(0),rateIn:0,rateOut:0}}var UF=Dn((function e(t){var r=t.repo,n=t.network;Cn(this,e),this.repo=NF({repo:r}),this.bw=function(e){var t=e.network,r=function(){var e=Hn((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En().mark((function r(){var n,a,i;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Mf(t.use(e));case 2:if(r.sent.libp2p,e.poll){r.next=8;break}return r.next=7,BF();case 7:return r.abrupt("return");case 8:if(n=e.interval||1e3,a=-1,r.prev=10,(a="string"===typeof n?Zv(n)||-1:n)&&!(a<0)){r.next=14;break}throw new Error("invalid duration");case 14:r.next=19;break;case 16:throw r.prev=16,r.t0=r.catch(10),ca(r.t0,"ERR_INVALID_POLL_INTERVAL");case 19:r.prev=19;case 20:return r.next=23,BF();case 23:return r.next=25,Mf(new Promise((function(e){i=setTimeout(e,a)})));case 25:r.next=20;break;case 27:return r.prev=27,clearTimeout(i),r.finish(27);case 30:case"end":return r.stop()}}),r,null,[[10,16],[19,,27,30]])}))()}));return function(){return e.apply(this,arguments)}}();return $v(r)}({network:n}),this.bitswap=bA({network:n})})),MF=function(e,t,r){if(!e)return r;var n,a;Array.isArray(t)&&(n=t.slice(0));"string"==typeof t&&(n=t.split("."));"symbol"==typeof t&&(n=[t]);if(!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;){if(a=n.shift(),!e)return r;if(void 0===(e=e[a]))return r}return e};var zF=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=FF;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},FF=Math.pow(2,31);var VF=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var jF=Math.pow(2,7),qF=Math.pow(2,14),KF=Math.pow(2,21),HF=Math.pow(2,28),GF=Math.pow(2,35),WF=Math.pow(2,42),YF=Math.pow(2,49),QF=Math.pow(2,56),JF=Math.pow(2,63),ZF={encode:zF,decode:VF,encodingLength:function(e){return e<jF?1:e<qF?2:e<KF?3:e<HF?4:e<GF?5:e<WF?6:e<YF?7:e<QF?8:e<JF?9:10}},XF=ZF,$F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=XF.decode(e,t);return[r,XF.decode.bytes]},eV=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return XF.encode(e,t,r),t},tV=function(e){return XF.encodingLength(e)},rV=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),nV=function(e,t){var r=t.byteLength,n=tV(e),a=n+tV(r),i=new Uint8Array(a+r);return eV(e,i,0),eV(r,i,n),i.set(t,a),new iV(e,r,t,i)},aV=function(e){var t=rV(e),r=Ia($F(t),2),n=r[0],a=r[1],i=Ia($F(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new iV(n,o,u,t)},iV=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var oV=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},sV=oV,uV=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),cV=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return fV(this,e)}}]),e}(),lV=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return fV(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),fV=function(e,t){return new lV(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},hV=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new uV(t,r,n),this.decoder=new cV(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),pV=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new hV(t,r,n,a)},dV=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=sV(n,r),i=a.encode,o=a.decode;return pV({prefix:t,name:r,encode:i,decode:function(e){return rV(o(e))}})},vV=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return pV({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},yV=dV({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bV=(dV({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),vV({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),gV=(vV({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),vV({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vV({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vV({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),vV({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vV({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vV({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),vV({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),function(e,t){var r=e.bytes;return 0===e.version?_V(r,wV(e),t||yV.encoder):EV(r,wV(e),t||bV.encoder)}),mV=new WeakMap,wV=function(e){var t=mV.get(e);if(null==t){var r=new Map;return mV.set(e,r),r}return t},kV=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==SV)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==AV)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=nV(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return gV(this,e)}},{key:"toJSON",value:function(){return{"/":gV(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||CV(n,a,i.bytes))}if(!0===t[IV]){var o=t.version,s=t.multihash,u=t.code,c=aV(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==SV)throw new Error("Version 0 CID must use dag-pb (code: ".concat(SV,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,CV(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,SV,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=rV(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new iV(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia($F(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=SV;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(xV(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return wV(o).set(a,e),o}}]),r}(),xV=function(e,t){switch(e[0]){case"Q":var r=t||yV;return[yV.prefix,r.decode("".concat(yV.prefix).concat(e))];case yV.prefix:var n=t||yV;return[yV.prefix,n.decode(e)];case bV.prefix:var a=t||bV;return[bV.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},_V=function(e,t,r){var n=r.prefix;if(n!==yV.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},EV=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},SV=112,AV=18,CV=function(e,t,r){var n=tV(e),a=n+tV(t),i=new Uint8Array(a+r.byteLength);return eV(e,i,0),eV(t,i,n),i.set(r,a),i},IV=Symbol.for("@ipld/js-cid/CID");function TV(e){return DV.apply(this,arguments)}function DV(){return(DV=An(En().mark((function e(t){var r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,n=!1,a=!1,e.prev=3,o=zn(t);case 5:return e.next=7,o.next();case 7:if(!(n=!(s=e.sent).done)){e.next=13;break}s.value,r++;case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})))).apply(this,arguments)}var RV=Yn("ipfs:repo:migrator:migration-8");function PV(e){return e.child?PV(e.child):e}function NV(e){try{var t=bV.decode("b".concat(e.toString().toLowerCase().slice(1))),r=kV.decode(t).multihash.bytes,n=bV.encode(r).slice(1).toUpperCase();return new Hv("/".concat(n),!1)}catch(eL){return e}}function LV(e){try{var t=bV.decode("b".concat(e.toString().toLowerCase().slice(1))),r=aV(t),n=bV.encode(kV.createV1(85,r).bytes).slice(1);return new Hv("/".concat(n.toUpperCase()),!1)}catch(a){return e}}function OV(e,t,r){return BV.apply(this,arguments)}function BV(){return(BV=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,h,p,d;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.blocks,e.next=3,a.open();case 3:return i=PV(a),e.next=6,TV(i.queryKeys({filters:[function(e){return n(e).toString()!==e.toString()}]}));case 6:o=e.sent,e.prev=7,s=0,u=!1,c=!1,e.prev=11,f=zn(i.query({}));case 13:return e.next=15,f.next();case 15:if(!(u=!(h=e.sent).done)){e.next=34;break}if(p=h.value,(d=n(p.key)).toString()===p.key.toString()){e.next=31;break}return s+=1,e.t0=RV,e.t1="Migrating Block from ".concat(p.key," to ").concat(d),e.next=24,i.has(p.key);case 24:return e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.next=28,i.delete(p.key);case 28:return e.next=30,i.put(d,p.value);case 30:r(s/o*100,"Migrated Block from ".concat(p.key," to ").concat(d));case 31:u=!1,e.next=13;break;case 34:e.next=40;break;case 36:e.prev=36,e.t3=e.catch(11),c=!0,l=e.t3;case 40:if(e.prev=40,e.prev=41,!u||null==f.return){e.next=45;break}return e.next=45,f.return();case 45:if(e.prev=45,!c){e.next=48;break}throw l;case 48:return e.finish(45);case 49:return e.finish(40);case 50:return e.prev=50,e.next=53,a.close();case 53:return e.finish(50);case 54:case"end":return e.stop()}}),e,null,[[7,,50,54],[11,36,40,50],[41,,45,49]])})))).apply(this,arguments)}var UV={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return OV(e,t,NV)},revert:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return OV(e,t,LV)}},MV=new TextDecoder;function zV(e,t){for(var r=0,n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");var a=e[t++];if(r+=n<28?(127&a)<<n:(127&a)*Math.pow(2,n),a<128)break}return[r,t]}function FV(e,t){var r,n=Ia(zV(e,t),2);r=n[0];var a=(t=n[1])+r;if(r<0||a<0)throw new Error("protobuf: invalid length");if(a>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,a),a]}function VV(e,t){var r,n=Ia(zV(e,t),2);return[7&(r=n[0]),r>>3,t=n[1]]}function jV(e){for(var t={},r=e.length,n=0;n<r;){var a,i,o=Ia(VV(e,n),3);if(a=o[0],i=o[1],n=o[2],1===i){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Hash"));if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");var s=Ia(FV(e,n),2);t.Hash=s[0],n=s[1]}else if(2===i){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Name"));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");var u,c=Ia(FV(e,n),2);u=c[0],n=c[1],t.Name=MV.decode(u)}else{if(3!==i)throw new Error("protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ".concat(i));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Tsize"));var l=Ia(zV(e,n),2);t.Tsize=l[0],n=l[1]}}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}var qV=new TextEncoder,KV=Math.pow(2,32),HV=Math.pow(2,31);function GV(e,t){var r=t.length;if("number"===typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");t[r=QV(t,r,e.Tsize)-1]=24}if("string"===typeof e.Name){var n=qV.encode(e.Name);r-=n.length,t.set(n,r),t[r=QV(t,r,n.length)-1]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),t[r=QV(t,r,e.Hash.length)-1]=10),t.length-r}function WV(e){var t=function(e){var t=0;if(e.Data){var r=e.Data.length;t+=1+r+JV(r)}if(e.Links){var n,a=Ni(e.Links);try{for(a.s();!(n=a.n()).done;){var i=YV(n.value);t+=1+i+JV(i)}}catch(eL){a.e(eL)}finally{a.f()}}return t}(e),r=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),r[n=QV(r,n,e.Data.length)-1]=10),e.Links)for(var a=e.Links.length-1;a>=0;a--){var i=GV(e.Links[a],r.subarray(0,n));r[n=QV(r,n-=i,i)-1]=18}return r}function YV(e){var t=0;if(e.Hash){var r=e.Hash.length;t+=1+r+JV(r)}if("string"===typeof e.Name){var n=qV.encode(e.Name).length;t+=1+n+JV(n)}return"number"===typeof e.Tsize&&(t+=1+JV(e.Tsize)),t}function QV(e,t,r){for(var n=t-=JV(r);r>=HV;)e[t++]=127&r|128,r/=128;for(;r>=128;)e[t++]=127&r|128,r>>>=7;return e[t]=r,n}function JV(e){return e%2===0&&e++,Math.floor((function(e){var t=0;e>=KV&&(e=Math.floor(e/KV),t=32);e>=65536&&(e>>>=16,t+=16);e>=256&&(e>>>=8,t+=8);return t+ZV[e]}(e)+6)/7)}var ZV=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],XV=["Data","Links"],$V=["Hash","Name","Tsize"],ej=new TextEncoder;function tj(e,t){if(e===t)return 0;for(var r=e.Name?ej.encode(e.Name):[],n=t.Name?ej.encode(t.Name):[],a=r.length,i=n.length,o=0,s=Math.min(a,i);o<s;++o)if(r[o]!==n[o]){a=r[o],i=n[o];break}return a<i?-1:i<a?1:0}function rj(e,t){return!Object.keys(e).some((function(e){return!t.includes(e)}))}var nj=112;function aj(e){!function(e){if(!e||"object"!==typeof e||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!rj(e,XV))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(var t=0;t<e.Links.length;t++){var r=e.Links[t];if(!r||"object"!==typeof r||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!rj(r,$V))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(void 0===r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(null==r.Hash||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==r.Name&&"string"!==typeof r.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==r.Tsize){if("number"!==typeof r.Tsize||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&-1===tj(r,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}(e);var t={};return e.Links&&(t.Links=e.Links.map((function(e){var t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),e.Data&&(t.Data=e.Data),WV(t)}function ij(e){var t=function(e){for(var t,r,n=e.length,a=0,i=!1;a<n;){var o,s,u=Ia(VV(e,a),3);if(o=u[0],s=u[1],a=u[2],2!==o)throw new Error("protobuf: (PBNode) invalid wireType, expected 2, got ".concat(o));if(1===s){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");var c=Ia(FV(e,a),2);r=c[0],a=c[1],t&&(i=!0)}else{if(2!==s)throw new Error("protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ".concat(s));if(i)throw new Error("protobuf: (PBNode) duplicate Links section");t||(t=[]);var l,f=Ia(FV(e,a),2);l=f[0],a=f[1],t.push(jV(l))}}if(a>n)throw new Error("protobuf: (PBNode) unexpected end of data");var h={};return r&&(h.Data=r),h.Links=t||[],h}(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map((function(e){var t={};try{t.Hash=kV.decode(e.Hash)}catch(r){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),r}var oj=la.Reader,sj=la.Writer,uj=(la.util,la.roots.default||(la.roots.default={})),cj=uj.ipfs=function(){var e={};return e.pin=function(){var e={};return e.Set=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.version=0,e.prototype.fanout=0,e.prototype.seed=0,e.encode=function(e,t){return t||(t=sj.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(16).uint32(e.fanout),null!=e.seed&&Object.hasOwnProperty.call(e,"seed")&&t.uint32(29).fixed32(e.seed),t},e.decode=function(e,t){e instanceof oj||(e=oj.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new uj.ipfs.pin.Set;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.version=e.uint32();break;case 2:n.fanout=e.uint32();break;case 3:n.seed=e.fixed32();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof uj.ipfs.pin.Set)return e;var t=new uj.ipfs.pin.Set;return null!=e.version&&(t.version=e.version>>>0),null!=e.fanout&&(t.fanout=e.fanout>>>0),null!=e.seed&&(t.seed=e.seed>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.version=0,r.fanout=0,r.seed=0),null!=e.version&&e.hasOwnProperty("version")&&(r.version=e.version),null!=e.fanout&&e.hasOwnProperty("fanout")&&(r.fanout=e.fanout),null!=e.seed&&e.hasOwnProperty("seed")&&(r.seed=e.seed),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e}(),e}(),e}(),lj=__webpack_require__(7050),fj=new Hv("/local/pins"),hj=256,pj=kV.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),dj="direct",vj="recursive";function yj(e){return new Hv("/".concat(bV.encode(e.multihash.bytes).toUpperCase().substring(1)))}function bj(e,t){for(var r=0;r<e.byteLength;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}var gj=function(e){var t=e.name,r=e.code,n=e.encode;return new mj(t,r,n)},mj=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?nV(this.code,r):r.then((function(e){return nV(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),wj=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},kj=gj({name:"sha2-256",code:18,encode:wj("SHA-256")}),xj=(gj({name:"sha2-512",code:19,encode:wj("SHA-512")}),cj.pin.Set);function _j(e){var t,r=e.Data;if(!r)throw new Error("No data present");var n=cd.decode(r),a=null!==(t=cd.decode.bytes)&&void 0!==t?t:0;if(a<=0)throw new Error("Invalid Set header length");if(a+n>r.length)throw new Error("Impossibly large set header length");var i=r.slice(a,n+a),o=xj.toObject(xj.decode(i),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(1!==o.version)throw new Error("Unsupported Set version: ".concat(o.version));if(o.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:o,data:r.slice(n+a)}}function Ej(e,t){var r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,e,!0);var n=Bf(t.toString()),a=ld([r,n],r.byteLength+n.byteLength);return lj(kh(a))}function Sj(e,t){return Aj.apply(this,arguments)}function Aj(){return Aj=Hn(En().mark((function e(t,r){var n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_j(r),a=0,i=Ni(r.Links),e.prev=3,i.s();case 5:if((o=i.n()).done){e.next=22;break}if(s=o.value,!(a<n.header.fanout)){e.next=17;break}if(u=s.Hash,pj.equals(u)){e.next=15;break}return e.next=12,Mf(t.get(u));case 12:return c=e.sent,l=ij(c),e.delegateYield(Cb(zn(Sj(t,l))),"t0",15);case 15:e.next=19;break;case 17:return e.next=19,s.Hash;case 19:a++;case 20:e.next=5;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(3),i.e(e.t1);case 27:return e.prev=27,i.f(),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[3,24,27,30]])}))),Aj.apply(this,arguments)}function Cj(e,t,r){return Ij.apply(this,arguments)}function Ij(){return Ij=Hn(En().mark((function e(t,r,n){var a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.Links.find((function(e){return e.Name===n}))){e.next=3;break}throw new Error("No link found with name "+n);case 3:return e.next=5,Mf(t.get(a.Hash));case 5:return i=e.sent,o=ij(i),e.delegateYield(Cb(zn(Sj(t,o))),"t0",8);case 8:case"end":return e.stop()}}),e)}))),Ij.apply(this,arguments)}function Tj(e,t){return r(t,0);function r(e,t){return n.apply(this,arguments)}function n(){return n=An(En().mark((function t(n,a){var i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(w=function(){return w=An(En().mark((function t(r,n){var a,i,o,s;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=aj(r),t.next=3,kj.digest(a);case 3:return i=t.sent,o=kV.createV0(i),t.next=7,e.put(o,a);case 7:s=r.Links.reduce((function(e,t){return e+(t.Tsize||0)}),0)+a.length,u[n]={Name:"",Tsize:s,Hash:o};case 9:case"end":return t.stop()}}),t)}))),w.apply(this,arguments)},m=function(e,t){return w.apply(this,arguments)},i=xj.encode({version:1,fanout:hj,seed:a}).finish(),o=cd.encode(i.length),s=ld([o,i]),u=[],c=0;c<hj;c++)u.push({Name:"",Tsize:1,Hash:pj});if(!(n.length<=8192)){t.next=14;break}return l=n.map((function(e){return{link:{Name:"",Tsize:1,Hash:e.key},data:e.data||new Uint8Array}})).sort((function(e,t){return bj(e.link.Hash.bytes,t.link.Hash.bytes)})),f=u.concat(l.map((function(e){return e.link}))),h=ld([s].concat(su(l.map((function(e){return e.data}))))),t.abrupt("return",{Data:h,Links:f});case 14:p=n.reduce((function(e,t){var r=Ej(a,t.key)%hj;return e[r]=r in e?e[r].concat([t]):[t],e}),[]),d=0,v=Ni(p),t.prev=17,v.s();case 19:if((y=v.n()).done){t.next=29;break}return b=y.value,t.next=23,r(b,a+1);case 23:return g=t.sent,t.next=26,m(g,d);case 26:d++;case 27:t.next=19;break;case 29:t.next=34;break;case 31:t.prev=31,t.t0=t.catch(17),v.e(t.t0);case 34:return t.prev=34,v.f(),t.finish(34);case 37:return t.abrupt("return",{Data:s,Links:u});case 38:case"end":return t.stop()}}),t,null,[[17,31,34,37]])}))),n.apply(this,arguments)}}function Dj(e,t,r){return Rj.apply(this,arguments)}function Rj(){return Rj=An(En().mark((function e(t,r,n){var a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tj(t,n.map((function(e){return{key:e}})));case 2:return a=e.sent,i=aj(a),e.next=6,kj.digest(i);case 6:return o=e.sent,s=kV.createV0(o),e.next=10,t.put(s,i);case 10:return u=a.Links.reduce((function(e,t){return e+t.Tsize}),0)+i.length,e.abrupt("return",{Name:r,Tsize:u,Hash:s});case 12:case"end":return e.stop()}}),e)}))),Rj.apply(this,arguments)}function Pj(e,t,r,n){return Nj.apply(this,arguments)}function Nj(){return(Nj=An(En().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.has(fj);case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,r.get(fj);case 6:return i=e.sent,o=kV.decode(i),e.next=10,t.get(o);case 10:return s=e.sent,u=ij(s),c=0,e.next=15,TV(Cj(t,u,vj));case 15:return e.t0=e.sent,e.next=18,TV(Cj(t,u,dj));case 18:e.t1=e.sent,l=e.t0+e.t1,f=!1,h=!1,e.prev=22,d=zn(Cj(t,u,vj));case 24:return e.next=26,d.next();case 26:if(!(f=!(v=e.sent).done)){e.next=38;break}return y=v.value,c++,b={depth:1/0},0!==y.version&&(b.version=y.version),y.code!==nj&&(b.codec=y.code),e.next=34,n.put(yj(y),Os(b));case 34:a(c/l*100,"Migrated recursive pin ".concat(y));case 35:f=!1,e.next=24;break;case 38:e.next=44;break;case 40:e.prev=40,e.t2=e.catch(22),h=!0,p=e.t2;case 44:if(e.prev=44,e.prev=45,!f||null==d.return){e.next=49;break}return e.next=49,d.return();case 49:if(e.prev=49,!h){e.next=52;break}throw p;case 52:return e.finish(49);case 53:return e.finish(44);case 54:g=!1,m=!1,e.prev=56,k=zn(Cj(t,u,dj));case 58:return e.next=60,k.next();case 60:if(!(g=!(x=e.sent).done)){e.next=72;break}return _=x.value,c++,E={depth:0},0!==_.version&&(E.version=_.version),_.code!==nj&&(E.codec=_.code),e.next=68,n.put(yj(_),Os(E));case 68:a(c/l*100,"Migrated direct pin ".concat(_));case 69:g=!1,e.next=58;break;case 72:e.next=78;break;case 74:e.prev=74,e.t3=e.catch(56),m=!0,w=e.t3;case 78:if(e.prev=78,e.prev=79,!g||null==k.return){e.next=83;break}return e.next=83,k.return();case 83:if(e.prev=83,!m){e.next=86;break}throw w;case 86:return e.finish(83);case 87:return e.finish(78);case 88:return e.next=90,t.delete(o);case 90:return e.next=92,r.delete(fj);case 92:case"end":return e.stop()}}),e,null,[[22,40,44,54],[45,,49,53],[56,74,78,88],[79,,83,87]])})))).apply(this,arguments)}function Lj(e,t,r,n){return Oj.apply(this,arguments)}function Oj(){return Oj=An(En().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],o=[],s=0,e.next=5,TV(n.queryKeys({}));case 5:u=e.sent,c=!1,l=!1,e.prev=8,h=zn(n.query({}));case 10:return e.next=12,h.next();case 12:if(!(c=!(p=e.sent).done)){e.next=21;break}d=p.value,v=d.key,y=d.value,s++,b=Vs(y),g=kV.create(b.version||0,b.codec||nj,aV(bV.decode("b"+v.toString().toLowerCase().split("/").pop()))),0===b.depth?(a(s/u*100,"Reverted direct pin ".concat(g)),o.push(g)):(a(s/u*100,"Reverted recursive pin ".concat(g)),i.push(g));case 18:c=!1,e.next=10;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(8),l=!0,f=e.t0;case 27:if(e.prev=27,e.prev=28,!c||null==h.return){e.next=32;break}return e.next=32,h.return();case 32:if(e.prev=32,!l){e.next=35;break}throw f;case 35:return e.finish(32);case 36:return e.finish(27);case 37:return a(100,"Updating pin root"),e.next=40,Dj(t,dj,o);case 40:return e.t1=e.sent,e.next=43,Dj(t,vj,i);case 43:return e.t2=e.sent,e.t3=[e.t1,e.t2],m={Links:e.t3},w=aj(m),e.next=49,kj.digest(w);case 49:return k=e.sent,x=kV.createV0(k),e.next=53,t.put(x,w);case 53:return e.next=55,r.put(fj,x.bytes);case 55:case"end":return e.stop()}}),e,null,[[8,23,27,37],[28,,32,36]])}))),Oj.apply(this,arguments)}function Bj(e,t,r){return Uj.apply(this,arguments)}function Uj(){return(Uj=An(En().mark((function e(t,r,n){var a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.blocks,i=t.datastore,o=t.pins,e.next=5,a.open();case 5:return e.next=7,i.open();case 7:return e.next=9,o.open();case 9:return e.prev=9,e.next=12,n(a,i,o,r);case 12:return e.prev=12,e.next=15,o.close();case 15:return e.next=17,i.close();case 17:return e.next=19,a.close();case 19:return e.finish(12);case 20:case"end":return e.stop()}}),e,null,[[9,,12,20]])})))).apply(this,arguments)}var Mj={version:9,description:"Migrates pins to datastore",migrate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return Bj(e,t,Pj)},revert:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return Bj(e,t,Lj)}},zj=new Hv("/config"),Fj=new Hv("/version");function Vj(e){for(var t=e;t.db||t.child;)if("level-js"===(t=t.db||t.child).type||"Level"===t.constructor.name)return t}function jj(){return jj=An(En().mark((function e(t,r,n){var a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",a);case 5:if(i=Vj(n)){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",new Promise((function(e,r){var n=i.store("readonly").get(t.toString());n.transaction.onabort=function(){r(n.transaction.error)},n.transaction.oncomplete=function(){e(Boolean(n.result))}})));case 9:case"end":return e.stop()}}),e)}))),jj.apply(this,arguments)}function qj(){return qj=An(En().mark((function e(t,r,n,a){var i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",r(t));case 4:if(i=Vj(a)){e.next=7;break}throw Fb();case 7:return e.abrupt("return",new Promise((function(e,r){var n=i.store("readonly").get(t.toString());n.transaction.onabort=function(){r(n.transaction.error)},n.transaction.oncomplete=function(){if(n.result)return e(n.result);r(Fb())}})));case 8:case"end":return e.stop()}}),e)}))),qj.apply(this,arguments)}function Kj(e){var t=e.get.bind(e),r=e.has.bind(e);return e.get=function(n){return function(e,t,r,n){return qj.apply(this,arguments)}(n,t,r,e)},e.has=function(t){return function(e,t,r){return jj.apply(this,arguments)}(t,r,e)},e}function Hj(e){return jn(jn({},e),{},{root:Kj(e.root),datastore:Kj(e.datastore),pins:Kj(e.pins),keys:Kj(e.keys)})}function Gj(e,t){return Wj.apply(this,arguments)}function Wj(){return Wj=An(En().mark((function e(t,r){var n,a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>2&&void 0!==o[2]?o[2]:function(){},a=Vj(r)){e.next=5;break}return n("".concat(t," did not need an upgrade")),e.abrupt("return");case 5:return n("Upgrading ".concat(t)),i=function(e,t){return[{type:"del",key:e},{type:"put",key:Bf(e),value:t}]},e.next=9,eq(a,i);case 9:case"end":return e.stop()}}),e)}))),Wj.apply(this,arguments)}function Yj(e,t){return Qj.apply(this,arguments)}function Qj(){return Qj=An(En().mark((function e(t,r){var n,a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>2&&void 0!==o[2]?o[2]:function(){},a=Vj(r)){e.next=5;break}return n("".concat(t," did not need a downgrade")),e.abrupt("return");case 5:return n("Downgrading ".concat(t)),i=function(e,t){return[{type:"del",key:e},{type:"put",key:kh(e),value:t}]},e.next=9,eq(a,i);case 9:case"end":return e.stop()}}),e)}))),Qj.apply(this,arguments)}function Jj(e){return e.child?Jj(e.child):e}function Zj(e,t,r){return Xj.apply(this,arguments)}function Xj(){return Xj=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object.entries(t).map((function(e){var t=Ia(e,2);return{key:t[0],backend:Jj(t[1])}})).filter((function(e){e.key;return"LevelDatastore"===e.backend.constructor.name})).map((function(e){return{name:e.key,store:e.backend}})),r(0,"Migrating ".concat(a.length," dbs")),i=0,o=function(e){r(Math.round(i/a.length*100),e)},s=Ni(a),e.prev=5,s.s();case 7:if((u=s.n()).done){e.next=21;break}return c=u.value,l=c.name,f=c.store,e.next=11,f.open();case 11:return e.prev=11,e.next=14,n(l,f,o);case 14:return e.prev=14,i++,e.next=18,f.close();case 18:return e.finish(14);case 19:e.next=7;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),s.e(e.t0);case 26:return e.prev=26,s.f(),e.finish(26);case 29:r(100,"Migrated ".concat(a.length," dbs"));case 30:case"end":return e.stop()}}),e,null,[[5,23,26,29],[11,,14,19]])}))),Xj.apply(this,arguments)}var $j={version:10,description:"Migrates datastore-level keys to binary",migrate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return Zj(e,t,Gj)},revert:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return Zj(e,t,Yj)}};function eq(e,t){return new Promise((function(r,n){var a=e.iterator();a._deserializeKey=a._deserializeValue=function(e){return e},function i(){var o=function(o,s,u){if(o||void 0===s){a.end((function(e){e?n(e):r()}))}else!function(t,r){var n,a=e.store("readwrite"),i=a.transaction,s=0;i.onabort=function(){return r(n||i.error||new Error("aborted by user"))},i.oncomplete=function(){return r()},function e(){var r,u=t[s++],c=u.key;try{r="del"===u.type?a.delete(c):a.put(u.value,c)}catch(o){return n=o,void i.abort()}s<t.length&&(r.onsuccess=e)}()}(t(s,u),i)};a.next(o)}()}))}var tq=new Hv("/local/filesroot");function rq(){return rq=An(En().mark((function e(t){var r,n,a=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=a.length>1&&void 0!==a[1]?a[1]:function(){})(100,"Migrating MFS root to repo datastore"),e.next=4,t.root.open();case 4:return e.next=6,t.datastore.open();case 6:return e.next=8,t.root.has(tq);case 8:if(!e.sent){e.next=16;break}return e.next=11,t.root.get(tq);case 11:return n=e.sent,e.next=14,t.datastore.put(tq,n);case 14:return e.next=16,t.root.delete(tq);case 16:return e.next=18,t.datastore.close();case 18:return e.next=20,t.root.close();case 20:r(100,"Stored MFS root in repo datastore");case 21:case"end":return e.stop()}}),e)}))),rq.apply(this,arguments)}function nq(){return nq=An(En().mark((function e(t){var r,n,a=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=a.length>1&&void 0!==a[1]?a[1]:function(){})(100,"Migrating MFS root to repo root datastore"),e.next=4,t.root.open();case 4:return e.next=6,t.datastore.open();case 6:return e.next=8,t.datastore.has(tq);case 8:if(!e.sent){e.next=16;break}return e.next=11,t.datastore.get(tq);case 11:return n=e.sent,e.next=14,t.root.put(tq,n);case 14:return e.next=16,t.datastore.delete(tq);case 16:return e.next=18,t.datastore.close();case 18:return e.next=20,t.root.close();case 20:r(100,"Stored MFS root in repo root datastore");case 21:case"end":return e.stop()}}),e)}))),nq.apply(this,arguments)}var aq={version:11,description:"Store mfs root in the datastore",migrate:function(e){return rq.apply(this,arguments)},revert:function(e){return nq.apply(this,arguments)}},iq=la.Reader,oq=la.Writer,sq=la.util,uq=la.roots.default||(la.roots.default={}),cq=uq.Protocols=function(){function e(e){if(this.protocols=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.protocols=sq.emptyArray,e.encode=function(e,t){if(t||(t=oq.create()),null!=e.protocols&&e.protocols.length)for(var r=0;r<e.protocols.length;++r)t.uint32(10).string(e.protocols[r]);return t},e.decode=function(e,t){e instanceof iq||(e=iq.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new uq.Protocols;e.pos<r;){var a=e.uint32();if(a>>>3===1)n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(e.string());else e.skipType(7&a)}return n},e.fromObject=function(e){if(e instanceof uq.Protocols)return e;var t=new uq.Protocols;if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Protocols.protocols: array expected");t.protocols=[];for(var r=0;r<e.protocols.length;++r)t.protocols[r]=String(e.protocols[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.protocols=[]),e.protocols&&e.protocols.length){r.protocols=[];for(var n=0;n<e.protocols.length;++n)r.protocols[n]=e.protocols[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e}(),lq=la.Reader,fq=la.Writer,hq=la.util,pq=la.roots.default||(la.roots.default={}),dq=pq.Addresses=function(){function e(e){if(this.addrs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.addrs=hq.emptyArray,e.prototype.certifiedRecord=null,e.encode=function(e,t){if(t||(t=fq.create()),null!=e.addrs&&e.addrs.length)for(var r=0;r<e.addrs.length;++r)pq.Addresses.Address.encode(e.addrs[r],t.uint32(10).fork()).ldelim();return null!=e.certifiedRecord&&Object.hasOwnProperty.call(e,"certifiedRecord")&&pq.Addresses.CertifiedRecord.encode(e.certifiedRecord,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof lq||(e=lq.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new pq.Addresses;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.addrs&&n.addrs.length||(n.addrs=[]),n.addrs.push(pq.Addresses.Address.decode(e,e.uint32()));break;case 2:n.certifiedRecord=pq.Addresses.CertifiedRecord.decode(e,e.uint32());break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof pq.Addresses)return e;var t=new pq.Addresses;if(e.addrs){if(!Array.isArray(e.addrs))throw TypeError(".Addresses.addrs: array expected");t.addrs=[];for(var r=0;r<e.addrs.length;++r){if("object"!==typeof e.addrs[r])throw TypeError(".Addresses.addrs: object expected");t.addrs[r]=pq.Addresses.Address.fromObject(e.addrs[r])}}if(null!=e.certifiedRecord){if("object"!==typeof e.certifiedRecord)throw TypeError(".Addresses.certifiedRecord: object expected");t.certifiedRecord=pq.Addresses.CertifiedRecord.fromObject(e.certifiedRecord)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addrs=[]),t.defaults&&(r.certifiedRecord=null),e.addrs&&e.addrs.length){r.addrs=[];for(var n=0;n<e.addrs.length;++n)r.addrs[n]=pq.Addresses.Address.toObject(e.addrs[n],t)}return null!=e.certifiedRecord&&e.hasOwnProperty("certifiedRecord")&&(r.certifiedRecord=pq.Addresses.CertifiedRecord.toObject(e.certifiedRecord,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e.Address=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.multiaddr=hq.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:hq.oneOfGetter(t=["isCertified"]),set:hq.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=fq.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof lq||(e=lq.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new pq.Addresses.Address;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.multiaddr=e.bytes();break;case 2:n.isCertified=e.bool();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof pq.Addresses.Address)return e;var t=new pq.Addresses.Address;return null!=e.multiaddr&&("string"===typeof e.multiaddr?hq.base64.decode(e.multiaddr,t.multiaddr=hq.newBuffer(hq.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=hq.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?hq.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(r.isCertified=e.isCertified,t.oneofs&&(r._isCertified="isCertified")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e}(),e.CertifiedRecord=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=hq.Long?hq.Long.fromBits(0,0,!0):0,e.prototype.raw=hq.newBuffer([]),e.encode=function(e,t){return t||(t=fq.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.raw&&Object.hasOwnProperty.call(e,"raw")&&t.uint32(18).bytes(e.raw),t},e.decode=function(e,t){e instanceof lq||(e=lq.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new pq.Addresses.CertifiedRecord;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.seq=e.uint64();break;case 2:n.raw=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof pq.Addresses.CertifiedRecord)return e;var t=new pq.Addresses.CertifiedRecord;return null!=e.seq&&(hq.Long?(t.seq=hq.Long.fromValue(e.seq)).unsigned=!0:"string"===typeof e.seq?t.seq=parseInt(e.seq,10):"number"===typeof e.seq?t.seq=e.seq:"object"===typeof e.seq&&(t.seq=new hq.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.raw&&("string"===typeof e.raw?hq.base64.decode(e.raw,t.raw=hq.newBuffer(hq.base64.length(e.raw)),0):e.raw.length&&(t.raw=e.raw)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(hq.Long){var n=new hq.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;t.bytes===String?r.raw="":(r.raw=[],t.bytes!==Array&&(r.raw=hq.newBuffer(r.raw)))}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"===typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?hq.Long.prototype.toString.call(e.seq):t.longs===Number?new hq.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.raw&&e.hasOwnProperty("raw")&&(r.raw=t.bytes===String?hq.base64.encode(e.raw,0,e.raw.length):t.bytes===Array?Array.prototype.slice.call(e.raw):e.raw),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e}(),e}(),vq=la.Reader,yq=la.Writer,bq=la.util,gq=la.roots.default||(la.roots.default={}),mq=gq.Peer=function(){function e(e){if(this.addresses=[],this.protocols=[],this.metadata=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.addresses=bq.emptyArray,e.prototype.protocols=bq.emptyArray,e.prototype.metadata=bq.emptyArray,e.prototype.pubKey=null,e.prototype.peerRecordEnvelope=null,Object.defineProperty(e.prototype,"_pubKey",{get:bq.oneOfGetter(t=["pubKey"]),set:bq.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_peerRecordEnvelope",{get:bq.oneOfGetter(t=["peerRecordEnvelope"]),set:bq.oneOfSetter(t)}),e.encode=function(e,t){if(t||(t=yq.create()),null!=e.addresses&&e.addresses.length)for(var r=0;r<e.addresses.length;++r)gq.Address.encode(e.addresses[r],t.uint32(10).fork()).ldelim();if(null!=e.protocols&&e.protocols.length)for(r=0;r<e.protocols.length;++r)t.uint32(18).string(e.protocols[r]);if(null!=e.metadata&&e.metadata.length)for(r=0;r<e.metadata.length;++r)gq.Metadata.encode(e.metadata[r],t.uint32(26).fork()).ldelim();return null!=e.pubKey&&Object.hasOwnProperty.call(e,"pubKey")&&t.uint32(34).bytes(e.pubKey),null!=e.peerRecordEnvelope&&Object.hasOwnProperty.call(e,"peerRecordEnvelope")&&t.uint32(42).bytes(e.peerRecordEnvelope),t},e.decode=function(e,t){e instanceof vq||(e=vq.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new gq.Peer;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(gq.Address.decode(e,e.uint32()));break;case 2:n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(e.string());break;case 3:n.metadata&&n.metadata.length||(n.metadata=[]),n.metadata.push(gq.Metadata.decode(e,e.uint32()));break;case 4:n.pubKey=e.bytes();break;case 5:n.peerRecordEnvelope=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof gq.Peer)return e;var t=new gq.Peer;if(e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".Peer.addresses: array expected");t.addresses=[];for(var r=0;r<e.addresses.length;++r){if("object"!==typeof e.addresses[r])throw TypeError(".Peer.addresses: object expected");t.addresses[r]=gq.Address.fromObject(e.addresses[r])}}if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Peer.protocols: array expected");t.protocols=[];for(r=0;r<e.protocols.length;++r)t.protocols[r]=String(e.protocols[r])}if(e.metadata){if(!Array.isArray(e.metadata))throw TypeError(".Peer.metadata: array expected");t.metadata=[];for(r=0;r<e.metadata.length;++r){if("object"!==typeof e.metadata[r])throw TypeError(".Peer.metadata: object expected");t.metadata[r]=gq.Metadata.fromObject(e.metadata[r])}}return null!=e.pubKey&&("string"===typeof e.pubKey?bq.base64.decode(e.pubKey,t.pubKey=bq.newBuffer(bq.base64.length(e.pubKey)),0):e.pubKey.length&&(t.pubKey=e.pubKey)),null!=e.peerRecordEnvelope&&("string"===typeof e.peerRecordEnvelope?bq.base64.decode(e.peerRecordEnvelope,t.peerRecordEnvelope=bq.newBuffer(bq.base64.length(e.peerRecordEnvelope)),0):e.peerRecordEnvelope.length&&(t.peerRecordEnvelope=e.peerRecordEnvelope)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addresses=[],r.protocols=[],r.metadata=[]),e.addresses&&e.addresses.length){r.addresses=[];for(var n=0;n<e.addresses.length;++n)r.addresses[n]=gq.Address.toObject(e.addresses[n],t)}if(e.protocols&&e.protocols.length){r.protocols=[];for(n=0;n<e.protocols.length;++n)r.protocols[n]=e.protocols[n]}if(e.metadata&&e.metadata.length){r.metadata=[];for(n=0;n<e.metadata.length;++n)r.metadata[n]=gq.Metadata.toObject(e.metadata[n],t)}return null!=e.pubKey&&e.hasOwnProperty("pubKey")&&(r.pubKey=t.bytes===String?bq.base64.encode(e.pubKey,0,e.pubKey.length):t.bytes===Array?Array.prototype.slice.call(e.pubKey):e.pubKey,t.oneofs&&(r._pubKey="pubKey")),null!=e.peerRecordEnvelope&&e.hasOwnProperty("peerRecordEnvelope")&&(r.peerRecordEnvelope=t.bytes===String?bq.base64.encode(e.peerRecordEnvelope,0,e.peerRecordEnvelope.length):t.bytes===Array?Array.prototype.slice.call(e.peerRecordEnvelope):e.peerRecordEnvelope,t.oneofs&&(r._peerRecordEnvelope="peerRecordEnvelope")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e}(),wq=(gq.Address=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.multiaddr=bq.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:bq.oneOfGetter(t=["isCertified"]),set:bq.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=yq.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof vq||(e=vq.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new gq.Address;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.multiaddr=e.bytes();break;case 2:n.isCertified=e.bool();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof gq.Address)return e;var t=new gq.Address;return null!=e.multiaddr&&("string"===typeof e.multiaddr?bq.base64.decode(e.multiaddr,t.multiaddr=bq.newBuffer(bq.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=bq.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?bq.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(r.isCertified=e.isCertified,t.oneofs&&(r._isCertified="isCertified")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e}(),gq.Metadata=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value=bq.newBuffer([]),e.encode=function(e,t){return t||(t=yq.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).bytes(e.value),t},e.decode=function(e,t){e instanceof vq||(e=vq.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new gq.Metadata;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.key=e.string();break;case 2:n.value=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof gq.Metadata)return e;var t=new gq.Metadata;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&("string"===typeof e.value?bq.base64.decode(e.value,t.value=bq.newBuffer(bq.base64.length(e.value)),0):e.value.length&&(t.value=e.value)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",t.bytes===String?r.value="":(r.value=[],t.bytes!==Array&&(r.value=bq.newBuffer(r.value)))),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(r.value=t.bytes===String?bq.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e}(),la.Reader),kq=la.Writer,xq=la.util,_q=la.roots.default||(la.roots.default={}),Eq=_q.Envelope=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.publicKey=xq.newBuffer([]),e.prototype.payloadType=xq.newBuffer([]),e.prototype.payload=xq.newBuffer([]),e.prototype.signature=xq.newBuffer([]),e.encode=function(e,t){return t||(t=kq.create()),null!=e.publicKey&&Object.hasOwnProperty.call(e,"publicKey")&&t.uint32(10).bytes(e.publicKey),null!=e.payloadType&&Object.hasOwnProperty.call(e,"payloadType")&&t.uint32(18).bytes(e.payloadType),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(26).bytes(e.payload),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(42).bytes(e.signature),t},e.decode=function(e,t){e instanceof wq||(e=wq.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new _q.Envelope;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.publicKey=e.bytes();break;case 2:n.payloadType=e.bytes();break;case 3:n.payload=e.bytes();break;case 5:n.signature=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof _q.Envelope)return e;var t=new _q.Envelope;return null!=e.publicKey&&("string"===typeof e.publicKey?xq.base64.decode(e.publicKey,t.publicKey=xq.newBuffer(xq.base64.length(e.publicKey)),0):e.publicKey.length&&(t.publicKey=e.publicKey)),null!=e.payloadType&&("string"===typeof e.payloadType?xq.base64.decode(e.payloadType,t.payloadType=xq.newBuffer(xq.base64.length(e.payloadType)),0):e.payloadType.length&&(t.payloadType=e.payloadType)),null!=e.payload&&("string"===typeof e.payload?xq.base64.decode(e.payload,t.payload=xq.newBuffer(xq.base64.length(e.payload)),0):e.payload.length&&(t.payload=e.payload)),null!=e.signature&&("string"===typeof e.signature?xq.base64.decode(e.signature,t.signature=xq.newBuffer(xq.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.publicKey="":(r.publicKey=[],t.bytes!==Array&&(r.publicKey=xq.newBuffer(r.publicKey))),t.bytes===String?r.payloadType="":(r.payloadType=[],t.bytes!==Array&&(r.payloadType=xq.newBuffer(r.payloadType))),t.bytes===String?r.payload="":(r.payload=[],t.bytes!==Array&&(r.payload=xq.newBuffer(r.payload))),t.bytes===String?r.signature="":(r.signature=[],t.bytes!==Array&&(r.signature=xq.newBuffer(r.signature)))),null!=e.publicKey&&e.hasOwnProperty("publicKey")&&(r.publicKey=t.bytes===String?xq.base64.encode(e.publicKey,0,e.publicKey.length):t.bytes===Array?Array.prototype.slice.call(e.publicKey):e.publicKey),null!=e.payloadType&&e.hasOwnProperty("payloadType")&&(r.payloadType=t.bytes===String?xq.base64.encode(e.payloadType,0,e.payloadType.length):t.bytes===Array?Array.prototype.slice.call(e.payloadType):e.payloadType),null!=e.payload&&e.hasOwnProperty("payload")&&(r.payload=t.bytes===String?xq.base64.encode(e.payload,0,e.payload.length):t.bytes===Array?Array.prototype.slice.call(e.payload):e.payload),null!=e.signature&&e.hasOwnProperty("signature")&&(r.signature=t.bytes===String?xq.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e}(),Sq=la.Reader,Aq=la.Writer,Cq=la.util,Iq=la.roots.default||(la.roots.default={}),Tq=Iq.PeerRecord=function(){function e(e){if(this.addresses=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.peerId=Cq.newBuffer([]),e.prototype.seq=Cq.Long?Cq.Long.fromBits(0,0,!0):0,e.prototype.addresses=Cq.emptyArray,e.encode=function(e,t){if(t||(t=Aq.create()),null!=e.peerId&&Object.hasOwnProperty.call(e,"peerId")&&t.uint32(10).bytes(e.peerId),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.addresses&&e.addresses.length)for(var r=0;r<e.addresses.length;++r)Iq.PeerRecord.AddressInfo.encode(e.addresses[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Sq||(e=Sq.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Iq.PeerRecord;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.peerId=e.bytes();break;case 2:n.seq=e.uint64();break;case 3:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(Iq.PeerRecord.AddressInfo.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Iq.PeerRecord)return e;var t=new Iq.PeerRecord;if(null!=e.peerId&&("string"===typeof e.peerId?Cq.base64.decode(e.peerId,t.peerId=Cq.newBuffer(Cq.base64.length(e.peerId)),0):e.peerId.length&&(t.peerId=e.peerId)),null!=e.seq&&(Cq.Long?(t.seq=Cq.Long.fromValue(e.seq)).unsigned=!0:"string"===typeof e.seq?t.seq=parseInt(e.seq,10):"number"===typeof e.seq?t.seq=e.seq:"object"===typeof e.seq&&(t.seq=new Cq.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".PeerRecord.addresses: array expected");t.addresses=[];for(var r=0;r<e.addresses.length;++r){if("object"!==typeof e.addresses[r])throw TypeError(".PeerRecord.addresses: object expected");t.addresses[r]=Iq.PeerRecord.AddressInfo.fromObject(e.addresses[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addresses=[]),t.defaults)if(t.bytes===String?r.peerId="":(r.peerId=[],t.bytes!==Array&&(r.peerId=Cq.newBuffer(r.peerId))),Cq.Long){var n=new Cq.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;if(null!=e.peerId&&e.hasOwnProperty("peerId")&&(r.peerId=t.bytes===String?Cq.base64.encode(e.peerId,0,e.peerId.length):t.bytes===Array?Array.prototype.slice.call(e.peerId):e.peerId),null!=e.seq&&e.hasOwnProperty("seq")&&("number"===typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?Cq.Long.prototype.toString.call(e.seq):t.longs===Number?new Cq.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),e.addresses&&e.addresses.length){r.addresses=[];for(var a=0;a<e.addresses.length;++a)r.addresses[a]=Iq.PeerRecord.AddressInfo.toObject(e.addresses[a],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e.AddressInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.multiaddr=Cq.newBuffer([]),e.encode=function(e,t){return t||(t=Aq.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),t},e.decode=function(e,t){e instanceof Sq||(e=Sq.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Iq.PeerRecord.AddressInfo;e.pos<r;){var a=e.uint32();if(a>>>3===1)n.multiaddr=e.bytes();else e.skipType(7&a)}return n},e.fromObject=function(e){if(e instanceof Iq.PeerRecord.AddressInfo)return e;var t=new Iq.PeerRecord.AddressInfo;return null!=e.multiaddr&&("string"===typeof e.multiaddr?Cq.base64.decode(e.multiaddr,t.multiaddr=Cq.newBuffer(Cq.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=Cq.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?Cq.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e}(),e}();function Dq(){return Dq=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S,A,C,I,T,D=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=D.length>1&&void 0!==D[1]?D[1]:function(){})(0,"Storing each peerstore key under a single datastore key"),e.next=4,t.datastore.open();case 4:n={},a=[],i=!1,o=!1,e.prev=8,u=zn(t.datastore.query({prefix:"/peers"}));case 10:return e.next=12,u.next();case 12:if(!(i=!(c=e.sent).done)){e.next=28;break}if(l=c.value,f=l.key,h=l.value,a.push(f),p=f.toString(),d=p.split("/"),v=Ia(d,5),y=v[1],b=v[2],g=v[3],m=v[4],"peers"===y){e.next=19;break}return e.abrupt("continue",25);case 19:if(["protos","addrs","metadata","keys"].includes(b)){e.next=21;break}return e.abrupt("continue",25);case 21:if(g){e.next=23;break}return e.abrupt("continue",25);case 23:n[g]=n[g]||{addresses:[],protocols:[],metadata:[]},"protos"===b?(w=cq.decode(h),n[g].protocols=w.protocols.sort()):"addrs"===b?(k=dq.decode(h),n[g].addresses=k.addrs.sort((function(e,t){return Gd(e.multiaddr).toString().localeCompare(Gd(t.multiaddr).toString())})),k.certifiedRecord&&k.certifiedRecord.raw&&(n[g].peerRecordEnvelope=k.certifiedRecord.raw)):"metadata"===b?n[g].metadata.push({key:m,value:h}):"keys"===b&&(n[g].pubKey=h);case 25:i=!1,e.next=10;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(8),o=!0,s=e.t0;case 34:if(e.prev=34,e.prev=35,!i||null==u.return){e.next=39;break}return e.next=39,u.return();case 39:if(e.prev=39,!o){e.next=42;break}throw s;case 42:return e.finish(39);case 43:return e.finish(34);case 44:r(33,"Read peer data from store"),x=0,_=a;case 46:if(!(x<_.length)){e.next=53;break}return E=_[x],e.next=50,t.datastore.delete(E);case 50:x++,e.next=46;break;case 53:r(66,"Removed existing peer data from store"),S=0,A=Object.keys(n);case 55:if(!(S<A.length)){e.next=65;break}return C=A[S],(I=n[C]).metadata=I.metadata.sort((function(e,t){return e.key.localeCompare(t.key)})),T=mq.encode(I).finish(),e.next=62,t.datastore.put(new Hv("/peers/".concat(C)),T);case 62:S++,e.next=55;break;case 65:return e.next=67,t.datastore.close();case 67:r(100,"Stored each peerstore key under a single datastore key");case 68:case"end":return e.stop()}}),e,null,[[8,30,34,44],[35,,39,43]])}))),Dq.apply(this,arguments)}function Rq(){return Rq=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S,A,C,I,T,D,R,P,N,L=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=L.length>1&&void 0!==L[1]?L[1]:function(){})(0,"Storing each peerstore key under a multiple datastore keys"),e.next=4,t.datastore.open();case 4:n={},a=[],i=!1,o=!1,e.prev=8,u=zn(t.datastore.query({prefix:"/peers"}));case 10:return e.next=12,u.next();case 12:if(!(i=!(c=e.sent).done)){e.next=21;break}l=c.value,f=l.key,h=l.value,a.push(f),p=f.toString(),d=p.split("/"),v=Ia(d,3),y=v[2],n[y]=mq.decode(h);case 18:i=!1,e.next=10;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(8),o=!0,s=e.t0;case 27:if(e.prev=27,e.prev=28,!i||null==u.return){e.next=32;break}return e.next=32,u.return();case 32:if(e.prev=32,!o){e.next=35;break}throw s;case 35:return e.finish(32);case 36:return e.finish(27);case 37:r(33,"Read peer data from store"),b=0,g=a;case 39:if(!(b<g.length)){e.next=46;break}return m=g[b],e.next=43,t.datastore.delete(m);case 43:b++,e.next=39;break;case 46:r(66,"Removed existing peer data from store"),w=0,k=Object.entries(n);case 48:if(!(w<k.length)){e.next=83;break}if(x=Ia(k[w],2),_=x[0],!((E=x[1]).protocols&&E.protocols.length>0)){e.next=53;break}return e.next=53,t.datastore.put(new Hv("/peers/protos/".concat(_)),cq.encode({protocols:E.protocols}).finish());case 53:if(!(E.addresses&&E.addresses.length>0)){e.next=59;break}return S=E.peerRecordEnvelope,A=void 0,S&&(C=Eq.decode(S),I=Tq.decode(C.payload),A={raw:S,seq:I.seq}),e.next=59,t.datastore.put(new Hv("/peers/addrs/".concat(_)),dq.encode({addrs:E.addresses,certifiedRecord:A}).finish());case 59:if(!(E.metadata&&E.metadata.length>0)){e.next=77;break}T=Ni(E.metadata),e.prev=61,T.s();case 63:if((D=T.n()).done){e.next=69;break}return R=D.value,P=R.key,N=R.value,e.next=67,t.datastore.put(new Hv("/peers/metadata/".concat(_,"/").concat(P)),N);case 67:e.next=63;break;case 69:e.next=74;break;case 71:e.prev=71,e.t1=e.catch(61),T.e(e.t1);case 74:return e.prev=74,T.f(),e.finish(74);case 77:if(!E.pubKey){e.next=80;break}return e.next=80,t.datastore.put(new Hv("/peers/keys/".concat(_)),E.pubKey);case 80:w++,e.next=48;break;case 83:return e.next=85,t.datastore.close();case 85:r(100,"Stored each peerstore key under multiple datastore keys");case 86:case"end":return e.stop()}}),e,null,[[8,23,27,37],[28,,32,36],[61,71,74,77]])}))),Rq.apply(this,arguments)}la.util.Long=void 0,la.configure();var Pq={version:12,description:"Store each peerstore peer under a single datastore key",migrate:function(e){return Dq.apply(this,arguments)},revert:function(e){return Rq.apply(this,arguments)}},Nq={description:"Empty migration.",migrate:function(){},revert:function(){},empty:!0},Lq=[Object.assign({version:1},Nq),Object.assign({version:2},Nq),Object.assign({version:3},Nq),Object.assign({version:4},Nq),Object.assign({version:5},Nq),Object.assign({version:6},Nq),Object.assign({version:7},Nq),UV,Mj,$j,aq,Pq],Oq=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).name="NonReversibleMigrationError",n.code=r.code,n.message=e,n}return Dn(r)}(nu(Error));Oq.code="ERR_NON_REVERSIBLE_MIGRATION";var Bq=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).name="NotInitializedRepoError",n.code=r.code,n.message=e,n}return Dn(r)}(nu(Error));Bq.code="ERR_NOT_INITIALIZED_REPO";var Uq=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).name="RequiredParameterError",n.code=r.code,n.message=e,n}return Dn(r)}(nu(Error));Uq.code="ERR_REQUIRED_PARAMETER";var Mq=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).name="InvalidValueError",n.code=r.code,n.message=e,n}return Dn(r)}(nu(Error));Mq.code="ERR_INVALID_VALUE";var zq=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).name="MissingRepoOptionsError",n.code=r.code,n.message=e,n}return Dn(r)}(nu(Error));zq.code="ERR_MISSING_REPO_OPTIONS";var Fq=Yn("ipfs:repo:migrator:repo:init");function Vq(e){return jq.apply(this,arguments)}function jq(){return jq=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new zq("Please pass repo options when trying to open a repo");case 2:return r=t.root,e.prev=3,e.next=6,r.open();case 6:return e.next=8,r.has(Fj);case 8:return n=e.sent,e.next=11,r.has(zj);case 11:if(a=e.sent,n&&a){e.next=16;break}return Fq("Version entry present: ".concat(n)),Fq("Config entry present: ".concat(a)),e.abrupt("return",!1);case 16:return e.abrupt("return",!0);case 19:return e.prev=19,e.t0=e.catch(3),Fq("While checking if repo is initialized error was thrown: "+e.t0.message),e.abrupt("return",!1);case 23:if(e.prev=23,void 0===r){e.next=32;break}return e.prev=25,e.next=28,r.close();case 28:e.next=32;break;case 30:e.prev=30,e.t1=e.catch(25);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[3,19,23,33],[25,30]])}))),jq.apply(this,arguments)}function qq(e){return Kq.apply(this,arguments)}function Kq(){return(Kq=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vq(t);case 2:if(e.sent){e.next=4;break}throw new Bq("Repo is not initialized!");case 4:return r=t.root,e.next=7,r.open();case 7:return e.prev=7,e.t0=parseInt,e.t1=kh,e.next=12,r.get(Fj);case 12:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 15:return e.prev=15,e.next=18,r.close();case 18:return e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[7,,15,19]])})))).apply(this,arguments)}function Hq(e,t){return Gq.apply(this,arguments)}function Gq(){return Gq=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw new zq("Please pass repo options when trying to open a repo");case 2:return n=r.root,e.next=5,n.open();case 5:return e.next=7,n.put(Fj,Bf(String(t)));case 7:return e.next=9,n.close();case 9:case"end":return e.stop()}}),e)}))),Gq.apply(this,arguments)}var Wq=Yn("ipfs:repo:migrator");function Yq(e){return e=e||Lq,Array.isArray(e)&&0!==e.length?e[e.length-1].version:0}function Qq(e,t,r,n){return Jq.apply(this,arguments)}function Jq(){return Jq=An(En().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,h,p,d,v,y,b,g,m=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=m.length>4&&void 0!==m[4]?m[4]:{},c=null!==(i=u.ignoreLock)&&void 0!==i&&i,l=u.onProgress,f=null!==(o=u.isDryRun)&&void 0!==o&&o,h=null!==(s=u.migrations)&&void 0!==s?s:Lq,t){e.next=7;break}throw new eK.RequiredParameterError("Path argument is required!");case 7:if(n){e.next=9;break}throw new eK.RequiredParameterError("repoOptions argument is required!");case 9:if(a){e.next=11;break}throw new eK.RequiredParameterError("toVersion argument is required!");case 11:if(Number.isInteger(a)&&!(a<=0)){e.next=13;break}throw new eK.InvalidValueError("Version has to be positive integer!");case 13:return r=Hj(r),e.next=16,qq(r);case 16:if((p=e.sent)!==a){e.next=20;break}return Wq("Nothing to migrate."),e.abrupt("return");case 20:if(!(p>a)){e.next=22;break}throw new eK.InvalidValueError("Current repo's version (".concat(p,") is higher then toVersion (").concat(a,"), you probably wanted to revert it?"));case 22:if($q(h,p,a),f||c){e.next=27;break}return e.next=26,n.repoLock.lock(t);case 26:d=e.sent;case 27:e.prev=27,v=Ni(h),e.prev=29,b=En().mark((function e(){var t,n,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.value,!(void 0!==a&&t.version>a)){e.next=3;break}return e.abrupt("return","break");case 3:if(!(t.version<=p)){e.next=5;break}return e.abrupt("return","continue");case 5:if(Wq("Migrating version ".concat(t.version)),e.prev=6,f){e.next=12;break}return n=function(){},l&&(n=function(e,r){return l(t.version,e.toFixed(2),r)}),e.next=12,t.migrate(r,n);case 12:e.next=21;break;case 14:return e.prev=14,e.t0=e.catch(6),i=t.version-1,Wq("An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ".concat(i)),e.next=20,Hq(i,r);case 20:throw new Error("During migration to version ".concat(t.version," exception was raised: ").concat(e.t0.stack||e.t0.message||e.t0));case 21:Wq("Migrating to version ".concat(t.version," finished"));case 22:case"end":return e.stop()}}),e,null,[[6,14]])})),v.s();case 32:if((y=v.n()).done){e.next=41;break}return e.delegateYield(b(),"t0",34);case 34:if("break"!==(g=e.t0)){e.next=37;break}return e.abrupt("break",41);case 37:if("continue"!==g){e.next=39;break}return e.abrupt("continue",39);case 39:e.next=32;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(29),v.e(e.t1);case 46:return e.prev=46,v.f(),e.finish(46);case 49:if(f){e.next=52;break}return e.next=52,Hq(a||Yq(h),r);case 52:Wq("Repo successfully migrated",void 0!==a?"to version ".concat(a,"!"):"to latest version!");case 53:if(e.prev=53,f||c||!d){e.next=57;break}return e.next=57,d.close();case 57:return e.finish(53);case 58:case"end":return e.stop()}}),e,null,[[27,,53,58],[29,43,46,49]])}))),Jq.apply(this,arguments)}function Zq(e,t,r,n){return Xq.apply(this,arguments)}function Xq(){return Xq=An(En().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=w.length>4&&void 0!==w[4]?w[4]:{},c=null!==(i=u.ignoreLock)&&void 0!==i&&i,l=u.onProgress,f=null!==(o=u.isDryRun)&&void 0!==o&&o,h=null!==(s=u.migrations)&&void 0!==s?s:Lq,t){e.next=7;break}throw new eK.RequiredParameterError("Path argument is required!");case 7:if(n){e.next=9;break}throw new eK.RequiredParameterError("repoOptions argument is required!");case 9:if(a){e.next=11;break}throw new eK.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");case 11:if(Number.isInteger(a)&&!(a<=0)){e.next=13;break}throw new eK.InvalidValueError("Version has to be positive integer!");case 13:return r=Hj(r),e.next=16,qq(r);case 16:if((p=e.sent)!==a){e.next=20;break}return Wq("Nothing to revert."),e.abrupt("return");case 20:if(!(p<a)){e.next=22;break}throw new eK.InvalidValueError("Current repo's version (".concat(p,") is lower then toVersion (").concat(a,"), you probably wanted to migrate it?"));case 22:if($q(h,a,p,!0),f||c){e.next=27;break}return e.next=26,n.repoLock.lock(t);case 26:d=e.sent;case 27:Wq("Reverting from version ".concat(p," to ").concat(a)),e.prev=28,v=h.slice().reverse(),y=Ni(v),e.prev=31,g=En().mark((function e(){var t,n,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=b.value).version<=a)){e.next=3;break}return e.abrupt("return","break");case 3:if(!(t.version>p)){e.next=5;break}return e.abrupt("return","continue");case 5:if(Wq("Reverting migration version ".concat(t.version)),e.prev=6,f){e.next=12;break}return n=function(){},l&&(n=function(e,r){return l(t.version,e.toFixed(2),r)}),e.next=12,t.revert(r,n);case 12:e.next=22;break;case 14:return e.prev=14,e.t0=e.catch(6),i=t.version,Wq("An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ".concat(i)),e.next=20,Hq(i,r);case 20:throw e.t0.message="During reversion to version ".concat(t.version," exception was raised: ").concat(e.t0.message),e.t0;case 22:Wq("Reverting to version ".concat(t.version," finished"));case 23:case"end":return e.stop()}}),e,null,[[6,14]])})),y.s();case 34:if((b=y.n()).done){e.next=43;break}return e.delegateYield(g(),"t0",36);case 36:if("break"!==(m=e.t0)){e.next=39;break}return e.abrupt("break",43);case 39:if("continue"!==m){e.next=41;break}return e.abrupt("continue",41);case 41:e.next=34;break;case 43:e.next=48;break;case 45:e.prev=45,e.t1=e.catch(31),y.e(e.t1);case 48:return e.prev=48,y.f(),e.finish(48);case 51:if(f){e.next=54;break}return e.next=54,Hq(a,r);case 54:Wq("All migrations successfully reverted to version ".concat(a,"!"));case 55:if(e.prev=55,f||c||!d){e.next=59;break}return e.next=59,d.close();case 59:return e.finish(55);case 60:case"end":return e.stop()}}),e,null,[[28,,55,60],[31,45,48,51]])}))),Xq.apply(this,arguments)}function $q(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0,o=Ni(e);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(s.version>r)break;if(s.version>t){if(a&&!s.revert)throw new eK.NonReversibleMigrationError("It is not possible to revert to version ".concat(t," because migration version ").concat(s.version," is not reversible. Cancelling reversion."));i++}}}catch(eL){o.e(eL)}finally{o.f()}if(i!==r-t)throw new eK.InvalidValueError("The ipfs-repo-migrations package does not have all migration to migrate from version ".concat(t," to ").concat(r))}var eK=fe,tK=__webpack_require__(5344),rK=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).name="LockExistsError",n.code=r.code,n}return Dn(r)}(nu(Error));rK.code="ERR_LOCK_EXISTS";var nK=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).name="NotFoundError",n.code=r.code,n}return Dn(r)}(nu(Error));nK.code="ERR_NOT_FOUND";var aK=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).name="InvalidRepoVersionError",n.code=r.code,n}return Dn(r)}(nu(Error));aK.code="ERR_INVALID_REPO_VERSION";var iK="ERR_REPO_NOT_INITIALIZED";function oK(e,t,r){return sK.apply(this,arguments)}function sK(){return sK=An(En().mark((function e(t,r,n){var a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",a);case 5:if(i=lK(n)){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",new Promise((function(e,r){var n=i.store("readonly").get(t.toString());n.transaction.onabort=function(){r(n.transaction.error)},n.transaction.oncomplete=function(){e(Boolean(n.result))}})));case 9:case"end":return e.stop()}}),e)}))),sK.apply(this,arguments)}function uK(e,t,r,n){return cK.apply(this,arguments)}function cK(){return cK=An(En().mark((function e(t,r,n,a){var i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",r(t));case 4:if(i=lK(a)){e.next=7;break}throw new nK;case 7:return e.abrupt("return",new Promise((function(e,r){var n=i.store("readonly").get(t.toString());n.transaction.onabort=function(){r(n.transaction.error)},n.transaction.oncomplete=function(){if(n.result)return e(n.result);r(new nK)}})));case 8:case"end":return e.stop()}}),e)}))),cK.apply(this,arguments)}function lK(e){for(var t=e;t.db||t.child;)if("level-js"===(t=t.db||t.child).type||"Level"===t.constructor.name)return t}var fK=Yn("ipfs:repo:version"),hK=new Hv("version");var pK=$y.default?$y.default:$y,dK=new Hv("config");function vK(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function yK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!vK(e)&&!Array.isArray(e))throw new TypeError("Expected a plain object or array");var r=t.deep,n=t.compare,a=[],i=[],o=function e(t){var r=a.indexOf(t);if(-1!==r)return i[r];var n=[];return a.push(t),i.push(n),n.push.apply(n,su(t.map((function(t){return Array.isArray(t)?e(t):vK(t)?s(t):t})))),n},s=function e(t){var s=a.indexOf(t);if(-1!==s)return i[s];var u={},c=Object.keys(t).sort(n);a.push(t),i.push(u);var l,f=Ni(c);try{for(f.s();!(l=f.n()).done;){var h=l.value,p=t[h],d=void 0;d=r&&Array.isArray(p)?o(p):r&&vK(p)?e(p):p,Object.defineProperty(u,h,jn(jn({},Object.getOwnPropertyDescriptor(t,h)),{},{value:d}))}}catch(eL){f.e(eL)}finally{f.f()}return u};return Array.isArray(e)?r?o(e):e.slice():s(e)}var bK=new Hv("datastore_spec");var gK=new Hv("api");var mK=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=wK;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},wK=Math.pow(2,31);var kK=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var xK=Math.pow(2,7),_K=Math.pow(2,14),EK=Math.pow(2,21),SK=Math.pow(2,28),AK=Math.pow(2,35),CK=Math.pow(2,42),IK=Math.pow(2,49),TK=Math.pow(2,56),DK=Math.pow(2,63),RK={encode:mK,decode:kK,encodingLength:function(e){return e<xK?1:e<_K?2:e<EK?3:e<SK?4:e<AK?5:e<CK?6:e<IK?7:e<TK?8:e<DK?9:10}},PK=RK,NK=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=PK.decode(e,t);return[r,PK.decode.bytes]},LK=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return PK.encode(e,t,r),t},OK=function(e){return PK.encodingLength(e)},BK=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),UK=function(e,t){var r=t.byteLength,n=OK(e),a=n+OK(r),i=new Uint8Array(a+r);return LK(e,i,0),LK(r,i,n),i.set(t,a),new zK(e,r,t,i)},MK=function(e){var t=BK(e),r=Ia(NK(t),2),n=r[0],a=r[1],i=Ia(NK(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new zK(n,o,u,t)},zK=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var FK=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},VK=FK,jK=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),qK=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return HK(this,e)}}]),e}(),KK=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return HK(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),HK=function(e,t){return new KK(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},GK=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new jK(t,r,n),this.decoder=new qK(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),WK=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new GK(t,r,n,a)},YK=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=VK(n,r),i=a.encode,o=a.decode;return WK({prefix:t,name:r,encode:i,decode:function(e){return BK(o(e))}})},QK=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return WK({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},JK=YK({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ZK=(YK({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),QK({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),XK=(QK({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),QK({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),QK({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),QK({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),QK({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),QK({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),QK({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),QK({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),function(e,t){var r=e.bytes;return 0===e.version?nH(r,eH(e),t||JK.encoder):aH(r,eH(e),t||ZK.encoder)}),$K=new WeakMap,eH=function(e){var t=$K.get(e);if(null==t){var r=new Map;return $K.set(e,r),r}return t},tH=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==iH)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==oH)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=UK(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return XK(this,e)}},{key:"toJSON",value:function(){return{"/":XK(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||sH(n,a,i.bytes))}if(!0===t[uH]){var o=t.version,s=t.multihash,u=t.code,c=MK(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==iH)throw new Error("Version 0 CID must use dag-pb (code: ".concat(iH,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,sH(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,iH,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=BK(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new zK(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(NK(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=iH;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(rH(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return eH(o).set(a,e),o}}]),r}(),rH=function(e,t){switch(e[0]){case"Q":var r=t||JK;return[JK.prefix,r.decode("".concat(JK.prefix).concat(e))];case JK.prefix:var n=t||JK;return[JK.prefix,n.decode(e)];case ZK.prefix:var a=t||ZK;return[ZK.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},nH=function(e,t,r){var n=r.prefix;if(n!==JK.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},aH=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},iH=112,oH=18,sH=function(e,t,r){var n=OK(e),a=n+OK(t),i=new Uint8Array(a+r.byteLength);return LK(e,i,0),LK(t,i,n),i.set(r,a),i},uH=Symbol.for("@ipld/js-cid/CID"),cH=0;function lH(e){var t=tH.asCID(e);if(null==t)throw ca(new Error("Not a valid cid"),"ERR_INVALID_CID");return t.multihash.code!==cH?{isIdentity:!1}:{isIdentity:!0,digest:t.multihash.digest}}var fH=Yn("ipfs:repo:lock:memory"),hH="repo.lock",pH={};function dH(){return dH=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fH("locking %s",r=t+"/"+hH),!0!==pH[r]){e.next=4;break}throw new rK("Lock already being held for file: ".concat(r));case 4:return pH[r]=!0,n={close:function(){return An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pH[r]&&delete pH[r];case 1:case"end":return e.stop()}}),e)})))()}},e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),dH.apply(this,arguments)}function vH(){return vH=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fH("checking lock: ".concat(r=t+"/"+hH)),e.abrupt("return",Boolean(pH[r]));case 3:case"end":return e.stop()}}),e)}))),vH.apply(this,arguments)}var yH={lock:function(e){return dH.apply(this,arguments)},locked:function(e){return vH.apply(this,arguments)}},bH={autoMigrate:!0,onMigrationProgress:function(){},repoOwner:!0,repoLock:yH},gH={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}},mH=En().mark(EH),wH=En().mark(SH),kH=En().mark(AH),xH=En().mark(CH);function _H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enumerable,r=void 0===t||t,n=e.configurable,a=void 0!==n&&n;return{enumerable:r,configurable:a,writable:!1}}function EH(e,t){var r,n,a,i,o,s,u,c;return En().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(null==t||"object"!==typeof t){l.next=35;break}if(!Array.isArray(t)){l.next=28;break}r=Ni(t.entries()),l.prev=3,r.s();case 5:if((n=r.n()).done){l.next=18;break}if(a=Ia(n.value,2),i=a[0],o=a[1],s=[].concat(su(e),[i]),!(u=tH.asCID(o))){l.next=14;break}return l.next=12,[s.join("/"),u];case 12:l.next=16;break;case 14:if("object"!==typeof o){l.next=16;break}return l.delegateYield(SH(o,s),"t0",16);case 16:l.next=5;break;case 18:l.next=23;break;case 20:l.prev=20,l.t1=l.catch(3),r.e(l.t1);case 23:return l.prev=23,r.f(),l.finish(23);case 26:l.next=35;break;case 28:if(!(c=tH.asCID(t))){l.next=34;break}return l.next=32,[e.join("/"),c];case 32:l.next=35;break;case 34:return l.delegateYield(SH(t,e),"t2",35);case 35:case"end":return l.stop()}}),mH,null,[[3,20,23,26]])}function SH(e,t){var r,n,a,i,o,s,u;return En().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!(null==e||e instanceof Uint8Array)){c.next=2;break}return c.abrupt("return");case 2:if(!(r=tH.asCID(e))){c.next=6;break}return c.next=6,[t.join("/"),r];case 6:n=0,a=Object.entries(e);case 7:if(!(n<a.length)){c.next=14;break}return i=Ia(a[n],2),o=i[0],s=i[1],u=[].concat(su(t),[o]),c.delegateYield(EH(u,s),"t0",11);case 11:n++,c.next=7;break;case 14:case"end":return c.stop()}}),wH)}function AH(e,t){var r,n,a,i,o,s;return En().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(!Array.isArray(t)){u.next=23;break}r=Ni(t.entries()),u.prev=2,r.s();case 4:if((n=r.n()).done){u.next=13;break}return a=Ia(n.value,2),i=a[0],o=a[1],s=[].concat(su(e),[i]),u.next=9,s.join("/");case 9:if("object"!==typeof o||tH.asCID(o)){u.next=11;break}return u.delegateYield(CH(o,s),"t0",11);case 11:u.next=4;break;case 13:u.next=18;break;case 15:u.prev=15,u.t1=u.catch(2),r.e(u.t1);case 18:return u.prev=18,r.f(),u.finish(18);case 21:u.next=24;break;case 23:return u.delegateYield(CH(t,e),"t2",24);case 24:case"end":return u.stop()}}),kH,null,[[2,15,18,21]])}function CH(e,t){var r,n,a,i,o,s;return En().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(null!=e&&"object"===typeof e){u.next=2;break}return u.abrupt("return");case 2:r=0,n=Object.entries(e);case 3:if(!(r<n.length)){u.next=13;break}return a=Ia(n[r],2),i=a[0],o=a[1],s=[].concat(su(t),[i]),u.next=8,s.join("/");case 8:if(null==o||o instanceof Uint8Array||"object"!==typeof o||tH.asCID(o)){u.next=10;break}return u.delegateYield(AH(s,o),"t0",10);case 10:r++,u.next=3;break;case 13:case"end":return u.stop()}}),xH)}function IH(e,t){var r,n=e,a=Ni(t.entries());try{for(a.s();!(r=a.n()).done;){var i=Ia(r.value,2),o=i[0];if(null==(n=n[i[1]]))throw new Error("Object has no property at ".concat(t.slice(0,o+1).map((function(e){return"[".concat(JSON.stringify(e),"]")})).join("")));var s=tH.asCID(n);if(s)return{value:s,remaining:t.slice(o+1).join("/")}}}catch(eL){a.e(eL)}finally{a.f()}return{value:n}}var TH=function(){function e(t){var r=t.cid,n=t.bytes,a=t.value;if(Cn(this,e),!r||!n||"undefined"===typeof a)throw new Error("Missing required argument");this.cid=r,this.bytes=n,this.value=a,this.asBlock=this,Object.defineProperties(this,{cid:_H(),bytes:_H(),value:_H(),asBlock:_H()})}return Dn(e,[{key:"links",value:function(){return SH(this.value,[])}},{key:"tree",value:function(){return CH(this.value,[])}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return IH(this.value,e.split("/").filter(Boolean))}}]),e}();function DH(e){var t=e.bytes,r=e.cid,n=e.value,a=e.codec,i=void 0!==n?n:a&&a.decode(t);if(void 0===i)throw new Error('Missing required argument, must either provide "value" or "codec"');return new TH({cid:r,bytes:t,value:i})}new TextDecoder;new TextEncoder,Math.pow(2,32),Math.pow(2,31);new TextEncoder;var RH=112;function PH(e){var t=tH.asCID(e);if(null==t)throw ca(new Error("Not a valid cid"),"ERR_INVALID_CID");var r=ZK.encode(t.multihash.bytes);return new Hv("/"+r.slice(1).toUpperCase(),!1)}function NH(e){return MK(ZK.decode("b".concat(e.toString().toLowerCase().substring(1))))}var LH=Yn("ipfs:repo:utils:walk-dag");function OH(e,t,r,n){return BH.apply(this,arguments)}function BH(){return BH=Hn(En().mark((function e(t,r,n,a){var i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mf(r.get(t,a));case 3:return i=e.sent,e.next=6,Mf(n(t.code));case 6:o=e.sent,s=DH({bytes:i,cid:t,codec:o}),u=Ni(s.links()),e.prev=9,u.s();case 11:if((c=u.n()).done){e.next=18;break}return l=Ia(c.value,2),f=l[1],e.next=15,f;case 15:return e.delegateYield(Cb(zn(OH(f,r,n,a))),"t0",16);case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(9),u.e(e.t1);case 23:return e.prev=23,u.f(),e.finish(23);case 26:e.next=32;break;case 28:throw e.prev=28,e.t2=e.catch(0),LH("Could not walk DAG for CID",t.toString(),e.t2),e.t2;case 32:case"end":return e.stop()}}),e,null,[[0,28],[9,20,23,26]])}))),BH.apply(this,arguments)}var UH=function(e,t,r){Pn(a,e);var n=Un(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Cn(this,a),e=n.call(this),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"===typeof t.maxAge&&0===t.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");return e.maxSize=t.maxSize,e.maxAge=t.maxAge||Number.POSITIVE_INFINITY,e.onEviction=t.onEviction,e.cache=new Map,e.oldCache=new Map,e._size=0,e}return Dn(a,[{key:"_emitEvictions",value:function(e){if("function"===typeof this.onEviction){var t,r=Ni(e);try{for(r.s();!(t=r.n()).done;){var n=Ia(t.value,2),a=n[0],i=n[1];this.onEviction(a,i.value)}}catch(eL){r.e(eL)}finally{r.f()}}}},{key:"_deleteIfExpired",value:function(e,t){return"number"===typeof t.expiry&&t.expiry<=Date.now()&&("function"===typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}},{key:"_getOrDeleteIfExpired",value:function(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}},{key:"_getItemValue",value:function(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}},{key:"_peek",value:function(e,t){var r=t.get(e);return this._getItemValue(e,r)}},{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}},{key:"_moveToRecent",value:function(e,t){this.oldCache.delete(e),this._set(e,t)}},{key:"_entriesAscending",value:En().mark((function e(){var t,r,n,a,i,o,s,u,c,l,f,h;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ni(this.oldCache),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=13;break}if(n=r.value,a=Ia(n,2),i=a[0],o=a[1],this.cache.has(i)){e.next=11;break}if(!1!==this._deleteIfExpired(i,o)){e.next=11;break}return e.next=11,n;case 11:e.next=3;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),t.e(e.t0);case 18:return e.prev=18,t.f(),e.finish(18);case 21:s=Ni(this.cache),e.prev=22,s.s();case 24:if((u=s.n()).done){e.next=33;break}if(c=u.value,l=Ia(c,2),f=l[0],h=l[1],!1!==this._deleteIfExpired(f,h)){e.next=31;break}return e.next=31,c;case 31:e.next=24;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(22),s.e(e.t1);case 38:return e.prev=38,s.f(),e.finish(38);case 41:case"end":return e.stop()}}),e,this,[[1,15,18,21],[22,35,38,41]])}))},{key:"get",value:function(e){if(this.cache.has(e)){var t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){var r=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,r))return this._moveToRecent(e,r),r.value}}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.maxAge,a=void 0===n?this.maxAge:n,i="number"===typeof a&&a!==Number.POSITIVE_INFINITY?Date.now()+a:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i})}},{key:"has",value:function(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}},{key:"peek",value:function(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"resize",value:function(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");var t=su(this._entriesAscending()),r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(r>0&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}},{key:"keys",value:En().mark((function e(){var t,r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ni(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=Ia(r.value,1),a=n[0],e.next=7,a;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:En().mark((function e(){var t,r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ni(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=Ia(r.value,2),a=n[1],e.next=7,a;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:t,value:En().mark((function(){var e,t,r,n,a,i,o,s,u,c,l,f;return En().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:e=Ni(this.cache),h.prev=1,e.s();case 3:if((t=e.n()).done){h.next=12;break}if(r=t.value,n=Ia(r,2),a=n[0],i=n[1],!1!==this._deleteIfExpired(a,i)){h.next=10;break}return h.next=10,[a,i.value];case 10:h.next=3;break;case 12:h.next=17;break;case 14:h.prev=14,h.t0=h.catch(1),e.e(h.t0);case 17:return h.prev=17,e.f(),h.finish(17);case 20:o=Ni(this.oldCache),h.prev=21,o.s();case 23:if((s=o.n()).done){h.next=33;break}if(u=s.value,c=Ia(u,2),l=c[0],f=c[1],this.cache.has(l)){h.next=31;break}if(!1!==this._deleteIfExpired(l,f)){h.next=31;break}return h.next=31,[l,f.value];case 31:h.next=23;break;case 33:h.next=38;break;case 35:h.prev=35,h.t1=h.catch(21),o.e(h.t1);case 38:return h.prev=38,o.f(),h.finish(38);case 41:case"end":return h.stop()}}),i,this,[[1,14,17,20],[21,35,38,41]])}))},{key:"entriesDescending",value:En().mark((function e(){var t,r,n,a,i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=su(this.cache),r=t.length-1;case 2:if(!(r>=0)){e.next=12;break}if(n=t[r],a=Ia(n,2),i=a[0],o=a[1],!1!==this._deleteIfExpired(i,o)){e.next=9;break}return e.next=9,[i,o.value];case 9:--r,e.next=2;break;case 12:t=su(this.oldCache),s=t.length-1;case 14:if(!(s>=0)){e.next=25;break}if(u=t[s],c=Ia(u,2),l=c[0],f=c[1],this.cache.has(l)){e.next=22;break}if(!1!==this._deleteIfExpired(l,f)){e.next=22;break}return e.next=22,[l,f.value];case 22:--s,e.next=14;break;case 25:case"end":return e.stop()}}),e,this)}))},{key:"entriesAscending",value:En().mark((function e(){var t,r,n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ni(this._entriesAscending()),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=Ia(r.value,2),a=n[0],i=n[1],e.next=7,[a,i.value];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"size",get:function(){if(!this._size)return this.oldCache.size;var e,t=0,r=Ni(this.oldCache.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.cache.has(n)||t++}}catch(eL){r.e(eL)}finally{r.f()}return Math.min(this._size+t,this.maxSize)}},{key:"entries",value:function(){return this.entriesAscending()}},{key:"forEach",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=Ni(this.entriesAscending());try{for(n.s();!(t=n.n()).done;){var a=Ia(t.value,2),i=a[0],o=a[1];e.call(r,o,i,this)}}catch(eL){n.e(eL)}finally{n.f()}}},{key:r,get:function(){return JSON.stringify(su(this.entriesAscending()))}}]),a}(nu(Map),Symbol.iterator,Symbol.toStringTag);var MH=function(){function e(t){var r=t.pinstore,n=t.blockstore,a=t.loadCodec;Cn(this,e),this.pinstore=r,this.blockstore=n,this.loadCodec=a,this.log=Yn("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}return Dn(e,[{key:"pinDirectly",value:function(){var e=An(En().mark((function e(t){var r,n,a=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.blockstore.get(t,r);case 3:return n={depth:0},0!==t.version&&(n.version=t.version),t.code!==RH&&(n.codec=t.code),r.metadata&&(n.metadata=r.metadata),e.abrupt("return",this.pinstore.put(PH(t),Os(n)));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unpin",value:function(e,t){return this.pinstore.delete(PH(e),t)}},{key:"pinRecursively",value:function(){var e=An(En().mark((function e(t){var r,n,a=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.fetchCompleteDag(t,r);case 3:return n={depth:1/0},0!==t.version&&(n.version=t.version),t.code!==RH&&(n.codec=t.code),r.metadata&&(n.metadata=r.metadata),e.next=9,this.pinstore.put(PH(t),Os(n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"directKeys",value:function(e){var t=this;return Hn(En().mark((function e(){var r,n,a,i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=zn(t.pinstore.query({filters:[function(e){return 0===Vs(e.value).depth}]}));case 4:return e.next=6,Mf(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=17;break}return s=o.value,u=Vs(s.value),c=u.version||0,l=null!=u.codec?u.codec:RH,f=NH(s.key),e.next=14,{cid:tH.create(c,l,f),metadata:u.metadata};case 14:r=!1,e.next=4;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),n=!0,a=e.t0;case 23:if(e.prev=23,e.prev=24,!r||null==i.return){e.next=28;break}return e.next=28,Mf(i.return());case 28:if(e.prev=28,!n){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[2,19,23,33],[24,,28,32]])})))()}},{key:"recursiveKeys",value:function(e){var t=this;return Hn(En().mark((function e(){var r,n,a,i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=zn(t.pinstore.query({filters:[function(e){return Vs(e.value).depth===1/0}]}));case 4:return e.next=6,Mf(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=17;break}return s=o.value,u=Vs(s.value),c=u.version||0,l=null!=u.codec?u.codec:RH,f=NH(s.key),e.next=14,{cid:tH.create(c,l,f),metadata:u.metadata};case 14:r=!1,e.next=4;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),n=!0,a=e.t0;case 23:if(e.prev=23,e.prev=24,!r||null==i.return){e.next=28;break}return e.next=28,Mf(i.return());case 28:if(e.prev=28,!n){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[2,19,23,33],[24,,28,32]])})))()}},{key:"indirectKeys",value:function(e){var t=this;return Hn(En().mark((function r(){var n,a,i,o,s,u,c,l,f,h,p,d,v;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,a=!1,r.prev=2,o=zn(t.recursiveKeys());case 4:return r.next=6,Mf(o.next());case 6:if(!(n=!(s=r.sent).done)){r.next=46;break}u=s.value.cid,c=!1,l=!1,r.prev=10,h=zn(OH(u,t.blockstore,t.loadCodec,e));case 12:return r.next=14,Mf(h.next());case 14:if(!(c=!(p=r.sent).done)){r.next=27;break}return d=p.value,v=[Lb.recursive],r.next=19,Mf(t.isPinnedWithType(d,v));case 19:if(!r.sent.pinned){r.next=22;break}return r.abrupt("continue",24);case 22:return r.next=24,d;case 24:c=!1,r.next=12;break;case 27:r.next=33;break;case 29:r.prev=29,r.t0=r.catch(10),l=!0,f=r.t0;case 33:if(r.prev=33,r.prev=34,!c||null==h.return){r.next=38;break}return r.next=38,Mf(h.return());case 38:if(r.prev=38,!l){r.next=41;break}throw f;case 41:return r.finish(38);case 42:return r.finish(33);case 43:n=!1,r.next=4;break;case 46:r.next=52;break;case 48:r.prev=48,r.t1=r.catch(2),a=!0,i=r.t1;case 52:if(r.prev=52,r.prev=53,!n||null==o.return){r.next=57;break}return r.next=57,Mf(o.return());case 57:if(r.prev=57,!a){r.next=60;break}throw i;case 60:return r.finish(57);case 61:return r.finish(52);case 62:case"end":return r.stop()}}),r,null,[[2,48,52,62],[10,29,33,43],[34,,38,42],[53,,57,61]])})))()}},{key:"isPinnedWithType",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,h,p;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=function(){return h=Hn(En().mark((function e(t,r){var n,a,i,o,s,u,c,f,h,p,d;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=zn(r);case 4:return e.next=6,Mf(o.next());case 6:if(!(n=!(s=e.sent).done)){e.next=42;break}u=s.value.cid,c=!1,f=!1,e.prev=10,p=zn(OH(u,l.blockstore,l.loadCodec));case 12:return e.next=14,Mf(p.next());case 14:if(!(c=!(d=e.sent).done)){e.next=23;break}if(!d.value.equals(t)){e.next=20;break}return e.next=19,u;case 19:return e.abrupt("return");case 20:c=!1,e.next=12;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(10),f=!0,h=e.t0;case 29:if(e.prev=29,e.prev=30,!c||null==p.return){e.next=34;break}return e.next=34,Mf(p.return());case 34:if(e.prev=34,!f){e.next=37;break}throw h;case 37:return e.finish(34);case 38:return e.finish(29);case 39:n=!1,e.next=4;break;case 42:e.next=48;break;case 44:e.prev=44,e.t1=e.catch(2),a=!0,i=e.t1;case 48:if(e.prev=48,e.prev=49,!n||null==o.return){e.next=53;break}return e.next=53,Mf(o.return());case 53:if(e.prev=53,!a){e.next=56;break}throw i;case 56:return e.finish(53);case 57:return e.finish(48);case 58:case"end":return e.stop()}}),e,null,[[2,44,48,58],[10,25,29,39],[30,,34,38],[49,,53,57]])}))),h.apply(this,arguments)},f=function(e,t){return h.apply(this,arguments)},Array.isArray(r)||(r=[r]),a=r.includes(Lb.all),i=r.includes(Lb.direct),o=r.includes(Lb.recursive),s=r.includes(Lb.indirect),!(o||i||a)){e.next=14;break}return e.next=10,LU(this.pinstore.query({prefix:PH(t).toString(),filters:[function(e){if(a)return!0;var t=Vs(e.value);return r.includes(0===t.depth?Lb.direct:Lb.recursive)}],limit:1}));case 10:if(!(u=e.sent)){e.next=14;break}return c=Vs(u.value),e.abrupt("return",{cid:t,pinned:!0,reason:0===c.depth?Lb.direct:Lb.recursive,metadata:c.metadata});case 14:if(l=this,!a&&!s){e.next=21;break}return e.next=18,LU(f(t,this.recursiveKeys()));case 18:if(!(p=e.sent)){e.next=21;break}return e.abrupt("return",{cid:t,pinned:!0,reason:Lb.indirect,parent:p});case 21:return e.abrupt("return",{cid:t,pinned:!1});case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"fetchCompleteDag",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o=this,s=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},a=new UH({maxSize:null!==(r=n.cidCacheMaxSize)&&void 0!==r?r:2048}),i=function(){var e=An(En().mark((function e(t,r){var n,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.has(t.toString())){e.next=2;break}return e.abrupt("return");case 2:return a.set(t.toString(),!0),e.next=5,o.blockstore.get(t,r);case 5:return n=e.sent,e.next=8,o.loadCodec(t.code);case 8:return s=e.sent,u=DH({bytes:n,cid:t,codec:s}),e.next=12,Promise.all(su(u.links()).map((function(e){var t=Ia(e,2)[1];return i(t,r)})));case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),e.next=5,i(t,n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"checkPinType",value:function(e){if("string"!==typeof e||!Object.keys(Lb).includes(e))throw function(e){var t="Invalid type '".concat(e,"', must be one of {direct, indirect, recursive, all}");return ca(new Error(t),"ERR_INVALID_PIN_TYPE")}(e);return!0}}]),e}();function zH(e,t){return FH.apply(this,arguments)}function FH(){return(FH=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.isPinnedWithType(t,Lb.all);case 2:if(n=e.sent,a=n.pinned,i=n.reason,!a){e.next=7;break}throw ca(new Error("pinned: ".concat(i)),"ERR_BLOCK_PINNED");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VH(e){return jH.apply(this,arguments)}function jH(){return jH=Hn((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return En().mark((function r(){var n,a,i,o,s,u,c,l,f;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,a=!1,r.prev=2,o=zn(HA(e,t));case 4:return r.next=6,Mf(o.next());case 6:if(!(n=!(s=r.sent).done)){r.next=26;break}u=s.value,c=u.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t().then((function(e){return{ok:!0,value:e}}),(function(e){return{ok:!1,err:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l=0;case 10:if(!(l<c.length)){r.next=23;break}return r.next=13,Mf(c[l]);case 13:if(!(f=r.sent).ok){r.next=19;break}return r.next=17,f.value;case 17:r.next=20;break;case 19:throw f.err;case 20:l++,r.next=10;break;case 23:n=!1,r.next=4;break;case 26:r.next=32;break;case 28:r.prev=28,r.t0=r.catch(2),a=!0,i=r.t0;case 32:if(r.prev=32,r.prev=33,!n||null==o.return){r.next=37;break}return r.next=37,Mf(o.return());case 37:if(r.prev=37,!a){r.next=40;break}throw i;case 40:return r.finish(37);case 41:return r.finish(32);case 42:case"end":return r.stop()}}),r,null,[[2,28,32,42],[33,,37,41]])}))()})),jH.apply(this,arguments)}var qH=Yn("ipfs:repo:gc"),KH=Fb().code,HH=new Hv("/local/filesroot");function GH(e){return WH.apply(this,arguments)}function WH(){return WH=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p,d;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.pins,n=t.blockstore,a=t.loadCodec,i=t.root,o=Hn(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mf(i.get(HH));case 3:t=e.sent,e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(0),e.t0.code!==KH){e.next=11;break}return qH("No blocks in MFS"),e.abrupt("return");case 11:throw e.t0;case 12:return r=tH.decode(t),e.next=15,r;case 15:return e.delegateYield(Cb(zn(OH(r,n,a))),"t1",16);case 16:case"end":return e.stop()}}),e,null,[[0,6]])})))(),s=_S(kS(r.recursiveKeys(),(function(e){return e.cid})),r.indirectKeys(),kS(r.directKeys(),(function(e){return e.cid})),o),u=new Set,c=!1,l=!1,e.prev=6,h=zn(_S(s,o));case 8:return e.next=10,h.next();case 10:if(!(c=!(p=e.sent).done)){e.next=16;break}d=p.value,u.add(ZK.encode(d.multihash.bytes));case 13:c=!1,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),l=!0,f=e.t0;case 22:if(e.prev=22,e.prev=23,!c||null==h.return){e.next=27;break}return e.next=27,h.return();case 27:if(e.prev=27,!l){e.next=30;break}throw f;case 30:return e.finish(27);case 31:return e.finish(22);case 32:return e.abrupt("return",u);case 33:case"end":return e.stop()}}),e,null,[[6,18,22,32],[23,,27,31]])}))),WH.apply(this,arguments)}function YH(e,t,r){return QH.apply(this,arguments)}function QH(){return QH=Hn((function(e,t,r){var n=e.blockstore;return En().mark((function e(){var a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,i=0,o=function(){var e=An(En().mark((function e(r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=An(En().mark((function e(){var o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a++,e.prev=1,o=ZK.encode(r.multihash.bytes),!t.has(o)){e.next=5;break}return e.abrupt("return",null);case 5:return e.prev=5,e.next=8,n.delete(r);case 8:i++,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(5),e.abrupt("return",{err:new Error("Could not delete block with CID ".concat(r,": ").concat(e.t0.message))});case 14:return e.abrupt("return",{cid:r});case 17:return e.prev=17,e.t1=e.catch(1),s="Could delete block with CID ".concat(r),qH(s,e.t1),e.abrupt("return",{err:new Error(s+": ".concat(e.t1.message))});case 22:case"end":return e.stop()}}),e,null,[[1,17],[5,11]])})));return function(){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.delegateYield(Cb(zn(TS(VH(kS(r,o),256),(function(e){return iS(e,Boolean)})))),"t0",4);case 4:qH("Marked set has ".concat(t.size," unique blocks. Blockstore has ").concat(a," blocks. ")+"Deleted ".concat(i," blocks."));case 5:case"end":return e.stop()}}),e)}))()})),QH.apply(this,arguments)}var JH=Yn("ipfs:repo"),ZH=Number.MAX_SAFE_INTEGER,XH=function(){function e(t,r,n,a){if(Cn(this,e),"string"!==typeof t)throw new Error("missing repo path");if("function"!==typeof r)throw new Error("missing codec loader");this.options=Gn(bH,a),this.closed=!0,this.path=t,this.root=n.root,this.datastore=n.datastore,this.keys=n.keys;var i=n.blocks,o=n.pins;this.pins=new MH({pinstore:o,blockstore:i,loadCodec:r});var s,u,c=(s=this.pins,u=i,{open:function(){return u.open()},close:function(){return u.close()},query:function(e,t){return u.query(e,t)},queryKeys:function(e,t){return u.queryKeys(e,t)},get:function(e,t){return An(En().mark((function r(){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",u.get(e,t));case 1:case"end":return r.stop()}}),r)})))()},getMany:function(e,t){return Hn(En().mark((function r(){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(Cb(zn(u.getMany(e,t))),"t0",1);case 1:case"end":return r.stop()}}),r)})))()},put:function(e,t,r){return An(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.put(e,t,r);case 2:case"end":return n.stop()}}),n)})))()},putMany:function(e,t){return Hn(En().mark((function r(){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(Cb(zn(u.putMany(e,t))),"t0",1);case 1:case"end":return r.stop()}}),r)})))()},has:function(e,t){return u.has(e,t)},delete:function(e,t){return An(En().mark((function r(){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,zH(e,s);case 2:return r.abrupt("return",u.delete(e,t));case 3:case"end":return r.stop()}}),r)})))()},deleteMany:function(e,t){return u.deleteMany(kS(e,function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zH(t,s);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t)},batch:function(){return u.batch()}});this.blocks=function(e){return{open:function(){return e.open()},close:function(){return e.close()},query:function(t,r){return e.query(t,r)},queryKeys:function(t,r){return e.queryKeys(t,r)},get:function(t,r){return An(En().mark((function n(){var a;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a=lH(t)).isIdentity){n.next=3;break}return n.abrupt("return",Promise.resolve(a.digest));case 3:return n.abrupt("return",e.get(t,r));case 4:case"end":return n.stop()}}),n)})))()},getMany:function(e,t){var r=this;return Hn(En().mark((function n(){var a,i,o,s,u,c;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(e);case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,r.get(c,t);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,Mf(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()},put:function(t,r,n){return An(En().mark((function a(){return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!lH(t).isIdentity){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,e.put(t,r,n);case 5:case"end":return a.stop()}}),a)})))()},putMany:function(t,r){return Hn(En().mark((function r(){var n;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=pS({objectMode:!0}),(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(An(En().mark((function r(){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,nS(e.putMany(Hn(En().mark((function e(){var r,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,a=!1,e.prev=2,o=zn(t);case 4:return e.next=6,Mf(o.next());case 6:if(!(r=!(s=e.sent).done)){e.next=15;break}if(u=s.value,c=u.key,l=u.value,lH(c).isIdentity){e.next=11;break}return e.next=11,{key:c,value:l};case 11:n.push({key:c,value:l});case 12:r=!1,e.next=4;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),a=!0,i=e.t0;case 21:if(e.prev=21,e.prev=22,!r||null==o.return){e.next=26;break}return e.next=26,Mf(o.return());case 26:if(e.prev=26,!a){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(21);case 31:case"end":return e.stop()}}),e,null,[[2,17,21,31],[22,,26,30]])})))()));case 3:n.end(),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),n.end(r.t0);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))),r.delegateYield(Cb(zn(n)),"t0",4);case 4:case"end":return r.stop()}}),r)})))()},has:function(t,r){return lH(t).isIdentity?Promise.resolve(!0):e.has(t,r)},delete:function(t,r){return lH(t).isIdentity?Promise.resolve():e.delete(t,r)},deleteMany:function(t,r){return e.deleteMany(iS(t,(function(e){return!lH(e).isIdentity})),r)},batch:function(){var t=e.batch();return{put:function(e,r){lH(e).isIdentity||t.put(e,r)},delete:function(e){lH(e).isIdentity||t.delete(e)},commit:function(e){return t.commit(e)}}}}}(c),this.version=function(e){return{exists:function(){return An(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",oK(hK,e.has.bind(e),e));case 1:case"end":return t.stop()}}),t)})))()},get:function(){return An(En().mark((function t(){var r;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,uK(hK,e.get.bind(e),e.has.bind(e),e);case 2:return r=t.sent,t.abrupt("return",parseInt(kh(r),10));case 4:case"end":return t.stop()}}),t)})))()},set:function(t){return e.put(hK,Bf(String(t)))},check:function(e){var t=this;return An(En().mark((function r(){var n,a;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.get();case 2:return n=r.sent,fK("comparing version: %s and %s",n,e),a=6===n&&7===e||6===e&&7===n,r.abrupt("return",n===e||a);case 6:case"end":return r.stop()}}),r)})))()}}}(this.root),this.config=function(e){var t=new pK({concurrency:1}),r={getAll:function(){var t=arguments;return An(En().mark((function r(){var n;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.length>0&&void 0!==t[0]&&t[0],r.next=3,uK(dK,e.get.bind(e),e.has.bind(e),e);case 3:return n=r.sent,r.abrupt("return",JSON.parse(kh(n)));case 5:case"end":return r.stop()}}),r)})))()},get:function(e){var t=arguments,r=this;return An(En().mark((function n(){var a,i,o;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.length>1&&void 0!==t[1]?t[1]:{},null!=e){n.next=3;break}throw new nK("Key ".concat(e," does not exist in config"));case 3:return n.next=5,r.getAll(a);case 5:if(i=n.sent,void 0!==(o=MF(i,e))){n.next=9;break}throw new nK("Key ".concat(e," does not exist in config"));case 9:return n.abrupt("return",o);case 10:case"end":return n.stop()}}),n)})))()},set:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!==typeof e&&!(e instanceof String))throw ca(new Error("Invalid key type: "+typeof e),"ERR_INVALID_KEY");if(void 0===r||r instanceof Uint8Array)throw ca(new Error("Invalid value type: "+typeof r),"ERR_INVALID_VALUE");return t.add((function(){return n({key:e,value:r},a.signal)}))},replace:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e instanceof Uint8Array)throw ca(new Error("Invalid value type: "+typeof e),"ERR_INVALID_VALUE");return t.add((function(){return n({key:void 0,value:e},r.signal)}))},exists:function(){return An(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",oK(dK,e.has.bind(e),e));case 1:case"end":return t.stop()}}),t)})))()}};return r;function n(e,t){return a.apply(this,arguments)}function a(){return a=An(En().mark((function e(t,n){var a,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.aborted){e.next=2;break}return e.abrupt("return");case 2:if(a=t.key,o=t.value,!a){e.next=10;break}return e.next=7,r.getAll();case 7:return"object"===typeof(s=e.sent)&&null!==s&&GO(s,a,o),e.abrupt("return",i(s));case 10:return e.abrupt("return",i(o));case 11:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}function i(t){var r=Bf(JSON.stringify(t,null,2));return e.put(dK,r)}}(this.root),this.spec=function(e){return{exists:function(){return e.has(bK)},get:function(){return An(En().mark((function t(){var r;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get(bK);case 2:return r=t.sent,t.abrupt("return",JSON.parse(kh(r)));case 4:case"end":return t.stop()}}),t)})))()},set:function(t){return An(En().mark((function r(){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.put(bK,Bf(JSON.stringify(yK(t,{deep:!0})))));case 1:case"end":return r.stop()}}),r)})))()}}}(this.root),this.apiAddr=function(e){return{get:function(){return An(En().mark((function t(){var r;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get(gK);case 2:return r=t.sent,t.abrupt("return",r&&r.toString());case 4:case"end":return t.stop()}}),t)})))()},set:function(t){return e.put(gK,Bf(t.toString()))},delete:function(){return e.delete(gK)}}}(this.root),this.gcLock=CM({name:t,singleProcess:!1!==this.options.repoOwner}),this.gc=function(e){var t=e.gcLock,r=e.pins,n=e.blockstore,a=e.root,i=e.loadCodec;function o(){return o=Hn(En().mark((function e(){var o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Date.now(),qH("Creating set of marked blocks"),e.next=4,Mf(t.writeLock());case 4:return s=e.sent,e.prev=5,e.next=8,Mf(GH({pins:r,blockstore:n,root:a,loadCodec:i}));case 8:return u=e.sent,c=n.queryKeys({}),e.delegateYield(Cb(zn(YH({blockstore:n},u,c))),"t0",11);case 11:qH("Complete (".concat(Date.now()-o,"ms)"));case 12:return e.prev=12,s(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[5,,12,15]])}))),o.apply(this,arguments)}return function(){return o.apply(this,arguments)}}({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:r})}return Dn(e,[{key:"init",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return JH("initializing at: %s",this.path),e.next=3,this._openRoot();case 3:return e.next=5,this.config.replace(tG(t));case 5:return e.next=7,this.spec.set(rG(t));case 7:return e.next=9,this.version.set(LF);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isInitialized",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.closed){e.next=2;break}return e.abrupt("return",!0);case 2:return e.prev=2,e.next=5,this._openRoot();case 5:return e.next=7,this._checkInitialized();case 7:return e.next=9,this.root.close();case 9:return e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"open",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.closed){e.next=2;break}throw ca(new Error("repo is already open"),"ERR_REPO_ALREADY_OPEN");case 2:return JH("opening at: %s",this.path),e.prev=3,e.next=6,this._openRoot();case 6:return e.next=8,this._checkInitialized();case 8:return e.next=10,this._openLock();case 10:return this._lockfile=e.sent,JH("acquired repo.lock"),e.next=14,this.version.check(LF);case 14:if(e.sent){e.next=24;break}return e.next=18,this._isAutoMigrationEnabled();case 18:if(!e.sent){e.next=23;break}return e.next=21,this._migrate(LF,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});case 21:e.next=24;break;case 23:throw new aK("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");case 24:return JH("creating datastore"),e.next=27,this.datastore.open();case 27:return JH("creating blocks"),e.next=30,this.blocks.open();case 30:return JH("creating keystore"),e.next=33,this.keys.open();case 33:return JH("creating pins"),e.next=36,this.pins.pinstore.open();case 36:this.closed=!1,JH("all opened"),e.next=53;break;case 40:if(e.prev=40,e.t0=e.catch(3),!this._lockfile){e.next=52;break}return e.prev=43,e.next=46,this._closeLock();case 46:this._lockfile=null,e.next=52;break;case 49:e.prev=49,e.t1=e.catch(43),JH("error removing lock",e.t1);case 52:throw e.t0;case 53:case"end":return e.stop()}}),e,this,[[3,40],[43,49]])})));return function(){return e.apply(this,arguments)}}()},{key:"_openRoot",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.root.open();case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),"Already open"===e.t0.message){e.next=9;break}throw e.t0;case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"_openLock",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.options.repoLock.lock(this.path);case 2:if("function"===typeof(t=e.sent).close){e.next=5;break}throw ca(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_closeLock",value:function(){return this._lockfile&&this._lockfile.close()}},{key:"_checkInitialized",value:function(){var e=An(En().mark((function e(){var t,r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return JH("init check"),e.prev=1,e.next=4,Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()]);case 4:r=e.sent,n=Ia(r,1),t=n[0],e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(1),"ERR_NOT_FOUND"!==e.t0.code){e.next=13;break}throw ca(new Error("repo is not initialized yet"),iK,{path:this.path});case 13:throw e.t0;case 14:if(t){e.next=16;break}throw ca(new Error("repo is not initialized yet"),iK,{path:this.path});case 16:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.closed){e.next=2;break}throw ca(new Error("repo is already closed"),"ERR_REPO_ALREADY_CLOSED");case 2:return JH("closing at: %s",this.path),e.prev=3,e.next=6,this.apiAddr.delete();case 6:e.next=12;break;case 8:if(e.prev=8,e.t0=e.catch(3),e.t0.code===iK||e.t0.message.startsWith("ENOENT")){e.next=12;break}throw e.t0;case 12:return e.next=14,Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map((function(e){return e&&e.close()})));case 14:return JH("unlocking"),this.closed=!0,e.next=18,this._closeLock();case 18:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"exists",value:function(){return this.version.exists()}},{key:"stat",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.datastore||!this.keys){e.next=12;break}return e.next=3,Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),$H(this.datastore),$H(this.keys)]);case 3:return t=e.sent,r=Ia(t,5),n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=a.size+o+s,e.abrupt("return",{repoPath:this.path,storageMax:n,version:i,numObjects:a.count,repoSize:u});case 12:throw ca(new Error("repo is not initialized yet"),iK,{path:this.path});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_isAutoMigrationEnabled",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.options.autoMigrate){e.next=2;break}return e.abrupt("return",this.options.autoMigrate);case 2:return e.prev=2,e.next=5,this.config.get("repoAutoMigrate");case 5:t=e.sent,e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(2),e.t0.code!==nK.code){e.next=14;break}t=!0,e.next=15;break;case 14:throw e.t0;case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"_migrate",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.version.get();case 2:if(!(e.sent>t)){e.next=8;break}return JH("reverting to version ".concat(t)),e.abrupt("return",Zq(this.path,r,this.options,t,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}));case 8:return JH("migrating to version ".concat(t)),e.abrupt("return",Qq(this.path,r,this.options,t,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_storageMaxStat",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.config.get("Datastore.StorageMax");case 3:return t=e.sent,e.abrupt("return",BigInt(tK(t)));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",BigInt(ZH));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"_blockStat",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=BigInt(0),r=BigInt(0),!this.blocks){e.next=33;break}n=!1,a=!1,e.prev=5,o=zn(this.blocks.query({}));case 7:return e.next=9,o.next();case 9:if(!(n=!(s=e.sent).done)){e.next=17;break}u=s.value,c=u.key,l=u.value,t+=BigInt(1),r+=BigInt(l.byteLength),r+=BigInt(c.bytes.byteLength);case 14:n=!1,e.next=7;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),a=!0,i=e.t0;case 23:if(e.prev=23,e.prev=24,!n||null==o.return){e.next=28;break}return e.next=28,o.return();case 28:if(e.prev=28,!a){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(23);case 33:return e.abrupt("return",{count:t,size:r});case 34:case"end":return e.stop()}}),e,this,[[5,19,23,33],[24,,28,32]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function $H(e){return eG.apply(this,arguments)}function eG(){return(eG=An(En().mark((function e(t){var r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=BigInt(0),n=!1,a=!1,e.prev=3,o=zn(t.query({}));case 5:return e.next=7,o.next();case 7:if(!(n=!(s=e.sent).done)){e.next=14;break}u=s.value,r+=BigInt(u.value.byteLength),r+=BigInt(u.key.uint8Array().byteLength);case 11:n=!1,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),a=!0,i=e.t0;case 20:if(e.prev=20,e.prev=21,!n||null==o.return){e.next=25;break}return e.next=25,o.return();case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e,null,[[3,16,20,30],[21,,25,29]])})))).apply(this,arguments)}function tG(e){return e.Datastore=Object.assign({},gH,MF(e,"datastore")),e}function rG(e){var t=jn(jn({},gH.Spec),MF(e,"Datastore.Spec"));return{type:t.type,mounts:t.mounts.map((function(e){return{mountpoint:e.mountpoint,type:e.child.type,path:e.child.path,shardFunc:e.child.shardFunc}}))}}function nG(e,t){return aG.apply(this,arguments)}function aG(){return aG=Hn(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mf(eS(t));case 2:return n=e.sent,e.delegateYield(Cb(zn(n.sort(r))),"t0",4);case 4:case"end":return e.stop()}}),e)}))),aG.apply(this,arguments)}var iG=__webpack_require__(4761),oG=function(e){Pn(r,e);var t=Un(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Cn(this,r),(n=t.call(this)).db="string"===typeof e?new iG.Level(e,jn(jn({},a),{},{keyEncoding:"utf8",valueEncoding:"view"})):e,n.opts=jn({createIfMissing:!0,compression:!1},a),n}return Dn(r,[{key:"open",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.open(this.opts);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),Ub(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.put(t.toString(),r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),zb(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.get(t.toString());case 3:r=e.sent,e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(0),!e.t0.notFound){e.next=10;break}throw Fb(e.t0);case 10:throw zb(e.t0);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.get(t.toString());case 3:e.next=10;break;case 5:if(e.prev=5,e.t0=e.catch(0),!e.t0.notFound){e.next=9;break}return e.abrupt("return",!1);case 9:throw e.t0;case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.del(t.toString());case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),Mb(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){return this.db&&this.db.close()}},{key:"batch",value:function(){var e=this,t=[];return{put:function(e,r){t.push({type:"put",key:e.toString(),value:r})},delete:function(e){t.push({type:"del",key:e.toString()})},commit:function(){return e.db.batch(t)}}}},{key:"query",value:function(e){var t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce((function(e,t){return iS(e,t)}),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((function(e,t){return nG(e,t)}),t));var r=e.offset,n=e.limit;if(r){var a=0;t=iS(t,(function(){return a++>=r}))}return n&&(t=sS(t,n)),t}},{key:"queryKeys",value:function(e){var t=kS(this._query({values:!1,prefix:e.prefix}),(function(e){return e.key}));Array.isArray(e.filters)&&(t=e.filters.reduce((function(e,t){return iS(e,t)}),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((function(e,t){return nG(e,t)}),t));var r=e.offset,n=e.limit;if(r){var a=0;t=iS(t,(function(){return a++>=r}))}return n&&(t=sS(t,n)),t}},{key:"_query",value:function(e){var t={keys:!0,keyEncoding:"buffer",values:e.values};if(null!=e.prefix){var r=e.prefix.toString();t.gte=r,t.lt=r+"\xff"}var n,a=this.db.iterator(t);if(a[Symbol.asyncIterator])return function(e){return sG.apply(this,arguments)}(a);if(null!=a.next&&null!=a.end)return n=a,Mn({},Symbol.asyncIterator,(function(){return{next:function(){return new Promise((function(e,t){n.next((function(r,a,i){return r?t(r):null==a?n.end((function(r){if(r)return t(r);e({done:!0,value:void 0})})):void e({done:!1,value:{key:new Hv(a,!1),value:i}})}))}))},return:function(){return new Promise((function(e,t){n.end((function(r){if(r)return t(r);e({done:!0,value:void 0})}))}))}}}));throw new Error("Level returned incompatible iterator")}}]),r}(cS);function sG(){return sG=Hn(En().mark((function e(t){var r,n,a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=zn(t);case 4:return e.next=6,Mf(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=13;break}return s=Ia(o.value,2),u=s[0],c=s[1],e.next=10,{key:new Hv(u,!1),value:c};case 10:r=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),n=!0,a=e.t0;case 19:if(e.prev=19,e.prev=20,!r||null==i.return){e.next=24;break}return e.next=24,Mf(i.return());case 24:if(e.prev=24,!n){e.next=27;break}throw a;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.next=31,Mf(t.close());case 31:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])}))),sG.apply(this,arguments)}var uG=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=cG;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},cG=Math.pow(2,31);var lG=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var fG=Math.pow(2,7),hG=Math.pow(2,14),pG=Math.pow(2,21),dG=Math.pow(2,28),vG=Math.pow(2,35),yG=Math.pow(2,42),bG=Math.pow(2,49),gG=Math.pow(2,56),mG=Math.pow(2,63),wG={encode:uG,decode:lG,encodingLength:function(e){return e<fG?1:e<hG?2:e<pG?3:e<dG?4:e<vG?5:e<yG?6:e<bG?7:e<gG?8:e<mG?9:10}},kG=wG,xG=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=kG.decode(e,t);return[r,kG.decode.bytes]},_G=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return kG.encode(e,t,r),t},EG=function(e){return kG.encodingLength(e)},SG=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),AG=function(e){var t=SG(e),r=Ia(xG(t),2),n=r[0],a=r[1],i=Ia(xG(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new CG(n,o,u,t)},CG=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var IG=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},TG=IG,DG=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),RG=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return NG(this,e)}}]),e}(),PG=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return NG(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),NG=function(e,t){return new PG(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},LG=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new DG(t,r,n),this.decoder=new RG(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),OG=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new LG(t,r,n,a)},BG=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=TG(n,r),i=a.encode,o=a.decode;return OG({prefix:t,name:r,encode:i,decode:function(e){return SG(o(e))}})},UG=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return OG({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},MG=BG({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zG=(BG({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),UG({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),FG=(UG({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),UG({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5})),VG=(UG({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),UG({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),UG({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),UG({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),UG({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),UG({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),function(e,t){var r=e.bytes;return 0===e.version?GG(r,qG(e),t||MG.encoder):WG(r,qG(e),t||zG.encoder)}),jG=new WeakMap,qG=function(e){var t=jG.get(e);if(null==t){var r=new Map;return jG.set(e,r),r}return t},KG=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==YG)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==QG)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=function(e,t){var r=t.byteLength,n=EG(e),a=n+EG(r),i=new Uint8Array(a+r);return _G(e,i,0),_G(r,i,n),i.set(t,a),new CG(e,r,t,i)}(e.code,e.digest);return r.createV1(this.code,t);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return VG(this,e)}},{key:"toJSON",value:function(){return{"/":VG(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||JG(n,a,i.bytes))}if(!0===t[ZG]){var o=t.version,s=t.multihash,u=t.code,c=AG(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==YG)throw new Error("Version 0 CID must use dag-pb (code: ".concat(YG,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,JG(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,YG,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=SG(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new CG(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(xG(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=YG;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(HG(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return qG(o).set(a,e),o}}]),r}(),HG=function(e,t){switch(e[0]){case"Q":var r=t||MG;return[MG.prefix,r.decode("".concat(MG.prefix).concat(e))];case MG.prefix:var n=t||MG;return[MG.prefix,n.decode(e)];case zG.prefix:var a=t||zG;return[zG.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},GG=function(e,t,r){var n=r.prefix;if(n!==MG.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},WG=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},YG=112,QG=18,JG=function(e,t,r){var n=EG(e),a=n+EG(t),i=new Uint8Array(a+r.byteLength);return _G(e,i,0),_G(t,i,n),i.set(r,a),i},ZG=Symbol.for("@ipld/js-cid/CID"),XG=function(e,t){return Hn(En().mark((function r(){var n;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Mf(eS(e));case 2:return n=r.sent,r.delegateYield(Cb(zn(n.sort(t))),"t0",4);case 4:case"end":return r.stop()}}),r)})))()},$G=function(){function e(){Cn(this,e)}return Dn(e,[{key:"open",value:function(){return Promise.reject(new Error(".open is not implemented"))}},{key:"close",value:function(){return Promise.reject(new Error(".close is not implemented"))}},{key:"put",value:function(e,t,r){return Promise.reject(new Error(".put is not implemented"))}},{key:"get",value:function(e,t){return Promise.reject(new Error(".get is not implemented"))}},{key:"has",value:function(e,t){return Promise.reject(new Error(".has is not implemented"))}},{key:"delete",value:function(e,t){return Promise.reject(new Error(".delete is not implemented"))}},{key:"putMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(e);case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=15;break}return c=u.value,l=c.key,f=c.value,n.next=10,Mf(t.put(l,f,r));case 10:return n.next=12,{key:l,value:f};case 12:a=!1,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),i=!0,o=n.t0;case 21:if(n.prev=21,n.prev=22,!a||null==s.return){n.next=26;break}return n.next=26,Mf(s.return());case 26:if(n.prev=26,!i){n.next=29;break}throw o;case 29:return n.finish(26);case 30:return n.finish(21);case 31:case"end":return n.stop()}}),n,null,[[2,17,21,31],[22,,26,30]])})))()}},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(e);case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,t.get(c,r);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,Mf(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"deleteMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(e);case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=15;break}return c=u.value,n.next=10,Mf(t.delete(c,r));case 10:return n.next=12,c;case 12:a=!1,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),i=!0,o=n.t0;case 21:if(n.prev=21,n.prev=22,!a||null==s.return){n.next=26;break}return n.next=26,Mf(s.return());case 26:if(n.prev=26,!i){n.next=29;break}throw o;case 29:return n.finish(26);case 30:return n.finish(21);case 31:case"end":return n.stop()}}),n,null,[[2,17,21,31],[22,,26,30]])})))()}},{key:"batch",value:function(){var e=this,t=[],r=[];return{put:function(e,r){t.push({key:e,value:r})},delete:function(e){r.push(e)},commit:function(){var n=An(En().mark((function n(a){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,nS(e.putMany(t,a));case 2:return t=[],n.next=5,nS(e.deleteMany(r,a));case 5:r=[];case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}},{key:"_all",value:function(e,t){return Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("._all is not implemented");case 1:case"end":return e.stop()}}),e)})))()}},{key:"_allKeys",value:function(e,t){return Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("._allKeys is not implemented");case 1:case"end":return e.stop()}}),e)})))()}},{key:"query",value:function(e,t){var r=this._all(e,t);if(null!=e.prefix&&(r=iS(r,(function(t){return t.key.toString().startsWith(e.prefix||"")}))),Array.isArray(e.filters)&&(r=e.filters.reduce((function(e,t){return iS(e,t)}),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((function(e,t){return XG(e,t)}),r)),null!=e.offset){var n=0;r=iS(r,(function(){return n++>=(e.offset||0)}))}return null!=e.limit&&(r=sS(r,e.limit)),r}},{key:"queryKeys",value:function(e,t){var r=this._allKeys(e,t);if(null!=e.prefix&&(r=iS(r,(function(t){return t.toString().startsWith(e.prefix||"")}))),Array.isArray(e.filters)&&(r=e.filters.reduce((function(e,t){return iS(e,t)}),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((function(e,t){return XG(e,t)}),r)),null!=e.offset){var n=0;r=iS(r,(function(){return n++>=e.offset}))}return null!=e.limit&&(r=sS(r,e.limit)),r}}]),e}();function eW(e){var t=KG.asCID(e);if(!t)throw ca(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Hv("/"+zG.encode(t.multihash.bytes).slice(1).toUpperCase(),!1)}function tW(e){return KG.createV1(85,AG(zG.decode("b"+e.toString().slice(1).toLowerCase())))}function rW(e){var t,r,n=e.substring(0,1);if("/"===n)return rW(e.substring(1));t="b"===n.toLowerCase()?function(e){return zG.decode(e.toLowerCase()).subarray(2)}:"c"===n.toLowerCase()?function(e){return FG.decode(e.toLowerCase()).subarray(2)}:"z"===n?function(e){return MG.decode(e).subarray(2)}:"Q"===n?function(e){return MG.decode("z"+e)}:function(e){return zG.decode("b"+e.toLowerCase()).subarray(2)};for(var a=1;a<e.length;a++)try{r=t(e.substring(0,a))}catch(eL){if("Unexpected end of data"!==eL.message)throw eL}var i="/C";return r&&(i="/".concat(zG.encode(r).slice(1,-1).toUpperCase()||"C")),i}function nW(e){return jn(jn({},e),{},{prefix:e.prefix?rW(e.prefix):void 0,filters:e.filters?e.filters.map((function(e){return function(t){return e({key:tW(t.key),value:t.value})}})):void 0,orders:e.orders?e.orders.map((function(e){return function(t,r){return e({key:tW(t.key),value:t.value},{key:tW(r.key),value:r.value})}})):void 0})}function aW(e){return jn(jn({},e),{},{prefix:e.prefix?rW(e.prefix):void 0,filters:e.filters?e.filters.map((function(e){return function(t){return e(tW(t))}})):void 0,orders:e.orders?e.orders.map((function(e){return function(t,r){return e(tW(t),tW(r))}})):void 0})}var iW=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this)).child=e,n}return Dn(r,[{key:"open",value:function(){return this.child.open()}},{key:"close",value:function(){return this.child.close()}},{key:"query",value:function(e,t){var r=this;return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(r.child.query(nW(e),t));case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,l=c.key,f=c.value,n.next=10,{key:tW(l),value:f};case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,Mf(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"queryKeys",value:function(e,t){var r=this;return Hn(En().mark((function n(){var a,i,o,s,u,c;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(r.child.queryKeys(aW(e),t));case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,tW(c);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,Mf(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"get",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.child.get(eW(t),r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMany",value:function(e,t){var r=this;return Hn(En().mark((function n(){var a,i,o,s,u,c;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(e);case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,r.get(c,t);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,Mf(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"put",value:function(){var e=An(En().mark((function e(t,r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.child.put(eW(t),r,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"putMany",value:function(e,t){var r=this;return Hn(En().mark((function n(){var a;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=pS({objectMode:!0}),(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(An(En().mark((function n(){var i;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r.child,n.next=4,nS(r.child.putMany(Hn(En().mark((function r(){var n,o,s,u,c,l,f;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,o=!1,r.prev=2,u=zn(e);case 4:return r.next=6,Mf(u.next());case 6:if(!(n=!(c=r.sent).done)){r.next=19;break}return l=c.value,f=eW(l.key),r.next=11,Mf(i.has(f,t));case 11:if(r.sent){r.next=15;break}return r.next=15,{key:f,value:l.value};case 15:a.push(l);case 16:n=!1,r.next=4;break;case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(2),o=!0,s=r.t0;case 25:if(r.prev=25,r.prev=26,!n||null==u.return){r.next=30;break}return r.next=30,Mf(u.return());case 30:if(r.prev=30,!o){r.next=33;break}throw s;case 33:return r.finish(30);case 34:return r.finish(25);case 35:case"end":return r.stop()}}),r,null,[[2,21,25,35],[26,,30,34]])})))()));case 4:a.end(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a.end(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))),n.delegateYield(Cb(zn(a)),"t0",4);case 4:case"end":return n.stop()}}),n)})))()}},{key:"has",value:function(e,t){return this.child.has(eW(e),t)}},{key:"delete",value:function(e,t){return this.child.delete(eW(e),t)}},{key:"deleteMany",value:function(e,t){var r=pS({objectMode:!0});return nS(this.child.deleteMany(Hn(En().mark((function t(){var n,a,i,o,s,u;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,o=zn(e);case 4:return t.next=6,Mf(o.next());case 6:if(!(n=!(s=t.sent).done)){t.next=14;break}return u=s.value,t.next=10,eW(u);case 10:r.push(u);case 11:n=!1,t.next=4;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(2),a=!0,i=t.t0;case 20:if(t.prev=20,t.prev=21,!n||null==o.return){t.next=25;break}return t.next=25,Mf(o.return());case 25:if(t.prev=25,!a){t.next=28;break}throw i;case 28:return t.finish(25);case 29:return t.finish(20);case 30:r.end();case 31:case"end":return t.stop()}}),t,null,[[2,16,20,30],[21,,25,29]])})))(),t)).catch((function(e){r.end(e)})),r}}]),r}($G);function oW(e,t,r){var n=r.path||"ipfs";return function(e,t,r,n){return new XH(e,t,r,n)}(n,(function(e){return t.getCodec(e)}),{root:new oG(n,{prefix:"",version:2}),blocks:new iW(new oG("".concat(n,"/blocks"),{prefix:"",version:2})),datastore:new oG("".concat(n,"/datastore"),{prefix:"",version:2}),keys:new oG("".concat(n,"/keys"),{prefix:"",version:2}),pins:new oG("".concat(n,"/pins"),{prefix:"",version:2})},{autoMigrate:r.autoMigrate,onMigrationProgress:r.onMigrationProgress||e,repoLock:yH})}var sW,uW="ERR_SIGNATURE_NOT_VALID";!function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.publicKey&&e.publicKey.byteLength>0)&&(t.uint32(10),t.bytes(e.publicKey)),(!0===r.writeDefaults||null!=e.payloadType&&e.payloadType.byteLength>0)&&(t.uint32(18),t.bytes(e.payloadType)),(!0===r.writeDefaults||null!=e.payload&&e.payload.byteLength>0)&&(t.uint32(26),t.bytes(e.payload)),(!0===r.writeDefaults||null!=e.signature&&e.signature.byteLength>0)&&(t.uint32(42),t.bytes(e.signature)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.publicKey=e.bytes();break;case 2:r.payloadType=e.bytes();break;case 3:r.payload=e.bytes();break;case 5:r.signature=e.bytes();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(sW||(sW={}));var cW=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=lW;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},lW=Math.pow(2,31);var fW=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var hW=Math.pow(2,7),pW=Math.pow(2,14),dW=Math.pow(2,21),vW=Math.pow(2,28),yW=Math.pow(2,35),bW=Math.pow(2,42),gW=Math.pow(2,49),mW=Math.pow(2,56),wW=Math.pow(2,63),kW={encode:cW,decode:fW,encodingLength:function(e){return e<hW?1:e<pW?2:e<dW?3:e<vW?4:e<yW?5:e<bW?6:e<gW?7:e<mW?8:e<wW?9:10}},xW=kW,_W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=xW.decode(e,t);return[r,xW.decode.bytes]},EW=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return xW.encode(e,t,r),t},SW=function(e){return xW.encodingLength(e)},AW=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),CW=function(e,t){var r=t.byteLength,n=SW(e),a=n+SW(r),i=new Uint8Array(a+r);return EW(e,i,0),EW(r,i,n),i.set(t,a),new TW(e,r,t,i)},IW=function(e){var t=AW(e),r=Ia(_W(t),2),n=r[0],a=r[1],i=Ia(_W(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new TW(n,o,u,t)},TW=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var DW=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},RW=DW,PW=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),NW=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return OW(this,e)}}]),e}(),LW=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return OW(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),OW=function(e,t){return new LW(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},BW=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new PW(t,r,n),this.decoder=new NW(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),UW=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new BW(t,r,n,a)},MW=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=RW(n,r),i=a.encode,o=a.decode;return UW({prefix:t,name:r,encode:i,decode:function(e){return AW(o(e))}})},zW=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return UW({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},FW=MW({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),VW=MW({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),jW=zW({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qW=zW({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),KW=zW({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),HW=zW({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),GW=zW({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),WW=zW({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),YW=zW({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),QW=zW({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),JW=zW({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),ZW=function(e,t){var r=e.bytes;return 0===e.version?rY(r,$W(e),t||FW.encoder):nY(r,$W(e),t||jW.encoder)},XW=new WeakMap,$W=function(e){var t=XW.get(e);if(null==t){var r=new Map;return XW.set(e,r),r}return t},eY=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==aY)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==iY)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=CW(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return ZW(this,e)}},{key:"toJSON",value:function(){return{"/":ZW(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||oY(n,a,i.bytes))}if(!0===t[sY]){var o=t.version,s=t.multihash,u=t.code,c=IW(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==aY)throw new Error("Version 0 CID must use dag-pb (code: ".concat(aY,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,oY(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,aY,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=AW(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new TW(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(_W(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=aY;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(tY(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return $W(o).set(a,e),o}}]),r}(),tY=function(e,t){switch(e[0]){case"Q":var r=t||FW;return[FW.prefix,r.decode("".concat(FW.prefix).concat(e))];case FW.prefix:var n=t||FW;return[FW.prefix,n.decode(e)];case jW.prefix:var a=t||jW;return[jW.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},rY=function(e,t,r){var n=r.prefix;if(n!==FW.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},nY=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},aY=112,iY=18,oY=function(e,t,r){var n=SW(e),a=n+SW(t),i=new Uint8Array(a+r.byteLength);return EW(e,i,0),EW(t,i,n),i.set(r,a),i},sY=Symbol.for("@ipld/js-cid/CID"),uY=UW({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),cY=zW({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),lY=zW({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),fY=MW({prefix:"9",name:"base10",alphabet:"0123456789"}),hY=zW({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pY=zW({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),dY=MW({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),vY=MW({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),yY=zW({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),bY=zW({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gY=zW({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),mY=zW({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),wY=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),kY=wY.reduce((function(e,t,r){return e[r]=t,e}),[]),xY=wY.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var _Y=UW({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=kY[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=xY[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),EY=function(e){var t=e.name,r=e.code,n=e.encode;return new SY(t,r,n)},SY=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?CW(this.code,r):r.then((function(e){return CW(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),AY=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},CY=EY({name:"sha2-256",code:18,encode:AY("SHA-256")}),IY=EY({name:"sha2-512",code:19,encode:AY("SHA-512")}),TY=AW,DY={code:0,name:"identity",encode:TY,digest:function(e){return CW(0,TY(e))}},RY="raw",PY=85,NY=function(e){return AW(e)},LY=function(e){return AW(e)},OY=new TextEncoder,BY=new TextDecoder,UY="json",MY=512,zY=function(e){return OY.encode(JSON.stringify(e))},FY=function(e){return JSON.parse(BY.decode(e))},VY=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},de),ve),ye),be),ge),pe),me),he),we),ke),jY=(jn(jn({},xe),_e),Symbol.for("nodejs.util.inspect.custom")),qY=Object.values(VY).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),VY.identity.decoder),KY=function(e){function t(e){Cn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:fb,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=FW.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return eY.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return Pd(this.multihash.bytes,e);if("string"===typeof e)return function(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:qY,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=IW(FW.decode("z".concat(e)));return e.startsWith("12D")?new GY({multihash:n}):e.startsWith("16U")?new WY({multihash:n}):new HY({multihash:n})}return YY(qY.decode(e))}(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Pd(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:jY,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),HY=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Dn(r)}(KY),GY=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Dn(r)}(KY),WY=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Dn(r)}(KY);function YY(e){try{var t=IW(e);if(t.code===DY.code){if(36===t.digest.length)return new GY({multihash:t});if(37===t.digest.length)return new WY({multihash:t})}if(t.code===CY.code)return new HY({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===CY.code)return new HY({multihash:e.multihash});if(t.code===DY.code){if(36===t.digest.length)return new GY({multihash:e.multihash});if(37===t.digest.length)return new WY({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(eY.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function QY(e,t){return JY.apply(this,arguments)}function JY(){return(JY=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(36!==t.length){e.next=2;break}return e.abrupt("return",new GY({multihash:CW(DY.code,t),privateKey:r}));case 2:if(37!==t.length){e.next=4;break}return e.abrupt("return",new WY({multihash:CW(DY.code,t),privateKey:r}));case 4:return e.t0=HY,e.next=7,CY.digest(t);case 7:return e.t1=e.sent,e.t2=t,e.t3=r,e.t4={multihash:e.t1,publicKey:e.t2,privateKey:e.t3},e.abrupt("return",new e.t0(e.t4));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZY(e){return e instanceof Uint8Array?{get:function(t){return e[t]},set:function(t,r){e[t]=r}}:{get:function(t){return e.get(t)},set:function(t,r){e.set(t,r)}}}var XY=4294967296,$Y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Cn(this,e),this.hi=t,this.lo=r}return Dn(e,[{key:"toBigInt",value:function(e){if(!0===e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!==0){var t=1+~this.lo>>>0,r=~this.hi>>>0;return 0===t&&(r=r+1>>>0),-(BigInt(t)+(BigInt(r)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}},{key:"toNumber",value:function(e){return Number(this.toBigInt(e))}},{key:"zzDecode",value:function(){var t=-(1&this.lo),r=((this.lo>>>1|this.hi<<31)^t)>>>0;return new e((this.hi>>>1^t)>>>0,r)}},{key:"zzEncode",value:function(){var t=this.hi>>31;return new e(((this.hi<<1|this.lo>>>31)^t)>>>0,(this.lo<<1^t)>>>0)}},{key:"toBytes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=ZY(e);this.hi>0;)r.set(t++,127&this.lo|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)r.set(t++,127&this.lo|128),this.lo=this.lo>>>7;r.set(t++,this.lo)}}],[{key:"fromBigInt",value:function(t){if(0n===t)return new e;var r=t<0;r&&(t=-t);var n=0|Number(t>>32n),a=0|Number(t-(BigInt(n)<<32n));return r&&(n=~n>>>0,a=~a>>>0,++a>XY&&(a=0,++n>XY&&(n=0))),new e(n,a)}},{key:"fromNumber",value:function(t){if(0===t)return new e;var r=t<0;r&&(t=-t);var n=t>>>0,a=(t-n)/4294967296>>>0;return r&&(a=~a>>>0,n=~n>>>0,++n>4294967295&&(n=0,++a>4294967295&&(a=0))),new e(a,n)}},{key:"fromBytes",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ZY(t),a=new e,i=0;if(t.length-r>4){for(;i<4;++i)if(a.lo=(a.lo|(127&n.get(r))<<7*i)>>>0,n.get(r++)<128)return a;if(a.lo=(a.lo|(127&n.get(r))<<28)>>>0,a.hi=(a.hi|(127&n.get(r))>>4)>>>0,n.get(r++)<128)return a;i=0}else for(;i<4;++i){if(r>=t.length)throw RangeError("index out of range: ".concat(r," > ").concat(t.length));if(a.lo=(a.lo|(127&n.get(r))<<7*i)>>>0,n.get(r++)<128)return a}if(t.length-r>4){for(;i<5;++i)if(a.hi=(a.hi|(127&n.get(r))<<7*i+3)>>>0,n.get(r++)<128)return a}else if(r<t.byteLength)for(;i<5;++i){if(r>=t.length)throw RangeError("index out of range: ".concat(r," > ").concat(t.length));if(a.hi=(a.hi|(127&n.get(r))<<7*i+3)>>>0,n.get(r++)<128)return a}throw RangeError("invalid varint encoding")}}]),e}(),eQ=Math.pow(2,7),tQ=Math.pow(2,14),rQ=Math.pow(2,21),nQ=Math.pow(2,28),aQ=Math.pow(2,35),iQ=Math.pow(2,42),oQ=Math.pow(2,49),sQ=Math.pow(2,56),uQ=Math.pow(2,63),cQ={encodingLength:function(e){return e<eQ?1:e<tQ?2:e<rQ?3:e<nQ?4:e<aQ?5:e<iQ?6:e<oQ?7:e<sQ?8:e<uQ?9:10},encode:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!=Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return null==t&&(t=Rf(cQ.encodingLength(e))),$Y.fromNumber(e).toBytes(t,r),t},decode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return $Y.fromBytes(e,t).toNumber(!0)}},lQ=function(){function e(t){Cn(this,e);var r=t.peerId,n=t.payloadType,a=t.payload,i=t.signature;this.peerId=r,this.payloadType=n,this.payload=a,this.signature=i}return Dn(e,[{key:"marshal",value:function(){if(null==this.peerId.publicKey)throw new Error("Missing public key");return null==this.marshaled&&(this.marshaled=sW.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}},{key:"equals",value:function(e){return Pd(this.marshal(),e.marshal())}},{key:"validate",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hQ(t,this.payloadType,this.payload),null!=this.peerId.publicKey){e.next=3;break}throw new Error("Missing public key");case 3:return n=wx(this.peerId.publicKey),e.next=6,n.verify(r.subarray(),this.signature);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();lQ.createFromProtobuf=function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sW.decode(t),e.next=3,QY(r.publicKey);case 3:return n=e.sent,e.abrupt("return",new lQ({peerId:n,payloadType:r.payloadType,payload:r.payload,signature:r.signature}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lQ.seal=function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r.privateKey){e.next=2;break}throw new Error("Missing private key");case 2:return n=t.domain,a=t.codec,i=t.marshal(),o=hQ(n,a,i),e.next=8,xx(r.privateKey);case 8:return s=e.sent,e.next=11,s.sign(o.subarray());case 11:return u=e.sent,e.abrupt("return",new lQ({peerId:r,payloadType:a,payload:i,signature:u}));case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),lQ.openAndCertify=function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lQ.createFromProtobuf(t);case 2:return n=e.sent,e.next=5,n.validate(r);case 5:if(e.sent){e.next=8;break}throw ca(new Error("envelope signature is not valid for the given domain"),uW);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();var fQ,hQ=function(e,t,r){var n=Bf(e),a=cQ.encode(n.byteLength),i=cQ.encode(t.length),o=cQ.encode(r.length);return new ST(a,n,i,t,o,r)};!function(e){var t;!function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.multiaddr&&e.multiaddr.byteLength>0)&&(t.uint32(10),t.bytes(e.multiaddr)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={multiaddr:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();if(a>>>3===1)r.multiaddr=e.bytes();else e.skipType(7&a)}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(e.AddressInfo||(e.AddressInfo={})),e.codec=function(){return null==t&&(t=ag((function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==n.lengthDelimited&&r.fork(),(!0===n.writeDefaults||null!=t.peerId&&t.peerId.byteLength>0)&&(r.uint32(10),r.bytes(t.peerId)),!0!==n.writeDefaults&&0n===t.seq||(r.uint32(16),r.uint64(t.seq)),null!=t.addresses){var a,i=Ni(t.addresses);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.uint32(26),e.AddressInfo.codec().encode(o,r,{writeDefaults:!0})}}catch(eL){i.e(eL)}finally{i.f()}}!1!==n.lengthDelimited&&r.ldelim()}),(function(t,r){for(var n={peerId:new Uint8Array(0),seq:0n,addresses:[]},a=null==r?t.len:t.pos+r;t.pos<a;){var i=t.uint32();switch(i>>>3){case 1:n.peerId=t.bytes();break;case 2:n.seq=t.uint64();break;case 3:n.addresses.push(e.AddressInfo.codec().decode(t,t.uint32()));break;default:t.skipType(7&i)}}return n}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(fQ||(fQ={}));var pQ=Uint8Array.from([3,1]),dQ=function(){function e(t){Cn(this,e),this.domain=e.DOMAIN,this.codec=e.CODEC;var r=t.peerId,n=t.multiaddrs,a=t.seqNumber;this.peerId=r,this.multiaddrs=null!==n&&void 0!==n?n:[],this.seqNumber=null!==a&&void 0!==a?a:BigInt(Date.now())}return Dn(e,[{key:"marshal",value:function(){return null==this.marshaled&&(this.marshaled=fQ.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map((function(e){return{multiaddr:e.bytes}}))})),this.marshaled}},{key:"equals",value:function(t){return t instanceof e&&(!!this.peerId.equals(t.peerId)&&(this.seqNumber===t.seqNumber&&!!function(e,t){var r=function(e,t){return e.toString().localeCompare(t.toString())};return e.length===t.length&&(t.sort(r),e.sort(r).every((function(e,r){return t[r].equals(e)})))}(this.multiaddrs,t.multiaddrs)))}}]),e}();dQ.createFromProtobuf=function(e){var t,r=fQ.decode(e),n=YY(r.peerId),a=(null!==(t=r.addresses)&&void 0!==t?t:[]).map((function(e){return Gd(e.multiaddr)})),i=r.seq;return new dQ({peerId:n,multiaddrs:a,seqNumber:i})},dQ.DOMAIN="libp2p-peer-record",dQ.CODEC=pQ;var vQ=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=yQ;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},yQ=Math.pow(2,31);var bQ=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var gQ=Math.pow(2,7),mQ=Math.pow(2,14),wQ=Math.pow(2,21),kQ=Math.pow(2,28),xQ=Math.pow(2,35),_Q=Math.pow(2,42),EQ=Math.pow(2,49),SQ=Math.pow(2,56),AQ=Math.pow(2,63),CQ={encode:vQ,decode:bQ,encodingLength:function(e){return e<gQ?1:e<mQ?2:e<wQ?3:e<kQ?4:e<xQ?5:e<_Q?6:e<EQ?7:e<SQ?8:e<AQ?9:10}},IQ=CQ,TQ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=IQ.decode(e,t);return[r,IQ.decode.bytes]},DQ=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return IQ.encode(e,t,r),t},RQ=function(e){return IQ.encodingLength(e)},PQ=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),NQ=function(e,t){var r=t.byteLength,n=RQ(e),a=n+RQ(r),i=new Uint8Array(a+r);return DQ(e,i,0),DQ(r,i,n),i.set(t,a),new OQ(e,r,t,i)},LQ=function(e){var t=PQ(e),r=Ia(TQ(t),2),n=r[0],a=r[1],i=Ia(TQ(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new OQ(n,o,u,t)},OQ=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var BQ=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},UQ=BQ,MQ=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),zQ=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return VQ(this,e)}}]),e}(),FQ=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return VQ(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),VQ=function(e,t){return new FQ(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},jQ=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new MQ(t,r,n),this.decoder=new zQ(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),qQ=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new jQ(t,r,n,a)},KQ=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=UQ(n,r),i=a.encode,o=a.decode;return qQ({prefix:t,name:r,encode:i,decode:function(e){return PQ(o(e))}})},HQ=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return qQ({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},GQ=KQ({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),WQ=KQ({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),YQ=HQ({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),QQ=HQ({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),JQ=HQ({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ZQ=HQ({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),XQ=HQ({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$Q=HQ({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eJ=HQ({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),tJ=HQ({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),rJ=HQ({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),nJ=function(e,t){var r=e.bytes;return 0===e.version?uJ(r,iJ(e),t||GQ.encoder):cJ(r,iJ(e),t||YQ.encoder)},aJ=new WeakMap,iJ=function(e){var t=aJ.get(e);if(null==t){var r=new Map;return aJ.set(e,r),r}return t},oJ=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==lJ)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==fJ)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=NQ(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return nJ(this,e)}},{key:"toJSON",value:function(){return{"/":nJ(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||hJ(n,a,i.bytes))}if(!0===t[pJ]){var o=t.version,s=t.multihash,u=t.code,c=LQ(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==lJ)throw new Error("Version 0 CID must use dag-pb (code: ".concat(lJ,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,hJ(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,lJ,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=PQ(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new OQ(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(TQ(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=lJ;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(sJ(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return iJ(o).set(a,e),o}}]),r}(),sJ=function(e,t){switch(e[0]){case"Q":var r=t||GQ;return[GQ.prefix,r.decode("".concat(GQ.prefix).concat(e))];case GQ.prefix:var n=t||GQ;return[GQ.prefix,n.decode(e)];case YQ.prefix:var a=t||YQ;return[YQ.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},uJ=function(e,t,r){var n=r.prefix;if(n!==GQ.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},cJ=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},lJ=112,fJ=18,hJ=function(e,t,r){var n=RQ(e),a=n+RQ(t),i=new Uint8Array(a+r.byteLength);return DQ(e,i,0),DQ(t,i,n),i.set(r,a),i},pJ=Symbol.for("@ipld/js-cid/CID"),dJ=qQ({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),vJ=HQ({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),yJ=HQ({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),bJ=KQ({prefix:"9",name:"base10",alphabet:"0123456789"}),gJ=HQ({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mJ=HQ({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),wJ=KQ({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),kJ=KQ({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),xJ=HQ({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_J=HQ({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),EJ=HQ({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),SJ=HQ({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),AJ=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),CJ=AJ.reduce((function(e,t,r){return e[r]=t,e}),[]),IJ=AJ.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var TJ=qQ({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=CJ[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=IJ[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),DJ=function(e){var t=e.name,r=e.code,n=e.encode;return new RJ(t,r,n)},RJ=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?NQ(this.code,r):r.then((function(e){return NQ(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),PJ=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},NJ=DJ({name:"sha2-256",code:18,encode:PJ("SHA-256")}),LJ=DJ({name:"sha2-512",code:19,encode:PJ("SHA-512")}),OJ=PQ,BJ={code:0,name:"identity",encode:OJ,digest:function(e){return NQ(0,OJ(e))}},UJ="raw",MJ=85,zJ=function(e){return PQ(e)},FJ=function(e){return PQ(e)},VJ=new TextEncoder,jJ=new TextDecoder,qJ="json",KJ=512,HJ=function(e){return VJ.encode(JSON.stringify(e))},GJ=function(e){return JSON.parse(jJ.decode(e))},WJ=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},Ie),Te),De),Re),Pe),Ce),Ne),Ae),Le),Oe),YJ=(jn(jn({},Be),Ue),Symbol.for("nodejs.util.inspect.custom")),QJ=Object.values(WJ).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),WJ.identity.decoder),JJ=function(e){function t(e){Cn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:fb,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=GQ.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return oJ.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return Pd(this.multihash.bytes,e);if("string"===typeof e)return eZ(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Pd(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:YJ,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),ZJ=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Dn(r)}(JJ),XJ=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Dn(r)}(JJ),$J=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Dn(r)}(JJ);function eZ(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:QJ,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=LQ(GQ.decode("z".concat(e)));return e.startsWith("12D")?new XJ({multihash:n}):e.startsWith("16U")?new $J({multihash:n}):new ZJ({multihash:n})}return tZ(QJ.decode(e))}function tZ(e){try{var t=LQ(e);if(t.code===BJ.code){if(36===t.digest.length)return new XJ({multihash:t});if(37===t.digest.length)return new $J({multihash:t})}if(t.code===NJ.code)return new ZJ({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===NJ.code)return new ZJ({multihash:e.multihash});if(t.code===BJ.code){if(36===t.digest.length)return new XJ({multihash:e.multihash});if(37===t.digest.length)return new $J({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(oJ.decode(e))}throw new Error("Supplied PeerID CID is invalid")}var rZ=Symbol.for("@libp2p/topology");var nZ,aZ=function(){},iZ=function(e){function t(e){var r,n,a,i;Cn(this,t),this.min=null!==(r=e.min)&&void 0!==r?r:0,this.max=null!==(n=e.max)&&void 0!==n?n:1/0,this.peers=new Set,this.onConnect=null!==(a=e.onConnect)&&void 0!==a?a:aZ,this.onDisconnect=null!==(i=e.onDisconnect)&&void 0!==i?i:aZ}return Dn(t,[{key:Symbol.toStringTag,get:function(){return rZ.toString()}},{key:rZ,get:function(){return!0}},{key:"setRegistrar",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.registrar=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(e){this.onDisconnect(e)}}]),t}();function oZ(e){return new iZ(e)}var sZ,uZ=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},cZ=function(e){Pn(r,e);var t=Un(r);function r(){var e;return Cn(this,r),e=t.apply(this,arguments),sZ.set(On(e),new Map),e}return Dn(r,[{key:"listenerCount",value:function(e){var t=uZ(this,sZ,"f").get(e);return null==t?0:t.length}},{key:"addEventListener",value:function(e,t,n){var a;Qs(Nn(r.prototype),"addEventListener",this).call(this,e,t,n);var i=uZ(this,sZ,"f").get(e);null==i&&(i=[],uZ(this,sZ,"f").set(e,i)),i.push({callback:t,once:null!==(a=!0!==n&&!1!==n&&(null===n||void 0===n?void 0:n.once))&&void 0!==a&&a})}},{key:"removeEventListener",value:function(e,t,n){Qs(Nn(r.prototype),"removeEventListener",this).call(this,e.toString(),null!==t&&void 0!==t?t:null,n);var a=uZ(this,sZ,"f").get(e);null!=a&&(a=a.filter((function(e){return e.callback!==t})),uZ(this,sZ,"f").set(e,a))}},{key:"dispatchEvent",value:function(e){var t=Qs(Nn(r.prototype),"dispatchEvent",this).call(this,e),n=uZ(this,sZ,"f").get(e.type);return null==n||(n=n.filter((function(e){return!e.once})),uZ(this,sZ,"f").set(e.type,n)),t}},{key:"safeDispatchEvent",value:function(e,t){return this.dispatchEvent(new fZ(e,t))}}]),r}(nu(EventTarget));sZ=new WeakMap;var lZ=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a;return Cn(this,r),(a=t.call(this,e,n)).detail=null===n||void 0===n?void 0:n.detail,a}return Dn(r)}(nu(Event)),fZ=null!==(nZ=globalThis.CustomEvent)&&void 0!==nZ?nZ:lZ,hZ=function(){function e(t,r,n){Cn(this,e),this.gossip=t,this.msgs=new Map,this.history=[],this.notValidatedCount=0,this.msgIdToStrFn=n;for(var a=0;a<r;a++)this.history[a]=[]}return Dn(e,[{key:"size",get:function(){return this.msgs.size}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.msgIdStr;return!this.msgs.has(n)&&(this.msgs.set(n,{message:t,validated:r,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push(jn(jn({},e),{},{topic:t.topic})),r||this.notValidatedCount++,!0)}},{key:"observeDuplicate",value:function(e,t){var r=this.msgs.get(e);r&&!r.validated&&r.originatingPeers.add(t)}},{key:"get",value:function(e){var t;return null===(t=this.msgs.get(this.msgIdToStrFn(e)))||void 0===t?void 0:t.message}},{key:"getWithIWantCount",value:function(e,t){var r,n=this.msgs.get(e);if(!n)return null;var a=(null!==(r=n.iwantCounts.get(t))&&void 0!==r?r:0)+1;return n.iwantCounts.set(t,a),{msg:n.message,count:a}}},{key:"getGossipIDs",value:function(e){for(var t=this,r=new Map,n=0;n<this.gossip;n++)this.history[n].forEach((function(n){var a=t.msgs.get(n.msgIdStr);if(a&&a.validated&&e.has(n.topic)){var i=r.get(n.topic);i||(i=[],r.set(n.topic,i)),i.push(n.msgId)}}));return r}},{key:"validate",value:function(e){var t=this.msgs.get(e);if(!t)return null;t.validated||this.notValidatedCount--;var r=t.message,n=t.originatingPeers;return t.validated=!0,t.originatingPeers=new Set,{message:r,originatingPeers:n}}},{key:"shift",value:function(){var e=this;this.history[this.history.length-1].forEach((function(t){var r=e.msgs.get(t.msgIdStr);r&&(e.msgs.delete(t.msgIdStr),r.validated||e.notValidatedCount--)})),this.history.pop(),this.history.unshift([])}},{key:"remove",value:function(e){var t=this.msgs.get(e);return t?(this.msgs.delete(e),t):null}}]),e}(),pZ=(__webpack_require__.p+"static/media/rpc.3ba5ca7bdb004060d5e2.cjs").RPC,dZ="/floodsub/1.0.0",vZ="/meshsub/1.0.0",yZ="/meshsub/1.1.0",bZ=5e3,gZ=12e4;function mZ(e){if(e.length<=1)return e;for(var t=0;t<e.length;t++){var r=Math.floor(Math.random()*Math.floor(e.length)),n=e[t];e[t]=e[r],e[r]=n}return e}function wZ(e){return kh(e,"base64")}var kZ,xZ,_Z,EZ,SZ,AZ,CZ="StrictSign",IZ="StrictNoSign";function TZ(e){switch(e){case kZ.Ignore:return EZ.Ignore;case kZ.Reject:return EZ.Reject}}function DZ(e,t){return RZ.apply(this,arguments)}function RZ(){return(RZ=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===CZ?3:e.t0===IZ?13:14;break;case 3:if(r){e.next=5;break}throw Error("Must provide PeerId");case 5:if(null!=r.privateKey){e.next=7;break}throw Error("Cannot sign message, no private key present");case 7:if(null!=r.publicKey){e.next=9;break}throw Error("Cannot sign message, no public key present");case 9:return e.next=11,xx(r.privateKey);case 11:return n=e.sent,e.abrupt("return",{type:_Z.Signing,author:r,key:r.publicKey,privateKey:n});case 13:return e.abrupt("return",{type:_Z.Anonymous});case 14:throw new Error('Unknown signature policy "'.concat(t,'"'));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.Accept="accept",e.Ignore="ignore",e.Reject="reject"}(kZ||(kZ={})),function(e){e.StrictSign="StrictSign",e.StrictNoSign="StrictNoSign"}(xZ||(xZ={})),function(e){e[e.Signing=0]="Signing",e[e.Anonymous=1]="Anonymous"}(_Z||(_Z={})),function(e){e.Error="error",e.Ignore="ignore",e.Reject="reject",e.Blacklisted="blacklisted"}(EZ||(EZ={})),function(e){e.InvalidSignature="invalid_signature",e.InvalidSeqno="invalid_seqno",e.InvalidPeerId="invalid_peerid",e.SignaturePresent="signature_present",e.SeqnoPresent="seqno_present",e.FromPresent="from_present",e.TransformFailed="transform_failed"}(SZ||(SZ={})),function(e){e.duplicate="duplicate",e.invalid="invalid",e.valid="valid"}(AZ||(AZ={}));var PZ="ERR_INVALID_PEER_SCORE_PARAMS",NZ={topics:{},topicScoreCap:10,appSpecificScore:function(){return 0},appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},LZ={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function OZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jn(jn(jn({},NZ),e),{},{topics:e.topics?Object.entries(e.topics).reduce((function(e,t){var r=Ia(t,2),n=r[0],a=r[1];return e[n]=BZ(a),e}),{}):{}})}function BZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jn(jn({},LZ),e)}function UZ(e){if(e.topicWeight<0)throw new lb("invalid topic weight; must be >= 0",PZ);if(0===e.timeInMeshQuantum)throw new lb("invalid TimeInMeshQuantum; must be non zero",PZ);if(e.timeInMeshWeight<0)throw new lb("invalid TimeInMeshWeight; must be positive (or 0 to disable)",PZ);if(0!==e.timeInMeshWeight&&e.timeInMeshQuantum<=0)throw new lb("invalid TimeInMeshQuantum; must be positive",PZ);if(0!==e.timeInMeshWeight&&e.timeInMeshCap<=0)throw new lb("invalid TimeInMeshCap; must be positive",PZ);if(e.firstMessageDeliveriesWeight<0)throw new lb("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)",PZ);if(0!==e.firstMessageDeliveriesWeight&&(e.firstMessageDeliveriesDecay<=0||e.firstMessageDeliveriesDecay>=1))throw new lb("invalid FirstMessageDeliveriesDecay; must be between 0 and 1",PZ);if(0!==e.firstMessageDeliveriesWeight&&e.firstMessageDeliveriesCap<=0)throw new lb("invalid FirstMessageDeliveriesCap; must be positive",PZ);if(e.meshMessageDeliveriesWeight>0)throw new lb("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)",PZ);if(0!==e.meshMessageDeliveriesWeight&&(e.meshMessageDeliveriesDecay<=0||e.meshMessageDeliveriesDecay>=1))throw new lb("invalid MeshMessageDeliveriesDecay; must be between 0 and 1",PZ);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesCap<=0)throw new lb("invalid MeshMessageDeliveriesCap; must be positive",PZ);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesThreshold<=0)throw new lb("invalid MeshMessageDeliveriesThreshold; must be positive",PZ);if(e.meshMessageDeliveriesWindow<0)throw new lb("invalid MeshMessageDeliveriesWindow; must be non-negative",PZ);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesActivation<1e3)throw new lb("invalid MeshMessageDeliveriesActivation; must be at least 1s",PZ);if(e.meshFailurePenaltyWeight>0)throw new lb("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)",PZ);if(0!==e.meshFailurePenaltyWeight&&(e.meshFailurePenaltyDecay<=0||e.meshFailurePenaltyDecay>=1))throw new lb("invalid MeshFailurePenaltyDecay; must be between 0 and 1",PZ);if(e.invalidMessageDeliveriesWeight>0)throw new lb("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)",PZ);if(e.invalidMessageDeliveriesDecay<=0||e.invalidMessageDeliveriesDecay>=1)throw new lb("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1",PZ)}var MZ={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function zZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jn(jn({},MZ),e)}function FZ(e,t,r,n){var a=0;Object.entries(t.topics).forEach((function(e){var t=Ia(e,2),n=t[0],i=t[1],o=r.topics[n];if(void 0!==o){var s=0;if(i.inMesh){var u=i.meshTime/o.timeInMeshQuantum;u>o.timeInMeshCap&&(u=o.timeInMeshCap),s+=u*o.timeInMeshWeight}var c=i.firstMessageDeliveries;if(c>o.firstMessageDeliveriesCap&&(c=o.firstMessageDeliveriesCap),s+=c*o.firstMessageDeliveriesWeight,i.meshMessageDeliveriesActive&&i.meshMessageDeliveries<o.meshMessageDeliveriesThreshold){var l=o.meshMessageDeliveriesThreshold-i.meshMessageDeliveries;s+=l*l*o.meshMessageDeliveriesWeight}s+=i.meshFailurePenalty*o.meshFailurePenaltyWeight,s+=i.invalidMessageDeliveries*i.invalidMessageDeliveries*o.invalidMessageDeliveriesWeight,a+=s*o.topicWeight}})),r.topicScoreCap>0&&a>r.topicScoreCap&&(a=r.topicScoreCap);var i=r.appSpecificScore(e);if(a+=i*r.appSpecificWeight,t.knownIPs.forEach((function(e){if(!r.IPColocationFactorWhitelist.has(e)){var t=n.get(e),i=t?t.size:0;if(i>r.IPColocationFactorThreshold){var o=i-r.IPColocationFactorThreshold;a+=o*o*r.IPColocationFactorWeight}}})),t.behaviourPenalty>r.behaviourPenaltyThreshold){var o=t.behaviourPenalty-r.behaviourPenaltyThreshold;a+=o*o*r.behaviourPenaltyWeight}return a}var VZ,jZ=__webpack_require__(6990);!function(e){e[e.unknown=0]="unknown",e[e.valid=1]="valid",e[e.invalid=2]="invalid",e[e.ignored=3]="ignored"}(VZ||(VZ={}));var qZ=function(){function e(){Cn(this,e),this.records=new Map,this.queue=new jZ}return Dn(e,[{key:"ensureRecord",value:function(e){var t=this.records.get(e);if(t)return t;t={status:VZ.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(e,t);var r={msgId:e,expire:Date.now()+12e4};return this.queue.push(r),t}},{key:"gc",value:function(){for(var e=Date.now(),t=this.queue.peekFront();t&&t.expire<e;)this.records.delete(t.msgId),this.queue.shift(),t=this.queue.peekFront()}},{key:"clear",value:function(){this.records.clear(),this.queue.clear()}}]),e}();function KZ(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},n=new Set;if(t<=0)return n;var a,i=Ni(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(n.size>=t)break;r(o)&&(n.add(o),e.delete(o))}}catch(eL){i.e(eL)}finally{i.f()}return n}function HZ(e,t){return KZ(e,t,(function(){return!0}))}var GZ,WZ,YZ,QZ,JZ,ZZ,XZ=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this)).getDefault=e,n}return Dn(r,[{key:"getOrDefault",value:function(e){var t=Qs(Nn(r.prototype),"get",this).call(this,e);return void 0===t&&(t=this.getDefault(),this.set(e,t)),t}}]),r}(nu(Map)),$Z=ua("libp2p:gossipsub:score"),eX=function(){function e(t,r,n){var a;Cn(this,e),this.params=t,this.metrics=r,this.peerStats=new Map,this.peerIPs=new XZ((function(){return new Set})),this.scoreCache=new Map,this.deliveryRecords=new qZ,function(e){for(var t=0,r=Object.entries(e.topics);t<r.length;t++){var n=Ia(r[t],2),a=n[0],i=n[1];try{UZ(i)}catch(o){throw new lb("invalid score parameters for topic ".concat(a,": ").concat(o.message),PZ)}}if(e.topicScoreCap<0)throw new lb("invalid topic score cap; must be positive (or 0 for no cap)",PZ);if(null===e.appSpecificScore||void 0===e.appSpecificScore)throw new lb("missing application specific score function",PZ);if(e.IPColocationFactorWeight>0)throw new lb("invalid IPColocationFactorWeight; must be negative (or 0 to disable)",PZ);if(0!==e.IPColocationFactorWeight&&e.IPColocationFactorThreshold<1)throw new lb("invalid IPColocationFactorThreshold; must be at least 1",PZ);if(e.behaviourPenaltyWeight>0)throw new lb("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)",PZ);if(0!==e.behaviourPenaltyWeight&&(e.behaviourPenaltyDecay<=0||e.behaviourPenaltyDecay>=1))throw new lb("invalid BehaviourPenaltyDecay; must be between 0 and 1",PZ);if(e.decayInterval<1e3)throw new lb("invalid DecayInterval; must be at least 1s",PZ);if(e.decayToZero<=0||e.decayToZero>=1)throw new lb("invalid DecayToZero; must be between 0 and 1",PZ)}(t),this.scoreCacheValidityMs=n.scoreCacheValidityMs,this.computeScore=null!==(a=n.computeScore)&&void 0!==a?a:FZ}return Dn(e,[{key:"size",get:function(){return this.peerStats.size}},{key:"start",value:function(){var e=this;this._backgroundInterval?$Z("Peer score already running"):(this._backgroundInterval=setInterval((function(){return e.background()}),this.params.decayInterval),$Z("started"))}},{key:"stop",value:function(){this._backgroundInterval?(clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),$Z("stopped")):$Z("Peer score already stopped")}},{key:"background",value:function(){this.refreshScores(),this.deliveryRecords.gc()}},{key:"dumpPeerScoreStats",value:function(){return Object.fromEntries(Array.from(this.peerStats.entries()).map((function(e){var t=Ia(e,2);return[t[0],t[1]]})))}},{key:"refreshScores",value:function(){var e=this,t=Date.now(),r=this.params.decayToZero;this.peerStats.forEach((function(n,a){n.connected?(Object.entries(n.topics).forEach((function(n){var a=Ia(n,2),i=a[0],o=a[1],s=e.params.topics[i];void 0!==s&&(o.firstMessageDeliveries*=s.firstMessageDeliveriesDecay,o.firstMessageDeliveries<r&&(o.firstMessageDeliveries=0),o.meshMessageDeliveries*=s.meshMessageDeliveriesDecay,o.meshMessageDeliveries<r&&(o.meshMessageDeliveries=0),o.meshFailurePenalty*=s.meshFailurePenaltyDecay,o.meshFailurePenalty<r&&(o.meshFailurePenalty=0),o.invalidMessageDeliveries*=s.invalidMessageDeliveriesDecay,o.invalidMessageDeliveries<r&&(o.invalidMessageDeliveries=0),o.inMesh&&(o.meshTime=t-o.graftTime,o.meshTime>s.meshMessageDeliveriesActivation&&(o.meshMessageDeliveriesActive=!0)))})),n.behaviourPenalty*=e.params.behaviourPenaltyDecay,n.behaviourPenalty<r&&(n.behaviourPenalty=0)):t>n.expire&&(e.removeIPsForPeer(a,n.knownIPs),e.peerStats.delete(a),e.scoreCache.delete(a))}))}},{key:"score",value:function(e){var t,r;null===(t=this.metrics)||void 0===t||t.scoreFnCalls.inc();var n=this.peerStats.get(e);if(!n)return 0;var a=Date.now(),i=this.scoreCache.get(e);if(i&&i.cacheUntil>a)return i.score;null===(r=this.metrics)||void 0===r||r.scoreFnRuns.inc();var o,s=this.computeScore(e,n,this.params,this.peerIPs),u=a+this.scoreCacheValidityMs;i?(null===(o=this.metrics)||void 0===o||o.scoreCachedDelta.observe(Math.abs(s-i.score)),i.score=s,i.cacheUntil=u):this.scoreCache.set(e,{score:s,cacheUntil:u});return s}},{key:"addPenalty",value:function(e,t,r){var n,a=this.peerStats.get(e);a&&(a.behaviourPenalty+=t,null===(n=this.metrics)||void 0===n||n.onScorePenalty(r))}},{key:"addPeer",value:function(e){var t={connected:!0,expire:0,topics:{},knownIPs:new Set,behaviourPenalty:0};this.peerStats.set(e,t)}},{key:"addIP",value:function(e,t){var r=this.peerStats.get(e);r&&r.knownIPs.add(t),this.peerIPs.getOrDefault(t).add(e)}},{key:"removeIP",value:function(e,t){var r=this.peerStats.get(e);r&&r.knownIPs.delete(t);var n=this.peerIPs.get(t);n&&(n.delete(e),0===n.size&&this.peerIPs.delete(t))}},{key:"removePeer",value:function(e){var t=this,r=this.peerStats.get(e);if(r){if(this.score(e)>0)return this.removeIPsForPeer(e,r.knownIPs),void this.peerStats.delete(e);Object.entries(r.topics).forEach((function(e){var r=Ia(e,2),n=r[0],a=r[1];a.firstMessageDeliveries=0;var i=t.params.topics[n].meshMessageDeliveriesThreshold;if(a.inMesh&&a.meshMessageDeliveriesActive&&a.meshMessageDeliveries<i){var o=i-a.meshMessageDeliveries;a.meshFailurePenalty+=o*o}a.inMesh=!1,a.meshMessageDeliveriesActive=!1})),r.connected=!1,r.expire=Date.now()+this.params.retainScore}}},{key:"graft",value:function(e,t){var r=this.peerStats.get(e);if(r){var n=this.getPtopicStats(r,t);n&&(n.inMesh=!0,n.graftTime=Date.now(),n.meshTime=0,n.meshMessageDeliveriesActive=!1)}}},{key:"prune",value:function(e,t){var r=this.peerStats.get(e);if(r){var n=this.getPtopicStats(r,t);if(n){var a=this.params.topics[t].meshMessageDeliveriesThreshold;if(n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<a){var i=a-n.meshMessageDeliveries;n.meshFailurePenalty+=i*i}n.meshMessageDeliveriesActive=!1,n.inMesh=!1}}}},{key:"validateMessage",value:function(e){this.deliveryRecords.ensureRecord(e)}},{key:"deliverMessage",value:function(e,t,r){var n=this;this.markFirstMessageDelivery(e,r);var a=this.deliveryRecords.ensureRecord(t),i=Date.now();a.status===VZ.unknown?(a.status=VZ.valid,a.validated=i,a.peers.forEach((function(t){t!==e.toString()&&n.markDuplicateMessageDelivery(t,r)}))):$Z("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",e,i-a.firstSeen,VZ[a.status])}},{key:"rejectInvalidMessage",value:function(e,t){this.markInvalidMessageDelivery(e,t)}},{key:"rejectMessage",value:function(e,t,r,n){var a=this;switch(n){case EZ.Error:return void this.markInvalidMessageDelivery(e,r);case EZ.Blacklisted:return}var i=this.deliveryRecords.ensureRecord(t);if(i.status===VZ.unknown){if(n===EZ.Ignore)return i.status=VZ.ignored,void i.peers.clear();i.status=VZ.invalid,this.markInvalidMessageDelivery(e,r),i.peers.forEach((function(e){a.markInvalidMessageDelivery(e,r)})),i.peers.clear()}else $Z("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-i.firstSeen,VZ[i.status])}},{key:"duplicateMessage",value:function(e,t,r){var n=this.deliveryRecords.ensureRecord(t);if(!n.peers.has(e))switch(n.status){case VZ.unknown:n.peers.add(e);break;case VZ.valid:n.peers.add(e),this.markDuplicateMessageDelivery(e,r,n.validated);break;case VZ.invalid:this.markInvalidMessageDelivery(e,r);case VZ.ignored:}}},{key:"markInvalidMessageDelivery",value:function(e,t){var r=this.peerStats.get(e);if(r){var n=this.getPtopicStats(r,t);n&&(n.invalidMessageDeliveries+=1)}}},{key:"markFirstMessageDelivery",value:function(e,t){var r=this.peerStats.get(e);if(r){var n=this.getPtopicStats(r,t);if(n){var a=this.params.topics[t].firstMessageDeliveriesCap;n.firstMessageDeliveries=Math.min(a,n.firstMessageDeliveries+1),n.inMesh&&(a=this.params.topics[t].meshMessageDeliveriesCap,n.meshMessageDeliveries=Math.min(a,n.meshMessageDeliveries+1))}}}},{key:"markDuplicateMessageDelivery",value:function(e,t,r){var n=this.peerStats.get(e);if(n){var a=void 0!==r?Date.now():0,i=this.getPtopicStats(n,t);if(i&&i.inMesh){var o=this.params.topics[t];if(void 0!==r){var s,u=a-r,c=u>o.meshMessageDeliveriesWindow;if(null===(s=this.metrics)||void 0===s||s.onDuplicateMsgDelivery(t,u,c),c)return}var l=o.meshMessageDeliveriesCap;i.meshMessageDeliveries=Math.min(l,i.meshMessageDeliveries+1)}}}},{key:"removeIPsForPeer",value:function(e,t){var r,n=Ni(t);try{for(n.s();!(r=n.n()).done;){var a=r.value,i=this.peerIPs.get(a);i&&(i.delete(e),0===i.size&&this.peerIPs.delete(a))}}catch(eL){n.e(eL)}finally{n.f()}}},{key:"getPtopicStats",value:function(e,t){var r=e.topics[t];return void 0!==r?r:void 0!==this.params.topics[t]?(r={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[t]=r,r):null}}]),e}(),tX=function(){function e(t,r,n){Cn(this,e),this.gossipsubIWantFollowupMs=t,this.msgIdToStrFn=r,this.metrics=n,this.promises=new Map,this.requestMsByMsg=new Map,this.requestMsByMsgExpire=10*t}return Dn(e,[{key:"size",get:function(){return this.promises.size}},{key:"requestMsByMsgSize",get:function(){return this.requestMsByMsg.size}},{key:"addPromise",value:function(e,t){var r=t[Math.floor(Math.random()*t.length)],n=this.msgIdToStrFn(r),a=this.promises.get(n);a||(a=new Map,this.promises.set(n,a));var i=Date.now();a.has(e)||(a.set(e,i+this.gossipsubIWantFollowupMs),this.metrics&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(n)||this.requestMsByMsg.set(n,i)))}},{key:"getBrokenPromises",value:function(){var e,t=this,r=Date.now(),n=new Map,a=0;return this.promises.forEach((function(e,i){e.forEach((function(t,i){var o;t<r&&(n.set(i,(null!==(o=n.get(i))&&void 0!==o?o:0)+1),e.delete(i),a++)})),e.size||t.promises.delete(i)})),null===(e=this.metrics)||void 0===e||e.iwantPromiseBroken.inc(a),n}},{key:"deliverMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.trackMessage(e);var r=this.promises.get(e);r&&(this.promises.delete(e),this.metrics&&(this.metrics.iwantPromiseResolved.inc(1),t&&this.metrics.iwantPromiseResolvedFromDuplicate.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(r.size)))}},{key:"rejectMessage",value:function(e,t){this.trackMessage(e),t!==EZ.Error&&this.promises.delete(e)}},{key:"clear",value:function(){this.promises.clear()}},{key:"prune",value:function(){var e,t,r=Date.now()-this.requestMsByMsgExpire,n=0,a=Ni(this.requestMsByMsg.entries());try{for(a.s();!(t=a.n()).done;){var i=Ia(t.value,2),o=i[0];if(!(i[1]<r))break;this.requestMsByMsg.delete(o),n++}}catch(eL){a.e(eL)}finally{a.f()}null===(e=this.metrics)||void 0===e||e.iwantMessagePruned.inc(n)}},{key:"trackMessage",value:function(e){if(this.metrics){var t=this.requestMsByMsg.get(e);void 0!==t&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-t)/1e3),this.requestMsByMsg.delete(e))}}}]),e}(),rX=function(){function e(t){Cn(this,e),this.entries=new Map,this.validityMs=t.validityMs}return Dn(e,[{key:"size",get:function(){return this.entries.size}},{key:"put",value:function(e,t){return!!this.entries.has(e)||(this.entries.set(e,{value:t,validUntilMs:Date.now()+this.validityMs}),!1)}},{key:"prune",value:function(){var e,t=Date.now(),r=Ni(this.entries.entries());try{for(r.s();!(e=r.n()).done;){var n=Ia(e.value,2),a=n[0];if(!(n[1].validUntilMs<t))break;this.entries.delete(a)}}catch(eL){r.e(eL)}finally{r.f()}}},{key:"has",value:function(e){return this.entries.has(e)}},{key:"get",value:function(e){var t=this.entries.get(e);return t&&t.validUntilMs>=Date.now()?t.value:void 0}},{key:"clear",value:function(){this.entries.clear()}}]),e}();function nX(e,t,r){return{protocolsEnabled:e.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:e.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:e.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:e.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEvents:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_total",help:"Number of times we include peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),meshPeerChurnEvents:e.gauge({name:"gossipsub_peer_churn_events_total",help:"Number of times we remove peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),peersPerProtocol:e.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:e.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:e.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),asyncValidationResult:e.gauge({name:"gossipsub_async_validation_result_total",help:"Message validation result for each topic",labelNames:["topic","acceptance"]}),asyncValidationMcacheHit:e.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),rpcRecvBytes:e.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:e.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:e.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:e.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:e.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:e.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:e.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:e.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:e.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcRecvNotAccepted:e.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:e.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:e.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:e.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:e.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:e.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:e.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:e.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:e.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:e.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:e.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeers:e.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),msgPublishPeersByGroup:e.gauge({name:"gossipsub_msg_publish_peers_by_group",help:"Total count of peers (by group) that we publish a msg to",labelNames:["topic","peerGroup"]}),msgPublishBytes:e.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgForwardCount:e.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:e.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:e.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedStatus:e.gauge({name:"gossipsub_msg_received_status_total",help:"Tracks distribution of recv msgs by duplicate, invalid, valid",labelNames:["topic","status"]}),msgReceivedInvalid:e.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["topic","error"]}),duplicateMsgDeliveryDelay:e.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*r.maxMeshMessageDeliveriesWindowSec,.5*r.maxMeshMessageDeliveriesWindowSec,1*r.maxMeshMessageDeliveriesWindowSec,2*r.maxMeshMessageDeliveriesWindowSec,4*r.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:e.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),scoreFnCalls:e.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:e.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:e.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:e.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:e.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores",labelNames:["topic","p"]}),scoreWeights:e.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:e.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:e.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:e.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*r.behaviourPenaltyThreshold,.5*r.behaviourPenaltyThreshold,1*r.behaviourPenaltyThreshold,2*r.behaviourPenaltyThreshold,4*r.behaviourPenaltyThreshold]}),ihaveRcvIgnored:e.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:e.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:e.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:e.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:e.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:e.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:e.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedFromDuplicate:e.gauge({name:"gossipsub_iwant_promise_resolved_from_duplicate_total",help:"Total count of resolved IWANT promises from duplicate messages"}),iwantPromiseResolvedPeers:e.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:e.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantMessagePruned:e.gauge({name:"gossipsub_iwant_message_pruned",help:"Total count of pruned IWANT messages"}),iwantPromiseDeliveryTime:e.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*r.gossipPromiseExpireSec,1*r.gossipPromiseExpireSec,2*r.gossipPromiseExpireSec,4*r.gossipPromiseExpireSec]}),cacheSize:e.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:e.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),mcacheNotValidatedCount:e.gauge({name:"gossipsub_mcache_not_validated_count",help:"Current mcache msg count not validated"}),fastMsgIdCacheCollision:e.gauge({name:"gossipsub_fastmsgid_cache_collision_total",help:"Total count of key collisions on fastmsgid cache put"}),newConnectionCount:e.gauge({name:"gossipsub_new_connection_total",help:"Total new connection by status",labelNames:["status"]}),topicStrToLabel:t,toTopic:function(e){var t;return null!==(t=this.topicStrToLabel.get(e))&&void 0!==t?t:e},onJoin:function(e){this.topicSubscriptionStatus.set({topicStr:e},1),this.meshPeerCounts.set({topicStr:e},0)},onLeave:function(e){this.topicSubscriptionStatus.set({topicStr:e},0),this.meshPeerCounts.set({topicStr:e},0)},onAddToMesh:function(e,t,r){var n=this.toTopic(e);this.meshPeerInclusionEvents.inc({topic:n,reason:t},r)},onRemoveFromMesh:function(e,t,r){var n=this.toTopic(e);this.meshPeerChurnEvents.inc({topic:n,reason:t},r)},onReportValidationMcacheHit:function(e){this.asyncValidationMcacheHit.inc({hit:e?"hit":"miss"})},onReportValidation:function(e,t){var r=this.toTopic(e);this.asyncValidationResult.inc({topic:r,acceptance:t})},onScorePenalty:function(e){this.scoringPenalties.inc({penalty:e},1)},onIhaveRcv:function(e,t,r){var n=this.toTopic(e);this.ihaveRcvMsgids.inc({topic:n},t),this.ihaveRcvNotSeenMsgids.inc({topic:n},r)},onIwantRcv:function(e,t){var r,n=Ni(e);try{for(n.s();!(r=n.n()).done;){var a=Ia(r.value,2),i=a[0],o=a[1],s=this.toTopic(i);this.iwantRcvMsgids.inc({topic:s},o)}}catch(eL){n.e(eL)}finally{n.f()}this.iwantRcvDonthaveMsgids.inc(t)},onForwardMsg:function(e,t){var r=this.toTopic(e);this.msgForwardCount.inc({topic:r},1),this.msgForwardPeers.inc({topic:r},t)},onPublishMsg:function(e,t,r,n){var a=this.toTopic(e);this.msgPublishCount.inc({topic:a},1),this.msgPublishBytes.inc({topic:a},r*n),this.msgPublishPeers.inc({topic:a},r),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"direct"},t.direct),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"floodsub"},t.floodsub),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"mesh"},t.mesh),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"fanout"},t.fanout)},onMsgRecvPreValidation:function(e){var t=this.toTopic(e);this.msgReceivedPreValidation.inc({topic:t},1)},onMsgRecvResult:function(e,t){var r=this.toTopic(e);this.msgReceivedStatus.inc({topic:r,status:t})},onMsgRecvInvalid:function(e,t){var r=this.toTopic(e),n=t.reason===EZ.Error?t.error:t.reason;this.msgReceivedInvalid.inc({topic:r,error:n},1)},onDuplicateMsgDelivery:function(e,t,r){if(this.duplicateMsgDeliveryDelay.observe(t/1e3),r){var n=this.toTopic(e);this.duplicateMsgLateDelivery.inc({topic:n},1)}},onRpcRecv:function(e,t){this.rpcRecvBytes.inc(t),this.rpcRecvCount.inc(1),e.subscriptions&&this.rpcRecvSubscription.inc(e.subscriptions.length),e.messages&&this.rpcRecvMessage.inc(e.messages.length),e.control&&(this.rpcRecvControl.inc(1),e.control.ihave&&this.rpcRecvIHave.inc(e.control.ihave.length),e.control.iwant&&this.rpcRecvIWant.inc(e.control.iwant.length),e.control.graft&&this.rpcRecvGraft.inc(e.control.graft.length),e.control.prune&&this.rpcRecvPrune.inc(e.control.prune.length))},onRpcSent:function(e,t){if(this.rpcSentBytes.inc(t),this.rpcSentCount.inc(1),e.subscriptions&&this.rpcSentSubscription.inc(e.subscriptions.length),e.messages&&this.rpcSentMessage.inc(e.messages.length),e.control){var r,n,a,i,o,s,u,c,l=null!==(r=null===(n=e.control.ihave)||void 0===n?void 0:n.length)&&void 0!==r?r:0,f=null!==(a=null===(i=e.control.iwant)||void 0===i?void 0:i.length)&&void 0!==a?a:0,h=null!==(o=null===(s=e.control.graft)||void 0===s?void 0:s.length)&&void 0!==o?o:0,p=null!==(u=null===(c=e.control.prune)||void 0===c?void 0:c.length)&&void 0!==u?u:0;l>0&&this.rpcSentIHave.inc(l),f>0&&this.rpcSentIWant.inc(f),h>0&&this.rpcSentGraft.inc(h),p>0&&this.rpcSentPrune.inc(p),(l>0||f>0||h>0||p>0)&&this.rpcSentControl.inc(1)}},registerScores:function(e,t){var r,n=0,a=0,i=0,o=0,s=Ni(e);try{for(s.s();!(r=s.n()).done;){var u=r.value;u>=t.graylistThreshold&&n++,u>=t.publishThreshold&&a++,u>=t.gossipThreshold&&i++,u>=0&&o++}}catch(eL){s.e(eL)}finally{s.f()}this.peersByScoreThreshold.set({threshold:ZZ.graylist},n),this.peersByScoreThreshold.set({threshold:ZZ.publish},a),this.peersByScoreThreshold.set({threshold:ZZ.gossip},i),this.peersByScoreThreshold.set({threshold:ZZ.mesh},o),this.score.set(e)},registerScoreWeights:function(e){var t,r=Ni(e.byTopic);try{for(r.s();!(t=r.n()).done;){var n=Ia(t.value,2),a=n[0],i=n[1];this.scoreWeights.set({topic:a,p:"p1"},i.p1w),this.scoreWeights.set({topic:a,p:"p2"},i.p2w),this.scoreWeights.set({topic:a,p:"p3"},i.p3w),this.scoreWeights.set({topic:a,p:"p3b"},i.p3bw),this.scoreWeights.set({topic:a,p:"p4"},i.p4w)}}catch(eL){r.e(eL)}finally{r.f()}this.scoreWeights.set({p:"p5"},e.p5w),this.scoreWeights.set({p:"p6"},e.p6w),this.scoreWeights.set({p:"p7"},e.p7w)},registerScorePerMesh:function(e,t){var r=this,n=new Map;e.forEach((function(e,t){var a,i=null!==(a=r.topicStrToLabel.get(t))&&void 0!==a?a:"unknown",o=n.get(i);o||(o=new Set,n.set(i,o)),e.forEach((function(e){var t;return null===(t=o)||void 0===t?void 0:t.add(e)}))}));var a,i=Ni(n);try{var o=function(){var e=Ia(a.value,2),n=e[0],i=e[1],o=[];i.forEach((function(e){var r;o.push(null!==(r=t.get(e))&&void 0!==r?r:0)})),r.scorePerMesh.set({topic:n},o)};for(i.s();!(a=i.n()).done;)o()}catch(eL){i.e(eL)}finally{i.f()}}}}!function(e){e.forward="forward",e.publish="publish"}(GZ||(GZ={})),function(e){e.Fanout="fanout",e.Random="random",e.Subscribed="subscribed",e.Outbound="outbound",e.NotEnough="not_enough",e.Opportunistic="opportunistic"}(WZ||(WZ={})),function(e){e.Dc="disconnected",e.BadScore="bad_score",e.Prune="prune",e.Unsub="unsubscribed",e.Excess="excess"}(YZ||(YZ={})),function(e){e.GraftBackoff="graft_backoff",e.BrokenPromise="broken_promise",e.MessageDeficit="message_deficit",e.IPColocation="IP_colocation"}(QZ||(QZ={})),function(e){e.LowScore="low_score",e.MaxIhave="max_ihave",e.MaxIasked="max_iasked"}(JZ||(JZ={})),function(e){e.graylist="graylist",e.publish="publish",e.gossip="gossip",e.mesh="mesh"}(ZZ||(ZZ={}));__webpack_require__(3835);var aX=__webpack_require__(5517),iX={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function oX(e,t,r,n,a){if("sha1"!==a&&"sha2-256"!==a&&"sha2-512"!==a){var i=Object.keys(iX).join(" / ");throw ca(new Error("Hash '".concat(a,"' is unknown or not supported. Must be ").concat(i)),"ERR_UNSUPPORTED_HASH_TYPE")}var o=aX(e,t,r,n,iX[a]);return sg.encode64(o,null)}var sX=Bf("libp2p-pubsub:");function uX(e,t,r,n){return cX.apply(this,arguments)}function cX(){return cX=An(En().mark((function e(t,r,n,a){var i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===_Z.Signing?3:e.t0===_Z.Anonymous?11:12;break;case 3:return i={from:t.author.toBytes(),data:a,seqno:iw(8),topic:r,signature:void 0,key:void 0},o=ld([sX,pZ.Message.encode(i).finish()]),e.next=7,t.privateKey.sign(o);case 7:return i.signature=e.sent,i.key=t.key,s={type:"signed",from:t.author,data:n,sequenceNumber:BigInt("0x".concat(kh(i.seqno,"base16"))),topic:r,signature:i.signature,key:i.key},e.abrupt("return",{raw:i,msg:s});case 11:return e.abrupt("return",{raw:{from:void 0,data:a,seqno:void 0,topic:r,signature:void 0,key:void 0},msg:{type:"unsigned",data:n,topic:r}});case 12:case"end":return e.stop()}}),e)}))),cX.apply(this,arguments)}function lX(e,t){return fX.apply(this,arguments)}function fX(){return fX=An(En().mark((function e(t,r){var n,a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===IZ?3:e.t0===CZ?10:41;break;case 3:if(null==r.signature){e.next=5;break}return e.abrupt("return",{valid:!1,error:SZ.SignaturePresent});case 5:if(null==r.seqno){e.next=7;break}return e.abrupt("return",{valid:!1,error:SZ.SeqnoPresent});case 7:if(null==r.key){e.next=9;break}return e.abrupt("return",{valid:!1,error:SZ.FromPresent});case 9:return e.abrupt("return",{valid:!0,message:{type:"unsigned",topic:r.topic,data:null!==(n=r.data)&&void 0!==n?n:new Uint8Array(0)}});case 10:if(null!=r.seqno){e.next=12;break}return e.abrupt("return",{valid:!1,error:SZ.InvalidSeqno});case 12:if(8===r.seqno.length){e.next=14;break}return e.abrupt("return",{valid:!1,error:SZ.InvalidSeqno});case 14:if(null!=r.signature){e.next=16;break}return e.abrupt("return",{valid:!1,error:SZ.InvalidSignature});case 16:if(null!=r.from){e.next=18;break}return e.abrupt("return",{valid:!1,error:SZ.InvalidPeerId});case 18:e.prev=18,o=tZ(r.from),e.next=25;break;case 22:return e.prev=22,e.t1=e.catch(18),e.abrupt("return",{valid:!1,error:SZ.InvalidPeerId});case 25:if(!r.key){e.next=31;break}if(s=wx(r.key),void 0===o.publicKey||Pd(s.bytes,o.publicKey)){e.next=29;break}return e.abrupt("return",{valid:!1,error:SZ.InvalidPeerId});case 29:e.next=34;break;case 31:if(null!=o.publicKey){e.next=33;break}return e.abrupt("return",{valid:!1,error:SZ.InvalidPeerId});case 33:s=wx(o.publicKey);case 34:return u={from:r.from,data:r.data,seqno:r.seqno,topic:r.topic,signature:void 0,key:void 0},c=ld([sX,pZ.Message.encode(u).finish()]),e.next=38,s.verify(c,r.signature);case 38:if(e.sent){e.next=40;break}return e.abrupt("return",{valid:!1,error:SZ.InvalidSignature});case 40:return e.abrupt("return",{valid:!0,message:{type:"signed",from:o,data:null!==(a=r.data)&&void 0!==a?a:new Uint8Array(0),sequenceNumber:BigInt("0x".concat(kh(r.seqno,"base16"))),topic:r.topic,signature:r.signature,key:null!==(i=r.key)&&void 0!==i?i:kx(s)}});case 41:case"end":return e.stop()}}),e,null,[[18,22]])}))),fX.apply(this,arguments)}new Uint8Array(0);var hX=function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},pX=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=dX;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},dX=Math.pow(2,31);var vX=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var yX=Math.pow(2,7),bX=Math.pow(2,14),gX=Math.pow(2,21),mX=Math.pow(2,28),wX=Math.pow(2,35),kX=Math.pow(2,42),xX=Math.pow(2,49),_X=Math.pow(2,56),EX=Math.pow(2,63),SX={encode:pX,decode:vX,encodingLength:function(e){return e<yX?1:e<bX?2:e<gX?3:e<mX?4:e<wX?5:e<kX?6:e<xX?7:e<_X?8:e<EX?9:10}},AX=SX,CX=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return AX.encode(e,t,r),t},IX=function(e){return AX.encodingLength(e)},TX=function(e,t){var r=t.byteLength,n=IX(e),a=n+IX(r),i=new Uint8Array(a+r);return CX(e,i,0),CX(r,i,n),i.set(t,a),new DX(e,r,t,i)},DX=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),RX=function(e){var t=e.name,r=e.code,n=e.encode;return new PX(t,r,n)},PX=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?TX(this.code,r):r.then((function(e){return TX(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),NX=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},LX=RX({name:"sha2-256",code:18,encode:NX("SHA-256")}),OX=RX({name:"sha2-512",code:19,encode:NX("SHA-512")});var BX=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},UX=BX,MX=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),zX=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return VX(this,e)}}]),e}(),FX=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return VX(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),VX=function(e,t){return new FX(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},jX=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new MX(t,r,n),this.decoder=new zX(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),qX=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new jX(t,r,n,a)},KX=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=UX(n,r),i=a.encode,o=a.decode;return qX({prefix:t,name:r,encode:i,decode:function(e){return hX(o(e))}})},HX=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return qX({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},GX=KX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),WX=KX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),YX=HX({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),QX=HX({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),JX=HX({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ZX=HX({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),XX=HX({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$X=HX({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),e$=HX({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),t$=HX({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),r$=HX({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),n$=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),qX({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}})),a$=HX({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),i$=HX({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),o$=KX({prefix:"9",name:"base10",alphabet:"0123456789"}),s$=HX({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),u$=HX({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),c$=KX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),l$=KX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),f$=HX({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),h$=HX({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),p$=HX({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),d$=HX({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),v$=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),y$=v$.reduce((function(e,t,r){return e[r]=t,e}),[]),b$=v$.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var g$=qX({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=y$[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=b$[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),m$=hX,w$={code:0,name:"identity",encode:m$,digest:function(e){return TX(0,m$(e))}},k$="raw",x$=85,_$=function(e){return hX(e)},E$=function(e){return hX(e)},S$=new TextEncoder,A$=new TextDecoder,C$="json",I$=512,T$=function(e){return S$.encode(JSON.stringify(e))},D$=function(e){return JSON.parse(A$.decode(e))},R$=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},qe),Ke),He),Ge),We),je),Ye),Ve),Qe),Je);jn(jn({},Fe),Ze),Symbol.for("nodejs.util.inspect.custom"),Object.values(R$).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),R$.identity.decoder);function P$(e){if("signed"!==e.type)throw new Error("expected signed message type");if(null==e.sequenceNumber)throw Error("missing seqno field");return function(e,t){var r=Bf(t.toString(16).padStart(16,"0"),"base16"),n=new Uint8Array(e.length+r.length);return n.set(e,0),n.set(r,e.length),n}(e.from.toBytes(),e.sequenceNumber)}function N$(e){return L$.apply(this,arguments)}function L$(){return(L$=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,NJ.encode(t.data);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O$(e,t,r,n,a){var i=0,o=new Map;if(Object.entries(t.topics).forEach((function(e){var t,n=Ia(e,2),s=n[0],u=n[1],c=null!==(t=a.get(s))&&void 0!==t?t:"unknown",l=r.topics[s];if(void 0!==l){var f=o.get(c);f||(f={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},o.set(c,f));var h=0,p=0,d=0,v=0,y=0;if(u.inMesh)h+=Math.max(u.meshTime/l.timeInMeshQuantum,l.timeInMeshCap)*l.timeInMeshWeight;var b=u.firstMessageDeliveries;if(b>l.firstMessageDeliveriesCap&&(b=l.firstMessageDeliveriesCap),p+=b*l.firstMessageDeliveriesWeight,u.meshMessageDeliveriesActive&&u.meshMessageDeliveries<l.meshMessageDeliveriesThreshold){var g=l.meshMessageDeliveriesThreshold-u.meshMessageDeliveries;d+=g*g*l.meshMessageDeliveriesWeight}v+=u.meshFailurePenalty*l.meshFailurePenaltyWeight,y+=u.invalidMessageDeliveries*u.invalidMessageDeliveries*l.invalidMessageDeliveriesWeight,i+=(h+p+d+v+y)*l.topicWeight,f.p1w+=h,f.p2w+=p,f.p3w+=d,f.p3bw+=v,f.p4w+=y}})),r.topicScoreCap>0&&i>r.topicScoreCap){i=r.topicScoreCap;var s,u=r.topicScoreCap/i,c=Ni(o.values());try{for(c.s();!(s=c.n()).done;){var l=s.value;l.p1w*=u,l.p2w*=u,l.p3w*=u,l.p3bw*=u,l.p4w*=u}}catch(eL){c.e(eL)}finally{c.f()}}var f=0,h=0,p=0;return f+=r.appSpecificScore(e)*r.appSpecificWeight,t.knownIPs.forEach((function(e){if(!r.IPColocationFactorWhitelist.has(e)){var t=n.get(e),a=t?t.size:0;if(a>r.IPColocationFactorThreshold){var i=a-r.IPColocationFactorThreshold;h+=i*i*r.IPColocationFactorWeight}}})),p+=t.behaviourPenalty*t.behaviourPenalty*r.behaviourPenaltyWeight,{byTopic:o,p5w:f,p6w:h,p7w:p,score:i+=f+h+p}}var B$=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a;return Cn(this,r),(a=t.call(this,null!==e&&void 0!==e?e:"The operation was aborted")).type="aborted",a.code=null!==n&&void 0!==n?n:"ABORT_ERR",a}return Dn(r)}(nu(Error));function U$(e,t,r){var n=null!==r&&void 0!==r?r:{},a=function(e){if(null!=e){if("function"===typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"===typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"===typeof e.next)return e}throw new Error("argument is not an iterator or iterable")}(e);function i(){return i=Hn(En().mark((function r(){var i,o,s,u,c,l,f,h;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=function(){null!=i&&i()},t.addEventListener("abort",o);case 2:if(s=void 0,r.prev=4,!t.aborted){r.next=8;break}throw u=n.abortMessage,c=n.abortCode,new B$(u,c);case 8:return l=new Promise((function(e,t){i=function(){var e=n.abortMessage,r=n.abortCode;t(new B$(e,r))}})),r.next=11,Mf(Promise.race([l,a.next()]));case 11:s=r.sent,i=null,r.next=26;break;case 15:if(r.prev=15,r.t0=r.catch(4),t.removeEventListener("abort",o),!(f="aborted"===r.t0.type&&t.aborted)||null==n.onAbort){r.next=22;break}return r.next=22,Mf(n.onAbort(e));case 22:if("function"===typeof a.return)try{(h=a.return())instanceof Promise&&h.catch((function(e){null!=n.onReturnError&&n.onReturnError(e)}))}catch(eL){null!=n.onReturnError&&n.onReturnError(eL)}if(!f||!0!==n.returnOnAbort){r.next=25;break}return r.abrupt("return");case 25:throw r.t0;case 26:if(!0!==s.done){r.next=28;break}return r.abrupt("break",32);case 28:return r.next=30,s.value;case 30:r.next=2;break;case 32:t.removeEventListener("abort",o);case 33:case"end":return r.stop()}}),r,null,[[4,15]])}))),i.apply(this,arguments)}return function(){return i.apply(this,arguments)}()}function M$(e,t,r){return function(n){return e(U$(n,t,r))}}function z$(e,t,r){return{sink:M$(e.sink,t,jn(jn({},r),{},{onAbort:void 0})),source:U$(e.source,t,r)}}var F$=function e(t){var r=cQ.encodingLength(t),n=function(e){var t;return null!=(null===globalThis||void 0===globalThis||null===(t=globalThis.Buffer)||void 0===t?void 0:t.allocUnsafe)?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}(r);return cQ.encode(t,n),e.bytes=r,n};function V$(e){var t,r,n=null!==(r=(e=null!==(t=e)&&void 0!==t?t:{}).lengthEncoder)&&void 0!==r?r:F$,a=function(){var e=Hn(En().mark((function e(t){var r,a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,a=!1,e.prev=2,o=zn(t);case 4:return e.next=6,Mf(o.next());case 6:if(!(r=!(s=e.sent).done)){e.next=24;break}if(u=s.value,!((c=n(u.byteLength))instanceof Uint8Array)){e.next=14;break}return e.next=12,c;case 12:e.next=15;break;case 14:return e.delegateYield(Cb(zn(c)),"t0",15);case 15:if(!(u instanceof Uint8Array)){e.next=20;break}return e.next=18,u;case 18:e.next=21;break;case 20:return e.delegateYield(Cb(zn(u)),"t1",21);case 21:r=!1,e.next=4;break;case 24:e.next=30;break;case 26:e.prev=26,e.t2=e.catch(2),a=!0,i=e.t2;case 30:if(e.prev=30,e.prev=31,!r||null==o.return){e.next=35;break}return e.next=35,Mf(o.return());case 35:if(e.prev=35,!a){e.next=38;break}throw i;case 38:return e.finish(35);case 39:return e.finish(30);case 40:case"end":return e.stop()}}),e,null,[[2,26,30,40],[31,,35,39]])})));return function(t){return e.apply(this,arguments)}}();return a}F$.bytes=0,V$.single=function(e,t){var r,n,a=null!==(n=(t=null!==(r=t)&&void 0!==r?r:{}).lengthEncoder)&&void 0!==n?n:F$;return new ST(a(e.byteLength),e)};var j$;!function(e){e[e.LENGTH=0]="LENGTH",e[e.DATA=1]="DATA"}(j$||(j$={}));var q$=function e(t){var r=cQ.decode(t);return e.bytes=cQ.encodingLength(r),r};function K$(e){var t=function(){var t=Hn(En().mark((function t(r){var n,a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=new ST,s=j$.LENGTH,u=-1,c=null!==(n=null===e||void 0===e?void 0:e.lengthDecoder)&&void 0!==n?n:q$,l=null!==(a=null===e||void 0===e?void 0:e.maxLengthLength)&&void 0!==a?a:8,f=null!==(i=null===e||void 0===e?void 0:e.maxDataLength)&&void 0!==i?i:4194304,h=!1,p=!1,t.prev=8,v=zn(r);case 10:return t.next=12,Mf(v.next());case 12:if(!(h=!(y=t.sent).done)){t.next=50;break}b=y.value,o.append(b);case 15:if(!(o.byteLength>0)){t.next=47;break}if(s!==j$.LENGTH){t.next=36;break}if(t.prev=17,!((u=c(o))<0)){t.next=21;break}throw ca(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");case 21:if(!(u>f)){t.next=23;break}throw ca(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");case 23:g=c.bytes,o.consume(g),null!=(null===e||void 0===e?void 0:e.onLength)&&e.onLength(u),s=j$.DATA,t.next=36;break;case 29:if(t.prev=29,t.t0=t.catch(17),!(t.t0 instanceof RangeError)){t.next=35;break}if(!(o.byteLength>l)){t.next=34;break}throw ca(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");case 34:return t.abrupt("break",47);case 35:throw t.t0;case 36:if(s!==j$.DATA){t.next=45;break}if(!(o.byteLength<u)){t.next=39;break}return t.abrupt("break",47);case 39:return m=o.sublist(0,u),o.consume(u),null!=(null===e||void 0===e?void 0:e.onData)&&e.onData(m),t.next=44,m;case 44:s=j$.LENGTH;case 45:t.next=15;break;case 47:h=!1,t.next=10;break;case 50:t.next=56;break;case 52:t.prev=52,t.t1=t.catch(8),p=!0,d=t.t1;case 56:if(t.prev=56,t.prev=57,!h||null==v.return){t.next=61;break}return t.next=61,Mf(v.return());case 61:if(t.prev=61,!p){t.next=64;break}throw d;case 64:return t.finish(61);case 65:return t.finish(56);case 66:if(!(o.byteLength>0)){t.next=68;break}throw ca(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF");case 68:case"end":return t.stop()}}),t,null,[[8,52,56,66],[17,29],[57,,61,65]])})));return function(e){return t.apply(this,arguments)}}();return t}q$.bytes=0,K$.fromReader=function(e,t){var r=1,n=Hn(En().mark((function t(){var n,a,i;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,Mf(e.next(r));case 4:if(n=t.sent,a=n.done,i=n.value,!0!==a){t.next=9;break}return t.abrupt("return");case 9:if(null==i){t.next=12;break}return t.next=12,i;case 12:t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(1),"ERR_UNDER_READ"!==t.t0.code){t.next=18;break}return t.abrupt("return",{done:!0,value:null});case 18:throw t.t0;case 19:return t.prev=19,r=1,t.finish(19);case 22:t.next=0;break;case 24:case"end":return t.stop()}}),t,null,[[1,14,19,22]])})))();return K$(jn(jn({},null!==t&&void 0!==t?t:{}),{},{onLength:function(e){r=e}}))(n)};var H$,G$=function(){function e(t,r,n){var a;Cn(this,e),this.rawStream=t,this.pushable=pS({objectMode:!1}),this.closeController=new AbortController,this.maxBufferSize=null!==(a=n.maxBufferSize)&&void 0!==a?a:1/0,TS(U$(this.pushable,this.closeController.signal,{returnOnAbort:!0}),V$(),this.rawStream).catch(r)}return Dn(e,[{key:"protocol",get:function(){return this.rawStream.stat.protocol}},{key:"push",value:function(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error("OutboundStream buffer full, size > ".concat(this.maxBufferSize));this.pushable.push(e)}},{key:"close",value:function(){this.closeController.abort(),this.pushable.return(),this.rawStream.close()}}]),e}(),W$=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Cn(this,e),this.rawStream=t,this.closeController=new AbortController,this.source=U$(TS(this.rawStream,K$(r)),this.closeController.signal,{returnOnAbort:!0})}return Dn(e,[{key:"close",value:function(){this.closeController.abort(),this.rawStream.close()}}]),e}(),Y$=__webpack_require__(7188),Q$={maxSubscriptions:1/0,maxMessages:1/0,maxIhaveMessageIDs:1/0,maxIwantMessageIDs:1/0,maxControlMessages:1/0,maxPeerInfos:1/0};function J$(e,t){t=jn({},t);for(var r=Y$.Reader.create(e),n=e.length,a=void 0===n?r.len:r.pos+n,i={};r.pos<a;){var o=r.uint32();switch(o>>>3){case 1:i.subscriptions&&i.subscriptions.length||(i.subscriptions=[]),i.subscriptions.length<t.maxSubscriptions?i.subscriptions.push(Z$(r,r.uint32())):r.skipType(7&o);break;case 2:i.messages&&i.messages.length||(i.messages=[]),i.messages.length<t.maxMessages?i.messages.push(X$(r,r.uint32())):r.skipType(7&o);break;case 3:i.control=$$(r,r.uint32(),t);break;default:r.skipType(7&o)}}return i}function Z$(e,t){for(var r=void 0===t?e.len:e.pos+t,n={};e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.subscribe=e.bool();break;case 2:n.topic=e.string();break;default:e.skipType(7&a)}}return n}function X$(e,t){for(var r=void 0===t?e.len:e.pos+t,n={};e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.from=e.bytes();break;case 2:n.data=e.bytes();break;case 3:n.seqno=e.bytes();break;case 4:n.topic=e.string();break;case 5:n.signature=e.bytes();break;case 6:n.key=e.bytes();break;default:e.skipType(7&a)}}if(!n.topic)throw Error("missing required 'topic'");return n}function $$(e,t,r){for(var n=void 0===t?e.len:e.pos+t,a={};e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:a.ihave&&a.ihave.length||(a.ihave=[]),a.ihave.length<r.maxControlMessages?a.ihave.push(e1(e,e.uint32(),r)):e.skipType(7&i);break;case 2:a.iwant&&a.iwant.length||(a.iwant=[]),a.iwant.length<r.maxControlMessages?a.iwant.push(t1(e,e.uint32(),r)):e.skipType(7&i);break;case 3:a.graft&&a.graft.length||(a.graft=[]),a.graft.length<r.maxControlMessages?a.graft.push(r1(e,e.uint32())):e.skipType(7&i);break;case 4:a.prune&&a.prune.length||(a.prune=[]),a.prune.length<r.maxControlMessages?a.prune.push(n1(e,e.uint32(),r)):e.skipType(7&i);break;default:e.skipType(7&i)}}return a}function e1(e,t,r){for(var n=void 0===t?e.len:e.pos+t,a={};e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:a.topicID=e.string();break;case 2:a.messageIDs&&a.messageIDs.length||(a.messageIDs=[]),r.maxIhaveMessageIDs-- >0?a.messageIDs.push(e.bytes()):e.skipType(7&i);break;default:e.skipType(7&i)}}return a}function t1(e,t,r){for(var n=void 0===t?e.len:e.pos+t,a={};e.pos<n;){var i=e.uint32();if(i>>>3===1)a.messageIDs&&a.messageIDs.length||(a.messageIDs=[]),r.maxIwantMessageIDs-- >0?a.messageIDs.push(e.bytes()):e.skipType(7&i);else e.skipType(7&i)}return a}function r1(e,t){for(var r=void 0===t?e.len:e.pos+t,n={};e.pos<r;){var a=e.uint32();if(a>>>3===1)n.topicID=e.string();else e.skipType(7&a)}return n}function n1(e,t,r){for(var n=void 0===t?e.len:e.pos+t,a={};e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:a.topicID=e.string();break;case 2:a.peers&&a.peers.length||(a.peers=[]),r.maxPeerInfos-- >0?a.peers.push(a1(e,e.uint32())):e.skipType(7&i);break;case 3:a.backoff=e.uint64();break;default:e.skipType(7&i)}}return a}function a1(e,t){for(var r=void 0===t?e.len:e.pos+t,n={};e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.peerID=e.bytes();break;case 2:n.signedPeerRecord=e.bytes();break;default:e.skipType(7&a)}}return n}!function(e){e[e.ip4=4]="ip4",e[e.ip6=41]="ip6"}(H$||(H$={}));var i1;!function(e){e[e.started=0]="started",e[e.stopped=1]="stopped"}(i1||(i1={}));var o1=function(e){Pn(r,e);var t=Un(r);function r(e){var n,a,i,o,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Cn(this,r),(s=t.call(this)).multicodecs=[yZ,vZ],s.peers=new Set,s.streamsInbound=new Map,s.streamsOutbound=new Map,s.outboundInflightQueue=pS({objectMode:!0}),s.direct=new Set,s.floodsubPeers=new Set,s.acceptFromWhitelist=new Map,s.topics=new Map,s.subscriptions=new Set,s.mesh=new Map,s.fanout=new Map,s.fanoutLastpub=new Map,s.gossip=new Map,s.control=new Map,s.peerhave=new Map,s.iasked=new Map,s.backoff=new Map,s.outbound=new Map,s.topicValidators=new Map,s.heartbeatTicks=0,s.directPeerInitial=null,s.status={code:i1.stopped},s.heartbeatTimer=null,s.runHeartbeat=function(){var e,t=null===(e=s.metrics)||void 0===e?void 0:e.heartbeatDuration.startTimer();s.heartbeat().catch((function(e){s.log("Error running heartbeat",e)})).finally((function(){if(null!=t&&t(),s.status.code===i1.started){clearTimeout(s.status.heartbeatTimeout);var e,r=s.opts.heartbeatInterval-(Date.now()-s.status.hearbeatStartMs)%s.opts.heartbeatInterval;if(r<.25*s.opts.heartbeatInterval)r+=s.opts.heartbeatInterval,null===(e=s.metrics)||void 0===e||e.heartbeatSkipped.inc();s.status.heartbeatTimeout=setTimeout(s.runHeartbeat,r)}}))};var c=jn(jn({fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:6,Dlo:4,Dhi:12,Dscore:4,Dout:2,Dlazy:6,heartbeatInterval:1e3,fanoutTTL:6e4,mcacheLength:5,mcacheGossip:3,seenTTL:gZ,gossipsubIWantFollowupMs:3e3,prunePeers:16,pruneBackoff:6e4,graftFloodThreshold:1e4,opportunisticGraftPeers:2,opportunisticGraftTicks:60,directConnectTicks:300},u),{},{scoreParams:OZ(u.scoreParams),scoreThresholds:zZ(u.scoreThresholds)});if(s.components=e,s.decodeRpcLimits=null!==(n=c.decodeRpcLimits)&&void 0!==n?n:Q$,s.globalSignaturePolicy=null!==(a=c.globalSignaturePolicy)&&void 0!==a?a:CZ,c.fallbackToFloodsub&&s.multicodecs.push(dZ),s.log=ua(null!==(i=c.debugName)&&void 0!==i?i:"libp2p:gossipsub"),s.opts=c,s.direct=new Set(c.directPeers.map((function(e){return e.id.toString()}))),s.seenCache=new rX({validityMs:c.seenTTL}),s.publishedMessageIds=new rX({validityMs:c.seenTTL}),u.msgIdFn)s.msgIdFn=u.msgIdFn;else switch(s.globalSignaturePolicy){case CZ:s.msgIdFn=P$;break;case IZ:s.msgIdFn=N$}if(u.fastMsgIdFn&&(s.fastMsgIdFn=u.fastMsgIdFn,s.fastMsgIdCache=new rX({validityMs:c.seenTTL})),s.msgIdToStrFn=null!==(o=u.msgIdToStrFn)&&void 0!==o?o:wZ,s.mcache=u.messageCache||new hZ(c.mcacheGossip,c.mcacheLength,s.msgIdToStrFn),u.dataTransform&&(s.dataTransform=u.dataTransform),u.metricsRegister){if(!u.metricsTopicStrToLabel)throw Error("Must set metricsTopicStrToLabel with metrics");var l=Math.max.apply(Math,su(Object.values(c.scoreParams.topics).map((function(e){return e.meshMessageDeliveriesWindow}))).concat([1e3])),f=nX(u.metricsRegister,u.metricsTopicStrToLabel,{gossipPromiseExpireSec:s.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:c.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:l/1e3});f.mcacheSize.addCollect((function(){return s.onScrapeMetrics(f)}));var h,p=Ni(s.multicodecs);try{for(p.s();!(h=p.n()).done;){var d=h.value;f.protocolsEnabled.set({protocol:d},1)}}catch(eL){p.e(eL)}finally{p.f()}s.metrics=f}else s.metrics=null;return s.gossipTracer=new tX(s.opts.gossipsubIWantFollowupMs,s.msgIdToStrFn,s.metrics),s.score=new eX(s.opts.scoreParams,s.metrics,{scoreCacheValidityMs:c.heartbeatInterval}),s.maxInboundStreams=u.maxInboundStreams,s.maxOutboundStreams=u.maxOutboundStreams,s.allowedTopics=c.allowedTopics?new Set(c.allowedTopics):null,s}return Dn(r,[{key:"getPeers",value:function(){return su(this.peers.keys()).map((function(e){return eZ(e)}))}},{key:"isStarted",value:function(){return this.status.code===i1.started}},{key:"start",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isStarted()){e.next=2;break}return e.abrupt("return");case 2:return this.log("starting"),e.next=5,DZ(this.globalSignaturePolicy,this.components.peerId);case 5:return this.publishConfig=e.sent,this.outboundInflightQueue=pS({objectMode:!0}),TS(this.outboundInflightQueue,function(){var e=An(En().mark((function e(t){var r,n,a,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,o=zn(t);case 4:return e.next=6,o.next();case 6:if(!(r=!(s=e.sent).done)){e.next=13;break}return u=s.value,c=u.peerId,l=u.connection,e.next=10,i.createOutboundStream(c,l);case 10:r=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),n=!0,a=e.t0;case 19:if(e.prev=19,e.prev=20,!r||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!n){e.next=27;break}throw a;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return i.log.error("outbound inflight queue error",e)})),e.next=10,Promise.all(this.opts.directPeers.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.components.peerStore.addressBook.add(t.id,t.addrs);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:return t=this.components.registrar,e.next=13,Promise.all(this.multicodecs.map((function(e){return t.handle(e,i.onIncomingStream.bind(i),{maxInboundStreams:i.maxInboundStreams,maxOutboundStreams:i.maxOutboundStreams})})));case 13:return r=oZ({onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this)}),e.next=16,Promise.all(this.multicodecs.map((function(e){return t.register(e,r)})));case 16:n=e.sent,a=setTimeout(this.runHeartbeat,100),this.status={code:i1.started,registrarTopologyIds:n,heartbeatTimeout:a,hearbeatStartMs:Date.now()+100},this.score.start(),this.directPeerInitial=setTimeout((function(){Promise.resolve().then(An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Array.from(i.direct).map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.connect(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).catch((function(e){i.log(e)}))}),1e3),this.log("started");case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log("stopping"),this.status.code===i1.started){e.next=3;break}return e.abrupt("return");case 3:t=this.status.registrarTopologyIds,this.status={code:i1.stopped},r=this.components.registrar,t.forEach((function(e){return r.unregister(e)})),this.outboundInflightQueue.end(),n=Ni(this.streamsOutbound.values());try{for(n.s();!(a=n.n()).done;)a.value.close()}catch(eL){n.e(eL)}finally{n.f()}this.streamsOutbound.clear(),i=Ni(this.streamsInbound.values());try{for(i.s();!(o=i.n()).done;)o.value.close()}catch(eL){i.e(eL)}finally{i.f()}this.streamsInbound.clear(),this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),this.directPeerInitial&&clearTimeout(this.directPeerInitial),this.log("stopped");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dumpPeerScoreStats",value:function(){return this.score.dumpPeerScoreStats()}},{key:"onIncomingStream",value:function(e){var t=e.stream,r=e.connection;if(this.isStarted()){var n=r.remotePeer;this.addPeer(n,r.stat.direction,r.remoteAddr),this.createInboundStream(n,t),this.outboundInflightQueue.push({peerId:n,connection:r})}}},{key:"onPeerConnected",value:function(e,t){var r;null===(r=this.metrics)||void 0===r||r.newConnectionCount.inc({status:t.stat.status}),this.isStarted()&&"OPEN"===t.stat.status&&(this.addPeer(e,t.stat.direction,t.remoteAddr),this.outboundInflightQueue.push({peerId:e,connection:t}))}},{key:"onPeerDisconnected",value:function(e){this.log("connection ended %p",e),this.removePeer(e)}},{key:"createOutboundStream",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStarted()){e.next=2;break}return e.abrupt("return");case 2:if(n=t.toString(),this.peers.has(n)){e.next=5;break}return e.abrupt("return");case 5:if(!this.streamsOutbound.has(n)){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.t0=G$,e.next=11,r.newStream(this.multicodecs);case 11:e.t1=e.sent,e.t2=function(e){return s.log.error("outbound pipe error",e)},e.t3={maxBufferSize:this.opts.maxOutboundBufferSize},i=new e.t0(e.t1,e.t2,e.t3),this.log("create outbound stream %p",t),this.streamsOutbound.set(n,i),(o=i.protocol)===dZ&&this.floodsubPeers.add(n),null===(a=this.metrics)||void 0===a||a.peersPerProtocol.inc({protocol:o},1),this.subscriptions.size>0&&(this.log("send subscriptions to",n),this.sendSubscriptions(n,Array.from(this.subscriptions),!0)),e.next=26;break;case 23:e.prev=23,e.t4=e.catch(7),this.log.error("createOutboundStream error",e.t4);case 26:case"end":return e.stop()}}),e,this,[[7,23]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createInboundStream",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStarted()){e.next=2;break}return e.abrupt("return");case 2:if(n=t.toString(),this.peers.has(n)){e.next=5;break}return e.abrupt("return");case 5:void 0!==(a=this.streamsInbound.get(n))&&(this.log("replacing existing inbound steam %s",n),a.close()),this.log("create inbound stream %s",n),i=new W$(r,{maxDataLength:this.opts.maxInboundDataLength}),this.streamsInbound.set(n,i),this.pipePeerReadStream(t,i.source).catch((function(e){return o.log(e)}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addPeer",value:function(e,t,r){var n=e.toString();if(!this.peers.has(n)){this.log("new peer %p",e),this.peers.add(n),this.score.addPeer(n);var a=function(e){var t,r=Ni(e.tuples());try{for(r.s();!(t=r.n()).done;){var n=t.value;switch(n[0]){case H$.ip4:case H$.ip6:return fd(n[0],n[1])}}}catch(eL){r.e(eL)}finally{r.f()}return null}(r);null!==a?this.score.addIP(n,a):this.log("Added peer has no IP in current address %s %s",n,r.toString()),this.outbound.has(n)||this.outbound.set(n,"outbound"===t)}}},{key:"removePeer",value:function(e){var t=e.toString();if(this.peers.has(t)){this.log("delete peer %p",e),this.peers.delete(t);var r,n=this.streamsOutbound.get(t),a=this.streamsInbound.get(t);if(n)null===(r=this.metrics)||void 0===r||r.peersPerProtocol.inc({protocol:n.protocol},-1);null===n||void 0===n||n.close(),null===a||void 0===a||a.close(),this.streamsOutbound.delete(t),this.streamsInbound.delete(t);var i,o=Ni(this.topics.values());try{for(o.s();!(i=o.n()).done;){i.value.delete(t)}}catch(eL){o.e(eL)}finally{o.f()}var s,u=Ni(this.mesh);try{for(u.s();!(s=u.n()).done;){var c,l=Ia(s.value,2),f=l[0];if(!0===l[1].delete(t))null===(c=this.metrics)||void 0===c||c.onRemoveFromMesh(f,YZ.Dc,1)}}catch(eL){u.e(eL)}finally{u.f()}var h,p=Ni(this.fanout.values());try{for(p.s();!(h=p.n()).done;){h.value.delete(t)}}catch(eL){p.e(eL)}finally{p.f()}this.floodsubPeers.delete(t),this.gossip.delete(t),this.control.delete(t),this.outbound.delete(t),this.score.removePeer(t),this.acceptFromWhitelist.delete(t)}}},{key:"started",get:function(){return this.status.code===i1.started}},{key:"getMeshPeers",value:function(e){var t=this.mesh.get(e);return t?Array.from(t):[]}},{key:"getSubscribers",value:function(e){var t=this.topics.get(e);return(t?Array.from(t):[]).map((function(e){return eZ(e)}))}},{key:"getTopics",value:function(){return Array.from(this.subscriptions)}},{key:"pipePeerReadStream",value:function(){var e=An(En().mark((function e(t,r){var n=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,TS(r,function(){var e=An(En().mark((function e(r){var a,i,o,s,u,c,l,f,h;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,i=!1,e.prev=2,s=zn(r);case 4:return e.next=6,s.next();case 6:if(!(a=!(u=e.sent).done)){e.next=26;break}if(c=u.value,e.prev=8,f=c.subarray(),h=J$(f,n.decodeRpcLimits),null===(l=n.metrics)||void 0===l||l.onRpcRecv(h,f.length),!n.opts.awaitRpcHandler){e.next=17;break}return e.next=15,n.handleReceivedRpc(t,h);case 15:e.next=18;break;case 17:n.handleReceivedRpc(t,h).catch((function(e){return n.log(e)}));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),n.log(e.t0);case 23:a=!1,e.next=4;break;case 26:e.next=32;break;case 28:e.prev=28,e.t1=e.catch(2),i=!0,o=e.t1;case 32:if(e.prev=32,e.prev=33,!a||null==s.return){e.next=37;break}return e.next=37,s.return();case 37:if(e.prev=37,!i){e.next=40;break}throw o;case 40:return e.finish(37);case 41:return e.finish(32);case 42:case"end":return e.stop()}}),e,null,[[2,28,32,42],[8,20],[33,,37,41]])})));return function(t){return e.apply(this,arguments)}}());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.handlePeerReadStreamError(e.t0,t);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"handlePeerReadStreamError",value:function(e,t){this.log.error(e),this.onPeerDisconnected(t)}},{key:"handleReceivedRpc",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.acceptFrom(t.toString())){e.next=4;break}return this.log("received message from unacceptable peer %p",t),null===(n=this.metrics)||void 0===n||n.rpcRecvNotAccepted.inc(),e.abrupt("return");case 4:if(this.log("rpc from %p",t),r.subscriptions&&r.subscriptions.length>0&&(a=[],r.subscriptions.forEach((function(e){var r=e.topic,n=!0===e.subscribe;if(null!=r){if(c.allowedTopics&&!c.allowedTopics.has(r))return;c.handleReceivedSubscription(t,r,n),a.push({topic:r,subscribe:n})}})),this.dispatchEvent(new fZ("subscription-change",{detail:{peerId:t,subscriptions:a}}))),!r.messages){e.next=28;break}i=Ni(r.messages),e.prev=8,i.s();case 10:if((o=i.n()).done){e.next=20;break}if(s=o.value,!this.allowedTopics||this.allowedTopics.has(s.topic)){e.next=14;break}return e.abrupt("continue",18);case 14:if(u=this.handleReceivedMessage(t,s).catch((function(e){return c.log(e)})),!this.opts.awaitRpcMessageHandler){e.next=18;break}return e.next=18,u;case 18:e.next=10;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(8),i.e(e.t0);case 25:return e.prev=25,i.f(),e.finish(25);case 28:if(!r.control){e.next=31;break}return e.next=31,this.handleControlMessage(t.toString(),r.control);case 31:case"end":return e.stop()}}),e,this,[[8,22,25,28]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"handleReceivedSubscription",value:function(e,t,r){this.log("subscription update from %p topic %s",e,t);var n=this.topics.get(t);null==n&&(n=new Set,this.topics.set(t,n)),r?n.add(e.toString()):n.delete(e.toString())}},{key:"handleReceivedMessage",value:function(){var e=An(En().mark((function e(t,n){var a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(a=this.metrics)||void 0===a||a.onMsgRecvPreValidation(n.topic),e.next=3,this.validateReceivedMessage(t,n);case 3:s=e.sent,null===(i=this.metrics)||void 0===i||i.onMsgRecvResult(n.topic,s.code),e.t0=s.code,e.next=e.t0===AZ.duplicate?8:e.t0===AZ.invalid?12:e.t0===AZ.valid?15:20;break;case 8:return this.score.duplicateMessage(t.toString(),s.msgIdStr,n.topic),this.gossipTracer.deliverMessage(s.msgIdStr,!0),this.mcache.observeDuplicate(s.msgIdStr,t.toString()),e.abrupt("return");case 12:return s.msgIdStr?(u=s.msgIdStr,this.score.rejectMessage(t.toString(),u,n.topic,s.reason),this.gossipTracer.rejectMessage(u,s.reason)):this.score.rejectInvalidMessage(t.toString(),n.topic),null===(o=this.metrics)||void 0===o||o.onMsgRecvInvalid(n.topic,s),e.abrupt("return");case 15:this.score.validateMessage(s.messageId.msgIdStr),this.gossipTracer.deliverMessage(s.messageId.msgIdStr),this.mcache.put(s.messageId,n,!this.opts.asyncValidation),this.subscriptions.has(n.topic)&&(this.components.peerId.equals(t)&&!this.opts.emitSelf||(Qs(Nn(r.prototype),"dispatchEvent",this).call(this,new fZ("gossipsub:message",{detail:{propagationSource:t,msgId:s.messageId.msgIdStr,msg:s.msg}})),Qs(Nn(r.prototype),"dispatchEvent",this).call(this,new fZ("message",{detail:s.msg})))),this.opts.asyncValidation||this.forwardMessage(s.messageId.msgIdStr,n,t.toString());case 20:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"validateReceivedMessage",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h,p,d,v;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null===(n=this.fastMsgIdFn)||void 0===n?void 0:n.call(this,r),!(o=void 0!==i?null===(a=this.fastMsgIdCache)||void 0===a?void 0:a.get(i):void 0)){e.next=4;break}return e.abrupt("return",{code:AZ.duplicate,msgIdStr:o});case 4:return e.next=6,lX(this.globalSignaturePolicy,r);case 6:if((s=e.sent).valid){e.next=9;break}return e.abrupt("return",{code:AZ.invalid,reason:EZ.Error,error:s.error});case 9:u=s.message,e.prev=10,this.dataTransform&&(u.data=this.dataTransform.inboundTransform(r.topic,u.data)),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(10),this.log("Invalid message, transform failed",e.t0),e.abrupt("return",{code:AZ.invalid,reason:EZ.Error,error:SZ.TransformFailed});case 18:return e.next=20,this.msgIdFn(u);case 20:if(c=e.sent,l=this.msgIdToStrFn(c),f={msgId:c,msgIdStr:l},void 0!==i&&this.fastMsgIdCache&&this.fastMsgIdCache.put(i,l)&&(null===(h=this.metrics)||void 0===h||h.fastMsgIdCacheCollision.inc()),!this.seenCache.has(l)){e.next=28;break}return e.abrupt("return",{code:AZ.duplicate,msgIdStr:l});case 28:this.seenCache.put(l);case 29:if(null==(p=this.topicValidators.get(r.topic))){e.next=44;break}return e.prev=31,e.next=34,p(t,u);case 34:d=e.sent,e.next=42;break;case 37:e.prev=37,e.t1=e.catch(31),"ERR_TOPIC_VALIDATOR_IGNORE"===(v=e.t1.code)&&(d=kZ.Ignore),d="ERR_TOPIC_VALIDATOR_REJECT"===v?kZ.Reject:kZ.Ignore;case 42:if(d===kZ.Accept){e.next=44;break}return e.abrupt("return",{code:AZ.invalid,reason:TZ(d),msgIdStr:l});case 44:return e.abrupt("return",{code:AZ.valid,messageId:f,msg:u});case 45:case"end":return e.stop()}}),e,this,[[10,14],[31,37]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getScore",value:function(e){return this.score.score(e)}},{key:"sendSubscriptions",value:function(e,t,r){this.sendRpc(e,{subscriptions:t.map((function(e){return{topic:e,subscribe:r}}))})}},{key:"handleControlMessage",value:function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r){e.next=2;break}return e.abrupt("return");case 2:if(n=r.ihave?this.handleIHave(t,r.ihave):[],a=r.iwant?this.handleIWant(t,r.iwant):[],!r.graft){e.next=10;break}return e.next=7,this.handleGraft(t,r.graft);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=[];case 11:if(i=e.t0,e.t1=r.prune,!e.t1){e.next=16;break}return e.next=16,this.handlePrune(t,r.prune);case 16:if(n.length||a.length||i.length){e.next=18;break}return e.abrupt("return");case 18:this.sendRpc(t,{messages:a,control:{iwant:n,prune:i}});case 19:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"acceptFrom",value:function(e){if(this.direct.has(e))return!0;var t=Date.now(),r=this.acceptFromWhitelist.get(e);if(r&&r.messagesAccepted<128&&r.acceptUntil>=t)return r.messagesAccepted+=1,!0;var n=this.score.score(e);return n>=0?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:t+1e3}):this.acceptFromWhitelist.delete(e),n>=this.opts.scoreThresholds.graylistThreshold}},{key:"handleIHave",value:function(e,t){var r,n,a=this;if(!t.length)return[];var i,o=this.score.score(e);if(o<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,o),null===(i=this.metrics)||void 0===i||i.ihaveRcvIgnored.inc({reason:JZ.LowScore}),[];var s,u=(null!==(r=this.peerhave.get(e))&&void 0!==r?r:0)+1;if(this.peerhave.set(e,u),u>10)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,u),null===(s=this.metrics)||void 0===s||s.ihaveRcvIgnored.inc({reason:JZ.MaxIhave}),[];var c,l=null!==(n=this.iasked.get(e))&&void 0!==n?n:0;if(l>=bZ)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,l),null===(c=this.metrics)||void 0===c||c.ihaveRcvIgnored.inc({reason:JZ.MaxIasked}),[];var f=new Map;if(t.forEach((function(e){var t,r=e.topicID,n=e.messageIDs;if(r&&n&&a.mesh.has(r)){var i=0;n.forEach((function(e){var t=a.msgIdToStrFn(e);a.seenCache.has(t)||(f.set(t,e),i++)})),null===(t=a.metrics)||void 0===t||t.onIhaveRcv(r,n.length,i)}})),!f.size)return[];var h=f.size;h+l>bZ&&(h=bZ-l),this.log("IHAVE: Asking for %d out of %d messages from %s",h,f.size,e);var p=Array.from(f.values());return mZ(p),p=p.slice(0,h),this.iasked.set(e,l+h),this.gossipTracer.addPromise(e,p),[{messageIDs:p}]}},{key:"handleIWant",value:function(e,t){var r,n=this;if(!t.length)return[];var a=this.score.score(e);if(a<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,a),[];var i=new Map,o=new Map,s=0;return t.forEach((function(t){var r=t.messageIDs;r&&r.forEach((function(t){var r,a=n.msgIdToStrFn(t),u=n.mcache.getWithIWantCount(a,e);null!=u?(o.set(u.msg.topic,1+(null!==(r=o.get(u.msg.topic))&&void 0!==r?r:0)),u.count>3?n.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,t):i.set(a,u.msg)):s++}))})),null===(r=this.metrics)||void 0===r||r.onIwantRcv(o,s),i.size?(this.log("IWANT: Sending %d messages to %s",i.size,e),Array.from(i.values())):(this.log("IWANT: Could not provide any wanted messages to %s",e),[])}},{key:"handleGraft",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],a=this.score.score(t),i=Date.now(),o=this.opts.doPX,r.forEach((function(e){var r,u,c=e.topicID;if(c){var l=s.mesh.get(c);if(l){if(!l.has(t)){if(s.direct.has(t))return s.log("GRAFT: ignoring request from direct peer %s",t),n.push(c),void(o=!1);var f=null===(r=s.backoff.get(c))||void 0===r?void 0:r.get(t);if("number"===typeof f&&i<f){s.log("GRAFT: ignoring backed off peer %s",t),s.score.addPenalty(t,1,QZ.GraftBackoff),o=!1;var h=f+s.opts.graftFloodThreshold-s.opts.pruneBackoff;return i<h&&s.score.addPenalty(t,1,QZ.GraftBackoff),s.addBackoff(t,c),void n.push(c)}if(a<0)return s.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",t,a,c),n.push(c),o=!1,void s.addBackoff(t,c);if(l.size>=s.opts.Dhi&&!s.outbound.get(t))return n.push(c),void s.addBackoff(t,c);s.log("GRAFT: Add mesh link from %s in %s",t,c),s.score.graft(t,c),l.add(t),null===(u=s.metrics)||void 0===u||u.onAddToMesh(c,WZ.Subscribed,1)}}else o=!1}})),n.length){e.next=7;break}return e.abrupt("return",[]);case 7:return e.next=9,Promise.all(n.map((function(e){return s.makePrune(t,e,o)})));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"handlePrune",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.score.score(t),a=Ni(r),e.prev=2,a.s();case 4:if((i=a.n()).done){e.next=23;break}if(o=i.value,s=o.topicID,u=o.backoff,c=o.peers,null!=s){e.next=8;break}return e.abrupt("continue",21);case 8:if(l=this.mesh.get(s)){e.next=11;break}return e.abrupt("return");case 11:if(this.log("PRUNE: Remove mesh link to %s in %s",t,s),this.score.prune(t,s),l.has(t)&&(l.delete(t),null===(f=this.metrics)||void 0===f||f.onRemoveFromMesh(s,YZ.Unsub,1)),"number"===typeof u&&u>0?this.doAddBackoff(t,s,1e3*u):this.addBackoff(t,s),!c||!c.length){e.next=21;break}if(!(n<this.opts.scoreThresholds.acceptPXThreshold)){e.next=19;break}return this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",t,n,s),e.abrupt("continue",21);case 19:return e.next=21,this.pxConnect(c);case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(2),a.e(e.t0);case 28:return e.prev=28,a.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,this,[[2,25,28,31]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addBackoff",value:function(e,t){this.doAddBackoff(e,t,this.opts.pruneBackoff)}},{key:"doAddBackoff",value:function(e,t,r){var n,a=this.backoff.get(t);a||(a=new Map,this.backoff.set(t,a));var i=Date.now()+r;(null!==(n=a.get(e))&&void 0!==n?n:0)<i&&a.set(e,i)}},{key:"applyIwantPenalties",value:function(){var e=this;this.gossipTracer.getBrokenPromises().forEach((function(t,r){e.log("peer %s didn't follow up in %d IWANT requests; adding penalty",r,t),e.score.addPenalty(r,t,QZ.BrokenPromise)}))}},{key:"clearBackoff",value:function(){var e=this;if(this.heartbeatTicks%15===0){var t=Date.now();this.backoff.forEach((function(r,n){r.forEach((function(e,n){e<t&&r.delete(n)})),0===r.size&&e.backoff.delete(n)}))}}},{key:"directConnect",value:function(){var e=An(En().mark((function e(){var t,r=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.direct.forEach((function(e){r.streamsOutbound.has(e)||t.push(e)})),e.next=4,Promise.all(t.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.connect(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pxConnect",value:function(){var e=An(En().mark((function e(t){var r,n=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length>this.opts.prunePeers&&(mZ(t),t=t.slice(0,this.opts.prunePeers)),r=[],e.next=4,Promise.all(t.map(function(){var e=An(En().mark((function e(t){var a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.peerID){e.next=2;break}return e.abrupt("return");case 2:if(a=tZ(t.peerID).toString(),!n.peers.has(a)){e.next=5;break}return e.abrupt("return");case 5:if(t.signedPeerRecord){e.next=8;break}return r.push(a),e.abrupt("return");case 8:return e.prev=8,e.next=11,lQ.openAndCertify(t.signedPeerRecord,"libp2p-peer-record");case 11:if(i=e.sent,o=i.peerId,i.peerId.equals(a)){e.next=16;break}return n.log("bogus peer record obtained through px: peer ID %p doesn't match expected peer %p",o,a),e.abrupt("return");case 16:return e.next=18,n.components.peerStore.addressBook.consumePeerRecord(i);case 18:if(e.sent){e.next=21;break}return n.log("bogus peer record obtained through px: could not add peer record to address book"),e.abrupt("return");case 21:r.push(a),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(8),n.log("bogus peer record obtained through px: invalid signature or not a peer record");case 27:case"end":return e.stop()}}),e,null,[[8,24]])})));return function(t){return e.apply(this,arguments)}}()));case 4:if(r.length){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Promise.all(r.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.connect(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log("Initiating connection with %s",t),r=eZ(t),e.next=4,this.components.connectionManager.openConnection(r);case 4:n=e.sent,a=Ni(this.multicodecs);try{for(a.s();!(i=a.n()).done;){o=i.value,s=Ni(this.components.registrar.getTopologies(o));try{for(s.s();!(u=s.n()).done;)u.value.onConnect(r,n)}catch(eL){s.e(eL)}finally{s.f()}}}catch(eL){a.e(eL)}finally{a.f()}case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribe",value:function(e){if(this.status.code!==i1.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(e)){this.subscriptions.add(e);var t,r=Ni(this.peers.keys());try{for(r.s();!(t=r.n()).done;){var n=t.value;this.sendSubscriptions(n,[e],!0)}}catch(eL){r.e(eL)}finally{r.f()}}this.join(e)}},{key:"unsubscribe",value:function(e){if(this.status.code!==i1.started)throw new Error("Pubsub is not started");var t=this.subscriptions.delete(e);if(this.log("unsubscribe from %s - am subscribed %s",e,t),t){var r,n=Ni(this.peers.keys());try{for(n.s();!(r=n.n()).done;){var a=r.value;this.sendSubscriptions(a,[e],!1)}}catch(eL){n.e(eL)}finally{n.f()}}this.leave(e)}},{key:"join",value:function(e){var t,r=this;if(this.status.code!==i1.started)throw new Error("Gossipsub has not started");if(!this.mesh.has(e)){this.log("JOIN %s",e),null===(t=this.metrics)||void 0===t||t.onJoin(e);var n,a=new Set,i=this.fanout.get(e);if(i)this.fanout.delete(e),this.fanoutLastpub.delete(e),i.forEach((function(e){!r.direct.has(e)&&r.score.score(e)>=0&&a.add(e)})),null===(n=this.metrics)||void 0===n||n.onAddToMesh(e,WZ.Fanout,a.size);if(a.size<this.opts.D){var o,s=a.size;this.getRandomGossipPeers(e,this.opts.D,(function(e){return!a.has(e)&&!r.direct.has(e)&&r.score.score(e)>=0})).forEach((function(e){a.add(e)})),null===(o=this.metrics)||void 0===o||o.onAddToMesh(e,WZ.Random,a.size-s)}this.mesh.set(e,a),a.forEach((function(t){r.log("JOIN: Add mesh link to %s in %s",t,e),r.sendGraft(t,e)}))}}},{key:"leave",value:function(e){var t,r=this;if(this.status.code!==i1.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e),null===(t=this.metrics)||void 0===t||t.onLeave(e);var n=this.mesh.get(e);n&&(Promise.all(Array.from(n).map(function(){var t=An(En().mark((function t(n){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.log("LEAVE: Remove mesh link to %s in %s",n,e),t.next=3,r.sendPrune(n,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())).catch((function(e){r.log("Error sending prunes to mesh peers",e)})),this.mesh.delete(e))}},{key:"selectPeersToForward",value:function(e,t,r){var n=this,a=new Set,i=this.topics.get(e);i&&(this.direct.forEach((function(e){!i.has(e)||t===e||null!==r&&void 0!==r&&r.has(e)||a.add(e)})),this.floodsubPeers.forEach((function(e){i.has(e)&&t!==e&&(null===r||void 0===r||!r.has(e))&&n.score.score(e)>=n.opts.scoreThresholds.publishThreshold&&a.add(e)})));var o=this.mesh.get(e);return o&&o.size>0&&o.forEach((function(e){t===e||null!==r&&void 0!==r&&r.has(e)||a.add(e)})),a}},{key:"selectPeersToPublish",value:function(e){var t=this,r=new Set,n={direct:0,floodsub:0,mesh:0,fanout:0},a=this.topics.get(e);if(a)if(this.opts.floodPublish)a.forEach((function(e){t.direct.has(e)?(r.add(e),n.direct++):t.score.score(e)>=t.opts.scoreThresholds.publishThreshold&&(r.add(e),n.floodsub++)}));else{this.direct.forEach((function(e){a.has(e)&&(r.add(e),n.direct++)})),this.floodsubPeers.forEach((function(e){a.has(e)&&t.score.score(e)>=t.opts.scoreThresholds.publishThreshold&&(r.add(e),n.floodsub++)}));var i=this.mesh.get(e);if(i&&i.size>0)i.forEach((function(e){r.add(e),n.mesh++}));else{var o=this.fanout.get(e);if(o&&o.size>0)o.forEach((function(e){r.add(e),n.fanout++}));else{var s=this.getRandomGossipPeers(e,this.opts.D,(function(e){return t.score.score(e)>=t.opts.scoreThresholds.publishThreshold}));s.size>0&&(this.fanout.set(e,s),s.forEach((function(e){r.add(e),n.fanout++})))}this.fanoutLastpub.set(e,Date.now())}}return{tosend:r,tosendCount:n}}},{key:"forwardMessage",value:function(e,t,r,n){var a,i=this;r&&this.score.deliverMessage(r,e,t.topic);var o=this.selectPeersToForward(t.topic,r,n);o.forEach((function(e){i.sendRpc(e,{messages:[t]})})),null===(a=this.metrics)||void 0===a||a.onForwardMsg(t.topic,o.size)}},{key:"publish",value:function(){var e=An(En().mark((function e(t,n,a){var i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.dataTransform?this.dataTransform.outboundTransform(t,n):n,null!=this.publishConfig){e.next=3;break}throw Error("PublishError.Uninitialized");case 3:return e.next=5,uX(this.publishConfig,t,n,s);case 5:return u=e.sent,c=u.raw,l=u.msg,e.next=10,this.msgIdFn(l);case 10:if(f=e.sent,h=this.msgIdToStrFn(f),!this.seenCache.has(h)){e.next=14;break}throw Error("PublishError.Duplicate");case 14:if(p=this.selectPeersToPublish(t),d=p.tosend,v=p.tosendCount,y=!0===this.opts.emitSelf&&this.subscriptions.has(t),b=null!==(i=null===a||void 0===a?void 0:a.allowPublishToZeroPeers)&&void 0!==i?i:this.opts.allowPublishToZeroPeers,0!==d.size||b||y){e.next=19;break}throw Error("PublishError.InsufficientPeers");case 19:this.seenCache.put(h),this.mcache.put({msgId:f,msgIdStr:h},c,!0),this.publishedMessageIds.put(h),g=Ni(d);try{for(g.s();!(m=g.n()).done;)w=m.value,this.sendRpc(w,{messages:[c]})||d.delete(w)}catch(eL){g.e(eL)}finally{g.f()}return null===(o=this.metrics)||void 0===o||o.onPublishMsg(t,v,d.size,null!=c.data?c.data.length:0),y&&(d.add(this.components.peerId.toString()),Qs(Nn(r.prototype),"dispatchEvent",this).call(this,new fZ("gossipsub:message",{detail:{propagationSource:this.components.peerId,msgId:h,msg:l}})),Qs(Nn(r.prototype),"dispatchEvent",this).call(this,new fZ("message",{detail:l}))),e.abrupt("return",{recipients:Array.from(d.values()).map((function(e){return eZ(e)}))});case 27:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"reportMessageValidationResult",value:function(e,t,r){if(r===kZ.Accept){var n,a=this.mcache.validate(e);if(null===(n=this.metrics)||void 0===n||n.onReportValidationMcacheHit(null!==a),null!=a){var i,o=a.message,s=a.originatingPeers;this.score.deliverMessage(t.toString(),e,o.topic),this.forwardMessage(e,a.message,t.toString(),s),null===(i=this.metrics)||void 0===i||i.onReportValidation(o.topic,r)}}else{var u,c=this.mcache.remove(e);if(null===(u=this.metrics)||void 0===u||u.onReportValidationMcacheHit(null!==c),c){var l,f=TZ(r),h=c.message,p=c.originatingPeers;this.score.rejectMessage(t.toString(),e,h.topic,f);var d,v=Ni(p);try{for(v.s();!(d=v.n()).done;){var y=d.value;this.score.rejectMessage(y,e,h.topic,f)}}catch(eL){v.e(eL)}finally{v.f()}null===(l=this.metrics)||void 0===l||l.onReportValidation(h.topic,r)}}}},{key:"sendGraft",value:function(e,t){var r=[{topicID:t}];this.sendRpc(e,{control:{graft:r}})}},{key:"sendPrune",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makePrune(t,r,this.opts.doPX);case 2:e.t0=e.sent,n=[e.t0],this.sendRpc(t,{control:{prune:n}});case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendRpc",value:function(e,t){var r,n=this.streamsOutbound.get(e);if(!n)return this.log("Cannot send RPC to ".concat(e," as there is no open stream to it available")),!1;var a=this.control.get(e);a&&(this.piggybackControl(e,t,a),this.control.delete(e));var i=this.gossip.get(e);i&&(this.piggybackGossip(e,t,i),this.gossip.delete(e));var o=pZ.encode(t).finish();try{n.push(o)}catch(s){return this.log.error("Cannot send rpc to ".concat(e),s),a&&this.control.set(e,a),i&&this.gossip.set(e,i),!1}return null===(r=this.metrics)||void 0===r||r.onRpcSent(t,o.length),!0}},{key:"piggybackControl",value:function(e,t,r){if(r.graft){t.control||(t.control={}),t.control.graft||(t.control.graft=[]);var n,a=Ni(r.graft);try{for(a.s();!(n=a.n()).done;){var i,o=n.value;o.topicID&&null!==(i=this.mesh.get(o.topicID))&&void 0!==i&&i.has(e)&&t.control.graft.push(o)}}catch(eL){a.e(eL)}finally{a.f()}}if(r.prune){t.control||(t.control={}),t.control.prune||(t.control.prune=[]);var s,u=Ni(r.prune);try{for(u.s();!(s=u.n()).done;){var c,l=s.value;!l.topicID||null!==(c=this.mesh.get(l.topicID))&&void 0!==c&&c.has(e)||t.control.prune.push(l)}}catch(eL){u.e(eL)}finally{u.f()}}}},{key:"piggybackGossip",value:function(e,t,r){t.control||(t.control={}),t.control.ihave=r}},{key:"sendGraftPrune",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l,f=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.opts.doPX,i=Ni(t),e.prev=2,s=En().mark((function e(){var t,i,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ia(o.value,2),i=t[0],s=t[1],u=s.map((function(e){return{topicID:e}})),c=[],!(l=r.get(i))){e.next=9;break}return e.next=7,Promise.all(l.map(function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.makePrune(i,t,a&&!(null!==(r=n.get(i))&&void 0!==r&&r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:c=e.sent,r.delete(i);case 9:f.sendRpc(i,{control:{graft:u,prune:c}});case 10:case"end":return e.stop()}}),e)})),i.s();case 5:if((o=i.n()).done){e.next=9;break}return e.delegateYield(s(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),i.e(e.t1);case 14:return e.prev=14,i.f(),e.finish(14);case 17:u=Ni(r),e.prev=18,l=En().mark((function e(){var t,r,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ia(c.value,2),r=t[0],i=t[1],e.next=3,Promise.all(i.map(function(){var e=An(En().mark((function e(t){var i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.makePrune(r,t,a&&!(null!==(i=n.get(r))&&void 0!==i&&i));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:o=e.sent,f.sendRpc(r,{control:{prune:o}});case 5:case"end":return e.stop()}}),e)})),u.s();case 21:if((c=u.n()).done){e.next=25;break}return e.delegateYield(l(),"t2",23);case 23:e.next=21;break;case 25:e.next=30;break;case 27:e.prev=27,e.t3=e.catch(18),u.e(e.t3);case 30:return e.prev=30,u.f(),e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[2,11,14,17],[18,27,30,33]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"emitGossip",value:function(e){var t,r=this.mcache.getGossipIDs(new Set(e.keys())),n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a,i=Ia(t.value,2),o=i[0],s=i[1];this.doEmitGossip(o,s,null!==(a=r.get(o))&&void 0!==a?a:[])}}catch(eL){n.e(eL)}finally{n.f()}}},{key:"doEmitGossip",value:function(e,t,r){var n=this;if(r.length&&(mZ(r),r.length>bZ&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length),t.size)){var a=this.opts.Dlazy,i=.25*t.size,o=t;i>a&&(a=i),a>o.size?a=o.size:o=mZ(Array.from(o)).slice(0,a),o.forEach((function(t){var a=r;r.length>bZ&&(a=mZ(a.slice()).slice(0,bZ)),n.pushGossip(t,{topicID:e,messageIDs:a})}))}}},{key:"flush",value:function(){var e,t=Ni(this.gossip.entries());try{for(t.s();!(e=t.n()).done;){var r=Ia(e.value,2),n=r[0],a=r[1];this.gossip.delete(n),this.sendRpc(n,{control:{ihave:a}})}}catch(eL){t.e(eL)}finally{t.f()}var i,o=Ni(this.control.entries());try{for(o.s();!(i=o.n()).done;){var s=Ia(i.value,2),u=s[0],c=s[1];this.control.delete(u),this.sendRpc(u,{control:{graft:c.graft,prune:c.prune}})}}catch(eL){o.e(eL)}finally{o.f()}}},{key:"pushGossip",value:function(e,t){this.log("Add gossip to %s",e);var r=this.gossip.get(e)||[];this.gossip.set(e,r.concat(t))}},{key:"makePrune",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.score.prune(t,r),this.streamsOutbound.get(t).protocol!==vZ){e.next=3;break}return e.abrupt("return",{topicID:r,peers:[]});case 3:if(a=this.opts.pruneBackoff/1e3,n){e.next=6;break}return e.abrupt("return",{topicID:r,peers:[],backoff:a});case 6:return i=this.getRandomGossipPeers(r,this.opts.prunePeers,(function(e){return e!==t&&s.score.score(e)>=0})),e.next=9,Promise.all(Array.from(i).map(function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eZ(t),e.t0=r.toBytes(),e.next=4,s.components.peerStore.addressBook.getRawEnvelope(r);case 4:return e.t1=e.sent,e.abrupt("return",{peerID:e.t0,signedPeerRecord:e.t1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return o=e.sent,e.abrupt("return",{topicID:r,peers:o,backoff:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"heartbeat",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o,s,u,c,l,f,h,p,d,v,y,b=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.opts,a=n.D,i=n.Dlo,o=n.Dhi,s=n.Dscore,u=n.Dout,c=n.fanoutTTL,this.heartbeatTicks++,l=new Map,f=function(e){var t=l.get(e);return void 0===t&&(t=b.score.score(e),l.set(e,t)),t},h=new Map,p=new Map,d=new Map,this.clearBackoff(),this.peerhave.clear(),null===(t=this.metrics)||void 0===t||t.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks!==0){e.next=15;break}return e.next=15,this.directConnect();case 15:return null===(r=this.fastMsgIdCache)||void 0===r||r.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune(),v=new Map,this.mesh.forEach((function(e,t){var r=b.topics.get(t),n=new Set,c=new Set;if(v.set(t,c),r){var l,y=mZ(Array.from(r)),g=b.backoff.get(t),m=Ni(y);try{for(m.s();!(l=m.n()).done;){var w=l.value,k=b.streamsOutbound.get(w);if(k&&b.multicodecs.includes(k.protocol)&&!e.has(w)&&!b.direct.has(w)){var x=f(w);g&&g.has(w)||!(x>=0)||n.add(w),x>=b.opts.scoreThresholds.gossipThreshold&&c.add(w)}}}catch(eL){m.e(eL)}finally{m.f()}}var _=function(r,n){var a;b.log("HEARTBEAT: Remove mesh link to %s in %s",r,t),b.addBackoff(r,t),e.delete(r),f(r)>=b.opts.scoreThresholds.gossipThreshold&&c.add(r),null===(a=b.metrics)||void 0===a||a.onRemoveFromMesh(t,n,1);var i=p.get(r);i?i.push(t):p.set(r,[t])},E=function(r,n){var a;b.log("HEARTBEAT: Add mesh link to %s in %s",r,t),b.score.graft(r,t),e.add(r),c.delete(r),null===(a=b.metrics)||void 0===a||a.onAddToMesh(t,n,1);var i=h.get(r);i?i.push(t):h.set(r,[t])};(e.forEach((function(e){var r=f(e);r<0&&(b.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",e,r,t),_(e,YZ.BadScore),d.set(e,!0))})),e.size<i)&&HZ(n,a-e.size).forEach((function(e){E(e,WZ.NotEnough)}));if(e.size>o){var S=Array.from(e);S.sort((function(e,t){return f(t)-f(e)})),S=S.slice(0,s).concat(mZ(S.slice(s)));var A=0;if(S.slice(0,a).forEach((function(e){b.outbound.get(e)&&A++})),A<u){var C=function(e){for(var t=S[e],r=e;r>0;r--)S[r]=S[r-1];S[0]=t};if(A>0)for(var I=A,T=1;T<a&&I>0;T++)b.outbound.get(S[T])&&(C(T),I--);for(var D=a-A,R=a;R<S.length&&D>0;R++)b.outbound.get(S[R])&&(C(R),D--)}S.slice(a).forEach((function(e){_(e,YZ.Excess)}))}if(e.size>=i){var P=0;if(e.forEach((function(e){b.outbound.get(e)&&P++})),P<u){var N=KZ(n,u-P,(function(e){return!0===b.outbound.get(e)}));N.forEach((function(e){E(e,WZ.Outbound)}))}}if(b.heartbeatTicks%b.opts.opportunisticGraftTicks===0&&e.size>1){var L=Array.from(e).sort((function(e,t){return f(e)-f(t)})),O=Math.floor(e.size/2),B=f(L[O]);if(B<b.opts.scoreThresholds.opportunisticGraftThreshold){var U,M=KZ(n,b.opts.opportunisticGraftPeers,(function(e){return f(e)>B})),z=Ni(M);try{for(z.s();!(U=z.n()).done;){var F=U.value;b.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",F,t),E(F,WZ.Opportunistic)}}catch(eL){z.e(eL)}finally{z.f()}}}})),y=Date.now(),this.fanoutLastpub.forEach((function(e,t){e+c<y&&(b.fanout.delete(t),b.fanoutLastpub.delete(t))})),this.fanout.forEach((function(e,t){var r=b.topics.get(t);e.forEach((function(t){(!r.has(t)||f(t)<b.opts.scoreThresholds.publishThreshold)&&e.delete(t)}));var n=b.topics.get(t),i=[],o=new Set;if(v.set(t,o),n){var s,u=Ni(mZ(Array.from(n)));try{for(u.s();!(s=u.n()).done;){var c=s.value,l=b.streamsOutbound.get(c);if(l&&b.multicodecs.includes(l.protocol)&&!e.has(c)&&!b.direct.has(c)){var h=f(c);h>=b.opts.scoreThresholds.publishThreshold&&i.push(c),h>=b.opts.scoreThresholds.gossipThreshold&&o.add(c)}}}catch(eL){u.e(eL)}finally{u.f()}}if(e.size<a){var p=a-e.size;i.slice(0,p).forEach((function(t){e.add(t),null===o||void 0===o||o.delete(t)}))}})),this.emitGossip(v),e.next=27,this.sendGraftPrune(h,p,d);case 27:this.flush(),this.mcache.shift(),this.dispatchEvent(new fZ("gossipsub:heartbeat"));case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRandomGossipPeers",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},a=this.topics.get(e);if(!a)return new Set;var i=[];return a.forEach((function(e){var t=r.streamsOutbound.get(e);t&&r.multicodecs.includes(t.protocol)&&n(e)&&i.push(e)})),i=mZ(i),t>0&&i.length>t&&(i=i.slice(0,t)),new Set(i)}},{key:"onScrapeMetrics",value:function(e){var t,r;e.mcacheSize.set(this.mcache.size),e.mcacheNotValidatedCount.set(this.mcache.notValidatedCount),e.cacheSize.set({cache:"direct"},this.direct.size),e.cacheSize.set({cache:"seenCache"},this.seenCache.size),e.cacheSize.set({cache:"fastMsgIdCache"},null!==(t=null===(r=this.fastMsgIdCache)||void 0===r?void 0:r.size)&&void 0!==t?t:0),e.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),e.cacheSize.set({cache:"mcache"},this.mcache.size),e.cacheSize.set({cache:"score"},this.score.size),e.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),e.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),e.cacheSize.set({cache:"topics"},this.topics.size),e.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),e.cacheSize.set({cache:"mesh"},this.mesh.size),e.cacheSize.set({cache:"fanout"},this.fanout.size),e.cacheSize.set({cache:"peers"},this.peers.size),e.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),e.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),e.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),e.cacheSize.set({cache:"gossip"},this.gossip.size),e.cacheSize.set({cache:"control"},this.control.size),e.cacheSize.set({cache:"peerhave"},this.peerhave.size),e.cacheSize.set({cache:"outbound"},this.outbound.size);var n,a=0,i=Ni(this.backoff.values());try{for(i.s();!(n=i.n()).done;){a+=n.value.size}}catch(eL){i.e(eL)}finally{i.f()}e.cacheSize.set({cache:"backoff"},a);var o,s=Ni(this.topics);try{for(s.s();!(o=s.n()).done;){var u=Ia(o.value,2),c=u[0],l=u[1];e.topicPeersCount.set({topicStr:c},l.size)}}catch(eL){s.e(eL)}finally{s.f()}var f,h=Ni(this.mesh);try{for(h.s();!(f=h.n()).done;){var p=Ia(f.value,2),d=p[0],v=p[1];e.meshPeerCounts.set({topicStr:d},v.size)}}catch(eL){h.e(eL)}finally{h.f()}var y=[],b=new Map;e.behaviourPenalty.reset();var g,m=Ni(this.peers.keys());try{for(m.s();!(g=m.n()).done;){var w,k,x=g.value,_=this.score.score(x);y.push(_),b.set(x,_),e.behaviourPenalty.observe(null!==(w=null===(k=this.score.peerStats.get(x))||void 0===k?void 0:k.behaviourPenalty)&&void 0!==w?w:0)}}catch(eL){m.e(eL)}finally{m.f()}e.registerScores(y,this.opts.scoreThresholds),e.registerScorePerMesh(this.mesh,b);var E=function(e,t,r,n,a){var i,o={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]},s=Ni(e);try{for(s.s();!(i=s.n()).done;){var u=i.value,c=t.get(u);if(c){var l,f=O$(u,c,r,n,a),h=Ni(f.byTopic);try{for(h.s();!(l=h.n()).done;){var p=Ia(l.value,2),d=p[0],v=p[1],y=o.byTopic.get(d);y||(y={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},o.byTopic.set(d,y)),y.p1w.push(v.p1w),y.p2w.push(v.p2w),y.p3w.push(v.p3w),y.p3bw.push(v.p3bw),y.p4w.push(v.p4w)}}catch(eL){h.e(eL)}finally{h.f()}o.p5w.push(f.p5w),o.p6w.push(f.p6w),o.p7w.push(f.p7w),o.score.push(f.score)}else o.p5w.push(0),o.p6w.push(0),o.p7w.push(0),o.score.push(0)}}catch(eL){s.e(eL)}finally{s.f()}return o}(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,e.topicStrToLabel);e.registerScoreWeights(E)}}]),r}(cZ);function s1(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return new o1(t,e)}}o1.multicodec=yZ;var u1=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=c1;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},c1=Math.pow(2,31);var l1=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var f1=Math.pow(2,7),h1=Math.pow(2,14),p1=Math.pow(2,21),d1=Math.pow(2,28),v1=Math.pow(2,35),y1=Math.pow(2,42),b1=Math.pow(2,49),g1=Math.pow(2,56),m1=Math.pow(2,63),w1={encode:u1,decode:l1,encodingLength:function(e){return e<f1?1:e<h1?2:e<p1?3:e<d1?4:e<v1?5:e<y1?6:e<b1?7:e<g1?8:e<m1?9:10}},k1=w1,x1=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=k1.decode(e,t);return[r,k1.decode.bytes]},_1=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return k1.encode(e,t,r),t},E1=function(e){return k1.encodingLength(e)},S1=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),A1=function(e,t){var r=t.byteLength,n=E1(e),a=n+E1(r),i=new Uint8Array(a+r);return _1(e,i,0),_1(r,i,n),i.set(t,a),new I1(e,r,t,i)},C1=function(e){var t=S1(e),r=Ia(x1(t),2),n=r[0],a=r[1],i=Ia(x1(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new I1(n,o,u,t)},I1=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var T1=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},D1=T1,R1=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),P1=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return L1(this,e)}}]),e}(),N1=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return L1(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),L1=function(e,t){return new N1(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},O1=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new R1(t,r,n),this.decoder=new P1(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),B1=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new O1(t,r,n,a)},U1=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=D1(n,r),i=a.encode,o=a.decode;return B1({prefix:t,name:r,encode:i,decode:function(e){return S1(o(e))}})},M1=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return B1({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},z1=U1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),F1=U1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),V1=M1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),j1=M1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),q1=M1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),K1=M1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),H1=M1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),G1=M1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),W1=M1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Y1=M1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Q1=M1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),J1=function(e,t){var r=e.bytes;return 0===e.version?t0(r,X1(e),t||z1.encoder):r0(r,X1(e),t||V1.encoder)},Z1=new WeakMap,X1=function(e){var t=Z1.get(e);if(null==t){var r=new Map;return Z1.set(e,r),r}return t},$1=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==n0)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==a0)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=A1(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return J1(this,e)}},{key:"toJSON",value:function(){return{"/":J1(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||i0(n,a,i.bytes))}if(!0===t[o0]){var o=t.version,s=t.multihash,u=t.code,c=C1(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==n0)throw new Error("Version 0 CID must use dag-pb (code: ".concat(n0,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,i0(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,n0,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=S1(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new I1(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(x1(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=n0;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(e0(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return X1(o).set(a,e),o}}]),r}(),e0=function(e,t){switch(e[0]){case"Q":var r=t||z1;return[z1.prefix,r.decode("".concat(z1.prefix).concat(e))];case z1.prefix:var n=t||z1;return[z1.prefix,n.decode(e)];case V1.prefix:var a=t||V1;return[V1.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},t0=function(e,t,r){var n=r.prefix;if(n!==z1.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},r0=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},n0=112,a0=18,i0=function(e,t,r){var n=E1(e),a=n+E1(t),i=new Uint8Array(a+r.byteLength);return _1(e,i,0),_1(t,i,n),i.set(r,a),i},o0=Symbol.for("@ipld/js-cid/CID"),s0=B1({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),u0=M1({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),c0=M1({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),l0=U1({prefix:"9",name:"base10",alphabet:"0123456789"}),f0=M1({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),h0=M1({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),p0=U1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),d0=U1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),v0=M1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),y0=M1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),b0=M1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),g0=M1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),m0=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),w0=m0.reduce((function(e,t,r){return e[r]=t,e}),[]),k0=m0.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var x0=B1({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=w0[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=k0[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),_0=function(e){var t=e.name,r=e.code,n=e.encode;return new E0(t,r,n)},E0=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?A1(this.code,r):r.then((function(e){return A1(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),S0=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A0=_0({name:"sha2-256",code:18,encode:S0("SHA-256")}),C0=_0({name:"sha2-512",code:19,encode:S0("SHA-512")}),I0=S1,T0={code:0,name:"identity",encode:I0,digest:function(e){return A1(0,I0(e))}},D0="raw",R0=85,P0=function(e){return S1(e)},N0=function(e){return S1(e)},L0=new TextEncoder,O0=new TextDecoder,B0="json",U0=512,M0=function(e){return L0.encode(JSON.stringify(e))},z0=function(e){return JSON.parse(O0.decode(e))},F0=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},rt),nt),at),it),ot),tt),st),et),ut),ct),V0=(jn(jn({},lt),ft),Symbol.for("nodejs.util.inspect.custom")),j0=Object.values(F0).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),F0.identity.decoder),q0=function(e){function t(e){Cn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:fb,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=z1.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return $1.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return Pd(this.multihash.bytes,e);if("string"===typeof e)return function(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:j0,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=C1(z1.decode("z".concat(e)));return e.startsWith("12D")?new H0({multihash:n}):e.startsWith("16U")?new G0({multihash:n}):new K0({multihash:n})}return W0(j0.decode(e))}(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Pd(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:V0,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),K0=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Dn(r)}(q0),H0=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Dn(r)}(q0),G0=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Dn(r)}(q0);function W0(e){try{var t=C1(e);if(t.code===T0.code){if(36===t.digest.length)return new H0({multihash:t});if(37===t.digest.length)return new G0({multihash:t})}if(t.code===A0.code)return new K0({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===A0.code)return new K0({multihash:e.multihash});if(t.code===T0.code){if(36===t.digest.length)return new H0({multihash:e.multihash});if(37===t.digest.length)return new G0({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}($1.decode(e))}throw new Error("Supplied PeerID CID is invalid")}var Y0,Q0,J0=ua("libp2p-delegated-peer-routing"),Z0=3e4;!function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"}(Y0||(Y0={})),function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"}(Q0||(Q0={}));var X0=function(){function e(t){if(Cn(this,e),null==t)throw new Error("missing ipfs http client");this.client=t,this.started=!1,this.abortController=new AbortController,this.httpQueue=new $y({concurrency:4});var r=t.getEndpointConfig(),n=r.protocol,a=r.host,i=r.port;J0("enabled DelegatedPeerRouting via ".concat(n,"://").concat(a,":").concat(i))}return Dn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){this.started=!0}},{key:"stop",value:function(){this.httpQueue.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}},{key:"findPeer",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:{},J0("findPeer starts: %p",t),n.timeout=null!==(r=n.timeout)&&void 0!==r?r:Z0,n.signal=Wv([this.abortController.signal].concat(null!=n.signal?[n.signal]:[])),a=xA(),i=xA(),this.httpQueue.add(An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.resolve(),e.next=3,i.promise;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),e.prev=7,e.next=10,a.promise;case 10:o=!1,s=!1,e.prev=12,c=zn(this.client.dht.findPeer(t,n));case 14:return e.next=16,c.next();case 16:if(!(o=!(l=e.sent).done)){e.next=24;break}if("FINAL_PEER"!==(f=l.value).name){e.next=21;break}return h={id:f.peer.id,multiaddrs:f.peer.multiaddrs,protocols:[]},e.abrupt("return",h);case 21:o=!1,e.next=14;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(12),s=!0,u=e.t0;case 30:if(e.prev=30,e.prev=31,!o||null==c.return){e.next=35;break}return e.next=35,c.return();case 35:if(e.prev=35,!s){e.next=38;break}throw u;case 38:return e.finish(35);case 39:return e.finish(30);case 40:e.next=46;break;case 42:throw e.prev=42,e.t1=e.catch(7),J0.error("findPeer errored: %o",e.t1),e.t1;case 46:return e.prev=46,i.resolve(),J0("findPeer finished: %p",t),e.finish(46);case 50:throw ca(new Error("Not found"),"ERR_NOT_FOUND");case 51:case"end":return e.stop()}}),e,this,[[7,42,46,50],[12,26,30,40],[31,,35,39]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f,h,p,d;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=$1.asCID(e),i=null!=o?o:W0(e),J0("getClosestPeers starts: %s",i),r.timeout=null!==(a=r.timeout)&&void 0!==a?a:Z0,r.signal=Wv([t.abortController.signal].concat(null!=r.signal?[r.signal]:[])),s=xA(),u=xA(),t.httpQueue.add(An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.resolve(),e.next=3,u.promise;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),n.prev=8,n.next=11,Mf(s.promise);case 11:c=!1,l=!1,n.prev=13,h=zn(t.client.dht.query(i,r));case 15:return n.next=17,Mf(h.next());case 17:if(!(c=!(p=n.sent).done)){n.next=24;break}if("PEER_RESPONSE"!==(d=p.value).name){n.next=21;break}return n.delegateYield(Cb(zn(d.closer.map((function(e){return{id:e.id,multiaddrs:e.multiaddrs,protocols:[]}})))),"t0",21);case 21:c=!1,n.next=15;break;case 24:n.next=30;break;case 26:n.prev=26,n.t1=n.catch(13),l=!0,f=n.t1;case 30:if(n.prev=30,n.prev=31,!c||null==h.return){n.next=35;break}return n.next=35,Mf(h.return());case 35:if(n.prev=35,!l){n.next=38;break}throw f;case 38:return n.finish(35);case 39:return n.finish(30);case 40:n.next=46;break;case 42:throw n.prev=42,n.t2=n.catch(8),J0.error("getClosestPeers errored:",n.t2),n.t2;case 46:return n.prev=46,u.resolve(),J0("getClosestPeers finished: %b",e),n.finish(46);case 50:case"end":return n.stop()}}),n,null,[[8,42,46,50],[13,26,30,40],[31,,35,39]])})))()}}]),e}();var $0,e2,t2=ua("libp2p:delegated-content-routing"),r2=3e4;!function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"}($0||($0={})),function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"}(e2||(e2={}));var n2=function(){function e(t){if(Cn(this,e),null==t)throw new Error("missing ipfs http client");this.client=t,this.started=!1,this.abortController=new AbortController,this.httpQueue=new $y({concurrency:4}),this.httpQueueRefs=new $y({concurrency:2});var r=t.getEndpointConfig(),n=r.protocol,a=r.host,i=r.port;t2("enabled DelegatedContentRouting via ".concat(n,"://").concat(a,":").concat(i))}return Dn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){this.started=!0}},{key:"stop",value:function(){this.httpQueue.clear(),this.httpQueueRefs.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f,h;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t2("findProviders starts: %c",e),r.timeout=null!==(a=r.timeout)&&void 0!==a?a:r2,r.signal=Wv([t.abortController.signal].concat(null!=r.signal?[r.signal]:[])),i=xA(),o=xA(),t.httpQueue.add(An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.resolve(),e.next=3,o.promise;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),n.prev=6,n.next=9,Mf(i.promise);case 9:s=!1,u=!1,n.prev=11,l=zn(t.client.dht.findProvs(e,r));case 13:return n.next=15,Mf(l.next());case 15:if(!(s=!(f=n.sent).done)){n.next=22;break}if("PROVIDER"!==(h=f.value).name){n.next=19;break}return n.delegateYield(Cb(zn(h.providers.map((function(e){return{id:e.id,protocols:[],multiaddrs:e.multiaddrs}})))),"t0",19);case 19:s=!1,n.next=13;break;case 22:n.next=28;break;case 24:n.prev=24,n.t1=n.catch(11),u=!0,c=n.t1;case 28:if(n.prev=28,n.prev=29,!s||null==l.return){n.next=33;break}return n.next=33,Mf(l.return());case 33:if(n.prev=33,!u){n.next=36;break}throw c;case 36:return n.finish(33);case 37:return n.finish(28);case 38:n.next=44;break;case 40:throw n.prev=40,n.t2=n.catch(6),t2.error("findProviders errored:",n.t2),n.t2;case 44:return n.prev=44,o.resolve(),t2("findProviders finished: %c",e),n.finish(44);case 48:case"end":return n.stop()}}),n,null,[[6,40,44,48],[11,24,28,38],[29,,33,37]])})))()}},{key:"provide",value:function(){var e=An(En().mark((function e(t){var r,n,a=this,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t2("provide starts: %c",t),n.timeout=null!==(r=n.timeout)&&void 0!==r?r:r2,n.signal=Wv([this.abortController.signal].concat(null!=n.signal?[n.signal]:[])),e.next=6,this.httpQueueRefs.add(An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.client.block.stat(t,n);case 2:return e.next=4,nS(a.client.dht.provide(t,n));case 4:case"end":return e.stop()}}),e)}))));case 6:t2("provide finished: %c",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=An(En().mark((function e(t,r){var n,a,i=this,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},t2("put value start: %b",t),a.timeout=null!==(n=a.timeout)&&void 0!==n?n:r2,a.signal=Wv([this.abortController.signal].concat(null!=a.signal?[a.signal]:[])),e.next=6,this.httpQueue.add(An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nS(i.client.dht.put(t,r,a));case 2:case"end":return e.stop()}}),e)}))));case 6:t2("put value finished: %b",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t){var r,n,a=this,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t2("get value start: %b",t),n.timeout=null!==(r=n.timeout)&&void 0!==r?r:r2,n.signal=Wv([this.abortController.signal].concat(null!=n.signal?[n.signal]:[])),e.next=6,this.httpQueue.add(An(En().mark((function e(){var r,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,i=!1,e.prev=2,s=zn(a.client.dht.get(t,n));case 4:return e.next=6,s.next();case 6:if(!(r=!(u=e.sent).done)){e.next=14;break}if("VALUE"!==(c=u.value).name){e.next=11;break}return t2("get value finished: %b",t),e.abrupt("return",c.value);case 11:r=!1,e.next=4;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),i=!0,o=e.t0;case 20:if(e.prev=20,e.prev=21,!r||null==s.return){e.next=25;break}return e.next=25,s.return();case 25:if(e.prev=25,!i){e.next=28;break}throw o;case 28:return e.finish(25);case 29:return e.finish(20);case 30:throw ca(new Error("Not found"),"ERR_NOT_FOUND");case 31:case"end":return e.stop()}}),e,null,[[2,16,20,30],[21,,25,29]])}))));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();var a2=function(e){return Promise.reject(new Error('No base found for "'.concat(e,'"')))},i2=function(){function e(t){Cn(this,e),this._basesByName={},this._basesByPrefix={},this._loadBase=t.loadBase||a2;var r,n=Ni(t.bases);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.addBase(a)}}catch(eL){n.e(eL)}finally{n.f()}}return Dn(e,[{key:"addBase",value:function(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error('Codec already exists for codec "'.concat(e.name,'"'));this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}},{key:"removeBase",value:function(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}},{key:"getBase",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._basesByName[t]){e.next=2;break}return e.abrupt("return",this._basesByName[t]);case 2:if(!this._basesByPrefix[t]){e.next=4;break}return e.abrupt("return",this._basesByPrefix[t]);case 4:return e.next=6,this._loadBase(t);case 6:return r=e.sent,null==this._basesByName[r.name]&&null==this._basesByPrefix[r.prefix]&&this.addBase(r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listBases",value:function(){return Object.values(this._basesByName)}}]),e}(),o2=function(e){return Promise.reject(new Error('No codec found for "'.concat(e,'"')))},s2=function(){function e(t){Cn(this,e),this._codecsByName={},this._codecsByCode={},this._loadCodec=t.loadCodec||o2;var r,n=Ni(t.codecs);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.addCodec(a)}}catch(eL){n.e(eL)}finally{n.f()}}return Dn(e,[{key:"addCodec",value:function(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error('Resolver already exists for codec "'.concat(e.name,'"'));this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}},{key:"removeCodec",value:function(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}},{key:"getCodec",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r="string"===typeof t?this._codecsByName:this._codecsByCode)[t]){e.next=3;break}return e.abrupt("return",r[t]);case 3:return e.next=5,this._loadCodec(t);case 5:return n=e.sent,null==r[t]&&this.addCodec(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listCodecs",value:function(){return Object.values(this._codecsByName)}}]),e}(),u2=function(e){return Promise.reject(new Error('No hasher found for "'.concat(e,'"')))},c2=function(){function e(t){Cn(this,e),this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher||u2;var r,n=Ni(t.hashers);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.addHasher(a)}}catch(eL){n.e(eL)}finally{n.f()}}return Dn(e,[{key:"addHasher",value:function(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error('Resolver already exists for codec "'.concat(e.name,'"'));this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}},{key:"removeHasher",value:function(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}},{key:"getHasher",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r="string"===typeof t?this._hashersByName:this._hashersByCode)[t]){e.next=3;break}return e.abrupt("return",r[t]);case 3:return e.next=5,this._loadHasher(t);case 5:return n=e.sent,null==r[t]&&this.addHasher(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listHashers",value:function(){return Object.values(this._hashersByName)}}]),e}();function l2(e){try{e=JU(Gd(e))}catch(eL){}return e=e.toString()}var f2=ua("ipfs-http-client:lib:error-handler"),h2=Gn.bind({ignoreUndefined:!0}),p2=Wn.isBrowser||Wn.isWebWorker?location.protocol:"http",d2=Wn.isBrowser||Wn.isWebWorker?location.hostname:"localhost",v2=Wn.isBrowser||Wn.isWebWorker?location.port:"5001",y2=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};if("string"===typeof r||Kd(r))e=new URL(l2(r));else if(r instanceof URL)e=r;else if("string"===typeof r.url||Kd(r.url))e=new URL(l2(r.url)),n=r;else if(r.url instanceof URL)e=r.url,n=r;else{var a=((n=r||{}).protocol||p2).replace(":",""),i=(n.host||d2).split(":")[0],o=n.port||v2;e=new URL("".concat(a,"://").concat(i,":").concat(o))}if(n.apiPath?e.pathname=n.apiPath:"/"!==e.pathname&&void 0!==e.pathname||(e.pathname="api/v0"),Wn.isNode){var s=void 0;t=n.agent||new s({keepAlive:!0,maxSockets:6})}return jn(jn({},n),{},{host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:t})},b2=function(){var e=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.headers.get("Content-Type")||"").startsWith("application/json")){e.next=9;break}return e.next=4,t.json();case 4:n=e.sent,f2(n),r=n.Message||n.message,e.next=12;break;case 9:return e.next=11,t.text();case 11:r=e.sent;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),f2("Failed to parse error response",e.t0),r=e.t0.message;case 18:throw a=new eb.HTTPError(t),r&&(r.includes("deadline has elapsed")&&(a=new eb.TimeoutError),r&&r.includes("context deadline exceeded")&&(a=new eb.TimeoutError)),r&&r.includes("request timed out")&&(a=new eb.TimeoutError),r&&(a.message=r),a;case 23:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),g2=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,m2=function(e){return e.replace(g2,(function(e){return"-"+e.toLowerCase()}))},w2=function(e){return"string"===typeof e?Zv(e):e},k2=function(e){Pn(r,e);var t=Un(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Cn(this,r);var a=y2(n);e=t.call(this,{timeout:w2(a.timeout||0)||void 0,headers:a.headers,base:"".concat(a.url),handleError:b2,transformSearchParams:function(e){var t,r=new URLSearchParams,n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=Ia(t.value,2),i=a[0],o=a[1];"undefined"!==o&&"null"!==o&&"signal"!==i&&r.append(m2(i),o),"timeout"!==i||isNaN(o)||r.append(m2(i),o)}}catch(eL){n.e(eL)}finally{n.f()}return r},agent:a.agent}),delete e.get,delete e.put,delete e.delete,delete e.options;var i=e.fetch;return e.fetch=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"!==typeof t||t.startsWith("/")||(t="".concat(a.url,"/").concat(t)),i.call(On(e),t,h2(r,{method:"POST"}))},e}return Dn(r)}(eb),x2=(eb.HTTPError,function(e){return function(t){return e(new k2(t),t)}});function _2(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function E2(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}function S2(e){if(null!=e){var t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){var r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:1e3*(r-1e3*n)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw ca(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}}var A2=["arg","searchParams","hashAlg","mtime","mode"];function C2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.arg,r=e.searchParams,n=e.hashAlg,a=e.mtime,i=e.mode,o=_2(e,A2);r&&(o=jn(jn({},o),r)),n&&(o.hash=n),null!=a&&(a=S2(a),o.mtime=a.secs,o.mtimeNsecs=a.nsecs),null!=i&&(o.mode=E2(i)),o.timeout&&!isNaN(o.timeout)&&(o.timeout="".concat(o.timeout,"ms")),void 0===t||null===t?t=[]:Array.isArray(t)||(t=[t]);var s=new URLSearchParams(o);return t.forEach((function(e){return s.append("arg",e)})),s}var I2=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("bitswap/wantlist",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return t.next=5,t.sent.json();case 5:return n=t.sent,t.abrupt("return",(n.Keys||[]).map((function(e){return wi.parse(e["/"])})));case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),T2=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("bitswap/wantlist",{signal:n.signal,searchParams:C2(jn(jn({},n),{},{peer:r.toString()})),headers:n.headers});case 3:return t.next=5,t.sent.json();case 5:return a=t.sent,t.abrupt("return",(a.Keys||[]).map((function(e){return wi.parse(e["/"])})));case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),D2=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("bitswap/stat",{searchParams:C2(r),signal:r.signal,headers:r.headers});case 3:return n=t.sent,t.t0=R2,t.next=7,n.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function R2(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map((function(e){return wi.parse(e["/"])})),peers:(e.Peers||[]).map((function(e){return kb(e)})),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}var P2=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("bitswap/unwant",{signal:n.signal,searchParams:C2(jn({arg:r.toString()},n)),headers:n.headers});case 3:return a=t.sent,t.abrupt("return",a.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function N2(e){return{wantlist:I2(e),wantlistForPeer:T2(e),unwant:P2(e),stat:D2(e)}}var L2=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("block/get",{signal:n.signal,searchParams:C2(jn({arg:r.toString()},n)),headers:n.headers});case 3:return a=t.sent,t.t0=Uint8Array,t.next=7,a.arrayBuffer();case 7:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function O2(e){return B2.apply(this,arguments)}function B2(){return B2=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!PA(t)){e.next=2;break}return e.abrupt("return",new Blob([t]));case 2:if(!("string"===typeof t||t instanceof String)){e.next=4;break}return e.abrupt("return",new Blob([t.toString()]));case 4:if(!NA(t)){e.next=6;break}return e.abrupt("return",t);case 6:if(OA(t)&&(t=IA(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=28;break}return r=RA(t),e.next=11,r.peek();case 11:if(n=e.sent,a=n.value,!n.done){e.next=16;break}return e.abrupt("return",U2(r));case 16:if(r.push(a),!Number.isInteger(a)){e.next=26;break}return e.t0=Blob,e.t1=Uint8Array,e.next=22,eS(r);case 22:return e.t2=e.sent,e.t3=e.t1.from.call(e.t1,e.t2),e.t4=[e.t3],e.abrupt("return",new e.t0(e.t4));case 26:if(!(PA(a)||"string"===typeof a||a instanceof String)){e.next=28;break}return e.abrupt("return",U2(r));case 28:throw ca(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 29:case"end":return e.stop()}}),e)}))),B2.apply(this,arguments)}function U2(e){return M2.apply(this,arguments)}function M2(){return M2=An(En().mark((function e(t){var r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=!1,a=!1,e.prev=3,o=zn(t);case 5:return e.next=7,o.next();case 7:if(!(n=!(s=e.sent).done)){e.next=13;break}u=s.value,r.push(u);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",new Blob(r));case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])}))),M2.apply(this,arguments)}function z2(e){return wD(e,O2,!0)}function F2(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}function V2(e,t){return j2.apply(this,arguments)}function j2(){return j2=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=S.length>2&&void 0!==S[2]?S[2]:{},a=[],i=new FormData,o=0,s=0,u=!1,c=!1,e.prev=7,f=zn(z2(t));case 9:return e.next=11,f.next();case 11:if(!(u=!(h=e.sent).done)){e.next=37;break}if(p=h.value,d=p.content,v=p.path,y=p.mode,b=p.mtime,g="",m=d?"file":"dir",o>0&&(g="-".concat(o)),w=m+g,k=[],null!==y&&void 0!==y&&k.push("mode=".concat(F2(y))),null!=b&&(x=b.secs,_=b.nsecs,k.push("mtime=".concat(x)),null!=_&&k.push("mtime-nsecs=".concat(_))),k.length&&(w="".concat(w,"?").concat(k.join("&"))),!d){e.next=28;break}i.set(w,d,null!=v?encodeURIComponent(v):void 0),E=s+d.size,a.push({name:v,start:s,end:E}),s=E,e.next=33;break;case 28:if(null==v){e.next=32;break}i.set(w,new File([""],encodeURIComponent(v),{type:"application/x-directory"})),e.next=33;break;case 32:throw new Error("path or content or both must be set");case 33:o++;case 34:u=!1,e.next=9;break;case 37:e.next=43;break;case 39:e.prev=39,e.t0=e.catch(7),c=!0,l=e.t0;case 43:if(e.prev=43,e.prev=44,!u||null==f.return){e.next=48;break}return e.next=48,f.return();case 48:if(e.prev=48,!c){e.next=51;break}throw l;case 51:return e.finish(48);case 52:return e.finish(43);case 53:return e.abrupt("return",{total:s,parts:a,headers:n,body:i});case 54:case"end":return e.stop()}}),e,null,[[7,39,43,53],[44,,48,52]])}))),j2.apply(this,arguments)}function q2(e){return e.filter(Boolean)}function K2(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,Wv.anySignal)(q2(t))}var H2=x2((function(e){function t(e){return r.apply(this,arguments)}function r(){return r=An(En().mark((function r(n){var a,i,o,s,u,c=arguments;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},i=new AbortController,o=K2(i.signal,a.signal),r.prev=3,r.t0=e,r.t1=jn,r.t2={signal:o,searchParams:C2(a)},r.next=9,V2([n],i,a.headers);case 9:return r.t3=r.sent,r.t4=(0,r.t1)(r.t2,r.t3),r.next=13,r.t0.post.call(r.t0,"block/put",r.t4);case 13:return u=r.sent,r.next=16,u.json();case 16:s=r.sent,r.next=28;break;case 19:if(r.prev=19,r.t5=r.catch(3),"dag-pb"!==a.format){r.next=25;break}return r.abrupt("return",t(n,jn(jn({},a),{},{format:"protobuf"})));case 25:if("dag-cbor"!==a.format){r.next=27;break}return r.abrupt("return",t(n,jn(jn({},a),{},{format:"cbor"})));case 27:throw r.t5;case 28:return r.abrupt("return",wi.parse(s.Key));case 29:case"end":return r.stop()}}),r,null,[[3,19]])}))),r.apply(this,arguments)}return t})),G2=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i,o,s,u,c,l;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Array.isArray(t)||(t=[t]),n.next=3,Mf(e.post("block/rm",{signal:r.signal,searchParams:C2(jn({arg:t.map((function(e){return e.toString()})),"stream-channels":!0},r)),headers:r.headers}));case 3:a=n.sent,i=!1,o=!1,n.prev=6,u=zn(a.ndjson());case 8:return n.next=10,Mf(u.next());case 10:if(!(i=!(c=n.sent).done)){n.next=17;break}return l=c.value,n.next=14,W2(l);case 14:i=!1,n.next=8;break;case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(6),o=!0,s=n.t0;case 23:if(n.prev=23,n.prev=24,!i||null==u.return){n.next=28;break}return n.next=28,Mf(u.return());case 28:if(n.prev=28,!o){n.next=31;break}throw s;case 31:return n.finish(28);case 32:return n.finish(23);case 33:case"end":return n.stop()}}),n,null,[[6,19,23,33],[24,,28,32]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function W2(e){var t={cid:wi.parse(e.Hash)};return e.Error&&(t.error=new Error(e.Error)),t}var Y2=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("block/stat",{signal:n.signal,searchParams:C2(jn({arg:r.toString()},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",{cid:wi.parse(i.Key),size:i.Size});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Q2(e){return{get:L2(e),put:H2(e),rm:G2(e),stat:Y2(e)}}var J2=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o,s=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("bootstrap/add",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,o=i.Peers,t.abrupt("return",{Peers:o.map((function(e){return Gd(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Z2=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("bootstrap/rm",{signal:r.signal,searchParams:C2(jn(jn({},r),{},{all:!0})),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Peers,t.abrupt("return",{Peers:i.map((function(e){return Gd(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),X2=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("bootstrap/list",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Peers,t.abrupt("return",{Peers:i.map((function(e){return Gd(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),$2=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("bootstrap/add",{signal:r.signal,searchParams:C2(jn(jn({},r),{},{default:!0})),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Peers,t.abrupt("return",{Peers:i.map((function(e){return Gd(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),e3=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o,s=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("bootstrap/rm",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,o=i.Peers,t.abrupt("return",{Peers:o.map((function(e){return Gd(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function t3(e){return{add:J2(e),clear:Z2(e),list:X2(e),reset:$2(e),rm:e3(e)}}var r3=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("config/profile/apply",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",{original:i.OldCfg,updated:i.NewCfg});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function n3(e){if(null==e)return e;var t=/^[A-Z]+$/;return Object.keys(e).reduce((function(r,n){return t.test(n)?r[n.toLowerCase()]=e[n]:t.test(n[0])?r[n[0].toLowerCase()+n.slice(1)]=e[n]:r[n]=e[n],r}),{})}var a3=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("config/profile/list",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",a.map((function(e){return n3(e)})));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function i3(e){return{apply:r3(e),list:a3(e)}}var o3=x2((function(e){var t=function(){var t=An(En().mark((function t(r){var n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r){t.next=3;break}throw new Error("key argument is required");case 3:return t.next=5,e.post("config",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 5:return a=t.sent,t.next=8,a.json();case 8:return i=t.sent,t.abrupt("return",i.Value);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t})),s3=x2((function(e){var t=function(){var t=An(En().mark((function t(){var r,n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("config/show",{signal:r.signal,searchParams:C2(jn({},r)),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t})),u3=x2((function(e){var t=function(){var t=An(En().mark((function t(r){var n,a,i,o,s=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},a=new AbortController,i=K2(a.signal,n.signal),t.t0=e,t.t1=jn,t.t2={signal:i,searchParams:C2(n)},t.next=8,V2([Bf(JSON.stringify(r))],a,n.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"config/replace",t.t4);case 12:return o=t.sent,t.next=15,o.text();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t})),c3=x2((function(e){var t=function(){var t=An(En().mark((function t(r,n){var a,i,o,s=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=s.length>2&&void 0!==s[2]?s[2]:{},"string"===typeof r){t.next=3;break}throw new Error("Invalid key type");case 3:return i=jn(jn({},a),l3(r,n)),t.next=6,e.post("config",{signal:a.signal,searchParams:C2(i),headers:a.headers});case 6:return o=t.sent,t.next=9,o.text();case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return t})),l3=function(e,t){switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}};function f3(e){return{getAll:s3(e),get:o3(e),set:c3(e),replace:u3(e),profiles:i3(e)}}var h3=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(e.post("dag/export",{signal:r.signal,searchParams:C2({arg:t.toString()}),headers:r.headers}));case 2:return a=n.sent,n.delegateYield(Cb(zn(a.iterator())),"t0",4);case 4:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function p3(e,t,r,n,a){return d3.apply(this,arguments)}function d3(){return d3=Hn(En().mark((function e(t,r,n,a,i){var o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=An(En().mark((function e(t){var r,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCodec(t.code);case 2:return r=e.sent,e.next=5,a(t,i);case 5:return o=e.sent,e.abrupt("return",r.decode(o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=r.split("/").filter(Boolean),e.next=4,Mf(o(t));case 4:u=e.sent,c=t;case 6:if(!s.length){e.next=25;break}if(l=s.shift()){e.next=10;break}throw ca(new Error('Could not resolve path "'.concat(r,'"')),"ERR_INVALID_PATH");case 10:if(!Object.prototype.hasOwnProperty.call(u,l)){e.next=16;break}return u=u[l],e.next=14,{value:u,remainderPath:s.join("/")};case 14:e.next=17;break;case 16:throw ca(new Error('no link named "'.concat(l,'" under ').concat(c)),"ERR_NO_LINK");case 17:if(!(f=wi.asCID(u))){e.next=23;break}return c=f,e.next=22,Mf(o(u));case 22:u=e.sent;case 23:e.next=6;break;case 25:return e.next=27,{value:u,remainderPath:""};case 27:case"end":return e.stop()}}),e)}))),d3.apply(this,arguments)}var v3=function(e,t){var r=x2((function(t,r){var n=L2(r),a=function(){var t=An(En().mark((function t(r){var a,i,o,s,u,c,l=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=l.length>1&&void 0!==l[1]?l[1]:{}).path){t.next=16;break}if(!a.localResolve){t.next=8;break}return t.next=5,LU(p3(r,a.path,e,n,a));case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,Sb(p3(r,a.path,e,n,a));case 10:t.t0=t.sent;case 11:if(i=t.t0,o=i){t.next=15;break}throw ca(new Error("Not found"),"ERR_NOT_FOUND");case 15:return t.abrupt("return",o);case 16:return t.next=18,e.getCodec(r.code);case 18:return s=t.sent,t.next=21,n(r,a);case 21:return u=t.sent,c=s.decode(u),t.abrupt("return",{value:c,remainderPath:""});case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a}));return r(t)},y3=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i,o,s,u,c,l,f,h,p,d,v,y,b;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=new AbortController,i=K2(a.signal,r.signal),n.next=4,Mf(V2(t,a,r.headers));case 4:return o=n.sent,s=o.headers,u=o.body,n.next=9,Mf(e.post("dag/import",{signal:i,headers:s,body:u,searchParams:C2({"pin-roots":r.pinRoots})}));case 9:c=n.sent,l=!1,f=!1,n.prev=12,p=zn(c.ndjson());case 14:return n.next=16,Mf(p.next());case 16:if(!(l=!(d=n.sent).done)){n.next=25;break}if(void 0===(v=d.value.Root)){n.next=22;break}return y=v.Cid["/"],b=v.PinErrorMsg,n.next=22,{root:{cid:wi.parse(y),pinErrorMsg:b}};case 22:l=!1,n.next=14;break;case 25:n.next=31;break;case 27:n.prev=27,n.t0=n.catch(12),f=!0,h=n.t0;case 31:if(n.prev=31,n.prev=32,!l||null==p.return){n.next=36;break}return n.next=36,Mf(p.return());case 36:if(n.prev=36,!f){n.next=39;break}throw h;case 39:return n.finish(36);case 40:return n.finish(31);case 41:case"end":return n.stop()}}),n,null,[[12,27,31,41],[32,,36,40]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),b3=function(e,t){var r=x2((function(t){var r=function(){var r=An(En().mark((function r(n){var a,i,o,s,u,c,l,f,h=arguments;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=h.length>1&&void 0!==h[1]?h[1]:{},!(i=jn({storeCodec:"dag-cbor",hashAlg:"sha2-256"},a)).inputCodec){r.next=8;break}if(n instanceof Uint8Array){r.next=5;break}throw new Error("Can only inputCodec on raw bytes that can be decoded");case 5:o=n,r.next=13;break;case 8:return r.next=10,e.getCodec(i.storeCodec);case 10:s=r.sent,o=s.encode(n),i.inputCodec=i.storeCodec;case 13:return u=new AbortController,c=K2(u.signal,i.signal),r.t0=t,r.t1=jn,r.t2={timeout:i.timeout,signal:c,searchParams:C2(i)},r.next=20,V2([o],u,i.headers);case 20:return r.t3=r.sent,r.t4=(0,r.t1)(r.t2,r.t3),r.next=24,r.t0.post.call(r.t0,"dag/put",r.t4);case 24:return l=r.sent,r.next=27,l.json();case 27:return f=r.sent,r.abrupt("return",wi.parse(f.Cid["/"]));case 29:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return r}));return r(t)},g3=x2((function(e){var t=function(){var t=An(En().mark((function t(r){var n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("dag/resolve",{signal:n.signal,searchParams:C2(jn({arg:"".concat(r).concat(n.path?"/".concat(n.path).replace(/\/[/]+/g,"/"):"")},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",{cid:wi.parse(i.Cid["/"]),remainderPath:i.RemPath});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t}));function m3(e,t){return{export:h3(t),get:v3(e,t),import:y3(t),put:b3(e,t),resolve:g3(t)}}var w3=function(e){if(0===e.Type)return{name:"SENDING_QUERY",type:e.Type};if(1===e.Type)return{from:kb(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map((function(e){var t=e.ID,r=e.Addrs;return{id:kb(t),multiaddrs:r.map((function(e){return Gd(e)})),protocols:[]}})),providers:(e.Responses||[]).map((function(e){var t=e.ID,r=e.Addrs;return{id:kb(t),multiaddrs:r.map((function(e){return Gd(e)})),protocols:[]}}))};if(2===e.Type){var t,r={id:null!==(t=e.ID)&&void 0!==t?t:kb(e.ID),multiaddrs:[],protocols:[]};return e.Responses&&e.Responses.length&&(r={id:kb(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map((function(e){return Gd(e)})),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:r}}if(3===e.Type)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(4===e.Type)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map((function(e){var t=e.ID,r=e.Addrs;return{id:kb(t),multiaddrs:r.map((function(e){return Gd(e)})),protocols:[]}}))};if(5===e.Type)return{name:"VALUE",type:e.Type,value:Bf(e.Extra,"base64pad")};if(6===e.Type){var n=e.Responses.map((function(e){return kb(e.ID)}));if(!n.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:n[0]}}if(7===e.Type)return{name:"DIALING_PEER",type:e.Type,peer:kb(e.ID)};throw new Error("Unknown DHT event type")},k3=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i,o,s,u,c,l;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(e.post("dht/findpeer",{signal:r.signal,searchParams:C2(jn({arg:t},r)),headers:r.headers}));case 2:a=n.sent,i=!1,o=!1,n.prev=5,u=zn(a.ndjson());case 7:return n.next=9,Mf(u.next());case 9:if(!(i=!(c=n.sent).done)){n.next=16;break}return l=c.value,n.next=13,w3(l);case 13:i=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),o=!0,s=n.t0;case 22:if(n.prev=22,n.prev=23,!i||null==u.return){n.next=27;break}return n.next=27,Mf(u.return());case 27:if(n.prev=27,!o){n.next=30;break}throw s;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),x3=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i,o,s,u,c,l;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(e.post("dht/findprovs",{signal:r.signal,searchParams:C2(jn({arg:t.toString()},r)),headers:r.headers}));case 2:a=n.sent,i=!1,o=!1,n.prev=5,u=zn(a.ndjson());case 7:return n.next=9,Mf(u.next());case 9:if(!(i=!(c=n.sent).done)){n.next=16;break}return l=c.value,n.next=13,w3(l);case 13:i=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),o=!0,s=n.t0;case 22:if(n.prev=22,n.prev=23,!i||null==u.return){n.next=27;break}return n.next=27,Mf(u.return());case 27:if(n.prev=27,!o){n.next=30;break}throw s;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),_3=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i,o,s,u,c,l;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(e.post("dht/get",{signal:r.signal,searchParams:C2(jn({arg:t instanceof Uint8Array?kh(t):t.toString()},r)),headers:r.headers}));case 2:a=n.sent,i=!1,o=!1,n.prev=5,u=zn(a.ndjson());case 7:return n.next=9,Mf(u.next());case 9:if(!(i=!(c=n.sent).done)){n.next=16;break}return l=c.value,n.next=13,w3(l);case 13:i=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),o=!0,s=n.t0;case 22:if(n.prev=22,n.prev=23,!i||null==u.return){n.next=27;break}return n.next=27,Mf(u.return());case 27:if(n.prev=27,!o){n.next=30;break}throw s;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),E3=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1};return En().mark((function n(){var a,i,o,s,u,c,l,f;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=Array.isArray(t)?t:[t],n.next=3,Mf(e.post("dht/provide",{signal:r.signal,searchParams:C2(jn({arg:a.map((function(e){return e.toString()}))},r)),headers:r.headers}));case 3:i=n.sent,o=!1,s=!1,n.prev=6,c=zn(i.ndjson());case 8:return n.next=10,Mf(c.next());case 10:if(!(o=!(l=n.sent).done)){n.next=17;break}return f=l.value,n.next=14,w3(f);case 14:o=!1,n.next=8;break;case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(6),s=!0,u=n.t0;case 23:if(n.prev=23,n.prev=24,!o||null==c.return){n.next=28;break}return n.next=28,Mf(c.return());case 28:if(n.prev=28,!s){n.next=31;break}throw u;case 31:return n.finish(28);case 32:return n.finish(23);case 33:case"end":return n.stop()}}),n,null,[[6,19,23,33],[24,,28,32]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),S3=x2((function(e){function t(){return t=Hn((function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return En().mark((function a(){var i,o,s,u,c,l,f,h,p;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=new AbortController,o=K2(i.signal,n.signal),a.t0=Mf,a.t1=e,a.t2=jn,a.t3={signal:o,searchParams:C2(jn({arg:t instanceof Uint8Array?kh(t):t.toString()},n))},a.next=8,Mf(V2([r],i,n.headers));case 8:return a.t4=a.sent,a.t5=(0,a.t2)(a.t3,a.t4),a.t6=a.t1.post.call(a.t1,"dht/put",a.t5),a.next=13,(0,a.t0)(a.t6);case 13:s=a.sent,u=!1,c=!1,a.prev=16,f=zn(s.ndjson());case 18:return a.next=20,Mf(f.next());case 20:if(!(u=!(h=a.sent).done)){a.next=27;break}return p=h.value,a.next=24,w3(p);case 24:u=!1,a.next=18;break;case 27:a.next=33;break;case 29:a.prev=29,a.t7=a.catch(16),c=!0,l=a.t7;case 33:if(a.prev=33,a.prev=34,!u||null==f.return){a.next=38;break}return a.next=38,Mf(f.return());case 38:if(a.prev=38,!c){a.next=41;break}throw l;case 41:return a.finish(38);case 42:return a.finish(33);case 43:case"end":return a.stop()}}),a,null,[[16,29,33,43],[34,,38,42]])}))()})),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),A3=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i,o,s,u,c,l;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(e.post("dht/query",{signal:r.signal,searchParams:C2(jn({arg:t.toString()},r)),headers:r.headers}));case 2:a=n.sent,i=!1,o=!1,n.prev=5,u=zn(a.ndjson());case 7:return n.next=9,Mf(u.next());case 9:if(!(i=!(c=n.sent).done)){n.next=16;break}return l=c.value,n.next=13,w3(l);case 13:i=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),o=!0,s=n.t0;case 22:if(n.prev=22,n.prev=23,!i||null==u.return){n.next=27;break}return n.next=27,Mf(u.return());case 27:if(n.prev=27,!o){n.next=30;break}throw s;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function C3(e){return{findPeer:k3(e),findProvs:x3(e),get:_3(e),provide:E3(e),put:S3(e),query:A3(e)}}var I3=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("diag/cmds",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),T3=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("diag/net",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),D3=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("diag/sys",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function R3(e){return{cmds:I3(e),net:T3(e),sys:D3(e)}}var P3=x2((function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},t.next=3,e.post("files/chmod",{signal:a.signal,searchParams:C2(jn({arg:r,mode:n},a)),headers:a.headers});case 3:return i=t.sent,t.next=6,i.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),N3=x2((function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o,s=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},i=Array.isArray(r)?r:[r],t.next=4,e.post("files/cp",{signal:a.signal,searchParams:C2(jn({arg:i.concat(n).map((function(e){return wi.asCID(e)?"/ipfs/".concat(e):e}))},a)),headers:a.headers});case 4:return o=t.sent,t.next=7,o.text();case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),L3=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r&&"string"===typeof r){t.next=3;break}throw new Error("ipfs.files.flush requires a path");case 3:return t.next=5,e.post("files/flush",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 5:return a=t.sent,t.next=8,a.json();case 8:return i=t.sent,t.abrupt("return",wi.parse(i.Cid));case 10:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function O3(e){var t=n3(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs||0},delete t.mtimeNsecs),t}var B3=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i,o,s,u,c,l,f,h,p;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}throw new Error("ipfs.files.ls requires a path");case 2:return n.next=4,Mf(e.post("files/ls",{signal:r.signal,searchParams:C2(jn(jn({arg:wi.asCID(t)?"/ipfs/".concat(t):t,long:!0},r),{},{stream:!0})),headers:r.headers}));case 4:a=n.sent,i=!1,o=!1,n.prev=7,u=zn(a.ndjson());case 9:return n.next=11,Mf(u.next());case 11:if(!(i=!(c=n.sent).done)){n.next=38;break}if(!("Entries"in(l=c.value))){n.next=33;break}f=Ni(l.Entries||[]),n.prev=15,f.s();case 17:if((h=f.n()).done){n.next=23;break}return p=h.value,n.next=21,U3(O3(p));case 21:n.next=17;break;case 23:n.next=28;break;case 25:n.prev=25,n.t0=n.catch(15),f.e(n.t0);case 28:return n.prev=28,f.f(),n.finish(28);case 31:n.next=35;break;case 33:return n.next=35,U3(O3(l));case 35:i=!1,n.next=9;break;case 38:n.next=44;break;case 40:n.prev=40,n.t1=n.catch(7),o=!0,s=n.t1;case 44:if(n.prev=44,n.prev=45,!i||null==u.return){n.next=49;break}return n.next=49,Mf(u.return());case 49:if(n.prev=49,!o){n.next=52;break}throw s;case 52:return n.finish(49);case 53:return n.finish(44);case 54:case"end":return n.stop()}}),n,null,[[7,40,44,54],[15,25,28,31],[45,,49,53]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function U3(e){return e.hash&&(e.cid=wi.parse(e.hash)),delete e.hash,e.type=1===e.type?"directory":"file",e}var M3=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("files/mkdir",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),z3=x2((function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},Array.isArray(r)||(r=[r]),t.next=4,e.post("files/mv",{signal:a.signal,searchParams:C2(jn({arg:r.concat(n)},a)),headers:a.headers});case 4:return i=t.sent,t.next=7,i.text();case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),F3=__webpack_require__(3805),V3=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(e.post("files/read",{signal:r.signal,searchParams:C2(jn({arg:t,count:r.length},r)),headers:r.headers}));case 2:return a=n.sent,n.delegateYield(Cb(zn(F3(a.body))),"t0",4);case 4:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),j3=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o,s=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("files/rm",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.text();case 6:if(""===(i=t.sent)){t.next=11;break}throw(o=new eb.HTTPError(a)).message=i,o;case 11:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),q3=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("files/stat",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return(i=t.sent).WithLocality=i.WithLocality||!1,t.abrupt("return",K3(O3(i)));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function K3(e){return e.cid=wi.parse(e.hash),delete e.hash,e}var H3=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("files/touch",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),G3=x2((function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o,s,u=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:{},i=new AbortController,o=K2(i.signal,a.signal),t.t0=e,t.t1=jn,t.t2={signal:o,searchParams:C2(jn({arg:r,streamChannels:!0,count:a.length},a))},t.next=8,V2([{content:n,path:"arg",mode:E2(a.mode),mtime:S2(a.mtime)}],i,a.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"files/write",t.t4);case 12:return s=t.sent,t.next=15,s.text();case 15:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}));function W3(e){return{chmod:P3(e),cp:N3(e),flush:L3(e),ls:B3(e),mkdir:M3(e),mv:z3(e),read:V3(e),rm:j3(e),stat:q3(e),touch:H3(e),write:G3(e)}}var Y3=x2((function(e){var t=function(){var e=An(En().mark((function e(t,r){var n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.length>2&&void 0!==n[2]?n[2]:{},ca(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return t})),Q3=x2((function(e){function t(){return(t=An(En().mark((function t(r,n){var a,i,o;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=null!==n&&void 0!==n?n:{type:"Ed25519"},t.next=3,e.post("key/gen",{signal:a.signal,searchParams:C2(jn({arg:r},a)),headers:a.headers});case 3:return i=t.sent,t.next=6,i.json();case 6:return o=t.sent,t.abrupt("return",n3(o));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),J3=x2((function(e){function t(){return t=An(En().mark((function t(r,n,a){var i,o,s,u=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>3&&void 0!==u[3]?u[3]:{},t.next=3,e.post("key/import",{signal:i.signal,searchParams:C2(jn({arg:r,pem:n,password:a},i)),headers:i.headers});case 3:return o=t.sent,t.next=6,o.json();case 6:return s=t.sent,t.abrupt("return",n3(s));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r,n){return t.apply(this,arguments)}})),Z3=x2((function(e){var t=function(){var e=An(En().mark((function e(t){var r=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:{},ca(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t})),X3=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("key/list",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",(a.Keys||[]).map((function(e){return n3(e)})));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),$3=x2((function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},t.next=3,e.post("key/rename",{signal:a.signal,searchParams:C2(jn({arg:[r,n]},a)),headers:a.headers});case 3:return i=t.sent,t.t0=n3,t.next=7,i.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),e4=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("key/rm",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",n3(i.Keys[0]));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function t4(e){return{export:Y3(e),gen:Q3(e),import:J3(e),info:Z3(e),list:X3(e),rename:$3(e),rm:e4(e)}}var r4=x2((function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},t.next=3,e.post("log/level",{signal:a.signal,searchParams:C2(jn({arg:[r,n]},a)),headers:a.headers});case 3:return i=t.sent,t.t0=n3,t.next=7,i.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),n4=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("log/ls",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",a.Strings);case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),a4=x2((function(e){function t(){return t=Hn((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En().mark((function r(){var n;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Mf(e.post("log/tail",{signal:t.signal,searchParams:C2(t),headers:t.headers}));case 2:return n=r.sent,r.delegateYield(Cb(zn(n.ndjson())),"t0",4);case 4:case"end":return r.stop()}}),r)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function i4(e){return{level:r4(e),ls:n4(e),tail:a4(e)}}var o4=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("name/publish",{signal:n.signal,searchParams:C2(jn({arg:"".concat(r)},n)),headers:n.headers});case 3:return a=t.sent,t.t0=n3,t.next=7,a.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),s4=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i,o,s,u,c,l;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(e.post("name/resolve",{signal:r.signal,searchParams:C2(jn({arg:t,stream:!0},r)),headers:r.headers}));case 2:a=n.sent,i=!1,o=!1,n.prev=5,u=zn(a.ndjson());case 7:return n.next=9,Mf(u.next());case 9:if(!(i=!(c=n.sent).done)){n.next=16;break}return l=c.value,n.next=13,l.Path;case 13:i=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),o=!0,s=n.t0;case 22:if(n.prev=22,n.prev=23,!i||null==u.return){n.next=27;break}return n.next=27,Mf(u.return());case 27:if(n.prev=27,!o){n.next=30;break}throw s;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),u4=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("name/pubsub/cancel",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.t0=n3,t.next=7,a.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),c4=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("name/pubsub/state",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.t0=n3,t.next=7,n.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),l4=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("name/pubsub/subs",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",a.Strings||[]);case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function f4(e){return{cancel:u4(e),state:c4(e),subs:l4(e)}}function h4(e){return{publish:o4(e),resolve:s4(e),pubsub:f4(e)}}var p4=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("object/data",{signal:n.signal,searchParams:C2(jn({arg:"".concat(r instanceof Uint8Array?wi.decode(r):r)},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.arrayBuffer();case 6:return i=t.sent,t.abrupt("return",new Uint8Array(i,0,i.byteLength));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),d4=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("object/get",{signal:n.signal,searchParams:C2(jn({arg:"".concat(r instanceof Uint8Array?wi.decode(r):r),dataEncoding:"base64"},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",{Data:Bf(i.Data,"base64pad"),Links:(i.Links||[]).map((function(e){return{Name:e.Name,Hash:wi.parse(e.Hash),Tsize:e.Size}}))});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),v4=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("object/links",{signal:n.signal,searchParams:C2(jn({arg:"".concat(r instanceof Uint8Array?wi.decode(r):r)},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",(i.Links||[]).map((function(e){return{Name:e.Name,Tsize:e.Size,Hash:wi.parse(e.Hash)}})));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),y4=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("object/new",{signal:r.signal,searchParams:C2(jn({arg:r.template},r)),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Hash,t.abrupt("return",wi.parse(i));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),b4=function(e,t){var r=x2((function(r){var n=b3(e,t);function a(){return a=An(En().mark((function e(t){var r,a=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",n(t,jn(jn({},r),{},{storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})));case 2:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}return function(e){return a.apply(this,arguments)}}));return r(t)},g4=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("object/stat",{signal:n.signal,searchParams:C2(jn({arg:"".concat(r)},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",jn(jn({},i),{},{Hash:wi.parse(i.Hash)}));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),m4=x2((function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o,s,u=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:{},t.next=3,e.post("object/patch/add-link",{signal:a.signal,searchParams:C2(jn({arg:["".concat(r),n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null]},a)),headers:a.headers});case 3:return i=t.sent,t.next=6,i.json();case 6:return o=t.sent,s=o.Hash,t.abrupt("return",wi.parse(s));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),w4=x2((function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o,s,u,c,l=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:{},i=new AbortController,o=K2(i.signal,a.signal),t.t0=e,t.t1=jn,t.t2={signal:o,searchParams:C2(jn({arg:"".concat(r)},a))},t.next=8,V2([n],i,a.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"object/patch/append-data",t.t4);case 12:return s=t.sent,t.next=15,s.json();case 15:return u=t.sent,c=u.Hash,t.abrupt("return",wi.parse(c));case 18:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),k4=x2((function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o,s,u=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:{},t.next=3,e.post("object/patch/rm-link",{signal:a.signal,searchParams:C2(jn({arg:["".concat(r),n.Name||n.name||null]},a)),headers:a.headers});case 3:return i=t.sent,t.next=6,i.json();case 6:return o=t.sent,s=o.Hash,t.abrupt("return",wi.parse(s));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),x4=x2((function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o,s,u,c,l=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:{},i=new AbortController,o=K2(i.signal,a.signal),t.t0=e,t.t1=jn,t.t2={signal:o,searchParams:C2(jn({arg:["".concat(r)]},a))},t.next=8,V2([n],i,a.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"object/patch/set-data",t.t4);case 12:return s=t.sent,t.next=15,s.json();case 15:return u=t.sent,c=u.Hash,t.abrupt("return",wi.parse(c));case 18:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}));function _4(e){return{addLink:m4(e),appendData:w4(e),rmLink:k4(e),setData:x4(e)}}function E4(e,t){return{data:p4(t),get:d4(t),links:v4(t),new:y4(t),put:b4(e,t),stat:g4(t),patch:_4(t)}}var S4=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(Rb(t));case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=62;break}return c=u.value,l=c.path,f=c.recursive,h=c.metadata,n.next=10,Mf(e.post("pin/add",{signal:r.signal,searchParams:C2(jn(jn({},r),{},{arg:l,recursive:f,metadata:h?JSON.stringify(h):void 0,stream:!0})),headers:r.headers}));case 10:p=n.sent,d=!1,v=!1,n.prev=13,b=zn(p.ndjson());case 15:return n.next=17,Mf(b.next());case 17:if(!(d=!(g=n.sent).done)){n.next=43;break}if(!(m=g.value).Pins){n.next=38;break}w=Ni(m.Pins),n.prev=21,w.s();case 23:if((k=w.n()).done){n.next=29;break}return x=k.value,n.next=27,wi.parse(x);case 27:n.next=23;break;case 29:n.next=34;break;case 31:n.prev=31,n.t0=n.catch(21),w.e(n.t0);case 34:return n.prev=34,w.f(),n.finish(34);case 37:return n.abrupt("continue",40);case 38:return n.next=40,wi.parse(m);case 40:d=!1,n.next=15;break;case 43:n.next=49;break;case 45:n.prev=45,n.t1=n.catch(13),v=!0,y=n.t1;case 49:if(n.prev=49,n.prev=50,!d||null==b.return){n.next=54;break}return n.next=54,Mf(b.return());case 54:if(n.prev=54,!v){n.next=57;break}throw y;case 57:return n.finish(54);case 58:return n.finish(49);case 59:a=!1,n.next=4;break;case 62:n.next=68;break;case 64:n.prev=64,n.t2=n.catch(2),i=!0,o=n.t2;case 68:if(n.prev=68,n.prev=69,!a||null==s.return){n.next=73;break}return n.next=73,Mf(s.return());case 73:if(n.prev=73,!i){n.next=76;break}throw o;case 76:return n.finish(73);case 77:return n.finish(68);case 78:case"end":return n.stop()}}),n,null,[[2,64,68,78],[13,45,49,59],[21,31,34,37],[50,,54,58],[69,,73,77]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function A4(e){var t=S4(e);return x2((function(){function e(){return e=An(En().mark((function e(r){var n,a=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",Sb(t([jn({path:r},n)],n)));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return function(t){return e.apply(this,arguments)}}))(e)}function C4(e,t,r){var n={type:e,cid:wi.parse(t)};return r&&(n.metadata=r),n}var I4=x2((function(e){function t(){return t=Hn((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En().mark((function r(){var n,a,i,o,s,u,c,l,f,h,p;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=[],t.paths&&(n=Array.isArray(t.paths)?t.paths:[t.paths]),r.next=4,Mf(e.post("pin/ls",{signal:t.signal,searchParams:C2(jn(jn({},t),{},{arg:n.map((function(e){return"".concat(e)})),stream:!0})),headers:t.headers}));case 4:a=r.sent,i=!1,o=!1,r.prev=7,u=zn(a.ndjson());case 9:return r.next=11,Mf(u.next());case 11:if(!(i=!(c=r.sent).done)){r.next=28;break}if(!(l=c.value).Keys){r.next=23;break}f=0,h=Object.keys(l.Keys);case 15:if(!(f<h.length)){r.next=22;break}return p=h[f],r.next=19,C4(l.Keys[p].Type,p,l.Keys[p].Metadata);case 19:f++,r.next=15;break;case 22:return r.abrupt("return");case 23:return r.next=25,C4(l.Type,l.Cid,l.Metadata);case 25:i=!1,r.next=9;break;case 28:r.next=34;break;case 30:r.prev=30,r.t0=r.catch(7),o=!0,s=r.t0;case 34:if(r.prev=34,r.prev=35,!i||null==u.return){r.next=39;break}return r.next=39,Mf(u.return());case 39:if(r.prev=39,!o){r.next=42;break}throw s;case 42:return r.finish(39);case 43:return r.finish(34);case 44:case"end":return r.stop()}}),r,null,[[7,30,34,44],[35,,39,43]])}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),T4=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(Rb(t));case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=49;break}return c=u.value,l=c.path,f=c.recursive,(h=new URLSearchParams(r.searchParams)).append("arg","".concat(l)),null!=f&&h.set("recursive",String(f)),n.next=13,Mf(e.post("pin/rm",{signal:r.signal,headers:r.headers,searchParams:C2(jn(jn({},r),{},{arg:"".concat(l),recursive:f}))}));case 13:p=n.sent,d=!1,v=!1,n.prev=16,b=zn(p.ndjson());case 18:return n.next=20,Mf(b.next());case 20:if(!(d=!(g=n.sent).done)){n.next=30;break}if(!(m=g.value).Pins){n.next=25;break}return n.delegateYield(Cb(zn(m.Pins.map((function(e){return wi.parse(e)})))),"t0",24);case 24:return n.abrupt("continue",27);case 25:return n.next=27,wi.parse(m);case 27:d=!1,n.next=18;break;case 30:n.next=36;break;case 32:n.prev=32,n.t1=n.catch(16),v=!0,y=n.t1;case 36:if(n.prev=36,n.prev=37,!d||null==b.return){n.next=41;break}return n.next=41,Mf(b.return());case 41:if(n.prev=41,!v){n.next=44;break}throw y;case 44:return n.finish(41);case 45:return n.finish(36);case 46:a=!1,n.next=4;break;case 49:n.next=55;break;case 51:n.prev=51,n.t2=n.catch(2),i=!0,o=n.t2;case 55:if(n.prev=55,n.prev=56,!a||null==s.return){n.next=60;break}return n.next=60,Mf(s.return());case 60:if(n.prev=60,!i){n.next=63;break}throw o;case 63:return n.finish(60);case 64:return n.finish(55);case 65:case"end":return n.stop()}}),n,null,[[2,51,55,65],[16,32,36,46],[37,,41,45],[56,,60,64]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),D4=function(e){var t=T4(e);return x2((function(){function e(){return e=An(En().mark((function e(r){var n,a=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",Sb(t([jn({path:r},n)],n)));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return function(t){return e.apply(this,arguments)}}))(e)},R4=function(e){var t=e.Name,r=e.Status,n=e.Cid;return{cid:wi.parse(n),name:t,status:r}},P4=function(e){if("string"===typeof e&&""!==e)return e;throw new TypeError("service name must be passed")},N4=function(e){if(wi.asCID(e))return e.toString();throw new TypeError("CID instance expected instead of ".concat(typeof e))},L4=function(e){var t=e.service,r=e.cid,n=e.name,a=e.status,i=e.all,o=C2({service:P4(t),name:n,force:!!i||void 0});if(r){var s,u=Ni(r);try{for(u.s();!(s=u.n()).done;){var c=s.value;o.append("cid",N4(c))}}catch(eL){u.e(eL)}finally{u.f()}}if(a){var l,f=Ni(a);try{for(f.s();!(l=f.n()).done;){var h=l.value;o.append("status",h)}}catch(eL){f.e(eL)}finally{f.f()}}return o},O4=function(e){var t=e.cid,r=e.service,n=e.background,a=e.name,i=e.origins,o=C2({arg:N4(t),service:P4(r),name:a,background:!!n||void 0});if(i){var s,u=Ni(i);try{for(u.s();!(s=u.n()).done;){var c=s.value;o.append("origin",c.toString())}}catch(eL){u.e(eL)}finally{u.f()}}return o},B4=["timeout","signal","headers"];function U4(e){function t(){return(t=An(En().mark((function t(r,n){var a,i,o,s,u;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.timeout,i=n.signal,o=n.headers,s=_2(n,B4),t.next=3,e.post("pin/remote/add",{timeout:a,signal:i,headers:o,searchParams:O4(jn({cid:r},s))});case 3:return u=t.sent,t.t0=R4,t.next=7,u.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}var M4=["timeout","signal","headers"];function z4(e){function t(){return(t=Hn((function(t){var r=t.timeout,n=t.signal,a=t.headers,i=_2(t,M4);return En().mark((function t(){var o,s,u,c,l,f,h;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Mf(e.post("pin/remote/ls",{timeout:r,signal:n,headers:a,searchParams:L4(i)}));case 2:o=t.sent,s=!1,u=!1,t.prev=5,l=zn(o.ndjson());case 7:return t.next=9,Mf(l.next());case 9:if(!(s=!(f=t.sent).done)){t.next=16;break}return h=f.value,t.next=13,R4(h);case 13:s=!1,t.next=7;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(5),u=!0,c=t.t0;case 22:if(t.prev=22,t.prev=23,!s||null==l.return){t.next=27;break}return t.next=27,Mf(l.return());case 27:if(t.prev=27,!u){t.next=30;break}throw c;case 30:return t.finish(27);case 31:return t.finish(22);case 32:case"end":return t.stop()}}),t,null,[[5,18,22,32],[23,,27,31]])}))()}))).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}var F4=["timeout","signal","headers"];function V4(e){function t(){return(t=An(En().mark((function t(r){var n,a,i,o;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.timeout,a=r.signal,i=r.headers,o=_2(r,F4),t.next=3,e.post("pin/remote/rm",{timeout:n,signal:a,headers:i,searchParams:L4(jn(jn({},o),{},{all:!1}))});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}var j4=["timeout","signal","headers"];function q4(e){function t(){return(t=An(En().mark((function t(r){var n,a,i,o;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.timeout,a=r.signal,i=r.headers,o=_2(r,j4),t.next=3,e.post("pin/remote/rm",{timeout:n,signal:a,headers:i,searchParams:L4(jn(jn({},o),{},{all:!0}))});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}function K4(e){var t=String(e);if("undefined"===t)throw Error("endpoint is required");return"/"===t[t.length-1]?t.slice(0,-1):t}function H4(e){return jn({service:e.Service,endpoint:new URL(e.ApiEndpoint)},e.Stat&&{stat:G4(e.Stat)})}function G4(e){switch(e.Status){case"valid":var t=e.PinCount,r=t.Pinning,n=t.Pinned;return{status:"valid",pinCount:{queued:t.Queued,pinning:r,pinned:n,failed:t.Failed}};case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function W4(e){function t(){return(t=An(En().mark((function t(r,n){var a,i,o,s,u;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.endpoint,i=n.key,o=n.headers,s=n.timeout,u=n.signal,t.next=3,e.post("pin/remote/service/add",{timeout:s,signal:u,searchParams:C2({arg:[r,K4(a),i]}),headers:o});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}function Y4(e){function t(){return t=An(En().mark((function t(){var r,n,a,i,o,s,u,c,l=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>0&&void 0!==l[0]?l[0]:{},n=r.stat,a=r.headers,i=r.timeout,o=r.signal,t.next=4,e.post("pin/remote/service/ls",{timeout:i,signal:o,headers:a,searchParams:!0===n?C2({stat:n}):void 0});case 4:return s=t.sent,t.next=7,s.json();case 7:return u=t.sent,c=u.RemoteServices,t.abrupt("return",c.map(H4));case 10:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}function Q4(e){function t(){return t=An(En().mark((function t(r){var n,a=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:C2({arg:r})});case 3:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}function J4(e){var t=new k2(e);return{add:W4(t),ls:Y4(t),rm:Q4(t)}}function Z4(e){var t=new k2(e);return{add:U4(t),ls:z4(t),rm:V4(t),rmAll:q4(t),service:J4(e)}}function X4(e){return{addAll:S4(e),add:A4(e),ls:I4(e),rmAll:T4(e),rm:D4(e),remote:Z4(e)}}var $4=function(e){return Array.isArray(e)?e.map(e5):e},e5=function(e){return kh(t5(e))},t5=function(e){return eu.decode(e)},r5=function(e){return BigInt("0x".concat(kh(eu.decode(e),"base16")))},n5=function(e){return eu.encode(Bf(e))},a5=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("pubsub/ls",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return t.next=5,t.sent.json();case 5:return n=t.sent,a=n.Strings,t.abrupt("return",$4(a)||[]);case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),i5=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o,s=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("pubsub/peers",{signal:n.signal,searchParams:C2(jn({arg:n5(r)},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,o=i.Strings,t.abrupt("return",o||[]);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),o5=x2((function(e){function t(){return t=An(En().mark((function t(r,n){var a,i,o,s,u,c=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:{},i=C2(jn({arg:n5(r)},a)),o=new AbortController,s=K2(o.signal,a.signal),t.t0=e,t.t1=jn,t.t2={signal:s,searchParams:i},t.next=9,V2([n],o,a.headers);case 9:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=13,t.t0.post.call(t.t0,"pubsub/pub",t.t4);case 13:return u=t.sent,t.next=16,u.text();case 16:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),s5=ua("ipfs-http-client:pubsub:subscribe");function u5(e,t){return c5.apply(this,arguments)}function c5(){return(c5=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h,p;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.onMessage,a=r.onEnd,i=(i=r.onError)||s5,e.prev=2,o=!1,s=!1,e.prev=5,c=zn(t.ndjson());case 7:return e.next=9,c.next();case 9:if(!(o=!(l=e.sent).done)){e.next=24;break}if(f=l.value,e.prev=11,f.from){e.next=14;break}return e.abrupt("continue",21);case 14:null!=f.from&&null!=f.seqno?n({type:"signed",from:kb(f.from),data:t5(f.data),sequenceNumber:r5(f.seqno),topic:e5(f.topicIDs[0]),key:t5(null!==(h=f.key)&&void 0!==h?h:"u"),signature:t5(null!==(p=f.signature)&&void 0!==p?p:"u")}):n({type:"unsigned",data:t5(f.data),topic:e5(f.topicIDs[0])}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(11),e.t0.message="Failed to parse pubsub message: ".concat(e.t0.message),i(e.t0,!1,f);case 21:o=!1,e.next=7;break;case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(5),s=!0,u=e.t1;case 30:if(e.prev=30,e.prev=31,!o||null==c.return){e.next=35;break}return e.next=35,c.return();case 35:if(e.prev=35,!s){e.next=38;break}throw u;case 38:return e.finish(35);case 39:return e.finish(30);case 40:e.next=45;break;case 42:e.prev=42,e.t2=e.catch(2),l5(e.t2)||i(e.t2,!0);case 45:return e.prev=45,a(),e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[2,42,45,48],[5,26,30,40],[11,17],[31,,35,39]])})))).apply(this,arguments)}var l5=function(e){switch(e.type){case"aborted":case"abort":return!0;default:return"AbortError"===e.name}},f5=function(e,t){function r(){return(r=An(En().mark((function e(r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.unsubscribe(r,n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(e,t){return r.apply(this,arguments)}},h5=function(){function e(){Cn(this,e),this._subs=new Map}return Dn(e,[{key:"subscribe",value:function(e,t,r){var n=this,a=this._subs.get(e)||[];if(a.find((function(e){return e.handler===t})))throw new Error("Already subscribed to ".concat(e," with this handler"));var i=new AbortController;return this._subs.set(e,[{handler:t,controller:i}].concat(a)),r&&r.addEventListener("abort",(function(){return n.unsubscribe(e,t)})),i.signal}},{key:"unsubscribe",value:function(e,t){var r,n=this._subs.get(e)||[];t?(this._subs.set(e,n.filter((function(e){return e.handler!==t}))),r=n.filter((function(e){return e.handler===t}))):(this._subs.set(e,[]),r=n),(this._subs.get(e)||[]).length||this._subs.delete(e),r.forEach((function(e){return e.controller.abort()}))}}]),e}();function p5(e){var t,r,n=new h5;return{ls:a5(e),peers:i5(e),publish:o5(e),subscribe:(t=e,r=n,x2((function(e){function t(){return t=An(En().mark((function t(n,a){var i,o,s,u,c,l=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=l.length>2&&void 0!==l[2]?l[2]:{}).signal=r.subscribe(n,a,i.signal),u=new Promise((function(e,t){o=e,s=t})),c=setTimeout((function(){return o()}),1e3),e.post("pubsub/sub",{signal:i.signal,searchParams:C2(jn({arg:n5(n)},i)),headers:i.headers}).catch((function(e){r.unsubscribe(n,a),s(e)})).then((function(e){clearTimeout(c),e&&(u5(e,{onMessage:function(e){a&&("function"!==typeof a?"function"===typeof a.handleEvent&&a.handleEvent(e):a(e))},onEnd:function(){return r.unsubscribe(n,a)},onError:i.onError}),o())})),t.abrupt("return",u);case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}))(t)),unsubscribe:f5(0,n)}}var d5=x2((function(e){function t(){return t=Hn((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En().mark((function r(){var n;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Mf(e.post("refs/local",{signal:t.signal,transform:n3,searchParams:C2(t),headers:t.headers}));case 2:return n=r.sent,r.delegateYield(Cb(zn(n.ndjson())),"t0",4);case 4:case"end":return r.stop()}}),r)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),v5=x2((function(e,t){var r=function(){var t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=Array.isArray(t)?t:[t],n.next=3,Mf(e.post("refs",{signal:r.signal,searchParams:C2(jn({arg:a.map((function(e){return"".concat(e instanceof Uint8Array?wi.decode(e):e)}))},r)),headers:r.headers,transform:n3}));case 3:return i=n.sent,n.delegateYield(Cb(zn(i.ndjson())),"t0",5);case 5:case"end":return n.stop()}}),n)}))()}));return function(e){return t.apply(this,arguments)}}();return Object.assign(r,{local:d5(t)})})),y5=x2((function(e){function t(){return t=Hn((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En().mark((function r(){var n;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Mf(e.post("repo/gc",{signal:t.signal,searchParams:C2(t),headers:t.headers,transform:function(e){return{err:e.Error?new Error(e.Error):null,cid:(e.Key||{})["/"]?wi.parse(e.Key["/"]):null}}}));case 2:return n=r.sent,r.delegateYield(Cb(zn(n.ndjson())),"t0",4);case 4:case"end":return r.stop()}}),r)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),b5=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("repo/stat",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",{numObjects:BigInt(a.NumObjects),repoSize:BigInt(a.RepoSize),repoPath:a.RepoPath,version:a.Version,storageMax:BigInt(a.StorageMax)});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),g5=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("repo/version",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return t.next=5,t.sent.json();case 5:return n=t.sent,t.abrupt("return",n.Version);case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function m5(e){return{gc:y5(e),stat:b5(e),version:g5(e)}}var w5=x2((function(e){function t(){return t=Hn((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En().mark((function r(){var n;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Mf(e.post("stats/bw",{signal:t.signal,searchParams:C2(t),headers:t.headers,transform:function(e){return{totalIn:BigInt(e.TotalIn),totalOut:BigInt(e.TotalOut),rateIn:parseFloat(e.RateIn),rateOut:parseFloat(e.RateOut)}}}));case 2:return n=r.sent,r.delegateYield(Cb(zn(n.ndjson())),"t0",4);case 4:case"end":return r.stop()}}),r)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function k5(e){return{bitswap:D2(e),repo:b5(e),bw:w5(e)}}var x5=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("swarm/addrs",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Addrs,t.abrupt("return",Object.keys(i).map((function(e){return{id:kb(e),addrs:(i[e]||[]).map((function(e){return Gd(e)}))}})));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),_5=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o,s=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("swarm/connect",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,o=i.Strings,t.abrupt("return",o||[]);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),E5=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o,s=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("swarm/disconnect",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,o=i.Strings,t.abrupt("return",o||[]);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),S5=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("swarm/addrs/local",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Strings,t.abrupt("return",(i||[]).map((function(e){return Gd(e)})));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),A5=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("swarm/peers",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Peers,t.abrupt("return",(i||[]).map((function(e){return{addr:Gd(e.Addr),peer:kb(e.Peer),muxer:e.Muxer,latency:e.Latency,streams:e.Streams,direction:null==e.Direction?void 0:0===e.Direction?"inbound":"outbound"}})));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function C5(e){return{addrs:x5(e),connect:_5(e),disconnect:E5(e),localAddrs:S5(e),peers:A5(e)}}var I5=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=new AbortController,i=K2(a.signal,r.signal),n.next=4,Mf(V2(t,a,r.headers));case 4:return o=n.sent,s=o.headers,u=o.body,c=o.total,l=o.parts,f="function"===typeof r.progress?T5(c,l,r.progress):[void 0,void 0],h=Ia(f,2),p=h[0],d=h[1],n.next=12,Mf(e.post("add",{searchParams:C2(jn(jn({"stream-channels":!0},r),{},{progress:Boolean(p)})),onUploadProgress:d,signal:i,headers:s,body:u}));case 12:v=n.sent,y=!1,b=!1,n.prev=15,m=zn(v.ndjson());case 17:return n.next=19,Mf(m.next());case 19:if(!(y=!(w=n.sent).done)){n.next=31;break}if(void 0===(k=n3(k=w.value)).hash){n.next=27;break}return n.next=25,R5(k);case 25:n.next=28;break;case 27:p&&p(k.bytes||0,k.name);case 28:y=!1,n.next=17;break;case 31:n.next=37;break;case 33:n.prev=33,n.t0=n.catch(15),b=!0,g=n.t0;case 37:if(n.prev=37,n.prev=38,!y||null==m.return){n.next=42;break}return n.next=42,Mf(m.return());case 42:if(n.prev=42,!b){n.next=45;break}throw g;case 45:return n.finish(42);case 46:return n.finish(37);case 47:case"end":return n.stop()}}),n,null,[[15,33,37,47],[38,,42,46]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),T5=function(e,t,r){return t?[void 0,D5(e,t,r)]:[r,void 0]},D5=function(e,t,r){var n=0,a=t.length;return function(i){for(var o=i.loaded,s=i.total,u=Math.floor(o/s*e);n<a;){var c=t[n],l=c.start,f=c.end,h=c.name;if(u<f){r(u-l,h);break}r(f-l,h),n+=1}}};function R5(e){var t=e.name,r=e.hash,n=e.size,a=e.mode,i=e.mtime,o=e.mtimeNsecs,s={path:t,cid:wi.parse(r),size:parseInt(n)};return null!=a&&(s.mode=parseInt(a,8)),null!=i&&(s.mtime={secs:i,nsecs:o||0}),s}function P5(e){var t=I5(e);return x2((function(){function e(){return e=An(En().mark((function e(r){var n,a=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,Sb(t(KA(r),n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return function(t){return e.apply(this,arguments)}}))(e)}var N5=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(e.post("cat",{signal:r.signal,searchParams:C2(jn({arg:t.toString()},r)),headers:r.headers}));case 2:return a=n.sent,n.delegateYield(Cb(zn(a.iterator())),"t0",4);case 4:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),L5=x2((function(e){var t=function(){var t=An(En().mark((function t(){var r,n,a=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("commands",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t})),O5=x2((function(e){var t=function(){var t=An(En().mark((function t(r){var n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("dns",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",i.Path);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t})),B5=x2((function(e){return function(){var t=new URL(e.opts.base||"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}})),U5=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=jn({arg:"".concat(t instanceof Uint8Array?wi.decode(t):t)},r)).compressionLevel&&(a["compression-level"]=a.compressionLevel,delete a.compressionLevel),n.next=4,Mf(e.post("get",{signal:r.signal,searchParams:C2(a),headers:r.headers}));case 4:return i=n.sent,n.delegateYield(Cb(zn(i.iterator())),"t0",6);case 6:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),M5=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a,i,o=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("id",{signal:r.signal,searchParams:C2(jn({arg:r.peerId?r.peerId.toString():void 0},r)),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,(i=jn({},n3(a))).id=kb(i.id),i.addresses&&(i.addresses=i.addresses.map((function(e){return Gd(e)}))),t.abrupt("return",i);case 11:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),z5=function(e){var t=M5(e);function r(){return r=An(En().mark((function e(){var r,n,a=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,t(r);case 3:return n=e.sent,e.abrupt("return",Boolean(n&&n.addresses&&n.addresses.length));case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return function(){return r.apply(this,arguments)}},F5=x2((function(e,t){function r(){return r=Hn((function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function a(){var i,o,s,u,c,l,f,h,p,d,v;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=function(){return s=An(En().mark((function e(r){var n,a,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=r.Hash).includes("/")){e.next=9;break}return a=n.startsWith("/ipfs/")?n:"/ipfs/".concat(n),e.next=5,q3(t)(a);case 5:o=e.sent,n=o.cid,e.next=10;break;case 9:n=wi.parse(n);case 10:return s={name:r.Name,path:i+(r.Name?"/".concat(r.Name):""),size:r.Size,cid:n,type:V5(r)},r.Mode&&(s.mode=parseInt(r.Mode,8)),void 0!==r.Mtime&&null!==r.Mtime&&(s.mtime={secs:r.Mtime},void 0!==r.MtimeNsecs&&null!==r.MtimeNsecs&&(s.mtime.nsecs=r.MtimeNsecs)),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)},o=function(e){return s.apply(this,arguments)},i="".concat(r instanceof Uint8Array?wi.decode(r):r),a.next=5,Mf(e.post("ls",{signal:n.signal,searchParams:C2(jn({arg:i},n)),headers:n.headers}));case 5:u=a.sent,c=!1,l=!1,a.prev=8,h=zn(u.ndjson());case 10:return a.next=12,Mf(h.next());case 12:if(!(c=!(p=a.sent).done)){a.next=31;break}if(d=(d=p.value).Objects){a.next=17;break}throw new Error("expected .Objects in results");case 17:if(d=d[0]){a.next=20;break}throw new Error("expected one array in results.Objects");case 20:if(v=d.Links,Array.isArray(v)){a.next=23;break}throw new Error("expected one array in results.Objects[0].Links");case 23:if(v.length){a.next=27;break}return a.next=26,o(d);case 26:return a.abrupt("return");case 27:return a.delegateYield(Cb(zn(v.map(o))),"t0",28);case 28:c=!1,a.next=10;break;case 31:a.next=37;break;case 33:a.prev=33,a.t1=a.catch(8),l=!0,f=a.t1;case 37:if(a.prev=37,a.prev=38,!c||null==h.return){a.next=42;break}return a.next=42,Mf(h.return());case 42:if(a.prev=42,!l){a.next=45;break}throw f;case 45:return a.finish(42);case 46:return a.finish(37);case 47:case"end":return a.stop()}}),a,null,[[8,33,37,47],[38,,42,46]])}))()})),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}));function V5(e){switch(e.Type){case 1:case 5:return"dir";default:return"file"}}var j5=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("dns",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.t0=n3,t.next=7,n.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),q5=x2((function(e){function t(){return t=Hn((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(e.post("ping",{signal:r.signal,searchParams:C2(jn({arg:"".concat(t)},r)),headers:r.headers,transform:n3}));case 2:return a=n.sent,n.delegateYield(Cb(zn(a.ndjson())),"t0",4);case 4:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),K5=x2((function(e){function t(){return t=An(En().mark((function t(r){var n,a,i,o,s=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("resolve",{signal:n.signal,searchParams:C2(jn({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,o=i.Path,t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),H5=x2((function(e){var t=function(){var e=An(En().mark((function e(){var t=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw t.length>0&&void 0!==t[0]?t[0]:{},ca(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t})),G5=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("shutdown",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),W5=x2((function(e){function t(){return t=An(En().mark((function t(){var r,n,a=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("version",{signal:r.signal,searchParams:C2(r),headers:r.headers});case 3:return n=t.sent,t.t0=jn,t.t1=jn,t.t2={},t.t3=n3,t.next=10,n.json();case 10:return t.t4=t.sent,t.t5=(0,t.t3)(t.t4),t.t6=(0,t.t1)(t.t2,t.t5),t.t7={},t.t8={"ipfs-http-client":"1.0.0"},t.abrupt("return",(0,t.t0)(t.t6,t.t7,t.t8));case 16:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));__webpack_require__(1025),__webpack_require__(7575);var Y5=Object.create(null);Y5.open="0",Y5.close="1",Y5.ping="2",Y5.pong="3",Y5.message="4",Y5.upgrade="5",Y5.noop="6";var Q5=Object.create(null);Object.keys(Y5).forEach((function(e){Q5[Y5[e]]=e}));for(var J5={type:"error",data:"parser error"},Z5="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),X5="function"===typeof ArrayBuffer,$5=function(e,t){var r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)},e6=function(e,t,r){var n,a=e.type,i=e.data;return Z5&&i instanceof Blob?t?r(i):$5(i,r):X5&&(i instanceof ArrayBuffer||(n=i,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer))?t?r(i):$5(new Blob([i]),r):r(Y5[a]+(i||""))},t6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r6="undefined"===typeof Uint8Array?[]:new Uint8Array(256),n6=0;n6<t6.length;n6++)r6[t6.charCodeAt(n6)]=n6;var a6="function"===typeof ArrayBuffer,i6=function(e,t){if(a6){var r=function(e){var t,r,n,a,i,o=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),l=new Uint8Array(c);for(t=0;t<s;t+=4)r=r6[e.charCodeAt(t)],n=r6[e.charCodeAt(t+1)],a=r6[e.charCodeAt(t+2)],i=r6[e.charCodeAt(t+3)],l[u++]=r<<2|n>>4,l[u++]=(15&n)<<4|a>>2,l[u++]=(3&a)<<6|63&i;return c}(e);return o6(r,t)}return{base64:!0,data:e}},o6=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},s6=function(e,t){if("string"!==typeof e)return{type:"message",data:o6(e,t)};var r=e.charAt(0);return"b"===r?{type:"message",data:i6(e.substring(1),t)}:Q5[r]?e.length>1?{type:Q5[r],data:e.substring(1)}:{type:Q5[r]}:J5},u6=String.fromCharCode(30);function c6(e){if(e)return function(e){for(var t in c6.prototype)e[t]=c6.prototype[t];return e}(e)}c6.prototype.on=c6.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},c6.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},c6.prototype.off=c6.prototype.removeListener=c6.prototype.removeAllListeners=c6.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<n.length;a++)if((r=n[a])===t||r.fn===t){n.splice(a,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},c6.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var a=(r=r.slice(0)).length;n<a;++n)r[n].apply(this,t)}return this},c6.prototype.emitReserved=c6.prototype.emit,c6.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},c6.prototype.hasListeners=function(e){return!!this.listeners(e).length};var l6="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function f6(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((function(t,r){return e.hasOwnProperty(r)&&(t[r]=e[r]),t}),{})}var h6=setTimeout,p6=clearTimeout;function d6(e,t){t.useNativeTimers?(e.setTimeoutFn=h6.bind(l6),e.clearTimeoutFn=p6.bind(l6)):(e.setTimeoutFn=setTimeout.bind(l6),e.clearTimeoutFn=clearTimeout.bind(l6))}var v6,y6=function(e){Pn(r,e);var t=Un(r);function r(e,n,a){var i;return Cn(this,r),(i=t.call(this,e)).description=n,i.context=a,i.type="TransportError",i}return Dn(r)}(nu(Error)),b6=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this)).writable=!1,d6(On(n),e),n.opts=e,n.query=e.query,n.readyState="",n.socket=e.socket,n}return Dn(r,[{key:"onError",value:function(e,t,n){return Qs(Nn(r.prototype),"emitReserved",this).call(this,"error",new y6(e,t,n)),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,Qs(Nn(r.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=s6(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){Qs(Nn(r.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",Qs(Nn(r.prototype),"emitReserved",this).call(this,"close",e)}}]),r}(c6),g6="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),m6={},w6=0,k6=0;function x6(e){var t="";do{t=g6[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function _6(){var e=x6(+new Date);return e!==v6?(w6=0,v6=e):e+"."+x6(w6++)}for(;k6<64;k6++)m6[g6[k6]]=k6;function E6(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function S6(e){for(var t={},r=e.split("&"),n=0,a=r.length;n<a;n++){var i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}var A6=!1;try{A6="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(eL){}var C6=A6;function I6(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||C6))return new XMLHttpRequest}catch(r){}if(!t)try{return new(l6[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(r){}}function T6(){}var D6=null!=new I6({xdomain:!1}).responseType,R6=function(e){Pn(r,e);var t=Un(r);function r(e){var n;if(Cn(this,r),(n=t.call(this,e)).polling=!1,"undefined"!==typeof location){var a="https:"===location.protocol,i=location.port;i||(i=a?"443":"80"),n.xd="undefined"!==typeof location&&e.hostname!==location.hostname||i!==e.port,n.xs=e.secure!==a}var o=e&&e.forceBase64;return n.supportsBinary=D6&&!o,n}return Dn(r,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var r=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var n=0;this.polling&&(n++,this.once("pollComplete",(function(){--n||r()}))),this.writable||(n++,this.once("drain",(function(){--n||r()})))}else r()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var r=e.split(u6),n=[],a=0;a<r.length;a++){var i=s6(r[a],t);if(n.push(i),"error"===i.type)break}return n})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var r=e.length,n=new Array(r),a=0;e.forEach((function(e,i){e6(e,!1,(function(e){n[i]=e,++a===r&&t(n.join(u6))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",r="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=_6()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port);var n=E6(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new P6(this.uri(),e)}},{key:"doWrite",value:function(e,t){var r=this,n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(function(e,t){r.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,r){e.onError("xhr poll error",t,r)})),this.pollXhr=t}}]),r}(b6),P6=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a;return Cn(this,r),d6(On(a=t.call(this)),n),a.opts=n,a.method=n.method||"GET",a.uri=e,a.async=!1!==n.async,a.data=void 0!==n.data?n.data:null,a.create(),a}return Dn(r,[{key:"create",value:function(){var e=this,t=f6(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var n=this.xhr=new I6(t);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var a in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this.opts.extraHeaders[a])}catch(i){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{n.setRequestHeader("Accept","*/*")}catch(i){}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof n.status?n.status:0)}),0))},n.send(this.data)}catch(i){return void this.setTimeoutFn((function(){e.onError(i)}),0)}"undefined"!==typeof document&&(this.index=r.requestsCount++,r.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=T6,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete r.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),r}(c6);if(P6.requestsCount=0,P6.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",N6);else if("function"===typeof addEventListener){addEventListener("onpagehide"in l6?"pagehide":"unload",N6,!1)}function N6(){for(var e in P6.requests)P6.requests.hasOwnProperty(e)&&P6.requests[e].abort()}var L6="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},O6=l6.WebSocket||l6.MozWebSocket,B6="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),U6=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).supportsBinary=!e.forceBase64,n}return Dn(r,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,r=B6?{}:f6(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=B6?new O6(e,t,r):t?new O6(e,t):new O6(e)}catch(eL){return this.emitReserved("error",eL)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var r=function(){var r=e[n],a=n===e.length-1;e6(r,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(r){}a&&L6((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},n=0;n<e.length;n++)r()}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",r="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=_6()),this.supportsBinary||(e.b64=1);var n=E6(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}},{key:"check",value:function(){return!!O6}}]),r}(b6),M6={websocket:U6,polling:R6},z6=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,F6=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function V6(e){var t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));for(var a=z6.exec(e||""),i={},o=14;o--;)i[F6[o]]=a[o]||"";return-1!=r&&-1!=n&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){var r=/\/{2,9}/g,n=t.replace(r,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1);"/"==t.slice(-1)&&n.splice(n.length-1,1);return n}(0,i.path),i.queryKey=function(e,t){var r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(r[t]=n)})),r}(0,i.query),i}var j6=function(e){Pn(r,e);var t=Un(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Cn(this,r),n=t.call(this),e&&"object"===typeof e&&(a=e,e=null),e?(e=V6(e),a.hostname=e.host,a.secure="https"===e.protocol||"wss"===e.protocol,a.port=e.port,e.query&&(a.query=e.query)):a.host&&(a.hostname=V6(a.host).host),d6(On(n),a),n.secure=null!=a.secure?a.secure:"undefined"!==typeof location&&"https:"===location.protocol,a.hostname&&!a.port&&(a.port=n.secure?"443":"80"),n.hostname=a.hostname||("undefined"!==typeof location?location.hostname:"localhost"),n.port=a.port||("undefined"!==typeof location&&location.port?location.port:n.secure?"443":"80"),n.transports=a.transports||["polling","websocket"],n.readyState="",n.writeBuffer=[],n.prevBufferLen=0,n.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},a),n.opts.path=n.opts.path.replace(/\/$/,"")+"/","string"===typeof n.opts.query&&(n.opts.query=S6(n.opts.query)),n.id=null,n.upgrades=null,n.pingInterval=null,n.pingTimeout=null,n.pingTimeoutTimer=null,"function"===typeof addEventListener&&(n.opts.closeOnBeforeunload&&(n.beforeunloadEventListener=function(){n.transport&&(n.transport.removeAllListeners(),n.transport.close())},addEventListener("beforeunload",n.beforeunloadEventListener,!1)),"localhost"!==n.hostname&&(n.offlineEventListener=function(){n.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",n.offlineEventListener,!1))),n.open(),n}return Dn(r,[{key:"createTransport",value:function(e){var t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new M6[e](r)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,n=this.createTransport(e),a=!1;r.priorWebsocketSuccess=!1;var i=function(){a||(n.send([{type:"ping",data:"probe"}]),n.once("packet",(function(e){if(!a)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",n),!n)return;r.priorWebsocketSuccess="websocket"===n.name,t.transport.pause((function(){a||"closed"!==t.readyState&&(f(),t.setTransport(n),n.send([{type:"upgrade"}]),t.emitReserved("upgrade",n),n=null,t.upgrading=!1,t.flush())}))}else{var i=new Error("probe error");i.transport=n.name,t.emitReserved("upgradeError",i)}})))};function o(){a||(a=!0,f(),n.close(),n=null)}var s=function(e){var r=new Error("probe error: "+e);r.transport=n.name,o(),t.emitReserved("upgradeError",r)};function u(){s("transport closed")}function c(){s("socket closed")}function l(e){n&&e.name!==n.name&&o()}var f=function(){n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",u),t.off("close",c),t.off("upgrading",l)};n.once("open",i),n.once("error",s),n.once("close",u),this.once("close",c),this.once("upgrading",l),n.open()}},{key:"onOpen",value:function(){if(this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,r=0;r<this.writeBuffer.length;r++){var n=this.writeBuffer[r].data;if(n&&(t+="string"===typeof(e=n)?function(e){for(var t=0,r=0,n=0,a=e.length;n<a;n++)(t=e.charCodeAt(n))<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}(e):Math.ceil(1.33*(e.byteLength||e.size))),r>0&&t>this.maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,r){return this.sendPacket("message",e,t,r),this}},{key:"send",value:function(e,t,r){return this.sendPacket("message",e,t,r),this}},{key:"sendPacket",value:function(e,t,r,n){if("function"===typeof t&&(n=t,t=void 0),"function"===typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var a={type:e,data:t,options:r};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),n&&this.once("flush",n),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},r=function r(){e.off("upgrade",r),e.off("upgradeError",r),t()},n=function(){e.once("upgrade",r),e.once("upgradeError",r)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?n():t()})):this.upgrading?n():t()),this}},{key:"onError",value:function(e){r.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],r=0,n=e.length;r<n;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}]),r}(c6);j6.protocol=4;j6.protocol;var q6="function"===typeof ArrayBuffer,K6=Object.prototype.toString,H6="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===K6.call(Blob),G6="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===K6.call(File);function W6(e){return q6&&(e instanceof ArrayBuffer||function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||H6&&e instanceof Blob||G6&&e instanceof File}function Y6(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var r=0,n=e.length;r<n;r++)if(Y6(e[r]))return!0;return!1}if(W6(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Y6(e.toJSON(),!0);for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&Y6(e[a]))return!0;return!1}function Q6(e){var t=[],r=e.data,n=e;return n.data=J6(r,t),n.attachments=t.length,{packet:n,buffers:t}}function J6(e,t){if(!e)return e;if(W6(e)){var r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){for(var n=new Array(e.length),a=0;a<e.length;a++)n[a]=J6(e[a],t);return n}if("object"===typeof e&&!(e instanceof Date)){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=J6(e[o],t));return i}return e}function Z6(e,t){return e.data=X6(e.data,t),delete e.attachments,e}function X6(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=X6(e[r],t);else if("object"===typeof e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=X6(e[n],t));return e}var $6,e8=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}($6||($6={}));var t8=function(){function e(t){Cn(this,e),this.replacer=t}return Dn(e,[{key:"encode",value:function(e){return e.type!==$6.EVENT&&e.type!==$6.ACK||!Y6(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===$6.EVENT?$6.BINARY_EVENT:$6.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==$6.BINARY_EVENT&&e.type!==$6.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=Q6(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}}]),e}(),r8=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this)).reviver=e,n}return Dn(r,[{key:"add",value:function(e){var t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var n=(t=this.decodeString(e)).type===$6.BINARY_EVENT;n||t.type===$6.BINARY_ACK?(t.type=n?$6.EVENT:$6.ACK,this.reconstructor=new n8(t),0===t.attachments&&Qs(Nn(r.prototype),"emitReserved",this).call(this,"decoded",t)):Qs(Nn(r.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!W6(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,Qs(Nn(r.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,n={type:Number(e.charAt(0))};if(void 0===$6[n.type])throw new Error("unknown packet type "+n.type);if(n.type===$6.BINARY_EVENT||n.type===$6.BINARY_ACK){for(var a=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var i=e.substring(a,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){for(var o=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(o,t)}else n.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}n.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var l=this.tryParse(e.substr(t));if(!r.isPayloadValid(n.type,l))throw new Error("invalid payload");n.data=l}return n}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case $6.CONNECT:return"object"===typeof t;case $6.DISCONNECT:return void 0===t;case $6.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case $6.EVENT:case $6.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case $6.ACK:case $6.BINARY_ACK:return Array.isArray(t)}}}]),r}(c6),n8=function(){function e(t){Cn(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return Dn(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=Z6(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function a8(e,t,r){return e.on(t,r),function(){e.off(t,r)}}var i8=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),o8=function(e){Pn(r,e);var t=Un(r);function r(e,n,a){var i;return Cn(this,r),(i=t.call(this)).connected=!1,i.receiveBuffer=[],i.sendBuffer=[],i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=n,a&&a.auth&&(i.auth=a.auth),i.io._autoConnect&&i.open(),i}return Dn(r,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[a8(e,"open",this.onopen.bind(this)),a8(e,"packet",this.onpacket.bind(this)),a8(e,"error",this.onerror.bind(this)),a8(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(i8.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.unshift(e);var a={type:$6.EVENT,data:r,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof r[r.length-1]){var i=this.ids++,o=r.pop();this._registerAckCallback(i,o),a.id=i}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,u=this.flags.volatile&&(!s||!this.connected);return u||(this.connected?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var r=this,n=this.flags.timeout;if(void 0!==n){var a=this.io.setTimeoutFn((function(){delete r.acks[e];for(var n=0;n<r.sendBuffer.length;n++)r.sendBuffer[n].id===e&&r.sendBuffer.splice(n,1);t.call(r,new Error("operation has timed out"))}),n);this.acks[e]=function(){r.io.clearTimeoutFn(a);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(r,[null].concat(n))}}else this.acks[e]=t}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e.packet({type:$6.CONNECT,data:t})})):this.packet({type:$6.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case $6.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case $6.EVENT:case $6.BINARY_EVENT:this.onevent(e);break;case $6.ACK:case $6.BINARY_ACK:this.onack(e);break;case $6.DISCONNECT:this.ondisconnect();break;case $6.CONNECT_ERROR:this.destroy();var r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,n=Ni(this._anyListeners.slice());try{for(n.s();!(t=n.n()).done;){t.value.apply(this,e)}}catch(eL){n.e(eL)}finally{n.f()}}Qs(Nn(r.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];t.packet({type:$6.ACK,id:e,data:a})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:$6.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,r=Ni(this._anyOutgoingListeners.slice());try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e.data)}}catch(eL){r.e(eL)}finally{r.f()}}}}]),r}(c6);function s8(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}s8.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},s8.prototype.reset=function(){this.attempts=0},s8.prototype.setMin=function(e){this.ms=e},s8.prototype.setMax=function(e){this.max=e},s8.prototype.setJitter=function(e){this.jitter=e};var u8=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a,i;Cn(this,r),(a=t.call(this)).nsps={},a.subs=[],e&&"object"===typeof e&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",a.opts=n,d6(On(a),n),a.reconnection(!1!==n.reconnection),a.reconnectionAttempts(n.reconnectionAttempts||1/0),a.reconnectionDelay(n.reconnectionDelay||1e3),a.reconnectionDelayMax(n.reconnectionDelayMax||5e3),a.randomizationFactor(null!==(i=n.randomizationFactor)&&void 0!==i?i:.5),a.backoff=new s8({min:a.reconnectionDelay(),max:a.reconnectionDelayMax(),jitter:a.randomizationFactor()}),a.timeout(null==n.timeout?2e4:n.timeout),a._readyState="closed",a.uri=e;var o=n.parser||dt;return a.encoder=new o.Encoder,a.decoder=new o.Decoder,a._autoConnect=!1!==n.autoConnect,a._autoConnect&&a.open(),a}return Dn(r,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new j6(this.uri,this.opts);var r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;var a=a8(r,"open",(function(){n.onopen(),e&&e()})),i=a8(r,"error",(function(r){n.cleanup(),n._readyState="closed",t.emitReserved("error",r),e?e(r):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){var o=this._timeout;0===o&&a();var s=this.setTimeoutFn((function(){a(),r.close(),r.emit("error",new Error("timeout"))}),o);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(a),this.subs.push(i),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(a8(e,"ping",this.onping.bind(this)),a8(e,"data",this.ondata.bind(this)),a8(e,"error",this.onerror.bind(this)),a8(e,"close",this.onclose.bind(this)),a8(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}},{key:"ondecoded",value:function(e){var t=this;L6((function(){t.emitReserved("packet",e)}),this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var r=this.nsps[e];return r||(r=new o8(this,e,t),this.nsps[e]=r),r}},{key:"_destroy",value:function(e){for(var t=0,r=Object.keys(this.nsps);t<r.length;t++){var n=r[t];if(this.nsps[n].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),r=0;r<t.length;r++)this.engine.write(t[r],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var r=this.backoff.duration();this._reconnecting=!0;var n=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(r){r?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",r)):t.onreconnect()})))}),r);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),r}(c6),c8={};function l8(e,t){"object"===typeof e&&(t=e,e=void 0);var r,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=e;r=r||"undefined"!==typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof r?r.protocol+"//"+e:"https://"+e),n=V6(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+t,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}(e,(t=t||{}).path||"/socket.io"),a=n.source,i=n.id,o=n.path,s=c8[i]&&o in c8[i].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?r=new u8(a,t):(c8[i]||(c8[i]=new u8(a,t)),r=c8[i]),n.query&&!t.query&&(t.query=n.queryKey),r.socket(n.path,t)}Object.assign(l8,{Manager:u8,Socket:o8,io:l8,connect:l8});var f8=__webpack_require__(4288),h8=function(){function e(t,r){var n=this;Cn(this,e),this.label=t.label,this.open=xA(),this.channel=t,this.channel.binaryType="arraybuffer",this.log=r.log,"number"===typeof this.channel.bufferedAmountLowThreshold&&(this.channel.bufferedAmountLowThreshold=65536),t.addEventListener("message",(function(e){r.onMessage(e)})),t.addEventListener("bufferedamountlow",(function(){n.log("stop backpressure: bufferedAmount %d",n.channel.bufferedAmount),n.open.resolve()})),t.addEventListener("open",(function(){n.open.resolve(),r.onOpen()})),t.addEventListener("close",(function(){r.onClose()})),t.addEventListener("error",(function(e){var a,i,o,s,u;if("Transport channel closed"===(null===(a=e.error)||void 0===a?void 0:a.message))return n.close();r.log.error('channel encounter an error in state "%s" message: "%s" detail: "%s',t.readyState,null===(i=e.error)||void 0===i?void 0:i.message,null===(o=e.error)||void 0===o?void 0:o.errorDetail);var c=e.error instanceof Error?e.error:new Error("datachannel error: ".concat(null===(s=e.error)||void 0===s?void 0:s.message," ").concat(null===(u=e.error)||void 0===u?void 0:u.errorDetail));r.onError(ca(c,"ERR_DATA_CHANNEL"))}));var a=!1;this.closingInterval=setInterval((function(){"closing"===t.readyState?(a&&r.onClose(),a=!0):a=!1}),5e3)}return Dn(e,[{key:"send",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.open.promise;case 2:this.channel.send(t),this.channel.bufferedAmount>65536&&(this.log("start backpressure: bufferedAmount %d",this.channel.bufferedAmount),this.open=xA());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){clearInterval(this.closingInterval),this.channel.close()}},{key:"bufferedAmount",get:function(){return this.channel.bufferedAmount}}]),e}(),p8=__webpack_require__(7119),d8={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]};var v8=function(e){Pn(r,e);var t=Un(r);function r(e){var n,a,i;return Cn(this,r),(i=t.call(this)).id=null!==(n=e.id)&&void 0!==n?n:kh(f8(4),"hex").slice(0,7),i.log=ua("libp2p:webrtc-peer:".concat(e.logPrefix,":").concat(i.id)),i.wrtc=null!==(a=e.wrtc)&&void 0!==a?a:function(){var e,t,r,n,a,i;if("undefined"===typeof globalThis)throw ca(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");var o={RTCPeerConnection:null!==(e=null!==(t=globalThis.RTCPeerConnection)&&void 0!==t?t:globalThis.mozRTCPeerConnection)&&void 0!==e?e:globalThis.webkitRTCPeerConnection,RTCSessionDescription:null!==(r=null!==(n=globalThis.RTCSessionDescription)&&void 0!==n?n:globalThis.mozRTCSessionDescription)&&void 0!==r?r:globalThis.webkitRTCSessionDescription,RTCIceCandidate:null!==(a=null!==(i=globalThis.RTCIceCandidate)&&void 0!==i?i:globalThis.mozRTCIceCandidate)&&void 0!==a?a:globalThis.webkitRTCIceCandidate};if(null==o.RTCPeerConnection)throw ca(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");return o}(),i.peerConnection=new i.wrtc.RTCPeerConnection(Object.assign({},d8,e.peerConnectionConfig)),i.closed=!1,i.connected=xA(),i.source=pS(),i.sink=function(){var e=An(En().mark((function e(t){var r,n,a,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.connected.promise;case 2:if(null!=i.channel){e.next=4;break}throw ca(new Error("Connected but no channel?!"),"ERR_DATA_CHANNEL");case 4:r=!1,n=!1,e.prev=6,o=zn(t);case 8:return e.next=10,o.next();case 10:if(!(r=!(s=e.sent).done)){e.next=17;break}return u=s.value,e.next=14,i.channel.send(u);case 14:r=!1,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),n=!0,a=e.t0;case 23:if(e.prev=23,e.prev=24,!r||null==o.return){e.next=28;break}return e.next=28,o.return();case 28:if(e.prev=28,!n){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(23);case 33:return e.next=35,i.close();case 35:case"end":return e.stop()}}),e,null,[[6,19,23,33],[24,,28,32]])})));return function(t){return e.apply(this,arguments)}}(),i}return Dn(r,[{key:"handleDataChannelEvent",value:function(e){var t=this,r=e.channel;null!=r?this.channel=new h8(r,{log:this.log,onMessage:function(e){t.source.push(new Uint8Array(e.data))},onOpen:function(){t.connected.resolve(),t.dispatchEvent(new fZ("ready"))},onClose:function(){t.close().catch((function(e){t.log("error closing connection after channel close",e)}))},onError:function(e){t.close(e).catch((function(e){t.log("error closing connection after channel error",e)}))}}):this.close(ca(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL")).catch((function(e){t.log("Error closing after event channel was found to be null",e)}))}},{key:"close",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.closed=!0,null!=t||null==this.channel){e.next=7;break}case 2:if(!(this.channel.bufferedAmount>0)){e.next=7;break}return e.next=5,p8(100);case 5:e.next=2;break;case 7:null===(r=this.channel)||void 0===r||r.close(),this.peerConnection.close(),this.source.end(t),this.dispatchEvent(new fZ("close"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(cZ),y8=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this)).log=e.log,n.peerConnection=e.peerConnection,n.wrtc=e.wrtc,n.status="idle",n.peerConnection.addEventListener("negotiationneeded",(function(){n.log("peer connection negotiation needed"),n.handleRenegotiate({type:"renegotiate"}).catch((function(e){n.log.error("could not renegotiate %o",e)}))})),n}return Dn(r,[{key:"handleSignal",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log('incoming signal "%s"',t.type),"offer"!==t.type){e.next=7;break}return e.next=4,this.handleOffer(t);case 4:return e.abrupt("return",e.sent);case 7:if("answer"!==t.type){e.next=13;break}return e.next=10,this.handleAnswer(t);case 10:return e.abrupt("return",e.sent);case 13:if("candidate"!==t.type){e.next=19;break}return e.next=16,this.handleCandidate(t);case 16:return e.abrupt("return",e.sent);case 19:if("renegotiate"!==t.type){e.next=25;break}return e.next=22,this.handleRenegotiate(t);case 22:return e.abrupt("return",e.sent);case 25:if("goodbye"!==t.type){e.next=31;break}return e.next=28,this.handleGoodye(t);case 28:return e.abrupt("return",e.sent);case 31:this.log("Unknown signal type ".concat(t.type));case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleOffer",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleAnswer",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleRenegotiate",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleGoodye",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.peerConnection.close();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCandidate",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new this.wrtc.RTCIceCandidate(t.candidate),e.prev=1,e.next=4,this.peerConnection.addIceCandidate(r);case 4:e.next=13;break;case 6:if(e.prev=6,e.t0=e.catch(1),null!=r.address&&!r.address.endsWith(".local")){e.next=12;break}this.log("ignoring unsupported ICE candidate."),e.next=13;break;case 12:throw ca(e.t0,"ERR_ADD_ICE_CANDIDATE");case 13:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(cZ),b8=ua("libp2p:webrtc-peer:receiver"),g8=function(e){Pn(r,e);var t=Un(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Cn(this,r),(e=t.call(this,jn(jn({},n),{},{logPrefix:"receiver"}))).handshake=new m8({log:e.log,peerConnection:e.peerConnection,wrtc:e.wrtc,answerOptions:n.answerOptions}),e.handshake.addEventListener("signal",(function(t){return e.dispatchEvent(new fZ("signal",{detail:t.detail}))})),e.peerConnection.addEventListener("datachannel",(function(t){e.handleDataChannelEvent(t)})),e}return Dn(r,[{key:"handleSignal",value:function(e){var t=this;this.handshake.handleSignal(e).catch((function(r){t.log("error handling signal %o %o",e,r)}))}}]),r}(v8),m8=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).options=e,n.status="idle",n.iceCandidates=[],n}return Dn(r,[{key:"handleRenegotiate",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b8.trace("renegotiate"),this.dispatchEvent(new fZ("signal",{detail:{type:"renegotiate"}}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleOffer",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(t));case 2:n=Ni(this.iceCandidates),e.prev=3,n.s();case 5:if((a=n.n()).done){e.next=11;break}return i=a.value,e.next=9,this.handleCandidate(i);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:return this.iceCandidates=[],e.next=22,this.peerConnection.createAnswer(this.options.answerOptions);case 22:return o=e.sent,e.next=25,this.peerConnection.setLocalDescription(o);case 25:b8.trace("handle offer",this.peerConnection.localDescription),this.dispatchEvent(new fZ("signal",{detail:null!==(r=this.peerConnection.localDescription)&&void 0!==r?r:o}));case 27:case"end":return e.stop()}}),e,this,[[3,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCandidate",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.peerConnection.remoteDescription&&null!=this.peerConnection.remoteDescription.type){e.next=3;break}return this.iceCandidates.push(t),e.abrupt("return");case 3:return e.next=5,Qs(Nn(r.prototype),"handleCandidate",this).call(this,t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(y8),w8=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).name="TimeoutError",n}return Dn(r)}(nu(Error)),k8=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this)).name="AbortError",n.message=e,n}return Dn(r)}(nu(Error)),x8=function(e){return void 0===globalThis.DOMException?new k8(e):new DOMException(e)},_8=function(e){var t=void 0===e.reason?x8("This operation was aborted."):e.reason;return t instanceof Error?t:x8(t)};var E8=function(e){var t=e.on||e.addListener||e.addEventListener,r=e.off||e.removeListener||e.removeEventListener;if(!t||!r)throw new TypeError("Emitter is not compatible");return{addListener:t.bind(e),removeListener:r.bind(e)}};function S8(e,t,r){var n,a=new Promise((function(a,i){if(!((r=jn({rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1},r)).count>=0)||r.count!==Number.POSITIVE_INFINITY&&!Number.isInteger(r.count))throw new TypeError("The `count` option should be at least 0 or more");var o=[t].flat(),s=[],u=E8(e),c=u.addListener,l=u.removeListener,f=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=r.multiArgs?t:t[0];r.filter&&!r.filter(o)||(s.push(o),r.count===s.length&&(n(),a(s)))},h=function(e){n(),i(e)};n=function(){var e,t=Ni(o);try{for(t.s();!(e=t.n()).done;){var n=e.value;l(n,f)}}catch(eL){t.e(eL)}finally{t.f()}var a,i=Ni(r.rejectionEvents);try{for(i.s();!(a=i.n()).done;){var s=a.value;l(s,h)}}catch(eL){i.e(eL)}finally{i.f()}};var p,d=Ni(o);try{for(d.s();!(p=d.n()).done;){c(p.value,f)}}catch(eL){d.e(eL)}finally{d.f()}var v,y=Ni(r.rejectionEvents);try{for(y.s();!(v=y.n()).done;){c(v.value,h)}}catch(eL){y.e(eL)}finally{y.f()}r.resolveImmediately&&a(s)}));if(a.cancel=n,"number"===typeof r.timeout){var i=function(e,t,r,n){var a,i=new Promise((function(i,o){if("number"!==typeof t||1!==Math.sign(t))throw new TypeError("Expected `milliseconds` to be a positive number, got `".concat(t,"`"));if(t!==Number.POSITIVE_INFINITY){if((n=jn({customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout}},n)).signal){var s=n.signal;s.aborted&&o(_8(s)),s.addEventListener("abort",(function(){o(_8(s))}))}a=n.customTimers.setTimeout.call(void 0,(function(){if("function"!==typeof r){var n="string"===typeof r?r:"Promise timed out after ".concat(t," milliseconds"),a=r instanceof Error?r:new w8(n);"function"===typeof e.cancel&&e.cancel(),o(a)}else try{i(r())}catch(s){o(s)}}),t),An(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=i,t.next=4,e;case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),o(t.t2);case 11:return t.prev=11,n.customTimers.clearTimeout.call(void 0,a),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()}else i(e)}));return i.clear=function(){clearTimeout(a),a=void 0},i}(a,r.timeout);return i.cancel=n,i}return a}function A8(e,t,r){"function"===typeof r&&(r={filter:r});var n=S8(e,t,r=jn(jn({},r),{},{count:1,resolveImmediately:!1})),a=n.then((function(e){return e[0]}));return a.cancel=n.cancel,a}var C8=ua("libp2p:webrtc-peer:initator"),I8=function(e){Pn(r,e);var t=Un(r);function r(){var e,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Cn(this,r),(n=t.call(this,jn(jn({},a),{},{logPrefix:"initiator"}))).handleDataChannelEvent({channel:n.peerConnection.createDataChannel(null!==(e=a.dataChannelLabel)&&void 0!==e?e:kh(f8(20),"hex").slice(0,7),a.dataChannelInit)}),n.handshake=new T8({log:n.log,peerConnection:n.peerConnection,wrtc:n.wrtc,offerOptions:a.offerOptions}),n.handshake.addEventListener("signal",(function(e){n.dispatchEvent(new fZ("signal",{detail:e.detail}))})),n}return Dn(r,[{key:"handleSignal",value:function(e){var t=this;this.handshake.handleSignal(e).catch((function(r){t.log("error handling signal %o %o",e,r)}))}}]),r}(v8),T8=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,e)).options=e,n.status="idle",n.peerConnection.addEventListener("icecandidate",(function(e){if(null!=e.candidate){var t={type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}};C8.trace("create candidate",t),n.dispatchEvent(new fZ("signal",{detail:t})),n.dispatchEvent(new fZ("ice-candidate"))}})),n}return Dn(r,[{key:"handleRenegotiate",value:function(){var e=An(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("negotiating"!==this.status){e.next=3;break}return this.log("already negotiating, queueing"),e.abrupt("return");case 3:return this.status="negotiating",e.next=6,this.peerConnection.createOffer(this.options.offerOptions);case 6:return r=e.sent,e.next=9,this.peerConnection.setLocalDescription(r);case 9:return e.next=11,A8(this,"ice-candidate");case 11:return e.next=13,p8(1e3);case 13:C8.trace("renegotiate",this.peerConnection.localDescription),this.dispatchEvent(new fZ("signal",{detail:null!==(t=this.peerConnection.localDescription)&&void 0!==t?t:r}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleAnswer",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C8.trace("handle answer",t),e.next=3,this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(t));case 3:this.status="idle";case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(y8),D8=ua("libp2p:webrtc-star:socket");function R8(e,t){var r=e.sink,n=e.source,a={remoteAddr:t.remoteAddr,sink:function(e){return An(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null!=t.signal&&(e=U$(e,t.signal)),n.prev=1,n.next=4,r(e);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),"aborted"!==n.t0.type&&D8.error(n.t0);case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))()},source:null!=t.signal?U$(n,t.signal):n,timeline:{open:Date.now()},close:function(){return An(En().mark((function t(){var r,n;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.closed){t.next=2;break}return t.abrupt("return");case 2:return r=Date.now(),n=setTimeout((function(){if(null!=a.remoteAddr){var t=a.remoteAddr.toOptions(),n=t.host,i=t.port;D8("timeout closing socket to %s:%s after %dms, destroying it manually",n,i,Date.now()-r)}e.closed||e.close().catch((function(e){D8.error("could not close socket",e)}))}),2e3),t.prev=4,t.next=7,e.close();case 7:return t.prev=7,clearTimeout(n),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[4,,7,10]])})))()}};return e.addEventListener("close",(function(){null==a.timeline.close&&(a.timeline.close=Date.now())}),{once:!0}),a}function P8(e){var t,r=e.toString().split("/"),n=e.protos()[1].name,a=e.protos()[2].name,i=e.stringTuples()[1][1];if("tcp"!==n||"ws"!==a&&"wss"!==a)throw new Error("invalid multiaddr: ".concat(e.toString()));if(!Kd(t=e)||!t.protos().some((function(e){return e.resolvable})))return"http://".concat(r[2],":").concat(r[4]);if("ws"===a)return"http://".concat(r[2]).concat(null==i||"80"===i?"":":".concat(i));if("wss"===a)return"https://".concat(r[2]).concat(null==i||"443"===i?"":":".concat(i));throw new Error("invalid multiaddr: "+e.toString())}var N8=ua("libp2p:webrtc-star:listener"),L8={transports:["websocket"],path:"/socket.io-next/"},O8=function(e){Pn(r,e);var t=Un(r);function r(e,n,a,i,o){var s;Cn(this,r),(s=t.call(this)).signallingAddr=n,s.socket=l8(e,L8),s.connections=[],s.channels=new Map,s.pendingSignals=new Map,s.upgrader=a,s.handler=i,s.channelOptions=o,s.handleWsHandshake=s.handleWsHandshake.bind(On(s));var u=!1;return s.socket.on("connect_error",(function(e){u&&"TransportError"===e.type||s.dispatchEvent(new fZ("error",{detail:e}))})),s.socket.on("error",(function(e){s.dispatchEvent(new fZ("error",{detail:e}))})),s.socket.on("ws-handshake",s.handleWsHandshake),s.socket.on("ws-peer",(function(e){s.dispatchEvent(new fZ("peer",{detail:e}))})),s.socket.on("connect",(function(){s.socket.emit("ss-join",s.signallingAddr.toString()),u&&s.dispatchEvent(new fZ("reconnect"))})),s.socket.once("connect",(function(){u=!0,s.dispatchEvent(new fZ("listening"))})),s.socket.on("disconnect",(function(){s.dispatchEvent(new fZ("disconnect"))})),s}return Dn(r,[{key:"_createChannel",value:function(e,t,r){var n=this,a=jn({},this.channelOptions),i=new g8(a),o=function(e){var t=e.detail;N8.error("incoming connection errored",t)};return i.addEventListener("error",o),i.addEventListener("close",(function(){i.removeEventListener("error",o)}),{once:!0}),i.addEventListener("signal",(function(a){var i=a.detail;n.socket.emit("ss-handshake",{intentId:e,srcMultiaddr:t,dstMultiaddr:r,answer:!0,signal:i})})),i.addEventListener("ready",(function(){var t=R8(i,{remoteAddr:n.signallingAddr});N8("new inbound connection %s",t.remoteAddr);try{n.upgrader.upgradeInbound(t).then((function(r){N8("inbound connection %s upgraded",t.remoteAddr),n.connections.push(t);i.addEventListener("close",(function(){n.connections=n.connections.filter((function(e){return e!==t})),n.channels.delete(e),n.pendingSignals.delete(e)}),{once:!0}),n.dispatchEvent(new fZ("connection",{detail:r})),n.handler(r)})).catch((function(e){N8.error("inbound connection failed to upgrade",e),t.close().catch((function(e){N8.error("inbound connection failed to close after failing to upgrade",e)}))}))}catch(eL){N8.error("inbound connection failed to upgrade",eL),t.close().catch((function(e){N8.error("inbound connection failed to close after failing to upgrade",e)}))}}),{once:!0}),i}},{key:"handleWsHandshake",value:function(e){if(N8('incoming handshake. signal type "%s" is answer %s',e.signal.type,e.answer),!0!==e.answer&&null==e.err&&null!=e.intentId){var t=e.intentId,r=this.pendingSignals.get(t);null==r&&(r=[],this.pendingSignals.set(t,r)),r.push(e);var n=this.channels.get(t);if(null==n){if("offer"!==e.signal.type)return void N8("handshake is not an offer and channel does not exist, buffering until we receive an offer");N8("creating new channel to handle offer handshake"),n=this._createChannel(e.intentId,e.srcMultiaddr,e.dstMultiaddr),this.channels.set(t,n)}else N8("channel already exists, using it to handle handshake");for(;r.length>0;){var a=r.shift();null!=(null===a||void 0===a?void 0:a.signal)&&n.handleSignal(a.signal)}}}},{key:"close",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.socket.emit("ss-leave",this.signallingAddr.toString()),this.socket.removeAllListeners(),this.socket.close(),e.next=5,Promise.all([].concat(su(this.connections.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),su(Array.from(this.channels.values()).map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))));case 5:this.dispatchEvent(new fZ("close"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(cZ),B8=function(e){Pn(r,e);var t=Un(r);function r(e,n,a,i,o){var s;return Cn(this,r),(s=t.call(this)).upgrader=e,s.handler=n,s.peerId=a,s.transport=i,s.options=o,s}return Dn(r,[{key:"listen",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.listeningAddr){e.next=2;break}throw ca(new Error("listener already in use"),"ERR_ALREADY_LISTENING");case 2:return r=xA(),this.listeningAddr=t,n=t.protoCodes().includes(421)?t:t.encapsulate("/p2p/".concat(this.peerId.toString())),a=this.signallingUrl=P8(t),N8("connecting to signalling server on: %s",this.signallingUrl),(i=new O8(this.signallingUrl,n,this.upgrader,this.handler,this.options.channelOptions)).addEventListener("error",(function(e){var t=e.detail;N8("error connecting to signalling server %o",t),i.close().catch((function(e){N8.error("error closing server after error",e)})),r.reject(t)})),i.addEventListener("listening",(function(){N8("connected to signalling server"),o.dispatchEvent(new fZ("listening")),r.resolve()})),i.addEventListener("peer",(function(e){o.transport.peerDiscovered(e.detail)})),i.addEventListener("connection",(function(e){var r=e.detail;if(null==r.remoteAddr)try{r.remoteAddr=t.decapsulateCode(421).encapsulate("/p2p/".concat(r.remotePeer.toString()))}catch(eL){N8.error("could not determine remote address",eL)}o.dispatchEvent(new fZ("connection",{detail:r}))})),i.addEventListener("disconnect",(function(){o.transport.sigServers.delete(a)})),i.addEventListener("reconnect",(function(){o.transport.sigServers.set(a,i)})),this.transport.sigServers.set(this.signallingUrl,i),e.next=17,r.promise;case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.signallingUrl){e.next=6;break}if(null==(t=this.transport.sigServers.get(this.signallingUrl))){e.next=6;break}return e.next=5,t.close();case 5:this.transport.sigServers.delete(this.signallingUrl);case 6:this.dispatchEvent(new fZ("close")),this.listeningAddr=void 0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAddrs",value:function(){return null!=this.listeningAddr?[this.listeningAddr]:[]}}]),r}(cZ);var U8=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=M8;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},M8=Math.pow(2,31);var z8=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var F8=Math.pow(2,7),V8=Math.pow(2,14),j8=Math.pow(2,21),q8=Math.pow(2,28),K8=Math.pow(2,35),H8=Math.pow(2,42),G8=Math.pow(2,49),W8=Math.pow(2,56),Y8=Math.pow(2,63),Q8={encode:U8,decode:z8,encodingLength:function(e){return e<F8?1:e<V8?2:e<j8?3:e<q8?4:e<K8?5:e<H8?6:e<G8?7:e<W8?8:e<Y8?9:10}},J8=Q8,Z8=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=J8.decode(e,t);return[r,J8.decode.bytes]},X8=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return J8.encode(e,t,r),t},$8=function(e){return J8.encodingLength(e)},e7=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),t7=function(e,t){var r=t.byteLength,n=$8(e),a=n+$8(r),i=new Uint8Array(a+r);return X8(e,i,0),X8(r,i,n),i.set(t,a),new n7(e,r,t,i)},r7=function(e){var t=e7(e),r=Ia(Z8(t),2),n=r[0],a=r[1],i=Ia(Z8(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new n7(n,o,u,t)},n7=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var a7=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},i7=a7,o7=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),s7=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return c7(this,e)}}]),e}(),u7=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return c7(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),c7=function(e,t){return new u7(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},l7=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new o7(t,r,n),this.decoder=new s7(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),f7=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new l7(t,r,n,a)},h7=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=i7(n,r),i=a.encode,o=a.decode;return f7({prefix:t,name:r,encode:i,decode:function(e){return e7(o(e))}})},p7=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return f7({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},d7=h7({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),v7=h7({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),y7=p7({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),b7=p7({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),g7=p7({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),m7=p7({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),w7=p7({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),k7=p7({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),x7=p7({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),_7=p7({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),E7=p7({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),S7=function(e,t){var r=e.bytes;return 0===e.version?D7(r,C7(e),t||d7.encoder):R7(r,C7(e),t||y7.encoder)},A7=new WeakMap,C7=function(e){var t=A7.get(e);if(null==t){var r=new Map;return A7.set(e,r),r}return t},I7=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==P7)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==N7)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=t7(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return S7(this,e)}},{key:"toJSON",value:function(){return{"/":S7(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||L7(n,a,i.bytes))}if(!0===t[O7]){var o=t.version,s=t.multihash,u=t.code,c=r7(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==P7)throw new Error("Version 0 CID must use dag-pb (code: ".concat(P7,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,L7(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,P7,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=e7(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new n7(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(Z8(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=P7;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(T7(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return C7(o).set(a,e),o}}]),r}(),T7=function(e,t){switch(e[0]){case"Q":var r=t||d7;return[d7.prefix,r.decode("".concat(d7.prefix).concat(e))];case d7.prefix:var n=t||d7;return[d7.prefix,n.decode(e)];case y7.prefix:var a=t||y7;return[y7.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},D7=function(e,t,r){var n=r.prefix;if(n!==d7.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},R7=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},P7=112,N7=18,L7=function(e,t,r){var n=$8(e),a=n+$8(t),i=new Uint8Array(a+r.byteLength);return X8(e,i,0),X8(t,i,n),i.set(r,a),i},O7=Symbol.for("@ipld/js-cid/CID"),B7=f7({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),U7=p7({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),M7=p7({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),z7=h7({prefix:"9",name:"base10",alphabet:"0123456789"}),F7=p7({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),V7=p7({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),j7=h7({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),q7=h7({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),K7=p7({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),H7=p7({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),G7=p7({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),W7=p7({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Y7=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Q7=Y7.reduce((function(e,t,r){return e[r]=t,e}),[]),J7=Y7.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var Z7=f7({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=Q7[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=J7[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),X7=function(e){var t=e.name,r=e.code,n=e.encode;return new $7(t,r,n)},$7=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?t7(this.code,r):r.then((function(e){return t7(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),e9=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},t9=X7({name:"sha2-256",code:18,encode:e9("SHA-256")}),r9=X7({name:"sha2-512",code:19,encode:e9("SHA-512")}),n9=e7,a9={code:0,name:"identity",encode:n9,digest:function(e){return t7(0,n9(e))}},i9="raw",o9=85,s9=function(e){return e7(e)},u9=function(e){return e7(e)},c9=new TextEncoder,l9=new TextDecoder,f9="json",h9=512,p9=function(e){return c9.encode(JSON.stringify(e))},d9=function(e){return JSON.parse(l9.decode(e))},v9=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},bt),gt),mt),wt),kt),yt),xt),vt),_t),Et),y9=(jn(jn({},St),At),Symbol.for("nodejs.util.inspect.custom")),b9=Object.values(v9).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),v9.identity.decoder),g9=36,m9=37,w9=function(e){function t(e){Cn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:fb,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=d7.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return I7.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return Pd(this.multihash.bytes,e);if("string"===typeof e)return E9(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Pd(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:y9,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),k9=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Dn(r)}(w9),x9=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Dn(r)}(w9),_9=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Dn(r)}(w9);function E9(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:b9,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=r7(d7.decode("z".concat(e)));return e.startsWith("12D")?new x9({multihash:n}):e.startsWith("16U")?new _9({multihash:n}):new k9({multihash:n})}return function(e){try{var t=r7(e);if(t.code===a9.code){if(36===t.digest.length)return new x9({multihash:t});if(37===t.digest.length)return new _9({multihash:t})}if(t.code===t9.code)return new k9({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===t9.code)return new k9({multihash:e.multihash});if(t.code===a9.code){if(t.digest.length===g9)return new x9({multihash:e.multihash});if(t.digest.length===m9)return new _9({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(I7.decode(e))}throw new Error("Supplied PeerID CID is invalid")}(b9.decode(e))}var S9,A9=Symbol.for("@libp2p/transport");!function(e){e[e.FATAL_ALL=0]="FATAL_ALL",e[e.NO_FATAL=1]="NO_FATAL"}(S9||(S9={}));var C9=Symbol.for("@libp2p/peer-discovery");var I9,T9,D9="RTCPeerConnection"in globalThis,R9=ua("libp2p:webrtc-star"),P9=function(){},N9=function(e,t){Pn(n,e);var r=Un(n);function n(){var e;return Cn(this,n),(e=r.apply(this,arguments)).started=!1,e}return Dn(n,[{key:C9,get:function(){return!0}},{key:t,get:function(){return"@libp2p/webrtc-star-discovery"}},{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispatchEvent",value:function(e){return!!this.isStarted()&&Qs(Nn(n.prototype),"dispatchEvent",this).call(this,e)}}]),n}(cZ,Symbol.toStringTag),L9=function(e){function t(e){var r=this;Cn(this,t),null!=(null===e||void 0===e?void 0:e.wrtc)&&(this.wrtc=e.wrtc),this.sigServers=new Map,this._discovery=new N9,this.discovery=function(){return r._discovery},this.peerDiscovered=this.peerDiscovered.bind(this)}return Dn(t,[{key:A9,get:function(){return!0}},{key:e,get:function(){return"@libp2p/webrtc-star"}},{key:"dial",value:function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._connect(t,r);case 2:return n=e.sent,a=R8(n,{remoteAddr:t,signal:r.signal}),R9("new outbound connection %s",a.remoteAddr),e.next=7,r.upgrader.upgradeOutbound(a);case 7:return i=e.sent,R9("outbound connection %s upgraded",a.remoteAddr),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_connect",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(null===(n=r.signal)||void 0===n?void 0:n.aborted)){e.next=2;break}throw new B$;case 2:return i=jn({},null!==(a=r.channelOptions)&&void 0!==a?a:{}),null!=this.wrtc&&(i.wrtc=this.wrtc),o=t.toOptions(),s=kh(f8(36),"hex"),e.next=8,new Promise((function(e,n){var a,c=u.sigServers.get(P8(t));if(null==(null===c||void 0===c?void 0:c.socket))return n(ca(new Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));var l=!1;R9("dialing %s:%s",o.host,o.port);var f=new I8(i),h=function(e){var t=e.detail;if(!l){var r="connection error ".concat(o.host,":").concat(o.port,": ").concat(t.message);R9.error(r),v(t)}},p=function(){l=!0,R9("connection opened %s:%s",o.host,o.port),v()},d=function(){R9.error("connection aborted %s:%s",o.host,o.port),f.close().finally((function(){v(new B$)}))},v=function(t){var a;f.removeEventListener("ready",p),null===(a=r.signal)||void 0===a||a.removeEventListener("abort",d),null==t?e(f):n(t)};f.addEventListener("ready",p,{once:!0}),f.addEventListener("close",(function(){f.removeEventListener("error",h)})),null===(a=r.signal)||void 0===a||a.addEventListener("abort",d),f.addEventListener("signal",(function(e){var r=e.detail;c.socket.emit("ss-handshake",{intentId:s,srcMultiaddr:c.signallingAddr.toString(),dstMultiaddr:t.toString(),signal:r})})),c.socket.on("ws-handshake",(function(e){e.intentId===s&&null!=e.err&&f.close().finally((function(){n(ca(new Error(e.err),"ERR_SIGNALLING_FAILED"))})),e.intentId!==s||null==e.answer||f.closed||f.handleSignal(e.signal)}))}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createListener",value:function(e){var t,r;if(!D9&&null==this.wrtc)throw ca(new Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");if(e.channelOptions=null!==(t=e.channelOptions)&&void 0!==t?t:{},null!=this.wrtc&&(e.channelOptions.wrtc=this.wrtc),null==this.peerId)throw ca(new Error("PeerId not set"),"ERR_MISSING_PEER_ID");return function(e,t,r,n,a){return new B8(e,t,r,n,a)}(e.upgrader,null!==(r=e.handler)&&void 0!==r?r:P9,this.peerId,this,e)}},{key:"filter",value:function(e){return(e=Array.isArray(e)?e:[e]).filter((function(e){return!e.protoCodes().includes(290)&&ov.matches(e)}))}},{key:"peerDiscovered",value:function(e){R9("peer discovered: %s",e),e=function(e){var t="/libp2p-webrtc-star";if(e.startsWith(t)){var r=Gd(e=e.substring(t.length,e.length)),n=r.stringTuples().filter((function(e){return 421===e[0]}))[0];if(null==n[1])throw new Error("invalid multiaddr: "+e);e=(r=(r=(r=r.decapsulate("p2p")).encapsulate("/p2p-webrtc-star")).encapsulate("/p2p/".concat(n[1]))).toString()}return e}(e);var t=Gd(e),r=t.getPeerId();if(null!=r){var n=E9(r);this._discovery.dispatchEvent(new fZ("peer",{detail:{id:n,multiaddrs:[t],protocols:[]}}))}}}]),t}(Symbol.toStringTag);function O9(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new L9(e);return{transport:function(e){return t.peerId=e.peerId,t},discovery:t.discovery}}();return{transports:[e.transport],peerDiscovery:[e.discovery],connectionManager:{maxParallelDials:150,maxDialsPerPeer:4,dialTimeout:1e4,autoDial:!0},nat:{enabled:!1}}}function B9(e){return null!=e&&"function"===typeof e.start&&"function"===typeof e.stop}function U9(e,t){return M9.apply(this,arguments)}function M9(){return M9=Hn(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(Cb(zn(kS(t,function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.addressBook.add(t.id,t.multiaddrs);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))),"t0",1);case 1:case"end":return e.stop()}}),e)}))),M9.apply(this,arguments)}function z9(e){var t=new Set;return iS(e,(function(e){return!t.has(e.id.toString())&&(t.add(e.id.toString()),!0)}))}function F9(e){return V9.apply(this,arguments)}function V9(){return V9=Hn((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return En().mark((function r(){var n,a,i,o,s,u,c;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=0,a=!1,i=!1,r.prev=3,s=zn(e);case 5:return r.next=7,Mf(s.next());case 7:if(!(a=!(u=r.sent).done)){r.next=15;break}return c=u.value,n++,r.next=12,c;case 12:a=!1,r.next=5;break;case 15:r.next=21;break;case 17:r.prev=17,r.t0=r.catch(3),i=!0,o=r.t0;case 21:if(r.prev=21,r.prev=22,!a||null==s.return){r.next=26;break}return r.next=26,Mf(s.return());case 26:if(r.prev=26,!i){r.next=29;break}throw o;case 29:return r.finish(26);case 30:return r.finish(21);case 31:if(!(n<t)){r.next=33;break}throw ca(new Error("not found"),"NOT_FOUND");case 33:case"end":return r.stop()}}),r,null,[[3,17,21,31],[22,,26,30]])}))()})),V9.apply(this,arguments)}!function(e){e.NOT_STARTED_YET="The libp2p node is not started yet",e.DHT_DISABLED="DHT is not available",e.PUBSUB_DISABLED="PubSub is not available",e.CONN_ENCRYPTION_REQUIRED="At least one connection encryption module is required",e.ERR_TRANSPORTS_REQUIRED="At least one transport module is required",e.ERR_PROTECTOR_REQUIRED="Private network is enforced, but no protector was provided",e.NOT_FOUND="Not found"}(I9||(I9={})),function(e){e.DHT_DISABLED="ERR_DHT_DISABLED",e.ERR_PUBSUB_DISABLED="ERR_PUBSUB_DISABLED",e.PUBSUB_NOT_STARTED="ERR_PUBSUB_NOT_STARTED",e.DHT_NOT_STARTED="ERR_DHT_NOT_STARTED",e.CONN_ENCRYPTION_REQUIRED="ERR_CONN_ENCRYPTION_REQUIRED",e.ERR_TRANSPORTS_REQUIRED="ERR_TRANSPORTS_REQUIRED",e.ERR_PROTECTOR_REQUIRED="ERR_PROTECTOR_REQUIRED",e.ERR_PEER_DIAL_INTERCEPTED="ERR_PEER_DIAL_INTERCEPTED",e.ERR_CONNECTION_INTERCEPTED="ERR_CONNECTION_INTERCEPTED",e.ERR_INVALID_PROTOCOLS_FOR_STREAM="ERR_INVALID_PROTOCOLS_FOR_STREAM",e.ERR_CONNECTION_ENDED="ERR_CONNECTION_ENDED",e.ERR_CONNECTION_FAILED="ERR_CONNECTION_FAILED",e.ERR_NODE_NOT_STARTED="ERR_NODE_NOT_STARTED",e.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",e.ERR_TOO_MANY_ADDRESSES="ERR_TOO_MANY_ADDRESSES",e.ERR_NO_VALID_ADDRESSES="ERR_NO_VALID_ADDRESSES",e.ERR_RELAYED_DIAL="ERR_RELAYED_DIAL",e.ERR_DIALED_SELF="ERR_DIALED_SELF",e.ERR_DISCOVERED_SELF="ERR_DISCOVERED_SELF",e.ERR_DUPLICATE_TRANSPORT="ERR_DUPLICATE_TRANSPORT",e.ERR_ENCRYPTION_FAILED="ERR_ENCRYPTION_FAILED",e.ERR_HOP_REQUEST_FAILED="ERR_HOP_REQUEST_FAILED",e.ERR_INVALID_KEY="ERR_INVALID_KEY",e.ERR_INVALID_MESSAGE="ERR_INVALID_MESSAGE",e.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",e.ERR_INVALID_PEER="ERR_INVALID_PEER",e.ERR_MUXER_UNAVAILABLE="ERR_MUXER_UNAVAILABLE",e.ERR_NOT_FOUND="ERR_NOT_FOUND",e.ERR_TIMEOUT="ERR_TIMEOUT",e.ERR_TRANSPORT_UNAVAILABLE="ERR_TRANSPORT_UNAVAILABLE",e.ERR_TRANSPORT_DIAL_FAILED="ERR_TRANSPORT_DIAL_FAILED",e.ERR_UNSUPPORTED_PROTOCOL="ERR_UNSUPPORTED_PROTOCOL",e.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",e.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",e.ERR_SIGNATURE_NOT_VALID="ERR_SIGNATURE_NOT_VALID",e.ERR_FIND_SELF="ERR_FIND_SELF",e.ERR_NO_ROUTERS_AVAILABLE="ERR_NO_ROUTERS_AVAILABLE",e.ERR_CONNECTION_NOT_MULTIPLEXED="ERR_CONNECTION_NOT_MULTIPLEXED",e.ERR_NO_DIAL_TOKENS="ERR_NO_DIAL_TOKENS",e.ERR_KEYCHAIN_REQUIRED="ERR_KEYCHAIN_REQUIRED",e.ERR_INVALID_CMS="ERR_INVALID_CMS",e.ERR_MISSING_KEYS="ERR_MISSING_KEYS",e.ERR_NO_KEY="ERR_NO_KEY",e.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",e.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",e.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",e.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",e.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",e.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",e.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",e.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",e.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",e.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",e.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",e.ERR_MISSING_PUBLIC_KEY="ERR_MISSING_PUBLIC_KEY",e.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",e.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",e.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH",e.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",e.ERR_WRONG_PING_ACK="ERR_WRONG_PING_ACK",e.ERR_INVALID_RECORD="ERR_INVALID_RECORD",e.ERR_ALREADY_SUCCEEDED="ERR_ALREADY_SUCCEEDED",e.ERR_NO_HANDLER_FOR_PROTOCOL="ERR_NO_HANDLER_FOR_PROTOCOL",e.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS",e.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",e.ERR_CONNECTION_DENIED="ERR_CONNECTION_DENIED"}(T9||(T9={}));var j9=__webpack_require__(4715),q9=__webpack_require__(7715),K9=ua("libp2p:peer-routing"),H9=function(){function e(t,r){var n,a;Cn(this,e),this.components=t,this.routers=null!==(n=r.routers)&&void 0!==n?n:[],this.refreshManagerInit=null!==(a=r.refreshManager)&&void 0!==a?a:{},this.started=!1,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}return Dn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.started&&0!==this.routers.length&&null==this.timeoutId&&!1!==this.refreshManagerInit.enabled){e.next=2;break}return e.abrupt("return");case 2:this.timeoutId=(0,j9.setDelayedInterval)(this._findClosestPeersTask,this.refreshManagerInit.interval,this.refreshManagerInit.bootDelay),this.started=!0;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_findClosestPeersTask",value:function(){var e=An(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.abortController){e.next=2;break}return e.abrupt("return");case 2:e.prev=2,this.abortController=new Uf.TimeoutController(null!==(t=this.refreshManagerInit.timeout)&&void 0!==t?t:1e4);try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,this.abortController.signal)}catch(n){}return e.next=7,nS(this.getClosestPeers(this.components.peerId.toBytes(),{signal:this.abortController.signal}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),K9.error(e.t0);case 12:return e.prev=12,null===(r=this.abortController)||void 0===r||r.clear(),this.abortController=void 0,e.finish(12);case 16:case"end":return e.stop()}}),e,this,[[2,9,12,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,j9.clearDelayedInterval)(this.timeoutId),null===(t=this.abortController)||void 0===t||t.abort(),this.started=!1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findPeer",value:function(){var e=An(En().mark((function e(t,r){var n,a=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.routers.length){e.next=2;break}throw ca(new Error("No peer routers available"),T9.ERR_NO_ROUTERS_AVAILABLE);case 2:if(t.toString()!==this.components.peerId.toString()){e.next=4;break}throw ca(new Error("Should not try to find self"),T9.ERR_FIND_SELF);case 4:return e.next=6,TS(_S.apply(void 0,su(this.routers.map((function(e){return Hn(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Mf(e.findPeer(t,r));case 3:return n.next=5,n.sent;case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),K9.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()})))),(function(e){return iS(e,Boolean)}),(function(e){return U9(e,a.components.peerStore)}),function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LU(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:if(null==(n=e.sent)){e.next=9;break}return e.abrupt("return",n);case 9:throw ca(new Error(I9.NOT_FOUND),T9.ERR_NOT_FOUND);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getClosestPeers",value:function(e,t){var r=this;return Hn(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==r.routers.length){n.next=2;break}throw ca(new Error("No peer routers available"),T9.ERR_NO_ROUTERS_AVAILABLE);case 2:return n.delegateYield(Cb(zn(TS(_S.apply(void 0,su(r.routers.map((function(r){return r.getClosestPeers(e,t)})))),(function(e){return U9(e,r.components.peerStore)}),(function(e){return z9(e)}),(function(e){return F9(e)})))),"t0",3);case 3:case"end":return n.stop()}}),n)})))()}}]),e}(),G9=function(){function e(t,r){var n;Cn(this,e),this.routers=null!==(n=r.routers)&&void 0!==n?n:[],this.started=!1,this.components=t}return Dn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==t.routers.length){n.next=2;break}throw ca(new Error("No content this.routers available"),T9.ERR_NO_ROUTERS_AVAILABLE);case 2:return n.delegateYield(Cb(zn(TS(_S.apply(void 0,su(t.routers.map((function(t){return t.findProviders(e,r)})))),(function(e){return U9(e,t.components.peerStore)}),(function(e){return z9(e)}),(function(e){return F9(e)})))),"t0",3);case 3:case"end":return n.stop()}}),n)})))()}},{key:"provide",value:function(){var e=An(En().mark((function e(t){var r,n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{},0!==this.routers.length){e.next=3;break}throw ca(new Error("No content routers available"),T9.ERR_NO_ROUTERS_AVAILABLE);case 3:return e.next=5,Promise.all(this.routers.map(function(){var e=An(En().mark((function e(n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.provide(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=An(En().mark((function e(t,r,n){var a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStarted()){e.next=2;break}throw ca(new Error(I9.NOT_STARTED_YET),T9.DHT_NOT_STARTED);case 2:if(null==(a=this.components.dht)){e.next=6;break}return e.next=6,nS(a.put(t,r,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStarted()){e.next=2;break}throw ca(new Error(I9.NOT_STARTED_YET),T9.DHT_NOT_STARTED);case 2:if(null==(n=this.components.dht)){e.next=33;break}a=!1,i=!1,e.prev=6,s=zn(n.get(t,r));case 8:return e.next=10,s.next();case 10:if(!(a=!(u=e.sent).done)){e.next=17;break}if("VALUE"!==(c=u.value).name){e.next=14;break}return e.abrupt("return",c.value);case 14:a=!1,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),i=!0,o=e.t0;case 23:if(e.prev=23,e.prev=24,!a||null==s.return){e.next=28;break}return e.next=28,s.return();case 28:if(e.prev=28,!i){e.next=31;break}throw o;case 31:return e.finish(28);case 32:return e.finish(23);case 33:throw ca(new Error(I9.NOT_FOUND),T9.ERR_NOT_FOUND);case 34:case"end":return e.stop()}}),e,this,[[6,19,23,33],[24,,28,32]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMany",value:function(e,t,r){var n=this;return Hn(En().mark((function a(){var i,o,s,u,c,l,f,h;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.isStarted()){a.next=2;break}throw ca(new Error(I9.NOT_STARTED_YET),T9.DHT_NOT_STARTED);case 2:if(null!=t&&0!==t){a.next=4;break}return a.abrupt("return");case 4:if(i=0,null==(o=n.components.dht)){a.next=40;break}s=!1,u=!1,a.prev=9,l=zn(o.get(e,r));case 11:return a.next=13,Mf(l.next());case 13:if(!(s=!(f=a.sent).done)){a.next=24;break}if("VALUE"!==(h=f.value).name){a.next=21;break}return a.next=18,{from:h.from,val:h.value};case 18:if(++i!==t){a.next=21;break}return a.abrupt("break",24);case 21:s=!1,a.next=11;break;case 24:a.next=30;break;case 26:a.prev=26,a.t0=a.catch(9),u=!0,c=a.t0;case 30:if(a.prev=30,a.prev=31,!s||null==l.return){a.next=35;break}return a.next=35,Mf(l.return());case 35:if(a.prev=35,!u){a.next=38;break}throw c;case 38:return a.finish(35);case 39:return a.finish(30);case 40:if(0!==i){a.next=42;break}throw ca(new Error(I9.NOT_FOUND),T9.ERR_NOT_FOUND);case 42:case"end":return a.stop()}}),a,null,[[9,26,30,40],[31,,35,39]])})))()}}]),e}(),W9=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Y9;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Y9=Math.pow(2,31);var Q9=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var J9=Math.pow(2,7),Z9=Math.pow(2,14),X9=Math.pow(2,21),$9=Math.pow(2,28),eee=Math.pow(2,35),tee=Math.pow(2,42),ree=Math.pow(2,49),nee=Math.pow(2,56),aee=Math.pow(2,63),iee={encode:W9,decode:Q9,encodingLength:function(e){return e<J9?1:e<Z9?2:e<X9?3:e<$9?4:e<eee?5:e<tee?6:e<ree?7:e<nee?8:e<aee?9:10}},oee=iee,see=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=oee.decode(e,t);return[r,oee.decode.bytes]},uee=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return oee.encode(e,t,r),t},cee=function(e){return oee.encodingLength(e)},lee=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),fee=function(e,t){var r=t.byteLength,n=cee(e),a=n+cee(r),i=new Uint8Array(a+r);return uee(e,i,0),uee(r,i,n),i.set(t,a),new pee(e,r,t,i)},hee=function(e){var t=lee(e),r=Ia(see(t),2),n=r[0],a=r[1],i=Ia(see(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new pee(n,o,u,t)},pee=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var dee=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},vee=dee,yee=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),bee=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return mee(this,e)}}]),e}(),gee=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return mee(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),mee=function(e,t){return new gee(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},wee=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new yee(t,r,n),this.decoder=new bee(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),kee=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new wee(t,r,n,a)},xee=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=vee(n,r),i=a.encode,o=a.decode;return kee({prefix:t,name:r,encode:i,decode:function(e){return lee(o(e))}})},_ee=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return kee({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},Eee=xee({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),See=xee({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Aee=_ee({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Cee=_ee({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Iee=_ee({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Tee=_ee({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Dee=_ee({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ree=_ee({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Pee=_ee({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Nee=_ee({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Lee=_ee({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Oee=function(e,t){var r=e.bytes;return 0===e.version?Fee(r,Uee(e),t||Eee.encoder):Vee(r,Uee(e),t||Aee.encoder)},Bee=new WeakMap,Uee=function(e){var t=Bee.get(e);if(null==t){var r=new Map;return Bee.set(e,r),r}return t},Mee=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==jee)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==qee)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=fee(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return Oee(this,e)}},{key:"toJSON",value:function(){return{"/":Oee(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||Kee(n,a,i.bytes))}if(!0===t[Hee]){var o=t.version,s=t.multihash,u=t.code,c=hee(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==jee)throw new Error("Version 0 CID must use dag-pb (code: ".concat(jee,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,Kee(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,jee,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=lee(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new pee(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(see(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=jee;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(zee(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return Uee(o).set(a,e),o}}]),r}(),zee=function(e,t){switch(e[0]){case"Q":var r=t||Eee;return[Eee.prefix,r.decode("".concat(Eee.prefix).concat(e))];case Eee.prefix:var n=t||Eee;return[Eee.prefix,n.decode(e)];case Aee.prefix:var a=t||Aee;return[Aee.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Fee=function(e,t,r){var n=r.prefix;if(n!==Eee.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},Vee=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},jee=112,qee=18,Kee=function(e,t,r){var n=cee(e),a=n+cee(t),i=new Uint8Array(a+r.byteLength);return uee(e,i,0),uee(t,i,n),i.set(r,a),i},Hee=Symbol.for("@ipld/js-cid/CID"),Gee=kee({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),Wee=_ee({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Yee=_ee({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Qee=xee({prefix:"9",name:"base10",alphabet:"0123456789"}),Jee=_ee({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Zee=_ee({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Xee=xee({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),$ee=xee({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ete=_ee({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tte=_ee({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),rte=_ee({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),nte=_ee({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ate=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),ite=ate.reduce((function(e,t,r){return e[r]=t,e}),[]),ote=ate.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var ste=kee({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=ite[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=ote[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),ute=function(e){var t=e.name,r=e.code,n=e.encode;return new cte(t,r,n)},cte=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?fee(this.code,r):r.then((function(e){return fee(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),lte=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fte=ute({name:"sha2-256",code:18,encode:lte("SHA-256")}),hte=ute({name:"sha2-512",code:19,encode:lte("SHA-512")}),pte=lee,dte={code:0,name:"identity",encode:pte,digest:function(e){return fee(0,pte(e))}},vte="raw",yte=85,bte=function(e){return lee(e)},gte=function(e){return lee(e)},mte=new TextEncoder,wte=new TextDecoder,kte="json",xte=512,_te=function(e){return mte.encode(JSON.stringify(e))},Ete=function(e){return JSON.parse(wte.decode(e))},Ste=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},Rt),Pt),Nt),Lt),Ot),Dt),Bt),Tt),Ut),Mt),Ate=(jn(jn({},zt),Ft),Symbol.for("nodejs.util.inspect.custom")),Cte=Object.values(Ste).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),Ste.identity.decoder),Ite=function(e){function t(e){Cn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:fb,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=Eee.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return Mee.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return Pd(this.multihash.bytes,e);if("string"===typeof e)return Pte(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Pd(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:Ate,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),Tte=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Dn(r)}(Ite),Dte=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Dn(r)}(Ite),Rte=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Dn(r)}(Ite);function Pte(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:Cte,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=hee(Eee.decode("z".concat(e)));return e.startsWith("12D")?new Dte({multihash:n}):e.startsWith("16U")?new Rte({multihash:n}):new Tte({multihash:n})}return Nte(Cte.decode(e))}function Nte(e){try{var t=hee(e);if(t.code===dte.code){if(36===t.digest.length)return new Dte({multihash:t});if(37===t.digest.length)return new Rte({multihash:t})}if(t.code===fte.code)return new Tte({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===fte.code)return new Tte({multihash:e.multihash});if(t.code===dte.code){if(36===t.digest.length)return new Dte({multihash:e.multihash});if(37===t.digest.length)return new Rte({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(Mee.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function Lte(e,t){return Ote.apply(this,arguments)}function Ote(){return(Ote=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(36!==t.length){e.next=2;break}return e.abrupt("return",new Dte({multihash:fee(dte.code,t),privateKey:r}));case 2:if(37!==t.length){e.next=4;break}return e.abrupt("return",new Rte({multihash:fee(dte.code,t),privateKey:r}));case 4:return e.t0=Tte,e.next=7,fte.digest(t);case 7:return e.t1=e.sent,e.t2=t,e.t3=r,e.t4={multihash:e.t1,publicKey:e.t2,privateKey:e.t3},e.abrupt("return",new e.t0(e.t4));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bte=function(e){return e},Ute=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a,i;Cn(this,r),i=t.call(this);var o=n.listen,s=void 0===o?[]:o,u=n.announce,c=void 0===u?[]:u;return i.components=e,i.listen=s.map((function(e){return e.toString()})),i.announce=new Set(c.map((function(e){return e.toString()}))),i.observed=new Set,i.announceFilter=null!==(a=n.announceFilter)&&void 0!==a?a:Bte,i}return Dn(r,[{key:"getListenAddrs",value:function(){return Array.from(this.listen).map((function(e){return Gd(e)}))}},{key:"getAnnounceAddrs",value:function(){return Array.from(this.announce).map((function(e){return Gd(e)}))}},{key:"getObservedAddrs",value:function(){return Array.from(this.observed).map((function(e){return Gd(e)}))}},{key:"confirmObservedAddr",value:function(e){}},{key:"removeObservedAddr",value:function(e){}},{key:"addObservedAddr",value:function(e){var t=Gd(e),r=t.getPeerId();null!=r&&(Pte(r).equals(this.components.peerId)&&(t=t.decapsulate(Gd("/p2p/".concat(this.components.peerId.toString())))));var n=t.toString();this.observed.has(n)||(this.observed.add(n),this.dispatchEvent(new fZ("change:addresses")))}},{key:"getAddresses",value:function(){var e=this,t=this.getAnnounceAddrs().map((function(e){return e.toString()}));0===t.length&&(t=this.components.transportManager.getAddrs().map((function(e){return e.toString()}))),t=t.concat(this.getObservedAddrs().map((function(e){return e.toString()})));var r=new Set(t);return this.announceFilter(Array.from(r).map((function(e){return Gd(e)}))).map((function(t){var r;return!0===(null===(r=t.protos().pop())||void 0===r?void 0:r.path)||t.getPeerId()===e.components.peerId.toString()?t:t.encapsulate("/p2p/".concat(e.components.peerId.toString()))}))}}]),r}(cZ),Mte=ua("libp2p:connection-manager:latency-monitor:visibility-change-emitter"),zte=function(e){Pn(r,e);var t=Un(r);function r(){var e;return Cn(this,r),(e=t.call(this)).hidden="hidden",e.visibilityChange="visibilityChange",null!=globalThis.document&&(e._initializeVisibilityVarNames(),e._addVisibilityChangeListener()),e}return Dn(r,[{key:"_initializeVisibilityVarNames",value:function(){var e="hidden",t="visibilitychange";"undefined"!==typeof globalThis.document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==typeof globalThis.document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):"undefined"!==typeof globalThis.document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==typeof globalThis.document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),this.hidden=e,this.visibilityChange=t}},{key:"_addVisibilityChangeListener",value:function(){"undefined"===typeof globalThis.document.addEventListener||"undefined"===typeof document[this.hidden]?Mte("Checking page visibility requires a browser that supports the Page Visibility API."):globalThis.document.addEventListener(this.visibilityChange,this._handleVisibilityChange.bind(this),!1)}},{key:"isVisible",value:function(){if(void 0!==this.hidden&&void 0!==document[this.hidden])return null==document[this.hidden]}},{key:"_handleVisibilityChange",value:function(){var e=!1===globalThis.document[this.hidden];Mte(e?"Page Visible":"Page Hidden"),this.dispatchEvent(new fZ("visibilityChange",{detail:e}))}}]),r}(cZ),Fte=ua("libp2p:connection-manager:latency-monitor"),Vte=function(e){Pn(r,e);var t=Un(r);function r(){var e,n,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Cn(this,r),a=t.call(this);var o=i.latencyCheckIntervalMs,s=i.dataEmitIntervalMs,u=i.asyncTestFn,c=i.latencyRandomPercentage;return a.latencyCheckIntervalMs=null!==o&&void 0!==o?o:500,a.latencyRandomPercentage=null!==c&&void 0!==c?c:10,a.latencyCheckMultiply=a.latencyRandomPercentage/100*2*a.latencyCheckIntervalMs,a.latencyCheckSubtract=a.latencyCheckMultiply/2,a.dataEmitIntervalMs=null===s||0===s?void 0:null!==s&&void 0!==s?s:5e3,Fte("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",a.latencyCheckIntervalMs,a.dataEmitIntervalMs),null!=a.dataEmitIntervalMs?Fte("Expecting ~%s events per summary",a.latencyCheckIntervalMs/a.dataEmitIntervalMs):Fte("Not emitting summaries"),a.asyncTestFn=u,null!=(null===(e=globalThis.process)||void 0===e?void 0:e.hrtime)?(Fte("Using process.hrtime for timing"),a.now=globalThis.process.hrtime,a.getDeltaMS=function(e){var t=a.now(e);return 1e3*t[0]+t[1]/1e6}):"undefined"!==typeof window&&null!=(null===(n=window.performance)||void 0===n?void 0:n.now)?(Fte("Using performance.now for timing"),a.now=window.performance.now.bind(window.performance),a.getDeltaMS=function(e){return Math.round(a.now()-e)}):(Fte("Using Date.now for timing"),a.now=Date.now,a.getDeltaMS=function(e){return a.now()-e}),a.latencyData=a.initLatencyData(),a}return Dn(r,[{key:"start",value:function(){var e,t=this;"undefined"!==typeof globalThis.window&&(this.visibilityChangeEmitter=new zte,this.visibilityChangeEmitter.addEventListener("visibilityChange",(function(e){e.detail?t._startTimers():(t._emitSummary(),t._stopTimers())}))),!0===(null===(e=this.visibilityChangeEmitter)||void 0===e?void 0:e.isVisible())&&this._startTimers()}},{key:"stop",value:function(){this._stopTimers()}},{key:"_startTimers",value:function(){var e=this;null==this.checkLatencyID&&(this.checkLatency(),null!=this.dataEmitIntervalMs&&(this.emitIntervalID=setInterval((function(){return e._emitSummary()}),this.dataEmitIntervalMs),"function"===typeof this.emitIntervalID.unref&&this.emitIntervalID.unref()))}},{key:"_stopTimers",value:function(){null!=this.checkLatencyID&&(clearTimeout(this.checkLatencyID),this.checkLatencyID=void 0),null!=this.emitIntervalID&&(clearInterval(this.emitIntervalID),this.emitIntervalID=void 0)}},{key:"_emitSummary",value:function(){var e=this.getSummary();e.events>0&&this.dispatchEvent(new fZ("data",{detail:e}))}},{key:"getSummary",value:function(){var e={events:this.latencyData.events,minMs:this.latencyData.minMs,maxMs:this.latencyData.maxMs,avgMs:this.latencyData.events>0?this.latencyData.totalMs/this.latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this.latencyData.startTime)};return this.latencyData=this.initLatencyData(),Fte.trace("Summary: %O",e),e}},{key:"checkLatency",value:function(){var e=this,t=Math.random()*this.latencyCheckMultiply-this.latencyCheckSubtract,r={deltaOffset:Math.ceil(this.latencyCheckIntervalMs+t),startTime:this.now()},n=function(){if(null!=e.checkLatencyID){var t=e.getDeltaMS(r.startTime)-r.deltaOffset;e.checkLatency(),e.latencyData.events++,e.latencyData.minMs=Math.min(e.latencyData.minMs,t),e.latencyData.maxMs=Math.max(e.latencyData.maxMs,t),e.latencyData.totalMs+=t,Fte.trace("MS: %s Data: %O",t,e.latencyData)}};Fte.trace("localData: %O",r),this.checkLatencyID=setTimeout((function(){null!=e.asyncTestFn?(r.deltaOffset=0,r.startTime=e.now(),e.asyncTestFn(n)):(r.deltaOffset-=1,n())}),r.deltaOffset),"function"===typeof this.checkLatencyID.unref&&this.checkLatencyID.unref()}},{key:"initLatencyData",value:function(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}]),r}(cZ);var jte="OPEN",qte="CLOSING",Kte="CLOSED",Hte=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Gte;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Gte=Math.pow(2,31);var Wte=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var Yte=Math.pow(2,7),Qte=Math.pow(2,14),Jte=Math.pow(2,21),Zte=Math.pow(2,28),Xte=Math.pow(2,35),$te=Math.pow(2,42),ere=Math.pow(2,49),tre=Math.pow(2,56),rre=Math.pow(2,63),nre={encode:Hte,decode:Wte,encodingLength:function(e){return e<Yte?1:e<Qte?2:e<Jte?3:e<Zte?4:e<Xte?5:e<$te?6:e<ere?7:e<tre?8:e<rre?9:10}},are=nre,ire=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=are.decode(e,t);return[r,are.decode.bytes]},ore=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return are.encode(e,t,r),t},sre=function(e){return are.encodingLength(e)},ure=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),cre=function(e,t){var r=t.byteLength,n=sre(e),a=n+sre(r),i=new Uint8Array(a+r);return ore(e,i,0),ore(r,i,n),i.set(t,a),new fre(e,r,t,i)},lre=function(e){var t=ure(e),r=Ia(ire(t),2),n=r[0],a=r[1],i=Ia(ire(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new fre(n,o,u,t)},fre=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var hre=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},pre=hre,dre=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),vre=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return bre(this,e)}}]),e}(),yre=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return bre(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),bre=function(e,t){return new yre(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},gre=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new dre(t,r,n),this.decoder=new vre(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),mre=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new gre(t,r,n,a)},wre=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=pre(n,r),i=a.encode,o=a.decode;return mre({prefix:t,name:r,encode:i,decode:function(e){return ure(o(e))}})},kre=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return mre({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},xre=wre({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_re=wre({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Ere=kre({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Sre=kre({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Are=kre({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Cre=kre({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ire=kre({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Tre=kre({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Dre=kre({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Rre=kre({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Pre=kre({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Nre=function(e,t){var r=e.bytes;return 0===e.version?Mre(r,Ore(e),t||xre.encoder):zre(r,Ore(e),t||Ere.encoder)},Lre=new WeakMap,Ore=function(e){var t=Lre.get(e);if(null==t){var r=new Map;return Lre.set(e,r),r}return t},Bre=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==Fre)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Vre)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=cre(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return Nre(this,e)}},{key:"toJSON",value:function(){return{"/":Nre(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||jre(n,a,i.bytes))}if(!0===t[qre]){var o=t.version,s=t.multihash,u=t.code,c=lre(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==Fre)throw new Error("Version 0 CID must use dag-pb (code: ".concat(Fre,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,jre(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,Fre,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=ure(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new fre(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(ire(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=Fre;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(Ure(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return Ore(o).set(a,e),o}}]),r}(),Ure=function(e,t){switch(e[0]){case"Q":var r=t||xre;return[xre.prefix,r.decode("".concat(xre.prefix).concat(e))];case xre.prefix:var n=t||xre;return[xre.prefix,n.decode(e)];case Ere.prefix:var a=t||Ere;return[Ere.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Mre=function(e,t,r){var n=r.prefix;if(n!==xre.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},zre=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},Fre=112,Vre=18,jre=function(e,t,r){var n=sre(e),a=n+sre(t),i=new Uint8Array(a+r.byteLength);return ore(e,i,0),ore(t,i,n),i.set(r,a),i},qre=Symbol.for("@ipld/js-cid/CID"),Kre=mre({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),Hre=kre({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Gre=kre({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Wre=wre({prefix:"9",name:"base10",alphabet:"0123456789"}),Yre=kre({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Qre=kre({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Jre=wre({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Zre=wre({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Xre=kre({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$re=kre({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ene=kre({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tne=kre({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),rne=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),nne=rne.reduce((function(e,t,r){return e[r]=t,e}),[]),ane=rne.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var ine=mre({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=nne[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=ane[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),one=function(e){var t=e.name,r=e.code,n=e.encode;return new sne(t,r,n)},sne=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?cre(this.code,r):r.then((function(e){return cre(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),une=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},cne=one({name:"sha2-256",code:18,encode:une("SHA-256")}),lne=one({name:"sha2-512",code:19,encode:une("SHA-512")}),fne=ure,hne={code:0,name:"identity",encode:fne,digest:function(e){return cre(0,fne(e))}},pne="raw",dne=85,vne=function(e){return ure(e)},yne=function(e){return ure(e)},bne=new TextEncoder,gne=new TextDecoder,mne="json",wne=512,kne=function(e){return bne.encode(JSON.stringify(e))},xne=function(e){return JSON.parse(gne.decode(e))},_ne=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},Ht),Gt),Wt),Yt),Qt),Kt),Jt),qt),Zt),Xt),Ene=(jn(jn({},$t),er),Symbol.for("nodejs.util.inspect.custom")),Sne=Object.values(_ne).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),_ne.identity.decoder),Ane=36,Cne=37,Ine=function(e){function t(e){Cn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:fb,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=xre.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return Bre.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return Pd(this.multihash.bytes,e);if("string"===typeof e)return Pne(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Pd(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:Ene,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),Tne=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Dn(r)}(Ine),Dne=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Dn(r)}(Ine),Rne=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Dn(r)}(Ine);function Pne(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:Sne,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=lre(xre.decode("z".concat(e)));return e.startsWith("12D")?new Dne({multihash:n}):e.startsWith("16U")?new Rne({multihash:n}):new Tne({multihash:n})}return function(e){try{var t=lre(e);if(t.code===hne.code){if(36===t.digest.length)return new Dne({multihash:t});if(37===t.digest.length)return new Rne({multihash:t})}if(t.code===cne.code)return new Tne({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===cne.code)return new Tne({multihash:e.multihash});if(t.code===hne.code){if(t.digest.length===Ane)return new Dne({multihash:e.multihash});if(t.digest.length===Cne)return new Rne({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(Bre.decode(e))}throw new Error("Supplied PeerID CID is invalid")}(Sne.decode(e))}function Nne(e,t){var r,n=(Mn(r={},Symbol.iterator,(function(){return n})),Mn(r,"next",(function(){var r=e.next(),n=r.value;return!0===r.done||null==n?{done:!0,value:void 0}:{done:!1,value:t(n)}})),r);return n}var Lne=function(e){function t(e){if(Cn(this,t),this.map=new Map,null!=e){var r,n=Ni(e.entries());try{for(n.s();!(r=n.n()).done;){var a=Ia(r.value,2),i=a[0],o=a[1];this.map.set(i.toString(),o)}}catch(eL){n.e(eL)}finally{n.f()}}}return Dn(t,[{key:Symbol.iterator,value:function(){return this.entries()}},{key:"clear",value:function(){this.map.clear()}},{key:"delete",value:function(e){this.map.delete(e.toString())}},{key:"entries",value:function(){return Nne(this.map.entries(),(function(e){return[Pne(e[0]),e[1]]}))}},{key:"forEach",value:function(e){var t=this;this.map.forEach((function(r,n){e(r,Pne(n),t)}))}},{key:"get",value:function(e){return this.map.get(e.toString())}},{key:"has",value:function(e){return this.map.has(e.toString())}},{key:"set",value:function(e,t){this.map.set(e.toString(),t)}},{key:"keys",value:function(){return Nne(this.map.keys(),(function(e){return Pne(e)}))}},{key:"values",value:function(){return this.map.values()}},{key:"size",get:function(){return this.map.size}}]),t}(),One=function(e){function t(e){if(Cn(this,t),this.set=new Set,null!=e){var r,n=Ni(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.set.add(a.toString())}}catch(eL){n.e(eL)}finally{n.f()}}}return Dn(t,[{key:"size",get:function(){return this.set.size}},{key:Symbol.iterator,value:function(){return this.values()}},{key:"add",value:function(e){this.set.add(e.toString())}},{key:"clear",value:function(){this.set.clear()}},{key:"delete",value:function(e){this.set.delete(e.toString())}},{key:"entries",value:function(){return Nne(this.set.entries(),(function(e){var t=Pne(e[0]);return[t,t]}))}},{key:"forEach",value:function(e){var t=this;this.set.forEach((function(r){var n=Pne(r);e(n,n,t)}))}},{key:"has",value:function(e){return this.set.has(e.toString())}},{key:"values",value:function(){return Nne(this.set.values(),(function(e){return Pne(e)}))}},{key:"intersection",value:function(e){var r,n=new t,a=Ni(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.has(i)&&n.add(i)}}catch(eL){a.e(eL)}finally{a.f()}return n}},{key:"difference",value:function(e){var r,n=new t,a=Ni(this);try{for(a.s();!(r=a.n()).done;){var i=r.value;e.has(i)||n.add(i)}}catch(eL){a.e(eL)}finally{a.f()}return n}},{key:"union",value:function(e){var r,n=new t,a=Ni(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;n.add(i)}}catch(eL){a.e(eL)}finally{a.f()}var o,s=Ni(this);try{for(s.s();!(o=s.n()).done;){var u=o.value;n.add(u)}}catch(eL){s.e(eL)}finally{s.f()}return n}}]),t}(),Bne=__webpack_require__(2679);function Une(e){if(hb(e))return{peerId:e};if(Kd(e)){var t=e.getPeerId();return{multiaddr:e,peerId:null==t?void 0:Pte(t)}}throw ca(new Error("".concat(e," is not a PeerId or a Multiaddr")),T9.ERR_INVALID_MULTIADDR)}var Mne,zne=ua("libp2p:connection-manager"),Fne={maxConnections:1/0,minConnections:0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,inboundConnectionThreshold:5,maxIncomingPendingConnections:10},Vne=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a,i,o,s,u;if(Cn(this,r),(u=t.call(this)).opts=Gn.call({ignoreUndefined:!0},Fne,n),u.opts.maxConnections<u.opts.minConnections)throw ca(new Error("Connection Manager maxConnections must be greater than minConnections"),T9.ERR_INVALID_PARAMETERS);zne("options: %o",u.opts),u.components=e,u.connections=new Map,u.started=!1,null!=n.maxEventLoopDelay&&n.maxEventLoopDelay>0&&n.maxEventLoopDelay!==1/0&&(u.latencyMonitor=new Vte({latencyCheckIntervalMs:n.pollInterval,dataEmitIntervalMs:n.pollInterval}));try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,On(u))}catch(c){}return u.onConnect=u.onConnect.bind(On(u)),u.onDisconnect=u.onDisconnect.bind(On(u)),u.startupReconnectTimeout=null!==(a=n.startupReconnectTimeout)&&void 0!==a?a:6e4,u.dialTimeout=null!==(i=n.dialTimeout)&&void 0!==i?i:3e4,u.allow=(null!==(o=n.allow)&&void 0!==o?o:[]).map((function(e){return Gd(e)})),u.deny=(null!==(s=n.deny)&&void 0!==s?s:[]).map((function(e){return Gd(e)})),u.inboundConnectionRateLimiter=new Bne.RateLimiterMemory({points:u.opts.inboundConnectionThreshold,duration:1}),u.incomingPendingConnections=0,u}return Dn(r,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=this.components.metrics)||void 0===t||t.registerMetricGroup("libp2p_connection_manager_connections",{calculate:function(){var e,t={inbound:0,outbound:0},r=Ni(o.connections.values());try{for(r.s();!(e=r.n()).done;){var n,a=Ni(e.value);try{for(a.s();!(n=a.n()).done;){"inbound"===n.value.stat.direction?t.inbound++:t.outbound++}}catch(eL){a.e(eL)}finally{a.f()}}}catch(eL){r.e(eL)}finally{r.f()}return t}}),null===(r=this.components.metrics)||void 0===r||r.registerMetricGroup("libp2p_protocol_streams_total",{label:"protocol",calculate:function(){var e,t={},r=Ni(o.connections.values());try{for(r.s();!(e=r.n()).done;){var n,a=Ni(e.value);try{for(a.s();!(n=a.n()).done;){var i,s=Ni(n.value.streams);try{for(s.s();!(i=s.n()).done;){var u,c,l=i.value,f="".concat(l.stat.direction," ").concat(null!==(u=l.stat.protocol)&&void 0!==u?u:"unnegotiated");t[f]=(null!==(c=t[f])&&void 0!==c?c:0)+1}}catch(eL){s.e(eL)}finally{s.f()}}}catch(eL){a.e(eL)}finally{a.f()}}}catch(eL){r.e(eL)}finally{r.f()}return t}}),null===(n=this.components.metrics)||void 0===n||n.registerMetricGroup("libp2p_connection_manager_protocol_streams_per_connection_90th_percentile",{label:"protocol",calculate:function(){var e,t={},r=Ni(o.connections.values());try{for(r.s();!(e=r.n()).done;){var n,a=Ni(e.value);try{for(a.s();!(n=a.n()).done;){var i,s=n.value,u={},c=Ni(s.streams);try{for(c.s();!(i=c.n()).done;){var l,f,h=i.value,p="".concat(h.stat.direction," ").concat(null!==(l=h.stat.protocol)&&void 0!==l?l:"unnegotiated");u[p]=(null!==(f=u[p])&&void 0!==f?f:0)+1}}catch(eL){c.e(eL)}finally{c.f()}for(var d=0,v=Object.entries(u);d<v.length;d++){var y,b=Ia(v[d],2),g=b[0],m=b[1];t[g]=null!==(y=t[g])&&void 0!==y?y:[],t[g].push(m)}}}catch(eL){a.e(eL)}finally{a.f()}}}catch(eL){r.e(eL)}finally{r.f()}for(var w={},k=0,x=Object.entries(t);k<x.length;k++){var _=Ia(x[k],2),E=_[0],S=_[1];S=S.sort((function(e,t){return e-t}));var A=Math.floor(.9*S.length);w[E]=S[A]}return w}}),null===(a=this.latencyMonitor)||void 0===a||a.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),null===(i=this.latencyMonitor)||void 0===i||i.addEventListener("data",this._onLatencyMeasure),this.started=!0,zne("started");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"afterStart",value:function(){var e=An(En().mark((function e(){var t=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.components.upgrader.addEventListener("connection",this.onConnect),this.components.upgrader.addEventListener("connectionEnd",this.onDisconnect),Promise.resolve().then(An(En().mark((function e(){var r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.t0=Ni,e.next=4,t.components.peerStore.all();case 4:e.t1=e.sent,a=(0,e.t0)(e.t1),e.prev=6,a.s();case 8:if((i=a.n()).done){e.next=17;break}return o=i.value,e.next=12,t.components.peerStore.getTags(o.id);case 12:s=e.sent,s.filter((function(e){return"keep-alive"===e.name})).length>0&&n.push(o.id);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(6),a.e(e.t2);case 22:return e.prev=22,a.f(),e.finish(22);case 25:null===(r=t.connectOnStartupController)||void 0===r||r.clear(),t.connectOnStartupController=new Uf.TimeoutController(t.startupReconnectTimeout);try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,t.connectOnStartupController.signal)}catch(u){}return e.next=30,Promise.all(n.map(function(){var e=An(En().mark((function e(r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.openConnection(r,{signal:null===(n=t.connectOnStartupController)||void 0===n?void 0:n.signal}).catch((function(e){zne.error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 30:case"end":return e.stop()}}),e,null,[[6,19,22,25]])})))).catch((function(e){zne.error(e)})).finally((function(){var e;null===(e=t.connectOnStartupController)||void 0===e||e.clear()}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"beforeStop",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=this.connectOnStartupController)||void 0===t||t.abort(),this.components.upgrader.removeEventListener("connection",this.onConnect),this.components.upgrader.removeEventListener("connectionEnd",this.onDisconnect);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.latencyMonitor)||void 0===t||t.removeEventListener("data",this._onLatencyMeasure),null===(r=this.latencyMonitor)||void 0===r||r.stop(),this.started=!1,e.next=5,this._close();case 5:zne("stopped");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_close",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=Ni(this.connections.values()),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=24;break}a=n.value,i=Ni(a),e.prev=7,s=En().mark((function e(){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o.value,t.push(An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.close();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),zne.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))());case 2:case"end":return e.stop()}}),e)})),i.s();case 10:if((o=i.n()).done){e.next=14;break}return e.delegateYield(s(),"t0",12);case 12:e.next=10;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(7),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(2),r.e(e.t2);case 29:return e.prev=29,r.f(),e.finish(29);case 32:return zne("closing %d connections",t.length),e.next=35,Promise.all(t);case 35:this.connections.clear();case 36:case"end":return e.stop()}}),e,this,[[2,26,29,32],[7,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"onConnect",value:function(e){this._onConnect(e).catch((function(e){zne.error(e)}))}},{key:"_onConnect",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.detail,this.started){e.next=5;break}return e.next=4,r.close();case 4:return e.abrupt("return");case 5:if(n=r.remotePeer,a=n.toString(),null!=(i=this.connections.get(a))?i.push(r):this.connections.set(a,[r]),null==n.publicKey){e.next=12;break}return e.next=12,this.components.peerStore.keyBook.set(n,n.publicKey);case 12:return o=this.getConnections().length,s=o-this.opts.maxConnections,e.next=16,this._checkMaxLimit("maxConnections",o,s);case 16:this.dispatchEvent(new fZ("peer:connect",{detail:r}));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDisconnect",value:function(e){var t=e.detail;if(this.started){var r=t.remotePeer.toString(),n=this.connections.get(r);null!=n&&n.length>1?(n=n.filter((function(e){return e.id!==t.id})),this.connections.set(r,n)):null!=n&&(this.connections.delete(r),this.dispatchEvent(new fZ("peer:disconnect",{detail:t})))}}},{key:"getConnections",value:function(e){var t;if(null!=e)return null!==(t=this.connections.get(e.toString()))&&void 0!==t?t:[];var r,n=[],a=Ni(this.connections.values());try{for(a.s();!(r=a.n()).done;){var i=r.value;n=n.concat(i)}}catch(eL){a.e(eL)}finally{a.f()}return n}},{key:"openConnection",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:{},n=Une(t),a=n.peerId,i=n.multiaddr,null!=a||null!=i){e.next=4;break}throw ca(new TypeError("Can only open connections to PeerIds or Multiaddrs"),T9.ERR_INVALID_PARAMETERS);case 4:if(null==a){e.next=10;break}if(zne("dial to",a),!((o=this.getConnections(a)).length>0)){e.next=10;break}return zne("had an existing connection to %p",a),e.abrupt("return",o[0]);case 10:if(null==(null===r||void 0===r?void 0:r.signal)){s=new Uf.TimeoutController(this.dialTimeout),r.signal=s.signal;try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,s.signal)}catch(d){}}return e.prev=11,e.next=14,this.components.dialer.dial(t,r);case 14:u=e.sent,null==(c=this.connections.get(u.remotePeer.toString()))&&(c=[],this.connections.set(u.remotePeer.toString(),c)),l=!1,f=Ni(c);try{for(f.s();!(h=f.n()).done;)h.value.id===u.id&&(l=!0)}catch(eL){f.e(eL)}finally{f.f()}return l||c.push(u),e.abrupt("return",u);case 22:return e.prev=22,null!=s&&s.clear(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[11,,22,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"closeConnections",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null!==(r=this.connections.get(t.toString()))&&void 0!==r?r:[],e.next=3,Promise.all(n.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAll",value:function(e){if(!hb(e))throw ca(new Error("peerId must be an instance of peer-id"),T9.ERR_INVALID_PARAMETERS);var t=e.toString(),r=this.connections.get(t);return null!=r?r.filter((function(e){return e.stat.status===jte})):[]}},{key:"_onLatencyMeasure",value:function(e){var t=e.detail;this._checkMaxLimit("maxEventLoopDelay",t.avgMs,1).catch((function(e){zne.error(e)}))}},{key:"_checkMaxLimit",value:function(){var e=An(En().mark((function e(t,r){var n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>2&&void 0!==i[2]?i[2]:1,null!=(a=this.opts[t])){e.next=5;break}return zne.trace("limit %s was not set so it cannot be applied",t),e.abrupt("return");case 5:if(zne.trace("checking limit of %s. current value: %d of %d",t,r,a),!(r>a)){e.next=10;break}return zne("%s: limit exceeded: %p, %d/%d, pruning %d connection(s)",this.components.peerId,t,r,a,n),e.next=10,this._pruneConnections(n);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_pruneConnections",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p,d=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.getConnections(),n=new Lne,a=Ni(r),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=16;break}if(o=i.value,s=o.remotePeer,!n.has(s)){e.next=10;break}return e.abrupt("continue",14);case 10:return e.next=12,this.components.peerStore.getTags(s);case 12:u=e.sent,n.set(s,u.reduce((function(e,t){return e+t.value}),0));case 14:e.next=5;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),a.e(e.t0);case 21:return e.prev=21,a.f(),e.finish(21);case 24:c=r.sort((function(e,t){var r,a,i=null!==(r=n.get(e.remotePeer))&&void 0!==r?r:0,o=null!==(a=n.get(t.remotePeer))&&void 0!==a?a:0;if(i>o)return 1;if(i<o)return-1;var s=e.stat.timeline.open,u=t.stat.timeline.open;return s<u?1:s>u?-1:0})),l=[],f=Ni(c),e.prev=27,f.s();case 29:if((h=f.n()).done){e.next=37;break}if(p=h.value,zne("too many connections open - closing a connection to %p",p.remotePeer),l.push(p),l.length!==t){e.next=35;break}return e.abrupt("break",37);case 35:e.next=29;break;case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(27),f.e(e.t1);case 42:return e.prev=42,f.f(),e.finish(42);case 45:return e.next=47,Promise.all(l.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.close();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),zne.error(e.t0);case 8:d.onDisconnect(new fZ("connectionEnd",{detail:t}));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()));case 47:case"end":return e.stop()}}),e,this,[[3,18,21,24],[27,39,42,45]])})));return function(t){return e.apply(this,arguments)}}()},{key:"acceptIncomingConnection",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.deny.some((function(e){return t.remoteAddr.toString().startsWith(e.toString())}))){e.next=4;break}return zne("connection from %s refused - connection remote address was in deny list",t.remoteAddr),e.abrupt("return",!1);case 4:if(!this.allow.some((function(e){return t.remoteAddr.toString().startsWith(e.toString())}))){e.next=8;break}return this.incomingPendingConnections++,e.abrupt("return",!0);case 8:if(this.incomingPendingConnections!==this.opts.maxIncomingPendingConnections){e.next=11;break}return zne("connection from %s refused - incomingPendingConnections exceeded by peer %s",t.remoteAddr),e.abrupt("return",!1);case 11:if(!t.remoteAddr.isThinWaistAddress()){e.next=22;break}return r=t.remoteAddr.nodeAddress().address,e.prev=13,e.next=16,this.inboundConnectionRateLimiter.consume(r,1);case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(13),zne("connection from %s refused - inboundConnectionThreshold exceeded by host %s",r,t.remoteAddr),e.abrupt("return",!1);case 22:if(!(this.getConnections().length<this.opts.maxConnections)){e.next=25;break}return this.incomingPendingConnections++,e.abrupt("return",!0);case 25:return zne("connection from %s refused - maxConnections exceeded",t.remoteAddr),e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e,this,[[13,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"afterUpgradeInbound",value:function(){this.incomingPendingConnections--}}]),r}(cZ),jne=__webpack_require__(4306),qne=ua("libp2p:connection-manager:auto-dialler"),Kne={enabled:!0,minConnections:0,autoDialInterval:1e4},Hne=function(){function e(t,r){Cn(this,e),this.components=t,this.options=Gn.call({ignoreUndefined:!0},Kne,r),this.running=!1,this._autoDial=this._autoDial.bind(this),qne("options: %j",this.options)}return Dn(e,[{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.enabled){e.next=3;break}return qne("not enabled"),e.abrupt("return");case 3:this.running=!0,this._autoDial().catch((function(e){qne.error("could start autodial",e)})),qne("started");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.enabled){e.next=3;break}return qne("not enabled"),e.abrupt("return");case 3:this.running=!1,null!=this.autoDialTimeout&&this.autoDialTimeout.clear(),qne("stopped");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_autoDial",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.autoDialTimeout&&this.autoDialTimeout.clear(),t=this.options.minConnections,!(this.components.connectionManager.getConnections().length>=t)){e.next=5;break}return this.autoDialTimeout=jne(this._autoDial,this.options.autoDialInterval),e.abrupt("return");case 5:return e.next=7,this.components.peerStore.all();case 7:return r=e.sent,e.next=10,TS(r.sort((function(){return Math.random()>.5?1:-1})),(function(e){return iS(e,(function(e){return!e.id.equals(o.components.peerId)}))}),(function(e){return nG(e,(function(e,t){return t.protocols.length>e.protocols.length||null!=t.id.publicKey&&null==e.id.publicKey?1:-1}))}),function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eS(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:n=e.sent,a=0;case 12:if(!(this.running&&a<n.length&&this.components.connectionManager.getConnections().length<t)){e.next=29;break}if(this.running){e.next=15;break}return e.abrupt("return");case 15:if(i=n[a],0!==this.components.connectionManager.getConnections(i.id).length){e.next=26;break}return qne("connecting to a peerStore stored peer %p",i.id),e.prev=18,e.next=21,this.components.connectionManager.openConnection(i.id);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(18),qne.error("could not connect to peerStore stored peer",e.t0);case 26:a++,e.next=12;break;case 29:if(this.running){e.next=31;break}return e.abrupt("return");case 31:this.autoDialTimeout=jne(this._autoDial,this.options.autoDialInterval);case 32:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(){return e.apply(this,arguments)}}()}]),e}();!function(e){var t,r,n;!function(e){e.SUCCESS="SUCCESS",e.HOP_SRC_ADDR_TOO_LONG="HOP_SRC_ADDR_TOO_LONG",e.HOP_DST_ADDR_TOO_LONG="HOP_DST_ADDR_TOO_LONG",e.HOP_SRC_MULTIADDR_INVALID="HOP_SRC_MULTIADDR_INVALID",e.HOP_DST_MULTIADDR_INVALID="HOP_DST_MULTIADDR_INVALID",e.HOP_NO_CONN_TO_DST="HOP_NO_CONN_TO_DST",e.HOP_CANT_DIAL_DST="HOP_CANT_DIAL_DST",e.HOP_CANT_OPEN_DST_STREAM="HOP_CANT_OPEN_DST_STREAM",e.HOP_CANT_SPEAK_RELAY="HOP_CANT_SPEAK_RELAY",e.HOP_CANT_RELAY_TO_SELF="HOP_CANT_RELAY_TO_SELF",e.STOP_SRC_ADDR_TOO_LONG="STOP_SRC_ADDR_TOO_LONG",e.STOP_DST_ADDR_TOO_LONG="STOP_DST_ADDR_TOO_LONG",e.STOP_SRC_MULTIADDR_INVALID="STOP_SRC_MULTIADDR_INVALID",e.STOP_DST_MULTIADDR_INVALID="STOP_DST_MULTIADDR_INVALID",e.STOP_RELAY_REFUSED="STOP_RELAY_REFUSED",e.MALFORMED_MESSAGE="MALFORMED_MESSAGE"}(e.Status||(e.Status={})),function(e){e[e.SUCCESS=100]="SUCCESS",e[e.HOP_SRC_ADDR_TOO_LONG=220]="HOP_SRC_ADDR_TOO_LONG",e[e.HOP_DST_ADDR_TOO_LONG=221]="HOP_DST_ADDR_TOO_LONG",e[e.HOP_SRC_MULTIADDR_INVALID=250]="HOP_SRC_MULTIADDR_INVALID",e[e.HOP_DST_MULTIADDR_INVALID=251]="HOP_DST_MULTIADDR_INVALID",e[e.HOP_NO_CONN_TO_DST=260]="HOP_NO_CONN_TO_DST",e[e.HOP_CANT_DIAL_DST=261]="HOP_CANT_DIAL_DST",e[e.HOP_CANT_OPEN_DST_STREAM=262]="HOP_CANT_OPEN_DST_STREAM",e[e.HOP_CANT_SPEAK_RELAY=270]="HOP_CANT_SPEAK_RELAY",e[e.HOP_CANT_RELAY_TO_SELF=280]="HOP_CANT_RELAY_TO_SELF",e[e.STOP_SRC_ADDR_TOO_LONG=320]="STOP_SRC_ADDR_TOO_LONG",e[e.STOP_DST_ADDR_TOO_LONG=321]="STOP_DST_ADDR_TOO_LONG",e[e.STOP_SRC_MULTIADDR_INVALID=350]="STOP_SRC_MULTIADDR_INVALID",e[e.STOP_DST_MULTIADDR_INVALID=351]="STOP_DST_MULTIADDR_INVALID",e[e.STOP_RELAY_REFUSED=390]="STOP_RELAY_REFUSED",e[e.MALFORMED_MESSAGE=400]="MALFORMED_MESSAGE"}(t||(t={})),function(e){e.codec=function(){return ng(t)}}(e.Status||(e.Status={})),function(e){e.HOP="HOP",e.STOP="STOP",e.STATUS="STATUS",e.CAN_HOP="CAN_HOP"}(e.Type||(e.Type={})),function(e){e[e.HOP=1]="HOP",e[e.STOP=2]="STOP",e[e.STATUS=3]="STATUS",e[e.CAN_HOP=4]="CAN_HOP"}(r||(r={})),function(e){e.codec=function(){return ng(r)}}(e.Type||(e.Type={})),function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.id&&e.id.byteLength>0)&&(t.uint32(10),t.bytes(e.id)),null!=e.addrs){var n,a=Ni(e.addrs);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.uint32(18),t.bytes(i)}}catch(eL){a.e(eL)}finally{a.f()}}!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={id:new Uint8Array(0),addrs:[]},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.id=e.bytes();break;case 2:r.addrs.push(e.bytes());break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(e.Peer||(e.Peer={})),e.codec=function(){return null==n&&(n=ag((function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==n.lengthDelimited&&r.fork(),null!=t.type&&(r.uint32(8),e.Type.codec().encode(t.type,r)),null!=t.srcPeer&&(r.uint32(18),e.Peer.codec().encode(t.srcPeer,r,{writeDefaults:!1})),null!=t.dstPeer&&(r.uint32(26),e.Peer.codec().encode(t.dstPeer,r,{writeDefaults:!1})),null!=t.code&&(r.uint32(32),e.Status.codec().encode(t.code,r)),!1!==n.lengthDelimited&&r.ldelim()}),(function(t,r){for(var n={},a=null==r?t.len:t.pos+r;t.pos<a;){var i=t.uint32();switch(i>>>3){case 1:n.type=e.Type.codec().decode(t);break;case 2:n.srcPeer=e.Peer.codec().decode(t,t.uint32());break;case 3:n.dstPeer=e.Peer.codec().decode(t,t.uint32());break;case 4:n.code=e.Status.codec().decode(t);break;default:t.skipType(7&i)}}return n}))),n},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(Mne||(Mne={}));var Gne=ua("libp2p:stream:converter");function Wne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.stream,n=e.remoteAddr,a=r.sink,i=r.source,o=Hn(En().mark((function e(){var t,r,n,a,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,r=!1,e.prev=2,a=zn(i);case 4:return e.next=6,Mf(a.next());case 6:if(!(t=!(o=e.sent).done)){e.next=12;break}return s=o.value,e.delegateYield(Cb(zn(s)),"t0",9);case 9:t=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),r=!0,n=e.t1;case 18:if(e.prev=18,e.prev=19,!t||null==a.return){e.next=23;break}return e.next=23,Mf(a.return());case 23:if(e.prev=23,!r){e.next=26;break}throw n;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})))(),s={sink:function(e){return An(En().mark((function r(){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null!=t.signal&&(e=U$(e,t.signal)),r.prev=1,r.next=4,a(e);case 4:return r.next=6,u();case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),"aborted"!==r.t0.type&&Gne(r.t0);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},source:null!=t.signal?U$(o,t.signal):o,remoteAddr:n,timeline:{open:Date.now(),close:void 0},close:function(){return An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Uint8Array(0);case 2:case"end":return e.stop()}}),e)})))());case 2:return e.next=4,u();case 4:case"end":return e.stop()}}),e)})))()}};function u(){return c.apply(this,arguments)}function c(){return(c=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==s.timeline.close&&(s.timeline.close=Date.now()),e.next=3,Promise.resolve();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s}var Yne="/libp2p/circuit/relay/0.1.0";function Qne(e,t){e.write({type:Mne.Type.STATUS,code:t})}function Jne(e,t){try{var r;null!=(null===(r=e.dstPeer)||void 0===r?void 0:r.addrs)&&e.dstPeer.addrs.forEach((function(e){return Gd(e)}))}catch(eL){throw Qne(t,e.type===Mne.Type.HOP?Mne.Status.HOP_DST_MULTIADDR_INVALID:Mne.Status.STOP_DST_MULTIADDR_INVALID),eL}try{var n;null!=(null===(n=e.srcPeer)||void 0===n?void 0:n.addrs)&&e.srcPeer.addrs.forEach((function(e){return Gd(e)}))}catch(eL){throw Qne(t,e.type===Mne.Type.HOP?Mne.Status.HOP_SRC_MULTIADDR_INVALID:Mne.Status.STOP_SRC_MULTIADDR_INVALID),eL}}function Zne(e){var t,r=pS(),n=function(e){var t=Hn(En().mark((function t(){var r,n,a,i,o,s,u,c,l;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void(t.next=2);case 2:r=t.sent,n=new ST,a=!1,i=!1,t.prev=6,s=zn(e);case 8:return t.next=10,Mf(s.next());case 10:if(!(a=!(u=t.sent).done)){t.next=38;break}if(c=u.value,null!=r){t.next=19;break}return n.append(c),t.next=16,n;case 16:return r=t.sent,n=new ST,t.abrupt("continue",35);case 19:n.append(c);case 20:if(!(n.length>=r)){t.next=35;break}return l=n.sublist(0,r),n.consume(r),t.next=25,l;case 25:if(null!=(r=t.sent)){t.next=33;break}if(!(n.length>0)){t.next=32;break}return t.next=30,n;case 30:r=t.sent,n=new ST;case 32:return t.abrupt("break",35);case 33:t.next=20;break;case 35:a=!1,t.next=8;break;case 38:t.next=44;break;case 40:t.prev=40,t.t0=t.catch(6),i=!0,o=t.t0;case 44:if(t.prev=44,t.prev=45,!a||null==s.return){t.next=49;break}return t.next=49,Mf(s.return());case 49:if(t.prev=49,!i){t.next=52;break}throw o;case 52:return t.finish(49);case 53:return t.finish(44);case 54:if(null==r){t.next=56;break}throw Object.assign(new Error("stream ended before ".concat(r," bytes became available")),{code:"ERR_UNDER_READ",buffer:n});case 56:case"end":return t.stop()}}),t,null,[[6,40,44,54],[45,,49,53]])})))();return t.next(),t}(e.source),a=xA(),i=e.sink(Hn(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(Cb(zn(r)),"t0",1);case 1:return e.next=3,Mf(a.promise);case 3:return t=e.sent,e.delegateYield(Cb(zn(t)),"t1",5);case 5:case"end":return e.stop()}}),e)})))());i.catch((function(e){t=e}));var o={sink:function(){var e=An(En().mark((function e(r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=4;break}return e.next=3,Promise.reject(t);case 3:case 7:return e.abrupt("return",e.sent);case 4:return a.resolve(r),e.next=7,i;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),source:n};return{reader:n,writer:r,stream:o,rest:function(){return r.end()},write:r.push,read:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.next();case 2:if(null==(t=e.sent).value){e.next=5;break}return e.abrupt("return",t.value);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}var Xne=ua("libp2p:circuit:stream-handler"),$ne=function(){function e(t){Cn(this,e);var r=t.stream,n=t.maxLength,a=void 0===n?4096:n;this.stream=r,this.shake=Zne(this.stream),this.decoder=K$.fromReader(this.shake.reader,{maxDataLength:a})}return Dn(e,[{key:"read",value:function(){var e=An(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decoder.next();case 2:if(null==(t=e.sent).value){e.next=7;break}return r=Mne.decode(t.value),Xne("read message type",r.type),e.abrupt("return",r);case 7:Xne("read received no value, closing stream"),this.close();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"write",value:function(e){Xne("write message type %s",e.type),this.shake.write(V$.single(Mne.encode(e)))}},{key:"rest",value:function(){return this.shake.rest(),this.shake.stream}},{key:"end",value:function(e){this.write(e),this.close()}},{key:"close",value:function(){Xne("closing the stream"),this.rest().sink([]).catch((function(e){Xne.error(e)}))}}]),e}(),eae=ua("libp2p:circuit:stop");function tae(e){var t=e.connection,r=e.request,n=e.streamHandler;try{Jne(r,n)}catch(eL){return void eae.error("invalid stop request via peer %p %o",t.remotePeer,eL)}return eae("stop request is valid"),n.write({type:Mne.Type.STATUS,code:Mne.Status.SUCCESS}),n.rest()}function rae(e){return nae.apply(this,arguments)}function nae(){return nae=An(En().mark((function e(t){var r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.connection,n=t.request,a=t.signal,e.next=3,r.newStream(Yne,{signal:a});case 3:return i=e.sent,eae("starting stop request to %p",r.remotePeer),(o=new $ne({stream:i})).write(n),e.next=9,o.read();case 9:if(null!=(s=e.sent)){e.next=13;break}return o.close(),e.abrupt("return");case 13:if(s.code!==Mne.Status.SUCCESS){e.next=16;break}return eae("stop request to %p was successful",r.remotePeer),e.abrupt("return",o.rest());case 16:eae("stop request failed with code %d",s.code),o.close();case 18:case"end":return e.stop()}}),e)}))),nae.apply(this,arguments)}var aae=ua("libp2p:circuit:hop");function iae(e){return oae.apply(this,arguments)}function oae(){return oae=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.connection,n=t.request,a=t.streamHandler,i=t.circuit,o=t.connectionManager,i.hopEnabled()){e.next=4;break}return aae("HOP request received but we are not acting as a relay"),e.abrupt("return",a.end({type:Mne.Type.STATUS,code:Mne.Status.HOP_CANT_SPEAK_RELAY}));case 4:e.prev=4,Jne(n,a),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(4),aae.error("invalid hop request via peer %p %o",r.remotePeer,e.t0),e.abrupt("return");case 12:if(null!=n.dstPeer){e.next=15;break}return aae("HOP request received but we do not receive a dstPeer"),e.abrupt("return");case 15:if(s=Nte(n.dstPeer.id),0!==(u=o.getConnections(s)).length||i.hopActive()){e.next=20;break}return aae("HOP request received but we are not connected to the destination peer"),e.abrupt("return",a.end({type:Mne.Type.STATUS,code:Mne.Status.HOP_NO_CONN_TO_DST}));case 20:if(0!==u.length){e.next=23;break}return aae("did not have connection to remote peer"),e.abrupt("return",a.end({type:Mne.Type.STATUS,code:Mne.Status.HOP_NO_CONN_TO_DST}));case 23:return c={type:Mne.Type.STOP,dstPeer:n.dstPeer,srcPeer:n.srcPeer},e.prev=24,aae("performing STOP request"),e.next=28,rae({connection:u[0],request:c});case 28:if(null!=(f=e.sent)){e.next=31;break}throw new Error("Could not stop");case 31:l=f,e.next=38;break;case 34:return e.prev=34,e.t1=e.catch(24),aae.error(e.t1),e.abrupt("return");case 38:return aae("hop request from %p is valid",r.remotePeer),a.write({type:Mne.Type.STATUS,code:Mne.Status.SUCCESS}),h=a.rest(),aae("creating related connections"),e.next=44,TS(h,l,h);case 44:return e.abrupt("return",e.sent);case 45:case"end":return e.stop()}}),e,null,[[4,8],[24,34]])}))),oae.apply(this,arguments)}function sae(e){return uae.apply(this,arguments)}function uae(){return uae=An(En().mark((function e(t){var r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connection,a=t.request,i=t.signal,e.next=3,n.newStream(Yne,{signal:i});case 3:return o=e.sent,(s=new $ne({stream:o})).write(a),e.next=8,s.read();case 8:if(null!=(u=e.sent)){e.next=11;break}throw ca(new Error("HOP request had no response"),T9.ERR_HOP_REQUEST_FAILED);case 11:if(u.code!==Mne.Status.SUCCESS){e.next=14;break}return aae("hop request was successful"),e.abrupt("return",s.rest());case 14:throw aae("hop request failed with code %d, closing stream",u.code),s.close(),ca(new Error('HOP request failed with code "'.concat(null!==(r=u.code)&&void 0!==r?r:"unknown",'"')),T9.ERR_HOP_REQUEST_FAILED);case 17:case"end":return e.stop()}}),e)}))),uae.apply(this,arguments)}function cae(e){return lae.apply(this,arguments)}function lae(){return(lae=An(En().mark((function e(t){var r,n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.connection,n=t.signal,e.next=3,r.newStream(Yne,{signal:n});case 3:return a=e.sent,(i=new $ne({stream:a})).write({type:Mne.Type.CAN_HOP}),e.next=8,i.read();case 8:return o=e.sent,e.next=11,i.close();case 11:if(null!=o&&o.code===Mne.Status.SUCCESS){e.next=13;break}return e.abrupt("return",!1);case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fae(e){var t=e.connection,r=e.streamHandler,n=e.circuit.hopEnabled();aae("can hop (%s) request from %p",n,t.remotePeer),r.end({type:Mne.Type.STATUS,code:n?Mne.Status.SUCCESS:Mne.Status.HOP_CANT_SPEAK_RELAY})}var hae=ua("libp2p:circuit"),pae=function(e){function t(e,r){Cn(this,t),this._init=r,this.components=e,this._started=!1}return Dn(t,[{key:"isStarted",value:function(){return this._started}},{key:"start",value:function(){var e=An(En().mark((function e(){var t=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._started){e.next=2;break}return e.abrupt("return");case 2:return this._started=!0,e.next=5,this.components.registrar.handle(Yne,(function(e){t._onProtocol(e).catch((function(e){hae.error(e)}))}),jn({},this._init)).catch((function(e){hae.error(e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.registrar.unhandle(Yne);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hopEnabled",value:function(){return!0}},{key:"hopActive",value:function(){return!0}},{key:A9,get:function(){return!0}},{key:e,get:function(){return"libp2p/circuit-relay-v1"}},{key:"_onProtocol",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p,d,v;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.connection,n=t.stream,a=new Uf.TimeoutController(this._init.hop.timeout);try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,a.signal)}catch(y){}return e.prev=3,i=z$(n,a.signal),o=new $ne({stream:jn(jn({},n),i)}),e.next=8,o.read();case 8:if(null!=(s=e.sent)){e.next=14;break}return hae("request was invalid, could not read from stream"),o.write({type:Mne.Type.STATUS,code:Mne.Status.MALFORMED_MESSAGE}),o.close(),e.abrupt("return");case 14:e.t0=s.type,e.next=e.t0===Mne.Type.CAN_HOP?17:e.t0===Mne.Type.HOP?21:e.t0===Mne.Type.STOP?25:30;break;case 17:return hae("received CAN_HOP request from %p",r.remotePeer),e.next=20,fae({circuit:this,connection:r,streamHandler:o});case 20:return e.abrupt("break",34);case 21:return hae("received HOP request from %p",r.remotePeer),e.next=24,iae({connection:r,request:s,streamHandler:o,circuit:this,connectionManager:this.components.connectionManager});case 24:return e.abrupt("break",34);case 25:return hae("received STOP request from %p",r.remotePeer),e.next=28,tae({connection:r,request:s,streamHandler:o});case 28:return u=e.sent,e.abrupt("break",34);case 30:return hae("Request of type %s not supported",s.type),o.write({type:Mne.Type.STATUS,code:Mne.Status.MALFORMED_MESSAGE}),o.close(),e.abrupt("return");case 34:if(null==u){e.next=45;break}return f=r.remoteAddr.encapsulate("/p2p-circuit").encapsulate(Gd(null===(c=s.dstPeer)||void 0===c?void 0:c.addrs[0])),h=Gd(null===(l=s.srcPeer)||void 0===l?void 0:l.addrs[0]),p=Wne({stream:u,remoteAddr:f,localAddr:h}),d=s.type===Mne.Type.HOP?"relay":"inbound",hae("new %s connection %s",d,p.remoteAddr),e.next=42,this.components.upgrader.upgradeInbound(p);case 42:v=e.sent,hae("%s connection %s upgraded",d,p.remoteAddr),null!=this.handler&&this.handler(v);case 45:return e.prev=45,a.clear(),e.finish(45);case 48:case"end":return e.stop()}}),e,this,[[3,,45,48]])})));return function(t){return e.apply(this,arguments)}}()},{key:"dial",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p,d,v,y,b=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=b.length>1&&void 0!==b[1]?b[1]:{},n=t.toString().split("/p2p-circuit"),a=Gd(n[0]),i=Gd(n[n.length-1]),o=a.getPeerId(),s=i.getPeerId(),null!=o&&null!=s){e.next=10;break}throw u="Circuit relay dial failed as addresses did not have peer id",hae.error(u),ca(new Error(u),T9.ERR_RELAYED_DIAL);case 10:if(c=Pte(o),l=Pte(s),f=!1,h=this.components.connectionManager.getConnections(c),null!=(p=h[0])){e.next=22;break}return e.next=18,this.components.peerStore.addressBook.add(c,[a]);case 18:return e.next=20,this.components.connectionManager.openConnection(c,r);case 20:p=e.sent,f=!0;case 22:return e.prev=22,e.next=25,sae(jn(jn({},r),{},{connection:p,request:{type:Mne.Type.HOP,srcPeer:{id:this.components.peerId.toBytes(),addrs:this.components.addressManager.getAddresses().map((function(e){return e.bytes}))},dstPeer:{id:l.toBytes(),addrs:[Gd(i).bytes]}}}));case 25:return d=e.sent,v=a.encapsulate("/p2p-circuit/p2p/".concat(this.components.peerId.toString())),y=Wne({stream:d,remoteAddr:t,localAddr:v}),hae("new outbound connection %s",y.remoteAddr),e.next=31,this.components.upgrader.upgradeOutbound(y);case 31:return e.abrupt("return",e.sent);case 34:if(e.prev=34,e.t0=e.catch(22),hae.error("Circuit relay dial failed",e.t0),e.t1=f,!e.t1){e.next=41;break}return e.next=41,p.close();case 41:throw e.t0;case 42:case"end":return e.stop()}}),e,this,[[22,34]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createListener",value:function(e){return this.handler=e.handler,function(e){var t=new Map;function r(){return(r=An(En().mark((function r(a){var i,o,s,u,c,l;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=a.toString().split("/p2p-circuit").find((function(e){return""!==e})),o=Gd(i),null!=(s=o.getPeerId())){r.next=5;break}throw new Error("Could not determine relay peer from multiaddr");case 5:return u=Pte(s),r.next=8,e.peerStore.addressBook.add(u,[o]);case 8:return r.next=10,e.connectionManager.openConnection(u);case 10:c=r.sent,l=c.remoteAddr.encapsulate("/p2p-circuit"),t.set(c.remotePeer.toString(),l),n.dispatchEvent(new fZ("listening"));case 14:case"end":return r.stop()}}),r)})))).apply(this,arguments)}var n=Object.assign(new cZ,{close:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),listen:function(e){return r.apply(this,arguments)},getAddrs:function(){var e,r=[],n=Ni(t.values());try{for(n.s();!(e=n.n()).done;){var a=e.value;r.push(a)}}catch(eL){n.e(eL)}finally{n.f()}return r}});return e.connectionManager.addEventListener("peer:disconnect",(function(e){var r=e.detail;t.delete(r.remotePeer.toString())&&n.dispatchEvent(new fZ("close"))})),n}({connectionManager:this.components.connectionManager,peerStore:this.components.peerStore})}},{key:"filter",value:function(e){return(e=Array.isArray(e)?e:[e]).filter((function(e){return fv.matches(e)}))}}]),t}(Symbol.toStringTag);function dae(e){return vae.apply(this,arguments)}function vae(){return vae=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new TextEncoder).encode(t),e.next=3,fte.digest(r);case 3:return n=e.sent,e.abrupt("return",Mee.createV0(n));case 5:case"end":return e.stop()}}),e)}))),vae.apply(this,arguments)}var yae="hop_relay",bae="true",gae="/libp2p/relay",mae=__webpack_require__(5560),wae="[a-fA-F\\d:]",kae=function(e){return e&&e.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(wae,")|(?<=").concat(wae,")(?=\\s|$))"):""},xae="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",_ae="[a-fA-F\\d]{1,4}",Eae="\n(?:\n(?:".concat(_ae,":){7}(?:").concat(_ae,"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:").concat(_ae,":){6}(?:").concat(xae,"|:").concat(_ae,"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:").concat(_ae,":){5}(?::").concat(xae,"|(?::").concat(_ae,"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:").concat(_ae,":){4}(?:(?::").concat(_ae,"){0,1}:").concat(xae,"|(?::").concat(_ae,"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:").concat(_ae,":){3}(?:(?::").concat(_ae,"){0,2}:").concat(xae,"|(?::").concat(_ae,"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:").concat(_ae,":){2}(?:(?::").concat(_ae,"){0,3}:").concat(xae,"|(?::").concat(_ae,"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:").concat(_ae,":){1}(?:(?::").concat(_ae,"){0,4}:").concat(xae,"|(?::").concat(_ae,"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::").concat(_ae,"){0,5}:").concat(xae,"|(?::").concat(_ae,"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Sae=new RegExp("(?:^".concat(xae,"$)|(?:^").concat(Eae,"$)")),Aae=new RegExp("^".concat(xae,"$")),Cae=new RegExp("^".concat(Eae,"$")),Iae=function(e){return e&&e.exact?Sae:new RegExp("(?:".concat(kae(e)).concat(xae).concat(kae(e),")|(?:").concat(kae(e)).concat(Eae).concat(kae(e),")"),"g")};Iae.v4=function(e){return e&&e.exact?Aae:new RegExp("".concat(kae(e)).concat(xae).concat(kae(e)),"g")},Iae.v6=function(e){return e&&e.exact?Cae:new RegExp("".concat(kae(e)).concat(Eae).concat(kae(e)),"g")};var Tae=Iae,Dae=__webpack_require__(4773),Rae=Dae.isValid,Pae=Dae.parse,Nae=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"].map((function(e){return new mae.Netmask(e)}));function Lae(e){return/^::$/.test(e)||/^::1$/.test(e)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(e)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(e)||/^ff([0-9a-fA-F]{2,2}):/i.test(e)}var Oae=function(e){if(Rae(e)){var t=Pae(e);if("ipv4"===t.kind())return function(e){var t,r=Ni(Nae);try{for(r.s();!(t=r.n()).done;)if(t.value.contains(e))return!0}catch(eL){r.e(eL)}finally{r.f()}return!1}(t.toNormalizedString());if("ipv6"===t.kind())return Lae(e)}else if(wh(e)&&Tae.v6().test(e))return Lae(e)};function Bae(e){var t=e.nodeAddress().address;return Boolean(Oae(t))}function Uae(e,t){var r=Bae(e.multiaddr),n=Bae(t.multiaddr);return r&&!n?1:!r&&n||e.isCertified&&!t.isCertified?-1:!e.isCertified&&t.isCertified?1:0}var Mae=ua("libp2p:auto-relay"),zae=function(){},Fae=function(){function e(t,r){var n,a,i,o=this;Cn(this,e),this.components=t,this.addressSorter=null!==(n=r.addressSorter)&&void 0!==n?n:Uae,this.maxListeners=null!==(a=r.maxListeners)&&void 0!==a?a:1,this.listenRelays=new Set,this.onError=null!==(i=r.onError)&&void 0!==i?i:zae,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this.components.peerStore.addEventListener("change:protocols",(function(e){o._onProtocolChange(e).catch((function(e){Mae.error(e)}))})),this.components.connectionManager.addEventListener("peer:disconnect",this._onPeerDisconnected)}return Dn(e,[{key:"_onProtocolChange",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.detail,n=r.peerId,a=r.protocols,i=n.toString(),o=a.find((function(e){return e===Yne})),null!=o){e.next=8;break}if(!this.listenRelays.has(i)){e.next=7;break}return e.next=7,this._removeListenRelay(i);case 7:return e.abrupt("return");case 8:if(!this.listenRelays.has(i)){e.next=10;break}return e.abrupt("return");case 10:if(e.prev=10,0!==(s=this.components.connectionManager.getConnections(n)).length){e.next=14;break}return e.abrupt("return");case 14:if(!(u=s[0]).remoteAddr.protoCodes().includes(290)){e.next=18;break}return Mae("relayed connection to ".concat(i," will not be used to hop on")),e.abrupt("return");case 18:return e.next=20,cae({connection:u});case 20:if(!e.sent){e.next=26;break}return e.next=24,this.components.peerStore.metadataBook.setValue(n,yae,Bf(bae));case 24:return e.next=26,this._addListenRelay(u,i);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(10),this.onError(e.t0);case 31:case"end":return e.stop()}}),e,this,[[10,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_onPeerDisconnected",value:function(e){var t=e.detail.remotePeer.toString();this.listenRelays.has(t)&&this._removeListenRelay(t).catch((function(e){Mae.error(e)}))}},{key:"_addListenRelay",value:function(){var e=An(En().mark((function e(t,r){var n,a=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(this.listenRelays.size>=this.maxListeners)){e.next=3;break}return e.abrupt("return");case 3:return e.t0=TS,e.next=6,this.components.peerStore.addressBook.get(t.remotePeer);case 6:return e.t1=e.sent,e.t2=function(e){return nG(e,a.addressSorter)},e.t3=function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eS(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=11,(0,e.t0)(e.t1,e.t2,e.t3);case 11:return n=e.sent,e.next=14,Promise.all(n.map(function(){var e=An(En().mark((function e(r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null==(n=r.multiaddr).getPeerId()&&(n=n.encapsulate("/p2p/".concat(t.remotePeer.toString()))),n=n.encapsulate("/p2p-circuit"),e.next=6,a.components.transportManager.listen([n]);case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),Mae.error("error listening on circuit address",e.t0),a.onError(e.t0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()));case 14:e.sent.includes(!0)&&this.listenRelays.add(r),e.next=22;break;case 18:e.prev=18,e.t4=e.catch(0),this.onError(e.t4),this.listenRelays.delete(r);case 22:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_removeListenRelay",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.listenRelays.delete(t)){e.next=3;break}return e.next=3,this._listenOnAvailableHopRelays([t]);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_listenOnAvailableHopRelays",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_.length>0&&void 0!==_[0]?_[0]:[],!(this.listenRelays.size>=this.maxListeners)){e.next=3;break}return e.abrupt("return");case 3:return r=[],e.next=6,this.components.peerStore.all();case 6:n=e.sent,a=Ni(n),e.prev=8,a.s();case 10:if((i=a.n()).done){e.next=30;break}if(o=i.value,s=o.id,u=o.metadata,c=s.toString(),!this.listenRelays.has(c)){e.next=15;break}return e.abrupt("continue",28);case 15:if(!t.includes(c)){e.next=17;break}return e.abrupt("continue",28);case 17:if(null!=(l=u.get(yae))&&kh(l)===bae){e.next=20;break}return e.abrupt("continue",28);case 20:if(0!==(f=this.components.connectionManager.getConnections(s)).length){e.next=24;break}return r.push(s),e.abrupt("continue",28);case 24:return e.next=26,this._addListenRelay(f[0],c);case 26:if(!(this.listenRelays.size>=this.maxListeners)){e.next=28;break}return e.abrupt("return");case 28:e.next=10;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(8),a.e(e.t0);case 35:return e.prev=35,a.f(),e.finish(35);case 38:h=0,p=r;case 39:if(!(h<p.length)){e.next=48;break}return d=p[h],e.next=43,this._tryToListenOnRelay(d);case 43:if(!(this.listenRelays.size>=this.maxListeners)){e.next=45;break}return e.abrupt("return");case 45:h++,e.next=39;break;case 48:return e.prev=48,e.next=51,dae(gae);case 51:v=e.sent,y=!1,b=!1,e.prev=54,m=zn(this.components.contentRouting.findProviders(v));case 56:return e.next=58,m.next();case 58:if(!(y=!(w=e.sent).done)){e.next=74;break}if(0!==(k=w.value).multiaddrs.length){e.next=62;break}return e.abrupt("continue",71);case 62:if(!(x=k.id).equals(this.components.peerId)){e.next=65;break}return e.abrupt("continue",71);case 65:return e.next=67,this.components.peerStore.addressBook.add(x,k.multiaddrs);case 67:return e.next=69,this._tryToListenOnRelay(x);case 69:if(!(this.listenRelays.size>=this.maxListeners)){e.next=71;break}return e.abrupt("return");case 71:y=!1,e.next=56;break;case 74:e.next=80;break;case 76:e.prev=76,e.t1=e.catch(54),b=!0,g=e.t1;case 80:if(e.prev=80,e.prev=81,!y||null==m.return){e.next=85;break}return e.next=85,m.return();case 85:if(e.prev=85,!b){e.next=88;break}throw g;case 88:return e.finish(85);case 89:return e.finish(80);case 90:e.next=95;break;case 92:e.prev=92,e.t2=e.catch(48),this.onError(e.t2);case 95:case"end":return e.stop()}}),e,this,[[8,32,35,38],[48,92],[54,76,80,90],[81,,85,89]])})));return function(){return e.apply(this,arguments)}}()},{key:"_tryToListenOnRelay",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.components.connectionManager.openConnection(t);case 3:return r=e.sent,e.next=6,this._addListenRelay(r,t.toString());case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),Mae.error("Could not use %p as relay",t,e.t0),this.onError(e.t0,"could not connect and listen on known hop relay ".concat(t.toString()));case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Vae=ua("libp2p:relay"),jae=function(){function e(t,r){var n;Cn(this,e),this.components=t,this.autoRelay=!1!==(null===(n=r.autoRelay)||void 0===n?void 0:n.enabled)?new Fae(t,jn({addressSorter:r.addressSorter},r.autoRelay)):void 0,this.started=!1,this.init=r,this._advertiseService=this._advertiseService.bind(this)}return Dn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1!==this.init.hop.enabled&&!1!==this.init.advertise.enabled&&(this.timeout=(0,j9.setDelayedInterval)(this._advertiseService,this.init.advertise.ttl,this.init.advertise.bootDelay)),this.started=!0;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=this.timeout&&(0,j9.clearDelayedInterval)(this.timeout),this.started=!1;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_advertiseService",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dae(gae);case 3:return t=e.sent,e.next=6,this.components.contentRouting.provide(t);case 6:e.next=17;break;case 8:if(e.prev=8,e.t0=e.catch(0),e.t0.code!==T9.ERR_NO_ROUTERS_AVAILABLE){e.next=16;break}return Vae.error("a content router, such as a DHT, must be provided in order to advertise the relay service",e.t0),e.next=14,this.stop();case 14:e.next=17;break;case 16:Vae.error(e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),qae=__webpack_require__(786),Kae=(__webpack_require__(6502),__webpack_require__(4348),ig.pki),Hae=function(e,t){var r=Kae.rsa.setPublicKey(t.n,t.e),n=Kae.createCertificate();n.publicKey=r,n.serialNumber="01",n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.validity.notAfter.setFullYear(n.validity.notBefore.getFullYear()+10);var a=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:e.id}];return n.setSubject(a),n.setIssuer(a),n.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),n.sign(t),n};function Gae(e,t){return Wae.apply(this,arguments)}function Wae(){return(Wae=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(r),e.next=3,Promise.all(n);case 3:return a=e.sent,i=a.findIndex((function(e){return e})),e.abrupt("return",t[i]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yae=ua("libp2p:keychain:cms"),Qae=new WeakMap,Jae=function(){function e(t,r){if(Cn(this,e),null==t)throw ca(new Error("keychain is required"),T9.ERR_KEYCHAIN_REQUIRED);this.keychain=t,Qae.set(this,{dek:r})}return Dn(e,[{key:"encrypt",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r instanceof Uint8Array){e.next=2;break}throw ca(new Error("Plain data must be a Uint8Array"),T9.ERR_INVALID_PARAMETERS);case 2:return e.next=4,this.keychain.findKeyByName(t);case 4:return n=e.sent,e.next=7,this.keychain.getPrivateKey(t);case 7:if(a=e.sent,null!=(i=Qae.get(this))){e.next=11;break}throw ca(new Error("dek missing"),T9.ERR_INVALID_PARAMETERS);case 11:return o=i.dek,s=ig.pki.decryptRsaPrivateKey(a,o),e.next=15,Hae(n,s);case 15:return u=e.sent,(c=ig.pkcs7.createEnvelopedData()).addRecipient(u),c.content=ig.util.createBuffer(r),c.encrypt(),l=ig.asn1.toDer(c.toAsn1()).getBytes(),e.abrupt("return",Bf(l,"ascii"));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"decrypt",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw ca(new Error("CMS data is required"),T9.ERR_INVALID_PARAMETERS);case 2:e.prev=2,n=ig.util.createBuffer(kh(t,"ascii")),a=ig.asn1.fromDer(n),r=ig.pkcs7.messageFromAsn1(a),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),Yae.error(e.t0),ca(new Error("Invalid CMS"),T9.ERR_INVALID_CMS);case 12:return i=r.recipients.filter((function(e){return e.issuer.find((function(e){return"O"===e.shortName&&"ipfs"===e.value}))})).filter((function(e){return e.issuer.find((function(e){return"CN"===e.shortName}))})).map((function(e){return{recipient:e,keyId:e.issuer.find((function(e){return"CN"===e.shortName})).value}})),e.next=15,Gae(i,function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.keychain.findKeyById(t.keyId);case 3:if(null==e.sent){e.next=6;break}return e.abrupt("return",!0);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}());case 15:if(null!=(o=e.sent)){e.next=19;break}throw s=i.map((function(e){return e.keyId})),ca(new Error("Decryption needs one of the key(s): ".concat(s.join(", "))),T9.ERR_MISSING_KEYS,{missingKeys:s});case 19:return e.next=21,this.keychain.findKeyById(o.keyId);case 21:if(null!=(u=e.sent)){e.next=24;break}throw ca(new Error("No key available to decrypto"),T9.ERR_NO_KEY);case 24:return e.next=26,this.keychain.getPrivateKey(u.name);case 26:if(c=e.sent,null!=(l=Qae.get(this))){e.next=30;break}throw ca(new Error("dek missing"),T9.ERR_INVALID_PARAMETERS);case 30:return f=l.dek,h=ig.pki.decryptRsaPrivateKey(c,f),r.decrypt(o.recipient,h),e.abrupt("return",Bf(r.content.getBytes(),"ascii"));case 34:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Zae=ua("libp2p:keychain"),Xae="/info/",$ae=new WeakMap,eie=14,tie=16,rie=1e3,nie={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function aie(e){return null!=e&&("string"===typeof e&&(e===qae(e.trim())&&e.length>0))}function iie(){return oie.apply(this,arguments)}function oie(){return oie=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,1e3,t=800*Math.random()+200,e.next=5,new Promise((function(e){return setTimeout(e,t)}));case 5:case"end":return e.stop()}}),e)}))),oie.apply(this,arguments)}function sie(e){return new Hv("/pkcs8/"+e)}function uie(e){return new Hv(Xae+e)}var cie,lie=function(){function e(t,r){var n,a,i,o,s,u,c,l,f,h;if(Cn(this,e),this.components=t,this.init=Gn(nie,r),null!=this.init.pass&&(null===(n=this.init.pass)||void 0===n?void 0:n.length)<20)throw new Error("pass must be least 20 characters");if(null!=(null===(a=this.init.dek)||void 0===a?void 0:a.keyLength)&&this.init.dek.keyLength<eie)throw new Error("dek.keyLength must be least ".concat(eie," bytes"));if(null!=(null===(i=this.init.dek)||void 0===i||null===(o=i.salt)||void 0===o?void 0:o.length)&&this.init.dek.salt.length<tie)throw new Error("dek.saltLength must be least ".concat(tie," bytes"));if(null!=(null===(s=this.init.dek)||void 0===s?void 0:s.iterationCount)&&this.init.dek.iterationCount<rie)throw new Error("dek.iterationCount must be least ".concat(rie));var p=null!=this.init.pass&&null!=(null===(u=this.init.dek)||void 0===u?void 0:u.salt)?oX(this.init.pass,null===(c=this.init.dek)||void 0===c?void 0:c.salt,null===(l=this.init.dek)||void 0===l?void 0:l.iterationCount,null===(f=this.init.dek)||void 0===f?void 0:f.keyLength,null===(h=this.init.dek)||void 0===h?void 0:h.hash):"";$ae.set(this,{dek:p}),this.started=!1}return Dn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=uie("self"),e.next=3,this.components.datastore.has(t);case 3:if(e.sent){e.next=6;break}return e.next=6,this.importPeer("self",this.components.peerId);case 6:this.started=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.started=!1}},{key:"cms",get:function(){var e=$ae.get(this);if(null==e)throw ca(new Error("dek missing"),T9.ERR_INVALID_PARAMETERS);var t=e.dek;return new Jae(this,t)}},{key:"createKey",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>2&&void 0!==h[2]?h[2]:2048,aie(t)&&"self"!==t){e.next=5;break}return e.next=4,iie();case 4:throw ca(new Error("Invalid key name"),T9.ERR_INVALID_KEY_NAME);case 5:if("string"===typeof r){e.next=9;break}return e.next=8,iie();case 8:throw ca(new Error("Invalid key type"),T9.ERR_INVALID_KEY_TYPE);case 9:return a=sie(t),e.next=12,this.components.datastore.has(a);case 12:if(!e.sent){e.next=17;break}return e.next=16,iie();case 16:throw ca(new Error("Key name already exists"),T9.ERR_KEY_ALREADY_EXISTS);case 17:e.t0=r.toLowerCase(),e.next="rsa"===e.t0?20:25;break;case 20:if(Number.isSafeInteger(n)&&!(n<2048)){e.next=24;break}return e.next=23,iie();case 23:throw ca(new Error("Invalid RSA key size"),T9.ERR_INVALID_KEY_SIZE);case 24:case 25:return e.abrupt("break",26);case 26:return e.prev=26,e.next=29,gx(r,n);case 29:return o=e.sent,e.next=32,o.id();case 32:if(s=e.sent,null!=(u=$ae.get(this))){e.next=36;break}throw ca(new Error("dek missing"),T9.ERR_INVALID_PARAMETERS);case 36:return c=u.dek,e.next=39,o.export(c);case 39:return l=e.sent,i={name:t,id:s},(f=this.components.datastore.batch()).put(a,Bf(l)),f.put(uie(t),Bf(JSON.stringify(i))),e.next=46,f.commit();case 46:e.next=53;break;case 48:return e.prev=48,e.t1=e.catch(26),e.next=52,iie();case 52:throw e.t1;case 53:return e.abrupt("return",i);case 54:case"end":return e.stop()}}),e,this,[[26,48]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"listKeys",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={prefix:Xae},r=[],n=!1,a=!1,e.prev=4,o=zn(this.components.datastore.query(t));case 6:return e.next=8,o.next();case 8:if(!(n=!(s=e.sent).done)){e.next=14;break}u=s.value,r.push(JSON.parse(kh(u.value)));case 11:n=!1,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),a=!0,i=e.t0;case 20:if(e.prev=20,e.prev=21,!n||null==o.return){e.next=25;break}return e.next=25,o.return();case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e,this,[[4,16,20,30],[21,,25,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"findKeyById",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.listKeys();case 3:return r=e.sent,e.abrupt("return",r.find((function(e){return e.id===t})));case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,iie();case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"findKeyByName",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(aie(t)){e.next=4;break}return e.next=3,iie();case 3:throw ca(new Error("Invalid key name '".concat(t,"'")),T9.ERR_INVALID_KEY_NAME);case 4:return r=uie(t),e.prev=5,e.next=8,this.components.datastore.get(r);case 8:return n=e.sent,e.abrupt("return",JSON.parse(kh(n)));case 12:return e.prev=12,e.t0=e.catch(5),e.next=16,iie();case 16:throw Zae.error(e.t0),ca(new Error("Key '".concat(t,"' does not exist.")),T9.ERR_KEY_NOT_FOUND);case 18:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"removeKey",value:function(){var e=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(aie(t)&&"self"!==t){e.next=4;break}return e.next=3,iie();case 3:throw ca(new Error("Invalid key name '".concat(t,"'")),T9.ERR_INVALID_KEY_NAME);case 4:return r=sie(t),e.next=7,this.findKeyByName(t);case 7:return n=e.sent,(a=this.components.datastore.batch()).delete(r),a.delete(uie(t)),e.next=13,a.commit();case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renameKey",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(aie(t)&&"self"!==t){e.next=4;break}return e.next=3,iie();case 3:throw ca(new Error("Invalid old key name '".concat(t,"'")),T9.ERR_OLD_KEY_NAME_INVALID);case 4:if(aie(r)&&"self"!==r){e.next=8;break}return e.next=7,iie();case 7:throw ca(new Error("Invalid new key name '".concat(r,"'")),T9.ERR_NEW_KEY_NAME_INVALID);case 8:return n=sie(t),a=sie(r),i=uie(t),o=uie(r),e.next=14,this.components.datastore.has(a);case 14:if(!e.sent){e.next=19;break}return e.next=18,iie();case 18:throw ca(new Error("Key '".concat(r,"' already exists")),T9.ERR_KEY_ALREADY_EXISTS);case 19:return e.prev=19,e.next=22,this.components.datastore.get(n);case 22:return s=e.sent,e.next=25,this.components.datastore.get(i);case 25:return u=e.sent,(c=JSON.parse(kh(u))).name=r,(l=this.components.datastore.batch()).put(a,s),l.put(o,Bf(JSON.stringify(c))),l.delete(n),l.delete(i),e.next=35,l.commit();case 35:return e.abrupt("return",c);case 38:return e.prev=38,e.t0=e.catch(19),e.next=42,iie();case 42:throw e.t0;case 43:case"end":return e.stop()}}),e,this,[[19,38]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"exportKey",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(aie(t)){e.next=4;break}return e.next=3,iie();case 3:throw ca(new Error("Invalid key name '".concat(t,"'")),T9.ERR_INVALID_KEY_NAME);case 4:if(null!=r){e.next=8;break}return e.next=7,iie();case 7:throw ca(new Error("Password is required"),T9.ERR_PASSWORD_REQUIRED);case 8:return n=sie(t),e.prev=9,e.next=12,this.components.datastore.get(n);case 12:if(a=e.sent,i=kh(a),null!=(o=$ae.get(this))){e.next=17;break}throw ca(new Error("dek missing"),T9.ERR_INVALID_PARAMETERS);case 17:return s=o.dek,e.next=20,Sx(i,s);case 20:return u=e.sent,e.next=23,u.export(r);case 23:return e.abrupt("return",e.sent);case 26:return e.prev=26,e.t0=e.catch(9),e.next=30,iie();case 30:throw e.t0;case 31:case"end":return e.stop()}}),e,this,[[9,26]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"exportPeerId",value:function(){var e=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="temporary-password",e.next=3,this.exportKey(t,r);case 3:return n=e.sent,e.next=6,Sx(n,r);case 6:return a=e.sent,e.next=9,Lte(a.public.bytes,a.bytes);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"importKey",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(aie(t)&&"self"!==t){e.next=4;break}return e.next=3,iie();case 3:throw ca(new Error("Invalid key name '".concat(t,"'")),T9.ERR_INVALID_KEY_NAME);case 4:if(null!=r){e.next=8;break}return e.next=7,iie();case 7:throw ca(new Error("PEM encoded key is required"),T9.ERR_PEM_REQUIRED);case 8:return a=sie(t),e.next=11,this.components.datastore.has(a);case 11:if(!e.sent){e.next=16;break}return e.next=15,iie();case 15:throw ca(new Error("Key '".concat(t,"' already exists")),T9.ERR_KEY_ALREADY_EXISTS);case 16:return e.prev=16,e.next=19,Sx(r,n);case 19:i=e.sent,e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(16),e.next=26,iie();case 26:throw ca(new Error("Cannot read the key, most likely the password is wrong"),T9.ERR_CANNOT_READ_KEY);case 27:return e.prev=27,e.next=30,i.id();case 30:if(o=e.sent,null!=(s=$ae.get(this))){e.next=34;break}throw ca(new Error("dek missing"),T9.ERR_INVALID_PARAMETERS);case 34:return u=s.dek,e.next=37,i.export(u);case 37:r=e.sent,e.next=45;break;case 40:return e.prev=40,e.t1=e.catch(27),e.next=44,iie();case 44:throw e.t1;case 45:return c={name:t,id:o},(l=this.components.datastore.batch()).put(a,Bf(r)),l.put(uie(t),Bf(JSON.stringify(c))),e.next=51,l.commit();case 51:return e.abrupt("return",c);case 52:case"end":return e.stop()}}),e,this,[[16,22],[27,40]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"importPeer",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,aie(t)){e.next=3;break}throw ca(new Error("Invalid key name '".concat(t,"'")),T9.ERR_INVALID_KEY_NAME);case 3:if(null!=r){e.next=5;break}throw ca(new Error("PeerId is required"),T9.ERR_MISSING_PRIVATE_KEY);case 5:if(null!=r.privateKey){e.next=7;break}throw ca(new Error("PeerId.privKey is required"),T9.ERR_MISSING_PRIVATE_KEY);case 7:return e.next=9,xx(r.privateKey);case 9:return n=e.sent,a=sie(t),e.next=13,this.components.datastore.has(a);case 13:if(!e.sent){e.next=18;break}return e.next=17,iie();case 17:throw ca(new Error("Key '".concat(t,"' already exists")),T9.ERR_KEY_ALREADY_EXISTS);case 18:if(null!=(i=$ae.get(this))){e.next=21;break}throw ca(new Error("dek missing"),T9.ERR_INVALID_PARAMETERS);case 21:return o=i.dek,e.next=24,n.export(o);case 24:return s=e.sent,u={name:t,id:r.toString()},(c=this.components.datastore.batch()).put(a,Bf(s)),c.put(uie(t),Bf(JSON.stringify(u))),e.next=31,c.commit();case 31:return e.abrupt("return",u);case 34:return e.prev=34,e.t0=e.catch(0),e.next=38,iie();case 38:throw e.t0;case 39:case"end":return e.stop()}}),e,this,[[0,34]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getPrivateKey",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(aie(t)){e.next=4;break}return e.next=3,iie();case 3:throw ca(new Error("Invalid key name '".concat(t,"'")),T9.ERR_INVALID_KEY_NAME);case 4:return e.prev=4,r=sie(t),e.next=8,this.components.datastore.get(r);case 8:return n=e.sent,e.abrupt("return",kh(n));case 12:return e.prev=12,e.t0=e.catch(4),e.next=16,iie();case 16:throw Zae.error(e.t0),ca(new Error("Key '".concat(t,"' does not exist.")),T9.ERR_KEY_NOT_FOUND);case 18:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"rotateKeychainPass",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t){e.next=4;break}return e.next=3,iie();case 3:throw ca(new Error("Invalid old pass type '".concat(typeof t,"'")),T9.ERR_INVALID_OLD_PASS_TYPE);case 4:if("string"===typeof r){e.next=8;break}return e.next=7,iie();case 7:throw ca(new Error("Invalid new pass type '".concat(typeof r,"'")),T9.ERR_INVALID_NEW_PASS_TYPE);case 8:if(!(r.length<20)){e.next=12;break}return e.next=11,iie();case 11:throw ca(new Error("Invalid pass length ".concat(r.length)),T9.ERR_INVALID_PASS_LENGTH);case 12:if(Zae("recreating keychain"),null!=(s=$ae.get(this))){e.next=16;break}throw ca(new Error("dek missing"),T9.ERR_INVALID_PARAMETERS);case 16:return u=s.dek,this.init.pass=r,c=null!=r&&null!=(null===(n=this.init.dek)||void 0===n?void 0:n.salt)?oX(r,this.init.dek.salt,null===(a=this.init.dek)||void 0===a?void 0:a.iterationCount,null===(i=this.init.dek)||void 0===i?void 0:i.keyLength,null===(o=this.init.dek)||void 0===o?void 0:o.hash):"",$ae.set(this,{dek:c}),e.next=22,this.listKeys();case 22:l=e.sent,f=Ni(l),e.prev=24,f.s();case 26:if((h=f.n()).done){e.next=47;break}return p=h.value,e.next=30,this.components.datastore.get(sie(p.name));case 30:return d=e.sent,v=kh(d),e.next=34,Sx(v,u);case 34:return y=e.sent,b=c.toString(),e.next=38,y.export(b);case 38:return g=e.sent,m=this.components.datastore.batch(),w={name:p.name,id:p.id},m.put(sie(p.name),Bf(g)),m.put(uie(p.name),Bf(JSON.stringify(w))),e.next=45,m.commit();case 45:e.next=26;break;case 47:e.next=52;break;case 49:e.prev=49,e.t0=e.catch(24),f.e(e.t0);case 52:return e.prev=52,f.f(),e.finish(52);case 55:Zae("keychain reconstructed");case 56:case"end":return e.stop()}}),e,this,[[24,49,52,55]])})));return function(t,r){return e.apply(this,arguments)}}()}],[{key:"generateOptions",value:function(){var e=Object.assign({},nie),t=3*Math.ceil(tie/3);return e.dek.salt=kh(iw(t),"base64"),e}},{key:"options",get:function(){return nie}}]),e}();function fie(e){return hie.apply(this,arguments)}function hie(){return hie=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return r=e.sent,e.abrupt("return",{status:"fulfilled",value:r,isFulfilled:!0,isRejected:!1});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:"rejected",reason:e.t0,isFulfilled:!1,isRejected:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),hie.apply(this,arguments)}function pie(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function die(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function vie(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,die(e,t,"set"),r),r}function yie(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,die(e,t,"get"))}var bie=Dn((function e(t){Cn(this,e),Mn(this,"value",void 0),Mn(this,"next",void 0),this.value=t})),gie=new WeakMap,mie=new WeakMap,wie=new WeakMap;cie=Symbol.iterator;var kie=function(){function e(){Cn(this,e),pie(this,gie,{writable:!0,value:void 0}),pie(this,mie,{writable:!0,value:void 0}),pie(this,wie,{writable:!0,value:void 0}),this.clear()}return Dn(e,[{key:"enqueue",value:function(e){var t,r=new bie(e);yie(this,gie)?(yie(this,mie).next=r,vie(this,mie,r)):(vie(this,gie,r),vie(this,mie,r)),vie(this,wie,(t=yie(this,wie),t++,t))}},{key:"dequeue",value:function(){var e,t=yie(this,gie);if(t)return vie(this,gie,yie(this,gie).next),vie(this,wie,(e=yie(this,wie),e--,e)),t.value}},{key:"clear",value:function(){vie(this,gie,void 0),vie(this,mie,void 0),vie(this,wie,0)}},{key:"size",get:function(){return yie(this,wie)}},{key:cie,value:En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=yie(this,gie);case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))}]),e}();function xie(e){if(!Number.isInteger(e)&&e!==Number.POSITIVE_INFINITY||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");var t=new kie,r=0,n=function(){var e=An(En().mark((function e(n,a,i){var o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r++,o=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.apply(void 0,su(i)));case 1:case"end":return e.stop()}}),e)})))(),a(o),e.prev=3,e.next=6,o;case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:r--,t.size>0&&t.dequeue()();case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),a=function(a,i,o){t.enqueue(n.bind(void 0,a,i,o)),An(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve();case 2:r<e&&t.size>0&&t.dequeue()();case 3:case"end":return n.stop()}}),n)})))()},i=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new Promise((function(t){a(e,t,r)}))};return Object.defineProperties(i,{activeCount:{get:function(){return r}},pendingCount:{get:function(){return t.size}},clearQueue:{value:function(){t.clear()}}}),i}function _ie(e){return Eie.apply(this,arguments)}function Eie(){return Eie=An(En().mark((function e(t){var r,n,a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=r.concurrency,a=void 0===n?Number.POSITIVE_INFINITY:n,i=xie(a),e.abrupt("return",Promise.all(t.map((function(e){return e&&"function"===typeof e.then?fie(e):fie("function"===typeof e?i((function(){return e()})):Promise.resolve(e))}))));case 4:case"end":return e.stop()}}),e)}))),Eie.apply(this,arguments)}var Sie=function(e){Pn(r,e);var t=Un(r);function r(e){var n;Cn(this,r),n=t.call(this);var a=e.name,i=e.metrics;return n.metric=i.registerMetric(a),n.updateComponentMetric(),n}return Dn(r,[{key:"set",value:function(e,t){return Qs(Nn(r.prototype),"set",this).call(this,e,t),this.updateComponentMetric(),this}},{key:"delete",value:function(e){var t=Qs(Nn(r.prototype),"delete",this).call(this,e);return this.updateComponentMetric(),t}},{key:"clear",value:function(){Qs(Nn(r.prototype),"clear",this).call(this),this.updateComponentMetric()}},{key:"updateComponentMetric",value:function(){this.metric.update(this.size)}}]),r}(nu(Map));function Aie(e){var t=e.name,r=e.metrics;return null!=r?new Sie({name:t,metrics:r}):new Map}var Cie=ua("libp2p:transports"),Iie=function(e){Pn(r,e);var t=Un(r);function r(e){var n,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Cn(this,r),(a=t.call(this)).components=e,a.started=!1,a.transports=new Map,a.listeners=Aie({name:"libp2p_transport_manager_listeners",metrics:a.components.metrics}),a.faultTolerance=null!==(n=i.faultTolerance)&&void 0!==n?n:S9.FATAL_ALL,a}return Dn(r,[{key:"add",value:function(e){var t=e[Symbol.toStringTag];if(null==t)throw ca(new Error("Transport must have a valid tag"),T9.ERR_INVALID_KEY);if(this.transports.has(t))throw ca(new Error("There is already a transport with this tag"),T9.ERR_DUPLICATE_TRANSPORT);Cie("adding transport %s",t),this.transports.set(t,e),this.listeners.has(t)||this.listeners.set(t,[])}},{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.components.addressManager.getListenAddrs(),e.next=3,this.listen(t);case 3:this.started=!0;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=Ni(this.listeners),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=16;break}a=Ia(n.value,2),i=a[0],o=a[1],Cie("closing listeners for %s",i);case 7:if(!(o.length>0)){e.next=14;break}if(null!=(s=o.pop())){e.next=11;break}return e.abrupt("continue",7);case 11:t.push(s.close()),e.next=7;break;case 14:e.next=4;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:return e.next=26,Promise.all(t);case 26:Cie("all listeners closed"),u=Ni(this.listeners.keys());try{for(u.s();!(c=u.n()).done;)l=c.value,this.listeners.set(l,[])}catch(eL){u.e(eL)}finally{u.f()}this.started=!1;case 30:case"end":return e.stop()}}),e,this,[[2,18,21,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"dial",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=this.transportForMultiaddr(t))){e.next=3;break}throw ca(new Error("No transport available for address ".concat(String(t))),T9.ERR_TRANSPORT_UNAVAILABLE);case 3:return e.prev=3,e.next=6,n.dial(t,jn(jn({},r),{},{upgrader:this.components.upgrader}));case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(3),null==e.t0.code&&(e.t0.code=T9.ERR_TRANSPORT_DIAL_FAILED),e.t0;case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAddrs",value:function(){var e,t=[],r=Ni(this.listeners.values());try{for(r.s();!(e=r.n()).done;){var n,a=Ni(e.value);try{for(a.s();!(n=a.n()).done;){var i=n.value;t=[].concat(su(t),su(i.getAddrs()))}}catch(eL){a.e(eL)}finally{a.f()}}}catch(eL){r.e(eL)}finally{r.f()}return t}},{key:"getTransports",value:function(){return Array.of.apply(Array,su(this.transports.values()))}},{key:"transportForMultiaddr",value:function(e){var t,r=Ni(this.transports.values());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.filter([e]).length>0)return n}}catch(eL){r.e(eL)}finally{r.f()}}},{key:"listen",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p,d,v=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&0!==t.length){e.next=3;break}return Cie("no addresses were provided for listening, this node is dial only"),e.abrupt("return");case 3:r=[],n=Ni(this.transports.entries()),e.prev=5,n.s();case 7:if((a=n.n()).done){e.next=38;break}i=Ia(a.value,2),o=i[0],s=i[1],u=s.filter(t),c=[],l=Ni(u),e.prev=12,h=En().mark((function e(){var t,r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f.value,Cie("creating listener for %s on %s",o,t),r=s.createListener({upgrader:v.components.upgrader}),null==(n=v.listeners.get(o))&&(n=[],v.listeners.set(o,n)),n.push(r),r.addEventListener("listening",(function(){v.dispatchEvent(new fZ("listener:listening",{detail:r}))})),r.addEventListener("close",(function(){v.dispatchEvent(new fZ("listener:close",{detail:r}))})),c.push(r.listen(t));case 9:case"end":return e.stop()}}),e)})),l.s();case 15:if((f=l.n()).done){e.next=19;break}return e.delegateYield(h(),"t0",17);case 17:e.next=15;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(12),l.e(e.t1);case 24:return e.prev=24,l.f(),e.finish(24);case 27:if(0!==c.length){e.next=30;break}return r.push(o),e.abrupt("continue",36);case 30:return e.next=32,_ie(c);case 32:if(p=e.sent,null!=p.find((function(e){return e.isFulfilled}))||this.faultTolerance===S9.NO_FATAL){e.next=36;break}throw ca(new Error("Transport (".concat(o,") could not listen on any available address")),T9.ERR_NO_VALID_ADDRESSES);case 36:e.next=7;break;case 38:e.next=43;break;case 40:e.prev=40,e.t2=e.catch(5),n.e(e.t2);case 43:return e.prev=43,n.f(),e.finish(43);case 46:if(r.length!==this.transports.size){e.next=51;break}if(d="no valid addresses were provided for transports [".concat(r.join(", "),"]"),this.faultTolerance!==S9.FATAL_ALL){e.next=50;break}throw ca(new Error(d),T9.ERR_NO_VALID_ADDRESSES);case 50:Cie("libp2p in dial mode only: ".concat(d));case 51:case"end":return e.stop()}}),e,this,[[5,40,43,46],[12,21,24,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=An(En().mark((function e(t){var r,n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Cie("removing %s",t),n=Ni(null!==(r=this.listeners.get(t))&&void 0!==r?r:[]),e.prev=2,n.s();case 4:if((a=n.n()).done){e.next=10;break}return i=a.value,e.next=8,i.close();case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:this.transports.delete(t),this.listeners.delete(t);case 20:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"removeAll",value:function(){var e=An(En().mark((function e(){var t,r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=Ni(this.transports.keys());try{for(r.s();!(n=r.n()).done;)a=n.value,t.push(this.remove(a))}catch(eL){r.e(eL)}finally{r.f()}return e.next=5,Promise.all(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(cZ),Tie="/multistream/1.0.0",Die=ua("libp2p:mss"),Rie=Bf("\n");function Pie(e){var t=new ST(e,Rie);return V$.single(t)}function Nie(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Pie(t);!0===r.writeBytes?e.push(n.subarray()):e.push(n)}function Lie(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=new ST,i=Ni(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;a.append(Pie(o))}}catch(eL){i.e(eL)}finally{i.f()}!0===n.writeBytes?e.push(a.subarray()):e.push(a)}function Oie(e,t){return Bie.apply(this,arguments)}function Bie(){return Bie=An(En().mark((function e(t,r){var n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=1,Mn(n={},Symbol.asyncIterator,(function(){return i})),Mn(n,"next",function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.next(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),o=i=n,null!=(null===r||void 0===r?void 0:r.signal)&&(o=U$(i,r.signal)),s=function(e){a=e},e.next=7,TS(o,K$({onLength:s,maxDataLength:1024}),function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LU(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:if(null!=(u=e.sent)&&0!==u.length){e.next=10;break}throw ca(new Error("no buffer returned"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");case 10:if(u.get(u.byteLength-1)===Rie[0]){e.next=13;break}throw Die.error("Invalid mss message - missing newline - %s",u.subarray()),ca(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");case 13:return e.abrupt("return",u.sublist(0,-1));case 14:case"end":return e.stop()}}),e)}))),Bie.apply(this,arguments)}function Uie(e,t){return Mie.apply(this,arguments)}function Mie(){return Mie=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oie(t,r);case 2:return n=e.sent,e.abrupt("return",kh(n.subarray()));case 4:case"end":return e.stop()}}),e)}))),Mie.apply(this,arguments)}var zie=ua("libp2p:mss:select");function Fie(e,t){return Vie.apply(this,arguments)}function Vie(){return Vie=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h,p,d,v,y,b=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>2&&void 0!==b[2]?b[2]:{},r=Array.isArray(r)?su(r):[r],a=Zne(t),i=a.reader,o=a.writer,s=a.rest,u=a.stream,null!=(c=r.shift())){e.next=6;break}throw new Error("At least one protocol must be specified");case 6:return zie('select: write ["%s", "%s"]',Tie,c),l=Bf(Tie),f=Bf(c),Lie(o,[l,f],n),e.next=12,Uie(i,n);case 12:if(h=e.sent,zie('select: read "%s"',h),h!==Tie){e.next=19;break}return e.next=17,Uie(i,n);case 17:h=e.sent,zie('select: read "%s"',h);case 19:if(h!==c){e.next=22;break}return s(),e.abrupt("return",{stream:u,protocol:c});case 22:p=Ni(r),e.prev=23,p.s();case 25:if((d=p.n()).done){e.next=38;break}return v=d.value,zie('select: write "%s"',v),Nie(o,Bf(v),n),e.next=31,Uie(i,n);case 31:if(y=e.sent,zie('select: read "%s" for "%s"',y,v),y!==v){e.next=36;break}return s(),e.abrupt("return",{stream:u,protocol:v});case 36:e.next=25;break;case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(23),p.e(e.t0);case 43:return e.prev=43,p.f(),e.finish(43);case 46:throw s(),ca(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL");case 48:case"end":return e.stop()}}),e,null,[[23,40,43,46]])}))),Vie.apply(this,arguments)}var jie=ua("libp2p:mss:handle");function qie(e,t,r){return Kie.apply(this,arguments)}function Kie(){return Kie=An(En().mark((function e(t,r,n){var a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Array.isArray(r)?r:[r],a=Zne(t),i=a.writer,o=a.reader,s=a.rest,u=a.stream;case 2:return e.next=5,Uie(o,n);case 5:if(c=e.sent,jie('read "%s"',c),c!==Tie){e.next=11;break}return jie('respond with "%s" for "%s"',Tie,c),Nie(i,Bf(Tie),n),e.abrupt("continue",2);case 11:if(!r.includes(c)){e.next=16;break}return Nie(i,Bf(c),n),jie('respond with "%s" for "%s"',c,c),s(),e.abrupt("return",{stream:u,protocol:c});case 16:if("ls"!==c){e.next=20;break}return Nie(i,ru(ST,su(r.map((function(e){return Pie(Bf(e))})))),n),jie('respond with "%s" for %s',r,c),e.abrupt("continue",2);case 20:Nie(i,Bf("na"),n),jie('respond with "na" for "%s"',c),e.next=2;break;case 24:case"end":return e.stop()}}),e)}))),Kie.apply(this,arguments)}var Hie=Symbol.for("@libp2p/connection");var Gie=ua("libp2p:connection"),Wie=function(e){function t(e){Cn(this,t);var r=e.remoteAddr,n=e.remotePeer,a=e.newStream,i=e.close,o=e.getStreams,s=e.stat;this.id="".concat(parseInt(String(1e9*Math.random())).toString(36)).concat(Date.now()),this.remoteAddr=r,this.remotePeer=n,this.stat=jn(jn({},s),{},{status:jte}),this._newStream=a,this._close=i,this._getStreams=o,this.tags=[],this._closing=!1}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"Connection"}},{key:Hie,get:function(){return!0}},{key:"streams",get:function(){return this._getStreams()}},{key:"newStream",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stat.status!==qte){e.next=2;break}throw ca(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");case 2:if(this.stat.status!==Kte){e.next=4;break}throw ca(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");case 4:return Array.isArray(t)||(t=[t]),e.next=7,this._newStream(t,r);case 7:return(n=e.sent).stat.direction="outbound",e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addStream",value:function(e){e.stat.direction="inbound"}},{key:"removeStream",value:function(e){}},{key:"close",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stat.status!==Kte&&!this._closing){e.next=2;break}return e.abrupt("return");case 2:this.stat.status=qte;try{this.streams.forEach((function(e){return e.close()}))}catch(eL){Gie.error(eL)}return this._closing=!0,e.next=7,this._close();case 7:this._closing=!1,this.stat.timeline.close=Date.now(),this.stat.status=Kte;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}();var Yie=ua("libp2p:registrar"),Qie=function(){function e(t){Cn(this,e),this.topologies=new Map,this.handlers=new Map,this.components=t,this._onDisconnect=this._onDisconnect.bind(this),this._onProtocolChange=this._onProtocolChange.bind(this),this._onConnect=this._onConnect.bind(this),this.components.connectionManager.addEventListener("peer:disconnect",this._onDisconnect),this.components.connectionManager.addEventListener("peer:connect",this._onConnect),this.components.peerStore.addEventListener("change:protocols",this._onProtocolChange)}return Dn(e,[{key:"getProtocols",value:function(){return Array.from(new Set([].concat(su(this.topologies.keys()),su(this.handlers.keys())))).sort()}},{key:"getHandler",value:function(e){var t=this.handlers.get(e);if(null==t)throw ca(new Error("No handler registered for protocol ".concat(e)),T9.ERR_NO_HANDLER_FOR_PROTOCOL);return t}},{key:"getTopologies",value:function(e){var t=this.topologies.get(e);return null==t?[]:su(t.values())}},{key:"handle",value:function(){var e=An(En().mark((function e(t,r,n){var a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.handlers.has(t)){e.next=2;break}throw ca(new Error("Handler already registered for protocol ".concat(t)),T9.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);case 2:return a=Gn.bind({ignoreUndefined:!0})({maxInboundStreams:32,maxOutboundStreams:64},n),this.handlers.set(t,{handler:r,options:a}),e.next=6,this.components.peerStore.protoBook.add(this.components.peerId,[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"unhandle",value:function(){var e=An(En().mark((function e(t){var r,n=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Array.isArray(t)?t:[t]).forEach((function(e){n.handlers.delete(e)})),e.next=4,this.components.peerStore.protoBook.remove(this.components.peerId,r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(i=r)&&Boolean(i[rZ])){e.next=3;break}throw Yie.error("topology must be an instance of interfaces/topology"),ca(new Error("topology must be an instance of interfaces/topology"),T9.ERR_INVALID_PARAMETERS);case 3:return n="".concat((1e9*Math.random()).toString(36)).concat(Date.now()),null==(a=this.topologies.get(t))&&(a=new Map,this.topologies.set(t,a)),a.set(n,r),e.next=9,r.setRegistrar(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}var i}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"unregister",value:function(e){var t,r=Ni(this.topologies.entries());try{for(r.s();!(t=r.n()).done;){var n=Ia(t.value,2),a=n[0],i=n[1];i.has(e)&&(i.delete(e),0===i.size&&this.topologies.delete(a))}}catch(eL){r.e(eL)}finally{r.f()}}},{key:"_onDisconnect",value:function(e){var t=this,r=e.detail;this.components.peerStore.protoBook.get(r.remotePeer).then((function(e){var n,a=Ni(e);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=t.topologies.get(i);if(null!=o){var s,u=Ni(o.values());try{for(u.s();!(s=u.n()).done;){s.value.onDisconnect(r.remotePeer)}}catch(eL){u.e(eL)}finally{u.f()}}}}catch(eL){a.e(eL)}finally{a.f()}})).catch((function(e){Yie.error(e)}))}},{key:"_onConnect",value:function(e){var t=this,r=e.detail;this.components.peerStore.protoBook.get(r.remotePeer).then((function(e){var n,a=Ni(e);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=t.topologies.get(i);if(null!=o){var s,u=Ni(o.values());try{for(u.s();!(s=u.n()).done;){s.value.onConnect(r.remotePeer,r)}}catch(eL){u.e(eL)}finally{u.f()}}}}catch(eL){a.e(eL)}finally{a.f()}})).catch((function(e){Yie.error(e)}))}},{key:"_onProtocolChange",value:function(e){var t,r=e.detail,n=r.peerId,a=r.protocols,i=r.oldProtocols,o=i.filter((function(e){return!a.includes(e)})),s=a.filter((function(e){return!i.includes(e)})),u=Ni(o);try{for(u.s();!(t=u.n()).done;){var c=t.value,l=this.topologies.get(c);if(null!=l){var f,h=Ni(l.values());try{for(h.s();!(f=h.n()).done;){f.value.onDisconnect(n)}}catch(eL){h.e(eL)}finally{h.f()}}}}catch(eL){u.e(eL)}finally{u.f()}var p,d=Ni(s);try{for(d.s();!(p=d.n()).done;){var v=p.value,y=this.topologies.get(v);if(null!=y){var b,g=Ni(y.values());try{for(g.s();!(b=g.n()).done;){var m=b.value,w=this.components.connectionManager.getConnections(n)[0];null!=w&&m.onConnect(n,w)}}catch(eL){g.e(eL)}finally{g.f()}}}}catch(eL){d.e(eL)}finally{d.f()}}}]),e}(),Jie=ua("libp2p:upgrader");function Zie(e,t){try{return t.getHandler(e).options.maxInboundStreams}catch(eL){if(eL.code!==T9.ERR_NO_HANDLER_FOR_PROTOCOL)throw eL}return 32}function Xie(e,t){try{return t.getHandler(e).options.maxOutboundStreams}catch(eL){if(eL.code!==T9.ERR_NO_HANDLER_FOR_PROTOCOL)throw eL}return 64}function $ie(e,t,r){var n=0;return r.streams.forEach((function(r){r.stat.direction===t&&r.stat.protocol===e&&n++})),n}var eoe,toe=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a;return Cn(this,r),(a=t.call(this)).components=e,a.connectionEncryption=new Map,n.connectionEncryption.forEach((function(e){a.connectionEncryption.set(e.protocol,e)})),a.muxers=new Map,n.muxers.forEach((function(e){a.muxers.set(e.protocol,e)})),a.inboundUpgradeTimeout=n.inboundUpgradeTimeout,a}return Dn(r,[{key:"upgradeInbound",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h,p,d,v,y;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.connectionManager.acceptIncomingConnection(t);case 2:if(e.sent){e.next=5;break}throw ca(new Error("connection denied"),T9.ERR_CONNECTION_DENIED);case 5:u=new Uf.TimeoutController(this.inboundUpgradeTimeout);try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,u.signal)}catch(b){}return e.prev=7,l=z$(t,u.signal),t.source=l.source,t.sink=l.sink,e.next=13,this.components.connectionGater.denyInboundConnection(t);case 13:if(!e.sent){e.next=15;break}throw ca(new Error("The multiaddr connection is blocked by gater.acceptConnection"),T9.ERR_CONNECTION_INTERCEPTED);case 15:if(null===(c=this.components.metrics)||void 0===c||c.trackMultiaddrConnection(t),Jie("starting the inbound connection upgrade"),f=t,!0===(null===r||void 0===r?void 0:r.skipProtection)){e.next=25;break}if(null==(h=this.components.connectionProtector)){e.next=25;break}return Jie("protecting the inbound connection"),e.next=24,h.protect(t);case 24:f=e.sent;case 25:if(e.prev=25,n=f,!0===(null===r||void 0===r?void 0:r.skipEncryption)){e.next=40;break}return e.next=30,this._encryptInbound(f);case 30:return p=e.sent,n=p.conn,a=p.remotePeer,s=p.protocol,e.next=36,this.components.connectionGater.denyInboundEncryptedConnection(a,jn(jn({},f),n));case 36:if(!e.sent){e.next=38;break}throw ca(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),T9.ERR_CONNECTION_INTERCEPTED);case 38:e.next=46;break;case 40:if(null!=(d=t.remoteAddr.getPeerId())){e.next=43;break}throw ca(new Error("inbound connection that skipped encryption must have a peer id"),T9.ERR_INVALID_MULTIADDR);case 43:v=Pte(d),s="native",a=v;case 46:if(i=n,null==(null===r||void 0===r?void 0:r.muxerFactory)){e.next=51;break}o=r.muxerFactory,e.next=57;break;case 51:if(!(this.muxers.size>0)){e.next=57;break}return e.next=54,this._multiplexInbound(jn(jn({},f),n),this.muxers);case 54:y=e.sent,o=y.muxerFactory,i=y.stream;case 57:e.next=63;break;case 59:throw e.prev=59,e.t0=e.catch(25),Jie.error("Failed to upgrade inbound connection",e.t0),e.t0;case 63:return e.next=65,this.components.connectionGater.denyInboundUpgradedConnection(a,jn(jn({},f),n));case 65:if(!e.sent){e.next=67;break}throw ca(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),T9.ERR_CONNECTION_INTERCEPTED);case 67:return Jie("Successfully upgraded inbound connection"),e.abrupt("return",this._createConnection({cryptoProtocol:s,direction:"inbound",maConn:t,upgradedConn:i,muxerFactory:o,remotePeer:a}));case 69:return e.prev=69,this.components.connectionManager.afterUpgradeInbound(),u.clear(),e.finish(69);case 73:case"end":return e.stop()}}),e,this,[[7,,69,73],[25,59]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"upgradeOutbound",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h,p,d;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(a=t.remoteAddr.getPeerId())){e.next=7;break}return i=Pte(a),e.next=5,this.components.connectionGater.denyOutboundConnection(i,t);case 5:if(!e.sent){e.next=7;break}throw ca(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),T9.ERR_CONNECTION_INTERCEPTED);case 7:if(null===(n=this.components.metrics)||void 0===n||n.trackMultiaddrConnection(t),Jie("Starting the outbound connection upgrade"),f=t,!0===(null===r||void 0===r?void 0:r.skipProtection)){e.next=16;break}if(null==(h=this.components.connectionProtector)){e.next=16;break}return e.next=15,h.protect(t);case 15:f=e.sent;case 16:if(e.prev=16,o=f,!0===(null===r||void 0===r?void 0:r.skipEncryption)){e.next=31;break}return e.next=21,this._encryptOutbound(f,i);case 21:return p=e.sent,o=p.conn,s=p.remotePeer,c=p.protocol,e.next=27,this.components.connectionGater.denyOutboundEncryptedConnection(s,jn(jn({},f),o));case 27:if(!e.sent){e.next=29;break}throw ca(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),T9.ERR_CONNECTION_INTERCEPTED);case 29:e.next=35;break;case 31:if(null!=i){e.next=33;break}throw ca(new Error("Encryption was skipped but no peer id was passed"),T9.ERR_INVALID_PEER);case 33:c="native",s=i;case 35:if(u=o,null==(null===r||void 0===r?void 0:r.muxerFactory)){e.next=40;break}l=r.muxerFactory,e.next=46;break;case 40:if(!(this.muxers.size>0)){e.next=46;break}return e.next=43,this._multiplexOutbound(jn(jn({},f),o),this.muxers);case 43:d=e.sent,l=d.muxerFactory,u=d.stream;case 46:e.next=54;break;case 48:return e.prev=48,e.t0=e.catch(16),Jie.error("Failed to upgrade outbound connection",e.t0),e.next=53,t.close(e.t0);case 53:throw e.t0;case 54:return e.next=56,this.components.connectionGater.denyOutboundUpgradedConnection(s,jn(jn({},f),o));case 56:if(!e.sent){e.next=58;break}throw ca(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),T9.ERR_CONNECTION_INTERCEPTED);case 58:return Jie("Successfully upgraded outbound connection"),e.abrupt("return",this._createConnection({cryptoProtocol:c,direction:"outbound",maConn:t,upgradedConn:u,muxerFactory:l,remotePeer:s}));case 60:case"end":return e.stop()}}),e,this,[[16,48]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_createConnection",value:function(e){var t,r,n,a,i,o=this,s=e.cryptoProtocol,u=e.direction,c=e.maConn,l=e.upgradedConn,f=e.remotePeer,h=e.muxerFactory;null!=h&&(n=h.createStreamMuxer({direction:u,onIncomingStream:function(e){null!=i&&Promise.resolve().then(An(En().mark((function t(){var r,n,a,s,c,l;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.components.registrar.getProtocols(),t.next=3,qie(e,n);case 3:if(a=t.sent,s=a.stream,c=a.protocol,Jie("%s: incoming stream opened on %s",u,c),null!=i){t.next=9;break}return t.abrupt("return");case 9:if(l=Zie(c,o.components.registrar),$ie(c,"inbound",i)!==l){t.next=14;break}return e.abort(ca(new Error('Too many inbound protocol streams for protocol "'.concat(c,'" - limit ').concat(l)),T9.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS)),t.abrupt("return");case 14:e.source=s.source,e.sink=s.sink,e.stat.protocol=c,o.components.peerStore.protoBook.add(f,[c]).catch((function(e){return Jie.error(e)})),i.addStream(e),null===(r=o.components.metrics)||void 0===r||r.trackProtocolStream(e,i),o._onStream({connection:i,stream:e,protocol:c});case 21:case"end":return t.stop()}}),t)})))).catch((function(t){Jie.error(t),null==e.stat.timeline.close&&e.close()}))},onStreamEnd:function(e){var t;null===(t=i)||void 0===t||t.removeStream(e.id)}}),a=function(){var e=An(En().mark((function e(t){var r,a,s,c,l,h,p,d,v,y=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>1&&void 0!==y[1]?y[1]:{},null!=n){e.next=3;break}throw ca(new Error("Stream is not multiplexed"),T9.ERR_MUXER_UNAVAILABLE);case 3:return Jie("%s: starting new stream on %s",u,t),e.next=6,n.newStream();case 6:if(a=e.sent,e.prev=7,null==r.signal){Jie("No abort signal was passed while trying to negotiate protocols %s falling back to default timeout",t),s=new Uf.TimeoutController(3e4),r.signal=s.signal;try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,s.signal)}catch(b){}}return e.next=11,Fie(a,t,r);case 11:if(l=e.sent,h=l.stream,p=l.protocol,d=Xie(p,o.components.registrar),$ie(p,"outbound",i)!==d){e.next=20;break}throw v=ca(new Error('Too many outbound protocol streams for protocol "'.concat(p,'" - limit ').concat(d)),T9.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS),a.abort(v),v;case 20:return o.components.peerStore.protoBook.add(f,[p]).catch((function(e){return Jie.error(e)})),a.source=h.source,a.sink=h.sink,a.stat.protocol=p,null===(c=o.components.metrics)||void 0===c||c.trackProtocolStream(a,i),e.abrupt("return",a);case 28:if(e.prev=28,e.t0=e.catch(7),Jie.error("could not create new stream",e.t0),null==a.stat.timeline.close&&a.close(),null==e.t0.code){e.next=34;break}throw e.t0;case 34:throw ca(e.t0,T9.ERR_UNSUPPORTED_PROTOCOL);case 35:return e.prev=35,null!=s&&s.clear(),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[7,28,35,38]])})));return function(t){return e.apply(this,arguments)}}(),Promise.all([n.sink(l.source),l.sink(n.source)]).catch((function(e){Jie.error(e)})));var p=c.timeline;c.timeline=new Proxy(p,{set:function(){return null!=i&&"close"===(arguments.length<=1?void 0:arguments[1])&&null!=(arguments.length<=2?void 0:arguments[2])&&null==p.close&&An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"OPEN"!==i.stat.status){e.next=4;break}return e.next=4,i.close();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Jie.error(e.t0);case 9:return e.prev=9,o.dispatchEvent(new fZ("connectionEnd",{detail:i})),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})))().catch((function(e){Jie.error(e)})),Reflect.set.apply(Reflect,arguments)}}),c.timeline.upgraded=Date.now();var d,v=function(){throw ca(new Error("connection is not multiplexed"),T9.ERR_CONNECTION_NOT_MULTIPLEXED)};return d={remoteAddr:c.remoteAddr,remotePeer:f,stat:{status:"OPEN",direction:u,timeline:c.timeline,multiplexer:null===(t=n)||void 0===t?void 0:t.protocol,encryption:s},newStream:null!==(r=a)&&void 0!==r?r:v,getStreams:function(){return null!=n?n.streams:v()},close:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.close();case 2:null!=n&&n.close();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},i=new Wie(d),this.dispatchEvent(new fZ("connection",{detail:i})),i}},{key:"_onStream",value:function(e){var t=e.connection,r=e.stream,n=e.protocol;(0,this.components.registrar.getHandler(n).handler)({connection:t,stream:r})}},{key:"_encryptInbound",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Array.from(this.connectionEncryption.keys()),Jie("handling inbound crypto protocol selection",r),e.prev=2,e.next=5,qie(t,r,{writeBytes:!0});case 5:if(n=e.sent,a=n.stream,i=n.protocol,null!=(o=this.connectionEncryption.get(i))){e.next=11;break}throw new Error("no crypto module found for ".concat(i));case 11:return Jie("encrypting inbound connection..."),e.t0=jn,e.t1=jn,e.t2={},e.next=17,o.secureInbound(this.components.peerId,a);case 17:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5={},e.t6={protocol:i},e.abrupt("return",(0,e.t0)(e.t4,e.t5,e.t6));case 24:throw e.prev=24,e.t7=e.catch(2),ca(e.t7,T9.ERR_ENCRYPTION_FAILED);case 27:case"end":return e.stop()}}),e,this,[[2,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_encryptOutbound",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(this.connectionEncryption.keys()),Jie("selecting outbound crypto protocol",n),e.prev=2,e.next=5,Fie(t,n,{writeBytes:!0});case 5:if(a=e.sent,i=a.stream,o=a.protocol,null!=(s=this.connectionEncryption.get(o))){e.next=11;break}throw new Error("no crypto module found for ".concat(o));case 11:return Jie("encrypting outbound connection to %p",r),e.t0=jn,e.t1=jn,e.t2={},e.next=17,s.secureOutbound(this.components.peerId,i,r);case 17:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5={},e.t6={protocol:o},e.abrupt("return",(0,e.t0)(e.t4,e.t5,e.t6));case 24:throw e.prev=24,e.t7=e.catch(2),ca(e.t7,T9.ERR_ENCRYPTION_FAILED);case 27:case"end":return e.stop()}}),e,this,[[2,24]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_multiplexOutbound",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(r.keys()),Jie("outbound selecting muxer %s",n),e.prev=2,e.next=5,Fie(t,n,{writeBytes:!0});case 5:return a=e.sent,i=a.stream,o=a.protocol,Jie("%s selected as muxer protocol",o),s=r.get(o),e.abrupt("return",{stream:i,muxerFactory:s});case 13:throw e.prev=13,e.t0=e.catch(2),Jie.error("error multiplexing outbound stream",e.t0),ca(e.t0,T9.ERR_MUXER_UNAVAILABLE);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_multiplexInbound",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(r.keys()),Jie("inbound handling muxers %s",n),e.prev=2,e.next=5,qie(t,n,{writeBytes:!0});case 5:return a=e.sent,i=a.stream,o=a.protocol,s=r.get(o),e.abrupt("return",{stream:i,muxerFactory:s});case 12:throw e.prev=12,e.t0=e.catch(2),Jie.error("error multiplexing inbound stream",e.t0),ca(e.t0,T9.ERR_MUXER_UNAVAILABLE);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(cZ);!function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null!=e.protocolVersion&&(t.uint32(42),t.string(e.protocolVersion)),null!=e.agentVersion&&(t.uint32(50),t.string(e.agentVersion)),null!=e.publicKey&&(t.uint32(10),t.bytes(e.publicKey)),null!=e.listenAddrs){var n,a=Ni(e.listenAddrs);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.uint32(18),t.bytes(i)}}catch(eL){a.e(eL)}finally{a.f()}}if(null!=e.observedAddr&&(t.uint32(34),t.bytes(e.observedAddr)),null!=e.protocols){var o,s=Ni(e.protocols);try{for(s.s();!(o=s.n()).done;){var u=o.value;t.uint32(26),t.string(u)}}catch(eL){s.e(eL)}finally{s.f()}}null!=e.signedPeerRecord&&(t.uint32(66),t.bytes(e.signedPeerRecord)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={listenAddrs:[],protocols:[]},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 5:r.protocolVersion=e.string();break;case 6:r.agentVersion=e.string();break;case 1:r.publicKey=e.bytes();break;case 2:r.listenAddrs.push(e.bytes());break;case 4:r.observedAddr=e.bytes();break;case 3:r.protocols.push(e.string());break;case 8:r.signedPeerRecord=e.bytes();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(eoe||(eoe={}));var roe,noe,aoe="0.0.0",ioe="js-libp2p/".concat(aoe),ooe=ua("libp2p:identify"),soe=8192,uoe=function(){function e(t,r){var n=this;Cn(this,e),this.components=t,this.started=!1,this.init=r,this.identifyProtocolStr="/".concat(r.protocolPrefix,"/").concat("id","/").concat("1.0.0"),this.identifyPushProtocolStr="/".concat(r.protocolPrefix,"/").concat("id/push","/").concat("1.0.0"),this.host=jn({protocolVersion:"".concat(r.protocolPrefix,"/").concat("0.1.0")},r.host),this.components.connectionManager.addEventListener("peer:connect",(function(e){var t=e.detail;n.identify(t).catch(ooe.error)})),this.components.peerStore.addEventListener("change:multiaddrs",(function(e){var t=e.detail.peerId;n.components.peerId.equals(t)&&n.pushToPeerStore().catch((function(e){return ooe.error(e)}))})),this.components.peerStore.addEventListener("change:protocols",(function(e){var t=e.detail.peerId;n.components.peerId.equals(t)&&n.pushToPeerStore().catch((function(e){return ooe.error(e)}))}))}return Dn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=An(En().mark((function e(){var t=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.started){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.components.peerStore.metadataBook.setValue(this.components.peerId,"AgentVersion",Bf(this.host.agentVersion));case 4:return e.next=6,this.components.peerStore.metadataBook.setValue(this.components.peerId,"ProtocolVersion",Bf(this.host.protocolVersion));case 6:return e.next=8,this.components.registrar.handle(this.identifyProtocolStr,(function(e){t._handleIdentify(e).catch((function(e){ooe.error(e)}))}),{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams});case 8:return e.next=10,this.components.registrar.handle(this.identifyPushProtocolStr,(function(e){t._handlePush(e).catch((function(e){ooe.error(e)}))}),{maxInboundStreams:this.init.maxPushIncomingStreams,maxOutboundStreams:this.init.maxPushOutgoingStreams});case 10:this.started=!0;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.registrar.unhandle(this.identifyProtocolStr);case 2:return e.next=4,this.components.registrar.unhandle(this.identifyPushProtocolStr);case 4:this.started=!1;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.peerStore.addressBook.getRawEnvelope(this.components.peerId);case 2:return r=e.sent,n=this.components.addressManager.getAddresses().map((function(e){return e.bytes})),e.next=6,this.components.peerStore.protoBook.get(this.components.peerId);case 6:return a=e.sent,i=t.map(function(){var e=An(En().mark((function e(t){var i,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=new Uf.TimeoutController(o.init.timeout);try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,s.signal)}catch(c){}return e.prev=2,e.next=5,t.newStream([o.identifyPushProtocolStr],{signal:s.signal});case 5:return i=e.sent,u=z$(i,s.signal),e.next=9,u.sink(TS([eoe.encode({listenAddrs:n,signedPeerRecord:r,protocols:a})],V$()));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),ooe.error("could not push identify update to peer",e.t0);case 14:return e.prev=14,null!=i&&i.close(),s.clear(),e.finish(14);case 18:case"end":return e.stop()}}),e,null,[[2,11,14,18]])})));return function(t){return e.apply(this,arguments)}}()),e.next=10,Promise.all(i);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pushToPeerStore",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStarted()){e.next=2;break}return e.abrupt("return");case 2:t=[],r=Ni(this.components.connectionManager.getConnections()),e.prev=4,r.s();case 6:if((n=r.n()).done){e.next=17;break}return a=n.value,i=a.remotePeer,e.next=11,this.components.peerStore.get(i);case 11:if(e.sent.protocols.includes(this.identifyPushProtocolStr)){e.next=14;break}return e.abrupt("continue",15);case 14:t.push(a);case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:return e.next=27,this.push(t);case 27:case"end":return e.stop()}}),e,this,[[4,19,22,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"_identify",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:{},null==(a=r.signal)){n=new Uf.TimeoutController(this.init.timeout),a=n.signal;try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,n.signal)}catch(l){}}return e.prev=3,e.next=6,t.newStream([this.identifyProtocolStr],{signal:a});case 6:return i=e.sent,s=z$(i,a),e.next=10,TS([],s,K$({maxDataLength:null!==(o=this.init.maxIdentifyMessageSize)&&void 0!==o?o:soe}),function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LU(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:if(null!=(u=e.sent)){e.next=13;break}throw ca(new Error("No data could be retrieved"),T9.ERR_CONNECTION_ENDED);case 13:return e.prev=13,e.abrupt("return",eoe.decode(u));case 17:throw e.prev=17,e.t0=e.catch(13),ca(e.t0,T9.ERR_INVALID_MESSAGE);case 20:return e.prev=20,null!=n&&n.clear(),null!=i&&i.close(),e.finish(20);case 24:case"end":return e.stop()}}),e,this,[[3,,20,24],[13,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"identify",value:function(){var t=An(En().mark((function t(r){var n,a,i,o,s,u,c,l,f,h,p,d,v=arguments;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=v.length>1&&void 0!==v[1]?v[1]:{},t.next=3,this._identify(r,n);case 3:if(a=t.sent,i=a.publicKey,o=a.listenAddrs,s=a.protocols,u=a.observedAddr,c=a.signedPeerRecord,l=a.agentVersion,f=a.protocolVersion,null!=i){t.next=7;break}throw ca(new Error("public key was missing from identify message"),T9.ERR_MISSING_PUBLIC_KEY);case 7:return t.next=9,Lte(i);case 9:if(h=t.sent,r.remotePeer.equals(h)){t.next=12;break}throw ca(new Error("identified peer does not match the expected peer"),T9.ERR_INVALID_PEER);case 12:if(!this.components.peerId.equals(h)){t.next=14;break}throw ca(new Error("identified peer is our own peer id?"),T9.ERR_INVALID_PEER);case 14:if(p=e.getCleanMultiaddr(u),null==c){t.next=43;break}return ooe("received signed peer record from %p",h),t.prev=17,t.next=20,lQ.openAndCertify(c,dQ.DOMAIN);case 20:if((d=t.sent).peerId.equals(h)){t.next=23;break}throw ca(new Error("identified peer does not match the expected peer"),T9.ERR_INVALID_PEER);case 23:return t.next=25,this.components.peerStore.addressBook.consumePeerRecord(d);case 25:if(!t.sent){t.next=36;break}return t.next=28,this.components.peerStore.protoBook.set(h,s);case 28:if(null==l){t.next=31;break}return t.next=31,this.components.peerStore.metadataBook.setValue(h,"AgentVersion",Bf(l));case 31:if(null==f){t.next=34;break}return t.next=34,this.components.peerStore.metadataBook.setValue(h,"ProtocolVersion",Bf(f));case 34:return ooe("identify completed for peer %p and protocols %o",h,s),t.abrupt("return");case 36:t.next=41;break;case 38:t.prev=38,t.t0=t.catch(17),ooe("received invalid envelope, discard it and fallback to listenAddrs is available",t.t0);case 41:t.next=44;break;case 43:ooe("no signed peer record received from %p",h);case 44:return ooe("falling back to legacy addresses from %p",h),t.prev=45,t.next=48,this.components.peerStore.addressBook.set(h,o.map((function(e){return Gd(e)})));case 48:t.next=53;break;case 50:t.prev=50,t.t1=t.catch(45),ooe.error("received invalid addrs",t.t1);case 53:return t.next=55,this.components.peerStore.protoBook.set(h,s);case 55:if(null==l){t.next=58;break}return t.next=58,this.components.peerStore.metadataBook.setValue(h,"AgentVersion",Bf(l));case 58:if(null==f){t.next=61;break}return t.next=61,this.components.peerStore.metadataBook.setValue(h,"ProtocolVersion",Bf(f));case 61:ooe("identify completed for peer %p and protocols %o",h,s),ooe("received observed address of %s",null===p||void 0===p?void 0:p.toString());case 63:case"end":return t.stop()}}),t,this,[[17,38],[45,50]])})));return function(e){return t.apply(this,arguments)}}()},{key:"_handleIdentify",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p,d;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.connection,n=t.stream,a=new Uf.TimeoutController(this.init.timeout);try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,a.signal)}catch(v){}return e.prev=3,o=null!==(i=this.components.peerId.publicKey)&&void 0!==i?i:new Uint8Array(0),e.next=7,this.components.peerStore.get(this.components.peerId);case 7:if(s=e.sent,u=this.components.addressManager.getAddresses().map((function(e){return e.decapsulateCode(Th("p2p").code)})),c=s.peerRecordEnvelope,!(u.length>0&&null==c)){e.next=18;break}return l=new dQ({peerId:this.components.peerId,multiaddrs:u}),e.next=14,lQ.seal(l,this.components.peerId);case 14:return f=e.sent,e.next=17,this.components.peerStore.addressBook.consumePeerRecord(f);case 17:c=f.marshal().subarray();case 18:return h=eoe.encode({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:o,listenAddrs:u.map((function(e){return e.bytes})),signedPeerRecord:c,observedAddr:r.remoteAddr.bytes,protocols:s.protocols}),p=z$(n,a.signal),d=TS([h],V$()),e.next=23,p.sink(d);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(3),ooe.error("could not respond to identify request",e.t0);case 28:return e.prev=28,n.close(),a.clear(),e.finish(28);case 32:case"end":return e.stop()}}),e,this,[[3,25,28,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_handlePush",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.connection,n=t.stream,a=new Uf.TimeoutController(this.init.timeout);try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,a.signal)}catch(f){}return e.prev=3,s=z$(n,a.signal),e.next=7,TS([],s,K$({maxDataLength:null!==(o=this.init.maxIdentifyMessageSize)&&void 0!==o?o:soe}),function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LU(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:null!=(u=e.sent)&&(i=eoe.decode(u)),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",ooe.error("received invalid message",e.t0));case 14:return e.prev=14,n.close(),a.clear(),e.finish(14);case 18:if(null!=i){e.next=20;break}return e.abrupt("return",ooe.error("received invalid message"));case 20:if(c=r.remotePeer,!this.components.peerId.equals(c)){e.next=24;break}return ooe("received push from ourselves?"),e.abrupt("return");case 24:if(ooe("received push from %p",c),null==i.signedPeerRecord){e.next=48;break}return ooe("received signedPeerRecord in push"),e.prev=27,e.next=30,lQ.openAndCertify(i.signedPeerRecord,dQ.DOMAIN);case 30:return l=e.sent,e.next=33,this.components.peerStore.addressBook.consumePeerRecord(l);case 33:if(!e.sent){e.next=40;break}return ooe("consumed signedPeerRecord sent in push"),e.next=37,this.components.peerStore.protoBook.set(c,i.protocols);case 37:return e.abrupt("return");case 40:ooe("failed to consume signedPeerRecord sent in push");case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(27),ooe("received invalid envelope, discard it and fallback to listenAddrs is available",e.t1);case 46:e.next=49;break;case 48:ooe("did not receive signedPeerRecord in push");case 49:return e.prev=49,e.next=52,this.components.peerStore.addressBook.set(c,i.listenAddrs.map((function(e){return Gd(e)})));case 52:e.next=57;break;case 54:e.prev=54,e.t2=e.catch(49),ooe.error("received invalid addrs",e.t2);case 57:return e.prev=57,e.next=60,this.components.peerStore.protoBook.set(c,i.protocols);case 60:e.next=65;break;case 62:e.prev=62,e.t3=e.catch(57),ooe.error("received invalid protocols",e.t3);case 65:ooe("handled push from %p",c);case 66:case"end":return e.stop()}}),e,this,[[3,11,14,18],[27,43],[49,54],[57,62]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getCleanMultiaddr",value:function(e){if(null!=e&&e.length>0)try{return Gd(e)}catch(t){}}}]),e}();!function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),!0!==r.writeDefaults&&""===e.identifier||(t.uint32(10),t.string(e.identifier)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={identifier:""},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();if(a>>>3===1)r.identifier=e.string();else e.skipType(7&a)}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(roe||(roe={})),function(e){var t,r,n;!function(e){e.OK="OK",e.NOT_FOUND="NOT_FOUND",e.ERROR="ERROR"}(e.StatusCode||(e.StatusCode={})),function(e){e[e.OK=0]="OK",e[e.NOT_FOUND=1]="NOT_FOUND",e[e.ERROR=2]="ERROR"}(r||(r={})),function(e){e.codec=function(){return ng(r)}}(t=e.StatusCode||(e.StatusCode={})),e.codec=function(){return null==n&&(n=ag((function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==a.lengthDelimited&&n.fork(),(!0===a.writeDefaults||null!=t.status&&0!==r[t.status])&&(n.uint32(8),e.StatusCode.codec().encode(t.status,n)),(!0===a.writeDefaults||null!=t.data&&t.data.byteLength>0)&&(n.uint32(18),n.bytes(t.data)),!1!==a.lengthDelimited&&n.ldelim()}),(function(r,n){for(var a={status:t.OK,data:new Uint8Array(0)},i=null==n?r.len:r.pos+n;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:a.status=e.StatusCode.codec().decode(r);break;case 2:a.data=r.bytes();break;default:r.skipType(7&o)}}return a}))),n},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(noe||(noe={}));var coe=ua("libp2p:fetch"),loe=function(){function e(t,r){var n;Cn(this,e),this.started=!1,this.components=t,this.protocol="/".concat(null!==(n=r.protocolPrefix)&&void 0!==n?n:"libp2p","/").concat("fetch","/").concat("0.0.1"),this.lookupFunctions=new Map,this.handleMessage=this.handleMessage.bind(this),this.init=r}return Dn(e,[{key:"start",value:function(){var e=An(En().mark((function e(){var t=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.registrar.handle(this.protocol,(function(e){t.handleMessage(e).catch((function(e){coe.error(e)})).finally((function(){e.stream.close()}))}),{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams});case 2:this.started=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.registrar.unhandle(this.protocol);case 2:this.started=!1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.started}},{key:"fetch",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:{},coe("dialing %s to %p",this.protocol,t),e.next=4,this.components.connectionManager.openConnection(t,n);case 4:if(a=e.sent,null==(o=n.signal)){coe("using default timeout of %d ms",this.init.timeout),i=new Uf.TimeoutController(this.init.timeout),o=i.signal;try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,i.signal)}catch(f){}}return e.prev=7,e.next=10,a.newStream(this.protocol,{signal:o});case 10:return s=e.sent,u=z$(s,o),coe("fetch %s",r),e.next=15,TS([roe.encode({identifier:r})],V$(),u,K$(),function(){var e=An(En().mark((function e(t){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LU(t);case 2:if(null!=(n=e.sent)){e.next=5;break}throw ca(new Error("No data received"),T9.ERR_INVALID_MESSAGE);case 5:a=noe.decode(n),e.t0=a.status,e.next=e.t0===noe.StatusCode.OK?9:e.t0===noe.StatusCode.NOT_FOUND?11:e.t0===noe.StatusCode.ERROR?13:16;break;case 9:return coe("received status for %s ok",r),e.abrupt("return",a.data);case 11:return coe("received status for %s not found",r),e.abrupt("return",null);case 13:throw coe("received status for %s error",r),i=kh(a.data),ca(new Error("Error in fetch protocol response: "+i),T9.ERR_INVALID_PARAMETERS);case 16:throw coe("received status for %s unknown",r),ca(new Error("Unknown response status"),T9.ERR_INVALID_MESSAGE);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:return c=e.sent,e.abrupt("return",null!==c&&void 0!==c?c:null);case 17:return e.prev=17,null!=i&&i.clear(),null!=s&&s.close(),e.finish(17);case 21:case"end":return e.stop()}}),e,this,[[7,,17,21]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"handleMessage",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stream,n=this,e.next=4,TS(r,K$(),function(){var e=Hn(En().mark((function e(t){var r,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mf(LU(t));case 2:if(null!=(r=e.sent)){e.next=5;break}throw ca(new Error("No data received"),T9.ERR_INVALID_MESSAGE);case 5:if(a=roe.decode(r),null==(o=n._getLookupFunction(a.identifier))){e.next=15;break}return coe("look up data with identifier %s",a.identifier),e.next=11,Mf(o(a.identifier));case 11:null!=(s=e.sent)?(coe("sending status for %s ok",a.identifier),i={status:noe.StatusCode.OK,data:s}):(coe("sending status for %s not found",a.identifier),i={status:noe.StatusCode.NOT_FOUND,data:new Uint8Array(0)}),e.next=18;break;case 15:coe("sending status for %s error",a.identifier),u=Bf("No lookup function registered for key: ".concat(a.identifier)),i={status:noe.StatusCode.ERROR,data:u};case 18:return e.next=20,noe.encode(i);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V$(),r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getLookupFunction",value:function(e){var t,r=Ni(this.lookupFunctions.keys());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e.startsWith(n))return this.lookupFunctions.get(n)}}catch(eL){r.e(eL)}finally{r.f()}}},{key:"registerLookupFunction",value:function(e,t){if(this.lookupFunctions.has(e))throw ca(new Error("Fetch protocol handler for key prefix '"+e+"' already registered"),T9.ERR_KEY_ALREADY_EXISTS);this.lookupFunctions.set(e,t)}},{key:"unregisterLookupFunction",value:function(e,t){if(null!=t&&this.lookupFunctions.get(e)!==t)return;this.lookupFunctions.delete(e)}}]),e}(),foe=ua("libp2p:ping"),hoe=function(){function e(t,r){Cn(this,e),this.components=t,this.started=!1,this.protocol="/".concat(r.protocolPrefix,"/").concat("ping","/").concat("1.0.0"),this.init=r}return Dn(e,[{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.registrar.handle(this.protocol,this.handleMessage,{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams});case 2:this.started=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.registrar.unhandle(this.protocol);case 2:this.started=!1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.started}},{key:"handleMessage",value:function(e){var t=e.stream;TS(t,t).catch((function(e){foe.error(e)}))}},{key:"ping",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},foe("dialing %s to %p",this.protocol,t),n=Date.now(),a=iw(32),e.next=6,this.components.connectionManager.openConnection(t,r);case 6:if(i=e.sent,null==(s=r.signal)){o=new Uf.TimeoutController(this.init.timeout),s=o.signal;try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,o.signal)}catch(p){}}return e.prev=9,e.next=12,i.newStream([this.protocol],{signal:s});case 12:return u=e.sent,c=z$(u,s),e.next=16,TS([a],c,function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LU(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 16:if(l=e.sent,f=Date.now(),null!=l&&Pd(a,l.subarray())){e.next=20;break}throw ca(new Error("Received wrong ping ack"),T9.ERR_WRONG_PING_ACK);case 20:return e.abrupt("return",f-n);case 21:return e.prev=21,null!=o&&o.clear(),null!=u&&u.close(),e.finish(21);case 25:case"end":return e.stop()}}),e,this,[[9,,21,25]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function poe(){return doe.apply(this,arguments)}function doe(){return(doe=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not supported in browsers");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var voe=__webpack_require__(272),yoe="object"===typeof window&&"object"===typeof document&&9===document.nodeType,boe=voe(),goe=yoe&&!boe,moe=boe&&!yoe,woe=boe&&yoe,koe="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!boe,xoe="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,_oe=("undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&globalThis.process.env.NODE_ENV,"undefined"!==typeof navigator&&"ReactNative"===navigator.product);function Eoe(e){var t,r=e.nodeAddress().address;return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t=r)||/^::1$/.test(t)}var Soe=ua("libp2p:nat"),Aoe=7200;function Coe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:65535;return Math.floor(Math.random()*(t-e+1)+e)}var Ioe=function(){function e(t,r){var n,a,i;if(Cn(this,e),this.components=t,this.started=!1,this.enabled=r.enabled,this.externalAddress=r.externalAddress,this.localAddress=r.localAddress,this.description=null!==(n=r.description)&&void 0!==n?n:"".concat("libp2p","@").concat(aoe," ").concat(this.components.peerId.toString()),this.ttl=null!==(a=r.ttl)&&void 0!==a?a:Aoe,this.keepAlive=null===(i=r.keepAlive)||void 0===i||i,this.gateway=r.gateway,this.ttl<Aoe)throw ca(new Error("NatManager ttl should be at least ".concat(Aoe," seconds")),T9.ERR_INVALID_PARAMETERS)}return Dn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){}},{key:"afterStart",value:function(){goe||!this.enabled||this.started||(this.started=!0,this._start().catch((function(e){Soe.error(e)})))}},{key:"_start",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o,s,u,c,l,f,h,p,d;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.components.transportManager.getAddrs(),r=Ni(t),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=36;break}if(i=n.value,o=i.toOptions(),s=o.family,u=o.host,c=o.port,l=o.transport,i.isThinWaistAddress()&&"tcp"===l){e.next=9;break}return e.abrupt("continue",34);case 9:if(!Eoe(i)){e.next=11;break}return e.abrupt("continue",34);case 11:if(4===s){e.next=13;break}return e.abrupt("continue",34);case 13:return e.next=15,this._getClient();case 15:if(f=e.sent,null===(a=this.externalAddress)||void 0===a){e.next=20;break}e.t0=a,e.next=23;break;case 20:return e.next=22,f.externalIp();case 22:e.t0=e.sent;case 23:if(h=e.t0,!0!==(p=Oae(h))){e.next=27;break}throw new Error("".concat(h," is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT"));case 27:if(null!=p){e.next=29;break}throw new Error("".concat(h," is not an IP address"));case 29:return d=Coe(),Soe("opening uPnP connection from ".concat(h,":").concat(d," to ").concat(u,":").concat(c)),e.next=33,f.map({publicPort:d,localPort:c,localAddress:this.localAddress,protocol:"TCP"===l.toUpperCase()?"TCP":"UDP"});case 33:this.components.addressManager.addObservedAddr(qd({family:4,address:h,port:d},l));case 34:e.next=4;break;case 36:e.next=41;break;case 38:e.prev=38,e.t1=e.catch(2),r.e(e.t1);case 41:return e.prev=41,r.f(),e.finish(41);case 44:case"end":return e.stop()}}),e,this,[[2,38,41,44]])})));return function(){return e.apply(this,arguments)}}()},{key:"_getClient",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.client){e.next=2;break}return e.abrupt("return",this.client);case 2:return e.next=4,poe({description:this.description,ttl:this.ttl,keepAlive:this.keepAlive,gateway:this.gateway});case 4:return this.client=e.sent,e.abrupt("return",this.client);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!goe&&null!=this.client){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.client.close();case 5:this.client=void 0,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Soe.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Toe=ua("libp2p:peer-record-updater"),Doe=function(){function e(t){Cn(this,e),this.components=t,this.started=!1,this.update=this.update.bind(this)}return Dn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!0,this.components.transportManager.addEventListener("listener:listening",this.update),this.components.transportManager.addEventListener("listener:close",this.update),this.components.addressManager.addEventListener("change:addresses",this.update);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1,this.components.transportManager.removeEventListener("listener:listening",this.update),this.components.transportManager.removeEventListener("listener:close",this.update),this.components.addressManager.removeEventListener("change:addresses",this.update);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=this;Promise.resolve().then(An(En().mark((function t(){var r,n;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new dQ({peerId:e.components.peerId,multiaddrs:e.components.addressManager.getAddresses().map((function(e){return e.decapsulateCode(Th("p2p").code)}))}),t.next=3,lQ.seal(r,e.components.peerId);case 3:return n=t.sent,t.next=6,e.components.peerStore.addressBook.consumePeerRecord(n);case 6:case"end":return t.stop()}}),t)})))).catch((function(e){Toe.error("Could not update self peer record: %o",e)}))}}]),e}(),Roe=function(){function e(t){Cn(this,e),this.dht=t}return Dn(e,[{key:"findPeer",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>1&&void 0!==c[1]?c[1]:{},n=!1,a=!1,e.prev=3,o=zn(this.dht.findPeer(t,r));case 5:return e.next=7,o.next();case 7:if(!(n=!(s=e.sent).done)){e.next=14;break}if("FINAL_PEER"!==(u=s.value).name){e.next=11;break}return e.abrupt("return",u.peer);case 11:n=!1,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),a=!0,i=e.t0;case 20:if(e.prev=20,e.prev=21,!n||null==o.return){e.next=25;break}return e.next=25,o.return();case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(20);case 30:throw ca(new Error(I9.NOT_FOUND),T9.ERR_NOT_FOUND);case 31:case"end":return e.stop()}}),e,this,[[3,16,20,30],[21,,25,29]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(t.dht.getClosestPeers(e,r));case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=14;break}if("FINAL_PEER"!==(c=u.value).name){n.next=11;break}return n.next=11,c.peer;case 11:a=!1,n.next=4;break;case 14:n.next=20;break;case 16:n.prev=16,n.t0=n.catch(2),i=!0,o=n.t0;case 20:if(n.prev=20,n.prev=21,!a||null==s.return){n.next=25;break}return n.next=25,Mf(s.return());case 25:if(n.prev=25,!i){n.next=28;break}throw o;case 28:return n.finish(25);case 29:return n.finish(20);case 30:case"end":return n.stop()}}),n,null,[[2,16,20,30],[21,,25,29]])})))()}}]),e}(),Poe="ERR_INVALID_PARAMETERS",Noe="ERR_NOT_FOUND";function Loe(e,t){return Ooe.apply(this,arguments)}function Ooe(){return Ooe=Hn(En().mark((function e(t,r){var n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=zn(t);case 4:return e.next=6,Mf(o.next());case 6:if(!(n=!(s=e.sent).done)){e.next=15;break}return u=s.value,e.next=10,Mf(r(u));case 10:return e.next=12,u;case 12:n=!1,e.next=4;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),a=!0,i=e.t0;case 21:if(e.prev=21,e.prev=22,!n||null==o.return){e.next=26;break}return e.next=26,Mf(o.return());case 26:if(e.prev=26,!a){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(21);case 31:case"end":return e.stop()}}),e,null,[[2,17,21,31],[22,,26,30]])}))),Ooe.apply(this,arguments)}var Boe=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Uoe;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Uoe=Math.pow(2,31);var Moe=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var zoe=Math.pow(2,7),Foe=Math.pow(2,14),Voe=Math.pow(2,21),joe=Math.pow(2,28),qoe=Math.pow(2,35),Koe=Math.pow(2,42),Hoe=Math.pow(2,49),Goe=Math.pow(2,56),Woe=Math.pow(2,63),Yoe={encode:Boe,decode:Moe,encodingLength:function(e){return e<zoe?1:e<Foe?2:e<Voe?3:e<joe?4:e<qoe?5:e<Koe?6:e<Hoe?7:e<Goe?8:e<Woe?9:10}},Qoe=Yoe,Joe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Qoe.decode(e,t);return[r,Qoe.decode.bytes]},Zoe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Qoe.encode(e,t,r),t},Xoe=function(e){return Qoe.encodingLength(e)},$oe=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),ese=function(e,t){var r=t.byteLength,n=Xoe(e),a=n+Xoe(r),i=new Uint8Array(a+r);return Zoe(e,i,0),Zoe(r,i,n),i.set(t,a),new rse(e,r,t,i)},tse=function(e){var t=$oe(e),r=Ia(Joe(t),2),n=r[0],a=r[1],i=Ia(Joe(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new rse(n,o,u,t)},rse=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var nse=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},ase=nse,ise=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),ose=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return use(this,e)}}]),e}(),sse=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return use(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),use=function(e,t){return new sse(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},cse=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new ise(t,r,n),this.decoder=new ose(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),lse=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new cse(t,r,n,a)},fse=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=ase(n,r),i=a.encode,o=a.decode;return lse({prefix:t,name:r,encode:i,decode:function(e){return $oe(o(e))}})},hse=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return lse({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},pse=fse({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),dse=fse({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),vse=hse({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yse=hse({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),bse=hse({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),gse=hse({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),mse=hse({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wse=hse({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),kse=hse({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),xse=hse({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),_se=hse({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ese=function(e,t){var r=e.bytes;return 0===e.version?Tse(r,Ase(e),t||pse.encoder):Dse(r,Ase(e),t||vse.encoder)},Sse=new WeakMap,Ase=function(e){var t=Sse.get(e);if(null==t){var r=new Map;return Sse.set(e,r),r}return t},Cse=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==Rse)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Pse)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=ese(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return Ese(this,e)}},{key:"toJSON",value:function(){return{"/":Ese(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||Nse(n,a,i.bytes))}if(!0===t[Lse]){var o=t.version,s=t.multihash,u=t.code,c=tse(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==Rse)throw new Error("Version 0 CID must use dag-pb (code: ".concat(Rse,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,Nse(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,Rse,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=$oe(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new rse(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(Joe(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=Rse;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(Ise(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return Ase(o).set(a,e),o}}]),r}(),Ise=function(e,t){switch(e[0]){case"Q":var r=t||pse;return[pse.prefix,r.decode("".concat(pse.prefix).concat(e))];case pse.prefix:var n=t||pse;return[pse.prefix,n.decode(e)];case vse.prefix:var a=t||vse;return[vse.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Tse=function(e,t,r){var n=r.prefix;if(n!==pse.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},Dse=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},Rse=112,Pse=18,Nse=function(e,t,r){var n=Xoe(e),a=n+Xoe(t),i=new Uint8Array(a+r.byteLength);return Zoe(e,i,0),Zoe(t,i,n),i.set(r,a),i},Lse=Symbol.for("@ipld/js-cid/CID"),Ose=lse({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),Bse=hse({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Use=hse({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Mse=fse({prefix:"9",name:"base10",alphabet:"0123456789"}),zse=hse({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Fse=hse({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Vse=fse({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jse=fse({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),qse=hse({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Kse=hse({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Hse=hse({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Gse=hse({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Wse=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Yse=Wse.reduce((function(e,t,r){return e[r]=t,e}),[]),Qse=Wse.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var Jse=lse({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=Yse[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=Qse[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),Zse=function(e){var t=e.name,r=e.code,n=e.encode;return new Xse(t,r,n)},Xse=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?ese(this.code,r):r.then((function(e){return ese(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),$se=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},eue=Zse({name:"sha2-256",code:18,encode:$se("SHA-256")}),tue=Zse({name:"sha2-512",code:19,encode:$se("SHA-512")}),rue=$oe,nue={code:0,name:"identity",encode:rue,digest:function(e){return ese(0,rue(e))}},aue="raw",iue=85,oue=function(e){return $oe(e)},sue=function(e){return $oe(e)},uue=new TextEncoder,cue=new TextDecoder,lue="json",fue=512,hue=function(e){return uue.encode(JSON.stringify(e))},pue=function(e){return JSON.parse(cue.decode(e))},due=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},ir),or),sr),ur),cr),ar),lr),nr),fr),hr),vue=(jn(jn({},pr),dr),Symbol.for("nodejs.util.inspect.custom")),yue=Object.values(due).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),due.identity.decoder),bue=function(e){function t(e){Cn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:fb,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=pse.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return Cse.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return Pd(this.multihash.bytes,e);if("string"===typeof e)return function(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:yue,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=tse(pse.decode("z".concat(e)));return e.startsWith("12D")?new mue({multihash:n}):e.startsWith("16U")?new wue({multihash:n}):new gue({multihash:n})}return xue(yue.decode(e))}(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Pd(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:vue,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),gue=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Dn(r)}(bue),mue=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Dn(r)}(bue),wue=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Dn(r)}(bue);function kue(e){if("RSA"===e.type)return new gue(e);if("Ed25519"===e.type)return new mue(e);if("secp256k1"===e.type)return new wue(e);throw new lb("Not a PeerId","ERR_INVALID_PARAMETERS")}function xue(e){try{var t=tse(e);if(t.code===nue.code){if(36===t.digest.length)return new mue({multihash:t});if(37===t.digest.length)return new wue({multihash:t})}if(t.code===eue.code)return new gue({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===eue.code)return new gue({multihash:e.multihash});if(t.code===nue.code){if(36===t.digest.length)return new mue({multihash:e.multihash});if(37===t.digest.length)return new wue({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(Cse.decode(e))}throw new Error("Supplied PeerID CID is invalid")}var _ue=ua("libp2p:peer-store:address-book"),Eue="change:multiaddrs";function Sue(){return Aue.apply(this,arguments)}function Aue(){return(Aue=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cue=function(){function e(t,r,n){Cn(this,e),this.dispatchEvent=t,this.store=r,this.addressFilter=null!==n&&void 0!==n?n:Sue}return Dn(e,[{key:"consumePeerRecord",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _ue.trace("consumePeerRecord await write lock"),e.next=3,this.store.lock.writeLock();case 3:r=e.sent,_ue.trace("consumePeerRecord got write lock"),e.prev=5,e.prev=6,o=dQ.createFromProtobuf(t.payload),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(6),_ue.error("invalid peer record received"),e.abrupt("return",!1);case 14:if(n=o.peerId,s=o.multiaddrs,n.equals(t.peerId)){e.next=19;break}return _ue("signing key does not match PeerId in the PeerRecord"),e.abrupt("return",!1);case 19:if(null!=s&&0!==s.length){e.next=21;break}return e.abrupt("return",!1);case 21:return e.next=23,this.store.has(n);case 23:if(!e.sent){e.next=35;break}return e.next=26,this.store.load(n);case 26:if(null==(a=e.sent).peerRecordEnvelope){e.next=35;break}return e.next=30,lQ.createFromProtobuf(a.peerRecordEnvelope);case 30:if(u=e.sent,!((c=dQ.createFromProtobuf(u.payload)).seqNumber>=o.seqNumber)){e.next=35;break}return _ue("sequence number was lower or equal to existing sequence number - stored: %d received: %d",c.seqNumber,o.seqNumber),e.abrupt("return",!1);case 35:return e.next=37,Iue(n,s,this.addressFilter,!0);case 37:return l=e.sent,e.next=40,this.store.patchOrCreate(n,{addresses:l,peerRecordEnvelope:t.marshal().subarray()});case 40:i=e.sent,_ue("stored provided peer record for %p",o.peerId);case 42:return e.prev=42,_ue.trace("consumePeerRecord release write lock"),r(),e.finish(42);case 46:return this.dispatchEvent(new fZ(Eue,{detail:{peerId:n,multiaddrs:i.addresses.map((function(e){return e.multiaddr})),oldMultiaddrs:null==a?[]:a.addresses.map((function(e){return e.multiaddr}))}})),e.abrupt("return",!0);case 48:case"end":return e.stop()}}),e,this,[[5,,42,46],[6,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getRawEnvelope",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _ue.trace("getRawEnvelope await read lock"),e.next=3,this.store.lock.readLock();case 3:return r=e.sent,_ue.trace("getRawEnvelope got read lock"),e.prev=5,e.next=8,this.store.load(t);case 8:return n=e.sent,e.abrupt("return",n.peerRecordEnvelope);case 12:if(e.prev=12,e.t0=e.catch(5),e.t0.code===Noe){e.next=16;break}throw e.t0;case 16:return e.prev=16,_ue.trace("getRawEnvelope release read lock"),r(),e.finish(16);case 20:case"end":return e.stop()}}),e,this,[[5,12,16,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getPeerRecord",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRawEnvelope(t);case 2:if(null!=(r=e.sent)){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.next=7,lQ.createFromProtobuf(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kue(t),_ue.trace("get wait for read lock"),e.next=4,this.store.lock.readLock();case 4:return r=e.sent,_ue.trace("get got read lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return n=e.sent,e.abrupt("return",n.addresses);case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===Noe){e.next=17;break}throw e.t0;case 17:return e.prev=17,_ue.trace("get release read lock"),r(),e.finish(17);case 21:return e.abrupt("return",[]);case 22:case"end":return e.stop()}}),e,this,[[6,13,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=kue(t),Array.isArray(r)){e.next=4;break}throw _ue.error("multiaddrs must be an array of Multiaddrs"),ca(new Error("multiaddrs must be an array of Multiaddrs"),Poe);case 4:return _ue.trace("set await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,_ue.trace("set got write lock"),a=!1,e.prev=10,e.next=13,Iue(t,r,this.addressFilter);case 13:if(0!==(s=e.sent).length){e.next=16;break}return e.abrupt("return");case 16:return e.prev=16,e.next=19,this.store.load(t);case 19:if(i=e.sent,a=!0,new Set([].concat(su(s.map((function(e){return e.multiaddr.toString()}))),su(i.addresses.map((function(e){return e.multiaddr.toString()}))))).size!==i.addresses.length||s.length!==i.addresses.length){e.next=23;break}return e.abrupt("return");case 23:e.next=29;break;case 25:if(e.prev=25,e.t0=e.catch(16),e.t0.code===Noe){e.next=29;break}throw e.t0;case 29:return e.next=31,this.store.patchOrCreate(t,{addresses:s});case 31:o=e.sent,_ue("set multiaddrs for %p",t);case 33:return e.prev=33,_ue.trace("set multiaddrs for %p",t),_ue("set release write lock"),n(),e.finish(33);case 38:this.dispatchEvent(new fZ(Eue,{detail:{peerId:t,multiaddrs:o.addresses.map((function(e){return e.multiaddr})),oldMultiaddrs:null==i?[]:i.addresses.map((function(e){return e.multiaddr}))}})),a||this.dispatchEvent(new fZ("peer",{detail:{id:t,multiaddrs:o.addresses.map((function(e){return e.multiaddr})),protocols:o.protocols}}));case 40:case"end":return e.stop()}}),e,this,[[10,,33,38],[16,25]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=kue(t),Array.isArray(r)){e.next=4;break}throw _ue.error("multiaddrs must be an array of Multiaddrs"),ca(new Error("multiaddrs must be an array of Multiaddrs"),Poe);case 4:return _ue.trace("add await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,_ue.trace("add got write lock"),e.prev=9,e.next=12,Iue(t,r,this.addressFilter);case 12:if(0!==(s=e.sent).length){e.next=15;break}return e.abrupt("return");case 15:return e.prev=15,e.next=18,this.store.load(t);case 18:if(i=e.sent,a=!0,new Set([].concat(su(s.map((function(e){return e.multiaddr.toString()}))),su(i.addresses.map((function(e){return e.multiaddr.toString()}))))).size!==i.addresses.length){e.next=22;break}return e.abrupt("return");case 22:e.next=28;break;case 24:if(e.prev=24,e.t0=e.catch(15),e.t0.code===Noe){e.next=28;break}throw e.t0;case 28:return e.next=30,this.store.mergeOrCreate(t,{addresses:s});case 30:o=e.sent,_ue("added multiaddrs for %p",t);case 32:return e.prev=32,_ue.trace("set release write lock"),n(),e.finish(32);case 36:this.dispatchEvent(new fZ(Eue,{detail:{peerId:t,multiaddrs:o.addresses.map((function(e){return e.multiaddr})),oldMultiaddrs:null==i?[]:i.addresses.map((function(e){return e.multiaddr}))}})),!0===a&&this.dispatchEvent(new fZ("peer",{detail:{id:t,multiaddrs:o.addresses.map((function(e){return e.multiaddr})),protocols:o.protocols}}));case 38:case"end":return e.stop()}}),e,this,[[9,,32,36],[15,24]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kue(t),_ue.trace("delete await write lock"),e.next=4,this.store.lock.writeLock();case 4:return r=e.sent,_ue.trace("delete got write lock"),e.prev=6,e.prev=7,e.next=10,this.store.load(t);case 10:n=e.sent,e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(7),e.t0.code===Noe){e.next=17;break}throw e.t0;case 17:return e.next=19,this.store.patchOrCreate(t,{addresses:[]});case 19:return e.prev=19,_ue.trace("delete release write lock"),r(),e.finish(19);case 23:null!=n&&this.dispatchEvent(new fZ(Eue,{detail:{peerId:t,multiaddrs:[],oldMultiaddrs:null==n?[]:n.addresses.map((function(e){return e.multiaddr}))}}));case 24:case"end":return e.stop()}}),e,this,[[6,,19,23],[7,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Iue(e,t,r){return Tue.apply(this,arguments)}function Tue(){return Tue=An(En().mark((function e(t,r,n){var a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>3&&void 0!==i[3]&&i[3],e.next=3,TS(r,(function(e){return Loe(e,(function(e){if(!Kd(e))throw _ue.error("multiaddr must be an instance of Multiaddr"),ca(new Error("multiaddr must be an instance of Multiaddr"),Poe)}))}),(function(e){return iS(e,function(){var e=An(En().mark((function e(r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),(function(e){return kS(e,(function(e){return{multiaddr:e,isCertified:a}}))}),function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eS(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Tue.apply(this,arguments)}var Due,Rue,Pue,Nue=ua("libp2p:peer-store:key-book"),Lue="change:pubkey",Oue=function(){function e(t,r){Cn(this,e),this.dispatchEvent=t,this.store=r}return Dn(e,[{key:"set",value:function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=kue(t),r instanceof Uint8Array){e.next=4;break}throw Nue.error("publicKey must be an instance of Uint8Array to store data"),ca(new Error("publicKey must be an instance of PublicKey"),Poe);case 4:return Nue.trace("set await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,Nue.trace("set got write lock"),a=!1,e.prev=10,e.prev=11,e.next=14,this.store.load(t);case 14:if(null==(i=e.sent).pubKey||!Pd(i.pubKey,r)){e.next=17;break}return e.abrupt("return");case 17:e.next=23;break;case 19:if(e.prev=19,e.t0=e.catch(11),e.t0.code===Noe){e.next=23;break}throw e.t0;case 23:return e.next=25,this.store.patchOrCreate(t,{pubKey:r});case 25:a=!0;case 26:return e.prev=26,Nue.trace("set release write lock"),n(),e.finish(26);case 30:a&&this.dispatchEvent(new fZ(Lue,{detail:{peerId:t,publicKey:r,oldPublicKey:null==i?void 0:i.pubKey}}));case 31:case"end":return e.stop()}}),e,this,[[10,,26,30],[11,19]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kue(t),Nue.trace("get await write lock"),e.next=4,this.store.lock.readLock();case 4:return r=e.sent,Nue.trace("get got write lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return n=e.sent,e.abrupt("return",n.pubKey);case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===Noe){e.next=17;break}throw e.t0;case 17:return e.prev=17,Nue("get release write lock"),r(),e.finish(17);case 21:case"end":return e.stop()}}),e,this,[[6,13,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kue(t),Nue.trace("delete await write lock"),e.next=4,this.store.lock.writeLock();case 4:return r=e.sent,Nue.trace("delete got write lock"),e.prev=6,e.prev=7,e.next=10,this.store.load(t);case 10:n=e.sent,e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(7),e.t0.code===Noe){e.next=17;break}throw e.t0;case 17:return e.next=19,this.store.patchOrCreate(t,{pubKey:void 0});case 19:e.next=25;break;case 21:if(e.prev=21,e.t1=e.catch(6),e.t1.code===Noe){e.next=25;break}throw e.t1;case 25:return e.prev=25,Nue.trace("delete release write lock"),r(),e.finish(25);case 29:this.dispatchEvent(new fZ(Lue,{detail:{peerId:t,publicKey:void 0,oldPublicKey:null==n?void 0:n.pubKey}}));case 30:case"end":return e.stop()}}),e,this,[[6,21,25,29],[7,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Bue=ua("libp2p:peer-store:metadata-book"),Uue="change:metadata",Mue=function(){function e(t,r){Cn(this,e),this.dispatchEvent=t,this.store=r}return Dn(e,[{key:"get",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kue(t),Bue.trace("get await read lock"),e.next=4,this.store.lock.readLock();case 4:return r=e.sent,Bue.trace("get got read lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return n=e.sent,e.abrupt("return",n.metadata);case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===Noe){e.next=17;break}throw e.t0;case 17:return e.prev=17,Bue.trace("get release read lock"),r(),e.finish(17);case 21:return e.abrupt("return",new Map);case 22:case"end":return e.stop()}}),e,this,[[6,13,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getValue",value:function(){var e=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kue(t),Bue.trace("getValue await read lock"),e.next=4,this.store.lock.readLock();case 4:return n=e.sent,Bue.trace("getValue got read lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return a=e.sent,e.abrupt("return",a.metadata.get(r));case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===Noe){e.next=17;break}throw e.t0;case 17:return e.prev=17,Bue.trace("getValue release write lock"),n(),e.finish(17);case 21:case"end":return e.stop()}}),e,this,[[6,13,17,21]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=kue(t),r instanceof Map){e.next=4;break}throw Bue.error("valid metadata must be provided to store data"),ca(new Error("valid metadata must be provided"),Poe);case 4:return Bue.trace("set await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,Bue.trace("set got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:a=e.sent,e.next=20;break;case 16:if(e.prev=16,e.t0=e.catch(10),e.t0.code===Noe){e.next=20;break}throw e.t0;case 20:return e.next=22,this.store.mergeOrCreate(t,{metadata:r});case 22:return e.prev=22,Bue.trace("set release write lock"),n(),e.finish(22);case 26:this.dispatchEvent(new fZ(Uue,{detail:{peerId:t,metadata:r,oldMetadata:null==a?new Map:a.metadata}}));case 27:case"end":return e.stop()}}),e,this,[[9,,22,26],[10,16]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setValue",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=kue(t),"string"===typeof r&&n instanceof Uint8Array){e.next=4;break}throw Bue.error("valid key and value must be provided to store data"),ca(new Error("valid key and value must be provided"),Poe);case 4:return Bue.trace("setValue await write lock"),e.next=7,this.store.lock.writeLock();case 7:return a=e.sent,Bue.trace("setValue got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:if(i=e.sent,null==(s=i.metadata.get(r))||!Pd(n,s)){e.next=17;break}return e.abrupt("return");case 17:e.next=23;break;case 19:if(e.prev=19,e.t0=e.catch(10),e.t0.code===Noe){e.next=23;break}throw e.t0;case 23:return e.next=25,this.store.mergeOrCreate(t,{metadata:new Map([[r,n]])});case 25:o=e.sent;case 26:return e.prev=26,Bue.trace("setValue release write lock"),a(),e.finish(26);case 30:this.dispatchEvent(new fZ(Uue,{detail:{peerId:t,metadata:o.metadata,oldMetadata:null==i?new Map:i.metadata}}));case 31:case"end":return e.stop()}}),e,this,[[9,,26,30],[10,19]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kue(t),Bue.trace("delete await write lock"),e.next=4,this.store.lock.writeLock();case 4:return r=e.sent,Bue.trace("delete got write lock"),e.prev=6,e.prev=7,e.next=10,this.store.load(t);case 10:n=e.sent,e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(7),e.t0.code===Noe){e.next=17;break}throw e.t0;case 17:if(null==n){e.next=20;break}return e.next=20,this.store.patch(t,{metadata:new Map});case 20:return e.prev=20,Bue.trace("delete release write lock"),r(),e.finish(20);case 24:null!=n&&this.dispatchEvent(new fZ(Uue,{detail:{peerId:t,metadata:new Map,oldMetadata:n.metadata}}));case 25:case"end":return e.stop()}}),e,this,[[6,,20,24],[7,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteValue",value:function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kue(t),Bue.trace("deleteValue await write lock"),e.next=4,this.store.lock.writeLock();case 4:return n=e.sent,Bue.trace("deleteValue got write lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return i=e.sent,(a=i.metadata).delete(r),e.next=14,this.store.patch(t,{metadata:a});case 14:e.next=20;break;case 16:if(e.prev=16,e.t0=e.catch(6),e.t0.code===Noe){e.next=20;break}throw e.t0;case 20:return e.prev=20,Bue.trace("deleteValue release write lock"),n(),e.finish(20);case 24:null!=a&&this.dispatchEvent(new fZ(Uue,{detail:{peerId:t,metadata:a,oldMetadata:null==i?new Map:i.metadata}}));case 25:case"end":return e.stop()}}),e,this,[[6,16,20,24]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),zue=ua("libp2p:peer-store:proto-book"),Fue="change:protocols",Vue=function(){function e(t,r){Cn(this,e),this.dispatchEvent=t,this.store=r}return Dn(e,[{key:"get",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zue.trace("get wait for read lock"),e.next=3,this.store.lock.readLock();case 3:return r=e.sent,zue.trace("get got read lock"),e.prev=5,e.next=8,this.store.load(t);case 8:return n=e.sent,e.abrupt("return",n.protocols);case 12:if(e.prev=12,e.t0=e.catch(5),e.t0.code===Noe){e.next=16;break}throw e.t0;case 16:return e.prev=16,zue.trace("get release read lock"),r(),e.finish(16);case 20:return e.abrupt("return",[]);case 21:case"end":return e.stop()}}),e,this,[[5,12,16,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=kue(t),Array.isArray(r)){e.next=4;break}throw zue.error("protocols must be provided to store data"),ca(new Error("protocols must be provided"),Poe);case 4:return zue.trace("set await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,zue.trace("set got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:if(a=e.sent,new Set(su(r)).size!==a.protocols.length){e.next=16;break}return e.abrupt("return");case 16:e.next=22;break;case 18:if(e.prev=18,e.t0=e.catch(10),e.t0.code===Noe){e.next=22;break}throw e.t0;case 22:return e.next=24,this.store.patchOrCreate(t,{protocols:r});case 24:i=e.sent,zue("stored provided protocols for %p",t);case 26:return e.prev=26,zue.trace("set release write lock"),n(),e.finish(26);case 30:this.dispatchEvent(new fZ(Fue,{detail:{peerId:t,protocols:i.protocols,oldProtocols:null==a?[]:a.protocols}}));case 31:case"end":return e.stop()}}),e,this,[[9,,26,30],[10,18]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=kue(t),Array.isArray(r)){e.next=4;break}throw zue.error("protocols must be provided to store data"),ca(new Error("protocols must be provided"),Poe);case 4:return zue.trace("add await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,zue.trace("add got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:if(a=e.sent,new Set([].concat(su(a.protocols),su(r))).size!==a.protocols.length){e.next=16;break}return e.abrupt("return");case 16:e.next=22;break;case 18:if(e.prev=18,e.t0=e.catch(10),e.t0.code===Noe){e.next=22;break}throw e.t0;case 22:return e.next=24,this.store.mergeOrCreate(t,{protocols:r});case 24:i=e.sent,zue("added provided protocols for %p",t);case 26:return e.prev=26,zue.trace("add release write lock"),n(),e.finish(26);case 30:this.dispatchEvent(new fZ(Fue,{detail:{peerId:t,protocols:i.protocols,oldProtocols:null==a?[]:a.protocols}}));case 31:case"end":return e.stop()}}),e,this,[[9,,26,30],[10,18]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=kue(t),Array.isArray(r)){e.next=4;break}throw zue.error("protocols must be provided to store data"),ca(new Error("protocols must be provided"),Poe);case 4:return zue.trace("remove await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,zue.trace("remove got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:a=e.sent,o=new Set(a.protocols),s=Ni(r);try{for(s.s();!(u=s.n()).done;)c=u.value,o.delete(c)}catch(eL){s.e(eL)}finally{s.f()}if(a.protocols.length!==o.size){e.next=19;break}return e.abrupt("return");case 19:r=Array.from(o),e.next=26;break;case 22:if(e.prev=22,e.t0=e.catch(10),e.t0.code===Noe){e.next=26;break}throw e.t0;case 26:return e.next=28,this.store.patchOrCreate(t,{protocols:r});case 28:i=e.sent;case 29:return e.prev=29,zue.trace("remove release write lock"),n(),e.finish(29);case 33:this.dispatchEvent(new fZ(Fue,{detail:{peerId:t,protocols:i.protocols,oldProtocols:null==a?[]:a.protocols}}));case 34:case"end":return e.stop()}}),e,this,[[9,,29,33],[10,22]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kue(t),zue.trace("delete await write lock"),e.next=4,this.store.lock.writeLock();case 4:return r=e.sent,zue.trace("delete got write lock"),e.prev=6,e.prev=7,e.next=10,this.store.load(t);case 10:n=e.sent,e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(7),e.t0.code===Noe){e.next=17;break}throw e.t0;case 17:return e.next=19,this.store.patchOrCreate(t,{protocols:[]});case 19:return e.prev=19,zue.trace("delete release write lock"),r(),e.finish(19);case 23:null!=n&&this.dispatchEvent(new fZ(Fue,{detail:{peerId:t,protocols:[],oldProtocols:n.protocols}}));case 24:case"end":return e.stop()}}),e,this,[[6,,19,23],[7,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();!function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null!=e.addresses){var n,a=Ni(e.addresses);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.uint32(10),Rue.codec().encode(i,t,{writeDefaults:!0})}}catch(eL){a.e(eL)}finally{a.f()}}if(null!=e.protocols){var o,s=Ni(e.protocols);try{for(s.s();!(o=s.n()).done;){var u=o.value;t.uint32(18),t.string(u)}}catch(eL){s.e(eL)}finally{s.f()}}if(null!=e.metadata){var c,l=Ni(e.metadata);try{for(l.s();!(c=l.n()).done;){var f=c.value;t.uint32(26),Pue.codec().encode(f,t,{writeDefaults:!0})}}catch(eL){l.e(eL)}finally{l.f()}}null!=e.pubKey&&(t.uint32(34),t.bytes(e.pubKey)),null!=e.peerRecordEnvelope&&(t.uint32(42),t.bytes(e.peerRecordEnvelope)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={addresses:[],protocols:[],metadata:[]},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.addresses.push(Rue.codec().decode(e,e.uint32()));break;case 2:r.protocols.push(e.string());break;case 3:r.metadata.push(Pue.codec().decode(e,e.uint32()));break;case 4:r.pubKey=e.bytes();break;case 5:r.peerRecordEnvelope=e.bytes();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(Due||(Due={})),function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.multiaddr&&e.multiaddr.byteLength>0)&&(t.uint32(10),t.bytes(e.multiaddr)),null!=e.isCertified&&(t.uint32(16),t.bool(e.isCertified)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={multiaddr:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.multiaddr=e.bytes();break;case 2:r.isCertified=e.bool();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(Rue||(Rue={})),function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),!0!==r.writeDefaults&&""===e.key||(t.uint32(10),t.string(e.key)),(!0===r.writeDefaults||null!=e.value&&e.value.byteLength>0)&&(t.uint32(18),t.bytes(e.value)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={key:"",value:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.key=e.string();break;case 2:r.value=e.bytes();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(Pue||(Pue={}));var jue,que,Kue=ua("libp2p:peer-store:store"),Hue="/peers/",Gue=function(){function e(t){Cn(this,e),this.components=t,this.lock=CM({name:"peer-store",singleProcess:!0})}return Dn(e,[{key:"_peerIdToDatastoreKey",value:function(e){if(null==e.type)throw Kue.error("peerId must be an instance of peer-id to store data"),ca(new Error("peerId must be an instance of peer-id"),Poe);var t=e.toCID().toString();return new Hv("".concat(Hue).concat(t))}},{key:"has",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.datastore.has(this._peerIdToDatastoreKey(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.datastore.delete(this._peerIdToDatastoreKey(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.datastore.get(this._peerIdToDatastoreKey(t));case 2:a=e.sent,i=Due.decode(a),o=new Map,s=Ni(i.metadata);try{for(s.s();!(u=s.n()).done;)c=u.value,o.set(c.key,c.value)}catch(eL){s.e(eL)}finally{s.f()}return e.abrupt("return",jn(jn({},i),{},{id:t,addresses:i.addresses.map((function(e){var t=e.multiaddr,r=e.isCertified;return{multiaddr:Gd(t),isCertified:null!==r&&void 0!==r&&r}})),metadata:o,pubKey:null!==(r=i.pubKey)&&void 0!==r?r:void 0,peerRecordEnvelope:null!==(n=i.peerRecordEnvelope)&&void 0!==n?n:void 0}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=An(En().mark((function e(t){var r,n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.pubKey||null==t.id.publicKey||Pd(t.pubKey,t.id.publicKey)){e.next=3;break}throw Kue.error("peer publicKey bytes do not match peer id publicKey bytes"),ca(new Error("publicKey bytes do not match peer id publicKey bytes"),Poe);case 3:return r=new Set,n=t.addresses.filter((function(e){return!r.has(e.multiaddr.toString())&&(r.add(e.multiaddr.toString()),!0)})).sort((function(e,t){return e.multiaddr.toString().localeCompare(t.multiaddr.toString())})).map((function(e){var t=e.multiaddr,r=e.isCertified;return{multiaddr:t.bytes,isCertified:r}})),a=[],su(t.metadata.keys()).sort().forEach((function(e){var r=t.metadata.get(e);null!=r&&a.push({key:e,value:r})})),i=Due.encode({addresses:n,protocols:t.protocols.sort(),pubKey:t.pubKey,metadata:a,peerRecordEnvelope:t.peerRecordEnvelope}),e.next=10,this.components.datastore.put(this._peerIdToDatastoreKey(t.id),i.subarray());case 10:return e.next=12,this.load(t.id);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"patch",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:return n=e.sent,e.next=5,this._patch(t,r,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"patchOrCreate",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.load(t);case 3:n=e.sent,e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(0),e.t0.code===Noe){e.next=10;break}throw e.t0;case 10:n={id:t,addresses:[],protocols:[],metadata:new Map};case 11:return e.next=13,this._patch(t,r,n);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_patch",value:function(){var e=An(En().mark((function e(t,r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.save(jn(jn(jn({},n),r),{},{id:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"merge",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:return n=e.sent,e.next=5,this._merge(t,r,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"mergeOrCreate",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.load(t);case 3:n=e.sent,e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(0),e.t0.code===Noe){e.next=10;break}throw e.t0;case 10:n={id:t,addresses:[],protocols:[],metadata:new Map};case 11:return e.next=13,this._merge(t,r,n);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_merge",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,h,p;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=new Map,n.addresses.forEach((function(e){p.set(e.multiaddr.toString(),e.isCertified)})),(null!==(a=r.addresses)&&void 0!==a?a:[]).forEach((function(e){var t=e.multiaddr.toString(),r=Boolean(p.get(t))||e.isCertified;p.set(t,r)})),e.next=5,this.save({id:t,addresses:Array.from(p.entries()).map((function(e){var t=Ia(e,2),r=t[0],n=t[1];return{multiaddr:Gd(r),isCertified:n}})),protocols:Array.from(new Set([].concat(su(null!==(i=n.protocols)&&void 0!==i?i:[]),su(null!==(o=r.protocols)&&void 0!==o?o:[])))),metadata:new Map([].concat(su(null!==(s=null===(u=n.metadata)||void 0===u?void 0:u.entries())&&void 0!==s?s:[]),su(null!==(c=null===(l=r.metadata)||void 0===l?void 0:l.entries())&&void 0!==c?c:[]))),pubKey:null!==(f=r.pubKey)&&void 0!==f?f:null!=n?n.pubKey:void 0,peerRecordEnvelope:null!==(h=r.peerRecordEnvelope)&&void 0!==h?h:null!=n?n.peerRecordEnvelope:void 0});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=this;return Hn(En().mark((function t(){var r,n,a,i,o,s,u,c;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=2,i=zn(e.components.datastore.queryKeys({prefix:Hue}));case 4:return t.next=6,Mf(i.next());case 6:if(!(r=!(o=t.sent).done)){t.next=15;break}return s=o.value,u=s.toString().split("/")[2],c=vse.decode(u),t.next=12,e.load(xue(c));case 12:r=!1,t.next=4;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(2),n=!0,a=t.t0;case 21:if(t.prev=21,t.prev=22,!r||null==i.return){t.next=26;break}return t.next=26,Mf(i.return());case 26:if(t.prev=26,!n){t.next=29;break}throw a;case 29:return t.finish(26);case 30:return t.finish(21);case 31:case"end":return t.stop()}}),t,null,[[2,17,21,31],[22,,26,30]])})))()}}]),e}();!function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null!=e.tags){var n,a=Ni(e.tags);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.uint32(10),que.codec().encode(i,t,{writeDefaults:!0})}}catch(eL){a.e(eL)}finally{a.f()}}!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={tags:[]},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();if(a>>>3===1)r.tags.push(que.codec().decode(e,e.uint32()));else e.skipType(7&a)}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(jue||(jue={})),function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),!0!==r.writeDefaults&&""===e.name||(t.uint32(10),t.string(e.name)),null!=e.value&&(t.uint32(16),t.uint32(e.value)),null!=e.expiry&&(t.uint32(24),t.uint64(e.expiry)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={name:""},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.name=e.string();break;case 2:r.value=e.uint32();break;case 3:r.expiry=e.uint64();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(que||(que={}));var Wue=ua("libp2p:peer-store"),Yue=function(e){Pn(r,e);var t=Un(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Cn(this,r),(n=t.call(this)).components=e,n.store=new Gue(e),n.addressBook=new Cue(n.dispatchEvent.bind(On(n)),n.store,a.addressFilter),n.keyBook=new Oue(n.dispatchEvent.bind(On(n)),n.store),n.metadataBook=new Mue(n.dispatchEvent.bind(On(n)),n.store),n.protoBook=new Vue(n.dispatchEvent.bind(On(n)),n.store),n}return Dn(r,[{key:"forEach",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wue.trace("getPeers await read lock"),e.next=3,this.store.lock.readLock();case 3:r=e.sent,Wue.trace("getPeers got read lock"),e.prev=5,n=!1,a=!1,e.prev=8,o=zn(this.store.all());case 10:return e.next=12,o.next();case 12:if(!(n=!(s=e.sent).done)){e.next=20;break}if(!(u=s.value).id.equals(this.components.peerId)){e.next=16;break}return e.abrupt("continue",17);case 16:t(u);case 17:n=!1,e.next=10;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(8),a=!0,i=e.t0;case 26:if(e.prev=26,e.prev=27,!n||null==o.return){e.next=31;break}return e.next=31,o.return();case 31:if(e.prev=31,!a){e.next=34;break}throw i;case 34:return e.finish(31);case 35:return e.finish(26);case 36:return e.prev=36,Wue.trace("getPeers release read lock"),r(),e.finish(36);case 40:case"end":return e.stop()}}),e,this,[[5,,36,40],[8,22,26,36],[27,,31,35]])})));return function(t){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.forEach((function(e){t.push(e)}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wue.trace("delete await write lock"),e.next=3,this.store.lock.writeLock();case 3:return r=e.sent,Wue.trace("delete got write lock"),e.prev=5,e.next=8,this.store.delete(t);case 8:return e.prev=8,Wue.trace("delete release write lock"),r(),e.finish(8);case 12:case"end":return e.stop()}}),e,this,[[5,,8,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wue.trace("get await read lock"),e.next=3,this.store.lock.readLock();case 3:return r=e.sent,Wue.trace("get got read lock"),e.prev=5,e.next=8,this.store.load(t);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,Wue.trace("get release read lock"),r(),e.finish(9);case 13:case"end":return e.stop()}}),e,this,[[5,,9,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wue.trace("has await read lock"),e.next=3,this.store.lock.readLock();case 3:return r=e.sent,Wue.trace("has got read lock"),e.prev=5,e.next=8,this.store.has(t);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,Wue.trace("has release read lock"),r(),e.finish(9);case 13:case"end":return e.stop()}}),e,this,[[5,,9,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tagPeer",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h,p=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=p.length>2&&void 0!==p[2]?p[2]:{},o=null!==(n=i.value)&&void 0!==n?n:0,s=Math.round(o),u=null!==(a=i.ttl)&&void 0!==a?a:void 0,!(s!==o||s<0||s>100)){e.next=6;break}throw ca(new Error("Tag value must be between 0-100"),"ERR_TAG_VALUE_OUT_OF_BOUNDS");case 6:return e.next=8,this.metadataBook.getValue(t,"tags");case 8:c=e.sent,l=[],null!=c&&(l=jue.decode(c).tags),f=Ni(l),e.prev=12,f.s();case 14:if((h=f.n()).done){e.next=20;break}if(h.value.name!==r){e.next=18;break}throw ca(new Error("Peer already tagged"),"ERR_DUPLICATE_TAG");case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),f.e(e.t0);case 25:return e.prev=25,f.f(),e.finish(25);case 28:return l.push({name:r,value:s,expiry:null==u?void 0:BigInt(Date.now()+u)}),e.next=31,this.metadataBook.setValue(t,"tags",jue.encode({tags:l}).subarray());case 31:case"end":return e.stop()}}),e,this,[[12,22,25,28]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"unTagPeer",value:function(){var e=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.metadataBook.getValue(t,"tags");case 2:return n=e.sent,a=[],null!=n&&(a=jue.decode(n).tags),a=a.filter((function(e){return e.name!==r})),e.next=8,this.metadataBook.setValue(t,"tags",jue.encode({tags:a}).subarray());case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTags",value:function(){var e=An(En().mark((function e(t){var r,n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.metadataBook.getValue(t,"tags");case 2:if(r=e.sent,n=[],null!=r&&(n=jue.decode(r).tags),a=BigInt(Date.now()),(i=n.filter((function(e){return null==e.expiry||e.expiry>a}))).length===n.length){e.next=10;break}return e.next=10,this.metadataBook.setValue(t,"tags",jue.encode({tags:i}).subarray());case 10:return e.abrupt("return",i.map((function(e){var t;return{name:e.name,value:null!==(t=e.value)&&void 0!==t?t:0}})));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(cZ),Que=function(){function e(t){Cn(this,e),this.dht=t}return Dn(e,[{key:"provide",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nS(this.dht.provide(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(t.dht.findProviders(e,r));case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}if("PROVIDER"!==(c=u.value).name){n.next=10;break}return n.delegateYield(Cb(zn(c.providers)),"t0",10);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t1=n.catch(2),i=!0,o=n.t1;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,Mf(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"put",value:function(){var e=An(En().mark((function e(t,r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nS(this.dht.put(t,r,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=zn(this.dht.get(t,r));case 4:return e.next=6,o.next();case 6:if(!(n=!(s=e.sent).done)){e.next=13;break}if("VALUE"!==(u=s.value).name){e.next=10;break}return e.abrupt("return",u.value);case 10:n=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:throw ca(new Error("Not found"),"ERR_NOT_FOUND");case 30:case"end":return e.stop()}}),e,this,[[2,15,19,29],[20,,24,28]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),Jue=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Cn(this,e),this._started=!1,this._peerId=t.peerId,this._addressManager=t.addressManager,this._peerStore=t.peerStore,this._upgrader=t.upgrader,this._metrics=t.metrics,this._registrar=t.registrar,this._connectionManager=t.connectionManager,this._transportManager=t.transportManager,this._connectionGater=t.connectionGater,this._contentRouting=t.contentRouting,this._peerRouting=t.peerRouting,this._datastore=t.datastore,this._connectionProtector=t.connectionProtector,this._dht=t.dht,this._pubsub=t.pubsub,this._dialer=t.dialer}return Dn(e,[{key:"isStarted",value:function(){return this._started}},{key:"beforeStart",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return B9(e)})).map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.beforeStart){e.next=3;break}return e.next=3,t.beforeStart();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return B9(e)})).map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.start();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:this._started=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"afterStart",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return B9(e)})).map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.afterStart){e.next=3;break}return e.next=3,t.afterStart();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"beforeStop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return B9(e)})).map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.beforeStop){e.next=3;break}return e.next=3,t.beforeStop();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return B9(e)})).map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.stop();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:this._started=!1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"afterStop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return B9(e)})).map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.afterStop){e.next=3;break}return e.next=3,t.afterStop();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"peerId",get:function(){if(null==this._peerId)throw ca(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this._peerId},set:function(e){this._peerId=e}},{key:"addressManager",get:function(){if(null==this._addressManager)throw ca(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this._addressManager},set:function(e){this._addressManager=e}},{key:"peerStore",get:function(){if(null==this._peerStore)throw ca(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this._peerStore},set:function(e){this._peerStore=e}},{key:"upgrader",get:function(){if(null==this._upgrader)throw ca(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this._upgrader},set:function(e){this._upgrader=e}},{key:"registrar",get:function(){if(null==this._registrar)throw ca(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this._registrar},set:function(e){this._registrar=e}},{key:"connectionManager",get:function(){if(null==this._connectionManager)throw ca(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this._connectionManager},set:function(e){this._connectionManager=e}},{key:"transportManager",get:function(){if(null==this._transportManager)throw ca(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this._transportManager},set:function(e){this._transportManager=e}},{key:"connectionGater",get:function(){if(null==this._connectionGater)throw ca(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this._connectionGater},set:function(e){this._connectionGater=e}},{key:"contentRouting",get:function(){if(null==this._contentRouting)throw ca(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this._contentRouting},set:function(e){this._contentRouting=e}},{key:"peerRouting",get:function(){if(null==this._peerRouting)throw ca(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this._peerRouting},set:function(e){this._peerRouting=e}},{key:"datastore",get:function(){if(null==this._datastore)throw ca(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this._datastore},set:function(e){this._datastore=e}},{key:"connectionProtector",get:function(){return this._connectionProtector},set:function(e){this._connectionProtector=e}},{key:"dialer",get:function(){if(null==this._dialer)throw ca(new Error("dialer not set"),"ERR_SERVICE_MISSING");return this._dialer},set:function(e){this._dialer=e}},{key:"metrics",get:function(){return this._metrics},set:function(e){this._metrics=e}},{key:"dht",get:function(){return this._dht},set:function(e){this._dht=e}},{key:"pubsub",get:function(){return this._pubsub},set:function(e){this._pubsub=e}}]),e}(),Zue=__webpack_require__(9582),Xue=globalThis.fetch,$ue=globalThis.Headers;globalThis.Request,globalThis.Response;function ece(e,t,r){return"".concat(e,"?name=").concat(t,"&type=").concat(r)}function tce(e,t){return rce.apply(this,arguments)}function rce(){return(rce=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xue(t,{headers:new $ue({accept:"application/dns-json"}),signal:r});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nce(e,t){return"".concat(t,"_").concat(e)}var ace=Object.assign(Yn("dns-over-http-resolver"),{error:Yn("dns-over-http-resolver:error")}),ice=function(){function e(){var t,r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Cn(this,e),this._cache=new Zue({max:null!==(t=null===a||void 0===a?void 0:a.maxCache)&&void 0!==t?t:100}),this._TXTcache=new Zue({max:null!==(r=null===a||void 0===a?void 0:a.maxCache)&&void 0!==r?r:100}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"],this._request=null!==(n=a.request)&&void 0!==n?n:tce,this._abortControllers=[]}return Dn(e,[{key:"cancel",value:function(){this._abortControllers.forEach((function(e){return e.abort()}))}},{key:"getServers",value:function(){return this._servers}},{key:"_getShuffledServers",value:function(){for(var e=su(this._servers),t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*t),n=e[t];e[t]=e[r],e[r]=n}return e}},{key:"setServers",value:function(e){this._servers=e}},{key:"resolve",value:function(){var e=An(En().mark((function e(t){var r,n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.length>1&&void 0!==n[1]?n[1]:"A",e.t0=r,e.next="A"===e.t0?4:"AAAA"===e.t0?7:"TXT"===e.t0?10:13;break;case 4:return e.next=6,this.resolve4(t);case 6:case 9:case 12:return e.abrupt("return",e.sent);case 7:return e.next=9,this.resolve6(t);case 10:return e.next=12,this.resolveTxt(t);case 13:throw new Error("".concat(r," is not supported"));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resolve4",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="A",null==(n=this._cache.get(nce(t,r)))){e.next=4;break}return e.abrupt("return",n);case 4:a=!1,i=Ni(this._getShuffledServers()),e.prev=6,s=En().mark((function e(){var n,i,s,u,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.value,i=new AbortController,c._abortControllers.push(i),e.prev=3,e.next=6,c._request(ece(n,t,r),i.signal);case 6:return s=e.sent,u=s.Answer.map((function(e){return e.data})),l=Math.min.apply(Math,su(s.Answer.map((function(e){return e.TTL})))),c._cache.set(nce(t,r),u,{ttl:l}),e.abrupt("return",{v:u});case 13:e.prev=13,e.t0=e.catch(3),i.signal.aborted&&(a=!0),ace.error("".concat(n," could not resolve ").concat(t," record ").concat(r));case 17:return e.prev=17,c._abortControllers=c._abortControllers.filter((function(e){return e!==i})),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})),i.s();case 9:if((o=i.n()).done){e.next=16;break}return e.delegateYield(s(),"t0",11);case 11:if("object"!==typeof(u=e.t0)){e.next=14;break}return e.abrupt("return",u.v);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(6),i.e(e.t1);case 21:return e.prev=21,i.f(),e.finish(21);case 24:if(!a){e.next=26;break}throw Object.assign(new Error("queryA ECANCELLED"),{code:"ECANCELLED"});case 26:throw new Error("Could not resolve ".concat(t," record ").concat(r));case 27:case"end":return e.stop()}}),e,this,[[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resolve6",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="AAAA",null==(n=this._cache.get(nce(t,r)))){e.next=4;break}return e.abrupt("return",n);case 4:a=!1,i=Ni(this._getShuffledServers()),e.prev=6,s=En().mark((function e(){var n,i,s,u,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.value,i=new AbortController,c._abortControllers.push(i),e.prev=3,e.next=6,c._request(ece(n,t,r),i.signal);case 6:return s=e.sent,u=s.Answer.map((function(e){return e.data})),l=Math.min.apply(Math,su(s.Answer.map((function(e){return e.TTL})))),c._cache.set(nce(t,r),u,{ttl:l}),e.abrupt("return",{v:u});case 13:e.prev=13,e.t0=e.catch(3),i.signal.aborted&&(a=!0),ace.error("".concat(n," could not resolve ").concat(t," record ").concat(r));case 17:return e.prev=17,c._abortControllers=c._abortControllers.filter((function(e){return e!==i})),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})),i.s();case 9:if((o=i.n()).done){e.next=16;break}return e.delegateYield(s(),"t0",11);case 11:if("object"!==typeof(u=e.t0)){e.next=14;break}return e.abrupt("return",u.v);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(6),i.e(e.t1);case 21:return e.prev=21,i.f(),e.finish(21);case 24:if(!a){e.next=26;break}throw Object.assign(new Error("queryAaaa ECANCELLED"),{code:"ECANCELLED"});case 26:throw new Error("Could not resolve ".concat(t," record ").concat(r));case 27:case"end":return e.stop()}}),e,this,[[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resolveTxt",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="TXT",null==(n=this._TXTcache.get(nce(t,r)))){e.next=4;break}return e.abrupt("return",n);case 4:a=!1,i=Ni(this._getShuffledServers()),e.prev=6,s=En().mark((function e(){var n,i,s,u,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.value,i=new AbortController,c._abortControllers.push(i),e.prev=3,e.next=6,c._request(ece(n,t,r),i.signal);case 6:return s=e.sent,u=s.Answer.map((function(e){return[e.data.replace(/['"]+/g,"")]})),l=Math.min.apply(Math,su(s.Answer.map((function(e){return e.TTL})))),c._TXTcache.set(nce(t,r),u,{ttl:l}),e.abrupt("return",{v:u});case 13:e.prev=13,e.t0=e.catch(3),i.signal.aborted&&(a=!0),ace.error("".concat(n," could not resolve ").concat(t," record ").concat(r));case 17:return e.prev=17,c._abortControllers=c._abortControllers.filter((function(e){return e!==i})),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})),i.s();case 9:if((o=i.n()).done){e.next=16;break}return e.delegateYield(s(),"t0",11);case 11:if("object"!==typeof(u=e.t0)){e.next=14;break}return e.abrupt("return",u.v);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(6),i.e(e.t1);case 21:return e.prev=21,i.f(),e.finish(21);case 24:if(!a){e.next=26;break}throw Object.assign(new Error("queryTxt ECANCELLED"),{code:"ECANCELLED"});case 26:throw new Error("Could not resolve ".concat(t," record ").concat(r));case 27:case"end":return e.stop()}}),e,this,[[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"clearCache",value:function(){this._cache.clear(),this._TXTcache.clear()}}]),e}(),oce=ice,sce=Th("dnsaddr").code;function uce(){return uce=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:{},a=new oce,null!=n.signal&&n.signal.addEventListener("abort",(function(){a.cancel()})),i=t.getPeerId(),o=null!==(r=t.stringTuples().find((function(e){return Ia(e,1)[0]===sce})))&&void 0!==r?r:[],s=Ia(o,2),null!=(u=s[1])){e.next=7;break}throw new Error("No hostname found in multiaddr");case 7:return e.next=9,a.resolveTxt("_dnsaddr.".concat(u));case 9:return c=e.sent,l=c.flat().map((function(e){return e.split("=")[1]})),null!=i&&(l=l.filter((function(e){return e.includes(i)}))),e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)}))),uce.apply(this,arguments)}var cce=3e4,lce={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:function(e){return e}},connectionManager:{maxConnections:300,minConnections:50,autoDial:!0,autoDialInterval:1e4,maxParallelDials:100,maxDialsPerPeer:4,dialTimeout:cce,inboundUpgradeTimeout:3e4,resolvers:{dnsaddr:function(e){return uce.apply(this,arguments)}},addressSorter:Uae},connectionGater:{},transportManager:{faultTolerance:S9.FATAL_ALL},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},nat:{enabled:!0,ttl:7200,keepAlive:!0},relay:{enabled:!0,advertise:{bootDelay:9e5,enabled:!1,ttl:18e5},hop:{enabled:!1,active:!1,timeout:3e4},autoRelay:{enabled:!1,maxListeners:2}},identify:{protocolPrefix:"ipfs",host:{agentVersion:ioe},timeout:6e4,maxInboundStreams:1,maxOutboundStreams:1,maxPushIncomingStreams:1,maxPushOutgoingStreams:1},ping:{protocolPrefix:"ipfs",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4},fetch:{protocolPrefix:"libp2p",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4}};function fce(e){var t,r,n=Gn(lce,e);if(null==n.transports||n.transports.length<1)throw ca(new Error(I9.ERR_TRANSPORTS_REQUIRED),T9.ERR_TRANSPORTS_REQUIRED);if(null==n.connectionEncryption||0===n.connectionEncryption.length)throw ca(new Error(I9.CONN_ENCRYPTION_REQUIRED),T9.CONN_ENCRYPTION_REQUIRED);if(null===n.connectionProtector&&null!=(null===(t=globalThis.process)||void 0===t||null===(r=t.env)||void 0===r?void 0:r.LIBP2P_FORCE_PNET))throw ca(new Error(I9.ERR_PROTECTOR_REQUIRED),T9.ERR_PROTECTOR_REQUIRED);return n.identify.host.agentVersion===ioe&&(koe||moe?n.identify.host.agentVersion+=" UserAgent=".concat(globalThis.process.version):(goe||xoe||woe||_oe)&&(n.identify.host.agentVersion+=" UserAgent=".concat(globalThis.navigator.userAgent))),n}var hce=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=pce;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},pce=Math.pow(2,31);var dce=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var vce=Math.pow(2,7),yce=Math.pow(2,14),bce=Math.pow(2,21),gce=Math.pow(2,28),mce=Math.pow(2,35),wce=Math.pow(2,42),kce=Math.pow(2,49),xce=Math.pow(2,56),_ce=Math.pow(2,63),Ece={encode:hce,decode:dce,encodingLength:function(e){return e<vce?1:e<yce?2:e<bce?3:e<gce?4:e<mce?5:e<wce?6:e<kce?7:e<xce?8:e<_ce?9:10}},Sce=Ece,Ace=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Sce.decode(e,t);return[r,Sce.decode.bytes]},Cce=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Sce.encode(e,t,r),t},Ice=function(e){return Sce.encodingLength(e)},Tce=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Dce=function(e,t){var r=t.byteLength,n=Ice(e),a=n+Ice(r),i=new Uint8Array(a+r);return Cce(e,i,0),Cce(r,i,n),i.set(t,a),new Pce(e,r,t,i)},Rce=function(e){var t=Tce(e),r=Ia(Ace(t),2),n=r[0],a=r[1],i=Ia(Ace(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new Pce(n,o,u,t)},Pce=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var Nce=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Lce=Nce,Oce=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),Bce=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Mce(this,e)}}]),e}(),Uce=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return Mce(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Mce=function(e,t){return new Uce(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},zce=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Oce(t,r,n),this.decoder=new Bce(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Fce=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new zce(t,r,n,a)},Vce=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Lce(n,r),i=a.encode,o=a.decode;return Fce({prefix:t,name:r,encode:i,decode:function(e){return Tce(o(e))}})},jce=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return Fce({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},qce=Vce({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Kce=Vce({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Hce=jce({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Gce=jce({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Wce=jce({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Yce=jce({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Qce=jce({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Jce=jce({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Zce=jce({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Xce=jce({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$ce=jce({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),ele=function(e,t){var r=e.bytes;return 0===e.version?ile(r,rle(e),t||qce.encoder):ole(r,rle(e),t||Hce.encoder)},tle=new WeakMap,rle=function(e){var t=tle.get(e);if(null==t){var r=new Map;return tle.set(e,r),r}return t},nle=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==sle)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==ule)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=Dce(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return ele(this,e)}},{key:"toJSON",value:function(){return{"/":ele(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||cle(n,a,i.bytes))}if(!0===t[lle]){var o=t.version,s=t.multihash,u=t.code,c=Rce(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==sle)throw new Error("Version 0 CID must use dag-pb (code: ".concat(sle,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,cle(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,sle,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=Tce(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new Pce(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(Ace(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=sle;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(ale(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return rle(o).set(a,e),o}}]),r}(),ale=function(e,t){switch(e[0]){case"Q":var r=t||qce;return[qce.prefix,r.decode("".concat(qce.prefix).concat(e))];case qce.prefix:var n=t||qce;return[qce.prefix,n.decode(e)];case Hce.prefix:var a=t||Hce;return[Hce.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},ile=function(e,t,r){var n=r.prefix;if(n!==qce.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},ole=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},sle=112,ule=18,cle=function(e,t,r){var n=Ice(e),a=n+Ice(t),i=new Uint8Array(a+r.byteLength);return Cce(e,i,0),Cce(t,i,n),i.set(r,a),i},lle=Symbol.for("@ipld/js-cid/CID"),fle=Fce({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),hle=jce({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ple=jce({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),dle=Vce({prefix:"9",name:"base10",alphabet:"0123456789"}),vle=jce({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),yle=jce({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ble=Vce({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gle=Vce({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),mle=jce({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),wle=jce({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),kle=jce({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xle=jce({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),_le=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Ele=_le.reduce((function(e,t,r){return e[r]=t,e}),[]),Sle=_le.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var Ale,Cle=Fce({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=Ele[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=Sle[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),Ile=function(e){var t=e.name,r=e.code,n=e.encode;return new Tle(t,r,n)},Tle=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?Dce(this.code,r):r.then((function(e){return Dce(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),Dle=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Rle=Ile({name:"sha2-256",code:18,encode:Dle("SHA-256")}),Ple=Ile({name:"sha2-512",code:19,encode:Dle("SHA-512")}),Nle=Tce,Lle={code:0,name:"identity",encode:Nle,digest:function(e){return Dce(0,Nle(e))}},Ole="raw",Ble=85,Ule=function(e){return Tce(e)},Mle=function(e){return Tce(e)},zle=new TextEncoder,Fle=new TextDecoder,Vle="json",jle=512,qle=function(e){return zle.encode(JSON.stringify(e))},Kle=function(e){return JSON.parse(Fle.decode(e))},Hle=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},mr),wr),kr),xr),_r),gr),Er),br),Sr),Ar),Gle=(jn(jn({},Cr),Ir),Symbol.for("nodejs.util.inspect.custom")),Wle=Object.values(Hle).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),Hle.identity.decoder),Yle=36,Qle=37,Jle=function(e){function t(e){Cn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:fb,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=qce.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return nle.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return Pd(this.multihash.bytes,e);if("string"===typeof e)return function(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:Wle,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=Rce(qce.decode("z".concat(e)));return e.startsWith("12D")?new Xle({multihash:n}):e.startsWith("16U")?new $le({multihash:n}):new Zle({multihash:n})}return function(e){try{var t=Rce(e);if(t.code===Lle.code){if(36===t.digest.length)return new Xle({multihash:t});if(37===t.digest.length)return new $le({multihash:t})}if(t.code===Rle.code)return new Zle({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===Rle.code)return new Zle({multihash:e.multihash});if(t.code===Lle.code){if(t.digest.length===Yle)return new Xle({multihash:e.multihash});if(t.digest.length===Qle)return new $le({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(nle.decode(e))}throw new Error("Supplied PeerID CID is invalid")}(Wle.decode(e))}(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Pd(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:Gle,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),Zle=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Dn(r)}(Jle),Xle=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Dn(r)}(Jle),$le=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Dn(r)}(Jle);function efe(e,t){return tfe.apply(this,arguments)}function tfe(){return(tfe=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length!==Yle){e.next=2;break}return e.abrupt("return",new Xle({multihash:Dce(Lle.code,t),privateKey:r}));case 2:if(t.length!==Qle){e.next=4;break}return e.abrupt("return",new $le({multihash:Dce(Lle.code,t),privateKey:r}));case 4:return e.t0=Zle,e.next=7,Rle.digest(t);case 7:return e.t1=e.sent,e.t2=t,e.t3=r,e.t4={multihash:e.t1,publicKey:e.t2,privateKey:e.t3},e.abrupt("return",new e.t0(e.t4));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.id&&e.id.byteLength>0)&&(t.uint32(10),t.bytes(e.id)),null!=e.pubKey&&(t.uint32(18),t.bytes(e.pubKey)),null!=e.privKey&&(t.uint32(26),t.bytes(e.privKey)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={id:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.id=e.bytes();break;case 2:r.pubKey=e.bytes();break;case 3:r.privKey=e.bytes();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(Ale||(Ale={}));var rfe=function(){var e=An(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gx("Ed25519");case 2:return t=e.sent,e.next=5,afe(t);case 5:if("Ed25519"!==(r=e.sent).type){e.next=8;break}return e.abrupt("return",r);case 8:throw new Error('Generated unexpected PeerId type "'.concat(r.type,'"'));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nfe=function(){var e=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gx("RSA",null!==(r=null===t||void 0===t?void 0:t.bits)&&void 0!==r?r:2048);case 2:return n=e.sent,e.next=5,afe(n);case 5:if("RSA"!==(a=e.sent).type){e.next=8;break}return e.abrupt("return",a);case 8:throw new Error('Generated unexpected PeerId type "'.concat(a.type,'"'));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function afe(e){return ife.apply(this,arguments)}function ife(){return(ife=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,efe(kx(t.public),Ex(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ofe=function(e,t){Pn(n,e);var r=Un(n);function n(){return Cn(this,n),r.apply(this,arguments)}return Dn(n,[{key:C9,get:function(){return!0}},{key:t,get:function(){return"@libp2p/dummy-dht"}},{key:"wan",get:function(){throw ca(new Error(I9.DHT_DISABLED),T9.DHT_DISABLED)}},{key:"lan",get:function(){throw ca(new Error(I9.DHT_DISABLED),T9.DHT_DISABLED)}},{key:"get",value:function(){throw ca(new Error(I9.DHT_DISABLED),T9.DHT_DISABLED)}},{key:"findProviders",value:function(){throw ca(new Error(I9.DHT_DISABLED),T9.DHT_DISABLED)}},{key:"findPeer",value:function(){throw ca(new Error(I9.DHT_DISABLED),T9.DHT_DISABLED)}},{key:"getClosestPeers",value:function(){throw ca(new Error(I9.DHT_DISABLED),T9.DHT_DISABLED)}},{key:"provide",value:function(){throw ca(new Error(I9.DHT_DISABLED),T9.DHT_DISABLED)}},{key:"put",value:function(){throw ca(new Error(I9.DHT_DISABLED),T9.DHT_DISABLED)}},{key:"getMode",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw ca(new Error(I9.DHT_DISABLED),T9.DHT_DISABLED);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setMode",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw ca(new Error(I9.DHT_DISABLED),T9.DHT_DISABLED);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshRoutingTable",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw ca(new Error(I9.DHT_DISABLED),T9.DHT_DISABLED);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(cZ,Symbol.toStringTag),sfe=function(e){Pn(r,e);var t=Un(r);function r(){var e;return Cn(this,r),(e=t.apply(this,arguments)).topicValidators=new Map,e}return Dn(r,[{key:"isStarted",value:function(){return!1}},{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"globalSignaturePolicy",get:function(){throw ca(new Error(I9.PUBSUB_DISABLED),T9.ERR_PUBSUB_DISABLED)}},{key:"multicodecs",get:function(){throw ca(new Error(I9.PUBSUB_DISABLED),T9.ERR_PUBSUB_DISABLED)}},{key:"getPeers",value:function(){throw ca(new Error(I9.PUBSUB_DISABLED),T9.ERR_PUBSUB_DISABLED)}},{key:"getTopics",value:function(){throw ca(new Error(I9.PUBSUB_DISABLED),T9.ERR_PUBSUB_DISABLED)}},{key:"subscribe",value:function(){throw ca(new Error(I9.PUBSUB_DISABLED),T9.ERR_PUBSUB_DISABLED)}},{key:"unsubscribe",value:function(){throw ca(new Error(I9.PUBSUB_DISABLED),T9.ERR_PUBSUB_DISABLED)}},{key:"getSubscribers",value:function(){throw ca(new Error(I9.PUBSUB_DISABLED),T9.ERR_PUBSUB_DISABLED)}},{key:"publish",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw ca(new Error(I9.PUBSUB_DISABLED),T9.ERR_PUBSUB_DISABLED);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(cZ),ufe=__webpack_require__(4911),cfe=ua("libp2p:dialer:dial-request"),lfe=function(){function e(t){Cn(this,e);var r=t.addrs,n=t.dialAction,a=t.dialer;this.addrs=r,this.dialer=a,this.dialAction=n}return Dn(e,[{key:"run",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o,s,u,c,l=this,f=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:{},!((r=this.dialer.getTokens(this.addrs.length)).length<1)){e.next=4;break}throw ca(new Error("No dial tokens available"),T9.ERR_NO_DIAL_TOKENS);case 4:n=new ufe,a=Ni(r);try{for(a.s();!(i=a.n()).done;)o=i.value,n.push(o).catch((function(e){cfe.error(e)}))}catch(eL){a.e(eL)}finally{a.f()}if(s=this.addrs.map((function(){var e=new AbortController;try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,e.signal)}catch(t){}return e})),null!=t.signal)try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,t.signal)}catch(h){}return u=0,c=!1,e.prev=11,e.next=14,Promise.any(this.addrs.map(function(){var e=An(En().mark((function e(a,i){var o,f,h,p;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.shift();case 2:if(o=e.sent,!c){e.next=6;break}throw l.dialer.releaseToken(r.splice(r.indexOf(o),1)[0]),ca(new Error("dialAction already succeeded"),T9.ERR_ALREADY_SUCCEEDED);case 6:if(null!=(f=s[i])){e.next=9;break}throw ca(new Error("dialAction did not come with an AbortController"),T9.ERR_INVALID_PARAMETERS);case 9:return e.prev=9,p=f.signal,e.next=13,l.dialAction(a,jn(jn({},t),{},{signal:null!=t.signal?(0,Wv.anySignal)([p,t.signal]):p}));case 13:h=e.sent,s[i]=void 0;case 15:return e.prev=15,u++,l.addrs.length-u>=r.length?n.push(o).catch((function(e){cfe.error(e)})):l.dialer.releaseToken(r.splice(r.indexOf(o),1)[0]),e.finish(15);case 19:if(null!=h){e.next=23;break}throw ca(new Error("dialAction led to empty object"),T9.ERR_TRANSPORT_DIAL_FAILED);case 23:c=!0;case 24:return e.abrupt("return",h);case 25:case"end":return e.stop()}}),e,null,[[9,,15,19]])})));return function(t,r){return e.apply(this,arguments)}}()));case 14:return e.abrupt("return",e.sent);case 15:return e.prev=15,s.forEach((function(e){void 0!==e&&e.abort()})),r.forEach((function(e){return l.dialer.releaseToken(e)})),e.finish(15);case 19:case"end":return e.stop()}}),e,this,[[11,,15,19]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ffe=ua("libp2p:dialer"),hfe=function(){function e(t){var r,n,a,i,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Cn(this,e),this.started=!1,this.addressSorter=null!==(r=s.addressSorter)&&void 0!==r?r:Uae,this.maxAddrsToDial=null!==(n=s.maxAddrsToDial)&&void 0!==n?n:25,this.timeout=null!==(a=s.dialTimeout)&&void 0!==a?a:cce,this.maxDialsPerPeer=null!==(i=s.maxDialsPerPeer)&&void 0!==i?i:4,this.tokens=su(new Array(null!==(o=s.maxParallelDials)&&void 0!==o?o:100)).map((function(e,t){return t})),this.components=t,this.pendingDials=Aie({name:"libp2p_dialler_pending_dials",metrics:t.metrics}),this.pendingDialTargets=Aie({name:"libp2p_dialler_pending_dial_targets",metrics:t.metrics});for(var u=0,c=Object.entries(null!==(l=s.resolvers)&&void 0!==l?l:{});u<c.length;u++){var l,f=Ia(c[u],2),h=f[0],p=f[1];Vd.set(h,p)}}return Dn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1,t=Ni(this.pendingDials.values());try{for(t.s();!(r=t.n()).done;){n=r.value;try{n.controller.abort()}catch(eL){ffe.error(eL)}}}catch(eL){t.e(eL)}finally{t.f()}this.pendingDials.clear(),a=Ni(this.pendingDialTargets.values());try{for(a.s();!(i=a.n()).done;)i.value.abort()}catch(eL){a.e(eL)}finally{a.f()}this.pendingDialTargets.clear();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dial",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:{},a=Une(t),i=a.peerId,o=a.multiaddr,null==i){e.next=13;break}if(!this.components.peerId.equals(i)){e.next=5;break}throw ca(new Error("Tried to dial self"),T9.ERR_DIALED_SELF);case 5:if(null==o){e.next=9;break}return ffe("storing multiaddrs %p",i,o),e.next=9,this.components.peerStore.addressBook.add(i,[o]);case 9:return e.next=11,this.components.connectionGater.denyDialPeer(i);case 11:if(!e.sent){e.next=13;break}throw ca(new Error("The dial request is blocked by gater.allowDialPeer"),T9.ERR_PEER_DIAL_INTERCEPTED);case 13:return ffe("creating dial target for %p",i),s=new AbortController,u=dfe(),this.pendingDialTargets.set(u,s),c=s.signal,null!=n.signal&&(c=(0,Wv.anySignal)([c,n.signal])),e.prev=19,e.next=22,this._createDialTarget({peerId:i,multiaddr:o},jn(jn({},n),{},{signal:c}));case 22:l=e.sent;case 23:return e.prev=23,this.pendingDialTargets.delete(u),e.finish(23);case 26:if(0!==l.addrs.length){e.next=28;break}throw ca(new Error("The dial request has no valid addresses"),T9.ERR_NO_VALID_ADDRESSES);case 28:return f=null!==(r=this.pendingDials.get(l.id))&&void 0!==r?r:this._createPendingDial(l,n),e.prev=29,e.next=32,f.promise;case 32:return h=e.sent,ffe("dial succeeded to %s",l.id),e.abrupt("return",h);case 37:throw e.prev=37,e.t0=e.catch(29),ffe("dial failed to %s",l.id,e.t0),f.controller.signal.aborted&&(e.t0.code=T9.ERR_TIMEOUT),ffe.error(e.t0),e.t0;case 43:return e.prev=43,f.destroy(),e.finish(43);case 46:case"end":return e.stop()}}),e,this,[[19,,23,26],[29,37,43,46]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_createDialTarget",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],Kd(t.multiaddr)&&n.push(t.multiaddr),Kd(t.multiaddr)||!hb(t.peerId)){e.next=11;break}return e.t0=(a=n).push,e.t1=a,e.t2=su,e.next=8,this._loadAddresses(t.peerId);case 8:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 11:return e.next=13,Promise.all(n.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s._resolve(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:if(n=e.sent.flat().filter((function(e){return Boolean(s.components.transportManager.transportForMultiaddr(e))})),!((n=su(new Set(n.map((function(e){return e.toString()})))).map((function(e){return Gd(e)}))).length>this.maxAddrsToDial)){e.next=17;break}throw ca(new Error("dial with more addresses than allowed"),T9.ERR_TOO_MANY_ADDRESSES);case 17:return null!=(i=hb(t.peerId)?t.peerId:void 0)&&(o="/p2p/".concat(i.toString()),n=n.map((function(e){var t=e.getPeerId();return null!=t&&i.equals(t)?e:e.encapsulate(o)}))),e.abrupt("return",{id:null==i?dfe():i.toString(),addrs:n});case 20:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_loadAddresses",value:function(){var e=An(En().mark((function e(t){var r,n=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.peerStore.addressBook.get(t);case 2:return r=e.sent,e.next=5,Promise.all(r.map(function(){var e=An(En().mark((function e(r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.components.connectionGater.denyDialMultiaddr(t,r.multiaddr);case 2:if(!e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",e.sent.filter(pfe).sort(this.addressSorter).map((function(e){return e.multiaddr})));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createPendingDial",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){var e=An(En().mark((function e(r){var n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>1&&void 0!==i[1]?i[1]:{},!0!==(null===(n=a.signal)||void 0===n?void 0:n.aborted)){e.next=3;break}throw ca(new Error("already aborted"),T9.ERR_ALREADY_ABORTED);case 3:return e.next=5,t.components.transportManager.dial(r,a).catch((function(e){throw ffe.error("dial to %s failed",r,e),e}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=new lfe({addrs:e.addrs,dialAction:n,dialer:this}),i=new Uf.TimeoutController(this.timeout),o=[i.signal];null!=r.signal&&o.push(r.signal);var s=(0,Wv.anySignal)(o);try{null===q9.setMaxListeners||void 0===q9.setMaxListeners||(0,q9.setMaxListeners)(1/0,s)}catch(c){}var u={dialRequest:a,controller:i,promise:a.run(jn(jn({},r),{},{signal:s})),destroy:function(){i.clear(),t.pendingDials.delete(e.id)}};return this.pendingDials.set(e.id,u),u}},{key:"getTokens",value:function(e){var t=Math.min(e,this.maxDialsPerPeer,this.tokens.length),r=this.tokens.splice(0,t);return ffe("%d tokens request, returning %d, %d remaining",e,t,this.tokens.length),r}},{key:"releaseToken",value:function(e){this.tokens.includes(e)||(ffe("token %d released",e),this.tokens.push(e))}},{key:"_resolve",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.protoNames().includes("dnsaddr")){e.next=3;break}return e.abrupt("return",[t]);case 3:return e.next=5,this._resolveRecord(t,r);case 5:return n=e.sent,e.next=8,Promise.all(n.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o._resolve(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return a=e.sent,i=a.flat(),e.abrupt("return",i.reduce((function(e,t){return null==e.find((function(e){return e.equals(t)}))&&e.push(t),e}),[]));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_resolveRecord",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Gd(t.toString()),e.next=4,t.resolve(r);case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),ffe.error("multiaddr ".concat(t.toString()," could not be resolved"),e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();function pfe(e){return Boolean(e)}function dfe(){return"".concat(parseInt(String(1e9*Math.random()),10).toString()).concat(Date.now())}var vfe=ua("libp2p"),yfe=function(e){Pn(r,e);var t=Un(r);function r(e){var n,a,i,o,s,u,c;Cn(this,r),(c=t.call(this)).started=!1,c.peerId=e.peerId;var l=c.components=new Jue({peerId:e.peerId,datastore:null!==(n=e.datastore)&&void 0!==n?n:new wS,connectionGater:jn({denyDialPeer:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyDialMultiaddr:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyInboundConnection:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyOutboundConnection:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyInboundEncryptedConnection:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyOutboundEncryptedConnection:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyInboundUpgradedConnection:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyOutboundUpgradedConnection:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),filterMultiaddrForPeer:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},e.connectionGater)});l.peerStore=new Yue(l,jn({addressFilter:c.components.connectionGater.filterMultiaddrForPeer},e.peerStore)),c.services=[l],null!=e.metrics&&(c.metrics=c.components.metrics=c.configureComponent(e.metrics(c.components))),c.peerStore=c.components.peerStore,c.peerStore.addEventListener("peer",(function(e){var t=e.detail;c.dispatchEvent(new fZ("peer:discovery",{detail:t}))})),null!=e.connectionProtector&&(c.components.connectionProtector=e.connectionProtector(l)),c.components.upgrader=new toe(c.components,{connectionEncryption:(null!==(a=e.connectionEncryption)&&void 0!==a?a:[]).map((function(e){return c.configureComponent(e(c.components))})),muxers:(null!==(i=e.streamMuxers)&&void 0!==i?i:[]).map((function(e){return c.configureComponent(e(c.components))})),inboundUpgradeTimeout:e.connectionManager.inboundUpgradeTimeout}),c.components.dialer=new hfe(c.components,e.connectionManager),c.connectionManager=c.components.connectionManager=new Vne(c.components,e.connectionManager),c.components.connectionManager.addEventListener("peer:disconnect",(function(e){c.dispatchEvent(new fZ("peer:disconnect",{detail:e.detail}))})),c.components.connectionManager.addEventListener("peer:connect",(function(e){c.dispatchEvent(new fZ("peer:connect",{detail:e.detail}))})),c.registrar=c.components.registrar=new Qie(c.components),c.components.transportManager=new Iie(c.components,e.transportManager),c.components.addressManager=new Ute(c.components,e.addresses),c.configureComponent(new Doe(c.components)),c.configureComponent(new Hne(c.components,{enabled:e.connectionManager.autoDial,minConnections:e.connectionManager.minConnections,autoDialInterval:e.connectionManager.autoDialInterval}));var f=lie.generateOptions();c.keychain=c.configureComponent(new lie(c.components,jn(jn({},f),e.keychain))),c.services.push(new Ioe(c.components,e.nat)),e.transports.forEach((function(e){c.components.transportManager.add(c.configureComponent(e(c.components)))})),c.identifyService=new uoe(c.components,jn({},e.identify)),c.configureComponent(c.identifyService),null!=e.dht?c.dht=c.components.dht=e.dht(c.components):c.dht=new ofe,null!=e.pubsub?c.pubsub=c.components.pubsub=e.pubsub(c.components):c.pubsub=new sfe;var h=(null!==(o=e.peerRouters)&&void 0!==o?o:[]).map((function(e){return c.configureComponent(e(c.components))}));null!=e.dht&&(h.push(c.configureComponent(new Roe(c.dht))),c.dht.addEventListener("peer",(function(e){c.onDiscoveryPeer(e)}))),c.peerRouting=c.components.peerRouting=c.configureComponent(new H9(c.components,jn(jn({},e.peerRouting),{},{routers:h})));var p=(null!==(s=e.contentRouters)&&void 0!==s?s:[]).map((function(e){return c.configureComponent(e(c.components))}));null!=e.dht&&p.push(c.configureComponent(new Que(c.dht))),c.contentRouting=c.components.contentRouting=c.configureComponent(new G9(c.components,{routers:p})),e.relay.enabled&&(c.components.transportManager.add(c.configureComponent(new pae(c.components,e.relay))),c.configureComponent(new jae(c.components,jn({addressSorter:e.connectionManager.addressSorter},e.relay)))),c.fetchService=c.configureComponent(new loe(c.components,jn({},e.fetch))),c.pingService=c.configureComponent(new hoe(c.components,jn({},e.ping)));var d,v=Ni(null!==(u=e.peerDiscovery)&&void 0!==u?u:[]);try{for(v.s();!(d=v.n()).done;){var y=d.value;c.configureComponent(y(c.components)).addEventListener("peer",(function(e){c.onDiscoveryPeer(e)}))}}catch(eL){v.e(eL)}finally{v.f()}return c}return Dn(r,[{key:"configureComponent",value:function(e){return B9(e)&&this.services.push(e),e}},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.started){e.next=2;break}return e.abrupt("return");case 2:return this.started=!0,vfe("libp2p is starting"),e.prev=4,e.next=7,Promise.all(this.services.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.beforeStart){e.next=3;break}return e.next=3,t.beforeStart();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.next=9,Promise.all(this.services.map((function(e){return e.start()})));case 9:return e.next=11,Promise.all(this.services.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.afterStart){e.next=3;break}return e.next=3,t.afterStart();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:vfe("libp2p has started"),e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(4),vfe.error("An error occurred starting libp2p",e.t0),e.next=19,this.stop();case 19:throw e.t0;case 20:case"end":return e.stop()}}),e,this,[[4,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.started){e.next=2;break}return e.abrupt("return");case 2:return vfe("libp2p is stopping"),this.started=!1,e.next=6,Promise.all(this.services.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.beforeStop){e.next=3;break}return e.next=3,t.beforeStop();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return e.next=8,Promise.all(this.services.map((function(e){return e.stop()})));case 8:return e.next=10,Promise.all(this.services.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.afterStop){e.next=3;break}return e.next=3,t.afterStop();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:vfe("libp2p has stopped");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.started}},{key:"getConnections",value:function(e){return this.components.connectionManager.getConnections(e)}},{key:"getPeers",value:function(){var e,t=new One,r=Ni(this.components.connectionManager.getConnections());try{for(r.s();!(e=r.n()).done;){var n=e.value;t.add(n.remotePeer)}}catch(eL){r.e(eL)}finally{r.f()}return Array.from(t)}},{key:"dial",value:function(){var e=An(En().mark((function e(t){var r,n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.components.connectionManager.openConnection(t,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dialProtocol",value:function(){var e=An(En().mark((function e(t,r){var n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>2&&void 0!==i[2]?i[2]:{},null!=r){e.next=3;break}throw ca(new Error("no protocols were provided to open a stream"),T9.ERR_INVALID_PROTOCOLS_FOR_STREAM);case 3:if(0!==(r=Array.isArray(r)?r:[r]).length){e.next=6;break}throw ca(new Error("no protocols were provided to open a stream"),T9.ERR_INVALID_PROTOCOLS_FOR_STREAM);case 6:return e.next=8,this.dial(t,n);case 8:return a=e.sent,e.next=11,a.newStream(r,n);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMultiaddrs",value:function(){return this.components.addressManager.getAddresses()}},{key:"getProtocols",value:function(){return this.components.registrar.getProtocols()}},{key:"hangUp",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kd(t)&&(t=Pte(null!==(r=t.getPeerId())&&void 0!==r?r:"")),e.next=3,this.components.connectionManager.closeConnections(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPublicKey",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:{},vfe("getPublicKey %p",t),null==t.publicKey){e.next=4;break}return e.abrupt("return",t.publicKey);case 4:return e.next=6,this.peerStore.get(t);case 6:if(null==(n=e.sent).pubKey){e.next=9;break}return e.abrupt("return",n.pubKey);case 9:if(null!=this.dht){e.next=11;break}throw ca(new Error("Public key was not in the peer store and the DHT is not enabled"),T9.ERR_NO_ROUTERS_AVAILABLE);case 11:a=ld([Bf("/pk/"),t.multihash.digest]),i=!1,o=!1,e.prev=14,u=zn(this.dht.get(a,r));case 16:return e.next=18,u.next();case 18:if(!(i=!(c=e.sent).done)){e.next=28;break}if("VALUE"!==(l=c.value).name){e.next=25;break}return f=wx(l.value),e.next=24,this.peerStore.keyBook.set(t,l.value);case 24:return e.abrupt("return",f.bytes);case 25:i=!1,e.next=16;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(14),o=!0,s=e.t0;case 34:if(e.prev=34,e.prev=35,!i||null==u.return){e.next=39;break}return e.next=39,u.return();case 39:if(e.prev=39,!o){e.next=42;break}throw s;case 42:return e.finish(39);case 43:return e.finish(34);case 44:throw ca(new Error("Node not responding with its public key: ".concat(t.toString())),T9.ERR_INVALID_RECORD);case 45:case"end":return e.stop()}}),e,this,[[14,30,34,44],[35,,39,43]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>2&&void 0!==o[2]?o[2]:{},!Kd(t)){e.next=6;break}return i=Pte(null!==(a=t.getPeerId())&&void 0!==a?a:""),e.next=5,this.components.peerStore.addressBook.add(i,[t]);case 5:t=i;case 6:return e.next=8,this.fetchService.fetch(t,r,n);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"ping",value:function(){var e=An(En().mark((function e(t){var r,n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:{},!Kd(t)){e.next=6;break}return a=Pte(null!==(n=t.getPeerId())&&void 0!==n?n:""),e.next=5,this.components.peerStore.addressBook.add(a,[t]);case 5:t=a;case 6:return e.next=8,this.pingService.ping(t,r);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handle",value:function(){var e=An(En().mark((function e(t,r,n){var a=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Array.isArray(t)||(t=[t]),e.next=3,Promise.all(t.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.components.registrar.handle(t,r,n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"unhandle",value:function(){var e=An(En().mark((function e(t){var r=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Array.isArray(t)||(t=[t]),e.next=3,Promise.all(t.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.components.registrar.unhandle(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.registrar.register(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"unregister",value:function(e){this.registrar.unregister(e)}},{key:"onDiscoveryPeer",value:function(e){var t=e.detail;t.id.toString()!==this.peerId.toString()?(t.multiaddrs.length>0&&this.components.peerStore.addressBook.add(t.id,t.multiaddrs).catch((function(e){return vfe.error(e)})),t.protocols.length>0&&this.components.peerStore.protoBook.set(t.id,t.protocols).catch((function(e){return vfe.error(e)})),this.dispatchEvent(new fZ("peer:discovery",{detail:t}))):vfe.error(new Error(T9.ERR_DISCOVERED_SELF))}}]),r}(cZ);function bfe(e){return gfe.apply(this,arguments)}function gfe(){return(gfe=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.peerId){e.next=14;break}if(null==(r=t.datastore)){e.next=14;break}return e.prev=3,a=new lie({datastore:r},jn(jn({},lie.generateOptions()),null!==(n=t.keychain)&&void 0!==n?n:{})),e.next=7,a.exportPeerId("self");case 7:t.peerId=e.sent,e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(3),"ERR_NOT_FOUND"===e.t0.code){e.next=14;break}throw e.t0;case 14:if(null!=t.peerId){e.next=18;break}return e.next=17,rfe();case 17:t.peerId=e.sent;case 18:return e.abrupt("return",new yfe(fce(t)));case 19:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function mfe(){return(mfe=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bfe(t);case 2:if(r=e.sent,!1===t.start){e.next=6;break}return e.next=6,r.start();case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wfe=__webpack_require__(7864),kfe=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),xfe=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=_fe;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},_fe=Math.pow(2,31);var Efe=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var Sfe=Math.pow(2,7),Afe=Math.pow(2,14),Cfe=Math.pow(2,21),Ife=Math.pow(2,28),Tfe=Math.pow(2,35),Dfe=Math.pow(2,42),Rfe=Math.pow(2,49),Pfe=Math.pow(2,56),Nfe=Math.pow(2,63),Lfe={encode:xfe,decode:Efe,encodingLength:function(e){return e<Sfe?1:e<Afe?2:e<Cfe?3:e<Ife?4:e<Tfe?5:e<Dfe?6:e<Rfe?7:e<Pfe?8:e<Nfe?9:10}},Ofe=Lfe,Bfe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Ofe.decode(e,t);return[r,Ofe.decode.bytes]},Ufe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ofe.encode(e,t,r),t},Mfe=function(e){return Ofe.encodingLength(e)},zfe=function(e,t){var r=t.byteLength,n=Mfe(e),a=n+Mfe(r),i=new Uint8Array(a+r);return Ufe(e,i,0),Ufe(r,i,n),i.set(t,a),new Vfe(e,r,t,i)},Ffe=function(e){var t=kfe(e),r=Ia(Bfe(t),2),n=r[0],a=r[1],i=Ia(Bfe(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new Vfe(n,o,u,t)},Vfe=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),jfe=function(e){var t=e.name,r=e.code,n=e.encode;return new qfe(t,r,n)},qfe=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?zfe(this.code,r):r.then((function(e){return zfe(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),Kfe=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Hfe=jfe({name:"sha2-256",code:18,encode:Kfe("SHA-256")}),Gfe=jfe({name:"sha2-512",code:19,encode:Kfe("SHA-512")});var Wfe=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Yfe=Wfe,Qfe=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),Jfe=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Xfe(this,e)}}]),e}(),Zfe=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return Xfe(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Xfe=function(e,t){return new Zfe(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},$fe=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Qfe(t,r,n),this.decoder=new Jfe(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),ehe=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new $fe(t,r,n,a)},the=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Yfe(n,r),i=a.encode,o=a.decode;return ehe({prefix:t,name:r,encode:i,decode:function(e){return kfe(o(e))}})},rhe=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return ehe({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},nhe=the({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ahe=the({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ihe=rhe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ohe=rhe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),she=rhe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),uhe=rhe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),che=rhe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),lhe=rhe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),fhe=rhe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hhe=rhe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),phe=rhe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),dhe=function(e,t){var r=e.bytes;return 0===e.version?mhe(r,yhe(e),t||nhe.encoder):whe(r,yhe(e),t||ihe.encoder)},vhe=new WeakMap,yhe=function(e){var t=vhe.get(e);if(null==t){var r=new Map;return vhe.set(e,r),r}return t},bhe=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==khe)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==xhe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=zfe(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return dhe(this,e)}},{key:"toJSON",value:function(){return{"/":dhe(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||_he(n,a,i.bytes))}if(!0===t[Ehe]){var o=t.version,s=t.multihash,u=t.code,c=Ffe(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==khe)throw new Error("Version 0 CID must use dag-pb (code: ".concat(khe,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,_he(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,khe,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=kfe(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new Vfe(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(Bfe(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=khe;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(ghe(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return yhe(o).set(a,e),o}}]),r}(),ghe=function(e,t){switch(e[0]){case"Q":var r=t||nhe;return[nhe.prefix,r.decode("".concat(nhe.prefix).concat(e))];case nhe.prefix:var n=t||nhe;return[nhe.prefix,n.decode(e)];case ihe.prefix:var a=t||ihe;return[ihe.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},mhe=function(e,t,r){var n=r.prefix;if(n!==nhe.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},whe=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},khe=112,xhe=18,_he=function(e,t,r){var n=Mfe(e),a=n+Mfe(t),i=new Uint8Array(a+r.byteLength);return Ufe(e,i,0),Ufe(t,i,n),i.set(r,a),i},Ehe=Symbol.for("@ipld/js-cid/CID"),She=ehe({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),Ahe=rhe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Che=rhe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Ihe=the({prefix:"9",name:"base10",alphabet:"0123456789"}),The=rhe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Dhe=rhe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Rhe=the({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Phe=the({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Nhe=rhe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Lhe=rhe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ohe=rhe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Bhe=rhe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Uhe=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Mhe=Uhe.reduce((function(e,t,r){return e[r]=t,e}),[]),zhe=Uhe.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var Fhe=ehe({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=Mhe[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=zhe[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),Vhe=kfe,jhe={code:0,name:"identity",encode:Vhe,digest:function(e){return zfe(0,Vhe(e))}},qhe="raw",Khe=85,Hhe=function(e){return kfe(e)},Ghe=function(e){return kfe(e)},Whe=new TextEncoder,Yhe=new TextDecoder,Qhe="json",Jhe=512,Zhe=function(e){return Whe.encode(JSON.stringify(e))},Xhe=function(e){return JSON.parse(Yhe.decode(e))},$he=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},Lr),Or),Br),Ur),Mr),Nr),zr),Pr),Fr),Vr),epe=(jn(jn({},Rr),jr),Symbol.for("nodejs.util.inspect.custom")),tpe=Object.values($he).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),$he.identity.decoder),rpe=function(e){function t(e){Cn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:fb,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=nhe.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return bhe.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return Pd(this.multihash.bytes,e);if("string"===typeof e)return ope(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Pd(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:epe,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),npe=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Dn(r)}(rpe),ape=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Dn(r)}(rpe),ipe=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Dn(r)}(rpe);function ope(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:tpe,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=Ffe(nhe.decode("z".concat(e)));return e.startsWith("12D")?new ape({multihash:n}):e.startsWith("16U")?new ipe({multihash:n}):new npe({multihash:n})}return spe(tpe.decode(e))}function spe(e){try{var t=Ffe(e);if(t.code===jhe.code){if(36===t.digest.length)return new ape({multihash:t});if(37===t.digest.length)return new ipe({multihash:t})}if(t.code===Hfe.code)return new npe({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===Hfe.code)return new npe({multihash:e.multihash});if(t.code===jhe.code){if(36===t.digest.length)return new ape({multihash:e.multihash});if(37===t.digest.length)return new ipe({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(bhe.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function upe(e,t){return cpe.apply(this,arguments)}function cpe(){return(cpe=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(36!==t.length){e.next=2;break}return e.abrupt("return",new ape({multihash:zfe(jhe.code,t),privateKey:r}));case 2:if(37!==t.length){e.next=4;break}return e.abrupt("return",new ipe({multihash:zfe(jhe.code,t),privateKey:r}));case 4:return e.t0=npe,e.next=7,Hfe.digest(t);case 7:return e.t1=e.sent,e.t2=t,e.t3=r,e.t4={multihash:e.t1,publicKey:e.t2,privateKey:e.t3},e.abrupt("return",new e.t0(e.t4));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lpe=36e5,fpe="/dht/provider",hpe=864e5,ppe=lpe,dpe=Number(3e5),vpe=Number(3e4),ype=Number(3e5),bpe=Number(3e4),gpe=Number(3e4),mpe=Bf("/pk/");function wpe(e){return jn(jn({},e),{},{multiaddrs:e.multiaddrs.filter((function(e){var t=Ia(e.stringTuples(),1),r=Ia(t[0],2),n=r[0],a=r[1];if(53===n||54===n||55===n)return"localhost"!==a;if(4!==n&&6!==n)return!1;if(null==a)return!1;var i=Oae(a);return null==i||!i}))})}function kpe(e){return jn(jn({},e),{},{multiaddrs:e.multiaddrs.filter((function(e){var t=Ia(e.stringTuples(),1),r=Ia(t[0],2),n=r[0],a=r[1];if("localhost"===a)return!0;if(4!==n&&6!==n)return!1;if(null==a)return!1;var i=Oae(a);return null!=i&&i}))})}function xpe(e){return _pe.apply(this,arguments)}function _pe(){return _pe=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hfe.digest(t);case 2:return r=e.sent,e.abrupt("return",r.digest);case 4:case"end":return e.stop()}}),e)}))),_pe.apply(this,arguments)}function Epe(e){return Spe.apply(this,arguments)}function Spe(){return(Spe=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xpe(t.toBytes());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ape(e){return new Hv("".concat("/dht/record","/").concat(kh(e,"base32")),!1)}function Cpe(e){return ld([mpe,e.toBytes()])}function Ipe(e){return"/pk/"===kh(e.subarray(0,4))}function Tpe(e){return spe(e.subarray(4))}function Dpe(e,t){var r=new Date;return new FS(e,t,r).serialize()}var Rpe=function(){function e(t,r){var n=this;Cn(this,e);var a=r.kBucketSize,i=r.pingTimeout,o=r.lan,s=r.pingConcurrency,u=r.protocol,c=r.tagName,l=r.tagValue;this.components=t,this.log=ua("libp2p:kad-dht:".concat(o?"lan":"wan",":routing-table")),this.kBucketSize=null!==a&&void 0!==a?a:20,this.pingTimeout=null!==i&&void 0!==i?i:1e4,this.pingConcurrency=null!==s&&void 0!==s?s:10,this.lan=o,this.running=!1,this.protocol=u,this.tagName=null!==c&&void 0!==c?c:"kad-close",this.tagValue=null!==l&&void 0!==l?l:50;var f=function(){var e,t;null===(e=n.metrics)||void 0===e||e.pingQueueSize.update(n.pingQueue.size),null===(t=n.metrics)||void 0===t||t.pingRunning.update(n.pingQueue.pending)};this.pingQueue=new $y({concurrency:this.pingConcurrency}),this.pingQueue.addListener("add",f),this.pingQueue.addListener("next",f),this._onPing=this._onPing.bind(this)}return Dn(e,[{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.running=!0,null!=this.components.metrics&&(this.metrics={routingTableSize:this.components.metrics.registerMetric("libp2p_kad_dht_".concat(this.lan?"lan":"wan","_routing_table_size")),pingQueueSize:this.components.metrics.registerMetric("libp2p_kad_dht_".concat(this.lan?"lan":"wan","_ping_queue_size")),pingRunning:this.components.metrics.registerMetric("libp2p_kad_dht_".concat(this.lan?"lan":"wan","_ping_running"))}),e.t0=wfe,e.next=5,Epe(this.components.peerId);case 5:e.t1=e.sent,e.t2=this.kBucketSize,e.t3={localNodeId:e.t1,numberOfNodesPerKBucket:e.t2,numberOfNodesToPing:1},t=new e.t0(e.t3),this.kb=t,t.on("ping",this._onPing),this._tagPeers(t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!1,this.pingQueue.clear(),this.kb=void 0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_tagPeers",value:function(e){var t=this,r=new One,n=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return function(){clearTimeout(t),t=setTimeout((function(){return e()}),r)}}((function(){var n=new One(e.closest(e.localNodeId,20).map((function(e){return e.peer}))),a=n.difference(r),i=r.difference(n);Promise.resolve().then(An(En().mark((function e(){var r,n,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Ni(a),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=9;break}return o=n.value,e.next=7,t.components.peerStore.tagPeer(o,t.tagName,{value:t.tagValue});case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:s=Ni(i),e.prev=18,s.s();case 20:if((u=s.n()).done){e.next=26;break}return c=u.value,e.next=24,t.components.peerStore.unTagPeer(c,t.tagName);case 24:e.next=20;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(18),s.e(e.t1);case 31:return e.prev=31,s.f(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[1,11,14,17],[18,28,31,34]])})))).catch((function(e){t.log.error("Could not update peer tags",e)})),r=n}));e.on("added",(function(){n()})),e.on("removed",(function(){n()}))}},{key:"_onPing",value:function(e,t){var r=this;this.pingQueue.add(An(En().mark((function n(){var a;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.running){n.next=2;break}return n.abrupt("return");case 2:return a=0,n.prev=3,n.next=6,Promise.all(e.map(function(){var e=An(En().mark((function e(t){var n,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new Uf.TimeoutController(r.pingTimeout),i={signal:n.signal},r.log("pinging old contact %p",t.peer),e.next=6,r.components.connectionManager.openConnection(t.peer,i);case 6:return o=e.sent,e.next=9,o.newStream(r.protocol,i);case 9:e.sent.close(),a++,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r.running&&null!=r.kb&&(r.log.error("could not ping peer %p",t.peer,e.t0),r.log("evicting old contact after ping failed %p",t),r.kb.remove(t.id));case 17:return e.prev=17,null!=n&&n.clear(),null===(s=r.metrics)||void 0===s||s.routingTableSize.update(r.size),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[0,14,17,21]])})));return function(t){return e.apply(this,arguments)}}()));case 6:r.running&&a<e.length&&null!=r.kb&&(r.log("adding new contact %p",t.peer),r.kb.add(t)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),r.log.error("could not process k-bucket ping event",n.t0);case 12:case"end":return n.stop()}}),n,null,[[3,9]])})))).catch((function(e){r.log.error("could not process k-bucket ping event",e)}))}},{key:"size",get:function(){return null==this.kb?0:this.kb.count()}},{key:"find",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Epe(t);case 2:if(r=e.sent,null==(n=this.closestPeer(r))||!t.equals(n)){e.next=6;break}return e.abrupt("return",n);case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"closestPeer",value:function(e){var t=this.closestPeers(e,1);if(t.length>0)return t[0]}},{key:"closestPeers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.kBucketSize;if(null==this.kb)return[];var r=this.kb.closest(e,t);return r.map((function(e){return e.peer}))}},{key:"add",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.kb){e.next=2;break}throw new Error("RoutingTable is not started");case 2:return e.next=4,Epe(t);case 4:n=e.sent,this.kb.add({id:n,peer:t}),this.log("added %p with kad id %b",t,n),null===(r=this.metrics)||void 0===r||r.routingTableSize.update(this.size);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.kb){e.next=2;break}throw new Error("RoutingTable is not started");case 2:return e.next=4,Epe(t);case 4:n=e.sent,this.kb.remove(n),null===(r=this.metrics)||void 0===r||r.routingTableSize.update(this.size);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ppe(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");for(var r=Rf(e.length),n=0;n<e.length;n++)r[n]=e[n]^t[n];return Tf(r)}var Npe,Lpe,Ope=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782],Bpe=function(){function e(t){Cn(this,e);var r=t.peerRouting,n=t.routingTable,a=t.refreshInterval,i=t.refreshQueryTimeout,o=t.lan;this.log=ua("libp2p:kad-dht:".concat(o?"lan":"wan",":routing-table:refresh")),this.peerRouting=r,this.routingTable=n,this.refreshInterval=null!==a&&void 0!==a?a:ype,this.refreshQueryTimeout=null!==i&&void 0!==i?i:bpe,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}return Dn(e,[{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.log("refreshing routing table every ".concat(this.refreshInterval,"ms")),this.refreshTable(!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=this.refreshTimeoutId&&clearTimeout(this.refreshTimeoutId);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshTable",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.log("refreshing routing table");var r=this._maxCommonPrefix(),n=this._getTrackedCommonPrefixLengthsForRefresh(r);this.log("max common prefix length ".concat(r)),this.log("tracked CPLs [ ".concat(n.map((function(e){return e.toISOString()})).join(", ")," ]")),Promise.all(n.map(function(){var a=An(En().mark((function a(i,o){var s,u;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e._refreshCommonPrefixLength(o,i,t);case 3:if(0!==e._numPeersForCpl(r)){a.next=18;break}s=Math.min(2*(o+1),n.length-1),u=o+1;case 6:if(!(u<s+1)){a.next=18;break}return a.prev=7,a.next=10,e._refreshCommonPrefixLength(u,i,t);case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(7),e.log.error(a.t0);case 15:u++,a.next=6;break;case 18:a.next=23;break;case 20:a.prev=20,a.t1=a.catch(0),e.log.error(a.t1);case 23:case"end":return a.stop()}}),a,null,[[0,20],[7,12]])})));return function(e,t){return a.apply(this,arguments)}}())).catch((function(t){e.log.error(t)})).then((function(){e.refreshTimeoutId=setTimeout(e.refreshTable,e.refreshInterval),null!=e.refreshTimeoutId.unref&&e.refreshTimeoutId.unref()})).catch((function(t){e.log.error(t)}))}},{key:"_refreshCommonPrefixLength",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n||!(r.getTime()>Date.now()-this.refreshInterval)){e.next=3;break}return this.log("not running refresh for cpl %s as time since last refresh not above interval",t),e.abrupt("return");case 3:return e.next=5,this._generateRandomPeerId(t);case 5:return a=e.sent,this.log("starting refreshing cpl %s with key %p (routing table size was %s)",t,a,this.routingTable.size),i=new Uf.TimeoutController(this.refreshQueryTimeout),e.prev=8,e.next=11,TV(this.peerRouting.getClosestPeers(a.toBytes(),{signal:i.signal}));case 11:o=e.sent,this.log("found ".concat(o," peers that were close to imaginary peer %p"),a),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",t,a,this.routingTable.size);case 14:return e.prev=14,i.clear(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[8,,14,17]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_getTrackedCommonPrefixLengthsForRefresh",value:function(e){e>15&&(e=15);for(var t=[],r=0;r<=e;r++){var n;t[r]=null!==(n=this.commonPrefixLengthRefreshedAt[r])&&void 0!==n?n:new Date}return t}},{key:"_generateRandomPeerId",value:function(){var e=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.routingTable.kb){e.next=2;break}throw new Error("Routing table not started");case 2:return r=iw(2),n=(r[1]<<8)+r[0],e.next=6,this._makePeerId(this.routingTable.kb.localNodeId,n,t);case 6:return a=e.sent,e.abrupt("return",spe(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_makePeerId",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>15)){e.next=2;break}throw new Error("Cannot generate peer ID for common prefix length greater than ".concat(15));case 2:return a=new DataView(t.buffer,t.byteOffset,t.byteLength),i=a.getUint16(0,!1),s=Ope[(i^32768>>n)&(o=65535<<16-(n+1))|r&~o],u=new ArrayBuffer(34),(c=new DataView(u,0,u.byteLength)).setUint8(0,Hfe.code),c.setUint8(1,32),c.setUint32(2,s,!1),e.abrupt("return",new Uint8Array(c.buffer,c.byteOffset,c.byteLength));case 14:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_maxCommonPrefix",value:function(){var e,t=0,r=Ni(this._prefixLengths());try{for(r.s();!(e=r.n()).done;){var n=e.value;n>t&&(t=n)}}catch(eL){r.e(eL)}finally{r.f()}return t}},{key:"_numPeersForCpl",value:function(e){var t,r=0,n=Ni(this._prefixLengths());try{for(n.s();!(t=n.n()).done;){t.value===e&&r++}}catch(eL){n.e(eL)}finally{n.f()}return r}},{key:"_prefixLengths",value:En().mark((function e(){var t,r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.routingTable.kb){e.next=2;break}return e.abrupt("return");case 2:t=Ni(this.routingTable.kb.toIterable()),e.prev=3,t.s();case 5:if((r=t.n()).done){e.next=33;break}n=r.value.id,a=Ppe(this.routingTable.kb.localNodeId,n),i=0,o=Ni(a),e.prev=10,o.s();case 12:if((s=o.n()).done){e.next=21;break}if(0!==s.value){e.next=18;break}i++,e.next=19;break;case 18:return e.abrupt("break",21);case 19:e.next=12;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:return e.next=31,i;case 31:e.next=5;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(3),t.e(e.t1);case 38:return e.prev=38,t.f(),e.finish(38);case 41:case"end":return e.stop()}}),e,this,[[3,35,38,41],[10,23,26,29]])}))}]),e}();!function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.key&&(t.uint32(10),t.bytes(e.key)),null!=e.value&&(t.uint32(18),t.bytes(e.value)),null!=e.author&&(t.uint32(26),t.bytes(e.author)),null!=e.signature&&(t.uint32(34),t.bytes(e.signature)),null!=e.timeReceived&&(t.uint32(42),t.string(e.timeReceived)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.key=e.bytes();break;case 2:r.value=e.bytes();break;case 3:r.author=e.bytes();break;case 4:r.signature=e.bytes();break;case 5:r.timeReceived=e.string();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(Npe||(Npe={})),function(e){var t,r,n;!function(e){e.PUT_VALUE="PUT_VALUE",e.GET_VALUE="GET_VALUE",e.ADD_PROVIDER="ADD_PROVIDER",e.GET_PROVIDERS="GET_PROVIDERS",e.FIND_NODE="FIND_NODE",e.PING="PING"}(e.MessageType||(e.MessageType={})),function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"}(t||(t={})),function(e){e.codec=function(){return ng(t)}}(e.MessageType||(e.MessageType={})),function(e){e.NOT_CONNECTED="NOT_CONNECTED",e.CONNECTED="CONNECTED",e.CAN_CONNECT="CAN_CONNECT",e.CANNOT_CONNECT="CANNOT_CONNECT"}(e.ConnectionType||(e.ConnectionType={})),function(e){e[e.NOT_CONNECTED=0]="NOT_CONNECTED",e[e.CONNECTED=1]="CONNECTED",e[e.CAN_CONNECT=2]="CAN_CONNECT",e[e.CANNOT_CONNECT=3]="CANNOT_CONNECT"}(r||(r={})),function(e){e.codec=function(){return ng(r)}}(e.ConnectionType||(e.ConnectionType={})),function(t){var r;t.codec=function(){return null==r&&(r=ag((function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==n.lengthDelimited&&r.fork(),null!=t.id&&(r.uint32(10),r.bytes(t.id)),null==t.addrs)throw new Error('Protocol error: required field "addrs" was not found in object');var a,i=Ni(t.addrs);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.uint32(18),r.bytes(o)}}catch(eL){i.e(eL)}finally{i.f()}null!=t.connection&&(r.uint32(24),e.ConnectionType.codec().encode(t.connection,r)),!1!==n.lengthDelimited&&r.ldelim()}),(function(t,r){for(var n={addrs:[]},a=null==r?t.len:t.pos+r;t.pos<a;){var i=t.uint32();switch(i>>>3){case 1:n.id=t.bytes();break;case 2:n.addrs.push(t.bytes());break;case 3:n.connection=e.ConnectionType.codec().decode(t);break;default:t.skipType(7&i)}}return n}))),r},t.encode=function(e){return tg(e,t.codec())},t.decode=function(e){return eg(e,t.codec())}}(e.Peer||(e.Peer={})),e.codec=function(){return null==n&&(n=ag((function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==n.lengthDelimited&&r.fork(),null!=t.type&&(r.uint32(8),e.MessageType.codec().encode(t.type,r)),null!=t.clusterLevelRaw&&(r.uint32(80),r.int32(t.clusterLevelRaw)),null!=t.key&&(r.uint32(18),r.bytes(t.key)),null!=t.record&&(r.uint32(26),r.bytes(t.record)),null==t.closerPeers)throw new Error('Protocol error: required field "closerPeers" was not found in object');var a,i=Ni(t.closerPeers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.uint32(66),e.Peer.codec().encode(o,r)}}catch(eL){i.e(eL)}finally{i.f()}if(null==t.providerPeers)throw new Error('Protocol error: required field "providerPeers" was not found in object');var s,u=Ni(t.providerPeers);try{for(u.s();!(s=u.n()).done;){var c=s.value;r.uint32(74),e.Peer.codec().encode(c,r)}}catch(eL){u.e(eL)}finally{u.f()}!1!==n.lengthDelimited&&r.ldelim()}),(function(t,r){for(var n={closerPeers:[],providerPeers:[]},a=null==r?t.len:t.pos+r;t.pos<a;){var i=t.uint32();switch(i>>>3){case 1:n.type=e.MessageType.codec().decode(t);break;case 10:n.clusterLevelRaw=t.int32();break;case 2:n.key=t.bytes();break;case 3:n.record=t.bytes();break;case 8:n.closerPeers.push(e.Peer.codec().decode(t,t.uint32()));break;case 9:n.providerPeers.push(e.Peer.codec().decode(t,t.uint32()));break;default:t.skipType(7&i)}}return n}))),n},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(Lpe||(Lpe={}));var Upe=Lpe.MessageType,Mpe=Lpe.ConnectionType,zpe=Object.keys(Upe),Fpe=function(){function e(t,r,n){if(Cn(this,e),!(r instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=t,this.key=r,this.clusterLevelRaw=n,this.closerPeers=[],this.providerPeers=[],this.record=void 0}return Dn(e,[{key:"clusterLevel",get:function(){var e=this.clusterLevelRaw-1;return e<0?0:e},set:function(e){this.clusterLevelRaw=e}},{key:"serialize",value:function(){return Lpe.encode({key:this.key,type:this.type,clusterLevelRaw:this.clusterLevelRaw,closerPeers:this.closerPeers.map(Vpe),providerPeers:this.providerPeers.map(Vpe),record:null==this.record?void 0:this.record.serialize().subarray()})}}],[{key:"deserialize",value:function(t){var r,n,a,i,o=Lpe.decode(t),s=new e(null!==(r=o.type)&&void 0!==r?r:Lpe.MessageType.PUT_VALUE,null!==(n=o.key)&&void 0!==n?n:Uint8Array.from([]),null!==(a=o.clusterLevelRaw)&&void 0!==a?a:0);return s.closerPeers=o.closerPeers.map(jpe),s.providerPeers=o.providerPeers.map(jpe),null!=(null===(i=o.record)||void 0===i?void 0:i.length)&&(s.record=FS.deserialize(o.record)),s}}]),e}();function Vpe(e){var t;return{id:e.id.toBytes(),addrs:(null!==(t=e.multiaddrs)&&void 0!==t?t:[]).map((function(e){return e.bytes})),connection:Mpe.CONNECTED}}function jpe(e){var t;if(null==e.id)throw new Error("Invalid peer in message");return{id:spe(e.id),multiaddrs:(null!==(t=e.addrs)&&void 0!==t?t:[]).map((function(e){return Gd(e)})),protocols:[]}}function qpe(e){return jn(jn({},e),{},{name:"SENDING_QUERY",type:0,messageName:e.type,messageType:zpe.indexOf(e.type.toString())})}function Kpe(e){return jn(jn({},e),{},{name:"PEER_RESPONSE",type:1,messageName:e.messageType,closer:null!=e.closer?e.closer:[],providers:null!=e.providers?e.providers:[]})}function Hpe(e){return jn(jn({},e),{},{name:"FINAL_PEER",type:2})}function Gpe(e){return jn(jn({},e),{},{name:"QUERY_ERROR",type:3})}function Wpe(e){return jn(jn({},e),{},{name:"PROVIDER",type:4})}function Ype(e){return jn(jn({},e),{},{name:"VALUE",type:5})}function Qpe(e){return jn(jn({},e),{},{name:"DIALING_PEER",type:7})}var Jpe=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a;Cn(this,r),a=t.call(this);var i=n.protocol,o=n.lan;return a.components=e,a.log=ua("libp2p:kad-dht:".concat(o?"lan":"wan",":network")),a.running=!1,a.protocol=i,a}return Dn(r,[{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.running){e.next=2;break}return e.abrupt("return");case 2:this.running=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!1;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.running}},{key:"sendRequest",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Hn(En().mark((function a(){var i,o,s;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.running){a.next=2;break}return a.abrupt("return");case 2:return r.log("sending %s to %p",t.type,e),a.next=5,Qpe({peer:e});case 5:return a.next=7,qpe({to:e,type:t.type});case 7:return a.prev=7,a.next=10,Mf(r.components.connectionManager.openConnection(e,n));case 10:return i=a.sent,a.next=13,Mf(i.newStream(r.protocol,n));case 13:return o=a.sent,a.next=16,Mf(r._writeReadMessage(o,t.serialize(),n));case 16:return s=a.sent,a.next=19,Kpe({from:e,messageType:s.type,closer:s.closerPeers,providers:s.providerPeers,record:s.record});case 19:a.next=25;break;case 21:return a.prev=21,a.t0=a.catch(7),a.next=25,Gpe({from:e,error:a.t0});case 25:return a.prev=25,a.finish(25);case 28:case"end":return a.stop()}}),a,null,[[7,21,25,28]])})))()}},{key:"sendMessage",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Hn(En().mark((function a(){var i,o;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.running){a.next=2;break}return a.abrupt("return");case 2:return r.log("sending %s to %p",t.type,e),a.next=5,Qpe({peer:e});case 5:return a.next=7,qpe({to:e,type:t.type});case 7:return a.prev=7,a.next=10,Mf(r.components.connectionManager.openConnection(e,n));case 10:return i=a.sent,a.next=13,Mf(i.newStream(r.protocol,n));case 13:return o=a.sent,a.next=16,Mf(r._writeMessage(o,t.serialize(),n));case 16:return a.next=18,Kpe({from:e,messageType:t.type});case 18:a.next=24;break;case 20:return a.prev=20,a.t0=a.catch(7),a.next=24,Gpe({from:e,error:a.t0});case 24:return a.prev=24,a.finish(24);case 27:case"end":return a.stop()}}),a,null,[[7,20,24,27]])})))()}},{key:"_writeMessage",value:function(){var e=An(En().mark((function e(t,r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=n.signal&&(t=z$(t,n.signal)),e.next=3,TS([r],V$(),t,nS);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_writeReadMessage",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=n.signal&&(t=z$(t,n.signal)),e.next=3,TS([r],V$(),t,K$(),function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LU(t);case 2:if(null==(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:throw ca(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return a=e.sent,(i=Fpe.deserialize(a)).closerPeers.forEach((function(e){o.dispatchEvent(new fZ("peer",{detail:e}))})),i.providerPeers.forEach((function(e){o.dispatchEvent(new fZ("peer",{detail:e}))})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),r}(cZ),Zpe=(new Uint8Array(0),function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Xpe;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r}),Xpe=Math.pow(2,31);var $pe=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var ede=Math.pow(2,7),tde=Math.pow(2,14),rde=Math.pow(2,21),nde=Math.pow(2,28),ade=Math.pow(2,35),ide=Math.pow(2,42),ode=Math.pow(2,49),sde=Math.pow(2,56),ude=Math.pow(2,63),cde={encode:Zpe,decode:$pe,encodingLength:function(e){return e<ede?1:e<tde?2:e<rde?3:e<nde?4:e<ade?5:e<ide?6:e<ode?7:e<sde?8:e<ude?9:10}},lde=cde,fde=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return lde.encode(e,t,r),t},hde=function(e){return lde.encodingLength(e)},pde=function(e,t){var r=t.byteLength,n=hde(e),a=n+hde(r),i=new Uint8Array(a+r);return fde(e,i,0),fde(r,i,n),i.set(t,a),new dde(e,r,t,i)},dde=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),vde=function(e){var t=e.name,r=e.code,n=e.encode;return new yde(t,r,n)},yde=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?pde(this.code,r):r.then((function(e){return pde(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),bde=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},gde=vde({name:"sha2-256",code:18,encode:bde("SHA-256")});vde({name:"sha2-512",code:19,encode:bde("SHA-512")});function mde(e,t){var r=t.key,n=kh(r).split("/");if(!(n.length<3)){var a=e[n[1].toString()];if(null==a){throw ca(new Error("Invalid record keytype"),"ERR_INVALID_RECORD_KEY_TYPE")}return a(r,t.value)}}var wde=function(){var e=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw ca(new Error('"key" must be a Uint8Array'),"ERR_INVALID_RECORD_KEY_NOT_BUFFER");case 2:if(!(t.byteLength<5)){e.next=4;break}throw ca(new Error("invalid public key record"),"ERR_INVALID_RECORD_KEY_TOO_SHORT");case 4:if("/pk/"===kh(t.subarray(0,4))){e.next=7;break}throw ca(new Error("key was not prefixed with /pk/"),"ERR_INVALID_RECORD_KEY_BAD_PREFIX");case 7:return n=t.slice(4),e.next=10,gde.digest(r);case 10:if(a=e.sent,Pd(n,a.bytes)){e.next=13;break}throw ca(new Error("public key does not match passed in key"),"ERR_INVALID_RECORD_HASH_MISMATCH");case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),kde={pk:wde};function xde(e,t,r){if(0===r.length){throw ca(new Error("No records given"),"ERR_NO_RECORDS_RECEIVED")}var n=kh(t).split("/");if(n.length<3){throw ca(new Error("Record key does not have a selector function"),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}var a=e[n[1].toString()];if(null==a){var i="Unrecognized key prefix: ".concat(n[1]);throw ca(new Error(i),"ERR_UNRECOGNIZED_KEY_PREFIX")}return 1===r.length?0:a(t,r)}var _de={pk:function(e,t){return 0}},Ede=function(){function e(t,r){Cn(this,e);var n=r.validators,a=r.selectors,i=r.peerRouting,o=r.queryManager,s=r.routingTable,u=r.network,c=r.lan;this.components=t,this.log=ua("libp2p:kad-dht:".concat(c?"lan":"wan",":content-fetching")),this.validators=n,this.selectors=a,this.peerRouting=i,this.queryManager=o,this.routingTable=s,this.network=u}return Dn(e,[{key:"putLocal",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ape(t),e.next=3,this.components.datastore.put(n,r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getLocal",value:function(){var e=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log("getLocal %b",t),r=Ape(t),this.log("fetching record for key %k",r),e.next=5,this.components.datastore.get(r);case 5:return n=e.sent,this.log("found %k in local datastore",r),a=FS.deserialize(n),e.next=10,mde(this.validators,a);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendCorrectionRecord",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Hn(En().mark((function i(){var o,s,u,c,l,f,h,p,d,v,y,b,g,m,w;return En().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n.log("sendCorrection for %b",e),i.next=3,Mf(Dpe(e,r));case 3:o=i.sent,s=Ni(t),i.prev=5,s.s();case 7:if((u=s.n()).done){i.next=63;break}if(c=u.value,l=c.value,f=c.from,!Pd(l,r)){i.next=12;break}return n.log("record was ok"),i.abrupt("continue",61);case 12:if(!n.components.peerId.equals(f)){i.next=24;break}return i.prev=13,h=Ape(e),n.log("Storing corrected record for key ".concat(h.toString())),i.next=18,Mf(n.components.datastore.put(h,o.subarray()));case 18:i.next=23;break;case 20:i.prev=20,i.t0=i.catch(13),n.log.error("Failed error correcting self",i.t0);case 23:return i.abrupt("continue",61);case 24:p=!1,(d=new Fpe(Upe.PUT_VALUE,e,0)).record=FS.deserialize(o),v=!1,y=!1,i.prev=29,g=zn(n.network.sendRequest(f,d,a));case 31:return i.next=33,Mf(g.next());case 33:if(!(v=!(m=i.sent).done)){i.next=41;break}return"PEER_RESPONSE"===(w=m.value).name&&null!=w.record&&Pd(w.record.value,FS.deserialize(o).value)&&(p=!0),i.next=38,w;case 38:v=!1,i.next=31;break;case 41:i.next=47;break;case 43:i.prev=43,i.t1=i.catch(29),y=!0,b=i.t1;case 47:if(i.prev=47,i.prev=48,!v||null==g.return){i.next=52;break}return i.next=52,Mf(g.return());case 52:if(i.prev=52,!y){i.next=55;break}throw b;case 55:return i.finish(52);case 56:return i.finish(47);case 57:if(p){i.next=60;break}return i.next=60,Gpe({from:f,error:ca(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")});case 60:n.log.error("Failed error correcting entry");case 61:i.next=7;break;case 63:i.next=68;break;case 65:i.prev=65,i.t2=i.catch(5),s.e(i.t2);case 68:return i.prev=68,s.f(),i.finish(68);case 71:case"end":return i.stop()}}),i,null,[[5,65,68,71],[13,20],[29,43,47,57],[48,,52,56]])})))()}},{key:"put",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Hn(En().mark((function a(){var i,o;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.log("put key %b value %b",e,t),a.next=3,Mf(Dpe(e,t));case 3:return i=a.sent,o=Ape(e),r.log("storing record for key ".concat(o.toString())),a.next=8,Mf(r.components.datastore.put(o,i.subarray()));case 8:return a.delegateYield(Cb(zn(TS(r.peerRouting.getClosestPeers(e,{signal:n.signal}),(function(t){return kS(t,(function(t){return An(En().mark((function a(){var o,s,u,c,l,f,h,p;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("FINAL_PEER"===t.name){a.next=2;break}return a.abrupt("return",[t]);case 2:o=[],(s=new Fpe(Upe.PUT_VALUE,e,0)).record=FS.deserialize(i),r.log("send put to %p",t.peer.id),u=!1,c=!1,a.prev=8,f=zn(r.network.sendRequest(t.peer.id,s,n));case 10:return a.next=12,f.next();case 12:if(!(u=!(h=a.sent).done)){a.next=21;break}if(p=h.value,o.push(p),"PEER_RESPONSE"===p.name){a.next=17;break}return a.abrupt("continue",18);case 17:null!=p.record&&Pd(p.record.value,FS.deserialize(i).value)||o.push(Gpe({from:t.peer.id,error:ca(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")}));case 18:u=!1,a.next=10;break;case 21:a.next=27;break;case 23:a.prev=23,a.t0=a.catch(8),c=!0,l=a.t0;case 27:if(a.prev=27,a.prev=28,!u||null==f.return){a.next=32;break}return a.next=32,f.return();case 32:if(a.prev=32,!c){a.next=35;break}throw l;case 35:return a.finish(32);case 36:return a.finish(27);case 37:return a.abrupt("return",o);case 38:case"end":return a.stop()}}),a,null,[[8,23,27,37],[28,,32,36]])})))}))}),(function(e){return EA(e,{ordered:!1,concurrency:3})}),function(){var e=Hn(En().mark((function e(t){var r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=zn(t);case 4:return e.next=6,Mf(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=12;break}return s=o.value,e.delegateYield(Cb(zn(s)),"t0",9);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),n=!0,a=e.t1;case 18:if(e.prev=18,e.prev=19,!r||null==i.return){e.next=23;break}return e.next=23,Mf(i.return());case 23:if(e.prev=23,!n){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}()))),"t0",9);case 9:case"end":return a.stop()}}),a)})))()}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f,h,p;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.log("get %b",e),a=[],i=!1,o=!1,n.prev=4,u=zn(t.getMany(e,r));case 6:return n.next=8,Mf(u.next());case 8:if(!(i=!(c=n.sent).done)){n.next=16;break}return"VALUE"===(l=c.value).name&&a.push(l),n.next=13,l;case 13:i=!1,n.next=6;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(4),o=!0,s=n.t0;case 22:if(n.prev=22,n.prev=23,!i||null==u.return){n.next=27;break}return n.next=27,Mf(u.return());case 27:if(n.prev=27,!o){n.next=30;break}throw s;case 30:return n.finish(27);case 31:return n.finish(22);case 32:if(0!==a.length){n.next=34;break}return n.abrupt("return");case 34:f=a.map((function(e){return e.value})),h=0,n.prev=36,h=xde(t.selectors,e,f),n.next=44;break;case 40:if(n.prev=40,n.t1=n.catch(36),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY"===n.t1.code){n.next=44;break}throw n.t1;case 44:if(p=f[h],t.log("GetValue %b %b",e,p),null!=p){n.next=48;break}throw ca(new Error("best value was not found"),"ERR_NOT_FOUND");case 48:return n.delegateYield(Cb(zn(t.sendCorrectionRecord(e,a,p,r))),"t2",49);case 49:return n.next=51,a[h];case 51:case"end":return n.stop()}}),n,null,[[4,18,22,32],[23,,27,31],[36,40]])})))()}},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.log("getMany values for %b",e),n.prev=1,n.next=4,Mf(t.getLocal(e));case 4:return a=n.sent,n.next=7,Ype({value:a.value,from:t.components.peerId});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),t.log("error getting local value for %b",e,n.t0);case 12:return n.next=14,Mf(xpe(e));case 14:return i=n.sent,o=t.routingTable.closestPeers(i),t.log("found %d peers in routing table",o.length),s=t,u=function(){var t=Hn((function(t){var r=t.peer,n=t.signal;return En().mark((function t(){var a,i,o,u,c,l;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=!1,i=!1,t.prev=2,u=zn(s.peerRouting.getValueOrPeers(r,e,{signal:n}));case 4:return t.next=6,Mf(u.next());case 6:if(!(a=!(c=t.sent).done)){t.next=16;break}return l=c.value,t.next=10,l;case 10:if("PEER_RESPONSE"!==l.name||null==l.record){t.next=13;break}return t.next=13,Ype({from:r,value:l.record.value});case 13:a=!1,t.next=4;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(2),i=!0,o=t.t0;case 22:if(t.prev=22,t.prev=23,!a||null==u.return){t.next=27;break}return t.next=27,Mf(u.return());case 27:if(t.prev=27,!i){t.next=30;break}throw o;case 30:return t.finish(27);case 31:return t.finish(22);case 32:case"end":return t.stop()}}),t,null,[[2,18,22,32],[23,,27,31]])}))()}));return function(e){return t.apply(this,arguments)}}(),n.delegateYield(Cb(zn(t.queryManager.run(e,o,u,r))),"t1",20);case 20:case"end":return n.stop()}}),n,null,[[1,9]])})))()}}]),e}(),Sde=function(){function e(t,r){Cn(this,e);var n=r.network,a=r.peerRouting,i=r.queryManager,o=r.routingTable,s=r.providers,u=r.lan;this.components=t,this.log=ua("libp2p:kad-dht:".concat(u?"lan":"wan",":content-routing")),this.network=n,this.peerRouting=a,this.queryManager=i,this.routingTable=o,this.providers=s}return Dn(e,[{key:"provide",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Hn(En().mark((function a(){var i,o,s;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.log("provide %s",e),a.next=3,Mf(r.providers.addProvider(e,r.components.peerId));case 3:return(i=new Fpe(Upe.ADD_PROVIDER,e.multihash.bytes,0)).providerPeers=[{id:r.components.peerId,multiaddrs:t,protocols:[]}],o=0,s=function(t){return An(En().mark((function a(){var s,u,c,l,f,h,p;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("FINAL_PEER"===t.name){a.next=2;break}return a.abrupt("return",[t]);case 2:s=[],r.log("putProvider %s to %p",e,t.peer.id),a.prev=4,r.log("sending provider record for %s to %p",e,t.peer.id),u=!1,c=!1,a.prev=8,f=zn(r.network.sendMessage(t.peer.id,i,n));case 10:return a.next=12,f.next();case 12:if(!(u=!(h=a.sent).done)){a.next=19;break}"PEER_RESPONSE"===(p=h.value).name&&(r.log("sent provider record for %s to %p",e,t.peer.id),o++),s.push(p);case 16:u=!1,a.next=10;break;case 19:a.next=25;break;case 21:a.prev=21,a.t0=a.catch(8),c=!0,l=a.t0;case 25:if(a.prev=25,a.prev=26,!u||null==f.return){a.next=30;break}return a.next=30,f.return();case 30:if(a.prev=30,!c){a.next=33;break}throw l;case 33:return a.finish(30);case 34:return a.finish(25);case 35:a.next=41;break;case 37:a.prev=37,a.t1=a.catch(4),r.log.error("error sending provide record to peer %p",t.peer.id,a.t1),s.push(Gpe({from:t.peer.id,error:a.t1}));case 41:return a.abrupt("return",s);case 42:case"end":return a.stop()}}),a,null,[[4,37],[8,21,25,35],[26,,30,34]])})))},a.delegateYield(Cb(zn(TS(r.peerRouting.getClosestPeers(e.multihash.bytes,n),(function(e){return kS(e,(function(e){return s(e)}))}),(function(e){return EA(e,{ordered:!1,concurrency:3})}),function(){var e=Hn(En().mark((function e(t){var r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=zn(t);case 4:return e.next=6,Mf(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=12;break}return s=o.value,e.delegateYield(Cb(zn(s)),"t0",9);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),n=!0,a=e.t1;case 18:if(e.prev=18,e.prev=19,!r||null==i.return){e.next=23;break}return e.next=23,Mf(i.return());case 23:if(e.prev=23,!n){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}()))),"t0",8);case 8:r.log("sent provider records to %d peers",o);case 9:case"end":return a.stop()}}),a)})))()}},{key:"findProviders",value:function(e,t){var r=this;return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r.routingTable.kBucketSize,i=e.multihash.bytes,n.next=4,Mf(xpe(i));case 4:return o=n.sent,s=r,r.log("findProviders %c",e),n.next=9,Mf(r.providers.getProviders(e));case 9:if(!((u=n.sent).length>0)){n.next=48;break}c=[],l=Ni(u.slice(0,a)),n.prev=13,l.s();case 15:if((f=l.n()).done){n.next=36;break}return p=f.value,n.t0=c,n.t1=p,n.next=21,Mf(r.components.peerStore.addressBook.get(p));case 21:if(n.t3=h=n.sent,n.t2=null!==n.t3,!n.t2){n.next=25;break}n.t2=void 0!==h;case 25:if(!n.t2){n.next=29;break}n.t4=h,n.next=30;break;case 29:n.t4=[];case 30:n.t5=n.t4.map((function(e){return e.multiaddr})),n.t6=[],n.t7={id:n.t1,multiaddrs:n.t5,protocols:n.t6},n.t0.push.call(n.t0,n.t7);case 34:n.next=15;break;case 36:n.next=41;break;case 38:n.prev=38,n.t8=n.catch(13),l.e(n.t8);case 41:return n.prev=41,l.f(),n.finish(41);case 44:return n.next=46,Kpe({from:r.components.peerId,messageType:Upe.GET_PROVIDERS,providers:c});case 46:return n.next=48,Wpe({from:r.components.peerId,providers:c});case 48:if(!(u.length>=a)){n.next=50;break}return n.abrupt("return");case 50:d=function(){var e=Hn((function(e){var t=e.peer,r=e.signal;return En().mark((function e(){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Fpe(Upe.GET_PROVIDERS,i,0),e.delegateYield(Cb(zn(s.network.sendRequest(t,n,{signal:r}))),"t0",2);case 2:case"end":return e.stop()}}),e)}))()}));return function(t){return e.apply(this,arguments)}}(),v=new Set(u.map((function(e){return e.toString()}))),y=!1,b=!1,n.prev=54,m=zn(r.queryManager.run(i,r.routingTable.closestPeers(o),d,t));case 56:return n.next=58,Mf(m.next());case 58:if(!(y=!(w=n.sent).done)){n.next=92;break}return k=w.value,n.next=62,k;case 62:if("PEER_RESPONSE"!==k.name){n.next=89;break}r.log("Found %d provider entries for %c and %d closer peers",k.providers.length,e,k.closer.length),x=[],_=Ni(k.providers),n.prev=66,_.s();case 68:if((E=_.n()).done){n.next=76;break}if(S=E.value,!v.has(S.id.toString())){n.next=72;break}return n.abrupt("continue",74);case 72:v.add(S.id.toString()),x.push(S);case 74:n.next=68;break;case 76:n.next=81;break;case 78:n.prev=78,n.t9=n.catch(66),_.e(n.t9);case 81:return n.prev=81,_.f(),n.finish(81);case 84:if(!(x.length>0)){n.next=87;break}return n.next=87,Wpe({from:k.from,providers:x});case 87:if(v.size!==a){n.next=89;break}return n.abrupt("return");case 89:y=!1,n.next=56;break;case 92:n.next=98;break;case 94:n.prev=94,n.t10=n.catch(54),b=!0,g=n.t10;case 98:if(n.prev=98,n.prev=99,!y||null==m.return){n.next=103;break}return n.next=103,Mf(m.return());case 103:if(n.prev=103,!b){n.next=106;break}throw g;case 106:return n.finish(103);case 107:return n.finish(98);case 108:case"end":return n.stop()}}),n,null,[[13,38,41,44],[54,94,98,108],[66,78,81,84],[99,,103,107]])})))()}}]),e}(),Ade=function(){function e(t,r){Cn(this,e),this.originDhtKey=t,this.capacity=r,this.peerDistances=[]}return Dn(e,[{key:"length",get:function(){return this.peerDistances.length}},{key:"peers",get:function(){return this.peerDistances.map((function(e){return e.peerId}))}},{key:"add",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.peerDistances.find((function(e){return e.peerId.equals(t)}))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Epe(t);case 4:r=e.sent,n={peerId:t,distance:Ppe(this.originDhtKey,r)},this.peerDistances.push(n),this.peerDistances.sort((function(e,t){return bj(e.distance,t.distance)})),this.peerDistances=this.peerDistances.slice(0,this.capacity);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"anyCloser",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:if(0!==this.length){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,Promise.all(t.map(Epe));case 6:r=e.sent,n=this.peerDistances[this.peerDistances.length-1].distance,a=Ni(r),e.prev=9,a.s();case 11:if((i=a.n()).done){e.next=18;break}if(o=i.value,!(bj(Ppe(this.originDhtKey,o),n)<0)){e.next=16;break}return e.abrupt("return",!0);case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),a.e(e.t0);case 23:return e.prev=23,a.f(),e.finish(23);case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e,this,[[9,20,23,26]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Cde=function(){function e(t,r){Cn(this,e);var n=r.routingTable,a=r.network,i=r.validators,o=r.queryManager,s=r.lan;this.components=t,this.routingTable=n,this.network=a,this.validators=i,this.queryManager=o,this.log=ua("libp2p:kad-dht:".concat(s?"lan":"wan",":peer-routing"))}return Dn(e,[{key:"findPeerLocal",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.routingTable.find(t);case 2:if(null==(n=e.sent)){e.next=15;break}return this.log("findPeerLocal found %p in routing table",t),e.prev=5,e.next=8,this.components.peerStore.get(n);case 8:r=e.sent,e.next=15;break;case 11:if(e.prev=11,e.t0=e.catch(5),"ERR_NOT_FOUND"===e.t0.code){e.next=15;break}throw e.t0;case 15:if(null!=r){e.next=26;break}return e.prev=16,e.next=19,this.components.peerStore.get(t);case 19:r=e.sent,e.next=26;break;case 22:if(e.prev=22,e.t1=e.catch(16),"ERR_NOT_FOUND"===e.t1.code){e.next=26;break}throw e.t1;case 26:if(null==r){e.next=29;break}return this.log("findPeerLocal found %p in peer store",t),e.abrupt("return",{id:r.id,multiaddrs:r.addresses.map((function(e){return e.multiaddr})),protocols:[]});case 29:return e.abrupt("return",void 0);case 30:case"end":return e.stop()}}),e,this,[[5,11],[16,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getValueSingle",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Hn(En().mark((function a(){var i;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=new Fpe(Upe.GET_VALUE,t,0),a.delegateYield(Cb(zn(r.network.sendRequest(e,i,n))),"t0",2);case 2:case"end":return a.stop()}}),a)})))()}},{key:"getPublicKeyFromNode",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=Cpe(e),i=!1,o=!1,n.prev=3,u=zn(t._getValueSingle(e,a,r));case 5:return n.next=7,Mf(u.next());case 7:if(!(i=!(c=n.sent).done)){n.next=24;break}return l=c.value,n.next=11,l;case 11:if("PEER_RESPONSE"!==l.name||null==l.record){n.next=21;break}return n.next=14,Mf(upe(kx({bytes:l.record.value})));case 14:if((f=n.sent).equals(e)){n.next=17;break}throw ca(new Error("public key does not match id"),"ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");case 17:if(null!=f.publicKey){n.next=19;break}throw ca(new Error("public key missing"),"ERR_PUBLIC_KEY_MISSING");case 19:return n.next=21,Ype({from:e,value:f.publicKey});case 21:i=!1,n.next=5;break;case 24:n.next=30;break;case 26:n.prev=26,n.t0=n.catch(3),o=!0,s=n.t0;case 30:if(n.prev=30,n.prev=31,!i||null==u.return){n.next=35;break}return n.next=35,Mf(u.return());case 35:if(n.prev=35,!o){n.next=38;break}throw s;case 38:return n.finish(35);case 39:return n.finish(30);case 40:throw ca(new Error("Node not responding with its public key: ".concat(e.toString())),"ERR_INVALID_RECORD");case 41:case"end":return n.stop()}}),n,null,[[3,26,30,40],[31,,35,39]])})))()}},{key:"findPeer",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f,h,p,d,v,y;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.log("findPeer %p",e),n.next=3,Mf(t.findPeerLocal(e));case 3:if(null==(a=n.sent)){n.next=9;break}return t.log("found local"),n.next=8,Hpe({from:t.components.peerId,peer:a});case 8:return n.abrupt("return");case 9:return n.next=11,Mf(Epe(e));case 11:if(i=n.sent,o=t.routingTable.closestPeers(i),null==o.find((function(t){return t.equals(e)}))){n.next=29;break}return n.prev=15,n.next=18,Mf(t.components.peerStore.get(e));case 18:return s=n.sent,t.log("found in peerStore"),n.next=22,Hpe({from:t.components.peerId,peer:{id:s.id,multiaddrs:s.addresses.map((function(e){return e.multiaddr})),protocols:[]}});case 22:return n.abrupt("return");case 25:if(n.prev=25,n.t0=n.catch(15),"ERR_NOT_FOUND"===n.t0.code){n.next=29;break}throw n.t0;case 29:u=t,c=function(){var t=Hn((function(t){var r=t.peer,n=t.signal;return En().mark((function t(){var a,i,o,s,c,l,f,h;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=new Fpe(Upe.FIND_NODE,e.toBytes(),0),i=!1,o=!1,t.prev=3,c=zn(u.network.sendRequest(r,a,{signal:n}));case 5:return t.next=7,Mf(c.next());case 7:if(!(i=!(l=t.sent).done)){t.next=19;break}return f=l.value,t.next=11,f;case 11:if("PEER_RESPONSE"!==f.name){t.next=16;break}if(null==(h=f.closer.find((function(t){return t.id.equals(e)})))){t.next=16;break}return t.next=16,Hpe({from:f.from,peer:h});case 16:i=!1,t.next=5;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(3),o=!0,s=t.t0;case 25:if(t.prev=25,t.prev=26,!i||null==c.return){t.next=30;break}return t.next=30,Mf(c.return());case 30:if(t.prev=30,!o){t.next=33;break}throw s;case 33:return t.finish(30);case 34:return t.finish(25);case 35:case"end":return t.stop()}}),t,null,[[3,21,25,35],[26,,30,34]])}))()}));return function(e){return t.apply(this,arguments)}}(),l=!1,f=!1,h=!1,n.prev=34,d=zn(t.queryManager.run(e.toBytes(),o,c,r));case 36:return n.next=38,Mf(d.next());case 38:if(!(f=!(v=n.sent).done)){n.next=46;break}return"FINAL_PEER"===(y=v.value).name&&(l=!0),n.next=43,y;case 43:f=!1,n.next=36;break;case 46:n.next=52;break;case 48:n.prev=48,n.t1=n.catch(34),h=!0,p=n.t1;case 52:if(n.prev=52,n.prev=53,!f||null==d.return){n.next=57;break}return n.next=57,Mf(d.return());case 57:if(n.prev=57,!h){n.next=60;break}throw p;case 60:return n.finish(57);case 61:return n.finish(52);case 62:if(l){n.next=65;break}return n.next=65,Gpe({from:t.components.peerId,error:ca(new Error("Not found"),"ERR_NOT_FOUND")});case 65:case"end":return n.stop()}}),n,null,[[15,25],[34,48,52,62],[53,,57,61]])})))()}},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f,h,p,d,v,y,b,g;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.log("getClosestPeers to %b",e),n.next=3,Mf(xpe(e));case 3:return a=n.sent,i=t.routingTable.closestPeers(a),o=t,s=new Ade(a,t.routingTable.kBucketSize),n.next=9,Mf(Promise.all(i.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.add(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 9:u=function(){var t=Hn((function(t){var r=t.peer,n=t.signal;return En().mark((function t(){var a;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.log("closerPeersSingle %s from %p",kh(e,"base32"),r),a=new Fpe(Upe.FIND_NODE,e,0),t.delegateYield(Cb(zn(o.network.sendRequest(r,a,{signal:n}))),"t0",3);case 3:case"end":return t.stop()}}),t)}))()}));return function(e){return t.apply(this,arguments)}}(),c=!1,l=!1,n.prev=12,h=zn(t.queryManager.run(e,i,u,r));case 14:return n.next=16,Mf(h.next());case 16:if(!(c=!(p=n.sent).done)){n.next=26;break}return d=p.value,n.next=20,d;case 20:if("PEER_RESPONSE"!==d.name){n.next=23;break}return n.next=23,Mf(Promise.all(d.closer.map(function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.add(t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 23:c=!1,n.next=14;break;case 26:n.next=32;break;case 28:n.prev=28,n.t0=n.catch(12),l=!0,f=n.t0;case 32:if(n.prev=32,n.prev=33,!c||null==h.return){n.next=37;break}return n.next=37,Mf(h.return());case 37:if(n.prev=37,!l){n.next=40;break}throw f;case 40:return n.finish(37);case 41:return n.finish(32);case 42:t.log("found %d peers close to %b",s.length,e),v=Ni(s.peers),n.prev=44,v.s();case 46:if((y=v.n()).done){n.next=70;break}return g=y.value,n.t1=Hpe,n.t2=t.components.peerId,n.t3=g,n.next=53,Mf(t.components.peerStore.addressBook.get(g));case 53:if(n.t5=b=n.sent,n.t4=null!==n.t5,!n.t4){n.next=57;break}n.t4=void 0!==b;case 57:if(!n.t4){n.next=61;break}n.t6=b,n.next=62;break;case 61:n.t6=[];case 62:return n.t7=n.t6.map((function(e){return e.multiaddr})),n.t8=[],n.t9={id:n.t3,multiaddrs:n.t7,protocols:n.t8},n.t10={from:n.t2,peer:n.t9},n.next=68,(0,n.t1)(n.t10);case 68:n.next=46;break;case 70:n.next=75;break;case 72:n.prev=72,n.t11=n.catch(44),v.e(n.t11);case 75:return n.prev=75,v.f(),n.finish(75);case 78:case"end":return n.stop()}}),n,null,[[12,28,32,42],[33,,37,41],[44,72,75,78]])})))()}},{key:"getValueOrPeers",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Hn(En().mark((function a(){var i,o,s,u,c,l,f;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=!1,o=!1,a.prev=2,u=zn(r._getValueSingle(e,t,n));case 4:return a.next=6,Mf(u.next());case 6:if(!(i=!(c=a.sent).done)){a.next=27;break}if("PEER_RESPONSE"!==(l=c.value).name){a.next=22;break}if(null==l.record){a.next=22;break}return a.prev=10,a.next=13,Mf(r._verifyRecordOnline(l.record));case 13:a.next=22;break;case 15:return a.prev=15,a.t0=a.catch(10),f="invalid record received, discarded",r.log(f),a.next=21,Gpe({from:l.from,error:ca(new Error(f),"ERR_INVALID_RECORD")});case 21:return a.abrupt("continue",24);case 22:return a.next=24,l;case 24:i=!1,a.next=4;break;case 27:a.next=33;break;case 29:a.prev=29,a.t1=a.catch(2),o=!0,s=a.t1;case 33:if(a.prev=33,a.prev=34,!i||null==u.return){a.next=38;break}return a.next=38,Mf(u.return());case 38:if(a.prev=38,!o){a.next=41;break}throw s;case 41:return a.finish(38);case 42:return a.finish(33);case 43:case"end":return a.stop()}}),a,null,[[2,29,33,43],[10,15],[34,,38,42]])})))()}},{key:"_verifyRecordOnline",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.timeReceived){e.next=2;break}throw ca(new Error("invalid record received"),"ERR_INVALID_RECORD");case 2:return e.next=4,mde(this.validators,new FS(t.key,t.value,t.timeReceived));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCloserPeersOffline",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xpe(t);case 2:n=e.sent,a=this.routingTable.closestPeers(n),i=[],o=Ni(a),e.prev=6,o.s();case 8:if((s=o.n()).done){e.next=28;break}if(!(u=s.value).equals(r)){e.next=12;break}return e.abrupt("continue",26);case 12:return e.prev=12,e.next=15,this.components.peerStore.addressBook.get(u);case 15:return c=e.sent,e.next=18,this.components.peerStore.protoBook.get(u);case 18:l=e.sent,i.push({id:u,multiaddrs:c.map((function(e){return e.multiaddr})),protocols:l}),e.next=26;break;case 22:if(e.prev=22,e.t0=e.catch(12),"ERR_NOT_FOUND"===e.t0.code){e.next=26;break}throw e.t0;case 26:e.next=8;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(6),o.e(e.t1);case 33:return e.prev=33,o.f(),e.finish(33);case 36:return i.length>0?this.log("getCloserPeersOffline found %d peer(s) closer to %b than %p",i.length,t,r):this.log("getCloserPeersOffline could not find peer closer to %b than %p",t,r),e.abrupt("return",i);case 38:case"end":return e.stop()}}),e,this,[[6,30,33,36],[12,22]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),Ide=ua("libp2p:kad-dht:providers"),Tde=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Cn(this,e);var n=r.cacheSize,a=r.cleanupInterval,i=r.provideValidity;this.components=t,this.cleanupInterval=null!==a&&void 0!==a?a:ppe,this.provideValidity=null!==i&&void 0!==i?i:hpe,this.cache=hy(null!==n&&void 0!==n?n:256),this.syncQueue=new $y({concurrency:1}),this.started=!1}return Dn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=An(En().mark((function e(){var t=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.started){e.next=2;break}return e.abrupt("return");case 2:this.started=!0,this.cleaner=setInterval((function(){t._cleanup().catch((function(e){Ide.error(e)}))}),this.cleanupInterval);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1,null!=this.cleaner&&(clearInterval(this.cleaner),this.cleaner=void 0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_cleanup",value:function(){var e=An(En().mark((function e(){var t=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncQueue.add(An(En().mark((function e(){var r,n,a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S,A,C,I,T,D,R,P;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Date.now(),n=0,a=0,i=new Map,o=t.components.datastore.batch(),s=t.components.datastore.query({prefix:fpe}),u=!1,c=!1,e.prev=8,f=zn(s);case 10:return e.next=12,f.next();case 12:if(!(u=!(h=e.sent).done)){e.next=18;break}p=h.value;try{d=Nde(p.key),v=d.cid,y=d.peerId,b=Bde(p.value).getTime(),g=Date.now(),w=(m=g-b)>t.provideValidity,Ide("comparing: %d - %d = %d > %d %s",g,b,m,t.provideValidity,w?"(expired)":""),w&&(a++,o.delete(p.key),(x=null!==(k=i.get(v))&&void 0!==k?k:new Set).add(y),i.set(v,x)),n++}catch(eL){Ide.error(eL.message)}case 15:u=!1,e.next=10;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),c=!0,l=e.t0;case 24:if(e.prev=24,e.prev=25,!u||null==f.return){e.next=29;break}return e.next=29,f.return();case 29:if(e.prev=29,!c){e.next=32;break}throw l;case 32:return e.finish(29);case 33:return e.finish(24);case 34:if(!(i.size>0)){e.next=40;break}return Ide("deleting %d / %d entries",a,n),e.next=38,o.commit();case 38:e.next=41;break;case 40:Ide("nothing to delete");case 41:_=Ni(i);try{for(_.s();!(E=_.n()).done;)if(S=Ia(E.value,2),A=S[0],C=S[1],I=Dde(A),null!=(T=t.cache.get(I))){D=Ni(C);try{for(D.s();!(R=D.n()).done;)P=R.value,T.delete(P)}catch(eL){D.e(eL)}finally{D.f()}0===T.size?t.cache.remove(I):t.cache.set(I,T)}}catch(eL){_.e(eL)}finally{_.f()}Ide("Cleanup successful (%dms)",Date.now()-r);case 44:case"end":return e.stop()}}),e,null,[[8,20,24,34],[25,,29,33]])}))));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getProvidersMap",value:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Dde(t),null!=(n=this.cache.get(r))){e.next=7;break}return e.next=5,Lde(this.components.datastore,t);case 5:n=e.sent,this.cache.set(r,n);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addProvider",value:function(){var e=An(En().mark((function e(t,r){var n=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncQueue.add(An(En().mark((function e(){var a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ide("%p provides %s",r,t),e.next=3,n._getProvidersMap(t);case 3:return a=e.sent,Ide("loaded %s provs",a.size),i=new Date,a.set(r.toString(),i),o=Dde(t),n.cache.set(o,a),e.next=11,Rde(n.components.datastore,t,r,i);case 11:case"end":return e.stop()}}),e)}))));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getProviders",value:function(){var e=An(En().mark((function e(t){var r=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncQueue.add(An(En().mark((function e(){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ide("get providers for %s",t),e.next=3,r._getProvidersMap(t);case 3:return n=e.sent,e.abrupt("return",su(n.keys()).map((function(e){return ope(e)})));case 5:case"end":return e.stop()}}),e)}))));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Dde(e){var t="string"===typeof e?e:kh(e.multihash.bytes,"base32");return"".concat(fpe,"/").concat(t)}function Rde(e,t,r,n){return Pde.apply(this,arguments)}function Pde(){return Pde=An(En().mark((function e(t,r,n,a){var i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[Dde(r),"/",n.toString()].join(""),o=new Hv(i),s=Uint8Array.from(cd.encode(a.getTime())),e.next=5,t.put(o,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),Pde.apply(this,arguments)}function Nde(e){var t=e.toString().split("/");if(5!==t.length)throw new Error("incorrectly formatted provider entry key in datastore: ".concat(e.toString()));return{cid:t[3],peerId:t[4]}}function Lde(e,t){return Ode.apply(this,arguments)}function Ode(){return(Ode=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,h;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Map,a=t.query({prefix:Dde(r)}),i=!1,o=!1,e.prev=4,u=zn(a);case 6:return e.next=8,u.next();case 8:if(!(i=!(c=e.sent).done)){e.next=15;break}l=c.value,f=Nde(l.key),h=f.peerId,n.set(h,Bde(l.value));case 12:i=!1,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),o=!0,s=e.t0;case 21:if(e.prev=21,e.prev=22,!i||null==u.return){e.next=26;break}return e.next=26,u.return();case 26:if(e.prev=26,!o){e.next=29;break}throw s;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return e.abrupt("return",n);case 32:case"end":return e.stop()}}),e,null,[[4,17,21,31],[22,,26,30]])})))).apply(this,arguments)}function Bde(e){return new Date(cd.decode(e))}var Ude=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");function Mde(e){return zde.apply(this,arguments)}function zde(){return zde=Hn(En().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,h,p,d,v,y;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y=function(e,t){if(null!=e){p.add(e);var n=BigInt("0x"+kh(Ppe(t,v),"base16"));d.add(An(En().mark((function t(){var s,l,b,g,m,w,k,x,_,E,S,A,C,I,T;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=[i],null!=f&&(s=new Uf.TimeoutController(f),l.push(s.signal)),b=(0,Wv.anySignal)(l),t.prev=3,m=!1,w=!1,t.prev=6,x=zn(o({key:r,peer:e,signal:b,pathIndex:u,numPaths:c}));case 8:return t.next=10,x.next();case 10:if(!(m=!(_=t.sent).done)){t.next=49;break}if(E=_.value,!b.aborted){t.next=14;break}return t.abrupt("return");case 14:if("PEER_RESPONSE"!==E.name){t.next=45;break}S=Ni(E.closer),t.prev=16,S.s();case 18:if((A=S.n()).done){t.next=37;break}if(C=A.value,!p.has(C.id)){t.next=23;break}return h("already seen %p in query",C.id),t.abrupt("continue",35);case 23:if(!a.equals(C.id)){t.next=26;break}return h("not querying ourselves"),t.abrupt("continue",35);case 26:return t.next=28,Epe(C.id);case 28:if(I=t.sent,!(BigInt("0x"+kh(Ppe(I,v),"base16"))>n)){t.next=33;break}return h("skipping %p as they are not closer to %b than %p",C.id,r,e),t.abrupt("continue",35);case 33:h("querying closer peer %p",C.id),y(C.id,I);case 35:t.next=18;break;case 37:t.next=42;break;case 39:t.prev=39,t.t0=t.catch(16),S.e(t.t0);case 42:return t.prev=42,S.f(),t.finish(42);case 45:d.emit("completed",E);case 46:m=!1,t.next=8;break;case 49:t.next=55;break;case 51:t.prev=51,t.t1=t.catch(6),w=!0,k=t.t1;case 55:if(t.prev=55,t.prev=56,!m||null==x.return){t.next=60;break}return t.next=60,x.return();case 60:if(t.prev=60,!w){t.next=63;break}throw k;case 63:return t.finish(60);case 64:return t.finish(55);case 65:null===(g=s)||void 0===g||g.clear(),t.next=71;break;case 68:t.prev=68,t.t2=t.catch(3),i.aborted?d.emit("error",t.t2):d.emit("completed",Gpe({from:e,error:t.t2}));case 71:return t.prev=71,null===(T=s)||void 0===T||T.clear(),t.finish(71);case 74:case"end":return t.stop()}}),t,null,[[3,68,71,74],[6,51,55,65],[16,39,42,45],[56,,60,64]])}))),{priority:Ude-n}).catch((function(e){h.error(e)}))}},r=t.key,n=t.startingPeer,a=t.ourPeerId,i=t.signal,o=t.query,s=t.alpha,u=t.pathIndex,c=t.numPaths,l=t.cleanUp,f=t.queryFuncTimeout,h=t.log,p=t.peersSeen,d=new $y({concurrency:s}),e.next=5,Mf(xpe(r));case 5:return v=e.sent,e.t0=y,e.t1=n,e.next=10,Mf(Epe(n));case 10:return e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.delegateYield(Cb(zn(Fde(d,i,l,h))),"t3",13);case 13:case"end":return e.stop()}}),e)}))),zde.apply(this,arguments)}function Fde(e,t,r,n){return Vde.apply(this,arguments)}function Vde(){return Vde=Hn(En().mark((function e(t,r,n,a){var i,o,s,u,c;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=xA(),o=!0,s=[],u=function(){o&&(a("clean up queue, results %d, queue size %d, pending tasks %d",s.length,t.size,t.pending),o=!1,t.clear(),s.splice(0,s.length))},t.on("completed",(function(e){s.push(e),i.resolve()})),t.on("error",(function(e){a("queue error",e),u(),i.reject(e)})),t.on("idle",(function(){a("queue idle"),o=!1,i.resolve()})),r.addEventListener("abort",(function(){a("abort queue");var e=o;u(),e&&i.reject(ca(new Error("Query aborted"),"ERR_QUERY_ABORTED"))})),n.addEventListener("cleanup",(function(){u(),i.resolve()}));case 9:if(!o){e.next=22;break}return e.next=12,Mf(i.promise);case 12:i=xA();case 13:if(!(s.length>0)){e.next=20;break}if(null==(c=s.shift())){e.next=18;break}return e.next=18,c;case 18:e.next=13;break;case 20:e.next=9;break;case 22:return e.delegateYield(Cb(zn(s)),"t0",23);case 23:case"end":return e.stop()}}),e)}))),Vde.apply(this,arguments)}var jde=function(){function e(t,r){Cn(this,e);var n=r.lan,a=void 0!==n&&n,i=r.disjointPaths,o=void 0===i?20:i,s=r.alpha,u=void 0===s?3:s;this.components=t,this.disjointPaths=null!==o&&void 0!==o?o:20,this.controllers=new Set,this.running=!1,this.alpha=null!==u&&void 0!==u?u:3,this.lan=a,this.queries=0}return Dn(e,[{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!0,null!=this.components.metrics&&null==this.metrics&&(this.metrics={runningQueries:this.components.metrics.registerMetric("libp2p_kad_dht_".concat(this.lan?"lan":"wan","_running_queries")),queryTime:this.components.metrics.registerMetric("libp2p_kad_dht_".concat(this.lan?"lan":"wan","_query_time_seconds"))});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!1,t=Ni(this.controllers);try{for(t.s();!(r=t.n()).done;)r.value.abort()}catch(eL){t.e(eL)}finally{t.f()}this.controllers.clear();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Hn(En().mark((function i(){var o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S;return En().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n.running){i.next=2;break}throw new Error("QueryManager not started");case 2:if(s=null===(o=n.metrics)||void 0===o?void 0:o.queryTime.timer(),null==a.signal){u=new Uf.TimeoutController(gpe),a.signal=u.signal;try{null!=q9.setMaxListeners&&(0,q9.setMaxListeners)(1/0,u.signal)}catch(A){}}c=new AbortController,n.controllers.add(c),l=[c.signal],null!=a.signal&&l.push(a.signal),f=(0,Wv.anySignal)(l);try{null!=q9.setMaxListeners&&(0,q9.setMaxListeners)(1/0,f)}catch(C){}if(h=ua("libp2p:kad-dht:".concat(n.lan?"lan":"wan",":query:")+kh(e,"base58btc")),p=t.slice(0,Math.min(n.disjointPaths,t.length)),d=Date.now(),v=new cZ,i.prev=14,h("query:start"),n.queries++,null===(y=n.metrics)||void 0===y||y.runningQueries.update(n.queries),0!==t.length){i.next=21;break}return h.error("Running query with no peers"),i.abrupt("return");case 21:b=new One,g=p.map((function(t,i){return Mde({key:e,startingPeer:t,ourPeerId:n.components.peerId,signal:f,query:r,pathIndex:i,numPaths:p.length,alpha:n.alpha,cleanUp:v,queryFuncTimeout:a.queryFuncTimeout,log:h,peersSeen:b})})),m=!1,w=!1,i.prev=25,x=zn(_S.apply(void 0,su(g)));case 27:return i.next=29,Mf(x.next());case 29:if(!(m=!(_=i.sent).done)){i.next=37;break}return E=_.value,i.next=33,E;case 33:"QUERY_ERROR"===E.name&&h("error",E.error);case 34:m=!1,i.next=27;break;case 37:i.next=43;break;case 39:i.prev=39,i.t0=i.catch(25),w=!0,k=i.t0;case 43:if(i.prev=43,i.prev=44,!m||null==x.return){i.next=48;break}return i.next=48,Mf(x.return());case 48:if(i.prev=48,!w){i.next=51;break}throw k;case 51:return i.finish(48);case 52:return i.finish(43);case 53:i.next=61;break;case 55:if(i.prev=55,i.t1=i.catch(14),n.running||"ERR_QUERY_ABORTED"!==i.t1.code){i.next=60;break}i.next=61;break;case 60:throw i.t1;case 61:return i.prev=61,n.controllers.delete(c),null!=u&&u.clear(),n.queries--,null===(S=n.metrics)||void 0===S||S.runningQueries.update(n.queries),null!=s&&s(),v.dispatchEvent(new fZ("cleanup")),h("query:done in %dms",Date.now()-d),i.finish(61);case 70:case"end":return i.stop()}}),i,null,[[14,55,61,70],[25,39,43,53],[44,,48,52]])})))()}}]),e}(),qde=ua("libp2p:kad-dht:rpc:handlers:add-provider"),Kde=function(){function e(t){Cn(this,e);var r=t.providers;this.providers=r}return Dn(e,[{key:"handle",value:function(){var e=An(En().mark((function e(t,r){var n,a=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qde("start"),null!=r.key&&0!==r.key.length){e.next=3;break}throw ca(new Error("Missing key"),"ERR_MISSING_KEY");case 3:e.prev=3,n=bhe.decode(r.key),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(3),ca(new Error("Invalid CID"),"ERR_INVALID_CID");case 10:return null!=r.providerPeers&&0!==r.providerPeers.length||qde.error("no providers found in message"),e.next=13,Promise.all(r.providerPeers.map(function(){var e=An(En().mark((function e(r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.id.equals(t)){e.next=3;break}return qde("invalid provider peer %p from %p",r.id,t),e.abrupt("return");case 3:if(!(r.multiaddrs.length<1)){e.next=6;break}return qde("no valid addresses for provider %p. Ignore",t),e.abrupt("return");case 6:return qde("received provider %p for %s (addrs %s)",t,n,r.multiaddrs.map((function(e){return e.toString()}))),e.next=9,a.providers.addProvider(n,r.id);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:return e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),Hde=ua("libp2p:kad-dht:rpc:handlers:find-node"),Gde=function(){function e(t,r){Cn(this,e);var n=r.peerRouting,a=r.lan;this.components=t,this.peerRouting=n,this.lan=Boolean(a)}return Dn(e,[{key:"handle",value:function(){var e=An(En().mark((function e(t,r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Hde("incoming request from %p for peers closer to %b",t,r.key),n=[],!Pd(this.components.peerId.toBytes(),r.key)){e.next=6;break}n=[{id:this.components.peerId,multiaddrs:this.components.addressManager.getAddresses().map((function(e){return e.decapsulateCode(Th("p2p").code)})),protocols:[]}],e.next=9;break;case 6:return e.next=8,this.peerRouting.getCloserPeersOffline(r.key,t);case 8:n=e.sent;case 9:return n=n.map(this.lan?kpe:wpe).filter((function(e){return e.multiaddrs.length})),a=new Fpe(r.type,new Uint8Array(0),r.clusterLevel),n.length>0?a.closerPeers=n:Hde("could not find any peers closer to %b than %p",r.key,t),e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),Wde=ua("libp2p:kad-dht:rpc:handlers:get-providers"),Yde=function(){function e(t,r){Cn(this,e);var n=r.peerRouting,a=r.providers,i=r.lan;this.components=t,this.peerRouting=n,this.providers=a,this.lan=Boolean(i)}return Dn(e,[{key:"handle",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=bhe.decode(r.key),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),ca(new Error("Invalid CID"),"ERR_INVALID_CID");case 7:return Wde("%p asking for providers for %s",t,n),e.next=10,Promise.all([this.providers.getProviders(n),this.peerRouting.getCloserPeersOffline(r.key,t)]);case 10:return a=e.sent,i=Ia(a,2),o=i[0],s=i[1],e.next=16,this._getPeers(o);case 16:return u=e.sent,e.next=19,this._getPeers(s.map((function(e){return e.id})));case 19:return c=e.sent,l=new Fpe(r.type,r.key,r.clusterLevel),u.length>0&&(l.providerPeers=u),c.length>0&&(l.closerPeers=c),Wde("got %s providers %s closerPeers",u.length,c.length),e.abrupt("return",l);case 25:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getAddresses",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.peerStore.addressBook.get(t);case 2:return r=e.sent,e.abrupt("return",r.map((function(e){return e.multiaddr})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPeers",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=this.lan?kpe:wpe,a=Ni(t),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=18;break}return o=i.value,e.t0=n,e.t1=o,e.next=11,this._getAddresses(o);case 11:e.t2=e.sent,e.t3=[],e.t4={id:e.t1,multiaddrs:e.t2,protocols:e.t3},(s=(0,e.t0)(e.t4)).multiaddrs.length>0&&r.push(s);case 16:e.next=5;break;case 18:e.next=23;break;case 20:e.prev=20,e.t5=e.catch(3),a.e(e.t5);case 23:return e.prev=23,a.f(),e.finish(23);case 26:return e.abrupt("return",r);case 27:case"end":return e.stop()}}),e,this,[[3,20,23,26]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Qde=ua("libp2p:kad-dht:rpc:handlers:get-value"),Jde=function(){function e(t,r){Cn(this,e);var n=r.peerRouting;this.components=t,this.peerRouting=n}return Dn(e,[{key:"handle",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.key,Qde("%p asked for key %b",t,n),null!=n&&0!==n.length){e.next=4;break}throw ca(new Error("Invalid key"),"ERR_INVALID_KEY");case 4:if(a=new Fpe(Upe.GET_VALUE,n,r.clusterLevel),!Ipe(n)){e.next=25;break}return Qde("is public key"),i=Tpe(n),e.prev=8,e.next=11,this.components.peerStore.keyBook.get(i);case 11:if(null!=(s=e.sent)){e.next=14;break}throw ca(new Error("No public key found in key book"),"ERR_NOT_FOUND");case 14:o=s,e.next=21;break;case 17:if(e.prev=17,e.t0=e.catch(8),"ERR_NOT_FOUND"===e.t0.code){e.next=21;break}throw e.t0;case 21:if(null==o){e.next=25;break}return Qde("returning found public key"),a.record=new FS(n,o,new Date),e.abrupt("return",a);case 25:return e.next=27,Promise.all([this._checkLocalDatastore(n),this.peerRouting.getCloserPeersOffline(r.key,t)]);case 27:return u=e.sent,c=Ia(u,2),l=c[0],f=c[1],null!=l&&(Qde("had record for %b in local datastore",n),a.record=l),f.length>0&&(Qde("had %s closer peers in routing table",f.length),a.closerPeers=f),e.abrupt("return",a);case 34:case"end":return e.stop()}}),e,this,[[8,17]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_checkLocalDatastore",value:function(){var e=An(En().mark((function e(t){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qde("checkLocalDatastore looking for %b",t),r=Ape(t),e.prev=2,e.next=5,this.components.datastore.get(r);case 5:n=e.sent,e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(2),"ERR_NOT_FOUND"!==e.t0.code){e.next=12;break}return e.abrupt("return",void 0);case 12:throw e.t0;case 13:if(null!=(a=FS.deserialize(n))){e.next=16;break}throw ca(new Error("Invalid record"),"ERR_INVALID_RECORD");case 16:if(!(null==a.timeReceived||Date.now()-a.timeReceived.getTime()>1296e5)){e.next=20;break}return e.next=19,this.components.datastore.delete(r);case 19:return e.abrupt("return",void 0);case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Zde=ua("libp2p:kad-dht:rpc:handlers:ping"),Xde=function(){function e(){Cn(this,e)}return Dn(e,[{key:"handle",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zde("ping from %p",t),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),$de=function(){function e(t,r){Cn(this,e);var n=r.validators;this.components=t,this.log=ua("libp2p:kad-dht:rpc:handlers:put-value"),this.validators=n}return Dn(e,[{key:"handle",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.key,this.log("%p asked us to store value for key %b",t,n),null!=(a=r.record)){e.next=7;break}throw i="Empty record from: ".concat(t.toString()),this.log.error(i),ca(new Error(i),"ERR_EMPTY_RECORD");case 7:return e.prev=7,e.next=10,mde(this.validators,a);case 10:return a.timeReceived=new Date,o=Ape(a.key),e.next=14,this.components.datastore.put(o,a.serialize().subarray());case 14:this.log("put record for %b into datastore under key %k",n,o),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),this.log("did not put record for key %b into datastore %o",n,e.t0);case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),eve=function(){function e(t,r){var n;Cn(this,e);var a=r.providers,i=r.peerRouting,o=r.validators,s=r.lan;this.log=ua("libp2p:kad-dht:rpc"),this.routingTable=r.routingTable,this.handlers=(Mn(n={},Upe.GET_VALUE,new Jde(t,{peerRouting:i})),Mn(n,Upe.PUT_VALUE,new $de(t,{validators:o})),Mn(n,Upe.FIND_NODE,new Gde(t,{peerRouting:i,lan:s})),Mn(n,Upe.ADD_PROVIDER,new Kde({providers:a})),Mn(n,Upe.GET_PROVIDERS,new Yde(t,{peerRouting:i,providers:a,lan:s})),Mn(n,Upe.PING,new Xde),n)}return Dn(e,[{key:"handleMessage",value:function(){var e=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.routingTable.add(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.log.error("Failed to update the kbucket store",e.t0);case 8:if(null!=(n=this.handlers[r.type])){e.next=12;break}return this.log.error("no handler found for message type: ".concat(r.type)),e.abrupt("return");case 12:return e.next=14,n.handle(t,r);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"onIncomingStream",value:function(e){var t=this;Promise.resolve().then(An(En().mark((function r(){var n,a,i,o;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.stream,a=e.connection,i=a.remotePeer,r.prev=2,r.next=5,t.routingTable.add(i);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2),t.log.error(r.t0);case 10:return o=t,r.next=13,TS(n,K$(),function(){var e=Hn(En().mark((function e(t){var r,n,a,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,s=zn(t);case 4:return e.next=6,Mf(s.next());case 6:if(!(r=!(u=e.sent).done)){e.next=19;break}return c=u.value,l=Fpe.deserialize(c),o.log("incoming %s from %p",l.type,i),e.next=12,Mf(o.handleMessage(i,l));case 12:if(null==(f=e.sent)){e.next=16;break}return e.next=16,f.serialize();case 16:r=!1,e.next=4;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(2),n=!0,a=e.t0;case 25:if(e.prev=25,e.prev=26,!r||null==s.return){e.next=30;break}return e.next=30,Mf(s.return());case 30:if(e.prev=30,!n){e.next=33;break}throw a;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}}),e,null,[[2,21,25,35],[26,,30,34]])})));return function(t){return e.apply(this,arguments)}}(),V$(),n);case 13:case"end":return r.stop()}}),r,null,[[2,7]])})))).catch((function(e){t.log.error(e)}))}}]),e}(),tve=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a;Cn(this,r),a=t.call(this);var i=n.protocol,o=n.lan;return a.components=e,a.log=ua("libp2p:kad-dht:topology-listener:".concat(o?"lan":"wan")),a.running=!1,a.protocol=i,a}return Dn(r,[{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=An(En().mark((function e(){var t,r=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.running){e.next=2;break}return e.abrupt("return");case 2:return this.running=!0,t=oZ({onConnect:function(e){r.log("observed peer %p with protocol %s",e,r.protocol),r.dispatchEvent(new fZ("peer",{detail:e}))}}),e.next=6,this.components.registrar.register(this.protocol,t);case 6:this.registrarId=e.sent;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.running=!1,null!=this.registrarId&&(this.components.registrar.unregister(this.registrarId),this.registrarId=void 0)}}]),r}(cZ),rve=function(){function e(t,r){Cn(this,e);var n=r.peerRouting,a=r.lan,i=r.count,o=r.interval,s=r.queryTimeout;this.components=t,this.log=ua("libp2p:kad-dht:".concat(a?"lan":"wan",":query-self")),this.running=!1,this.peerRouting=n,this.count=null!==i&&void 0!==i?i:20,this.interval=null!==o&&void 0!==o?o:dpe,this.queryTimeout=null!==s&&void 0!==s?s:vpe}return Dn(e,[{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.running){e.next=2;break}return e.abrupt("return");case 2:this.running=!0,this._querySelf();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!1,null!=this.timeoutId&&clearTimeout(this.timeoutId),null!=this.controller&&this.controller.abort();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_querySelf",value:function(){var e=this;Promise.resolve().then(An(En().mark((function t(){var r,n,a;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new Uf.TimeoutController(e.queryTimeout),t.prev=1,e.controller=new AbortController,n=(0,Wv.anySignal)([e.controller.signal,r.signal]);try{null!=q9.setMaxListeners&&(0,q9.setMaxListeners)(1/0,n)}catch(i){}return t.next=7,TS(e.peerRouting.getClosestPeers(e.components.peerId.toBytes(),{signal:n}),(function(t){return sS(t,e.count)}),function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TV(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:a=t.sent,e.log("query ran successfully - found %d peers",a),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.log("query error",t.t0);case 14:return t.prev=14,e.timeoutId=setTimeout(e._querySelf.bind(e),e.interval),r.clear(),t.finish(14);case 18:case"end":return t.stop()}}),t,null,[[1,11,14,18]])})))).catch((function(t){e.log("query error",t)}))}}]),e}(),nve=function(e,t){Pn(n,e);var r=Un(n);function n(e,t){var a;Cn(this,n),a=r.call(this);var i=t.kBucketSize,o=t.clientMode,s=t.validators,u=t.selectors,c=t.querySelfInterval,l=t.lan,f=t.protocolPrefix,h=t.pingTimeout,p=t.pingConcurrency,d=t.maxInboundStreams,v=t.maxOutboundStreams,y=t.providers;return a.running=!1,a.components=e,a.lan=Boolean(l),a.log=ua("libp2p:kad-dht:".concat(!0===l?"lan":"wan")),a.protocol="".concat(null!==f&&void 0!==f?f:"/ipfs").concat(!0===l?"/lan":"").concat("/kad/1.0.0"),a.kBucketSize=null!==i&&void 0!==i?i:20,a.clientMode=null===o||void 0===o||o,a.maxInboundStreams=null!==d&&void 0!==d?d:32,a.maxOutboundStreams=null!==v&&void 0!==v?v:64,a.routingTable=new Rpe(e,{kBucketSize:i,lan:a.lan,pingTimeout:h,pingConcurrency:p,protocol:a.protocol}),a.providers=new Tde(e,null!==y&&void 0!==y?y:{}),a.validators=jn(jn({},kde),s),a.selectors=jn(jn({},_de),u),a.network=new Jpe(e,{protocol:a.protocol,lan:a.lan}),a.queryManager=new jde(e,{disjointPaths:Math.ceil(a.kBucketSize/2),lan:l}),a.peerRouting=new Cde(e,{routingTable:a.routingTable,network:a.network,validators:a.validators,queryManager:a.queryManager,lan:a.lan}),a.contentFetching=new Ede(e,{validators:a.validators,selectors:a.selectors,peerRouting:a.peerRouting,queryManager:a.queryManager,routingTable:a.routingTable,network:a.network,lan:a.lan}),a.contentRouting=new Sde(e,{network:a.network,peerRouting:a.peerRouting,queryManager:a.queryManager,routingTable:a.routingTable,providers:a.providers,lan:a.lan}),a.routingTableRefresh=new Bpe({peerRouting:a.peerRouting,routingTable:a.routingTable,lan:a.lan}),a.rpc=new eve(e,{routingTable:a.routingTable,providers:a.providers,peerRouting:a.peerRouting,validators:a.validators,lan:a.lan}),a.topologyListener=new tve(e,{protocol:a.protocol,lan:a.lan}),a.querySelf=new rve(e,{peerRouting:a.peerRouting,interval:c,lan:a.lan}),a.network.addEventListener("peer",(function(e){var t=e.detail;a.onPeerConnect(t).catch((function(e){a.log.error("could not add %p to routing table",t.id,e)})),a.dispatchEvent(new fZ("peer",{detail:t}))})),a.topologyListener.addEventListener("peer",(function(e){var t=e.detail;Promise.resolve().then(An(En().mark((function e(){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.components.peerStore.addressBook.get(t);case 2:return r=e.sent,n={id:t,multiaddrs:r.map((function(e){return e.multiaddr})),protocols:[]},e.next=6,a.onPeerConnect(n);case 6:case"end":return e.stop()}}),e)})))).catch((function(e){a.log.error("could not add %p to routing table",t,e)}))})),a}return Dn(n,[{key:C9,get:function(){return!0}},{key:t,get:function(){return"@libp2p/kad-dht"}},{key:"onPeerConnect",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log("peer %p connected with protocols %s",t.id,t.protocols),0!==(t=this.lan?kpe(t):wpe(t)).multiaddrs.length){e.next=5;break}return this.log("ignoring %p as they do not have any %s addresses in %s",t.id,this.lan?"private":"public",t.multiaddrs.map((function(e){return e.toString()}))),e.abrupt("return");case 5:return e.prev=5,e.next=8,this.routingTable.add(t.id);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),this.log.error("could not add %p to routing table",t.id,e.t0);case 13:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.running}},{key:"getMode",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.clientMode?"client":"server");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setMode",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.registrar.unhandle(this.protocol);case 2:if("client"!==t){e.next=7;break}this.log("enabling client mode"),this.clientMode=!0,e.next=11;break;case 7:return this.log("enabling server mode"),this.clientMode=!1,e.next=11,this.components.registrar.handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.running=!0,e.next=3,this.setMode(this.clientMode?"client":"server");case 3:return e.next=5,Promise.all([this.providers.start(),this.queryManager.start(),this.network.start(),this.routingTable.start(),this.topologyListener.start(),this.querySelf.start()]);case 5:return e.next=7,this.routingTableRefresh.start();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.running=!1,e.next=3,Promise.all([this.providers.stop(),this.queryManager.stop(),this.network.stop(),this.routingTable.stop(),this.routingTableRefresh.stop(),this.topologyListener.stop(),this.querySelf.stop()]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Hn(En().mark((function a(){return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.delegateYield(Cb(zn(r.contentFetching.put(e,t,n))),"t0",1);case 1:case"end":return a.stop()}}),a)})))()}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(Cb(zn(t.contentFetching.get(e,r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"provide",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(Cb(zn(t.contentRouting.provide(e,t.components.addressManager.getAddresses(),r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(Cb(zn(t.contentRouting.findProviders(e,r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"findPeer",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(Cb(zn(t.peerRouting.findPeer(e,r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(Cb(zn(t.peerRouting.getClosestPeers(e,r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"refreshRoutingTable",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.routingTableRefresh.refreshTable(!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(cZ,Symbol.toStringTag),ave=ua("libp2p:kad-dht"),ive=function(e,t){Pn(n,e);var r=Un(n);function n(e,t,a){var i;return Cn(this,n),(i=r.call(this)).components=e,i.wan=t,i.lan=a,i.wan.addEventListener("peer",(function(e){i.dispatchEvent(new fZ("peer",{detail:e.detail}))})),i.lan.addEventListener("peer",(function(e){i.dispatchEvent(new fZ("peer",{detail:e.detail}))})),i}return Dn(n,[{key:C9,get:function(){return!0}},{key:t,get:function(){return"@libp2p/dual-kad-dht"}},{key:"isStarted",value:function(){return this.wan.isStarted()&&this.lan.isStarted()}},{key:"getMode",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.wan.getMode();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setMode",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.wan.setMode(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.lan.start(),this.wan.start()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.lan.stop(),this.wan.stop()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Hn(En().mark((function a(){var i,o,s,u,c,l;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=!1,o=!1,a.prev=2,u=zn(_S(r.lan.put(e,t,n),r.wan.put(e,t,n)));case 4:return a.next=6,Mf(u.next());case 6:if(!(i=!(c=a.sent).done)){a.next=13;break}return l=c.value,a.next=10,l;case 10:i=!1,a.next=4;break;case 13:a.next=19;break;case 15:a.prev=15,a.t0=a.catch(2),o=!0,s=a.t0;case 19:if(a.prev=19,a.prev=20,!i||null==u.return){a.next=24;break}return a.next=24,Mf(u.return());case 24:if(a.prev=24,!o){a.next=27;break}throw s;case 27:return a.finish(24);case 28:return a.finish(19);case 29:case"end":return a.stop()}}),a,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,o=!1,s=!1,n.prev=4,c=zn(_S(t.lan.get(e,r),t.wan.get(e,r)));case 6:return n.next=8,Mf(c.next());case 8:if(!(o=!(l=n.sent).done)){n.next=18;break}return f=l.value,n.next=12,f;case 12:"DIALING_PEER"===f.name&&(a=!0),"VALUE"===f.name&&(a=!0,null!=f.value&&(i=!0)),"SENDING_QUERY"===f.name&&(a=!0);case 15:o=!1,n.next=6;break;case 18:n.next=24;break;case 20:n.prev=20,n.t0=n.catch(4),s=!0,u=n.t0;case 24:if(n.prev=24,n.prev=25,!o||null==c.return){n.next=29;break}return n.next=29,Mf(c.return());case 29:if(n.prev=29,!s){n.next=32;break}throw u;case 32:return n.finish(29);case 33:return n.finish(24);case 34:if(a){n.next=36;break}throw ca(new Error("No peers found in routing table!"),"ERR_NO_PEERS_IN_ROUTING_TABLE");case 36:if(i){n.next=39;break}return n.next=39,Gpe({from:t.components.peerId,error:ca(new Error("Not found"),"ERR_NOT_FOUND")});case 39:case"end":return n.stop()}}),n,null,[[4,20,24,34],[25,,29,33]])})))()}},{key:"provide",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f,h,p;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=0,i=0,o=[],s=[t.lan],n.next=6,Mf(t.wan.getMode());case 6:if(n.t0=n.sent,"server"!==n.t0){n.next=9;break}s.push(t.wan);case 9:u=!1,c=!1,n.prev=11,f=zn(_S.apply(void 0,su(s.map((function(t){return t.provide(e,r)})))));case 13:return n.next=15,Mf(f.next());case 15:if(!(u=!(h=n.sent).done)){n.next=25;break}return p=h.value,n.next=19,p;case 19:"SENDING_QUERY"===p.name&&a++,"QUERY_ERROR"===p.name&&o.push(p.error),"PEER_RESPONSE"===p.name&&"ADD_PROVIDER"===p.messageName&&(ave("sent provider record for %s to %p",e,p.from),i++);case 22:u=!1,n.next=13;break;case 25:n.next=31;break;case 27:n.prev=27,n.t1=n.catch(11),c=!0,l=n.t1;case 31:if(n.prev=31,n.prev=32,!u||null==f.return){n.next=36;break}return n.next=36,Mf(f.return());case 36:if(n.prev=36,!c){n.next=39;break}throw l;case 39:return n.finish(36);case 40:return n.finish(31);case 41:if(0!==i){n.next=45;break}if(!(o.length>0)){n.next=44;break}throw ca(new Error("Failed to provide to ".concat(o.length," of ").concat(a," peers")),"ERR_PROVIDES_FAILED",{errors:o});case 44:throw ca(new Error("Failed to provide - no peers found"),"ERR_PROVIDES_FAILED");case 45:case"end":return n.stop()}}),n,null,[[11,27,31,41],[32,,36,40]])})))()}},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(Cb(zn(_S(t.lan.findProviders(e,r),t.wan.findProviders(e,r)))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"findPeer",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c,l;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,o=!1,n.prev=3,u=zn(_S(t.lan.findPeer(e,r),t.wan.findPeer(e,r)));case 5:return n.next=7,Mf(u.next());case 7:if(!(i=!(c=n.sent).done)){n.next=15;break}return l=c.value,n.next=11,l;case 11:"SENDING_QUERY"!==l.name&&"FINAL_PEER"!==l.name||(a=!0);case 12:i=!1,n.next=5;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(3),o=!0,s=n.t0;case 21:if(n.prev=21,n.prev=22,!i||null==u.return){n.next=26;break}return n.next=26,Mf(u.return());case 26:if(n.prev=26,!o){n.next=29;break}throw s;case 29:return n.finish(26);case 30:return n.finish(21);case 31:if(a){n.next=33;break}throw ca(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED");case 33:case"end":return n.stop()}}),n,null,[[3,17,21,31],[22,,26,30]])})))()}},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(Cb(zn(_S(t.lan.getClosestPeers(e,r),t.wan.getClosestPeers(e,r)))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"refreshRoutingTable",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.lan.refreshRoutingTable(),this.wan.refreshRoutingTable()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(cZ,Symbol.toStringTag),ove=function(e){Pn(r,e);var t=Un(r);function r(e,n){return Cn(this,r),t.call(this,e,new nve(e,jn(jn({protocolPrefix:"/ipfs"},n),{},{lan:!1})),new nve(e,jn(jn({protocolPrefix:"/ipfs"},n),{},{clientMode:!1,lan:!0})))}return Dn(r)}(ive);var sve=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=uve;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},uve=Math.pow(2,31);var cve=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var lve=Math.pow(2,7),fve=Math.pow(2,14),hve=Math.pow(2,21),pve=Math.pow(2,28),dve=Math.pow(2,35),vve=Math.pow(2,42),yve=Math.pow(2,49),bve=Math.pow(2,56),gve=Math.pow(2,63),mve={encode:sve,decode:cve,encodingLength:function(e){return e<lve?1:e<fve?2:e<hve?3:e<pve?4:e<dve?5:e<vve?6:e<yve?7:e<bve?8:e<gve?9:10}},wve=mve,kve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=wve.decode(e,t);return[r,wve.decode.bytes]},xve=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return wve.encode(e,t,r),t},_ve=function(e){return wve.encodingLength(e)},Eve=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Sve=function(e,t){var r=t.byteLength,n=_ve(e),a=n+_ve(r),i=new Uint8Array(a+r);return xve(e,i,0),xve(r,i,n),i.set(t,a),new Cve(e,r,t,i)},Ave=function(e){var t=Eve(e),r=Ia(kve(t),2),n=r[0],a=r[1],i=Ia(kve(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new Cve(n,o,u,t)},Cve=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var Ive=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Tve=Ive,Dve=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),Rve=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Nve(this,e)}}]),e}(),Pve=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return Nve(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Nve=function(e,t){return new Pve(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},Lve=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Dve(t,r,n),this.decoder=new Rve(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Ove=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new Lve(t,r,n,a)},Bve=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Tve(n,r),i=a.encode,o=a.decode;return Ove({prefix:t,name:r,encode:i,decode:function(e){return Eve(o(e))}})},Uve=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return Ove({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},Mve=Bve({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zve=Bve({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Fve=Uve({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Vve=Uve({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),jve=Uve({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),qve=Uve({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Kve=Uve({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Hve=Uve({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Gve=Uve({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Wve=Uve({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Yve=Uve({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Qve=function(e,t){var r=e.bytes;return 0===e.version?eye(r,Zve(e),t||Mve.encoder):tye(r,Zve(e),t||Fve.encoder)},Jve=new WeakMap,Zve=function(e){var t=Jve.get(e);if(null==t){var r=new Map;return Jve.set(e,r),r}return t},Xve=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==rye)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==nye)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=Sve(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return Qve(this,e)}},{key:"toJSON",value:function(){return{"/":Qve(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||aye(n,a,i.bytes))}if(!0===t[iye]){var o=t.version,s=t.multihash,u=t.code,c=Ave(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==rye)throw new Error("Version 0 CID must use dag-pb (code: ".concat(rye,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,aye(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,rye,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=Eve(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new Cve(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(kve(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=rye;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia($ve(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return Zve(o).set(a,e),o}}]),r}(),$ve=function(e,t){switch(e[0]){case"Q":var r=t||Mve;return[Mve.prefix,r.decode("".concat(Mve.prefix).concat(e))];case Mve.prefix:var n=t||Mve;return[Mve.prefix,n.decode(e)];case Fve.prefix:var a=t||Fve;return[Fve.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},eye=function(e,t,r){var n=r.prefix;if(n!==Mve.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},tye=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},rye=112,nye=18,aye=function(e,t,r){var n=_ve(e),a=n+_ve(t),i=new Uint8Array(a+r.byteLength);return xve(e,i,0),xve(t,i,n),i.set(r,a),i},iye=Symbol.for("@ipld/js-cid/CID"),oye=Ove({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),sye=Uve({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),uye=Uve({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),cye=Bve({prefix:"9",name:"base10",alphabet:"0123456789"}),lye=Uve({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),fye=Uve({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),hye=Bve({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pye=Bve({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),dye=Uve({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vye=Uve({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yye=Uve({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bye=Uve({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),gye=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),mye=gye.reduce((function(e,t,r){return e[r]=t,e}),[]),wye=gye.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var kye=Ove({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=mye[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=wye[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),xye=function(e){var t=e.name,r=e.code,n=e.encode;return new _ye(t,r,n)},_ye=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?Sve(this.code,r):r.then((function(e){return Sve(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),Eye=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Sye=xye({name:"sha2-256",code:18,encode:Eye("SHA-256")}),Aye=xye({name:"sha2-512",code:19,encode:Eye("SHA-512")}),Cye=Eve,Iye={code:0,name:"identity",encode:Cye,digest:function(e){return Sve(0,Cye(e))}},Tye="raw",Dye=85,Rye=function(e){return Eve(e)},Pye=function(e){return Eve(e)},Nye=new TextEncoder,Lye=new TextDecoder,Oye="json",Bye=512,Uye=function(e){return Nye.encode(JSON.stringify(e))},Mye=function(e){return JSON.parse(Lye.decode(e))},zye=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},Wr),Yr),Qr),Jr),Zr),Gr),Xr),Hr),$r),en),Fye=(jn(jn({},tn),rn),Symbol.for("nodejs.util.inspect.custom")),Vye=Object.values(zye).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),zye.identity.decoder),jye=36,qye=37,Kye=function(e){function t(e){Cn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:fb,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=Mve.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return Xve.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return Pd(this.multihash.bytes,e);if("string"===typeof e)return Yye(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Pd(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:Fye,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),Hye=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Dn(r)}(Kye),Gye=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Dn(r)}(Kye),Wye=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Dn(r)}(Kye);function Yye(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:Vye,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=Ave(Mve.decode("z".concat(e)));return e.startsWith("12D")?new Gye({multihash:n}):e.startsWith("16U")?new Wye({multihash:n}):new Hye({multihash:n})}return function(e){try{var t=Ave(e);if(t.code===Iye.code){if(36===t.digest.length)return new Gye({multihash:t});if(37===t.digest.length)return new Wye({multihash:t})}if(t.code===Sye.code)return new Hye({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===Sye.code)return new Hye({multihash:e.multihash});if(t.code===Iye.code){if(t.digest.length===jye)return new Gye({multihash:e.multihash});if(t.digest.length===qye)return new Wye({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(Xve.decode(e))}throw new Error("Supplied PeerID CID is invalid")}(Vye.decode(e))}var Qye=ua("libp2p:bootstrap"),Jye=function(e,t){Pn(n,e);var r=Un(n);function n(e){var t,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{list:[]};if(Cn(this,n),null==i.list||0===i.list.length)throw new Error("Bootstrap requires a list of peer addresses");(a=r.call(this)).components=e,a.timeout=null!==(t=i.timeout)&&void 0!==t?t:1e3,a.list=[];var o,s=Ni(i.list);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(hv.matches(u)){var c=Gd(u),l=c.getPeerId();if(null!=l){var f={id:Yye(l),multiaddrs:[c],protocols:[]};a.list.push(f)}else Qye.error("Invalid bootstrap multiaddr without peer id")}else Qye.error("Invalid multiaddr")}}catch(eL){s.e(eL)}finally{s.f()}return a._init=i,a}return Dn(n,[{key:C9,get:function(){return!0}},{key:t,get:function(){return"@libp2p/bootstrap"}},{key:"isStarted",value:function(){return Boolean(this.timer)}},{key:"start",value:function(){var e=this;this.isStarted()||(Qye("Starting bootstrap node discovery, discovering peers after %s ms",this.timeout),this.timer=setTimeout((function(){e._discoverBootstrapPeers().catch((function(e){Qye.error(e)}))}),this.timeout))}},{key:"_discoverBootstrapPeers",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.timer){e.next=2;break}return e.abrupt("return");case 2:t=Ni(this.list),e.prev=3,t.s();case 5:if((r=t.n()).done){e.next=14;break}return o=r.value,e.next=9,this.components.peerStore.tagPeer(o.id,null!==(n=this._init.tagName)&&void 0!==n?n:"bootstrap",{value:null!==(a=this._init.tagValue)&&void 0!==a?a:50,ttl:null!==(i=this._init.tagTTL)&&void 0!==i?i:12e4});case 9:if(null!=this.timer){e.next=11;break}return e.abrupt("return");case 11:this.dispatchEvent(new fZ("peer",{detail:o}));case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),t.e(e.t0);case 19:return e.prev=19,t.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[3,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){null!=this.timer&&clearTimeout(this.timer),this.timer=void 0}}]),n}(cZ,Symbol.toStringTag);Jye.tag="bootstrap";var Zye=WebSocket,Xye=__webpack_require__(1101);function $ye(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===e||void 0===e||null===(t=e.constructor)||void 0===t?void 0:t.name)&&"number"===typeof(null===e||void 0===e?void 0:e.byteLength)}var ebe=function(e){if(e.readyState>=2)throw new Error("socket closed");if(1!==e.readyState)return new Promise((function(t,r){function n(){e.removeEventListener("open",a),e.removeEventListener("error",i)}function a(){n(),t()}function i(t){var a;n(),r(null!==(a=t.error)&&void 0!==a?a:new Error("connect ECONNREFUSED ".concat(e.url)))}e.addEventListener("open",a),e.addEventListener("error",i)}))},tbe=function(e,t){var r;(t=null!==(r=t)&&void 0!==r?r:{}).closeOnEnd=!1!==t.closeOnEnd;var n=function(){var r=An(En().mark((function r(n){var a,i,o,s,u,c;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=!1,i=!1,r.prev=2,s=zn(n);case 4:return r.next=6,s.next();case 6:if(!(a=!(u=r.sent).done)){r.next=22;break}return c=u.value,r.prev=8,r.next=11,ebe(e);case 11:r.next=18;break;case 13:if(r.prev=13,r.t0=r.catch(8),"socket closed"!==r.t0.message){r.next=17;break}return r.abrupt("break",22);case 17:throw r.t0;case 18:e.send(c);case 19:a=!1,r.next=4;break;case 22:r.next=28;break;case 24:r.prev=24,r.t1=r.catch(2),i=!0,o=r.t1;case 28:if(r.prev=28,r.prev=29,!a||null==s.return){r.next=33;break}return r.next=33,s.return();case 33:if(r.prev=33,!i){r.next=36;break}throw o;case 36:return r.finish(33);case 37:return r.finish(28);case 38:if(!(null!=t.closeOnEnd&&e.readyState<=1)){r.next=42;break}return r.next=41,new Promise((function(t,r){e.addEventListener("close",(function(e){if(e.wasClean||1006===e.code)t();else{var n=Object.assign(new Error("ws error"),{event:e});r(n)}})),setTimeout((function(){return e.close()}))}));case 41:return r.abrupt("return",r.sent);case 42:case"end":return r.stop()}}),r,null,[[2,24,28,38],[8,13],[29,,33,37]])})));return function(e){return r.apply(this,arguments)}}();return n},rbe=function(e,t){var r;t=null!==(r=t)&&void 0!==r?r:{};var n=function(e){e.binaryType="arraybuffer";var t,r=function(){var r=An(En().mark((function r(){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise((function(r,n){if(a)return r();if(null!=t)return n(t);var i=function(t){e.removeEventListener("open",o),e.removeEventListener("error",s),t()},o=function(){return i(r)},s=function(t){i((function(){var r;return n(null!==(r=t.error)&&void 0!==r?r:new Error("connect ECONNREFUSED ".concat(e.url)))}))};e.addEventListener("open",o),e.addEventListener("error",s)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),n=Hn(En().mark((function t(){var n,a,i,o,s,u,c;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Xye.zN((function(t){var r=t.push,n=t.stop,a=t.fail,i=function(e){var t=null;"string"===typeof e.data&&(t=Bf(e.data)),$ye(e.data)&&(t=new Uint8Array(e.data)),e.data instanceof Uint8Array&&(t=e.data),null!=t&&r(t)},o=function(e){var t;return a(null!==(t=e.error)&&void 0!==t?t:new Error("Socket error"))};return e.addEventListener("message",i),e.addEventListener("error",o),e.addEventListener("close",n),function(){e.removeEventListener("message",i),e.removeEventListener("error",o),e.removeEventListener("close",n)}}),{highWaterMark:1/0}),t.next=3,Mf(r());case 3:a=!1,i=!1,t.prev=5,s=zn(n);case 7:return t.next=9,Mf(s.next());case 9:if(!(a=!(u=t.sent).done)){t.next=16;break}return c=u.value,t.next=13,$ye(c)?new Uint8Array(c):c;case 13:a=!1,t.next=7;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(5),i=!0,o=t.t0;case 22:if(t.prev=22,t.prev=23,!a||null==s.return){t.next=27;break}return t.next=27,Mf(s.return());case 27:if(t.prev=27,!i){t.next=30;break}throw o;case 30:return t.finish(27);case 31:return t.finish(22);case 32:case"end":return t.stop()}}),t,null,[[5,18,22,32],[23,,27,31]])})))(),a=1===e.readyState;return e.addEventListener("open",(function(){a=!0,t=null})),e.addEventListener("close",(function(){a=!1,t=null})),e.addEventListener("error",(function(r){var n;a||(t=null!==(n=r.error)&&void 0!==n?n:new Error("connect ECONNREFUSED ".concat(e.url)))})),Object.assign(n,{connected:r})}(e),a=t.remoteAddress,i=t.remotePort;if(null!=e.url)try{var o=new URL(e.url);a=o.hostname,i=parseInt(o.port,10)}catch(u){}if(null==a||null==i)throw new Error("Remote connection did not have address and/or port");var s={sink:tbe(e,t),source:n,connected:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.connected();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),close:function(){var t=An(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.readyState!==e.CONNECTING&&e.readyState!==e.OPEN){t.next=3;break}return t.next=3,new Promise((function(t){e.addEventListener("close",(function(){t()})),e.close()}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),destroy:function(){null!=e.terminate?e.terminate():e.close()},remoteAddress:a,remotePort:i,socket:e};return s},nbe={http:"ws",https:"wss"};function abe(e,t){var r;t=null!==(r=t)&&void 0!==r?r:{};var n=function(e,t){return(0,Tv.relative)(e,t,nbe,"ws")}(e,("undefined"===typeof window?"":window.location).toString()),a=new Zye(n,t.websocket);return rbe(a,t)}var ibe=ua("libp2p:websockets:socket");function obe(e,t,r){var n,a={sink:function(t){return An(En().mark((function n(){var a;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null!=(null===(a=r)||void 0===a?void 0:a.signal)&&(t=U$(t,r.signal)),n.prev=1,n.next=4,e.sink(t);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),"aborted"!==n.t0.type&&ibe.error(n.t0);case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))()},source:null!=(r=null!==(n=r)&&void 0!==n?n:{}).signal?U$(e.source,r.signal):e.source,remoteAddr:t,timeline:{open:Date.now()},close:function(){return An(En().mark((function t(){var r,n,i,o;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now(),t.prev=1,t.next=4,uM(e.close(),{milliseconds:2e3});case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(1),n=a.remoteAddr.toOptions(),i=n.host,o=n.port,ibe("timeout closing stream to %s:%s after %dms, destroying it manually",i,o,Date.now()-r),e.destroy();case 11:return t.prev=11,a.timeline.close=Date.now(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,6,11,14]])})))()}};return e.socket.addEventListener("close",(function(){null==a.timeline.close&&(a.timeline.close=Date.now())}),{once:!0}),a}function sbe(e){return e.filter((function(e){if(e.protoCodes().includes(290))return!1;var t=e.decapsulateCode(421);return rv.matches(t)||nv.matches(t)}))}var ube,cbe=ua("libp2p:websockets"),lbe=function(e){function t(e){Cn(this,t),this.init=e}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"@libp2p/websockets"}},{key:A9,get:function(){return!0}},{key:"dial",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cbe("dialing %s",t),r=null!==(n=r)&&void 0!==n?n:{},e.next=4,this._connect(t,r);case 4:return a=e.sent,i=obe(a,t),cbe("new outbound connection %s",i.remoteAddr),e.next=9,r.upgrader.upgradeOutbound(i);case 9:return o=e.sent,cbe("outbound connection %s upgraded",i.remoteAddr),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_connect",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(null===r||void 0===r||null===(n=r.signal)||void 0===n?void 0:n.aborted)){e.next=2;break}throw new cb;case 2:if(a=t.toOptions(),cbe("dialing %s:%s",a.host,a.port),i=xA(),o=function(e){cbe.error("connection error:",e),i.reject(e)},null!=(s=abe(JU(t),this.init)).socket.on?s.socket.on("error",o):s.socket.onerror=o,null!=r.signal){e.next=13;break}return e.next=11,Promise.race([s.connected(),i.promise]);case 11:case 20:return cbe("connected %s",t),e.abrupt("return",s);case 13:return c=new Promise((function(e,t){var n,a;if(u=function(){t(new cb),s.close().catch((function(e){cbe.error("error closing raw socket",e)}))},!0===(null===r||void 0===r||null===(n=r.signal)||void 0===n?void 0:n.aborted))return u();null===r||void 0===r||null===(a=r.signal)||void 0===a||a.addEventListener("abort",u)})),e.prev=14,e.next=17,Promise.race([c,i.promise,s.connected()]);case 17:return e.prev=17,null!=u&&(null===r||void 0===r||null===(l=r.signal)||void 0===l||l.removeEventListener("abort",u)),e.finish(17);case 22:case"end":return e.stop()}}),e,this,[[14,,17,20]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createListener",value:function(e){return function(){throw new Error("WebSocket Servers can not be created in the browser!")}(jn(jn({},this.init),e))}},{key:"filter",value:function(e){var t,r;return e=Array.isArray(e)?e:[e],null!=(null===(t=this.init)||void 0===t?void 0:t.filter)?null===(r=this.init)||void 0===r?void 0:r.filter(e):goe||xoe?function(e){return e.filter((function(e){if(e.protoCodes().includes(290))return!1;var t=e.decapsulateCode(421);return nv.matches(t)&&Jd.matches(t.decapsulateCode(6).decapsulateCode(478))}))}(e):sbe(e)}}]),t}();function fbe(e){return new Uint8Array(e)}!function(e){e[e.NEW_STREAM=0]="NEW_STREAM",e[e.MESSAGE_RECEIVER=1]="MESSAGE_RECEIVER",e[e.MESSAGE_INITIATOR=2]="MESSAGE_INITIATOR",e[e.CLOSE_RECEIVER=3]="CLOSE_RECEIVER",e[e.CLOSE_INITIATOR=4]="CLOSE_INITIATOR",e[e.RESET_RECEIVER=5]="RESET_RECEIVER",e[e.RESET_INITIATOR=6]="RESET_INITIATOR"}(ube||(ube={}));var hbe=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),pbe=Object.freeze({NEW_STREAM:ube.NEW_STREAM,MESSAGE:ube.MESSAGE_INITIATOR,CLOSE:ube.CLOSE_INITIATOR,RESET:ube.RESET_INITIATOR}),dbe=Object.freeze({MESSAGE:ube.MESSAGE_RECEIVER,CLOSE:ube.CLOSE_RECEIVER,RESET:ube.RESET_RECEIVER}),vbe=1048576,ybe=function(e,t){return t.append(e)};function bbe(){return bbe=Hn((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function r(){var n,a,i,o,s,u,c,l,f,h;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=new ST,s=!1,u=xA(),c=Number(null!==(n=t.size)&&void 0!==n?n:vbe),(isNaN(c)||0===c||c<0)&&(c=vbe),l=null!==(a=t.yieldAfter)&&void 0!==a?a:0,f=null!==(i=t.serialize)&&void 0!==i?i:ybe,Promise.resolve().then(An(En().mark((function t(){var r,n,a,i,h,p,d;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,n=!1,a=!1,t.prev=3,h=zn(e);case 5:return t.next=7,h.next();case 7:if(!(n=!(p=t.sent).done)){t.next=18;break}if(d=p.value,f(d,o),!(o.byteLength>=c)){t.next=14;break}return clearTimeout(r),u.resolve(),t.abrupt("continue",15);case 14:r=setTimeout((function(){u.resolve()}),l);case 15:n=!1,t.next=5;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(3),a=!0,i=t.t0;case 24:if(t.prev=24,t.prev=25,!n||null==h.return){t.next=29;break}return t.next=29,h.return();case 29:if(t.prev=29,!a){t.next=32;break}throw i;case 32:return t.finish(29);case 33:return t.finish(24);case 34:clearTimeout(r),u.resolve(),t.next=41;break;case 38:t.prev=38,t.t1=t.catch(0),u.reject(t.t1);case 41:return t.prev=41,s=!0,t.finish(41);case 44:case"end":return t.stop()}}),t,null,[[0,38,41,44],[3,20,24,34],[25,,29,33]])}))));case 8:if(s){r.next=19;break}return r.next=11,Mf(u.promise);case 11:if(u=xA(),!(o.byteLength>0)){r.next=17;break}return h=o,o=new ST,r.next=17,h.subarray();case 17:r.next=8;break;case 19:case"end":return r.stop()}}),r)}))()})),bbe.apply(this,arguments)}var gbe=function(e){return bbe.apply(this,arguments)},mbe=10240,wbe=function(){function e(){Cn(this,e),this._pool=fbe(mbe),this._poolOffset=0}return Dn(e,[{key:"write",value:function(e,t){var r,n,a=this._pool,i=this._poolOffset;cd.encode(e.id<<3|e.type,a,i),i+=null!==(r=cd.encode.bytes)&&void 0!==r?r:0,e.type!==ube.NEW_STREAM&&e.type!==ube.MESSAGE_INITIATOR&&e.type!==ube.MESSAGE_RECEIVER||null==e.data?cd.encode(0,a,i):cd.encode(e.data.length,a,i),i+=null!==(n=cd.encode.bytes)&&void 0!==n?n:0;var o=a.subarray(this._poolOffset,i);mbe-i<100?(this._pool=fbe(mbe),this._poolOffset=0):this._poolOffset=i,t.append(o),e.type!==ube.NEW_STREAM&&e.type!==ube.MESSAGE_INITIATOR&&e.type!==ube.MESSAGE_RECEIVER||null==e.data||t.append(e.data)}}]),e}(),kbe=new wbe;function xbe(){return xbe=Hn((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return En().mark((function r(){var n,a,i,o,s,u,c,l,f,h;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!=t&&0!==t){r.next=34;break}n=!1,a=!1,r.prev=3,o=zn(e);case 5:return r.next=7,Mf(o.next());case 7:if(!(n=!(s=r.sent).done)){r.next=17;break}u=s.value,c=new ST,l=Ni(u);try{for(l.s();!(f=l.n()).done;)h=f.value,kbe.write(h,c)}catch(eL){l.e(eL)}finally{l.f()}return r.next=14,c.subarray();case 14:n=!1,r.next=5;break;case 17:r.next=23;break;case 19:r.prev=19,r.t0=r.catch(3),a=!0,i=r.t0;case 23:if(r.prev=23,r.prev=24,!n||null==o.return){r.next=28;break}return r.next=28,Mf(o.return());case 28:if(r.prev=28,!a){r.next=31;break}throw i;case 31:return r.finish(28);case 32:return r.finish(23);case 33:return r.abrupt("return");case 34:return r.delegateYield(Cb(zn(gbe(e,{size:t,serialize:function(e,t){var r,n=Ni(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;kbe.write(a,t)}}catch(eL){n.e(eL)}finally{n.f()}}}))),"t1",35);case 35:case"end":return r.stop()}}),r,null,[[3,19,23,33],[24,,28,32]])}))()})),xbe.apply(this,arguments)}var _be=1<<20,Ebe=4<<20,Sbe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_be,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ebe;Cn(this,e),this._buffer=new ST,this._headerInfo=null,this._maxMessageSize=t,this._maxUnprocessedMessageQueueSize=r}return Dn(e,[{key:"write",value:function(e){if(null==e||0===e.length)return[];if(this._buffer.append(e),this._buffer.byteLength>this._maxUnprocessedMessageQueueSize)throw Object.assign(new Error("unprocessed message queue size too large!"),{code:"ERR_MSG_QUEUE_TOO_BIG"});for(var t=[];0!==this._buffer.length;){if(null==this._headerInfo)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(eL){if("ERR_MSG_TOO_BIG"===eL.code)throw eL;break}var r=this._headerInfo,n=r.id,a=r.type,i=r.length,o=r.offset;if(this._buffer.length-o<i)break;var s={id:n,type:a};a!==ube.NEW_STREAM&&a!==ube.MESSAGE_INITIATOR&&a!==ube.MESSAGE_RECEIVER||(s.data=this._buffer.sublist(o,o+i)),t.push(s),this._buffer.consume(o+i),this._headerInfo=null}return t}},{key:"_decodeHeader",value:function(e){var t=Cbe(e),r=t.value,n=t.offset,a=Cbe(e,n),i=a.value,o=a.offset,s=7&r;if(null==hbe[s])throw new Error("Invalid type received: ".concat(s));if(i>this._maxMessageSize)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"});return{id:r>>3,type:s,offset:n+o,length:i}}}]),e}(),Abe=127;function Cbe(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0,a=0,i=r,o=e.length;do{if(i>=o||a>49)throw r=0,new RangeError("Could not decode varint");t=e.get(i++),n+=a<28?(t&Abe)<<a:(t&Abe)*Math.pow(2,a),a+=7}while(t>=128);return{value:n,offset:r=i-r}}var Ibe=ua("libp2p:mplex:stream"),Tbe="ERR_STREAM_RESET";var Dbe=ua("libp2p:mplex");function Rbe(e){var t=jn(jn({},e),{},{type:"".concat(hbe[e.type]," (").concat(e.type,")")});return e.type===ube.NEW_STREAM&&(t.data=kh(e.data instanceof Uint8Array?e.data:e.data.subarray())),e.type!==ube.MESSAGE_INITIATOR&&e.type!==ube.MESSAGE_RECEIVER||(t.data=kh(e.data instanceof Uint8Array?e.data:e.data.subarray(),"base16")),t}var Pbe,Nbe,Lbe=function(){function e(t){var r,n;Cn(this,e),this.protocol="/mplex/6.7.0",t=null!==(r=t)&&void 0!==r?r:{},this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._init=t,this.sink=this._createSink();var a=this._createSource();this._source=a,this.source=a,this.closeController=new AbortController,this.rateLimiter=new Bne.RateLimiterMemory({points:null!==(n=t.disconnectThreshold)&&void 0!==n?n:5,duration:1})}return Dn(e,[{key:"streams",get:function(){var e,t=[],r=Ni(this._streams.initiators.values());try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(n)}}catch(eL){r.e(eL)}finally{r.f()}var a,i=Ni(this._streams.receivers.values());try{for(i.s();!(a=i.n()).done;){var o=a.value;t.push(o)}}catch(eL){i.e(eL)}finally{i.f()}return t}},{key:"newStream",value:function(e){if(this.closeController.signal.aborted)throw new Error("Muxer already closed");var t=this._streamId++;e=null==e?t.toString():e.toString();var r=this._streams.initiators;return this._newStream({id:t,name:e,type:"initiator",registry:r})}},{key:"close",value:function(e){this.closeController.signal.aborted||(null!=e?this.streams.forEach((function(t){return t.abort(e)})):this.streams.forEach((function(e){return e.close()})),this.closeController.abort())}},{key:"_newReceiverStream",value:function(e){var t=e.id,r=e.name,n=this._streams.receivers;return this._newStream({id:t,name:r,type:"receiver",registry:n})}},{key:"_newStream",value:function(e){var t,r=this,n=e.id,a=e.name,i=e.type,o=e.registry;if(Dbe("new %s stream %s",i,n),"initiator"===i&&this._streams.initiators.size===(null!==(t=this._init.maxOutboundStreams)&&void 0!==t?t:1024))throw ca(new Error("Too many outbound streams open"),"ERR_TOO_MANY_OUTBOUND_STREAMS");if(o.has(n))throw new Error("".concat(i," stream ").concat(n," already exists!"));var s=function(e){var t,r=e.id,n=e.name,a=e.send,i=e.onEnd,o=e.type,s=void 0===o?"initiator":o,u=e.maxMsgSize,c=void 0===u?_be:u,l=new AbortController,f=new AbortController,h=new AbortController,p="initiator"===s?pbe:dbe,d="initiator"===s?"i".concat(r):"r".concat(r),v="".concat(null==n?r:n),y=!1,b=!1,g=!1,m={open:Date.now()},w=function(e){b||(b=!0,Ibe.trace("%s stream %s sink end - err: %o",s,v,e),null!=e&&null==t&&(t=e),y&&(m.close=Date.now(),null!=i&&i(t)))},k=pS({onEnd:function(e){y||(y=!0,Ibe.trace("%s stream %s source end - err: %o",s,v,e),null!=e&&null==t&&(t=e),b&&(x.stat.timeline.close=Date.now(),null!=i&&i(t)))}}),x={close:function(){Ibe.trace("%s stream %s close",s,v),x.closeRead(),x.closeWrite()},closeRead:function(){Ibe.trace("%s stream %s closeRead",s,v),y||k.end()},closeWrite:function(){if(Ibe.trace("%s stream %s closeWrite",s,v),!b){h.abort();try{a({id:r,type:p.CLOSE})}catch(eL){Ibe.trace("%s stream %s error sending close",s,n,eL)}w()}},abort:function(e){Ibe.trace("%s stream %s abort",s,v,e),k.end(e),l.abort(),w(e)},reset:function(){var e=ca(new Error("stream reset"),Tbe);f.abort(),k.end(e),w(e)},sink:function(){var e=An(En().mark((function e(t){var i,o,u,d,y,m;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=2;break}throw ca(new Error("sink already called on stream"),"ERR_DOUBLE_SINK");case 2:if(g=!0,!b){e.next=5;break}throw ca(new Error("stream closed for writing"),"ERR_SINK_ENDED");case 5:t=U$(t,(0,Wv.anySignal)([l.signal,f.signal,h.signal])),e.prev=6,"initiator"===s&&a({id:r,type:pbe.NEW_STREAM,data:new ST(Bf(v))}),i=!1,o=!1,e.prev=10,d=zn(t);case 12:return e.next=14,d.next();case 14:if(!(i=!(y=e.sent).done)){e.next=28;break}m=y.value;case 16:if(!(m.length>0)){e.next=25;break}if(!(m.length<=c)){e.next=20;break}return a({id:r,type:p.MESSAGE,data:m instanceof Uint8Array?new ST(m):m}),e.abrupt("break",25);case 20:m=m instanceof Uint8Array?new ST(m):m,a({id:r,type:p.MESSAGE,data:m.sublist(0,c)}),m.consume(c),e.next=16;break;case 25:i=!1,e.next=12;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(10),o=!0,u=e.t0;case 34:if(e.prev=34,e.prev=35,!i||null==d.return){e.next=39;break}return e.next=39,d.return();case 39:if(e.prev=39,!o){e.next=42;break}throw u;case 42:return e.finish(39);case 43:return e.finish(34);case 44:e.next=57;break;case 46:if(e.prev=46,e.t1=e.catch(6),"aborted"!==e.t1.type||"The operation was aborted"!==e.t1.message){e.next=53;break}if(!h.signal.aborted){e.next=51;break}return e.abrupt("return");case 51:f.signal.aborted&&(e.t1.message="stream reset",e.t1.code=Tbe),l.signal.aborted&&(e.t1.message="stream aborted",e.t1.code="ERR_STREAM_ABORT");case 53:if(e.t1.code===Tbe)Ibe.trace("%s stream %s reset",s,n);else{Ibe.trace("%s stream %s error",s,n,e.t1);try{a({id:r,type:p.RESET})}catch(eL){Ibe.trace("%s stream %s error sending reset",s,n,eL)}}return k.end(e.t1),w(e.t1),e.abrupt("return");case 57:try{a({id:r,type:p.CLOSE})}catch(eL){Ibe.trace("%s stream %s error sending close",s,n,eL)}w();case 59:case"end":return e.stop()}}),e,null,[[6,46],[10,30,34,44],[35,,39,43]])})));return function(t){return e.apply(this,arguments)}}(),source:k,sourcePush:function(e){k.push(e)},sourceReadableLength:function(){return k.readableLength},stat:{direction:"initiator"===s?"outbound":"inbound",timeline:m},metadata:{},id:d};return x}({id:n,name:a,send:function(e){Dbe.enabled&&Dbe.trace("%s stream %s send",i,n,Rbe(e)),r._source.push(e)},type:i,onEnd:function(){Dbe("%s stream with id %s and protocol %s ended",i,n,s.stat.protocol),o.delete(n),null!=r._init.onStreamEnd&&r._init.onStreamEnd(s)},maxMsgSize:this._init.maxMsgSize});return o.set(n,s),s}},{key:"_createSink",value:function(){var e=this,t=function(){var t=An(En().mark((function t(r){var n,a,i,o,s,u,c,l,f,h,p;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[e.closeController.signal],null!=e._init.signal&&n.push(e._init.signal),r=U$(r,Wv(n)),t.prev=3,a=new Sbe(e._init.maxMsgSize,e._init.maxUnprocessedMessageQueueSize),i=!1,o=!1,t.prev=7,u=zn(r);case 9:return t.next=11,u.next();case 11:if(!(i=!(c=t.sent).done)){t.next=33;break}l=c.value,f=Ni(a.write(l)),t.prev=14,f.s();case 16:if((h=f.n()).done){t.next=22;break}return p=h.value,t.next=20,e._handleIncoming(p);case 20:t.next=16;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(14),f.e(t.t0);case 27:return t.prev=27,f.f(),t.finish(27);case 30:i=!1,t.next=9;break;case 33:t.next=39;break;case 35:t.prev=35,t.t1=t.catch(7),o=!0,s=t.t1;case 39:if(t.prev=39,t.prev=40,!i||null==u.return){t.next=44;break}return t.next=44,u.return();case 44:if(t.prev=44,!o){t.next=47;break}throw s;case 47:return t.finish(44);case 48:return t.finish(39);case 49:e._source.end(),t.next=56;break;case 52:t.prev=52,t.t2=t.catch(3),Dbe("error in sink",t.t2),e._source.end(t.t2);case 56:case"end":return t.stop()}}),t,null,[[3,52],[7,35,39,49],[14,24,27,30],[40,,44,48]])})));return function(e){return t.apply(this,arguments)}}();return t}},{key:"_createSource",value:function(){var e=this,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){for(var t,r=[];!e.isEmpty()&&null!=(t=e.shift());){if(null!=t.error)throw t.error;!1===t.done&&r.push(t.value)}return null==t?{done:!0}:{done:!0===t.done,value:r}};return dS(t,e)}({objectMode:!0,onEnd:function(t){e.close(t)}});return Object.assign(function(e){return xbe.apply(this,arguments)}(t,this._init.minSendBytes),{push:t.push,end:t.end,return:t.return})}},{key:"_handleIncoming",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,a=t.type,Dbe.enabled&&Dbe.trace("incoming message",Rbe(t)),t.type!==ube.NEW_STREAM){e.next=20;break}if(this._streams.receivers.size!==(null!==(i=this._init.maxInboundStreams)&&void 0!==i?i:1024)){e.next=17;break}return Dbe("too many inbound streams open"),this._source.push({id:n,type:ube.RESET_RECEIVER}),e.prev=6,e.next=9,this.rateLimiter.consume("new-stream",1);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(6),Dbe("rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection"),this._source.end(new Error("Too many open streams")),e.abrupt("return");case 16:return e.abrupt("return");case 17:return o=this._newReceiverStream({id:n,name:kh(t.data instanceof Uint8Array?t.data:t.data.subarray())}),null!=this._init.onIncomingStream&&this._init.onIncomingStream(o),e.abrupt("return");case 20:if(s=1===(1&a)?this._streams.initiators:this._streams.receivers,null!=(u=s.get(n))){e.next=25;break}return Dbe("missing stream %s for message type %s",n,hbe[a]),e.abrupt("return");case 25:c=null!==(r=this._init.maxStreamBufferSize)&&void 0!==r?r:4194304,e.t1=a,e.next=e.t1===ube.MESSAGE_INITIATOR||e.t1===ube.MESSAGE_RECEIVER?29:e.t1===ube.CLOSE_INITIATOR||e.t1===ube.CLOSE_RECEIVER?36:e.t1===ube.RESET_INITIATOR||e.t1===ube.RESET_RECEIVER?38:40;break;case 29:if(!(u.sourceReadableLength()>c)){e.next=34;break}return this._source.push({id:t.id,type:a===ube.MESSAGE_INITIATOR?ube.RESET_RECEIVER:ube.RESET_INITIATOR}),l=ca(new Error("Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers"),"ERR_STREAM_INPUT_BUFFER_FULL"),u.abort(l),e.abrupt("return");case 34:return u.sourcePush(t.data),e.abrupt("break",41);case 36:return u.closeRead(),e.abrupt("break",41);case 38:return u.reset(),e.abrupt("break",41);case 40:Dbe("unknown message type %s",a);case 41:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Obe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Cn(this,e),this.protocol="/mplex/6.7.0",this._init=t}return Dn(e,[{key:"createStreamMuxer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Lbe(jn(jn({},e),this._init))}}]),e}();function Bbe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){return new Obe(e)}}function Ube(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Zne(e),n=K$.fromReader(r.reader,t),a={read:function(){var e=An(En().mark((function e(t){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.reader.next(t);case 2:if(n=e.sent,null!=(a=n.value)){e.next=6;break}throw new Error("Value is null");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),readLP:function(){var e=An(En().mark((function e(){var t,r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.next();case 2:if(t=e.sent,null!=(r=t.value)){e.next=6;break}throw new Error("Value is null");case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),readPB:function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.readLP();case 2:if(null!=(r=e.sent)){e.next=5;break}throw new Error("Value is null");case 5:return n=r instanceof Uint8Array?r:r.subarray(),e.abrupt("return",t.decode(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),write:function(e){e instanceof Uint8Array?r.writer.push(e):r.writer.push(e.subarray())},writeLP:function(e){a.write(V$.single(e,t))},writePB:function(e,t){a.writeLP(t.encode(e))},pb:function(e){return{read:function(){var t=An(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.readPB(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),write:function(t){return a.writePB(t,e)}}},unwrap:function(){return r.rest(),r.stream}};return a}function Mbe(){var e=xA(),t=!1;return{sink:function(){var r=An(En().mark((function r(n){return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=2;break}throw new Error("already piped");case 2:t=!0,e.resolve(n);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),source:Hn(En().mark((function t(){var r;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Mf(e.promise);case 2:return r=t.sent,t.delegateYield(Cb(zn(r)),"t0",4);case 4:case"end":return t.stop()}}),t)})))()}}function zbe(){var e=Mbe(),t=Mbe();return[{source:e.source,sink:t.sink},{source:t.source,sink:e.sink}]}var Fbe=65535,Vbe=Boolean(null===(Pbe=globalThis.process)||void 0===Pbe||null===(Nbe=Pbe.env)||void 0===Nbe?void 0:Nbe.DUMP_SESSION_KEYS),jbe=__webpack_require__(7887),qbe=__webpack_require__(9109),Kbe=__webpack_require__(1234),Hbe=__webpack_require__(6555),Gbe={hashSHA256:function(e){return(0,Kbe.vp)(e)},getHKDF:function(e,t){var r=new jbe.t(Kbe.mE,t,e).expand(96);return[r.subarray(0,32),r.subarray(32,64),r.subarray(64,96)]},generateX25519KeyPair:function(){var e=qbe.Au();return{publicKey:e.publicKey,privateKey:e.secretKey}},generateX25519KeyPairFromSeed:function(e){var t=qbe._w(e);return{publicKey:t.publicKey,privateKey:t.secretKey}},generateX25519SharedKey:function(e,t){return qbe.gi(e,t)},chaCha20Poly1305Encrypt:function(e,t,r,n){return new Hbe.OK(n).seal(t,e,r)},chaCha20Poly1305Decrypt:function(e,t,r,n,a){return new Hbe.OK(n).open(t,e,r,a)}},Wbe=function(e){var t,r=(t=2,globalThis.Buffer?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t));return new DataView(r.buffer,r.byteOffset,r.byteLength).setUint16(0,e,!1),r};Wbe.bytes=2;var Ybe=function(e){if(e.length<2)throw RangeError("Could not decode int16BE");return e instanceof Uint8Array?new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1):e.getUint16(0)};function Qbe(e){return ld([e.ne,e.ciphertext],e.ne.length+e.ciphertext.length)}function Jbe(e){return ld([e.ne,e.ns,e.ciphertext],e.ne.length+e.ns.length+e.ciphertext.length)}function Zbe(e){return ld([e.ns,e.ciphertext],e.ns.length+e.ciphertext.length)}function Xbe(e){if(e.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:e.subarray(0,32),ciphertext:e.subarray(32,e.length),ns:new Uint8Array(0)}}function $be(e){if(e.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:e.subarray(0,32),ns:e.subarray(32,80),ciphertext:e.subarray(80,e.length)}}function ege(e){if(e.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:e.subarray(0,48),ciphertext:e.subarray(48,e.length)}}function tge(e,t){return function(){var r=Hn(En().mark((function r(n){var a,i,o,s,u,c,l,f,h;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=!1,i=!1,r.prev=2,s=zn(n);case 4:return r.next=6,Mf(s.next());case 6:if(!(a=!(u=r.sent).done)){r.next=24;break}c=u.value,l=0;case 9:if(!(l<c.length)){r.next=21;break}return(f=l+65519)>c.length&&(f=c.length),h=e.encrypt(c.subarray(l,f),e.session),null===t||void 0===t||t.encryptedPackets.increment(),r.next=16,Wbe(h.byteLength);case 16:return r.next=18,h;case 18:l+=65519,r.next=9;break;case 21:a=!1,r.next=4;break;case 24:r.next=30;break;case 26:r.prev=26,r.t0=r.catch(2),i=!0,o=r.t0;case 30:if(r.prev=30,r.prev=31,!a||null==s.return){r.next=35;break}return r.next=35,Mf(s.return());case 35:if(r.prev=35,!i){r.next=38;break}throw o;case 38:return r.finish(35);case 39:return r.finish(30);case 40:case"end":return r.stop()}}),r,null,[[2,26,30,40],[31,,35,39]])})));return function(e){return r.apply(this,arguments)}}()}function rge(e,t){return function(){var r=Hn(En().mark((function r(n){var a,i,o,s,u,c,l,f,h,p,d,v;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=!1,i=!1,r.prev=2,s=zn(n);case 4:return r.next=6,Mf(s.next());case 6:if(!(a=!(u=r.sent).done)){r.next=29;break}c=u.value,l=0;case 9:if(!(l<c.length)){r.next=26;break}if((f=l+Fbe)>c.length&&(f=c.length),!(f-Hbe.pg<l)){r.next=14;break}throw new Error("Invalid chunk");case 14:if(h=c.subarray(l,f),p=c.subarray(l,f-Hbe.pg),d=e.decrypt(h,e.session,p),v=d.plaintext,d.valid){r.next=20;break}throw null===t||void 0===t||t.decryptErrors.increment(),new Error("Failed to validate decrypted chunk");case 20:return null===t||void 0===t||t.decryptedPackets.increment(),r.next=23,v;case 23:l+=Fbe,r.next=9;break;case 26:a=!1,r.next=4;break;case 29:r.next=35;break;case 31:r.prev=31,r.t0=r.catch(2),i=!0,o=r.t0;case 35:if(r.prev=35,r.prev=36,!a||null==s.return){r.next=40;break}return r.next=40,Mf(s.return());case 40:if(r.prev=40,!i){r.next=43;break}throw o;case 43:return r.finish(40);case 44:return r.finish(35);case 45:case"end":return r.stop()}}),r,null,[[2,31,35,45],[36,,40,44]])})));return function(e){return r.apply(this,arguments)}}()}Ybe.bytes=2;var nge=function(e){Pn(r,e);var t=Un(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected Peer";return Cn(this,r),(e=t.call(this,n)).code=r.code,e}return Dn(r,null,[{key:"code",get:function(){return"ERR_UNEXPECTED_PEER"}}]),r}(nu(Error)),age=function(e){Pn(r,e);var t=Un(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid crypto exchange";return Cn(this,r),(e=t.call(this,n)).code=r.code,e}return Dn(r,null,[{key:"code",get:function(){return"ERR_INVALID_CRYPTO_EXCHANGE"}}]),r}(nu(Error)),ige=(Error,function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=oge;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r}),oge=Math.pow(2,31);var sge=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var uge=Math.pow(2,7),cge=Math.pow(2,14),lge=Math.pow(2,21),fge=Math.pow(2,28),hge=Math.pow(2,35),pge=Math.pow(2,42),dge=Math.pow(2,49),vge=Math.pow(2,56),yge=Math.pow(2,63),bge={encode:ige,decode:sge,encodingLength:function(e){return e<uge?1:e<cge?2:e<lge?3:e<fge?4:e<hge?5:e<pge?6:e<dge?7:e<vge?8:e<yge?9:10}},gge=bge,mge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=gge.decode(e,t);return[r,gge.decode.bytes]},wge=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return gge.encode(e,t,r),t},kge=function(e){return gge.encodingLength(e)},xge=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),_ge=function(e,t){var r=t.byteLength,n=kge(e),a=n+kge(r),i=new Uint8Array(a+r);return wge(e,i,0),wge(r,i,n),i.set(t,a),new Sge(e,r,t,i)},Ege=function(e){var t=xge(e),r=Ia(mge(t),2),n=r[0],a=r[1],i=Ia(mge(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new Sge(n,o,u,t)},Sge=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var Age=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Cge=Age,Ige=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),Tge=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Rge(this,e)}}]),e}(),Dge=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return Rge(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Rge=function(e,t){return new Dge(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},Pge=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Ige(t,r,n),this.decoder=new Tge(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Nge=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new Pge(t,r,n,a)},Lge=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Cge(n,r),i=a.encode,o=a.decode;return Nge({prefix:t,name:r,encode:i,decode:function(e){return xge(o(e))}})},Oge=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return Nge({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},Bge=Lge({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Uge=Lge({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Mge=Oge({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),zge=Oge({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Fge=Oge({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Vge=Oge({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),jge=Oge({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),qge=Oge({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Kge=Oge({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Hge=Oge({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Gge=Oge({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Wge=function(e,t){var r=e.bytes;return 0===e.version?Xge(r,Qge(e),t||Bge.encoder):$ge(r,Qge(e),t||Mge.encoder)},Yge=new WeakMap,Qge=function(e){var t=Yge.get(e);if(null==t){var r=new Map;return Yge.set(e,r),r}return t},Jge=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==eme)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==tme)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=_ge(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return Wge(this,e)}},{key:"toJSON",value:function(){return{"/":Wge(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||rme(n,a,i.bytes))}if(!0===t[nme]){var o=t.version,s=t.multihash,u=t.code,c=Ege(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==eme)throw new Error("Version 0 CID must use dag-pb (code: ".concat(eme,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,rme(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,eme,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=xge(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new Sge(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(mge(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=eme;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(Zge(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return Qge(o).set(a,e),o}}]),r}(),Zge=function(e,t){switch(e[0]){case"Q":var r=t||Bge;return[Bge.prefix,r.decode("".concat(Bge.prefix).concat(e))];case Bge.prefix:var n=t||Bge;return[Bge.prefix,n.decode(e)];case Mge.prefix:var a=t||Mge;return[Mge.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Xge=function(e,t,r){var n=r.prefix;if(n!==Bge.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},$ge=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},eme=112,tme=18,rme=function(e,t,r){var n=kge(e),a=n+kge(t),i=new Uint8Array(a+r.byteLength);return wge(e,i,0),wge(t,i,n),i.set(r,a),i},nme=Symbol.for("@ipld/js-cid/CID"),ame=Nge({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),ime=Oge({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ome=Oge({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),sme=Lge({prefix:"9",name:"base10",alphabet:"0123456789"}),ume=Oge({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cme=Oge({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),lme=Lge({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),fme=Lge({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),hme=Oge({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pme=Oge({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),dme=Oge({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),vme=Oge({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),yme=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),bme=yme.reduce((function(e,t,r){return e[r]=t,e}),[]),gme=yme.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var mme,wme,kme=Nge({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=bme[t]}),"")},decode:function(e){var t,r=[],n=Ni(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=gme[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(eL){n.e(eL)}finally{n.f()}return new Uint8Array(r)}}),xme=function(e){var t=e.name,r=e.code,n=e.encode;return new _me(t,r,n)},_me=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?_ge(this.code,r):r.then((function(e){return _ge(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),Eme=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Sme=xme({name:"sha2-256",code:18,encode:Eme("SHA-256")}),Ame=xme({name:"sha2-512",code:19,encode:Eme("SHA-512")}),Cme=xge,Ime={code:0,name:"identity",encode:Cme,digest:function(e){return _ge(0,Cme(e))}},Tme="raw",Dme=85,Rme=function(e){return xge(e)},Pme=function(e){return xge(e)},Nme=new TextEncoder,Lme=new TextDecoder,Ome="json",Bme=512,Ume=function(e){return Nme.encode(JSON.stringify(e))},Mme=function(e){return JSON.parse(Lme.decode(e))},zme=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn({},un),cn),ln),fn),hn),sn),pn),on),dn),vn),Fme=(jn(jn({},yn),bn),Symbol.for("nodejs.util.inspect.custom")),Vme=Object.values(zme).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),zme.identity.decoder),jme=36,qme=37,Kme=function(e){function t(e){Cn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Dn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:fb,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=Bge.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return Jge.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return Pd(this.multihash.bytes,e);if("string"===typeof e)return function(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:Vme,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=Ege(Bge.decode("z".concat(e)));return e.startsWith("12D")?new Gme({multihash:n}):e.startsWith("16U")?new Wme({multihash:n}):new Hme({multihash:n})}return function(e){try{var t=Ege(e);if(t.code===Ime.code){if(36===t.digest.length)return new Gme({multihash:t});if(37===t.digest.length)return new Wme({multihash:t})}if(t.code===Sme.code)return new Hme({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===Sme.code)return new Hme({multihash:e.multihash});if(t.code===Ime.code){if(t.digest.length===jme)return new Gme({multihash:e.multihash});if(t.digest.length===qme)return new Wme({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(Jge.decode(e))}throw new Error("Supplied PeerID CID is invalid")}(Vme.decode(e))}(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Pd(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:Fme,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),Hme=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Dn(r)}(Kme),Gme=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Dn(r)}(Kme),Wme=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this,jn(jn({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Dn(r)}(Kme);function Yme(e,t){return Qme.apply(this,arguments)}function Qme(){return(Qme=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length!==jme){e.next=2;break}return e.abrupt("return",new Gme({multihash:_ge(Ime.code,t),privateKey:r}));case 2:if(t.length!==qme){e.next=4;break}return e.abrupt("return",new Wme({multihash:_ge(Ime.code,t),privateKey:r}));case 4:return e.t0=Hme,e.next=7,Sme.digest(t);case 7:return e.t1=e.sent,e.t2=t,e.t3=r,e.t4={multihash:e.t1,publicKey:e.t2,privateKey:e.t3},e.abrupt("return",new e.t0(e.t4));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jme(e,t,r){return Zme.apply(this,arguments)}function Zme(){return(Zme=An(En().mark((function e(t,r,n){var a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$me(t,awe(r));case 2:if(a=e.sent,null!=t.publicKey){e.next=5;break}throw new Error("PublicKey was missing from local PeerId");case 5:return e.abrupt("return",Xme(t.publicKey,a,n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xme(e,t,r){return wme.encode({identityKey:e,identitySig:t,extensions:null!==r&&void 0!==r?r:{webtransportCerthashes:[]}}).subarray()}function $me(e,t){return ewe.apply(this,arguments)}function ewe(){return(ewe=An(En().mark((function e(t,r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.privateKey){e.next=2;break}throw new Error("PrivateKey was missing from PeerId");case 2:return e.next=4,xx(t.privateKey);case 4:return n=e.sent,e.next=7,n.sign(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function twe(e){return rwe.apply(this,arguments)}function rwe(){return(rwe=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yme(t.identityKey);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nwe(e){return wme.decode(e)}function awe(e){var t=Bf("noise-libp2p-static-key:");return ld([t,e],t.length+e.length)}function iwe(e,t,r){return owe.apply(this,arguments)}function owe(){return(owe=An(En().mark((function e(t,r,n){var a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yme(r.identityKey);case 2:if((a=e.sent).equals(n)){e.next=5;break}throw new Error("Peer ID doesn't match libp2p public key.");case 5:if(i=awe(t),null!=a.publicKey){e.next=8;break}throw new Error("PublicKey was missing from PeerId");case 8:if(null!=r.identitySig){e.next=10;break}throw new Error("Signature was missing from message");case 10:return o=wx(a.publicKey),e.next=13,o.verify(i,r.identitySig);case 13:if(e.sent){e.next=16;break}throw new Error("Static key doesn't match to peer that signed payload!");case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function swe(e){return e instanceof Uint8Array&&32===e.length}!function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null!=e.webtransportCerthashes){var n,a=Ni(e.webtransportCerthashes);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.uint32(10),t.bytes(i)}}catch(eL){a.e(eL)}finally{a.f()}}!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={webtransportCerthashes:[]},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();if(a>>>3===1)r.webtransportCerthashes.push(e.bytes());else e.skipType(7&a)}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(mme||(mme={})),function(e){var t;e.codec=function(){return null==t&&(t=ag((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.identityKey&&e.identityKey.byteLength>0)&&(t.uint32(10),t.bytes(e.identityKey)),(!0===r.writeDefaults||null!=e.identitySig&&e.identitySig.byteLength>0)&&(t.uint32(18),t.bytes(e.identitySig)),null!=e.extensions&&(t.uint32(34),mme.codec().encode(e.extensions,t,{writeDefaults:!1})),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={identityKey:new Uint8Array(0),identitySig:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.identityKey=e.bytes();break;case 2:r.identitySig=e.bytes();break;case 4:r.extensions=mme.codec().decode(e,e.uint32());break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return tg(t,e.codec())},e.decode=function(t){return eg(t,e.codec())}}(wme||(wme={}));var uwe,cwe=ua("libp2p:noise");function lwe(e){e?(uwe("LOCAL_PUBLIC_EPHEMERAL_KEY ".concat(kh(e.publicKey,"hex"))),uwe("LOCAL_PRIVATE_EPHEMERAL_KEY ".concat(kh(e.privateKey,"hex")))):uwe("Missing local ephemeral keys.")}function fwe(e){uwe("REMOTE_EPHEMERAL_PUBLIC_KEY ".concat(kh(e,"hex")))}uwe=Vbe?cwe:Object.assign((function(){}),{enabled:!1,trace:function(){},error:function(){}});var hwe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Cn(this,e),this.n=t,this.bytes=new Uint8Array(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,t,!0)}return Dn(e,[{key:"increment",value:function(){this.n++,this.view.setUint32(4,this.n,!0)}},{key:"getBytes",value:function(){return this.bytes}},{key:"getUint64",value:function(){return this.n}},{key:"assertValue",value:function(){if(this.n>4294967295)throw new Error("Cipherstate has reached maximum n, a new handshake must be performed")}}]),e}(),pwe=function(){function e(t){Cn(this,e),this.crypto=t}return Dn(e,[{key:"encryptWithAd",value:function(e,t,r){var n=this.encrypt(e.k,e.n,t,r);return e.n.increment(),n}},{key:"decryptWithAd",value:function(e,t,r,n){var a=this.decrypt(e.k,e.n,t,r,n),i=a.plaintext,o=a.valid;return o&&e.n.increment(),{plaintext:i,valid:o}}},{key:"hasKey",value:function(e){return!this.isEmptyKey(e.k)}},{key:"createEmptyKey",value:function(){return new Uint8Array(32)}},{key:"isEmptyKey",value:function(e){return Pd(this.createEmptyKey(),e)}},{key:"encrypt",value:function(e,t,r,n){return t.assertValue(),this.crypto.chaCha20Poly1305Encrypt(n,t.getBytes(),r,e)}},{key:"encryptAndHash",value:function(e,t){var r;return r=this.hasKey(e.cs)?this.encryptWithAd(e.cs,e.h,t):t,this.mixHash(e,r),r}},{key:"decrypt",value:function(e,t,r,n,a){t.assertValue();var i=this.crypto.chaCha20Poly1305Decrypt(n,t.getBytes(),r,e,a);return i?{plaintext:i,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}},{key:"decryptAndHash",value:function(e,t){var r,n=!0;if(this.hasKey(e.cs)){var a=this.decryptWithAd(e.cs,e.h,t);r=a.plaintext,n=a.valid}else r=t;return this.mixHash(e,t),{plaintext:r,valid:n}}},{key:"dh",value:function(e,t){try{var r=this.crypto.generateX25519SharedKey(e,t);return 32===r.length?r:r.subarray(0,32)}catch(n){return cwe(n.message),new Uint8Array(32)}}},{key:"mixHash",value:function(e,t){e.h=this.getHash(e.h,t)}},{key:"getHash",value:function(e,t){return this.crypto.hashSHA256(ld([e,t],e.length+t.length))}},{key:"mixKey",value:function(e,t){var r=Ia(this.crypto.getHKDF(e.ck,t),2),n=r[0],a=r[1];e.cs=this.initializeKey(a),e.ck=n}},{key:"initializeKey",value:function(e){return{k:e,n:new hwe}}},{key:"initializeSymmetric",value:function(e){var t=Bf(e,"utf-8"),r=this.hashProtocolName(t),n=r,a=this.createEmptyKey();return{cs:this.initializeKey(a),ck:n,h:r}}},{key:"hashProtocolName",value:function(e){if(e.length<=32){var t=new Uint8Array(32);return t.set(e),t}return this.getHash(e,new Uint8Array(0))}},{key:"split",value:function(e){var t=Ia(this.crypto.getHKDF(e.ck,new Uint8Array(0)),2),r=t[0],n=t[1];return{cs1:this.initializeKey(r),cs2:this.initializeKey(n)}}},{key:"writeMessageRegular",value:function(e,t){var r=this.encryptWithAd(e,new Uint8Array(0),t);return{ne:this.createEmptyKey(),ns:new Uint8Array(0),ciphertext:r}}},{key:"readMessageRegular",value:function(e,t){return this.decryptWithAd(e,new Uint8Array(0),t.ciphertext)}}]),e}(),dwe=function(e){Pn(r,e);var t=Un(r);function r(){return Cn(this,r),t.apply(this,arguments)}return Dn(r,[{key:"initializeInitiator",value:function(e,t,r,n){var a=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");return this.mixHash(a,e),{ss:a,s:t,rs:r,psk:n,re:new Uint8Array(32)}}},{key:"initializeResponder",value:function(e,t,r,n){var a=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");return this.mixHash(a,e),{ss:a,s:t,rs:r,psk:n,re:new Uint8Array(32)}}},{key:"writeMessageA",value:function(e,t,r){var n=new Uint8Array(0);e.e=void 0!==r?r:this.crypto.generateX25519KeyPair();var a=e.e.publicKey;return this.mixHash(e.ss,a),{ne:a,ns:n,ciphertext:this.encryptAndHash(e.ss,t)}}},{key:"writeMessageB",value:function(e,t){e.e=this.crypto.generateX25519KeyPair();var r=e.e.publicKey;this.mixHash(e.ss,r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));var n=e.s.publicKey,a=this.encryptAndHash(e.ss,n);return this.mixKey(e.ss,this.dh(e.s.privateKey,e.re)),{ne:r,ns:a,ciphertext:this.encryptAndHash(e.ss,t)}}},{key:"writeMessageC",value:function(e,t){var r=e.s.publicKey,n=this.encryptAndHash(e.ss,r);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));var a=this.encryptAndHash(e.ss,t),i={ne:this.createEmptyKey(),ns:n,ciphertext:a},o=this.split(e.ss),s=o.cs1,u=o.cs2;return{h:e.ss.h,messageBuffer:i,cs1:s,cs2:u}}},{key:"readMessageA",value:function(e,t){return swe(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,t.ciphertext)}},{key:"readMessageB",value:function(e,t){if(swe(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));var r=this.decryptAndHash(e.ss,t.ns),n=r.plaintext,a=r.valid;a&&swe(n)&&(e.rs=n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));var i=this.decryptAndHash(e.ss,t.ciphertext),o=i.plaintext,s=i.valid;return{plaintext:o,valid:a&&s}}},{key:"readMessageC",value:function(e,t){var r=this.decryptAndHash(e.ss,t.ns),n=r.plaintext,a=r.valid;if(a&&swe(n)&&(e.rs=n),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));var i=this.decryptAndHash(e.ss,t.ciphertext),o=i.plaintext,s=i.valid,u=this.split(e.ss),c=u.cs1,l=u.cs2;return{h:e.ss.h,plaintext:o,valid:a&&s,cs1:c,cs2:l}}},{key:"initSession",value:function(e,t,r){var n=this.createEmptyKey(),a=new Uint8Array(32);return{hs:e?this.initializeInitiator(t,r,a,n):this.initializeResponder(t,r,a,n),i:e,mc:0}}},{key:"sendMessage",value:function(e,t,r){var n;if(0===e.mc)n=this.writeMessageA(e.hs,t,r);else if(1===e.mc)n=this.writeMessageB(e.hs,t);else if(2===e.mc){var a=this.writeMessageC(e.hs,t),i=a.h,o=a.messageBuffer,s=a.cs1,u=a.cs2;n=o,e.h=i,e.cs1=s,e.cs2=u}else{if(!(e.mc>2))throw new Error("Session invalid.");if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(e.cs1,t)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(e.cs2,t)}}return e.mc++,n}},{key:"recvMessage",value:function(e,t){var r=new Uint8Array(0),n=!1;if(0===e.mc){var a=this.readMessageA(e.hs,t);r=a.plaintext,n=a.valid}else if(1===e.mc){var i=this.readMessageB(e.hs,t);r=i.plaintext,n=i.valid}else if(2===e.mc){var o=this.readMessageC(e.hs,t),s=o.h,u=o.plaintext,c=o.valid,l=o.cs1,f=o.cs2;r=u,n=c,e.h=s,e.cs1=l,e.cs2=f}return e.mc++,{plaintext:r,valid:n}}}]),r}(pwe),vwe=function(){function e(t,r,n,a,i,o,s,u){Cn(this,e),this.remoteExtensions={webtransportCerthashes:[]},this.isInitiator=t,this.payload=r,this.prologue=n,this.staticKeypair=i,this.connection=o,s&&(this.remotePeer=s),this.xx=null!==u&&void 0!==u?u:new dwe(a),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair)}return Dn(e,[{key:"propose",value:function(){var e=An(En().mark((function e(){var t,r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.session.hs.s,uwe("LOCAL_STATIC_PUBLIC_KEY ".concat(kh(a.publicKey,"hex"))),uwe("LOCAL_STATIC_PRIVATE_KEY ".concat(kh(a.privateKey,"hex"))),!this.isInitiator){e.next=9;break}cwe("Stage 0 - Initiator starting to send first message."),t=this.xx.sendMessage(this.session,new Uint8Array(0)),this.connection.writeLP(Qbe(t)),cwe("Stage 0 - Initiator finished sending first message."),lwe(this.session.hs.e),e.next=20;break;case 9:return cwe("Stage 0 - Responder waiting to receive first message..."),e.t0=Xbe,e.next=13,this.connection.readLP();case 13:if(e.t1=e.sent.subarray(),r=(0,e.t0)(e.t1),n=this.xx.recvMessage(this.session,r),n.valid){e.next=18;break}throw new age("xx handshake stage 0 validation fail");case 18:cwe("Stage 0 - Responder received first message."),fwe(this.session.hs.re);case 20:case"end":return e.stop()}var a}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exchange",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInitiator){e.next=34;break}return cwe("Stage 1 - Initiator waiting to receive first message from responder..."),e.t0=$be,e.next=5,this.connection.readLP();case 5:if(e.t1=e.sent.subarray(),t=(0,e.t0)(e.t1),r=this.xx.recvMessage(this.session,t),n=r.plaintext,r.valid){e.next=10;break}throw new age("xx handshake stage 1 validation fail");case 10:if(cwe("Stage 1 - Initiator received the message."),fwe(this.session.hs.re),s=this.session.hs.rs,uwe("REMOTE_STATIC_PUBLIC_KEY ".concat(kh(s,"hex"))),cwe("Initiator going to check remote's signature..."),e.prev=14,a=nwe(n),e.t2=this.remotePeer,e.t2){e.next=21;break}return e.next=20,twe(a);case 20:e.t2=e.sent;case 21:return this.remotePeer=e.t2,e.next=24,iwe(this.session.hs.rs,a,this.remotePeer);case 24:this.setRemoteNoiseExtension(a.extensions),e.next=31;break;case 27:throw e.prev=27,e.t3=e.catch(14),i=e.t3,new nge("Error occurred while verifying signed payload: ".concat(i.message));case 31:cwe("All good with the signature!"),e.next=39;break;case 34:cwe("Stage 1 - Responder sending out first message with signed payload and static key."),o=this.xx.sendMessage(this.session,this.payload),this.connection.writeLP(Jbe(o)),cwe("Stage 1 - Responder sent the second handshake message with signed payload."),lwe(this.session.hs.e);case 39:case"end":return e.stop()}var s}),e,this,[[14,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"finish",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInitiator){e.next=7;break}cwe("Stage 2 - Initiator sending third handshake message."),t=this.xx.sendMessage(this.session,this.payload),this.connection.writeLP(Zbe(t)),cwe("Stage 2 - Initiator sent message with signed payload."),e.next=34;break;case 7:return cwe("Stage 2 - Responder waiting for third handshake message..."),e.t0=ege,e.next=11,this.connection.readLP();case 11:if(e.t1=e.sent.subarray(),r=(0,e.t0)(e.t1),n=this.xx.recvMessage(this.session,r),a=n.plaintext,n.valid){e.next=16;break}throw new age("xx handshake stage 2 validation fail");case 16:if(cwe("Stage 2 - Responder received the message, finished handshake."),e.prev=17,i=nwe(a),e.t2=this.remotePeer,e.t2){e.next=24;break}return e.next=23,twe(i);case 23:e.t2=e.sent;case 24:return this.remotePeer=e.t2,e.next=27,iwe(this.session.hs.rs,i,this.remotePeer);case 27:this.setRemoteNoiseExtension(i.extensions),e.next=34;break;case 30:throw e.prev=30,e.t3=e.catch(17),o=e.t3,new nge("Error occurred while verifying signed payload: ".concat(o.message));case 34:(s=this.session).cs1&&s.cs2?(uwe("CIPHER_STATE_1 ".concat(s.cs1.n.getUint64()," ").concat(kh(s.cs1.k,"hex"))),uwe("CIPHER_STATE_2 ".concat(s.cs2.n.getUint64()," ").concat(kh(s.cs2.k,"hex")))):uwe("Missing cipher state.");case 35:case"end":return e.stop()}var s}),e,this,[[17,30]])})));return function(){return e.apply(this,arguments)}}()},{key:"encrypt",value:function(e,t){var r=this.getCS(t);return this.xx.encryptWithAd(r,new Uint8Array(0),e)}},{key:"decrypt",value:function(e,t,r){var n=this.getCS(t,!1);return this.xx.decryptWithAd(n,new Uint8Array(0),e,r)}},{key:"getRemoteStaticKey",value:function(){return this.session.hs.rs}},{key:"getCS",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.cs1||!e.cs2)throw new age("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?t?e.cs1:e.cs2:t?e.cs2:e.cs1}},{key:"setRemoteNoiseExtension",value:function(e){e&&(this.remoteExtensions=e)}}]),e}();function ywe(e){return{xxHandshakeSuccesses:e.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:e.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:e.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:e.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:e.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}var bwe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Cn(this,e),this.protocol="/noise";var r=t.staticNoiseKey,n=t.extensions,a=t.crypto,i=t.prologueBytes,o=t.metrics;this.crypto=null!==a&&void 0!==a?a:Gbe,this.extensions=n,this.metrics=o?ywe(o):void 0,this.staticKeys=r?this.crypto.generateX25519KeyPairFromSeed(r):this.crypto.generateX25519KeyPair(),this.prologue=null!==i&&void 0!==i?i:new Uint8Array(0)}return Dn(e,[{key:"secureOutbound",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ube(r,{lengthEncoder:Wbe,lengthDecoder:Ybe,maxDataLength:Fbe}),e.next=3,this.performHandshake({connection:a,isInitiator:!0,localPeer:t,remotePeer:n});case 3:return i=e.sent,e.next=6,this.createSecureConnection(a,i);case 6:return o=e.sent,e.abrupt("return",{conn:o,remoteExtensions:i.remoteExtensions,remotePeer:i.remotePeer});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"secureInbound",value:function(){var e=An(En().mark((function e(t,r,n){var a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ube(r,{lengthEncoder:Wbe,lengthDecoder:Ybe,maxDataLength:Fbe}),e.next=3,this.performHandshake({connection:a,isInitiator:!1,localPeer:t,remotePeer:n});case 3:return i=e.sent,e.next=6,this.createSecureConnection(a,i);case 6:return o=e.sent,e.abrupt("return",{conn:o,remotePeer:i.remotePeer,remoteExtensions:i.remoteExtensions});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"performHandshake",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jme(t.localPeer,this.staticKeys.publicKey,this.extensions);case 2:return r=e.sent,e.next=5,this.performXXHandshake(t,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"performXXHandshake",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isInitiator,a=t.remotePeer,i=t.connection,o=new vwe(n,r,this.prologue,this.crypto,this.staticKeys,i,a),e.prev=2,e.next=5,o.propose();case 5:return e.next=7,o.exchange();case 7:return e.next=9,o.finish();case 9:null===(s=this.metrics)||void 0===s||s.xxHandshakeSuccesses.increment(),e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(2),null===(u=this.metrics)||void 0===u||u.xxHandshakeErrors.increment(),!(e.t0 instanceof Error)){e.next=18;break}throw e.t0.message="Error occurred during XX handshake: ".concat(e.t0.message),e.t0;case 18:return e.abrupt("return",o);case 19:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createSecureConnection",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zbe(),a=Ia(n,2),i=a[0],o=a[1],s=t.unwrap(),e.next=4,TS(i,tge(r,this.metrics),s,K$({lengthDecoder:Ybe}),rge(r,this.metrics),i);case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();function gwe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){return new bwe(e)}}var mwe=Gn.bind({ignoreUndefined:!0,concatArrays:!0});function wwe(e){var t=e.options,a=void 0===t?{}:t,s=e.peerId,u=e.multiaddrs,c=void 0===u?[]:u,l=e.repo,f=e.keychainConfig,h=void 0===f?{}:f,p=e.config,d=void 0===p?{}:p,v=l.datastore,y=function(e){var t=e.options,a=e.config,s=e.datastore,u=e.keychainConfig,c=e.peerId,l=e.multiaddrs,f=function(){var e=bS(a,"Pubsub.Router")||"gossipsub",t={gossipsub:s1({fallbackToFloodsub:!0,emitSelf:!0,maxInboundStreams:64,maxOutboundStreams:128})};if(!t[e])throw ca(new Error("Router unavailable. Configure libp2p.modules.pubsub to use the ".concat(e," router.")),"ERR_NOT_SUPPORTED");return t[e]},h={datastore:s,peerId:c},p={addresses:{listen:l.map((function(e){return e.toString()})),announce:bS(t,"addresses.announce",bS(a,"Addresses.Announce",[])),noAnnounce:bS(t,"addresses.noAnnounce",bS(a,"Addresses.NoAnnounce",[]))},connectionManager:bS(t,"connectionManager",{maxConnections:bS(t,"config.Swarm.ConnMgr.HighWater",bS(a,"Swarm.ConnMgr.HighWater")),minConnections:bS(t,"config.Swarm.ConnMgr.LowWater",bS(a,"Swarm.ConnMgr.LowWater"))}),keychain:u,identify:{host:{agentVersion:"js-ipfs/".concat(zO)}},contentRouters:[],peerRouters:[],peerDiscovery:[],transports:[],streamMuxers:[Bbe({maxInboundStreams:256,maxOutboundStreams:1024})],connectionEncryption:[gwe()],relay:{enabled:bS(t,"relay.enabled",bS(a,"relay.enabled",!0)),hop:{enabled:bS(t,"relay.hop.enabled",bS(a,"relay.hop.enabled",!1)),active:bS(t,"relay.hop.active",bS(a,"relay.hop.active",!1))}},nat:{enabled:!bS(a,"Swarm.DisableNatPortMap",!1)}};bS(t,"config.Pubsub.Enabled",bS(a,"Pubsub.Enabled",!0))&&(p.pubsub=f());"none"!==bS(a,"Routing.Type","dhtclient")&&(p.dht=(d={clientMode:"dhtserver"!==bS(a,"Routing.Type","dht"),kBucketSize:bS(t,"dht.kBucketSize",20),validators:{ipns:GE},selectors:{ipns:gS}},function(e){return new ove(e,d)}));var d;var v,y=bS(t,"config.Bootstrap",bS(a,"Bootstrap",[]));y.length>0&&(null===(v=p.peerDiscovery)||void 0===v||v.push(function(e){return function(t){return new Jye(t,e)}}({list:y})));var b=bS(t,"libp2p",void 0);"function"===typeof b&&(b=void 0);var g,m=mwe(h,O9(),p,b),w=bS(t,"config.Addresses.Delegates",bS(a,"Addresses.Delegates",[]));if(w.length>0){var k,x,_=Gd(w[Math.floor(Math.random()*w.length)]).toOptions(),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={name:Ac.name,code:Ac.code,encode:function(e){return e},decode:function(e){return e}},a=Object.values(Xc);(e.ipld&&e.ipld.bases?e.ipld.bases:[]).forEach((function(e){return a.push(e)}));var s=new i2({bases:a,loadBase:e.ipld&&e.ipld.loadBase}),u=Object.values(el);[r,n,i,o,t].concat(e.ipld&&e.ipld.codecs||[]).forEach((function(e){return u.push(e)}));var c=new s2({codecs:u,loadCodec:e.ipld&&e.ipld.loadCodec}),l=Object.values($c);(e.ipld&&e.ipld.hashers?e.ipld.hashers:[]).forEach((function(e){return l.push(e)}));var f=new c2({hashers:l,loadHasher:e.ipld&&e.ipld.loadHasher}),h={add:P5(e),addAll:I5(e),bitswap:N2(e),block:Q2(e),bootstrap:t3(e),cat:N5(e),commands:L5(e),config:f3(e),dag:m3(c,e),dht:C3(e),diag:R3(e),dns:O5(e),files:W3(e),get:U5(e),getEndpointConfig:B5(e),id:M5(e),isOnline:z5(e),key:t4(e),log:i4(e),ls:F5(e),mount:j5(e),name:h4(e),object:E4(c,e),pin:X4(e),ping:q5(e),pubsub:p5(e),refs:v5(e),repo:m5(e),resolve:K5(e),start:H5(e),stats:k5(e),stop:G5(e),swarm:C5(e),version:W5(e),bases:s,codecs:c,hashers:f};return h}({host:_.host,protocol:443===parseInt(_.port)?"https":"http",port:_.port});null===(k=m.contentRouters)||void 0===k||k.push(function(e){return function(){return new n2(e)}}(E)),null===(x=m.peerRouters)||void 0===x||x.push(function(e){return function(){return new X0(e)}}(E))}bS(t,"config.Discovery.MDNS.Enabled",bS(a,"Discovery.MDNS.Enabled",!0))||(m.peerDiscovery=null===(g=m.peerDiscovery)||void 0===g?void 0:g.filter((function(e){try{if("function"===typeof e)return"@libp2p/mdns"!==e({})[Symbol.toStringTag]}catch(t){}return!0})));null==m.transports&&(m.transports=[]);null==m.transports.find((function(e){try{if("function"===typeof e)return"@libp2p/websockets"===e({})[Symbol.toStringTag]}catch(t){}return!1}))&&m.transports.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){return new lbe(e)}}());return m}({options:a,config:d,datastore:v,keychainConfig:h,peerId:s,multiaddrs:c});return"function"===typeof a.libp2p?a.libp2p({libp2pOptions:y,options:a,config:d,datastore:v,peerId:s}):(y.start=!1,function(e){return mfe.apply(this,arguments)}(y))}var kwe=Gn.bind({ignoreUndefined:!0}),xwe=ua("ipfs:components:peer:storage"),_we=function(){function e(t,r,n,a,i){Cn(this,e),this.print=a,this.peerId=t,this.keychain=r,this.repo=n,this.print=a,this.isNew=i}return Dn(e,null,[{key:"start",value:function(){var t=An(En().mark((function t(r,n,a){var i,o,s,u,c,l,f,h;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.repoAutoMigrate,o=a.repo,s=a.onMigrationProgress,u="string"===typeof o||null==o?oW(r,n,{path:o,autoMigrate:i,onMigrationProgress:s}):o,t.next=4,Ewe(r,u,a);case 4:return c=t.sent,l=c.peerId,f=c.keychain,h=c.isNew,t.abrupt("return",new e(l,f,u,r,h));case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()}]),e}(),Ewe=function(){var e=An(En().mark((function e(t,r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.closed){e.next=11;break}return e.t0=jn,e.t1=jn,e.t2={},e.next=6,Twe(r,n);case 6:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5={},e.t6={isNew:!1},e.abrupt("return",(0,e.t0)(e.t4,e.t5,e.t6));case 11:return e.prev=11,e.next=14,r.open();case 14:return e.t7=jn,e.t8=jn,e.t9={},e.next=19,Twe(r,n);case 19:return e.t10=e.sent,e.t11=(0,e.t8)(e.t9,e.t10),e.t12={},e.t13={isNew:!1},e.abrupt("return",(0,e.t7)(e.t11,e.t12,e.t13));case 26:if(e.prev=26,e.t14=e.catch(11),e.t14.code===iK){e.next=30;break}throw e.t14;case 30:if(!n.init||!1!==n.init.allowNew){e.next=32;break}throw new sl("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");case 32:return e.t15=jn,e.t16=jn,e.t17={},e.next=37,Swe(t,r,n);case 37:return e.t18=e.sent,e.t19=(0,e.t16)(e.t17,e.t18),e.t20={},e.t21={isNew:!0},e.abrupt("return",(0,e.t15)(e.t19,e.t20,e.t21));case 42:case"end":return e.stop()}}),e,null,[[11,26]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Swe=function(){var e=An(En().mark((function e(t,r,n){var a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.init||{},e.next=3,r.exists();case 3:if(i=e.sent,xwe("repo exists?",i),!0!==i){e.next=7;break}throw new Error("repo already exists");case 7:if(!a.privateKey){e.next=13;break}return e.next=10,Awe(a.privateKey);case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,Cwe(t,a);case 15:e.t0=e.sent;case 16:return o=e.t0,s=Iwe(o),xwe("peer identity: %s",s.PeerID),u=jn(jn({},kwe(Rwe({Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}},a.profiles),n.config)),{},{Identity:s}),e.next=22,r.init(u);case 22:return e.next=24,r.open();case 24:return xwe("repo opened"),c={pass:n.pass},e.prev=26,e.next=29,r.config.get("Keychain.DEK");case 29:c.dek=e.sent,e.next=36;break;case 32:if(e.prev=32,e.t1=e.catch(26),"ERR_NOT_FOUND"===e.t1.code){e.next=36;break}throw e.t1;case 36:return e.next=38,wwe({options:void 0,multiaddrs:void 0,peerId:o,repo:r,config:u,keychainConfig:c});case 38:return l=e.sent,e.next=41,r.datastore.has(new Hv("/info/self"));case 41:if(e.sent){e.next=44;break}return e.next=44,l.keychain.importPeer("self",o);case 44:return e.next=46,r.config.set("Keychain",{DEK:l.keychain.init.dek});case 46:return e.abrupt("return",{peerId:o,keychain:l.keychain});case 47:case"end":return e.stop()}}),e,null,[[26,32]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Awe=function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xwe("using user-supplied private-key"),!hb(t)){e.next=3;break}return e.abrupt("return",t);case 3:return r=Bf(t,"base64pad"),e.next=6,xx(r);case 6:return n=e.sent,e.next=9,xb(n.public.bytes,n.bytes);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cwe=function(e,t){var r=t.algorithm,n=void 0===r?"Ed25519":r,a=t.bits,i=void 0===a?2048:a;if(e("generating %s keypair...",n),"Ed25519"===n)return rfe();if("RSA"===n)return nfe({bits:i});throw ca(new Error("Unknown PeerId algorithm"),"ERR_UNKNOWN_PEER_ID_ALGORITHM")},Iwe=function(e){if(null==e.privateKey)throw ca(new Error("Private key missing"),"ERR_MISSING_PRIVATE_KEY");return{PeerID:e.toString(),PrivKey:kh(e.privateKey,"base64pad")}},Twe=function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.config,a=r.init&&r.init.profiles||[],i=r.pass,e.next=5,t.config.getAll();case 5:if(o=e.sent,s=Dwe(Rwe(o,a),n),o===s){e.next=10;break}return e.next=10,t.config.replace(s);case 10:if(s.Identity&&s.Identity.PrivKey){e.next=12;break}throw new tl("No private key was found in the config, please intialize the repo");case 12:return u=Bf(s.Identity.PrivKey,"base64pad"),e.next=15,xx(u);case 15:return c=e.sent,e.next=18,xb(c.public.bytes,c.bytes);case 18:return l=e.sent,e.next=21,wwe({options:void 0,multiaddrs:void 0,peerId:l,repo:t,config:s,keychainConfig:jn({pass:i},s.Keychain)});case 21:return f=e.sent,e.abrupt("return",{peerId:l,keychain:f.keychain});case 23:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Dwe=function(e,t){return t?kwe(e,t):e},Rwe=function(e,t){return(t||[]).reduce((function(e,t){var r=YO[t];if(!r)throw new Error("Could not find profile with name '".concat(t,"'"));return xwe("applying profile %s",t),r.transform(e)}),e)},Pwe=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Nwe;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Nwe=Math.pow(2,31);var Lwe=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var Owe=Math.pow(2,7),Bwe=Math.pow(2,14),Uwe=Math.pow(2,21),Mwe=Math.pow(2,28),zwe=Math.pow(2,35),Fwe=Math.pow(2,42),Vwe=Math.pow(2,49),jwe=Math.pow(2,56),qwe=Math.pow(2,63),Kwe={encode:Pwe,decode:Lwe,encodingLength:function(e){return e<Owe?1:e<Bwe?2:e<Uwe?3:e<Mwe?4:e<zwe?5:e<Fwe?6:e<Vwe?7:e<jwe?8:e<qwe?9:10}},Hwe=Kwe,Gwe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Hwe.decode(e,t);return[r,Hwe.decode.bytes]},Wwe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Hwe.encode(e,t,r),t},Ywe=function(e){return Hwe.encodingLength(e)},Qwe=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Jwe=function(e,t){var r=t.byteLength,n=Ywe(e),a=n+Ywe(r),i=new Uint8Array(a+r);return Wwe(e,i,0),Wwe(r,i,n),i.set(t,a),new Zwe(e,r,t,i)},Zwe=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var Xwe=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},$we=Xwe,eke=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),tke=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return nke(this,e)}}]),e}(),rke=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return nke(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),nke=function(e,t){return new rke(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},ake=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new eke(t,r,n),this.decoder=new tke(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),ike=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new ake(t,r,n,a)},oke=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=$we(n,r),i=a.encode,o=a.decode;return ike({prefix:t,name:r,encode:i,decode:function(e){return Qwe(o(e))}})},ske=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return ike({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},uke=oke({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),cke=(oke({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ske({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),lke=(ske({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ske({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ske({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ske({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ske({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ske({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ske({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ske({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),function(e,t){var r=e.bytes;return 0===e.version?vke(r,hke(e),t||uke.encoder):yke(r,hke(e),t||cke.encoder)}),fke=new WeakMap,hke=function(e){var t=fke.get(e);if(null==t){var r=new Map;return fke.set(e,r),r}return t},pke=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==bke)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==gke)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=Jwe(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return lke(this,e)}},{key:"toJSON",value:function(){return{"/":lke(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||mke(n,a,i.bytes))}if(!0===t[wke]){var o=t.version,s=t.multihash,u=t.code,c=function(e){var t=Qwe(e),r=Ia(Gwe(t),2),n=r[0],a=r[1],i=Ia(Gwe(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new Zwe(n,o,u,t)}(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==bke)throw new Error("Version 0 CID must use dag-pb (code: ".concat(bke,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,mke(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,bke,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=Qwe(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new Zwe(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(Gwe(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=bke;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(dke(e,t),2),a=n[0],i=n[1],o=r.decode(i);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return hke(o).set(a,e),o}}]),r}(),dke=function(e,t){switch(e[0]){case"Q":var r=t||uke;return[uke.prefix,r.decode("".concat(uke.prefix).concat(e))];case uke.prefix:var n=t||uke;return[uke.prefix,n.decode(e)];case cke.prefix:var a=t||cke;return[cke.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},vke=function(e,t,r){var n=r.prefix;if(n!==uke.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},yke=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},bke=112,gke=18,mke=function(e,t,r){var n=Ywe(e),a=n+Ywe(t),i=new Uint8Array(a+r.byteLength);return Wwe(e,i,0),Wwe(t,i,n),i.set(r,a),i},wke=Symbol.for("@ipld/js-cid/CID"),kke=function(e){var t=e.name,r=e.code,n=e.encode;return new xke(t,r,n)},xke=function(){function e(t,r,n){Cn(this,e),this.name=t,this.code=r,this.encode=n}return Dn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?Jwe(this.code,r):r.then((function(e){return Jwe(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),_ke=function(e){return function(){var t=An(En().mark((function t(r){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Eke=kke({name:"sha2-256",code:18,encode:_ke("SHA-256")}),Ske=(kke({name:"sha2-512",code:19,encode:_ke("SHA-512")}),__webpack_require__(2086));var Ake=function(e){var t,r=new Uint8Array(e.reduce((function(e,t){return e+cd.encodingLength(t)}),0)),n=0,a=Ni(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;r=cd.encode(i,r,n),n+=cd.encodingLength(i)}}catch(eL){a.e(eL)}finally{a.f()}return r},Cke=function(e){function t(e,r,n){Cn(this,t),this._refCounter=1,this.cid=e,this.priority=r||1,this.wantType=n}return Dn(t,[{key:"inc",value:function(){this._refCounter+=1}},{key:"dec",value:function(){this._refCounter=Math.max(0,this._refCounter-1)}},{key:"hasRefs",value:function(){return this._refCounter>0}},{key:Symbol.toStringTag,get:function(){var e=this.cid.toString(uke);return"WantlistEntry <key: ".concat(e,", priority: ").concat(this.priority,", refs: ").concat(this._refCounter,">")}},{key:"equals",value:function(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority&&this.wantType===e.wantType}}]),t}(),Ike=la.Reader,Tke=la.Writer,Dke=la.util,Rke=la.roots["ipfs-bitswap"]||(la.roots["ipfs-bitswap"]={}),Pke=Rke.Message=function(){function e(e){if(this.blocks=[],this.payload=[],this.blockPresences=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.wantlist=null,e.prototype.blocks=Dke.emptyArray,e.prototype.payload=Dke.emptyArray,e.prototype.blockPresences=Dke.emptyArray,e.prototype.pendingBytes=0,e.encode=function(e,t){if(t||(t=Tke.create()),null!=e.wantlist&&Object.hasOwnProperty.call(e,"wantlist")&&Rke.Message.Wantlist.encode(e.wantlist,t.uint32(10).fork()).ldelim(),null!=e.blocks&&e.blocks.length)for(var r=0;r<e.blocks.length;++r)t.uint32(18).bytes(e.blocks[r]);if(null!=e.payload&&e.payload.length)for(r=0;r<e.payload.length;++r)Rke.Message.Block.encode(e.payload[r],t.uint32(26).fork()).ldelim();if(null!=e.blockPresences&&e.blockPresences.length)for(r=0;r<e.blockPresences.length;++r)Rke.Message.BlockPresence.encode(e.blockPresences[r],t.uint32(34).fork()).ldelim();return null!=e.pendingBytes&&Object.hasOwnProperty.call(e,"pendingBytes")&&t.uint32(40).int32(e.pendingBytes),t},e.decode=function(e,t){e instanceof Ike||(e=Ike.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Rke.Message;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.wantlist=Rke.Message.Wantlist.decode(e,e.uint32());break;case 2:n.blocks&&n.blocks.length||(n.blocks=[]),n.blocks.push(e.bytes());break;case 3:n.payload&&n.payload.length||(n.payload=[]),n.payload.push(Rke.Message.Block.decode(e,e.uint32()));break;case 4:n.blockPresences&&n.blockPresences.length||(n.blockPresences=[]),n.blockPresences.push(Rke.Message.BlockPresence.decode(e,e.uint32()));break;case 5:n.pendingBytes=e.int32();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Rke.Message)return e;var t=new Rke.Message;if(null!=e.wantlist){if("object"!==typeof e.wantlist)throw TypeError(".Message.wantlist: object expected");t.wantlist=Rke.Message.Wantlist.fromObject(e.wantlist)}if(e.blocks){if(!Array.isArray(e.blocks))throw TypeError(".Message.blocks: array expected");t.blocks=[];for(var r=0;r<e.blocks.length;++r)"string"===typeof e.blocks[r]?Dke.base64.decode(e.blocks[r],t.blocks[r]=Dke.newBuffer(Dke.base64.length(e.blocks[r])),0):e.blocks[r].length>=0&&(t.blocks[r]=e.blocks[r])}if(e.payload){if(!Array.isArray(e.payload))throw TypeError(".Message.payload: array expected");t.payload=[];for(r=0;r<e.payload.length;++r){if("object"!==typeof e.payload[r])throw TypeError(".Message.payload: object expected");t.payload[r]=Rke.Message.Block.fromObject(e.payload[r])}}if(e.blockPresences){if(!Array.isArray(e.blockPresences))throw TypeError(".Message.blockPresences: array expected");t.blockPresences=[];for(r=0;r<e.blockPresences.length;++r){if("object"!==typeof e.blockPresences[r])throw TypeError(".Message.blockPresences: object expected");t.blockPresences[r]=Rke.Message.BlockPresence.fromObject(e.blockPresences[r])}}return null!=e.pendingBytes&&(t.pendingBytes=0|e.pendingBytes),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.blocks=[],r.payload=[],r.blockPresences=[]),t.defaults&&(r.wantlist=null,r.pendingBytes=0),null!=e.wantlist&&e.hasOwnProperty("wantlist")&&(r.wantlist=Rke.Message.Wantlist.toObject(e.wantlist,t)),e.blocks&&e.blocks.length){r.blocks=[];for(var n=0;n<e.blocks.length;++n)r.blocks[n]=t.bytes===String?Dke.base64.encode(e.blocks[n],0,e.blocks[n].length):t.bytes===Array?Array.prototype.slice.call(e.blocks[n]):e.blocks[n]}if(e.payload&&e.payload.length){r.payload=[];for(n=0;n<e.payload.length;++n)r.payload[n]=Rke.Message.Block.toObject(e.payload[n],t)}if(e.blockPresences&&e.blockPresences.length){r.blockPresences=[];for(n=0;n<e.blockPresences.length;++n)r.blockPresences[n]=Rke.Message.BlockPresence.toObject(e.blockPresences[n],t)}return null!=e.pendingBytes&&e.hasOwnProperty("pendingBytes")&&(r.pendingBytes=e.pendingBytes),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message"},e.Wantlist=function(){function e(e){if(this.entries=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.entries=Dke.emptyArray,e.prototype.full=!1,e.encode=function(e,t){if(t||(t=Tke.create()),null!=e.entries&&e.entries.length)for(var r=0;r<e.entries.length;++r)Rke.Message.Wantlist.Entry.encode(e.entries[r],t.uint32(10).fork()).ldelim();return null!=e.full&&Object.hasOwnProperty.call(e,"full")&&t.uint32(16).bool(e.full),t},e.decode=function(e,t){e instanceof Ike||(e=Ike.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Rke.Message.Wantlist;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.entries&&n.entries.length||(n.entries=[]),n.entries.push(Rke.Message.Wantlist.Entry.decode(e,e.uint32()));break;case 2:n.full=e.bool();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Rke.Message.Wantlist)return e;var t=new Rke.Message.Wantlist;if(e.entries){if(!Array.isArray(e.entries))throw TypeError(".Message.Wantlist.entries: array expected");t.entries=[];for(var r=0;r<e.entries.length;++r){if("object"!==typeof e.entries[r])throw TypeError(".Message.Wantlist.entries: object expected");t.entries[r]=Rke.Message.Wantlist.Entry.fromObject(e.entries[r])}}return null!=e.full&&(t.full=Boolean(e.full)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.entries=[]),t.defaults&&(r.full=!1),e.entries&&e.entries.length){r.entries=[];for(var n=0;n<e.entries.length;++n)r.entries[n]=Rke.Message.Wantlist.Entry.toObject(e.entries[n],t)}return null!=e.full&&e.hasOwnProperty("full")&&(r.full=e.full),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Wantlist"},e.WantType=function(){var e={},t=Object.create(e);return t[e[0]="Block"]=0,t[e[1]="Have"]=1,t}(),e.Entry=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.block=Dke.newBuffer([]),e.prototype.priority=0,e.prototype.cancel=!1,e.prototype.wantType=0,e.prototype.sendDontHave=!1,e.encode=function(e,t){return t||(t=Tke.create()),null!=e.block&&Object.hasOwnProperty.call(e,"block")&&t.uint32(10).bytes(e.block),null!=e.priority&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(16).int32(e.priority),null!=e.cancel&&Object.hasOwnProperty.call(e,"cancel")&&t.uint32(24).bool(e.cancel),null!=e.wantType&&Object.hasOwnProperty.call(e,"wantType")&&t.uint32(32).int32(e.wantType),null!=e.sendDontHave&&Object.hasOwnProperty.call(e,"sendDontHave")&&t.uint32(40).bool(e.sendDontHave),t},e.decode=function(e,t){e instanceof Ike||(e=Ike.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Rke.Message.Wantlist.Entry;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.block=e.bytes();break;case 2:n.priority=e.int32();break;case 3:n.cancel=e.bool();break;case 4:n.wantType=e.int32();break;case 5:n.sendDontHave=e.bool();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Rke.Message.Wantlist.Entry)return e;var t=new Rke.Message.Wantlist.Entry;switch(null!=e.block&&("string"===typeof e.block?Dke.base64.decode(e.block,t.block=Dke.newBuffer(Dke.base64.length(e.block)),0):e.block.length>=0&&(t.block=e.block)),null!=e.priority&&(t.priority=0|e.priority),null!=e.cancel&&(t.cancel=Boolean(e.cancel)),e.wantType){case"Block":case 0:t.wantType=0;break;case"Have":case 1:t.wantType=1}return null!=e.sendDontHave&&(t.sendDontHave=Boolean(e.sendDontHave)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.block="":(r.block=[],t.bytes!==Array&&(r.block=Dke.newBuffer(r.block))),r.priority=0,r.cancel=!1,r.wantType=t.enums===String?"Block":0,r.sendDontHave=!1),null!=e.block&&e.hasOwnProperty("block")&&(r.block=t.bytes===String?Dke.base64.encode(e.block,0,e.block.length):t.bytes===Array?Array.prototype.slice.call(e.block):e.block),null!=e.priority&&e.hasOwnProperty("priority")&&(r.priority=e.priority),null!=e.cancel&&e.hasOwnProperty("cancel")&&(r.cancel=e.cancel),null!=e.wantType&&e.hasOwnProperty("wantType")&&(r.wantType=t.enums===String?Rke.Message.Wantlist.WantType[e.wantType]:e.wantType),null!=e.sendDontHave&&e.hasOwnProperty("sendDontHave")&&(r.sendDontHave=e.sendDontHave),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Wantlist.Entry"},e}(),e}(),e.Block=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.prefix=Dke.newBuffer([]),e.prototype.data=Dke.newBuffer([]),e.encode=function(e,t){return t||(t=Tke.create()),null!=e.prefix&&Object.hasOwnProperty.call(e,"prefix")&&t.uint32(10).bytes(e.prefix),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,t){e instanceof Ike||(e=Ike.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Rke.Message.Block;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.prefix=e.bytes();break;case 2:n.data=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Rke.Message.Block)return e;var t=new Rke.Message.Block;return null!=e.prefix&&("string"===typeof e.prefix?Dke.base64.decode(e.prefix,t.prefix=Dke.newBuffer(Dke.base64.length(e.prefix)),0):e.prefix.length>=0&&(t.prefix=e.prefix)),null!=e.data&&("string"===typeof e.data?Dke.base64.decode(e.data,t.data=Dke.newBuffer(Dke.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.prefix="":(r.prefix=[],t.bytes!==Array&&(r.prefix=Dke.newBuffer(r.prefix))),t.bytes===String?r.data="":(r.data=[],t.bytes!==Array&&(r.data=Dke.newBuffer(r.data)))),null!=e.prefix&&e.hasOwnProperty("prefix")&&(r.prefix=t.bytes===String?Dke.base64.encode(e.prefix,0,e.prefix.length):t.bytes===Array?Array.prototype.slice.call(e.prefix):e.prefix),null!=e.data&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?Dke.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Block"},e}(),e.BlockPresenceType=function(){var e={},t=Object.create(e);return t[e[0]="Have"]=0,t[e[1]="DontHave"]=1,t}(),e.BlockPresence=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.cid=Dke.newBuffer([]),e.prototype.type=0,e.encode=function(e,t){return t||(t=Tke.create()),null!=e.cid&&Object.hasOwnProperty.call(e,"cid")&&t.uint32(10).bytes(e.cid),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),t},e.decode=function(e,t){e instanceof Ike||(e=Ike.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Rke.Message.BlockPresence;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.cid=e.bytes();break;case 2:n.type=e.int32();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Rke.Message.BlockPresence)return e;var t=new Rke.Message.BlockPresence;switch(null!=e.cid&&("string"===typeof e.cid?Dke.base64.decode(e.cid,t.cid=Dke.newBuffer(Dke.base64.length(e.cid)),0):e.cid.length>=0&&(t.cid=e.cid)),e.type){case"Have":case 0:t.type=0;break;case"DontHave":case 1:t.type=1}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.cid="":(r.cid=[],t.bytes!==Array&&(r.cid=Dke.newBuffer(r.cid))),r.type=t.enums===String?"Have":0),null!=e.cid&&e.hasOwnProperty("cid")&&(r.cid=t.bytes===String?Dke.base64.encode(e.cid,0,e.cid.length):t.bytes===Array?Array.prototype.slice.call(e.cid):e.cid),null!=e.type&&e.hasOwnProperty("type")&&(r.type=t.enums===String?Rke.Message.BlockPresenceType[e.type]:e.type),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,la.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.BlockPresence"},e}(),e}(),Nke=Pke.Wantlist.WantType.Block,Lke=Pke.Wantlist.WantType.Have,Oke=function(){function e(t,r){Cn(this,e),this.set=r?Aie({name:"ipfs_bitswap_wantlist",metrics:r.metrics}):new Map,this._stats=t}return Dn(e,[{key:"length",get:function(){return this.set.size}},{key:"add",value:function(e,t,r){var n=e.toString(uke),a=this.set.get(n);a?(a.inc(),a.priority=t,a.wantType===Lke&&r===Nke&&(a.wantType=r)):(this.set.set(n,new Cke(e,t,r)),this._stats&&this._stats.push(null,"wantListSize",1))}},{key:"remove",value:function(e){var t=e.toString(uke),r=this.set.get(t);r&&(r.dec(),r.hasRefs()||(this.set.delete(t),this._stats&&this._stats.push(null,"wantListSize",-1)))}},{key:"removeForce",value:function(e){this.set.has(e)&&this.set.delete(e)}},{key:"forEach",value:function(e){return this.set.forEach(e)}},{key:"entries",value:function(){return this.set.entries()}},{key:"sortedEntries",value:function(){return new Map((e=function(e){return e[1].key},t=Array.from(this.set.entries()),Array.prototype.slice.call(t,0).sort((function(t,r){var n=e(t),a=e(r);return n<a?-1:n>a?1:0}))));var e,t}},{key:"contains",value:function(e){var t=e.toString(uke);return this.set.has(t)}},{key:"get",value:function(e){var t=e.toString(uke);return this.set.get(t)}}]),e}();Oke.Entry=Cke;var Bke=Oke.Entry,Uke=function(e){function t(e,r,n,a,i){Cn(this,t),this.entry=new Bke(e,r,n),this.cancel=Boolean(a),this.sendDontHave=Boolean(i)}return Dn(t,[{key:"cid",get:function(){return this.entry.cid},set:function(e){this.entry.cid=e}},{key:"priority",get:function(){return this.entry.priority},set:function(e){this.entry.priority=e}},{key:"wantType",get:function(){return this.entry.wantType},set:function(e){this.entry.wantType=e}},{key:Symbol.toStringTag,get:function(){var e=this.cid.toString(uke);return"BitswapMessageEntry ".concat(e," <cancel: ").concat(this.cancel,", priority: ").concat(this.priority,">")}},{key:"equals",value:function(e){return this.cancel===e.cancel&&this.sendDontHave===e.sendDontHave&&this.wantType===e.wantType&&this.entry.equals(e.entry)}}]),t}(),Mke=function(e,t){var r=["bitswap"];return t&&r.push(t),e&&r.push("".concat(e.toString().slice(0,8))),ua(r.join(":"))},zke=function(e,t){if(e.size!==t.size)return!1;var r,n=Ni(e);try{for(n.s();!(r=n.n()).done;){var a=Ia(r.value,2),i=a[0],o=a[1],s=t.get(i);if(void 0===s)return!1;if(o instanceof Uint8Array&&s instanceof Uint8Array&&!Pd(o,s))return!1;if(o instanceof Uke&&s instanceof Uke&&!o.equals(s))return!1}}catch(eL){n.e(eL)}finally{n.f()}return!0},Fke=function(e){function t(e){Cn(this,t),this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}return Dn(t,[{key:"empty",get:function(){return 0===this.blocks.size&&0===this.wantlist.size&&0===this.blockPresences.size}},{key:"addEntry",value:function(e,r,n,a,i){null==n&&(n=t.WantType.Block);var o=e.toString(uke),s=this.wantlist.get(o);s?(s.wantType===n&&(s.priority=r),a&&(s.cancel=Boolean(a)),i&&(s.sendDontHave=Boolean(i)),n===t.WantType.Block&&s.wantType===t.WantType.Have&&(s.wantType=n)):this.wantlist.set(o,new Uke(e,r,n,a,i))}},{key:"addBlock",value:function(e,t){var r=e.toString(uke);this.blocks.set(r,t)}},{key:"addHave",value:function(e){var r=e.toString(uke);this.blockPresences.has(r)||this.blockPresences.set(r,t.BlockPresenceType.Have)}},{key:"addDontHave",value:function(e){var r=e.toString(uke);this.blockPresences.has(r)||this.blockPresences.set(r,t.BlockPresenceType.DontHave)}},{key:"cancel",value:function(e){var r=e.toString(uke);this.wantlist.delete(r),this.addEntry(e,0,t.WantType.Block,!0,!1)}},{key:"setPendingBytes",value:function(e){this.pendingBytes=e}},{key:"serializeToBitswap100",value:function(){var e={wantlist:{entries:Array.from(this.wantlist.values()).map((function(e){return{block:e.cid.bytes,priority:Number(e.priority),cancel:Boolean(e.cancel)}})),full:!!this.full||void 0},blocks:Array.from(this.blocks.values())};return Pke.encode(e).finish()}},{key:"serializeToBitswap110",value:function(){var e,t={wantlist:{entries:Array.from(this.wantlist.values()).map((function(e){return{block:e.cid.bytes,priority:Number(e.priority),wantType:e.wantType,cancel:Boolean(e.cancel),sendDontHave:Boolean(e.sendDontHave)}})),full:!!this.full||void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes},r=Ni(this.blocks.entries());try{for(r.s();!(e=r.n()).done;){var n=Ia(e.value,2),a=n[0],i=n[1],o=pke.parse(a),s=o.version,u=o.code,c=o.multihash.code,l=o.multihash.digest.length,f=Ake([s,u,c,l]);t.payload.push(new Pke.Block({prefix:f,data:i}))}}catch(eL){r.e(eL)}finally{r.f()}var h,p=Ni(this.blockPresences);try{for(p.s();!(h=p.n()).done;){var d=Ia(h.value,2),v=d[0],y=d[1];t.blockPresences.push(new Pke.BlockPresence({cid:pke.parse(v).bytes,type:y}))}}catch(eL){p.e(eL)}finally{p.f()}return this.pendingBytes>0&&(t.pendingBytes=this.pendingBytes),Pke.encode(t).finish()}},{key:"equals",value:function(e){return!!(this.full===e.full&&this.pendingBytes===e.pendingBytes&&zke(this.wantlist,e.wantlist)&&zke(this.blocks,e.blocks)&&zke(this.blockPresences,e.blockPresences))}},{key:Symbol.toStringTag,get:function(){var e=Array.from(this.wantlist.keys()),t=Array.from(this.blocks.keys());return"BitswapMessage <full: ".concat(this.full,", list: ").concat(e,", blocks: ").concat(t,">")}}]),t}();Fke.deserialize=function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Pke.decode(t),a=n.wantlist&&n.wantlist.full||!1,i=new Fke(a),n.wantlist&&n.wantlist.entries&&n.wantlist.entries.forEach((function(e){if(e.block){var t=pke.decode(e.block);i.addEntry(t,e.priority||0,e.wantType,Boolean(e.cancel),Boolean(e.sendDontHave))}})),n.blockPresences&&n.blockPresences.forEach((function(e){if(e.cid){var t=pke.decode(e.cid);e.type===Fke.BlockPresenceType.Have?i.addHave(t):i.addDontHave(t)}})),!(n.blocks.length>0)){e.next=9;break}return e.next=8,Promise.all(n.blocks.map(function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eke.digest(t);case 2:r=e.sent,n=pke.createV0(r),i.addBlock(n,t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:case 14:return e.abrupt("return",i);case 9:if(!(n.payload.length>0)){e.next=14;break}return e.next=12,Promise.all(n.payload.map(function(){var e=An(En().mark((function e(t){var n,a,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.prefix&&t.data){e.next=2;break}return e.abrupt("return");case 2:if(n=Ske(t.prefix),a=n[0],o=n[1],(s=n[2])!==Eke.code){e.next=10;break}e.t0=Eke,e.next=16;break;case 10:if(e.t1=r,!e.t1){e.next=15;break}return e.next=14,r.getHasher(s);case 14:e.t1=e.sent;case 15:e.t0=e.t1;case 16:if(u=e.t0){e.next=19;break}throw new lb("Unknown hash algorithm","ERR_UNKNOWN_HASH_ALG");case 19:return e.next=21,u.digest(t.data);case 21:c=e.sent,l=pke.create(a,o,c),i.addBlock(l,t.data);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return i.setPendingBytes(n.pendingBytes),e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Fke.blockPresenceSize=function(e){return e.bytes.length+1},Fke.Entry=Uke,Fke.WantType={Block:Pke.Wantlist.WantType.Block,Have:Pke.Wantlist.WantType.Have},Fke.BlockPresenceType={Have:Pke.BlockPresenceType.Have,DontHave:Pke.BlockPresenceType.DontHave};var Vke=Math.pow(2,31)-1,jke=function(e,t,r){var n=null,a=null,i=function(){n&&(clearTimeout(n),a=null,n=null)},o=function(){if(!t)return e.apply(this,arguments);var o=this,s=arguments,u=r&&!n;return i(),a=function(){e.apply(o,s)},n=setTimeout((function(){if(n=null,!u){var e=a;return a=null,e()}}),t),u?a():void 0};return o.cancel=i,o.flush=function(){var e=a;i(),e&&e()},o};var qke=function(){function e(t,r,n){Cn(this,e),this.peerId=r,this.network=n,this.refcnt=1,this._entries=[],this._log=Mke(t,"msgqueue"),this.sendEntries=jke(this._sendEntries.bind(this),1)}return Dn(e,[{key:"addMessage",value:function(e){e.empty||this.send(e)}},{key:"addEntries",value:function(e){this._entries=this._entries.concat(e),this.sendEntries()}},{key:"_sendEntries",value:function(){if(this._entries.length){var e=new Fke(!1);this._entries.forEach((function(t){t.cancel?e.cancel(t.cid):e.addEntry(t.cid,t.priority)})),this._entries=[],this.addMessage(e)}}},{key:"send",value:function(){var e=An(En().mark((function e(t){var r=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.network.connectTo(this.peerId);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),this._log.error("cant connect to peer %s: %s",this.peerId.toString(),e.t0.message),e.abrupt("return");case 9:this._log("sending message to peer %s",this.peerId.toString()),this.network.sendMessage(this.peerId,t).catch((function(e){r._log.error("send error: %s",e.message)}));case 11:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Kke=function(){function e(t,r,n,a){Cn(this,e),this.peers=Aie({name:"ipfs_bitswap_want_manager_peers",metrics:a.metrics}),this.wantlist=new Oke(n,a),this.network=r,this._stats=n,this._peerId=t,this._log=Mke(t,"want")}return Dn(e,[{key:"_addEntries",value:function(e,t,r){var n=this,a=e.map((function(e,r){return new Fke.Entry(e,Vke-r,Fke.WantType.Block,t)}));a.forEach((function(e){e.cancel?r?n.wantlist.removeForce(e.cid.toString(uke)):n.wantlist.remove(e.cid):(n._log("adding to wl"),n.wantlist.add(e.cid,e.priority))}));var i,o=Ni(this.peers.values());try{for(o.s();!(i=o.n()).done;){i.value.addEntries(a)}}catch(eL){o.e(eL)}finally{o.f()}}},{key:"_startPeerHandler",value:function(e){var t=this.peers.get(e.toString());if(!t){t=new qke(this._peerId,e,this.network);var r,n=new Fke(!0),a=Ni(this.wantlist.entries());try{for(a.s();!(r=a.n()).done;){var i=r.value;n.addEntry(i[1].cid,i[1].priority)}}catch(eL){a.e(eL)}finally{a.f()}return t.addMessage(n),this.peers.set(e.toString(),t),t}t.refcnt++}},{key:"_stopPeerHandler",value:function(e){var t=this.peers.get(e.toString());t&&(t.refcnt--,t.refcnt>0||this.peers.delete(e.toString()))}},{key:"wantBlocks",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._addEntries(e,!1),r&&r.signal&&r.signal.addEventListener("abort",(function(){t.cancelWants(e)}))}},{key:"unwantBlocks",value:function(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}},{key:"cancelWants",value:function(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}},{key:"connectedPeers",value:function(){return Array.from(this.peers.keys())}},{key:"connected",value:function(e){this._startPeerHandler(e)}},{key:"disconnected",value:function(e){this._stopPeerHandler(e)}},{key:"start",value:function(){}},{key:"stop",value:function(){var e=this;this.peers.forEach((function(t){return e.disconnected(t.peerId)}))}}]),e}(),Hke="/ipfs/bitswap/1.0.0",Gke="/ipfs/bitswap/1.1.0",Wke="/ipfs/bitswap/1.2.0",Yke=function(){function e(t,r,n){var a,i,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Cn(this,e),this._log=Mke(t.peerId,"network"),this._libp2p=t,this._bitswap=r,this._protocols=[Hke],s.b100Only||(this._protocols.unshift(Gke),this._protocols.unshift(Wke)),this._stats=n,this._running=!1,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this._hashLoader=s.hashLoader,this._maxInboundStreams=null!==(a=s.maxInboundStreams)&&void 0!==a?a:32,this._maxOutboundStreams=null!==(i=s.maxOutboundStreams)&&void 0!==i?i:128,this._incomingStreamTimeout=null!==(o=s.incomingStreamTimeout)&&void 0!==o?o:3e4}return Dn(e,[{key:"start",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._running=!0,e.next=3,this._libp2p.handle(this._protocols,this._onConnection,{maxInboundStreams:this._maxInboundStreams,maxOutboundStreams:this._maxOutboundStreams});case 3:t=oZ({onConnect:this._onPeerConnect,onDisconnect:this._onPeerDisconnect}),this._registrarIds=[],r=Ni(this._protocols),e.prev=6,r.s();case 8:if((n=r.n()).done){e.next=17;break}return a=n.value,e.t0=this._registrarIds,e.next=13,this._libp2p.register(a,t);case 13:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(6),r.e(e.t2);case 22:return e.prev=22,r.f(),e.finish(22);case 25:this._libp2p.getConnections().forEach((function(e){i._onPeerConnect(e.remotePeer)}));case 26:case"end":return e.stop()}}),e,this,[[6,19,22,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){var t,r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._running=!1,e.next=3,this._libp2p.unhandle(this._protocols);case 3:if(null!=this._registrarIds){t=Ni(this._registrarIds);try{for(t.s();!(r=t.n()).done;)n=r.value,this._libp2p.unregister(n)}catch(eL){t.e(eL)}finally{t.f()}this._registrarIds=[]}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_onConnection",value:function(e){var t=this,r=e.stream,n=e.connection;if(this._running){var a=new Uf.TimeoutController(this._incomingStreamTimeout);Promise.resolve().then(An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._log("incoming new bitswap %s connection from %p",r.stat.protocol,n.remotePeer),e.next=3,TS(U$(r.source,a.signal),K$(),function(){var e=An(En().mark((function e(r){var i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,o=!1,e.prev=2,u=zn(r);case 4:return e.next=6,u.next();case 6:if(!(i=!(c=e.sent).done)){e.next=24;break}return l=c.value,e.prev=8,e.next=11,Fke.deserialize(l.subarray(),t._hashLoader);case 11:return f=e.sent,e.next=14,t._bitswap._receiveMessage(n.remotePeer,f);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(8),t._bitswap._receiveError(e.t0),e.abrupt("break",24);case 20:a.reset();case 21:i=!1,e.next=4;break;case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(2),o=!0,s=e.t1;case 30:if(e.prev=30,e.prev=31,!i||null==u.return){e.next=35;break}return e.next=35,u.return();case 35:if(e.prev=35,!o){e.next=38;break}throw s;case 38:return e.finish(35);case 39:return e.finish(30);case 40:case"end":return e.stop()}}),e,null,[[2,26,30,40],[8,16],[31,,35,39]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))).catch((function(e){t._log(e),r.abort(e)})).finally((function(){a.clear(),r.close()}))}}},{key:"_onPeerConnect",value:function(e){this._bitswap._onPeerConnected(e)}},{key:"_onPeerDisconnect",value:function(e){this._bitswap._onPeerDisconnected(e)}},{key:"findProviders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._libp2p.contentRouting.findProviders(e,t)}},{key:"findAndConnect",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=0,i=!1,o=!1,e.prev=4,u=zn(this.findProviders(t,r));case 6:return e.next=8,u.next();case 8:if(!(i=!(c=e.sent).done)){e.next=18;break}if(l=c.value,this._log("connecting to provider ".concat(l.id)),n.push(this.connectTo(l.id,r).catch((function(e){f._log.error(e)}))),3!==++a){e.next=15;break}return e.abrupt("break",18);case 15:i=!1,e.next=6;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),o=!0,s=e.t0;case 24:if(e.prev=24,e.prev=25,!i||null==u.return){e.next=29;break}return e.next=29,u.return();case 29:if(e.prev=29,!o){e.next=32;break}throw s;case 32:return e.finish(29);case 33:return e.finish(24);case 34:return e.next=36,Promise.all(n);case 36:case"end":return e.stop()}}),e,this,[[4,20,24,34],[25,,29,33]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"provide",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._libp2p.contentRouting.provide(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._running){e.next=2;break}throw new Error("network isn't running");case 2:return n=t.toString(),this._log("sendMessage to %s",n,r),e.next=6,this._libp2p.dial(t);case 6:return a=e.sent,e.next=9,a.newStream([Wke,Gke,Hke]);case 9:return i=e.sent,e.next=12,Qke(i,r,this._log);case 12:this._updateSentStats(t,r.blocks);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"connectTo",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._running){e.next=2;break}throw new Error("network isn't running");case 2:return e.abrupt("return",this._libp2p.dial(t,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_updateSentStats",value:function(e,t){var r=e.toString();if(this._stats){var n,a=Ni(t.values());try{for(a.s();!(n=a.n()).done;){var i=n.value;this._stats.push(r,"dataSent",i.length)}}catch(eL){a.e(eL)}finally{a.f()}this._stats.push(r,"blocksSent",t.size)}}}]),e}();function Qke(e,t,r){return Jke.apply(this,arguments)}function Jke(){return Jke=An(En().mark((function e(t,r,n){var a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t.stat.protocol,e.next=e.t0===Hke?4:e.t0===Gke||e.t0===Wke?6:8;break;case 4:return a=r.serializeToBitswap100(),e.abrupt("break",9);case 6:return a=r.serializeToBitswap110(),e.abrupt("break",9);case 8:throw new Error("Unknown protocol: "+t.stat.protocol);case 9:return e.next=11,TS([a],V$(),t);case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(0),n(e.t1);case 16:return e.prev=16,t.close(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])}))),Jke.apply(this,arguments)}var Zke=function(){function e(t){Cn(this,e),this.partner=t,this.wantlist=new Oke,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}return Dn(e,[{key:"sentBytes",value:function(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesSent+=e}},{key:"receivedBytes",value:function(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesRecv+=e}},{key:"wants",value:function(e,t,r){this.wantlist.add(e,t,r)}},{key:"cancelWant",value:function(e){this.wantlist.remove(e)}},{key:"wantlistContains",value:function(e){return this.wantlist.get(e)}},{key:"debtRatio",value:function(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}]),e}(),Xke=function(e,t){Pn(n,e);var r=Un(n);function n(e,t){var a;Cn(this,n),(a=r.call(this))._cmp=t||a._defaultSort,a._keys=[];var i,o=Ni(e||[]);try{for(o.s();!(i=o.n()).done;){var s=Ia(i.value,2),u=s[0],c=s[1];a.set(u,c)}}catch(eL){o.e(eL)}finally{o.f()}return a}return Dn(n,[{key:"update",value:function(e){if(!(e<0||e>=this._keys.length)){var t=this._keys[e];this._keys.splice(e,1);var r=this._find(t);this._keys.splice(r,0,t)}}},{key:"set",value:function(e,t){if(this.has(e)){var r=this.indexOf(e);this._keys.splice(r,1)}Qs(Nn(n.prototype),"set",this).call(this,e,t);var a=this._find(e);return this._keys.splice(a,0,e),this}},{key:"clear",value:function(){Qs(Nn(n.prototype),"clear",this).call(this),this._keys=[]}},{key:"delete",value:function(e){if(!this.has(e))return!1;var t=this.indexOf(e);return this._keys.splice(t,1),Qs(Nn(n.prototype),"delete",this).call(this,e)}},{key:"indexOf",value:function(e){if(!this.has(e))return-1;var t=this._find(e);if(this._keys[t]===e)return t;for(var r=1;r<this._keys.length;r++){if(this._keys[t+r]===e)return t+r;if(this._keys[t-r]===e)return t-r}return-1}},{key:"_find",value:function(e){for(var t=0,r=this._keys.length;t<r;){var n=t+r>>>1,a=this._kCmp(this._keys[n],e);if(a<0)t=n+1;else{if(!(a>0))return n;r=n}}return t}},{key:"keys",value:En().mark((function e(){var t,r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ni(this._keys),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,n;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:return e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:En().mark((function e(){var t,r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ni(this._keys),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,this.get(n);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:return e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"entries",value:En().mark((function e(){var t,r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ni(this._keys),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,[n,this.get(n)];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:return e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:t,value:En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.entries(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"forEach",value:function(e,t){if(e){var r,n=Ni(this._keys);try{for(n.s();!(r=n.n()).done;){var a=r.value;e.apply(t,[[a,this.get(a)]])}}catch(eL){n.e(eL)}finally{n.f()}}}},{key:"_defaultSort",value:function(e,t){return e[0]<t[0]?-1:t[0]<e[0]?1:0}},{key:"_kCmp",value:function(e,t){return this._cmp([e,this.get(e)],[t,this.get(t)])}}]),n}(nu(Map),Symbol.iterator),$ke={hasNewInfo:function(){return!1},merge:function(){}},exe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$ke;Cn(this,e),this._taskMerger=t,this._byPeer=new Xke([],txe.compare)}return Dn(e,[{key:"pushTasks",value:function(e,t){var r=this._byPeer.get(e.toString());r||(r=new txe(e,this._taskMerger)),r.pushTasks(t),this._byPeer.set(e.toString(),r)}},{key:"popTasks",value:function(e){var t=this._head();if(void 0===t)return{tasks:[],pendingSize:0};var r=t.popTasks(e),n=r.tasks,a=r.pendingSize;if(0===n.length)return{tasks:n,pendingSize:a};var i=t.peerId;return t.isIdle()?this._byPeer.delete(i.toString()):this._byPeer.update(0),{peerId:i,tasks:n,pendingSize:a}}},{key:"_head",value:function(){if(0!==this._byPeer.size){var e,t=Ni(this._byPeer);try{for(t.s();!(e=t.n()).done;){return Ia(e.value,2)[1]}}catch(eL){t.e(eL)}finally{t.f()}}}},{key:"remove",value:function(e,t){var r=this._byPeer.get(t.toString());r&&r.remove(e)}},{key:"tasksDone",value:function(e,t){var r=this._byPeer.get(e.toString());if(r){var n,a=this._byPeer.indexOf(e.toString()),i=Ni(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.taskDone(o)}}catch(eL){i.e(eL)}finally{i.f()}this._byPeer.update(a)}}}]),e}(),txe=function(){function e(t,r){Cn(this,e),this.peerId=t,this._taskMerger=r,this._activeTotalSize=0,this._pending=new rxe,this._active=new Set}return Dn(e,[{key:"pushTasks",value:function(e){var t,r=Ni(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;this._pushTask(n)}}catch(eL){r.e(eL)}finally{r.f()}}},{key:"_pushTask",value:function(e){if(this._taskHasMoreInfoThanActiveTasks(e)){var t=this._pending.get(e.topic);if(t)return e.priority>t.priority&&this._pending.updatePriority(e.topic,e.priority),void this._taskMerger.merge(e,t);this._pending.add(e)}}},{key:"_taskHasMoreInfoThanActiveTasks",value:function(e){var t,r=[],n=Ni(this._active);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.topic===e.topic&&r.push(a)}}catch(eL){n.e(eL)}finally{n.f()}return 0===r.length||this._taskMerger.hasNewInfo(e,r)}},{key:"popTasks",value:function(e){for(var t=0,r=[],n=this._pending.tasks(),a=0;a<n.length&&t<e;a++){var i=n[a];r.push(i),t+=i.size,this._pending.delete(i.topic),this._activeTotalSize+=i.size,this._active.add(i)}return{tasks:r,pendingSize:this._pending.totalSize}}},{key:"taskDone",value:function(e){this._active.has(e)&&(this._activeTotalSize-=e.size,this._active.delete(e))}},{key:"remove",value:function(e){this._pending.delete(e)}},{key:"isIdle",value:function(){return 0===this._pending.length&&0===this._active.size}}],[{key:"compare",value:function(e,t){return 0===e[1]._pending.length?1:0===t[1]._pending.length?-1:e[1]._activeTotalSize===t[1]._activeTotalSize?t[1]._pending.length-e[1]._pending.length:e[1]._activeTotalSize-t[1]._activeTotalSize}}]),e}(),rxe=function(){function e(){Cn(this,e),this._tasks=new Xke([],this._compare)}return Dn(e,[{key:"length",get:function(){return this._tasks.size}},{key:"totalSize",get:function(){return su(this._tasks.values()).reduce((function(e,t){return e+t.task.size}),0)}},{key:"get",value:function(e){return(this._tasks.get(e)||{}).task}},{key:"add",value:function(e){this._tasks.set(e.topic,{created:Date.now(),task:e})}},{key:"delete",value:function(e){this._tasks.delete(e)}},{key:"tasks",value:function(){return su(this._tasks.values()).map((function(e){return e.task}))}},{key:"updatePriority",value:function(e,t){var r=this._tasks.get(e);if(r){var n=this._tasks.indexOf(e);r.task.priority=t,this._tasks.update(n)}}},{key:"_compare",value:function(e,t){return e[1].task.priority===t[1].task.priority?e[1].created-t[1].created:t[1].task.priority-e[1].task.priority}}]),e}(),nxe={hasNewInfo:function(e,t){var r,n=!1,a=!1,i=Ni(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.data.haveBlock&&(n=!0),o.data.isWantBlock&&(a=!0)}}catch(eL){i.e(eL)}finally{i.f()}return!(a||!e.data.isWantBlock)||!(n||!e.data.haveBlock)},merge:function(e,t){var r=e.data,n=t.data;!n.haveBlock&&r.haveBlock&&(n.haveBlock=r.haveBlock,n.blockSize=r.blockSize),!n.isWantBlock&&r.isWantBlock&&(n.isWantBlock=!0,n.haveBlock&&!r.haveBlock||(n.haveBlock=r.haveBlock,t.size=e.size)),n.isWantBlock&&n.haveBlock&&(t.size=n.blockSize)}},axe=Fke.WantType,ixe=function(){function e(t,r,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};Cn(this,e),this._log=Mke(t,"engine"),this.blockstore=r,this.network=n,this._stats=a,this._opts=this._processOpts(o),this.ledgerMap=Aie({name:"ipfs_bitswap_ledger_map",metrics:i.metrics}),this._running=!1,this._requestQueue=new exe(nxe)}return Dn(e,[{key:"_processOpts",value:function(e){return jn({maxSizeReplaceHasWithBlock:1024,targetMessageSize:16384},e)}},{key:"_scheduleProcessTasks",value:function(){var e=this;setTimeout((function(){e._processTasks()}))}},{key:"_processTasks",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._running){e.next=2;break}return e.abrupt("return");case 2:if(t=this._requestQueue.popTasks(this._opts.targetMessageSize),r=t.peerId,n=t.tasks,a=t.pendingSize,0!==n.length){e.next=5;break}return e.abrupt("return");case 5:(i=new Fke(!1)).setPendingBytes(a),o=[],s=new Map,u=Ni(n);try{for(u.s();!(c=u.n()).done;)l=c.value,f=pke.parse(l.topic),l.data.haveBlock?l.data.isWantBlock?(o.push(f),s.set(l.topic,l.data)):i.addHave(f):i.addDontHave(f)}catch(eL){u.e(eL)}finally{u.f()}return e.next=13,this._getBlocks(o);case 13:h=e.sent,p=Ni(s);try{for(p.s();!(d=p.n()).done;)v=Ia(d.value,2),y=v[0],b=v[1],g=pke.parse(y),(m=h.get(y))?i.addBlock(g,m):b.sendDontHave&&i.addDontHave(g)}catch(eL){p.e(eL)}finally{p.f()}if(!i.empty){e.next=20;break}return r&&this._requestQueue.tasksDone(r,n),this._scheduleProcessTasks(),e.abrupt("return");case 20:if(e.prev=20,e.t0=r,!e.t0){e.next=25;break}return e.next=25,this.network.sendMessage(r,i);case 25:w=Ni(h.entries());try{for(w.s();!(k=w.n()).done;)x=Ia(k.value,2),_=x[0],E=x[1],r&&this.messageSent(r,pke.parse(_),E)}catch(eL){w.e(eL)}finally{w.f()}e.next=32;break;case 29:e.prev=29,e.t1=e.catch(20),this._log.error(e.t1);case 32:r&&this._requestQueue.tasksDone(r,n),this._scheduleProcessTasks();case 34:case"end":return e.stop()}}),e,this,[[20,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"wantlistForPeer",value:function(e){var t=e.toString(),r=this.ledgerMap.get(t);return r?r.wantlist.sortedEntries():new Map}},{key:"ledgerForPeer",value:function(e){var t=e.toString(),r=this.ledgerMap.get(t);return r?{peer:r.partner,value:r.debtRatio(),sent:r.accounting.bytesSent,recv:r.accounting.bytesRecv,exchanged:r.exchangeCount}:null}},{key:"peers",value:function(){return Array.from(this.ledgerMap.values()).map((function(e){return e.partner}))}},{key:"receivedBlocks",value:function(e){if(e.length){var t,r=Ni(this.ledgerMap.values());try{for(r.s();!(t=r.n()).done;){var n,a=t.value,i=Ni(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=a.wantlistContains(o.cid);if(s){var u=o.data.length,c=this._sendAsBlock(s.wantType,u),l=u;c||(l=Fke.blockPresenceSize(s.cid)),this._requestQueue.pushTasks(a.partner,[{topic:s.cid.toString(uke),priority:s.priority,size:l,data:{blockSize:u,isWantBlock:c,haveBlock:!0,sendDontHave:!1}}])}}}catch(eL){i.e(eL)}finally{i.f()}}}catch(eL){r.e(eL)}finally{r.f()}this._scheduleProcessTasks()}}},{key:"messageReceived",value:function(){var e=An(En().mark((function e(t,r){var n,a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._findOrCreate(t),!r.empty){e.next=3;break}return e.abrupt("return");case 3:if(r.full&&(n.wantlist=new Oke),this._updateBlockAccounting(r.blocks,n),0!==r.wantlist.size){e.next=8;break}return this._scheduleProcessTasks(),e.abrupt("return");case 8:return a=[],i=[],r.wantlist.forEach((function(e){e.cancel?(n.cancelWant(e.cid),a.push(e.cid)):(n.wants(e.cid,e.priority,e.wantType),i.push(e))})),this._cancelWants(t,a),e.next=14,this._addWants(t,i);case 14:this._scheduleProcessTasks();case 15:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_cancelWants",value:function(e,t){var r,n=Ni(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;this._requestQueue.remove(a.toString(uke),e)}}catch(eL){n.e(eL)}finally{n.f()}}},{key:"_addWants",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l,f;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBlockSizes(r.map((function(e){return e.cid})));case 2:n=e.sent,a=[],i=Ni(r);try{for(i.s();!(o=i.n()).done;)s=o.value,u=s.cid.toString(uke),null==(c=n.get(u))?s.sendDontHave&&a.push({topic:u,priority:s.priority,size:Fke.blockPresenceSize(s.cid),data:{isWantBlock:s.wantType===axe.Block,blockSize:0,haveBlock:!1,sendDontHave:s.sendDontHave}}):(l=this._sendAsBlock(s.wantType,c),f=c,l||(f=Fke.blockPresenceSize(s.cid)),a.push({topic:u,priority:s.priority,size:f,data:{isWantBlock:l,blockSize:c,haveBlock:!0,sendDontHave:s.sendDontHave}})),this._requestQueue.pushTasks(t,a)}catch(eL){i.e(eL)}finally{i.f()}case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_sendAsBlock",value:function(e,t){return e===axe.Block||t<=this._opts.maxSizeReplaceHasWithBlock}},{key:"_getBlockSizes",value:function(){var e=An(En().mark((function e(t){var r;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBlocks(t);case 2:return r=e.sent,e.abrupt("return",new Map(su(r).map((function(e){var t=Ia(e,2);return[t[0],t[1].length]}))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getBlocks",value:function(){var e=An(En().mark((function e(t){var r,n=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Map,e.next=3,Promise.all(t.map(function(){var e=An(En().mark((function e(t){var a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.blockstore.get(t);case 3:a=e.sent,r.set(t.toString(uke),a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"ERR_NOT_FOUND"!==e.t0.code&&n._log.error("failed to query blockstore for %s: %s",t,e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateBlockAccounting",value:function(e,t){var r,n=Ni(e.values());try{for(n.s();!(r=n.n()).done;){var a=r.value;this._log("got block (%s bytes)",a.length),t.receivedBytes(a.length)}}catch(eL){n.e(eL)}finally{n.f()}}},{key:"messageSent",value:function(e,t,r){var n=this._findOrCreate(e);n.sentBytes(r.length),n.wantlist.remove(t)}},{key:"numBytesSentTo",value:function(e){return this._findOrCreate(e).accounting.bytesSent}},{key:"numBytesReceivedFrom",value:function(e){return this._findOrCreate(e).accounting.bytesRecv}},{key:"peerDisconnected",value:function(e){this.ledgerMap.delete(e.toString())}},{key:"_findOrCreate",value:function(e){var t=e.toString(),r=this.ledgerMap.get(t);if(r)return r;var n=new Zke(e);return this.ledgerMap.set(t,n),this._stats&&this._stats.push(t,"peerCount",1),n}},{key:"start",value:function(){this._running=!0}},{key:"stop",value:function(){this._running=!1}}]),e}(),oxe=function(e){return"unwant:".concat(kh(e.multihash.bytes,"base64"))},sxe=function(e){return"block:".concat(kh(e.multihash.bytes,"base64"))},uxe=function(e){Pn(r,e);var t=Un(r);function r(e){var n;return Cn(this,r),(n=t.call(this)).setMaxListeners(1e3),n._log=Mke(e,"notif"),n}return Dn(r,[{key:"hasBlock",value:function(e,t){var r=sxe(e);this._log(r),this.emit(r,t)}},{key:"wantBlock",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Not a valid cid");var n=sxe(e),a=oxe(e);return this._log("wantBlock:".concat(e)),new Promise((function(i,o){var s=function(){t.removeListener(n,u),o(new Error("Block for ".concat(e," unwanted")))},u=function(e){t.removeListener(a,s),i(e)};t.once(a,s),t.once(n,u),r&&r.signal&&r.signal.addEventListener("abort",(function(){t.removeListener(n,u),t.removeListener(a,s),o(new Error("Want for ".concat(e," aborted")))}))}))}},{key:"unwantBlock",value:function(e){var t=oxe(e);this._log(t),this.emit(t)}}]),r}(q9.EventEmitter),cxe=__webpack_require__(6673),lxe=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a;return Cn(this,r),(a=t.call(this))._options=n,a._queue=[],a._stats={},a._frequencyLastTime=Date.now(),a._frequencyAccumulators={},a._movingAverages={},a._update=a._update.bind(On(a)),e.forEach((function(e){a._stats[e]=BigInt(0),a._movingAverages[e]={},a._options.movingAverageIntervals.forEach((function(t){(a._movingAverages[e][t]=cxe(t)).push(a._frequencyLastTime,0)}))})),a._enabled=a._options.enabled,a}return Dn(r,[{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._disabled=!0}},{key:"stop",value:function(){this._timeout&&clearTimeout(this._timeout)}},{key:"snapshot",get:function(){return Object.assign({},this._stats)}},{key:"movingAverages",get:function(){return Object.assign({},this._movingAverages)}},{key:"push",value:function(e,t){this._enabled&&(this._queue.push([e,t,Date.now()]),this._resetComputeTimeout())}},{key:"_resetComputeTimeout",value:function(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}},{key:"_nextTimeout",value:function(){var e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}},{key:"_update",value:function(){if(this._timeout=null,this._queue.length){for(var e;this._queue.length;){var t=e=this._queue.shift();t&&this._applyOp(t)}e&&this._updateFrequency(e[2]),this.emit("update",this._stats)}}},{key:"_updateFrequency",value:function(e){var t=this,r=e-this._frequencyLastTime;r&&Object.keys(this._stats).forEach((function(n){t._updateFrequencyFor(n,r,e)})),this._frequencyLastTime=e}},{key:"_updateFrequencyFor",value:function(e,t,r){var n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;var a=n/t*1e3,i=this._movingAverages[e];i||(i=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach((function(e){var t=i[e];t||(t=i[e]=cxe(e)),t.push(r,a)}))}},{key:"_applyOp",value:function(e){var t=e[0],r=e[1];if("number"!==typeof r)throw new Error("invalid increment number: ".concat(r));Object.prototype.hasOwnProperty.call(this._stats,t)||(this._stats[t]=BigInt(0)),this._stats[t]=BigInt(this._stats[t])+BigInt(r),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=r}}]),r}(q9.EventEmitter),fxe={enabled:!1,computeThrottleTimeout:1e3,computeThrottleMaxQueueSize:1e3,movingAverageIntervals:[6e4,3e5,9e5]},hxe=function(e){Pn(r,e);var t=Un(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fxe;Cn(this,r),n=t.call(this);var o=Object.assign({},fxe,i);if("number"!==typeof o.computeThrottleTimeout)throw new Error("need computeThrottleTimeout");if("number"!==typeof o.computeThrottleMaxQueueSize)throw new Error("need computeThrottleMaxQueueSize");return n._initialCounters=a,n._options=o,n._enabled=n._options.enabled,n._global=new lxe(a,o),n._global.on("update",(function(e){return n.emit("update",e)})),n._peers=Aie({name:"ipfs_bitswap_stats_peers",metrics:e.metrics}),n}return Dn(r,[{key:"enable",value:function(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}},{key:"disable",value:function(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}},{key:"stop",value:function(){this._enabled=!1,this._global.stop();var e,t=Ni(this._peers);try{for(t.s();!(e=t.n()).done;){e.value[1].stop()}}catch(eL){t.e(eL)}finally{t.f()}}},{key:"snapshot",get:function(){return this._global.snapshot}},{key:"movingAverages",get:function(){return this._global.movingAverages}},{key:"forPeer",value:function(e){var t="string"!==typeof e&&e.toString?e.toString():"".concat(e);return this._peers.get(t)}},{key:"push",value:function(e,t,r){if(this._enabled&&(this._global.push(t,r),e)){var n=this._peers.get(e);n||(n=new lxe(this._initialCounters,this._options),this._peers.set(e,n)),n.push(t,r)}}},{key:"disconnected",value:function(e){var t=e.toString(),r=this._peers.get(t);r&&(r.stop(),this._peers.delete(t))}}]),r}(q9.EventEmitter),pxe={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},dxe=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"],vxe=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Cn(this,r),(a=t.call(this))._libp2p=e,a._log=Mke(a.peerId),a._options=Object.assign({},pxe,i),a._stats=new hxe(e,dxe,{enabled:a._options.statsEnabled,computeThrottleTimeout:a._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:a._options.statsComputeThrottleMaxQueueSize}),a.network=new Yke(e,On(a),a._stats,{hashLoader:i.hashLoader,maxInboundStreams:i.maxInboundStreams,maxOutboundStreams:i.maxOutboundStreams,incomingStreamTimeout:i.incomingStreamTimeout}),a.blockstore=n,a.engine=new ixe(a.peerId,n,a.network,a._stats,e),a.wm=new Kke(a.peerId,a.network,a._stats,e),a.notifications=new uxe(a.peerId),a.started=!1,a}return Dn(r,[{key:"isStarted",value:function(){return this.started}},{key:"peerId",get:function(){return this._libp2p.peerId}},{key:"_receiveMessage",value:function(){var e=An(En().mark((function e(t,r){var n,a,i,o,s,u,c,l=this;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.engine.messageReceived(t,r);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this._log("failed to receive message",r);case 8:if(0!==r.blocks.size){e.next=10;break}return e.abrupt("return");case 10:n=[],a=Ni(r.blocks.entries());try{for(a.s();!(i=a.n()).done;)o=Ia(i.value,2),s=o[0],u=o[1],c=pke.parse(s),n.push({wasWanted:this.wm.wantlist.contains(c),cid:c,data:u})}catch(eL){a.e(eL)}finally{a.f()}return this.wm.cancelWants(n.filter((function(e){return e.wasWanted})).map((function(e){return e.cid}))),e.next=16,Promise.all(n.map((function(e){var r=e.cid,n=e.wasWanted,a=e.data;return l._handleReceivedBlock(t,r,a,n)})));case 16:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_handleReceivedBlock",value:function(){var e=An(En().mark((function e(t,r,n,a){var i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._log("received block"),e.next=3,this.blockstore.has(r);case 3:if(i=e.sent,this._updateReceiveCounters(t.toString(),r,n,i),a){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.put(r,n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"_updateReceiveCounters",value:function(e,t,r,n){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",r.length),n&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",r.length))}},{key:"_receiveError",value:function(e){this._log.error("ReceiveError: %s",e.message)}},{key:"_onPeerConnected",value:function(e){this.wm.connected(e)}},{key:"_onPeerDisconnected",value:function(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}},{key:"enableStats",value:function(){this._stats.enable()}},{key:"disableStats",value:function(){this._stats.disable()}},{key:"wantlistForPeer",value:function(e,t){return this.engine.wantlistForPeer(e)}},{key:"ledgerForPeer",value:function(e){return this.engine.ledgerForPeer(e)}},{key:"get",value:function(){var e=An(En().mark((function e(t){var r,n,a,i,o,s,u,c=this,l=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},n=function(e,t){return c.wm.wantBlocks([e],t),c.notifications.wantBlock(e,t)},a=!1,i=function(){var e=An(En().mark((function e(t,r){var i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.blockstore.get(t,r);case 3:return i=e.sent,e.abrupt("return",i);case 7:if(e.prev=7,e.t0=e.catch(0),"ERR_NOT_FOUND"===e.t0.code){e.next=11;break}throw e.t0;case 11:return a||(a=!0,c.network.findAndConnect(t,r).catch((function(e){return c._log.error(e)}))),e.abrupt("return",n(t,r));case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),o=new AbortController,s=r.signal?(0,Wv.anySignal)([r.signal,o.signal]):o.signal,e.prev=6,e.next=9,Promise.race([this.notifications.wantBlock(t,{signal:s}),i(t,{signal:s})]);case 9:return u=e.sent,e.abrupt("return",u);case 11:return e.prev=11,o.abort(),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[6,,11,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i,o,s,u,c;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(e);case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,t.get(c,r);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,Mf(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"unwant",value:function(e){var t=this,r=Array.isArray(e)?e:[e];this.wm.unwantBlocks(r),r.forEach((function(e){return t.notifications.unwantBlock(e)}))}},{key:"cancelWants",value:function(e){this.wm.cancelWants(Array.isArray(e)?e:[e])}},{key:"put",value:function(){var e=An(En().mark((function e(t,r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.blockstore.put(t,r);case 2:this._sendHaveBlockNotifications(t,r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"putMany",value:function(e,t){var r=this;return Hn(En().mark((function n(){var a,i,o,s,u,c,l,f;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=zn(r.blockstore.putMany(e,t));case 4:return n.next=6,Mf(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=14;break}return c=u.value,l=c.key,f=c.value,r._sendHaveBlockNotifications(l,f),n.next=11,{key:l,value:f};case 11:a=!1,n.next=4;break;case 14:n.next=20;break;case 16:n.prev=16,n.t0=n.catch(2),i=!0,o=n.t0;case 20:if(n.prev=20,n.prev=21,!a||null==s.return){n.next=25;break}return n.next=25,Mf(s.return());case 25:if(n.prev=25,!i){n.next=28;break}throw o;case 28:return n.finish(25);case 29:return n.finish(20);case 30:case"end":return n.stop()}}),n,null,[[2,16,20,30],[21,,25,29]])})))()}},{key:"_sendHaveBlockNotifications",value:function(e,t){var r=this;this.notifications.hasBlock(e,t),this.engine.receivedBlocks([{cid:e,data:t}]),this.network.provide(e).catch((function(e){r._log.error("Failed to provide: %s",e.message)}))}},{key:"getWantlist",value:function(){return this.wm.wantlist.entries()}},{key:"peers",value:function(){return this.engine.peers()}},{key:"stat",value:function(){return this._stats}},{key:"start",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wm.start(),e.next=3,this.network.start();case 3:this.engine.start(),this.started=!0;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._stats.stop(),this.wm.stop(),e.next=4,this.network.stop();case 4:this.engine.stop(),this.started=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unwrap",value:function(){return this.blockstore}},{key:"has",value:function(e){return this.blockstore.has(e)}}]),r}($G),yxe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new vxe(e,t,r)};function bxe(e){return e=e||new Error("Not Found"),ca(e,"ERR_NOT_FOUND")}function gxe(e){return e=e||new Error("Aborted"),ca(e,"ERR_ABORTED")}var mxe=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},wxe=mxe,kxe=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),xxe=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),_xe=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Sxe(this,e)}}]),e}(),Exe=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return Sxe(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Sxe=function(e,t){return new Exe(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},Axe=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new xxe(t,r,n),this.decoder=new _xe(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Cxe=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new Axe(t,r,n,a)},Ixe=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=wxe(n,r),i=a.encode,o=a.decode;return Cxe({prefix:t,name:r,encode:i,decode:function(e){return kxe(o(e))}})},Txe=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return Cxe({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})};Txe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Txe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Txe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Txe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Txe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Txe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Txe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Txe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Txe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Math.pow(2,31);Math.pow(2,7),Math.pow(2,14),Math.pow(2,21),Math.pow(2,28),Math.pow(2,35),Math.pow(2,42),Math.pow(2,49),Math.pow(2,56),Math.pow(2,63),Ixe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ixe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),new WeakMap,Symbol.for("@ipld/js-cid/CID"),jn({},wn);var Dxe=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a;return Cn(this,r),(a=t.call(this)).child=e,a.bitswap=n,a}return Dn(r,[{key:"open",value:function(){return this.child.open()}},{key:"close",value:function(){return this.child.close()}},{key:"unwrap",value:function(){return this.child}},{key:"put",value:function(){var e=An(En().mark((function e(t,r){var n,a=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{},e.next=3,this.has(t);case 3:if(!e.sent){e.next=5;break}return e.abrupt("return");case 5:if(!this.bitswap.isStarted()){e.next=10;break}return e.next=8,this.bitswap.put(t,r,n);case 8:e.next=12;break;case 10:return e.next=12,this.child.put(t,r,n);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"putMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=iS(e,function(){var e=An(En().mark((function e(r){var n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.key,e.next=3,t.has(n);case 3:return e.abrupt("return",!e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),!t.bitswap.isStarted()){n.next=5;break}return n.delegateYield(Cb(zn(t.bitswap.putMany(a,r))),"t0",3);case 3:n.next=6;break;case 5:return n.delegateYield(Cb(zn(t.child.putMany(a,r))),"t1",6);case 6:case"end":return n.stop()}}),n)})))()}},{key:"get",value:function(){var e=An(En().mark((function e(t){var r,n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.has(t);case 3:if(e.t0=!e.sent,!e.t0){e.next=6;break}e.t0=this.bitswap.isStarted();case 6:if(!e.t0){e.next=10;break}return e.abrupt("return",this.bitswap.get(t,r));case 10:return e.abrupt("return",this.child.get(t,r));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){var a,i;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=pS({objectMode:!0}),i=pS({objectMode:!0}),Promise.resolve().then(An(En().mark((function r(){var n,o,s,u,c,l;return En().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,o=!1,r.prev=2,u=zn(e);case 4:return r.next=6,u.next();case 6:if(!(n=!(c=r.sent).done)){r.next=21;break}return l=c.value,r.next=10,t.has(l);case 10:if(r.t0=!r.sent,!r.t0){r.next=13;break}r.t0=t.bitswap.isStarted();case 13:if(!r.t0){r.next=17;break}a.push(l),r.next=18;break;case 17:i.push(l);case 18:n=!1,r.next=4;break;case 21:r.next=27;break;case 23:r.prev=23,r.t1=r.catch(2),o=!0,s=r.t1;case 27:if(r.prev=27,r.prev=28,!n||null==u.return){r.next=32;break}return r.next=32,u.return();case 32:if(r.prev=32,!o){r.next=35;break}throw s;case 35:return r.finish(32);case 36:return r.finish(27);case 37:a.end(),i.end();case 39:case"end":return r.stop()}}),r,null,[[2,23,27,37],[28,,32,36]])})))),n.delegateYield(Cb(zn(_S(t.bitswap.getMany(a,r),t.child.getMany(i,r)))),"t0",4);case 4:case"end":return n.stop()}}),n)})))()}},{key:"delete",value:function(){var e=An(En().mark((function e(t,r){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.child.delete(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteMany",value:function(e,t){var r=this;return Hn(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(Cb(zn(r.child.deleteMany(e,t))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"has",value:function(){var e=An(En().mark((function e(t){var r,n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.abrupt("return",this.child.has(t,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"query",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(Cb(zn(t.child.query(e,r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"queryKeys",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function n(){return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(Cb(zn(t.child.queryKeys(e,r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}}]),r}($G),Rxe=function(){function e(t,r,n,a,i){Cn(this,e),this.peerId=t,this.libp2p=r,this.bitswap=n,this.repo=a,this.blockstore=i}return Dn(e,null,[{key:"start",value:function(){var t=An(En().mark((function t(r){var n,a,i,o,s,u,c,l,f,h,p,d;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.peerId,a=r.repo,i=r.print,o=r.hashers,s=r.options,!a.closed){t.next=4;break}return t.next=4,a.open();case 4:return t.next=6,a.config.getAll();case 6:return u=t.sent,t.next=9,wwe({options:s,repo:a,peerId:n,multiaddrs:Pxe(n,u),config:u,keychainConfig:void 0});case 9:return c=t.sent,t.next=12,c.start();case 12:l=Ni(c.getMultiaddrs());try{for(l.s();!(f=l.n()).done;)h=f.value,i("Swarm listening on ".concat(h.toString()))}catch(eL){l.e(eL)}finally{l.f()}return p=yxe(c,a.blocks,{statsEnabled:!0,hashLoader:o,maxInboundStreams:1024,maxOutboundStreams:1024}),t.next=17,p.start();case 17:return d=new Dxe(a.blocks,p),a.blocks=d,a.pins.blockstore=d,t.abrupt("return",new e(n,c,p,a,d));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"stop",value:function(){var e=An(En().mark((function e(t){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.repo.blocks=t.blockstore.unwrap(),t.repo.pins.blockstore=t.blockstore.unwrap(),e.next=4,t.bitswap.stop();case 4:return e.next=6,t.libp2p.stop();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Pxe=function(e,t){var r,n=e.toString(),a=[],i=Ni(t.Addresses&&t.Addresses.Swarm||[]);try{for(i.s();!(r=i.n()).done;){var o=Gd(r.value);if(o.protoCodes().includes(Nxe))throw ca(new Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");var s=o.getPeerId();s&&s!==n&&(o=o.encapsulate("/p2p/".concat(n))),a.push(o)}}catch(eL){i.e(eL)}finally{i.f()}return a},Nxe=479;var Lxe=Dn((function e(t){var r=t.network;Cn(this,e),this.addrs=function(e){var t=e.network;function r(){return r=An(En().mark((function e(){var r,n,a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},n=[],e.next=4,t.use(r);case 4:return a=e.sent,i=a.libp2p,e.next=8,i.peerStore.forEach((function(e){n.push({id:e.id,addrs:e.addresses.map((function(e){return e.multiaddr}))})}));case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(){return r.apply(this,arguments)}))}({network:r}),this.connect=function(e){var t=e.network;function r(){return r=An(En().mark((function e(r){var n,a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,t.use(n);case 3:return a=e.sent,i=a.libp2p,e.next=7,i.dial(r,n);case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(e){return r.apply(this,arguments)}))}({network:r}),this.disconnect=function(e){var t=e.network;function r(){return r=An(En().mark((function e(r){var n,a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,t.use(n);case 3:return a=e.sent,i=a.libp2p,e.next=7,i.hangUp(r);case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(e){return r.apply(this,arguments)}))}({network:r}),this.localAddrs=function(e){var t=e.network;function r(){return r=An(En().mark((function e(){var r,n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,t.use(r);case 3:return n=e.sent,a=n.libp2p,e.abrupt("return",a.getMultiaddrs());case 6:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(){return r.apply(this,arguments)}))}({network:r}),this.peers=function(e){var t=e.network;function r(){return r=An(En().mark((function e(){var r,n,a,i,o,s,u,c,l,f,h,p,d,v=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,t.use(r);case 3:if(n=e.sent,a=n.libp2p,!r.verbose){e.next=10;break}i=[],o=Ni(a.getConnections());try{for(o.s();!(s=o.n()).done;)u=s.value,c={addr:u.remoteAddr,peer:u.remotePeer},(r.verbose||r.direction)&&(c.direction=u.stat.direction),r.verbose&&(c.muxer=u.stat.multiplexer,c.latency="n/a",c.streams=[]),i.push(c)}catch(eL){o.e(eL)}finally{o.f()}return e.abrupt("return",i);case 10:l=new Map,f=Ni(a.getConnections());try{for(f.s();!(h=f.n()).done;)p=h.value,d={addr:p.remoteAddr,peer:p.remotePeer},l.set(p.remotePeer.toString(),d)}catch(eL){f.e(eL)}finally{f.f()}return e.abrupt("return",Array.from(l.values()));case 14:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(){return r.apply(this,arguments)}))}({network:r})})),Oxe={success:!0,time:0,text:""};var Bxe="/ipns/";function Uxe(e){var t;if(e.startsWith(Bxe)&&(e=e.substring(Bxe.length)),"1"!==e[0]&&"Q"!==e[0]||(e="z".concat(e)),"z"===e[0]&&(t=oi.decode(e)),"k"===e[0]&&(t=Nc.decode(e)),!t)throw new Error("Could not parse string");if(1!==t[0]&&114!==t[1]&&(t=ld([[1,114],t])),40!==t.length)throw new Error("Incorrect length "+t.length);return ld([Bf(Bxe),t.subarray(2)])}var Mxe=function(){var e=An(En().mark((function e(t,r,n){var a,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.use(n);case 2:if(null==(a=e.sent).libp2p.dht){e.next=7;break}return e.abrupt("return",a);case 7:return i=function(){var e=Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{from:r,name:"QUERY_ERROR",type:3,error:new sl("dht not enabled")};case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",{libp2p:{dht:{get:i,put:i,findProviders:i,findPeer:i,provide:i,getClosestPeers:i}}});case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();var zxe=function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new sl("pubsub not enabled");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fxe=Gn.bind({ignoreUndefined:!0}),Vxe=ua("ipfs"),jxe=3e4,qxe=function(){function e(t){var r=t.print,n=t.storage,a=t.codecs,i=t.options;Cn(this,e);var o=n.peerId,s=n.repo,u=n.keychain,c=fy.create(Rxe),l=rM(i.preload),f=function(){var e=function(){var e=An(En().mark((function e(t){var r,n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{recursive:!0},"string"===typeof t){e.next=3;break}throw new Error("Invalid arguments, domain must be a string");case 3:return t=sb(t),e.abrupt("return",ib(t,r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return $v(e)}(),h=function(e){var t=e.network;return function(){var e=t.try();return null!=e&&Boolean(e.libp2p.isStarted())}}({network:c}),p=new WS(i),d=Object.values($c);(i.ipld&&i.ipld.hashers?i.ipld.hashers:[]).forEach((function(e){return d.push(e)})),this.hashers=new c2({hashers:d,loadHasher:i.ipld&&i.ipld.loadHasher});var v=Object.values(Xc);(i.ipld&&i.ipld.bases?i.ipld.bases:[]).forEach((function(e){return v.push(e)})),this.bases=new i2({bases:v,loadBase:i.ipld&&i.ipld.loadBase});var y=new Bb({repo:s,codecs:a}),b=new CA({codecs:a,hashers:this.hashers,preload:l,repo:s}),g=new nA({dns:f,ipns:p,repo:s,codecs:a,peerId:o,isOnline:h,keychain:u,options:i}),m=function(e){var t=e.repo,r=e.codecs,n=e.bases,a=e.name;function i(){return i=An(En().mark((function e(i){var o,s,u,c,l,f,h,p,d,v,y,b,g,m,w,k,x,_,E,S,A,C,I,T,D,R=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=R.length>1&&void 0!==R[1]?R[1]:{},Mv(i)){e.next=3;break}throw new Error("invalid argument "+i);case 3:if(!Fv(i)){e.next=32;break}s=!1,u=!1,e.prev=6,l=zn(a.resolve(i,o));case 8:return e.next=10,l.next();case 10:if(!(s=!(f=e.sent).done)){e.next=16;break}h=f.value,i=h;case 13:s=!1,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),u=!0,c=e.t0;case 22:if(e.prev=22,e.prev=23,!s||null==l.return){e.next=27;break}return e.next=27,l.return();case 27:if(e.prev=27,!u){e.next=30;break}throw c;case 30:return e.finish(27);case 31:return e.finish(22);case 32:if(p=i.split("/"),d=ub(p),v=d[1],y=d[2],b=d.slice(3),!o.cidBase){e.next=39;break}return e.next=36,n.getBase(o.cidBase);case 36:e.t1=e.sent,e.next=40;break;case 39:e.t1=void 0;case 40:if(g=e.t1,m=Eb(y),0!==b.length){e.next=45;break}return w=g?g.encoder.encode(m):y,e.abrupt("return","/".concat(v,"/").concat(w));case 45:k=wi.decode(m),i=b.join("/"),x=ly(k,i,r,t,o),_=k,E=i,S=!1,A=!1,e.prev=52,I=zn(x);case 54:return e.next=56,I.next();case 56:if(!(S=!(T=e.sent).done)){e.next=62;break}D=T.value,wi.asCID(D.value)&&(_=D.value,E=D.remainderPath);case 59:S=!1,e.next=54;break;case 62:e.next=68;break;case 64:e.prev=64,e.t2=e.catch(52),A=!0,C=e.t2;case 68:if(e.prev=68,e.prev=69,!S||null==I.return){e.next=73;break}return e.next=73,I.return();case 73:if(e.prev=73,!A){e.next=76;break}throw C;case 76:return e.finish(73);case 77:return e.finish(68);case 78:return e.abrupt("return","/ipfs/".concat(_.toString(g&&g.encoder)).concat(E?"/"+E:""));case 79:case"end":return e.stop()}}),e,null,[[6,18,22,32],[23,,27,31],[52,64,68,78],[69,,73,77]])}))),i.apply(this,arguments)}return $v((function(e){return i.apply(this,arguments)}))}({repo:s,codecs:a,bases:this.bases,name:g}),w=new WU({repo:s,codecs:a,hashers:this.hashers,preload:l}),k=Object.assign(function(e){var t=e.repo,r=e.codecs,n=e.resolve,a=e.preload;function i(){return i=Hn((function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function o(){var s,u,c,l,f,h,p;return En().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(0!==i.maxDepth){o.next=2;break}return o.abrupt("return");case 2:if(!i.edges||!i.format||i.format===iA){o.next=4;break}throw new Error("Cannot set edges to true and also specify format");case 4:i.format=i.edges?oA:i.format,"number"!==typeof i.maxDepth&&(i.maxDepth=i.recursive?1/0:1),i.timeout&&(s=new Uf.TimeoutController(i.timeout),u=[s.signal],i.signal&&u.push(i.signal),i.signal=(0,Wv.anySignal)(u)),c=Array.isArray(e)?e:[e],l=c.map((function(e){return sA(a,e,i)})),f=Ni(l),o.prev=10,f.s();case 12:if((h=f.n()).done){o.next=24;break}return p=h.value,o.prev=14,o.delegateYield(Cb(zn(uA(n,t,r,p,i))),"t0",16);case 16:o.next=22;break;case 18:return o.prev=18,o.t1=o.catch(14),o.next=22,{ref:"",err:o.t1.message};case 22:o.next=12;break;case 24:o.next=29;break;case 26:o.prev=26,o.t2=o.catch(10),f.e(o.t2);case 29:return o.prev=29,f.f(),o.finish(29);case 32:case"end":return o.stop()}}),o,null,[[10,26,29,32],[14,18]])}))()})),i.apply(this,arguments)}return function(e){return i.apply(this,arguments)}}({repo:s,codecs:a,resolve:m,preload:l}),{local:yA({repo:n.repo})}),x=new MO({preload:l,repo:s,options:i.EXPERIMENTAL,hashers:this.hashers}),_=x.add,E=x.addAll,S=x.cat,A=x.get,C=x.ls,I=_F({repo:s,preload:l,hashers:this.hashers,options:i}),T=function(e){var t=e.preload,r=e.files,n=e.options,a=void 0===n?{}:n;if(a.interval=a.interval||3e4,!a.enabled){nM("MFS preload disabled");var i=function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{start:i,stop:i}}var o,s="",u=function(){var e=An(En().mark((function e(){var n,i;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.stat("/");case 3:if(n=e.sent,i=n.cid.toString(),s===i){e.next=10;break}return nM("preloading updated MFS root ".concat(s," -> ").concat(n.cid)),e.next=9,t(n.cid);case 9:s=i;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),nM.error("failed to preload MFS root",e.t0);case 15:return e.prev=15,o=setTimeout(u,a.interval),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return{start:function(){return An(En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.stat("/");case 2:t=e.sent,s=t.cid.toString(),nM("monitoring MFS root ".concat(t.cid)),o=setTimeout(u,a.interval);case 6:case"end":return e.stop()}}),e)})))()},stop:function(){clearTimeout(o)}}}({files:I,preload:l,options:i.preload});this.preload=l,this.name=g,this.ipns=p,this.pin=y,this.resolve=m,this.block=b,this.refs=k,this.start=function(e){var t=e.network,r=e.preload,n=e.peerId,a=e.keychain,i=e.repo,o=e.ipns,s=e.mfsPreload,u=e.print,c=e.hashers,l=e.options,f=function(){var e=An(En().mark((function e(){var f,h;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fy.start(t,{peerId:n,repo:i,print:u,hashers:c,options:l});case 2:return f=e.sent,h=f.libp2p,e.next=6,Promise.all([o.startOnline({keychain:a,libp2p:h,peerId:n,repo:i}),r.start(),s.start()]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f}({network:c,peerId:o,repo:s,preload:l,ipns:p,mfsPreload:T,print:r,keychain:u,hashers:this.hashers,options:i}),this.stop=function(e){var t=e.network,r=e.preload,n=e.ipns,a=e.repo,i=e.mfsPreload,o=function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.stop(),n.stop(),i.stop()]);case 2:return e.next=4,fy.stop(t);case 4:return e.next=6,a.close();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o}({network:c,preload:l,mfsPreload:T,ipns:p,repo:s}),this.dht=function(e){var t=e.network,r=e.repo,n=e.peerId,a=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function a(){var i,o,s;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Mf(Mxe(t,n,r));case 2:if(i=a.sent,o=i.libp2p,s=e instanceof Uint8Array?e:Uxe(e),null!=o.dht){a.next=7;break}throw ca(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 7:return a.delegateYield(Cb(zn(o.dht.get(s,r))),"t0",8);case 8:case"end":return a.stop()}}),a)})))()},i=function(e,r,a){return Hn(En().mark((function i(){var o,s,u;return En().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Mf(Mxe(t,n,a));case 2:if(o=i.sent,s=o.libp2p,u=e instanceof Uint8Array?e:Uxe(e),null!=s.dht){i.next=7;break}throw ca(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 7:return i.delegateYield(Cb(zn(s.dht.put(u,r,a))),"t0",8);case 8:case"end":return i.stop()}}),i)})))()},o=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function a(){var i,o;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Mf(Mxe(t,n,r));case 2:if(i=a.sent,null!=(o=i.libp2p).dht){a.next=6;break}throw ca(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 6:return a.delegateYield(Cb(zn(o.dht.findProviders(e,{signal:r.signal}))),"t0",7);case 7:case"end":return a.stop()}}),a)})))()},s=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function a(){var i,o;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Mf(Mxe(t,n,r));case 2:if(i=a.sent,null!=(o=i.libp2p).dht){a.next=6;break}throw ca(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 6:return a.delegateYield(Cb(zn(o.dht.findPeer(e,{signal:r.signal}))),"t0",7);case 7:case"end":return a.stop()}}),a)})))()},u=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1};return Hn(En().mark((function i(){var o,s;return En().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Mf(Mxe(t,n,a));case 2:return o=i.sent,s=o.libp2p,i.next=6,Mf(r.blocks.has(e));case 6:if(i.sent){i.next=9;break}throw ca(new Error("block(s) not found locally, cannot provide"),"ERR_BLOCK_NOT_FOUND");case 9:if(!a.recursive){i.next=11;break}throw ca(new Error("not implemented yet"),"ERR_NOT_IMPLEMENTED_YET");case 11:if(null!=s.dht){i.next=13;break}throw ca(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 13:return i.delegateYield(Cb(zn(s.dht.provide(e))),"t0",14);case 14:case"end":return i.stop()}}),i)})))()},c=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hn(En().mark((function a(){var i,o,s,u;return En().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Mf(Mxe(t,n,r));case 2:if(i=a.sent,o=i.libp2p,u=wi.asCID(e),s=null!=u?u.multihash.bytes:kb(e.toString()).toBytes(),null!=o.dht){a.next=8;break}throw ca(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 8:return a.delegateYield(Cb(zn(o.dht.getClosestPeers(s,r))),"t0",9);case 9:case"end":return a.stop()}}),a)})))()},l=i,f=o,h=s,p=u,d=c;return{get:$v(a),put:$v(l),findProvs:$v(f),findPeer:$v(h),provide:$v(p),query:$v(d)}}({network:c,repo:s,peerId:o}),this.pubsub=function(e){var t,r=e.network,n=e.config,a=bS(n||{},"Pubsub.Enabled",!0),i={};return{subscribe:a?$v((function(e,t){return o.apply(this,arguments)})):zxe,unsubscribe:a?$v((function(e,t){return s.apply(this,arguments)})):zxe,publish:a?$v((function(e,t){return u.apply(this,arguments)})):zxe,ls:a?$v((function(){return c.apply(this,arguments)})):zxe,peers:a?$v((function(e){return l.apply(this,arguments)})):zxe};function o(){return o=An(En().mark((function e(n,a){var o,s,u,c=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>2&&void 0!==c[2]?c[2]:{},e.next=3,r.use(o);case 3:s=e.sent,(u=s.libp2p).pubsub.subscribe(n),null==t&&(t=function(e){var t=e.detail;i[t.topic]&&i[t.topic].forEach((function(e){"function"!==typeof e?null!=e&&null!=e.handleEvent&&e.handleEvent(t):e(t)}))},u.pubsub.addEventListener("message",t)),null!=a&&(null==i[n]&&(i[n]=[]),i[n].push(a));case 8:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function s(){return s=An(En().mark((function e(n,a){var o,s,u,c=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>2&&void 0!==c[2]?c[2]:{},e.next=3,r.use(o);case 3:s=e.sent,u=s.libp2p,null!=a&&null!=i[n]&&(i[n]=i[n].filter((function(e){return e!==a})),0===i[n].length&&delete i[n]),"function"!==typeof a&&delete i[n],null==i[n]&&u.pubsub.unsubscribe(n),0===Object.keys(i).length&&(u.pubsub.removeEventListener("message",t),t=void 0);case 9:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function u(){return u=An(En().mark((function e(t,n){var a,i,o,s=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},e.next=3,r.use(a);case 3:if(i=e.sent,o=i.libp2p,n){e.next=7;break}throw ca(new Error('argument "data" is required'),"ERR_ARG_REQUIRED");case 7:return e.next=9,o.pubsub.publish(t,n);case 9:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function c(){return c=An(En().mark((function e(){var t,n,a,i=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,r.use(t);case 3:return n=e.sent,a=n.libp2p,e.abrupt("return",a.pubsub.getTopics());case 6:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function l(){return l=An(En().mark((function e(t){var n,a,i,o=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,r.use(n);case 3:return a=e.sent,i=a.libp2p,e.abrupt("return",i.pubsub.getSubscribers(t));case 6:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}}({network:c,config:i.config}),this.dns=f,this.isOnline=h,this.id=function(e){var t=e.peerId,r=e.network;function n(){return n=An(En().mark((function e(){var n,a,i,o,s,u,c,l,f,h=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>0&&void 0!==h[0]?h[0]:{},a=r.try()){e.next=8;break}if(!n.peerId){e.next=5;break}throw new al;case 5:if(null!=t.publicKey){e.next=7;break}throw ca(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");case 7:return e.abrupt("return",{id:t,publicKey:kh(t.publicKey,"base64pad"),addresses:[],agentVersion:"js-ipfs/".concat(zO),protocolVersion:"9000",protocols:[]});case 8:return i=a.libp2p,o=n.peerId?n.peerId:t,e.next=12,jO(o,i,n);case 12:return s=e.sent,u=kh(s.metadata.get("AgentVersion")||new Uint8Array),c=kh(s.metadata.get("ProtocolVersion")||new Uint8Array),l=s.id.toString(),f=s.publicKey?kh(s.publicKey,"base64pad"):"",e.abrupt("return",{id:o,publicKey:f,addresses:(s.addresses||[]).map((function(e){var t=e.toString();return t.endsWith("/p2p/".concat(l))?t:"".concat(t,"/p2p/").concat(l)})).sort().map((function(e){return Gd(e)})),agentVersion:u,protocolVersion:c,protocols:(s.protocols||[]).sort()});case 18:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return $v((function(){return n.apply(this,arguments)}))}({network:c,peerId:o}),this.version=function(e){var t=e.repo;function r(){return r=An(En().mark((function e(){var r,n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e.next=3,t.version.get();case 3:return r=e.sent,e.abrupt("return",{version:zO,commit:"",repo:"".concat(r),"ipfs-core":zO,"interface-ipfs-core":FO});case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return $v((function(){return r.apply(this,arguments)}))}({repo:s}),this.bitswap=new gA({network:c}),this.bootstrap=new kA({repo:s}),this.config=function(e){var t=e.repo;return{getAll:$v((function(){return r.apply(this,arguments)})),get:$v((function(e,t){return n.apply(this,arguments)})),set:$v((function(e,t,r){return a.apply(this,arguments)})),replace:$v((function(e,t){return i.apply(this,arguments)})),profiles:{apply:$v((function(e){return o.apply(this,arguments)})),list:$v(JO)}};function r(){return r=An(En().mark((function e(){var r,n=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",t.config.getAll(r));case 2:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}function n(){return(n=An(En().mark((function e(r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("key argument is required")));case 2:return e.abrupt("return",t.config.get(r,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return a=An(En().mark((function e(r,n,a){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.config.set(r,n,a));case 1:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}function i(){return i=An(En().mark((function e(r,n){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.config.replace(r,n));case 1:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function o(){return o=An(En().mark((function e(r){var n,a,i,o,s,u=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:{dryRun:!1},a=n.dryRun,i=YO[r]){e.next=5;break}throw new Error("No profile with name '".concat(r,"' exists"));case 5:return e.prev=5,e.next=8,t.config.getAll(n);case 8:if(o=e.sent,s=JSON.parse(JSON.stringify(o)),s=i.transform(s),a){e.next=14;break}return e.next=14,t.config.replace(s,n);case 14:return delete o.Identity.PrivKey,delete s.Identity.PrivKey,e.abrupt("return",{original:o,updated:s});case 19:throw e.prev=19,e.t0=e.catch(5),QO(e.t0),new Error("Could not apply profile '".concat(r,"' to config: ").concat(e.t0.message));case 23:case"end":return e.stop()}}),e,null,[[5,19]])}))),o.apply(this,arguments)}}({repo:s}),this.ping=function(e){var t=e.network;function r(){return r=Hn((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En().mark((function n(){var a,i,o,s,u,c,l,f,h,p;return En().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mf(t.use());case 2:return a=n.sent,i=a.libp2p,r.count=r.count||10,n.next=7,Mf(i.peerStore.get(e));case 7:if(o=n.sent,s=o&&o.id){n.next=16;break}return n.next=12,jn(jn({},Oxe),{},{text:"Looking up peer ".concat(e)});case 12:return n.next=14,Mf(i.peerRouting.findPeer(e));case 14:u=n.sent,s=u&&u.id;case 16:if(s){n.next=18;break}throw new Error("Peer was not found");case 18:return n.next=20,jn(jn({},Oxe),{},{text:"PING ".concat(s.toString())});case 20:c=0,l=0,f=0;case 23:if(!(f<r.count)){n.next=41;break}return n.prev=24,n.next=27,Mf(i.ping(s));case 27:return h=n.sent,l+=h,c++,n.next=32,jn(jn({},Oxe),{},{time:h});case 32:n.next=38;break;case 34:return n.prev=34,n.t0=n.catch(24),n.next=38,jn(jn({},Oxe),{},{success:!1,text:n.t0.toString()});case 38:f++,n.next=23;break;case 41:if(!c){n.next=45;break}return p=l/c,n.next=45,jn(jn({},Oxe),{},{text:"Average latency: ".concat(p,"ms")});case 45:case"end":return n.stop()}}),n,null,[[24,34]])}))()})),r.apply(this,arguments)}return $v((function(e){return r.apply(this,arguments)}))}({network:c}),this.add=_,this.addAll=E,this.cat=S,this.get=A,this.ls=C,this.dag=w,this.files=I,this.key=new AF({keychain:u}),this.object=new RF({preload:l,codecs:a,repo:s}),this.repo=new OF({repo:s,hashers:this.hashers}),this.stats=new UF({repo:s,network:c}),this.swarm=new Lxe({network:c}),Object.defineProperty(this,"libp2p",{get:function(){var e=c.try();return e?e.libp2p:void 0}});var D=function(){return Promise.reject(ca(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED"))},R=function(){var e=Hn(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw ca(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();this.commands=D,this.diag={cmds:D,net:D,sys:D},this.log={level:D,ls:D,tail:R},this.mount=D,this.codecs=a}return Dn(e,[{key:"init",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new nl;case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Kxe=function(){var e=An(En().mark((function e(t){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=to({Data:new _a({type:"directory"}).marshal(),Links:[]}),e.next=3,t.block.put(r,{mhtype:"sha2-256",format:"dag-pb"});case 3:return n=e.sent,e.next=6,t.pin.add(n);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hxe=function(){return{start:!0,EXPERIMENTAL:{},preload:{enabled:!Wn.isTest,addresses:["/dns4/node0.preload.ipfs.io/https","/dns4/node1.preload.ipfs.io/https","/dns4/node2.preload.ipfs.io/https","/dns4/node3.preload.ipfs.io/https"]}}};function Gxe(){return Gxe=An(En().mark((function e(){var t,a,s,u,c,l,f,h,p,d,v,y=arguments;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},t=Fxe(Hxe(),t),a=t.init||{},s={name:Ac.name,code:Ac.code,encode:function(e){return e},decode:function(e){return e}},u=Object.values(el),[r,n,i,o,s].concat(t.ipld&&t.ipld.codecs||[]).forEach((function(e){return u.push(e)})),c=new s2({codecs:u,loadCodec:t.ipld&&t.ipld.loadCodec}),l=t.silent?Vxe:console.log,Vxe("creating repo"),e.next=11,_we.start(l,c,t);case 11:return f=e.sent,Vxe("getting repo config"),e.next=15,f.repo.config.getAll();case 15:return h=e.sent,p=new qxe({storage:f,print:l,codecs:c,options:jn(jn({},t),{},{config:h})}),Vxe("starting preload"),e.next=20,p.preload.start();case 20:if(Vxe("starting storage"),p.ipns.startOffline(f),!f.isNew||a.emptyRepo){e.next=39;break}return e.next=25,Kxe(p);case 25:return d=e.sent,Vxe("adding default assets"),e.next=29,void p.addAll;case 29:if(Vxe("initializing IPNS keyspace"),null!=f.peerId.publicKey){e.next=32;break}throw ca(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");case 32:return v=new Uf.TimeoutController(jxe),e.prev=33,e.next=36,p.ipns.initializeKeyspace(f.peerId,Bf("/ipfs/".concat(d)),{signal:v.signal});case 36:return e.prev=36,v.clear(),e.finish(36);case 39:if(!1===t.start){e.next=43;break}return Vxe("starting node"),e.next=43,p.start();case 43:return e.abrupt("return",p);case 44:case"end":return e.stop()}}),e,null,[[33,,36,39]])}))),Gxe.apply(this,arguments)}__webpack_require__(5057);var Wxe=function(){return Gxe.apply(this,arguments)},Yxe=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Qxe;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Qxe=Math.pow(2,31);var Jxe=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(127&n)<<i:(127&n)*Math.pow(2,i),i+=7}while(n>=128);return e.bytes=o-r,a};var Zxe=Math.pow(2,7),Xxe=Math.pow(2,14),$xe=Math.pow(2,21),e_e=Math.pow(2,28),t_e=Math.pow(2,35),r_e=Math.pow(2,42),n_e=Math.pow(2,49),a_e=Math.pow(2,56),i_e=Math.pow(2,63),o_e={encode:Yxe,decode:Jxe,encodingLength:function(e){return e<Zxe?1:e<Xxe?2:e<$xe?3:e<e_e?4:e<t_e?5:e<r_e?6:e<n_e?7:e<a_e?8:e<i_e?9:10}},s_e=o_e,u_e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=s_e.decode(e,t);return[r,s_e.decode.bytes]},c_e=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return s_e.encode(e,t,r),t},l_e=function(e){return s_e.encodingLength(e)},f_e=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),h_e=Dn((function e(t,r,n,a){Cn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var p_e=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<a)&&-1!==h;h--,f++)l+=s*o[h]>>>0,o[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var d=new Uint8Array(n+(i-p)),v=n;p!==i;)d[v++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],h=0,p=o-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},d_e=p_e,v_e=function(){function e(t,r,n){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Dn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),y_e=function(){function e(t,r,n){if(Cn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Dn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return g_e(this,e)}}]),e}(),b_e=function(){function e(t){Cn(this,e),this.decoders=t}return Dn(e,[{key:"or",value:function(e){return g_e(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),g_e=function(e,t){return new b_e(jn(jn({},e.decoders||Mn({},e.prefix,e)),t.decoders||Mn({},t.prefix,t)))},m_e=function(){function e(t,r,n,a){Cn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new v_e(t,r,n),this.decoder=new y_e(t,r,a)}return Dn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),w_e=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new m_e(t,r,n,a)},k_e=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=d_e(n,r),i=a.encode,o=a.decode;return w_e({prefix:t,name:r,encode:i,decode:function(e){return f_e(o(e))}})},x_e=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return w_e({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var h=a[e[f]];if(void 0===h)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|h,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},__e=k_e({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),E_e=(k_e({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),x_e({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),S_e=(x_e({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),x_e({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),x_e({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),x_e({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),x_e({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),x_e({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),x_e({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),x_e({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),new WeakMap),A_e=function(e){var t=S_e.get(e);if(null==t){var r=new Map;return S_e.set(e,r),r}return t},C_e=function(e,t){function r(e,t,n,a){Cn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Dn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==R_e)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==P_e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=function(e,t){var r=t.byteLength,n=l_e(e),a=n+l_e(r),i=new Uint8Array(a+r);return c_e(e,i,0),c_e(r,i,n),i.set(t,a),new h_e(e,r,t,i)}(e.code,e.digest);return r.createV1(this.code,t);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return function(e,t){var r=e.bytes;return 0===e.version?T_e(r,A_e(e),t||__e.encoder):D_e(r,A_e(e),t||E_e.encoder)}(this,e)}},{key:"toJSON",value:function(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||N_e(n,a,i.bytes))}if(!0===t[L_e]){var o=t.version,s=t.multihash,u=t.code,c=function(e){var t=f_e(e),r=Ia(u_e(t),2),n=r[0],a=r[1],i=Ia(u_e(t.subarray(a)),2),o=i[0],s=i[1],u=t.subarray(a+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new h_e(n,o,u,t)}(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==R_e)throw new Error("Version 0 CID must use dag-pb (code: ".concat(R_e,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,N_e(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,R_e,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=Ia(r.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=f_e(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new h_e(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Ia(u_e(e.subarray(t)),2),n=r[0],a=r[1];return t+=a,n},n=r(),a=R_e;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=Ia(I_e(e,t),2),a=n[0],i=n[1],o=r.decode(i);return A_e(o).set(a,e),o}}]),r}(),I_e=function(e,t){switch(e[0]){case"Q":var r=t||__e;return[__e.prefix,r.decode("".concat(__e.prefix).concat(e))];case __e.prefix:var n=t||__e;return[__e.prefix,n.decode(e)];case E_e.prefix:var a=t||E_e;return[E_e.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},T_e=function(e,t,r){var n=r.prefix;if(n!==__e.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},D_e=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},R_e=112,P_e=18,N_e=function(e,t,r){var n=l_e(e),a=n+l_e(t),i=new Uint8Array(a+r.byteLength);return c_e(e,i,0),c_e(t,i,n),i.set(r,a),i},L_e=Symbol.for("@ipld/js-cid/CID"),O_e=__webpack_require__(7960);var B_e=function(){function e(t){switch(Cn(this,e),O_e.fromString(t.dataset.mediatype).type.toLowerCase()){case"text":this.insert=function(e){var t=e.element,r=function(){var e=An(En().mark((function e(r){var n,a,i,o;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new FileReader,i=O_e.fromString(t.dataset.mediatype),o=(null===(n=t.dataset)||void 0===n?void 0:n.encord)||null,a.onload=function(e){switch(i.subtype){case"plain":t.innerText=e.target.result.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");break;case"html":case"css":case"javascript":return!1}},a.readAsText(r,o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r}({element:t});break;case"image":this.insert=function(e){var t=e.element,r=function(){var e=An(En().mark((function e(r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new FileReader,a=t.tagName,n.addEventListener("load",(function(e){switch(a){case"IMG":t.src=e.target.result;break;case"CANVAS":var r=new Image;r.src=e.target.result,t.getContext("2d").drawImage(r,0,0)}})),n.readAsDataURL(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r}({element:t});break;case"audio":this.insert=function(e){var t=e.element,r=function(){var e=An(En().mark((function e(r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new FileReader,a=t.tagName,n.addEventListener("load",(function(e){"AUDIO"===a&&(t.src=e.target.result)})),n.readAsDataURL(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r}({element:t});break;case"video":this.insert=function(e){var t=e.element,r=function(){var e=An(En().mark((function e(r){var n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new FileReader,a=t.tagName,n.addEventListener("load",(function(e){"VIDEO"===a&&(t.src=e.target.result)})),n.readAsDataURL(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r}({element:t});break;default:return!1}}return Dn(e,[{key:"valid",value:function(){}}]),e}(),U_e=function(e){Pn(r,e);var t=Un(r);function r(e,n){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Cn(this,r),a=t.call(this,n),"object"!=typeof i)throw new Error("ipfs-tag: Bad parameter.");var o=Object.assign(r.defaultOptions,i),s=o.targetClassName,u=o.timeout,c=o.debug;if("string"!=typeof s)throw new Error("ipfs-tag: Bad parameter.");if("number"!=typeof u)throw new Error("ipfs-tag: Bad parameter.");if("boolean"!=typeof c)throw new Error("ipfs-tag: Bad parameter.");return a.ipfs=e,a.element=n,a.targetClassName=s,a.media=O_e.fromString(n.dataset.mediatype),a.timeout=u,a.debug=c?console.debug:function(){},a}return Dn(r,[{key:"display",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o,s,u;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ipfs){e.next=3;break}return this.debug("ipfs: ipfs is null"),e.abrupt("return",!1);case 3:if(this.ipfs.isOnline()){e.next=6;break}return this.debug("ipfs: ipfs is offline"),e.abrupt("return",!1);case 6:e.t0=Boolean(this.element),e.next=!0===e.t0?9:!1===e.t0?16:29;break;case 9:return t=new B_e(this.element),e.next=12,this.fetch_from_ipfs(this.ipfs,this.element);case 12:return r=e.sent,n=new Blob(r,{type:this.media.asString()}),t.insert(n),e.abrupt("break",29);case 16:a=document.getElementsByClassName(this.targetClassName),i=0;case 18:if(!(i<a.length)){e.next=28;break}return o=new B_e(this.element),e.next=22,this.fetch_from_ipfs(this.ipfs,a[i]);case 22:s=e.sent,u=new Blob(s,{type:this.media.asString()}),o.insert(u);case 25:i++,e.next=18;break;case 28:return e.abrupt("break",29);case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetch_from_ipfs",value:function(){var e=An(En().mark((function e(){var t,r,n,a,i,o,s,u,c,l;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=C_e.parse(this.element.dataset.cid),n=(null===(t=this.element.dataset)||void 0===t?void 0:t.encord)||null,this.debug("##= ".concat(this.element.tagName,"\n# id        : ").concat(this.element.id,"\n# class     : ").concat(this.element.className,"\n# cid       : ").concat(r,"\n# mediatype : ").concat(this.media.asString(),"\n# encord    : ").concat(n)),a=[],i=!1,o=!1,e.prev=6,u=zn(this.ipfs.cat(r));case 8:return e.next=10,u.next();case 10:if(!(i=!(c=e.sent).done)){e.next=16;break}l=c.value,a.push(l);case 13:i=!1,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),o=!0,s=e.t0;case 22:if(e.prev=22,e.prev=23,!i||null==u.return){e.next=27;break}return e.next=27,u.return();case 27:if(e.prev=27,!o){e.next=30;break}throw s;case 30:return e.finish(27);case 31:return e.finish(22);case 32:return e.abrupt("return",a);case 33:case"end":return e.stop()}}),e,this,[[6,18,22,32],[23,,27,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"runIpfs",value:function(){var e=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wxe({repo:"ipfs-"+Math.random()});case 2:window.ipfs=e.sent,this.ipfs=ipfs||window.ipfs,this.debug("ipfs-tag: ipfs is ready");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"DispatchAttachedEvent",value:function(e){try{this.debug("DispatchAttachedEvent")}catch(eL){}finally{var t=new CustomEvent("ipfs-tag:attached",{element:this.element,success:e});this.element.dispatchEvent(t)}}}]),r}(B_e);Mn(U_e,"defaultOptions",{targetClassName:"ipfs-tag",auto:!1,timeout:5e3,debug:!1});var M_e=null;function z_e(){var e=Ia((0,kn.useState)(Boolean(M_e)),2),t=e[0],r=e[1],n=Ia((0,kn.useState)(null),2),a=n[0],i=n[1];(0,kn.useEffect)((function(){return function(){s.apply(this,arguments)}(),function(){M_e&&M_e.stop&&(console.log("Stopping IPFS"),M_e.stop().catch((function(e){return console.error(e)})),M_e=null,r(!1))}}),[]);var o={start:!0,Addresses:{Swarm:["/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star","/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star","/dns4/webrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star"]}};function s(){return(s=An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M_e){e.next=4;break}console.log("IPFS already started"),e.next=24;break;case 4:if(!window.ipfs||!window.ipfs.enable){e.next=11;break}return console.log("Found window.ipfs"),e.next=8,window.ipfs.enable({commands:["id"]});case 8:M_e=e.sent,e.next=24;break;case 11:return e.prev=11,console.time("IPFS Started"),e.next=15,Wxe(o);case 15:M_e=e.sent,console.timeEnd("IPFS Started"),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(11),console.error("IPFS init error:",e.t0),M_e=null,i(e.t0);case 24:r(Boolean(M_e));case 25:case"end":return e.stop()}}),e,null,[[11,19]])})))).apply(this,arguments)}return{ipfs:M_e,isIpfsReady:t,ipfsInitError:a}}var F_e=__webpack_require__.p+"static/media/logo.2c899a97eab096d857e4.png",V_e=__webpack_require__(6417);var j_e=function(){var e=z_e().ipfs,t=function(e){var t=e.ipfs,r=e.options,n=void 0===r?null:r,a=Object.assign({targetClassName:"ipfs-tag",auto:!1,timeout:5e3,debug:!1},n),i=a.targetClassName,o=(a.timeout,a.debug,function(){var e=An(En().mark((function e(){var r,n,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=document.getElementsByClassName(i),n=0;case 2:if(!(n<r.length)){e.next=9;break}return a=new U_e(t,r[n]),e.next=6,a.display();case 6:n++,e.next=2;break;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return{display:o}}({ipfs:e}),r=t.display;return(0,V_e.jsxs)("div",{className:"App",children:[(0,V_e.jsx)("header",{className:"App-header",children:(0,V_e.jsx)("img",{src:F_e,className:"App-logo",alt:"logo"})}),!1===Boolean(e)?(0,V_e.jsx)("p",{children:"IPFS is not ready."}):(0,V_e.jsxs)("div",{children:[(0,V_e.jsx)("h2",{children:"ipfs-tag example"}),(0,V_e.jsx)("div",{id:"example",children:(0,V_e.jsx)("span",{className:"ipfs-tag","data-cid":"QmcZFY95TMnf57CuVaVPUaPyLiSsCWdacSxrLZYywqLDQS","data-mediatype":"text/plain","data-encord":"UTF-8"})}),(0,V_e.jsxs)("div",{children:[(0,V_e.jsx)("p",{children:"image"}),(0,V_e.jsx)("img",{className:"ipfs-tag","data-cid":"QmQqzMTavQgT4f4T5v6PWBp7XNKtoPmC9jvn12WPT3gkSE","data-mediatype":"image/png",width:100,height:100,alt:""}),(0,V_e.jsx)("canvas",{className:"ipfs-tag","data-cid":"QmQqzMTavQgT4f4T5v6PWBp7XNKtoPmC9jvn12WPT3gkSE","data-mediatype":"image/png",width:100,height:100,children:"alt"})]}),(0,V_e.jsxs)("div",{children:[(0,V_e.jsx)("p",{children:"beep wav"}),(0,V_e.jsx)("audio",{controls:!0,className:"ipfs-tag","data-cid":"QmPcY4qe9vr3CA3HgXANaBVQEkWeJsBT4zGiffuJ2GKjCv","data-mediatype":"audio/wav"})]}),(0,V_e.jsxs)("div",{children:[(0,V_e.jsx)("p",{children:"music(acc)"}),(0,V_e.jsx)("audio",{controls:!0,className:"ipfs-tag","data-cid":"QmUysYps3hyEvd4YpTFynWvyQp3sYkxcNzSC8ExeP3Eac6","data-mediatype":"audio/acc"})]}),(0,V_e.jsxs)("div",{children:[(0,V_e.jsx)("p",{children:"music(ogg)"}),(0,V_e.jsx)("audio",{controls:!0,className:"ipfs-tag","data-cid":"QmaSrVYHfteF4Uzjd2BWewgLnQiSxfAhdtD5iuN8z1KyJo","data-mediatype":"audio/ogg"})]}),(0,V_e.jsxs)("div",{children:[(0,V_e.jsx)("p",{children:"video(mp4)"}),(0,V_e.jsx)("video",{controls:!0,className:"ipfs-tag","data-cid":"QmTca4A43f4kEvzTouvYTegtp6KobixRqweV12NrvwwtFP","data-mediatype":"video/mp4"})]}),(0,V_e.jsx)("button",{onClick:An(En().mark((function e(){return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])}))),children:" get"})]})]})},q_e=function(e){e&&e instanceof Function&&__webpack_require__.e(27).then(__webpack_require__.bind(__webpack_require__,4027)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),i(e),o(e)}))};xn.createRoot(document.getElementById("root")).render((0,V_e.jsx)(kn.StrictMode,{children:(0,V_e.jsx)(j_e,{})})),q_e()}()})();